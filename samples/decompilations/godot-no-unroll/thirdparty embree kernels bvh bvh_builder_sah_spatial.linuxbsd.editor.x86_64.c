
/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__adjust_heap<embree::PrimRef*, long, embree::PrimRef,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::PrimRef*, long, long, embree::PrimRef,
   __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::__adjust_heap<embree::PrimRef*,long,embree::PrimRef,__gnu_cxx::__ops::_Iter_less_iter>
               (long param_1,long param_2,ulong param_3,undefined4 *param_4)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  
  lVar8 = (long)(param_3 - 1) / 2;
  lVar7 = param_2;
  if (param_2 < lVar8) {
    do {
      lVar6 = (lVar7 + 1) * 2;
      lVar3 = (lVar7 + 1) * 0x40;
      lVar1 = param_1 + -0x20 + lVar3;
      puVar4 = (undefined8 *)(lVar3 + param_1);
      if (CONCAT44(*(undefined4 *)((long)puVar4 + 0x1c),*(undefined4 *)((long)puVar4 + 0xc)) <
          CONCAT44(*(undefined4 *)(lVar1 + 0x1c),*(undefined4 *)(lVar1 + 0xc))) {
        lVar6 = lVar6 + -1;
        puVar4 = (undefined8 *)(lVar6 * 0x20 + param_1);
      }
      uVar2 = puVar4[1];
      puVar5 = (undefined8 *)(lVar7 * 0x20 + param_1);
      *puVar5 = *puVar4;
      puVar5[1] = uVar2;
      uVar2 = puVar4[3];
      puVar5[2] = puVar4[2];
      puVar5[3] = uVar2;
      lVar7 = lVar6;
    } while (lVar6 < lVar8);
    if ((param_3 & 1) == 0) goto LAB_00100158;
  }
  else {
    puVar4 = (undefined8 *)(param_2 * 0x20 + param_1);
    lVar6 = param_2;
    if ((param_3 & 1) != 0) {
      uVar13 = *param_4;
      uVar14 = param_4[1];
      uVar15 = param_4[2];
      uVar16 = param_4[3];
      uVar9 = param_4[4];
      uVar10 = param_4[5];
      uVar11 = param_4[6];
      uVar12 = param_4[7];
      goto LAB_00100133;
    }
LAB_00100158:
    if ((long)(param_3 - 2) / 2 == lVar6) {
      lVar7 = lVar6 + 1;
      lVar6 = lVar6 + lVar7;
      puVar5 = (undefined8 *)(param_1 + -0x20 + lVar7 * 0x40);
      uVar2 = puVar5[1];
      *puVar4 = *puVar5;
      puVar4[1] = uVar2;
      uVar2 = puVar5[3];
      puVar4[2] = puVar5[2];
      puVar4[3] = uVar2;
      puVar4 = (undefined8 *)(lVar6 * 0x20 + param_1);
    }
  }
  uVar13 = *param_4;
  uVar14 = param_4[1];
  uVar15 = param_4[2];
  uVar16 = param_4[3];
  uVar9 = param_4[4];
  uVar10 = param_4[5];
  uVar11 = param_4[6];
  uVar12 = param_4[7];
  lVar7 = (lVar6 + -1) - (lVar6 + -1 >> 0x3f);
  if (param_2 < lVar6) {
    while( true ) {
      lVar8 = lVar7 >> 1;
      puVar4 = (undefined8 *)(param_1 + lVar6 * 0x20);
      puVar5 = (undefined8 *)(lVar8 * 0x20 + param_1);
      if (CONCAT44(uVar12,uVar16) <=
          CONCAT44(*(undefined4 *)((long)puVar5 + 0x1c),*(undefined4 *)((long)puVar5 + 0xc))) break;
      uVar2 = puVar5[1];
      *puVar4 = *puVar5;
      puVar4[1] = uVar2;
      uVar2 = puVar5[3];
      puVar4[2] = puVar5[2];
      puVar4[3] = uVar2;
      lVar7 = (lVar8 + -1) - (lVar8 + -1 >> 0x3f);
      lVar6 = lVar8;
      if (lVar8 <= param_2) {
        *(undefined4 *)puVar5 = uVar13;
        *(undefined4 *)((long)puVar5 + 4) = uVar14;
        *(undefined4 *)(puVar5 + 1) = uVar15;
        *(undefined4 *)((long)puVar5 + 0xc) = uVar16;
        *(undefined4 *)(puVar5 + 2) = uVar9;
        *(undefined4 *)((long)puVar5 + 0x14) = uVar10;
        *(undefined4 *)(puVar5 + 3) = uVar11;
        *(undefined4 *)((long)puVar5 + 0x1c) = uVar12;
        return;
      }
    }
  }
LAB_00100133:
  *(undefined4 *)puVar4 = uVar13;
  *(undefined4 *)((long)puVar4 + 4) = uVar14;
  *(undefined4 *)(puVar4 + 1) = uVar15;
  *(undefined4 *)((long)puVar4 + 0xc) = uVar16;
  *(undefined4 *)(puVar4 + 2) = uVar9;
  *(undefined4 *)((long)puVar4 + 0x14) = uVar10;
  *(undefined4 *)(puVar4 + 3) = uVar11;
  *(undefined4 *)((long)puVar4 + 0x1c) = uVar12;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   long, embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   long, long, embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >)
   [clone .isra.0] */

void std::
     __adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (long param_1,long param_2,ulong param_3,undefined8 *param_4)

{
  undefined1 uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 *puVar13;
  long lVar14;
  long lVar15;
  undefined8 *puVar16;
  long lVar17;
  long lVar18;
  long lVar19;
  
  lVar18 = (long)(param_3 - 1) / 2;
  lVar19 = param_2;
  if (param_2 < lVar18) {
    do {
      lVar14 = (lVar19 + 1) * 2;
      lVar15 = (lVar19 + 1) * 0xe0;
      puVar13 = (undefined8 *)(param_1 + lVar15);
      if ((ulong)(*(long *)(param_1 + -0x18 + lVar15) - *(long *)(param_1 + -0x20 + lVar15)) <
          (ulong)(puVar13[0xb] - puVar13[10])) {
        lVar14 = lVar14 + -1;
        puVar13 = (undefined8 *)(lVar14 * 0x70 + param_1);
      }
      puVar16 = (undefined8 *)(lVar19 * 0x70 + param_1);
      *puVar16 = *puVar13;
      *(undefined1 *)(puVar16 + 1) = *(undefined1 *)(puVar13 + 1);
      uVar2 = puVar13[3];
      puVar16[2] = puVar13[2];
      puVar16[3] = uVar2;
      uVar2 = puVar13[5];
      puVar16[4] = puVar13[4];
      puVar16[5] = uVar2;
      uVar2 = puVar13[7];
      puVar16[6] = puVar13[6];
      puVar16[7] = uVar2;
      uVar2 = puVar13[9];
      puVar16[8] = puVar13[8];
      puVar16[9] = uVar2;
      uVar2 = puVar13[0xb];
      puVar16[10] = puVar13[10];
      puVar16[0xb] = uVar2;
      puVar16[0xc] = puVar13[0xc];
      lVar19 = lVar14;
    } while (lVar14 < lVar18);
  }
  else {
    puVar13 = (undefined8 *)(param_2 * 0x70 + param_1);
    lVar14 = param_2;
  }
  if (((param_3 & 1) == 0) && ((long)(param_3 - 2) / 2 == lVar14)) {
    puVar16 = (undefined8 *)(param_1 + -0x70 + (lVar14 + 1) * 0xe0);
    *puVar13 = *puVar16;
    *(undefined1 *)(puVar13 + 1) = *(undefined1 *)(puVar16 + 1);
    uVar2 = puVar16[3];
    lVar14 = (lVar14 + 1) * 2 + -1;
    puVar13[2] = puVar16[2];
    puVar13[3] = uVar2;
    uVar2 = puVar16[5];
    puVar13[4] = puVar16[4];
    puVar13[5] = uVar2;
    uVar2 = puVar16[7];
    puVar13[6] = puVar16[6];
    puVar13[7] = uVar2;
    uVar2 = puVar16[9];
    puVar13[8] = puVar16[8];
    puVar13[9] = uVar2;
    uVar2 = puVar16[0xb];
    puVar13[10] = puVar16[10];
    puVar13[0xb] = uVar2;
    puVar13[0xc] = puVar16[0xc];
    puVar13 = (undefined8 *)(lVar14 * 0x70 + param_1);
  }
  uVar2 = *param_4;
  uVar1 = *(undefined1 *)(param_4 + 1);
  uVar4 = param_4[2];
  uVar5 = param_4[3];
  uVar6 = param_4[4];
  uVar7 = param_4[5];
  uVar8 = param_4[6];
  uVar9 = param_4[7];
  uVar10 = param_4[8];
  uVar11 = param_4[9];
  lVar19 = param_4[10];
  lVar18 = param_4[0xb];
  uVar3 = param_4[0xc];
  lVar15 = (lVar14 + -1) - (lVar14 + -1 >> 0x3f);
  if (param_2 < lVar14) {
    do {
      lVar17 = lVar15 >> 1;
      puVar16 = (undefined8 *)(lVar17 * 0x70 + param_1);
      puVar13 = (undefined8 *)(lVar14 * 0x70 + param_1);
      if ((ulong)(puVar16[0xb] - puVar16[10]) <= (ulong)(lVar18 - lVar19)) break;
      *puVar13 = *puVar16;
      *(undefined1 *)(puVar13 + 1) = *(undefined1 *)(puVar16 + 1);
      uVar12 = puVar16[3];
      puVar13[2] = puVar16[2];
      puVar13[3] = uVar12;
      uVar12 = puVar16[5];
      puVar13[4] = puVar16[4];
      puVar13[5] = uVar12;
      uVar12 = puVar16[7];
      puVar13[6] = puVar16[6];
      puVar13[7] = uVar12;
      uVar12 = puVar16[9];
      puVar13[8] = puVar16[8];
      puVar13[9] = uVar12;
      uVar12 = puVar16[0xb];
      puVar13[10] = puVar16[10];
      puVar13[0xb] = uVar12;
      puVar13[0xc] = puVar16[0xc];
      lVar15 = (lVar17 + -1) - (lVar17 + -1 >> 0x3f);
      puVar13 = puVar16;
      lVar14 = lVar17;
    } while (param_2 < lVar17);
  }
  *puVar13 = uVar2;
  *(undefined1 *)(puVar13 + 1) = uVar1;
  puVar13[10] = lVar19;
  puVar13[0xb] = lVar18;
  puVar13[0xc] = uVar3;
  puVar13[2] = uVar4;
  puVar13[3] = uVar5;
  puVar13[4] = uVar6;
  puVar13[5] = uVar7;
  puVar13[6] = uVar8;
  puVar13[7] = uVar9;
  puVar13[8] = uVar10;
  puVar13[9] = uVar11;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >)
   [clone .isra.0] */

void std::
     __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (undefined8 *param_1)

{
  undefined1 uVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 *puVar14;
  undefined8 *puVar15;
  ulong uVar16;
  
  lVar2 = param_1[0xb];
  lVar3 = param_1[10];
  uVar4 = *param_1;
  uVar1 = *(undefined1 *)(param_1 + 1);
  uVar6 = param_1[2];
  uVar7 = param_1[3];
  uVar8 = param_1[4];
  uVar9 = param_1[5];
  uVar10 = param_1[6];
  uVar11 = param_1[7];
  uVar12 = param_1[8];
  uVar13 = param_1[9];
  uVar5 = param_1[0xc];
  uVar16 = param_1[-3] - param_1[-4];
  puVar15 = param_1 + -0xe;
  while (puVar14 = puVar15, uVar16 < (ulong)(lVar2 - lVar3)) {
    puVar14[0xe] = *puVar14;
    puVar14[0x10] = puVar14[2];
    puVar14[0x11] = puVar14[3];
    *(undefined1 *)(puVar14 + 0xf) = *(undefined1 *)(puVar14 + 1);
    puVar14[0x12] = puVar14[4];
    puVar14[0x13] = puVar14[5];
    puVar14[0x14] = puVar14[6];
    puVar14[0x15] = puVar14[7];
    puVar14[0x16] = puVar14[8];
    puVar14[0x17] = puVar14[9];
    puVar14[0x18] = puVar14[10];
    puVar14[0x19] = puVar14[0xb];
    puVar14[0x1a] = puVar14[0xc];
    puVar15 = puVar14 + -0xe;
    param_1 = puVar14;
    uVar16 = puVar14[-3] - puVar14[-4];
  }
  *param_1 = uVar4;
  *(undefined1 *)(param_1 + 1) = uVar1;
  param_1[10] = lVar3;
  param_1[0xb] = lVar2;
  param_1[0xc] = uVar5;
  param_1[2] = uVar6;
  param_1[3] = uVar7;
  param_1[4] = uVar8;
  param_1[5] = uVar9;
  param_1[6] = uVar10;
  param_1[7] = uVar11;
  param_1[8] = uVar12;
  param_1[9] = uVar13;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >)
   [clone .isra.0] */

void std::
     __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (undefined8 *param_1,undefined8 *param_2)

{
  undefined1 uVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 *puVar14;
  undefined8 *puVar15;
  undefined8 *puVar16;
  
  if (param_1 == param_2) {
    return;
  }
  puVar14 = param_1 + 0xe;
  while (param_2 != puVar14) {
    lVar2 = puVar14[0xb];
    lVar3 = puVar14[10];
    if ((ulong)(param_1[0xb] - param_1[10]) < (ulong)(lVar2 - lVar3)) {
      uVar4 = *puVar14;
      uVar1 = *(undefined1 *)(puVar14 + 1);
      uVar6 = puVar14[2];
      uVar7 = puVar14[3];
      uVar8 = puVar14[4];
      uVar9 = puVar14[5];
      uVar10 = puVar14[6];
      uVar11 = puVar14[7];
      uVar12 = puVar14[8];
      uVar13 = puVar14[9];
      uVar5 = puVar14[0xc];
      if (0 < (long)puVar14 - (long)param_1) {
        puVar15 = puVar14;
        do {
          puVar16 = puVar15 + -0xe;
          *puVar15 = puVar15[-0xe];
          puVar15[2] = puVar15[-0xc];
          puVar15[3] = puVar15[-0xb];
          *(undefined1 *)(puVar15 + 1) = *(undefined1 *)(puVar15 + -0xd);
          puVar15[4] = puVar15[-10];
          puVar15[5] = puVar15[-9];
          puVar15[0xc] = puVar15[-2];
          puVar15[6] = puVar15[-8];
          puVar15[7] = puVar15[-7];
          puVar15[8] = puVar15[-6];
          puVar15[9] = puVar15[-5];
          puVar15[10] = puVar15[-4];
          puVar15[0xb] = puVar15[-3];
          puVar15 = puVar16;
        } while (puVar16 != puVar14 + ((long)puVar14 - (long)param_1 >> 4) * -2);
      }
      *param_1 = uVar4;
      *(undefined1 *)(param_1 + 1) = uVar1;
      param_1[10] = lVar3;
      param_1[0xb] = lVar2;
      param_1[0xc] = uVar5;
      param_1[2] = uVar6;
      param_1[3] = uVar7;
      param_1[4] = uVar8;
      param_1[5] = uVar9;
      param_1[6] = uVar10;
      param_1[7] = uVar11;
      param_1[8] = uVar12;
      param_1[9] = uVar13;
      puVar14 = puVar14 + 0xe;
    }
    else {
      __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                ();
      puVar14 = puVar14 + 0xe;
    }
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::setExtentedRanges(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&, embree::sse2::PrimInfoExtRange&, unsigned long, unsigned long)
   [clone .isra.0] */

void embree::sse2::
     HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
     setExtentedRanges(PrimInfoExtRange *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3
                      ,ulong param_4,ulong param_5)

{
  ulong uVar1;
  ulong uVar2;
  float fVar3;
  
  uVar1 = *(long *)(param_1 + 0x50) - *(long *)(param_1 + 0x48);
  if ((long)(param_4 + param_5) < 0) {
    fVar3 = (float)(param_4 + param_5);
  }
  else {
    fVar3 = (float)(long)(param_4 + param_5);
  }
  fVar3 = ((float)param_4 / fVar3) * (float)uVar1;
  if ((float)((uint)fVar3 & _LC20) < _LC18) {
    fVar3 = (float)((uint)(float)(int)fVar3 | ~_LC20 & (uint)fVar3);
  }
  if (__LC7 <= fVar3) {
    uVar2 = (long)(fVar3 - __LC7) ^ 0x8000000000000000;
  }
  else {
    uVar2 = (ulong)fVar3;
  }
  if (uVar1 < uVar2) {
    uVar2 = uVar1;
  }
  *(ulong *)(param_2 + 0x50) = *(long *)(param_2 + 0x48) + uVar2;
  *(ulong *)(param_3 + 0x50) = (uVar1 + *(long *)(param_3 + 0x48)) - uVar2;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__insertion_sort<embree::PrimRef*, __gnu_cxx::__ops::_Iter_less_iter>(embree::PrimRef*,
   embree::PrimRef*, __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined8 *param_1,undefined8 *param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  ulong uVar9;
  undefined8 *puVar10;
  undefined8 *puVar11;
  undefined8 *puVar12;
  undefined8 *puVar13;
  
  if (param_1 != param_2) {
    puVar12 = param_1 + 4;
    while (puVar13 = puVar12, param_2 != puVar12) {
      while( true ) {
        puVar12 = puVar13 + 4;
        uVar1 = *(undefined4 *)puVar13;
        uVar2 = *(undefined4 *)((long)puVar13 + 4);
        uVar3 = *(undefined4 *)(puVar13 + 1);
        uVar4 = *(undefined4 *)((long)puVar13 + 0xc);
        uVar5 = *(undefined4 *)(puVar13 + 2);
        uVar6 = *(undefined4 *)((long)puVar13 + 0x14);
        uVar7 = *(undefined4 *)(puVar13 + 3);
        uVar8 = *(undefined4 *)((long)puVar13 + 0x1c);
        if (CONCAT44(*(undefined4 *)((long)param_1 + 0x1c),*(undefined4 *)((long)param_1 + 0xc)) <=
            CONCAT44(*(undefined4 *)((long)puVar13 + 0x1c),*(undefined4 *)((long)puVar13 + 0xc)))
        break;
        puVar10 = puVar13;
        if (0 < (long)puVar13 - (long)param_1) {
          do {
            puVar11 = puVar10 + -4;
            *puVar10 = puVar10[-4];
            puVar10[1] = puVar10[-3];
            puVar10[2] = puVar10[-2];
            puVar10[3] = puVar10[-1];
            puVar10 = puVar11;
          } while (puVar11 !=
                   (undefined8 *)
                   ((long)puVar13 - ((long)puVar13 - (long)param_1 & 0xffffffffffffffe0U)));
        }
        *(undefined4 *)param_1 = uVar1;
        *(undefined4 *)((long)param_1 + 4) = uVar2;
        *(undefined4 *)(param_1 + 1) = uVar3;
        *(undefined4 *)((long)param_1 + 0xc) = uVar4;
        *(undefined4 *)(param_1 + 2) = uVar5;
        *(undefined4 *)((long)param_1 + 0x14) = uVar6;
        *(undefined4 *)(param_1 + 3) = uVar7;
        *(undefined4 *)((long)param_1 + 0x1c) = uVar8;
        puVar13 = puVar12;
        if (param_2 == puVar12) {
          return;
        }
      }
      uVar9 = CONCAT44(*(undefined4 *)((long)puVar13 + -4),*(undefined4 *)((long)puVar13 + -0x14));
      while (CONCAT44(uVar8,uVar4) < uVar9) {
        *puVar13 = puVar13[-4];
        puVar13[1] = puVar13[-3];
        puVar13[2] = puVar13[-2];
        puVar13[3] = puVar13[-1];
        uVar9 = CONCAT44(*(undefined4 *)((long)puVar13 + -0x24),
                         *(undefined4 *)((long)puVar13 + -0x34));
        puVar13 = puVar13 + -4;
      }
      *(undefined4 *)puVar13 = uVar1;
      *(undefined4 *)((long)puVar13 + 4) = uVar2;
      *(undefined4 *)(puVar13 + 1) = uVar3;
      *(undefined4 *)((long)puVar13 + 0xc) = uVar4;
      *(undefined4 *)(puVar13 + 2) = uVar5;
      *(undefined4 *)((long)puVar13 + 0x14) = uVar6;
      *(undefined4 *)(puVar13 + 3) = uVar7;
      *(undefined4 *)((long)puVar13 + 0x1c) = uVar8;
    }
  }
  return;
}



/* embree::sse2::BVH4Triangle4SceneBuilderFastSpatialSAH(void*, embree::Scene*, unsigned long) */

void embree::sse2::BVH4Triangle4SceneBuilderFastSpatialSAH
               (void *param_1,Scene *param_2,ulong param_3)

{
  undefined4 uVar1;
  long lVar2;
  undefined8 *puVar3;
  long lVar4;
  
  puVar3 = (undefined8 *)operator_new(0xa0);
  *puVar3 = &PTR__BVHNBuilderFastSpatialSAH_0012fa98;
  lVar2 = *(long *)(param_2 + 0x188);
  puVar3[3] = param_2;
  *(undefined1 *)(puVar3 + 6) = 0;
  lVar4 = lVar2 + 0x548;
  if (lVar2 == 0) {
    lVar4 = 0;
  }
  puVar3[1] = 0;
  puVar3[7] = 0;
  puVar3[5] = lVar4;
  puVar3[8] = 0;
  puVar3[9] = 0;
  puVar3[10] = 2;
  puVar3[0xb] = 0x20;
  puVar3[0xd] = 4;
  puVar3[0xe] = 0x1c;
  puVar3[0xf] = 0x3f8000003f800000;
  puVar3[0x10] = 0x400;
  puVar3[0x11] = 0xffffffffffffffff;
  for (lVar4 = 0x3f; 4UL >> lVar4 == 0; lVar4 = lVar4 + -1) {
  }
  puVar3[0xc] = lVar4;
  uVar1 = *(undefined4 *)(lVar2 + 0x460);
  puVar3[2] = param_1;
  puVar3[4] = 0;
  *(undefined8 *)((long)puVar3 + 0x94) = 0xffffffff;
  *(undefined4 *)(puVar3 + 0x12) = uVar1;
  return;
}



/* embree::sse2::BVH4Triangle4vSceneBuilderFastSpatialSAH(void*, embree::Scene*, unsigned long) */

void embree::sse2::BVH4Triangle4vSceneBuilderFastSpatialSAH
               (void *param_1,Scene *param_2,ulong param_3)

{
  undefined4 uVar1;
  long lVar2;
  undefined8 *puVar3;
  long lVar4;
  
  puVar3 = (undefined8 *)operator_new(0xa0);
  *puVar3 = &PTR__BVHNBuilderFastSpatialSAH_0012fae0;
  lVar2 = *(long *)(param_2 + 0x188);
  puVar3[3] = param_2;
  *(undefined1 *)(puVar3 + 6) = 0;
  lVar4 = lVar2 + 0x548;
  if (lVar2 == 0) {
    lVar4 = 0;
  }
  puVar3[1] = 0;
  puVar3[7] = 0;
  puVar3[5] = lVar4;
  puVar3[8] = 0;
  puVar3[9] = 0;
  puVar3[10] = 2;
  puVar3[0xb] = 0x20;
  puVar3[0xd] = 4;
  puVar3[0xe] = 0x1c;
  puVar3[0xf] = 0x3f8000003f800000;
  puVar3[0x10] = 0x400;
  puVar3[0x11] = 0xffffffffffffffff;
  for (lVar4 = 0x3f; 4UL >> lVar4 == 0; lVar4 = lVar4 + -1) {
  }
  puVar3[0xc] = lVar4;
  uVar1 = *(undefined4 *)(lVar2 + 0x460);
  puVar3[2] = param_1;
  puVar3[4] = 0;
  *(undefined8 *)((long)puVar3 + 0x94) = 0xffffffff;
  *(undefined4 *)(puVar3 + 0x12) = uVar1;
  return;
}



/* embree::sse2::BVH4Triangle4iSceneBuilderFastSpatialSAH(void*, embree::Scene*, unsigned long) */

void embree::sse2::BVH4Triangle4iSceneBuilderFastSpatialSAH
               (void *param_1,Scene *param_2,ulong param_3)

{
  undefined4 uVar1;
  long lVar2;
  undefined8 *puVar3;
  long lVar4;
  
  puVar3 = (undefined8 *)operator_new(0xa0);
  *puVar3 = &PTR__BVHNBuilderFastSpatialSAH_0012fb28;
  lVar2 = *(long *)(param_2 + 0x188);
  puVar3[3] = param_2;
  *(undefined1 *)(puVar3 + 6) = 0;
  lVar4 = lVar2 + 0x548;
  if (lVar2 == 0) {
    lVar4 = 0;
  }
  puVar3[1] = 0;
  puVar3[7] = 0;
  puVar3[5] = lVar4;
  puVar3[8] = 0;
  puVar3[9] = 0;
  puVar3[10] = 2;
  puVar3[0xb] = 0x20;
  puVar3[0xd] = 4;
  puVar3[0xe] = 0x1c;
  puVar3[0xf] = 0x3f8000003f800000;
  puVar3[0x10] = 0x400;
  puVar3[0x11] = 0xffffffffffffffff;
  for (lVar4 = 0x3f; 4UL >> lVar4 == 0; lVar4 = lVar4 + -1) {
  }
  puVar3[0xc] = lVar4;
  uVar1 = *(undefined4 *)(lVar2 + 0x460);
  puVar3[2] = param_1;
  puVar3[4] = 0;
  *(undefined8 *)((long)puVar3 + 0x94) = 0xffffffff;
  *(undefined4 *)(puVar3 + 0x12) = uVar1;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__introsort_loop<embree::PrimRef*, long,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::PrimRef*, embree::PrimRef*, long,
   __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined8 *param_2,long param_3)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined8 uVar17;
  undefined8 *puVar18;
  long lVar19;
  undefined4 *puVar20;
  ulong uVar21;
  ulong uVar22;
  undefined8 *puVar23;
  ulong uVar24;
  undefined8 *puVar25;
  undefined8 *puVar26;
  long in_FS_OFFSET;
  undefined4 local_80;
  undefined4 uStack_7c;
  undefined4 uStack_78;
  undefined4 uStack_74;
  undefined4 local_70;
  undefined4 uStack_6c;
  undefined4 uStack_68;
  undefined4 uStack_64;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar19 = (long)param_2 - (long)param_1;
  if (0x200 < lVar19) {
    puVar26 = (undefined8 *)(param_1 + 8);
    puVar23 = param_2;
    if (param_3 != 0) {
      do {
        param_3 = param_3 + -1;
        uVar1 = *param_1;
        uVar2 = param_1[1];
        uVar3 = param_1[2];
        uVar4 = param_1[3];
        puVar20 = param_1 + (lVar19 >> 6) * 8;
        uVar5 = param_1[4];
        uVar6 = param_1[5];
        uVar7 = param_1[6];
        uVar8 = param_1[7];
        uVar21 = CONCAT44(param_1[0xf],param_1[0xb]);
        uVar22 = CONCAT44(puVar20[7],puVar20[3]);
        uVar24 = CONCAT44(*(undefined4 *)((long)puVar23 + -4),*(undefined4 *)((long)puVar23 + -0x14)
                         );
        puVar25 = puVar23;
        param_2 = puVar26;
        if (uVar21 < uVar22) {
          if (uVar22 < uVar24) {
LAB_0010154a:
            uVar9 = puVar20[1];
            uVar10 = puVar20[2];
            uVar11 = puVar20[3];
            *param_1 = *puVar20;
            param_1[1] = uVar9;
            param_1[2] = uVar10;
            param_1[3] = uVar11;
            uVar9 = puVar20[5];
            uVar10 = puVar20[6];
            uVar11 = puVar20[7];
            param_1[4] = puVar20[4];
            param_1[5] = uVar9;
            param_1[6] = uVar10;
            param_1[7] = uVar11;
            *puVar20 = uVar1;
            puVar20[1] = uVar2;
            puVar20[2] = uVar3;
            puVar20[3] = uVar4;
            puVar20[4] = uVar5;
            puVar20[5] = uVar6;
            puVar20[6] = uVar7;
            puVar20[7] = uVar8;
          }
          else {
            if (uVar24 <= uVar21) goto LAB_0010142e;
LAB_001014fa:
            uVar9 = *(undefined4 *)((long)puVar23 + -0x1c);
            uVar10 = *(undefined4 *)(puVar23 + -3);
            uVar11 = *(undefined4 *)((long)puVar23 + -0x14);
            *param_1 = *(undefined4 *)(puVar23 + -4);
            param_1[1] = uVar9;
            param_1[2] = uVar10;
            param_1[3] = uVar11;
            uVar9 = *(undefined4 *)((long)puVar23 + -0xc);
            uVar10 = *(undefined4 *)(puVar23 + -1);
            uVar11 = *(undefined4 *)((long)puVar23 + -4);
            param_1[4] = *(undefined4 *)(puVar23 + -2);
            param_1[5] = uVar9;
            param_1[6] = uVar10;
            param_1[7] = uVar11;
            *(undefined4 *)(puVar23 + -4) = uVar1;
            *(undefined4 *)((long)puVar23 + -0x1c) = uVar2;
            *(undefined4 *)(puVar23 + -3) = uVar3;
            *(undefined4 *)((long)puVar23 + -0x14) = uVar4;
            *(undefined4 *)(puVar23 + -2) = uVar5;
            *(undefined4 *)((long)puVar23 + -0xc) = uVar6;
            *(undefined4 *)(puVar23 + -1) = uVar7;
            *(undefined4 *)((long)puVar23 + -4) = uVar8;
          }
        }
        else {
          if (uVar24 <= uVar21) {
            if (uVar22 < uVar24) goto LAB_001014fa;
            goto LAB_0010154a;
          }
LAB_0010142e:
          uVar9 = param_1[8];
          uVar10 = param_1[9];
          uVar11 = param_1[10];
          uVar12 = param_1[0xb];
          uVar13 = param_1[0xc];
          uVar14 = param_1[0xd];
          uVar15 = param_1[0xe];
          uVar16 = param_1[0xf];
          param_1[8] = uVar1;
          param_1[9] = uVar2;
          param_1[10] = uVar3;
          param_1[0xb] = uVar4;
          param_1[0xc] = uVar5;
          param_1[0xd] = uVar6;
          param_1[0xe] = uVar7;
          param_1[0xf] = uVar8;
          *param_1 = uVar9;
          param_1[1] = uVar10;
          param_1[2] = uVar11;
          param_1[3] = uVar12;
          param_1[4] = uVar13;
          param_1[5] = uVar14;
          param_1[6] = uVar15;
          param_1[7] = uVar16;
        }
        while( true ) {
          for (; CONCAT44(*(undefined4 *)((long)param_2 + 0x1c),*(undefined4 *)((long)param_2 + 0xc)
                         ) < CONCAT44(param_1[7],param_1[3]); param_2 = param_2 + 4) {
          }
          uVar21 = CONCAT44(*(undefined4 *)((long)puVar25 + -4),
                            *(undefined4 *)((long)puVar25 + -0x14));
          while (puVar18 = puVar25 + -4, CONCAT44(param_1[7],param_1[3]) < uVar21) {
            uVar21 = CONCAT44(*(undefined4 *)((long)puVar25 + -0x24),
                              *(undefined4 *)((long)puVar25 + -0x34));
            puVar25 = puVar18;
          }
          if (puVar18 <= param_2) break;
          uVar17 = puVar25[-3];
          uVar1 = *(undefined4 *)param_2;
          uVar2 = *(undefined4 *)((long)param_2 + 4);
          uVar3 = *(undefined4 *)(param_2 + 1);
          uVar4 = *(undefined4 *)((long)param_2 + 0xc);
          uVar5 = *(undefined4 *)(param_2 + 2);
          uVar6 = *(undefined4 *)((long)param_2 + 0x14);
          uVar7 = *(undefined4 *)(param_2 + 3);
          uVar8 = *(undefined4 *)((long)param_2 + 0x1c);
          *param_2 = *puVar18;
          param_2[1] = uVar17;
          uVar17 = puVar25[-1];
          param_2[2] = puVar25[-2];
          param_2[3] = uVar17;
          *(undefined4 *)puVar18 = uVar1;
          *(undefined4 *)((long)puVar25 + -0x1c) = uVar2;
          *(undefined4 *)(puVar25 + -3) = uVar3;
          *(undefined4 *)((long)puVar25 + -0x14) = uVar4;
          *(undefined4 *)(puVar25 + -2) = uVar5;
          *(undefined4 *)((long)puVar25 + -0xc) = uVar6;
          *(undefined4 *)(puVar25 + -1) = uVar7;
          *(undefined4 *)((long)puVar25 + -4) = uVar8;
          puVar25 = puVar18;
          param_2 = param_2 + 4;
        }
        __introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (param_2,puVar23,param_3);
        lVar19 = (long)param_2 - (long)param_1;
        if (lVar19 < 0x201) goto LAB_001015cc;
        puVar23 = param_2;
      } while (param_3 != 0);
    }
    __heap_select<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(param_1,param_2,param_2);
    do {
      puVar26 = param_2 + -4;
      uVar1 = param_1[1];
      uVar2 = param_1[2];
      uVar3 = param_1[3];
      local_80 = *(undefined4 *)puVar26;
      uStack_7c = *(undefined4 *)((long)param_2 + -0x1c);
      uStack_78 = *(undefined4 *)(param_2 + -3);
      uStack_74 = *(undefined4 *)((long)param_2 + -0x14);
      local_70 = *(undefined4 *)(param_2 + -2);
      uStack_6c = *(undefined4 *)((long)param_2 + -0xc);
      uStack_68 = *(undefined4 *)(param_2 + -1);
      uStack_64 = *(undefined4 *)((long)param_2 + -4);
      *(undefined4 *)puVar26 = *param_1;
      *(undefined4 *)((long)param_2 + -0x1c) = uVar1;
      *(undefined4 *)(param_2 + -3) = uVar2;
      *(undefined4 *)((long)param_2 + -0x14) = uVar3;
      uVar1 = param_1[5];
      uVar2 = param_1[6];
      uVar3 = param_1[7];
      *(undefined4 *)(param_2 + -2) = param_1[4];
      *(undefined4 *)((long)param_2 + -0xc) = uVar1;
      *(undefined4 *)(param_2 + -1) = uVar2;
      *(undefined4 *)((long)param_2 + -4) = uVar3;
      __adjust_heap<embree::PrimRef*,long,embree::PrimRef,__gnu_cxx::__ops::_Iter_less_iter>
                (param_1,0,(long)puVar26 - (long)param_1 >> 5,&local_80);
      param_2 = puVar26;
    } while (0x20 < (long)puVar26 - (long)param_1);
  }
LAB_001015cc:
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] */

void __thiscall
embree::TaskScheduler::
spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>
          (TaskScheduler *this,ulong param_1,ulong param_2,ulong param_3,
          _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this_00;
  long in_FS_OFFSET;
  ulong local_58;
  TaskScheduler *pTStack_50;
  ulong local_48;
  ulong uStack_40;
  _lambda_embree__range<unsigned_long>_const___1_ *local_38;
  TaskGroupContext *pTStack_30;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_58 = param_1;
  pTStack_50 = this;
  local_48 = param_2;
  uStack_40 = param_3;
  local_38 = param_4;
  pTStack_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this_00 = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this_00,(_lambda___1_ *)&local_58,param_5,param_1 - (long)this,true);
LAB_00101732:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40088 + uVar2);
      *puVar3 = &PTR_execute_0012f6b8;
      puVar3[1] = local_58;
      puVar3[2] = pTStack_50;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = local_38;
      puVar3[6] = pTStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_1 - (long)this;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00101732;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] */

void __thiscall
embree::TaskScheduler::
spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>
          (TaskScheduler *this,ulong param_1,ulong param_2,ulong param_3,
          _lambda_embree__range<unsigned_long>_const___2_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this_00;
  long in_FS_OFFSET;
  ulong local_58;
  TaskScheduler *pTStack_50;
  ulong local_48;
  ulong uStack_40;
  _lambda_embree__range<unsigned_long>_const___2_ *local_38;
  TaskGroupContext *pTStack_30;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_58 = param_1;
  pTStack_50 = this;
  local_48 = param_2;
  uStack_40 = param_3;
  local_38 = param_4;
  pTStack_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this_00 = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this_00,(_lambda___1_ *)&local_58,param_5,param_1 - (long)this,true);
LAB_001018c2:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40088 + uVar2);
      *puVar3 = &PTR_execute_0012f6d0;
      puVar3[1] = local_58;
      puVar3[2] = pTStack_50;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = local_38;
      puVar3[6] = pTStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_1 - (long)this;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_001018c2;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&) [clone .isra.0] */

void embree::sse2::
     HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
     moveExtentedRange(PrimInfoExtRange *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3
                      )

{
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_30;
  ulong local_28;
  long local_20;
  long local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_30 = *(long *)(param_2 + 0x50) - *(long *)(param_2 + 0x48);
  this = *(TaskScheduler **)(param_3 + 0x40);
  local_28 = *(ulong *)(param_3 + 0x48) - (long)this;
  if (local_30 != 0) {
    local_20 = 0;
    if (local_30 < local_28) {
      TaskScheduler::
      spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (this,(ulong)(this + local_30),0x40,(ulong)param_1,
                 (_lambda_embree__range<unsigned_long>_const___1_ *)&local_28,
                 (TaskGroupContext *)&local_20);
      embree::TaskScheduler::wait();
    }
    else {
      TaskScheduler::
      spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>
                (this,*(ulong *)(param_3 + 0x48),0x40,(ulong)param_1,
                 (_lambda_embree__range<unsigned_long>_const___2_ *)&local_30,
                 (TaskGroupContext *)&local_20);
      embree::TaskScheduler::wait();
    }
    if (local_20 != 0) {
      local_18 = local_20;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_18);
    }
    *(ulong *)(param_3 + 0x40) = *(long *)(param_3 + 0x40) + local_30;
    *(ulong *)(param_3 + 0x48) = *(long *)(param_3 + 0x48) + local_30;
    *(ulong *)(param_3 + 0x50) = *(long *)(param_3 + 0x50) + local_30;
    local_20 = 0;
  }
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  _lambda_embree__range<unsigned_long>_const___1_ *p_Stack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  p_Stack_30 = param_4;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_00101b4c:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0012f748;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = p_Stack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00101b4c;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  _lambda_embree__range<unsigned_long>_const___1_ *p_Stack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  p_Stack_30 = param_4;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_00101cdc:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0012f760;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = p_Stack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00101cdc;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::Builder::deleteGeometry(unsigned long) */

void embree::Builder::deleteGeometry(ulong param_1)

{
  return;
}



/* bool embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned
   int>::compare<embree::sse2::PresplitItem>(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&) */

bool embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
     compare<embree::sse2::PresplitItem>(PresplitItem *param_1,PresplitItem *param_2)

{
  return *(uint *)param_1 < *(uint *)param_2;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::clear() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::clear(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  long lVar1;
  void *pvVar2;
  
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  *(undefined8 *)(this + 0x48) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x38) = 0;
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::clear() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::clear(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  long lVar1;
  void *pvVar2;
  
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  *(undefined8 *)(this + 0x48) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x38) = 0;
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0012fb28;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 == 0) {
    return;
  }
                    /* WARNING: Could not recover jumptable at 0x00101ec1. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0012fae0;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 == 0) {
    return;
  }
                    /* WARNING: Could not recover jumptable at 0x00101f41. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0012fa98;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 == 0) {
    return;
  }
                    /* WARNING: Could not recover jumptable at 0x00101fc1. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::clear() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::clear(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  long lVar1;
  void *pvVar2;
  
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  *(undefined8 *)(this + 0x48) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x38) = 0;
  return;
}



/* embree::Scene::BuildProgressMonitorInterface::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::Scene::BuildProgressMonitorInterface::operator()
          (BuildProgressMonitorInterface *this,ulong param_1)

{
  if (-1 < (long)param_1) {
    embree::Scene::progressMonitor((double)(long)param_1);
    return;
  }
  embree::Scene::progressMonitor((double)param_1);
  return;
}



/* embree::RefCount::refInc() */

RefCount * __thiscall embree::RefCount::refInc(RefCount *this)

{
  LOCK();
  *(long *)(this + 8) = *(long *)(this + 8) + 1;
  UNLOCK();
  return this;
}



/* embree::RefCount::refDec() */

void __thiscall embree::RefCount::refDec(RefCount *this)

{
  RefCount *pRVar1;
  
  LOCK();
  pRVar1 = this + 8;
  *(long *)pRVar1 = *(long *)pRVar1 + -1;
  UNLOCK();
  if ((this != (RefCount *)0x0) && (*(long *)pRVar1 == 0)) {
                    /* WARNING: Could not recover jumptable at 0x001020d9. Too many branches */
                    /* WARNING: Treating indirect jump as call */
    (**(code **)(*(long *)this + 8))();
    return;
  }
  return;
}



/* embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration1(unsigned
   int, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned long, unsigned
   long) [clone .isra.0] */

void embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration1
               (uint param_1,PresplitItem *param_2,PresplitItem *param_3,ulong param_4,ulong param_5
               )

{
  undefined8 uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  ulong uVar6;
  uint *puVar7;
  uint *puVar8;
  uint *puVar9;
  long lVar10;
  uint uVar11;
  int *piVar12;
  int *piVar13;
  undefined4 in_register_0000003c;
  int *piVar14;
  long in_R9;
  long in_FS_OFFSET;
  ulong in_stack_00000008;
  uint local_880 [526];
  long local_48;
  
  piVar13 = (int *)CONCAT44(in_register_0000003c,param_1);
  puVar8 = local_880;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  uVar6 = (ulong)(in_R9 * (long)param_2) / in_stack_00000008;
  puVar9 = local_880;
  for (lVar10 = 0x80; lVar10 != 0; lVar10 = lVar10 + -1) {
    *(undefined8 *)puVar9 = 0;
    puVar9 = (uint *)((long)puVar9 + 8);
  }
  if (in_stack_00000008 != 0) {
    puVar9 = local_880;
    piVar12 = piVar13;
    piVar14 = piVar13;
    do {
      do {
        iVar2 = piVar12[1];
        iVar3 = piVar12[2];
        iVar4 = piVar12[3];
        puVar7 = puVar9 + 4;
        *puVar9 = *puVar9 + *piVar12;
        puVar9[1] = puVar9[1] + iVar2;
        puVar9[2] = puVar9[2] + iVar3;
        puVar9[3] = puVar9[3] + iVar4;
        puVar9 = puVar7;
        piVar12 = piVar12 + 4;
      } while (local_880 + 0x100 != puVar7);
      piVar12 = piVar14 + 0x100;
      puVar9 = local_880;
      piVar14 = piVar12;
    } while (piVar13 + in_stack_00000008 * 0x100 != piVar12);
  }
  local_880[0x100] = 0;
  uVar11 = 0;
  puVar9 = local_880 + 0x101;
  while( true ) {
    uVar11 = uVar11 + *puVar8;
    puVar8 = puVar8 + 1;
    *puVar9 = uVar11;
    if (local_880 + 0xff == puVar8) break;
    puVar9 = puVar9 + 1;
  }
  if (in_R9 != 0) {
    piVar14 = piVar13 + in_R9 * 0x100;
    puVar9 = local_880 + 0x100;
    piVar12 = piVar13;
    do {
      do {
        iVar2 = *piVar13;
        iVar3 = piVar13[1];
        iVar4 = piVar13[2];
        iVar5 = piVar13[3];
        puVar8 = puVar9 + 4;
        piVar13 = piVar13 + 4;
        *puVar9 = *puVar9 + iVar2;
        puVar9[1] = puVar9[1] + iVar3;
        puVar9[2] = puVar9[2] + iVar4;
        puVar9[3] = puVar9[3] + iVar5;
        puVar9 = puVar8;
      } while (local_880 + 0x200 != puVar8);
      piVar13 = piVar12 + 0x100;
      puVar9 = local_880 + 0x100;
      piVar12 = piVar13;
    } while (piVar14 != piVar13);
  }
  if (uVar6 < (ulong)(param_2 + in_R9 * (long)param_2) / in_stack_00000008) {
    puVar9 = (uint *)(param_4 + uVar6 * 8);
    do {
      uVar11 = *puVar9;
      uVar1 = *(undefined8 *)puVar9;
      puVar9 = puVar9 + 2;
      uVar6 = (ulong)(byte)(uVar11 >> ((byte)param_3 & 0x3f));
      uVar11 = local_880[uVar6 + 0x100];
      *(undefined8 *)(param_5 + (ulong)uVar11 * 8) = uVar1;
      local_880[uVar6 + 0x100] = uVar11 + 1;
    } while ((uint *)(param_4 + ((ulong)(param_2 + in_R9 * (long)param_2) / in_stack_00000008) * 8)
             != puVar9);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::sequential_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&) [clone .isra.0] */

PrimInfoExtRange *
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
sequential_object_find(PrimInfoExtRange *param_1,ulong param_2,SplitInfoT *param_3)

{
  ulong uVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  long lVar9;
  undefined4 uVar10;
  float fVar11;
  uint uVar12;
  undefined1 (*pauVar13) [16];
  ulong uVar14;
  undefined1 (*pauVar15) [16];
  int in_ECX;
  undefined1 (*pauVar16) [16];
  float *pfVar17;
  undefined1 *puVar18;
  uint *puVar20;
  long lVar21;
  ulong uVar22;
  long lVar23;
  long *in_R8;
  long lVar24;
  ulong uVar25;
  ulong uVar26;
  ulong uVar27;
  long in_FS_OFFSET;
  float fVar28;
  uint uVar29;
  int iVar30;
  uint uVar33;
  uint uVar36;
  undefined1 auVar31 [16];
  int iVar34;
  float fVar35;
  int iVar37;
  float fVar38;
  int iVar39;
  undefined1 auVar32 [16];
  uint uVar40;
  uint uVar45;
  uint uVar46;
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  undefined1 auVar47 [16];
  undefined1 auVar48 [16];
  undefined1 auVar49 [16];
  float fVar50;
  float fVar53;
  float fVar54;
  uint uVar55;
  undefined1 auVar51 [16];
  undefined1 auVar52 [16];
  undefined1 auVar56 [16];
  float fVar58;
  float fVar59;
  undefined1 auVar57 [16];
  float fVar60;
  undefined1 auVar61 [16];
  float fVar62;
  undefined1 auVar63 [16];
  undefined1 auVar64 [16];
  uint uVar66;
  uint uVar67;
  undefined1 auVar65 [16];
  byte local_1350;
  uint local_1340;
  uint uStack_133c;
  uint uStack_1338;
  uint uStack_1334;
  undefined1 local_1330 [16];
  undefined1 local_1320 [16];
  undefined1 local_1310 [16];
  undefined1 local_1300 [16];
  undefined1 local_12f0 [16];
  undefined1 local_12e0 [16];
  undefined1 local_12d0 [16];
  undefined1 local_12c0 [3] [16];
  float local_1290 [3];
  uint uStack_1284;
  float local_1280 [124];
  int aiStack_1090 [108];
  undefined1 auStack_ee0 [96];
  uint local_e80 [4];
  undefined1 local_e70 [16];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2976];
  int local_290 [4];
  uint local_280 [142];
  long local_48;
  undefined1 *puVar19;
  
  fVar11 = _LC3;
  uVar10 = _LC1;
  auVar47._0_8_ = CONCAT44(_LC3,_LC3);
  auVar47._8_4_ = _LC3;
  auVar47._12_4_ = _LC3;
  auVar48._0_8_ = CONCAT44(_LC1,_LC1);
  auVar48._8_4_ = _LC1;
  auVar48._12_4_ = _LC1;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pauVar15 = (undefined1 (*) [16])local_e80;
  pauVar16 = (undefined1 (*) [16])local_280;
  do {
    pauVar15[4] = auVar47;
    pauVar13 = pauVar15 + 6;
    pauVar15[5] = auVar48;
    pauVar15[2] = auVar47;
    pauVar15[3] = auVar48;
    *pauVar15 = auVar47;
    pauVar15[1] = auVar48;
    *pauVar16 = (undefined1  [16])0x0;
    pauVar15 = pauVar13;
    pauVar16 = pauVar16 + 1;
  } while ((undefined1 (*) [16])local_280 != pauVar13);
  uVar26 = *(long *)(param_3 + 0x48) - *(long *)(param_3 + 0x40);
  fVar28 = (float)uVar26 * __LC5 + __LC6;
  if (__LC7 <= fVar28) {
    uVar27 = (long)(fVar28 - __LC7) ^ 0x8000000000000000;
  }
  else {
    uVar27 = (ulong)fVar28;
  }
  fVar28 = *(float *)(param_3 + 0x20);
  fVar2 = *(float *)(param_3 + 0x24);
  fVar3 = *(float *)(param_3 + 0x28);
  fVar4 = *(float *)(param_3 + 0x2c);
  auVar31._0_4_ = *(float *)(param_3 + 0x30) - fVar28;
  auVar31._4_4_ = *(float *)(param_3 + 0x34) - fVar2;
  auVar31._8_4_ = *(float *)(param_3 + 0x38) - fVar3;
  auVar31._12_4_ = *(float *)(param_3 + 0x3c) - fVar4;
  uVar25 = 0x20;
  if (uVar27 < 0x21) {
    uVar25 = uVar27;
  }
  auVar41._4_4_ = _LC9;
  auVar41._0_4_ = _LC9;
  auVar41._8_4_ = _LC9;
  auVar41._12_4_ = _LC9;
  pauVar15 = (undefined1 (*) [16])(param_2 + *(long *)(param_3 + 0x40) * 0x20);
  auVar41 = maxps(auVar41,auVar31);
  auVar42._0_4_ = (float)(long)uVar25 * _LC10;
  auVar42._4_4_ = auVar42._0_4_;
  auVar42._8_4_ = auVar42._0_4_;
  auVar42._12_4_ = auVar42._0_4_;
  auVar31 = divps(auVar42,auVar41);
  fVar50 = (float)(-(uint)(_LC9 < auVar41._0_4_) & auVar31._0_4_);
  fVar53 = (float)(-(uint)(_LC9 < auVar41._4_4_) & auVar31._4_4_);
  fVar54 = (float)(-(uint)(_LC9 < auVar41._8_4_) & auVar31._8_4_);
  uVar55 = -(uint)(_LC9 < auVar41._12_4_) & auVar31._12_4_;
  local_1290[0] = fVar50;
  local_1290[1] = fVar53;
  local_1290[2] = fVar54;
  if (uVar26 != 0) {
    uVar12 = (int)uVar25 - 1;
    if (uVar26 != 1) {
      pauVar16 = pauVar15;
      do {
        auVar31 = pauVar16[1];
        auVar42 = *pauVar16;
        pauVar13 = pauVar16 + 4;
        auVar41 = pauVar16[2];
        uVar29 = (uint)(((auVar31._0_4_ + auVar42._0_4_) - fVar28) * fVar50 + _LC12);
        uVar33 = (uint)(((auVar31._4_4_ + auVar42._4_4_) - fVar2) * fVar53 + _LC12);
        uVar36 = (uint)(((auVar31._8_4_ + auVar42._8_4_) - fVar3) * fVar54 + _LC12);
        uVar40 = -(uint)((int)uVar29 < (int)uVar12);
        uVar45 = -(uint)((int)uVar33 < (int)uVar12);
        uVar46 = -(uint)((int)uVar36 < (int)uVar12);
        uVar29 = uVar29 & uVar40 | ~uVar40 & uVar12;
        uVar33 = uVar33 & uVar45 | ~uVar45 & uVar12;
        uVar40 = uVar36 & uVar46 | ~uVar46 & uVar12;
        auVar43 = pauVar16[3];
        uVar22 = (ulong)(~-(uint)((int)uVar29 < 0) & uVar29);
        pauVar16 = (undefined1 (*) [16])local_e80 + uVar22 * 6;
        uVar29 = (uint)(((auVar43._0_4_ + auVar41._0_4_) - fVar28) * fVar50 + _LC12);
        uVar36 = (uint)(((auVar43._4_4_ + auVar41._4_4_) - fVar2) * fVar53 + _LC12);
        uVar45 = (uint)(((auVar43._8_4_ + auVar41._8_4_) - fVar3) * fVar54 + _LC12);
        uVar46 = -(uint)((int)uVar29 < (int)uVar12);
        uVar66 = -(uint)((int)uVar36 < (int)uVar12);
        uVar67 = -(uint)((int)uVar45 < (int)uVar12);
        uVar29 = uVar46 & uVar29 | ~uVar46 & uVar12;
        uVar36 = uVar66 & uVar36 | ~uVar66 & uVar12;
        uVar45 = uVar67 & uVar45 | ~uVar67 & uVar12;
        auVar65 = minps(*pauVar16,auVar42);
        *pauVar16 = auVar65;
        auVar65 = maxps(*(undefined1 (*) [16])(local_e70 + uVar22 * 0x60),auVar31);
        *(undefined1 (*) [16])(local_e70 + uVar22 * 0x60) = auVar65;
        uVar14 = (ulong)(~-(uint)((int)uVar33 < 0) & uVar33);
        lVar24 = uVar14 * 0x60;
        auVar65 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar42);
        *(undefined1 (*) [16])(local_e60 + lVar24) = auVar65;
        auVar65 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar31);
        *(undefined1 (*) [16])(local_e50 + lVar24) = auVar65;
        uVar1 = (ulong)(~-(uint)((int)uVar40 < 0) & uVar40);
        lVar24 = uVar1 * 0x60;
        auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar42);
        *(undefined1 (*) [16])(local_e40 + lVar24) = auVar42;
        auVar31 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar31);
        *(undefined1 (*) [16])(local_e30 + lVar24) = auVar31;
        local_e80[(uVar22 + 0xc0) * 4] = local_e80[(uVar22 + 0xc0) * 4] + 1;
        uVar22 = (ulong)(~-(uint)((int)uVar29 < 0) & uVar29);
        local_280[uVar1 * 4 + 2] = local_280[uVar1 * 4 + 2] + 1;
        local_280[uVar14 * 4 + 1] = local_280[uVar14 * 4 + 1] + 1;
        pauVar16 = (undefined1 (*) [16])local_e80 + uVar22 * 6;
        auVar31 = minps(*pauVar16,auVar41);
        *pauVar16 = auVar31;
        auVar31 = maxps(*(undefined1 (*) [16])(local_e70 + uVar22 * 0x60),auVar43);
        *(undefined1 (*) [16])(local_e70 + uVar22 * 0x60) = auVar31;
        uVar14 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        lVar24 = uVar14 * 0x60;
        auVar31 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar41);
        *(undefined1 (*) [16])(local_e60 + lVar24) = auVar31;
        auVar31 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar43);
        *(undefined1 (*) [16])(local_e50 + lVar24) = auVar31;
        uVar1 = (ulong)(~-(uint)((int)uVar45 < 0) & uVar45);
        lVar24 = uVar1 * 0x60;
        auVar31 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar41);
        *(undefined1 (*) [16])(local_e40 + lVar24) = auVar31;
        auVar31 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar43);
        *(undefined1 (*) [16])(local_e30 + lVar24) = auVar31;
        local_e80[(uVar22 + 0xc0) * 4] = local_e80[(uVar22 + 0xc0) * 4] + 1;
        local_280[uVar14 * 4 + 1] = local_280[uVar14 * 4 + 1] + 1;
        local_280[uVar1 * 4 + 2] = local_280[uVar1 * 4 + 2] + 1;
        pauVar16 = pauVar13;
      } while (pauVar15 + (uVar26 - 2 >> 1) * 4 + 4 != pauVar13);
      uVar14 = (uVar26 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar26 <= uVar14) goto LAB_0010268c;
      pauVar15 = pauVar15 + uVar14 * 2;
    }
    auVar31 = pauVar15[1];
    auVar42 = *pauVar15;
    uVar29 = (uint)(((auVar31._0_4_ + auVar42._0_4_) - fVar28) * fVar50 + _LC12);
    uVar33 = (uint)(((auVar31._4_4_ + auVar42._4_4_) - fVar2) * fVar53 + _LC12);
    uVar36 = (uint)(((auVar31._8_4_ + auVar42._8_4_) - fVar3) * fVar54 + _LC12);
    uVar40 = -(uint)((int)uVar29 < (int)uVar12);
    uVar45 = -(uint)((int)uVar33 < (int)uVar12);
    uVar46 = -(uint)((int)uVar36 < (int)uVar12);
    uVar29 = uVar40 & uVar29 | ~uVar40 & uVar12;
    uVar33 = uVar45 & uVar33 | ~uVar45 & uVar12;
    uVar12 = uVar46 & uVar36 | ~uVar46 & uVar12;
    lVar24 = (long)(int)(~-(uint)((int)uVar29 < 0) & uVar29);
    pauVar15 = (undefined1 (*) [16])local_e80 + lVar24 * 6;
    local_e80[(lVar24 + 0xc0) * 4] = local_e80[(lVar24 + 0xc0) * 4] + 1;
    auVar41 = minps(*pauVar15,auVar42);
    *pauVar15 = auVar41;
    auVar41 = maxps(*(undefined1 (*) [16])(local_e70 + lVar24 * 0x60),auVar31);
    *(undefined1 (*) [16])(local_e70 + lVar24 * 0x60) = auVar41;
    lVar24 = (long)(int)(~-(uint)((int)uVar33 < 0) & uVar33);
    lVar21 = lVar24 * 0x60;
    local_280[lVar24 * 4 + 1] = local_280[lVar24 * 4 + 1] + 1;
    auVar41 = minps(*(undefined1 (*) [16])(local_e60 + lVar21),auVar42);
    *(undefined1 (*) [16])(local_e60 + lVar21) = auVar41;
    auVar41 = maxps(*(undefined1 (*) [16])(local_e50 + lVar21),auVar31);
    *(undefined1 (*) [16])(local_e50 + lVar21) = auVar41;
    lVar24 = (long)(int)(~-(uint)((int)uVar12 < 0) & uVar12);
    lVar21 = lVar24 * 0x60;
    local_280[lVar24 * 4 + 2] = local_280[lVar24 * 4 + 2] + 1;
    auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar21),auVar42);
    *(undefined1 (*) [16])(local_e40 + lVar21) = auVar42;
    auVar31 = maxps(*(undefined1 (*) [16])(local_e30 + lVar21),auVar31);
    *(undefined1 (*) [16])(local_e30 + lVar21) = auVar31;
  }
LAB_0010268c:
  uStack_1284 = uVar55;
  if (uVar27 != 1) {
    auVar61._8_4_ = _LC1;
    auVar61._0_8_ = auVar48._0_8_;
    auVar61._12_4_ = _LC1;
    auVar57._8_4_ = _LC3;
    auVar57._0_8_ = auVar47._0_8_;
    auVar57._12_4_ = _LC3;
    auVar56._8_4_ = _LC1;
    auVar56._0_8_ = auVar48._0_8_;
    auVar56._12_4_ = _LC1;
    auVar51._8_4_ = _LC3;
    auVar51._0_8_ = auVar47._0_8_;
    auVar51._12_4_ = _LC3;
    auVar65._8_4_ = _LC1;
    auVar65._0_8_ = auVar48._0_8_;
    auVar65._12_4_ = _LC1;
    auVar43._8_4_ = _LC3;
    auVar43._0_8_ = auVar47._0_8_;
    auVar43._12_4_ = _LC3;
    iVar30 = 0;
    iVar34 = 0;
    iVar37 = 0;
    iVar39 = 0;
    pauVar15 = (undefined1 (*) [16])(auStack_ee0 + uVar25 * 0x60);
    pfVar17 = local_1290 + uVar25 * 4;
    lVar24 = uVar25 * 0x10;
    do {
      auVar65 = maxps(auVar65,pauVar15[1]);
      auVar43 = minps(auVar43,*pauVar15);
      pauVar16 = pauVar15 + -6;
      iVar5 = *(int *)(((undefined1 (*) [16])local_280)[-1] + lVar24);
      iVar6 = *(int *)((long)local_290 + lVar24 + 4);
      iVar7 = *(int *)((long)local_290 + lVar24 + 8);
      iVar8 = *(int *)((long)local_290 + lVar24 + 0xc);
      auVar56 = maxps(auVar56,pauVar15[3]);
      pfVar17[3] = 0.0;
      auVar51 = minps(auVar51,pauVar15[2]);
      auVar61 = maxps(auVar61,pauVar15[5]);
      iVar30 = iVar5 + iVar30;
      iVar34 = iVar6 + iVar34;
      iVar37 = iVar7 + iVar37;
      iVar39 = iVar8 + iVar39;
      auVar57 = minps(auVar57,pauVar15[4]);
      *(int *)((long)aiStack_1090 + lVar24) = iVar30;
      *(int *)((long)aiStack_1090 + lVar24 + 4) = iVar34;
      *(int *)((long)aiStack_1090 + lVar24 + 8) = iVar37;
      *(int *)((long)aiStack_1090 + lVar24 + 0xc) = iVar39;
      fVar35 = auVar65._4_4_ - auVar43._4_4_;
      fVar38 = auVar65._8_4_ - auVar43._8_4_;
      *pfVar17 = (auVar65._0_4_ - auVar43._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar56._4_4_ - auVar51._4_4_;
      fVar38 = auVar56._8_4_ - auVar51._8_4_;
      pfVar17[1] = (auVar56._0_4_ - auVar51._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar61._4_4_ - auVar57._4_4_;
      fVar38 = auVar61._8_4_ - auVar57._8_4_;
      pfVar17[2] = (auVar61._0_4_ - auVar57._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      pauVar15 = pauVar16;
      pfVar17 = pfVar17 + -4;
      lVar24 = lVar24 + -0x10;
    } while ((undefined1 (*) [16])local_e80 != pauVar16);
  }
  local_1350 = (byte)in_ECX;
  local_12d0 = auVar47;
  local_12c0[0] = (undefined1  [16])0x0;
  iVar30 = (1 << (local_1350 & 0x1f)) + -1;
  if (1 < uVar27) {
    lVar24 = 0x10;
    auVar64._8_4_ = _LC1;
    auVar64._0_8_ = auVar48._0_8_;
    auVar64._12_4_ = _LC1;
    auVar63._8_4_ = _LC1;
    auVar63._0_8_ = auVar48._0_8_;
    auVar63._12_4_ = _LC1;
    local_12e0 = (undefined1  [16])0x0;
    uVar26 = 1;
    local_12d0._8_4_ = _LC3;
    local_12d0._0_8_ = auVar47._0_8_;
    local_12d0._12_4_ = _LC3;
    local_12f0 = (undefined1  [16])0x0;
    pauVar15 = (undefined1 (*) [16])local_e80;
    local_1330 = auVar48;
    local_1320 = auVar47;
    local_1310 = auVar47;
    local_1300 = auVar47;
    local_1340 = __LC16;
    uStack_133c = _UNK_0012fb84;
    uStack_1338 = _UNK_0012fb88;
    uStack_1334 = _UNK_0012fb8c;
    do {
      uVar26 = uVar26 + 1;
      local_1320 = minps(local_1320,pauVar15[4]);
      local_1330 = maxps(local_1330,pauVar15[5]);
      local_12f0._0_4_ = local_12f0._0_4_ + *(int *)((long)local_290 + lVar24);
      local_12f0._4_4_ = local_12f0._4_4_ + *(int *)((long)local_290 + lVar24 + 4);
      local_12f0._8_4_ = local_12f0._8_4_ + *(int *)((long)local_290 + lVar24 + 8);
      local_12f0._12_4_ = local_12f0._12_4_ + *(int *)((long)local_290 + lVar24 + 0xc);
      auVar63 = maxps(auVar63,pauVar15[1]);
      fVar35 = local_1330._4_4_ - local_1320._4_4_;
      fVar62 = local_1330._8_4_ - local_1320._8_4_;
      local_1300 = minps(local_1300,*pauVar15);
      auVar64 = maxps(auVar64,pauVar15[3]);
      local_1310 = minps(local_1310,pauVar15[2]);
      fVar38 = auVar63._4_4_ - local_1300._4_4_;
      fVar60 = auVar63._8_4_ - local_1300._8_4_;
      fVar58 = auVar64._4_4_ - local_1310._4_4_;
      fVar59 = auVar64._8_4_ - local_1310._8_4_;
      fVar35 = (fVar35 + fVar62) * (local_1330._0_4_ - local_1320._0_4_) + fVar35 * fVar62;
      uVar12 = (uint)(local_12f0._0_4_ + iVar30) >> in_ECX;
      uVar33 = (uint)(local_12f0._4_4_ + iVar30) >> in_ECX;
      uVar40 = (uint)(local_12f0._8_4_ + iVar30) >> in_ECX;
      uVar46 = (uint)(local_12f0._12_4_ + iVar30) >> in_ECX;
      uVar29 = (uint)(*(int *)((long)aiStack_1090 + lVar24 + 0x10) + iVar30) >> in_ECX;
      uVar36 = (uint)(*(int *)((long)aiStack_1090 + lVar24 + 0x14) + iVar30) >> in_ECX;
      uVar45 = (uint)(*(int *)((long)aiStack_1090 + lVar24 + 0x18) + iVar30) >> in_ECX;
      uVar66 = (uint)(*(int *)((long)aiStack_1090 + lVar24 + 0x1c) + iVar30) >> in_ECX;
      pfVar17 = (float *)((long)local_1280 + lVar24);
      lVar21 = lVar24 + 4;
      lVar23 = lVar24 + 8;
      lVar9 = lVar24 + 0xc;
      lVar24 = lVar24 + 0x10;
      fVar38 = ((float)(int)(uVar12 & _LC20) + (float)((int)uVar12 >> 0x1f & __LC15)) *
               (fVar38 * fVar60 + (fVar38 + fVar60) * (auVar63._0_4_ - local_1300._0_4_)) +
               ((float)(int)(uVar29 & _LC20) + (float)((int)uVar29 >> 0x1f & __LC15)) * *pfVar17;
      fVar58 = ((float)(int)(uVar33 & _UNK_0012fba4) + (float)((int)uVar33 >> 0x1f & _UNK_0012fbb4))
               * (fVar58 * fVar59 + (fVar58 + fVar59) * (auVar64._0_4_ - local_1310._0_4_)) +
               ((float)(int)(uVar36 & _UNK_0012fba4) + (float)((int)uVar36 >> 0x1f & _UNK_0012fbb4))
               * *(float *)((long)local_1280 + lVar21);
      fVar59 = ((float)(int)(uVar40 & _UNK_0012fba8) + (float)((int)uVar40 >> 0x1f & _UNK_0012fbb8))
               * fVar35 +
               ((float)(int)(uVar45 & _UNK_0012fba8) + (float)((int)uVar45 >> 0x1f & _UNK_0012fbb8))
               * *(float *)((long)local_1280 + lVar23);
      fVar35 = ((float)(int)(uVar46 & _UNK_0012fbac) + (float)((int)uVar46 >> 0x1f & _UNK_0012fbbc))
               * fVar35 +
               ((float)(int)(uVar66 & _UNK_0012fbac) + (float)((int)uVar66 >> 0x1f & _UNK_0012fbbc))
               * *(float *)((long)local_1280 + lVar9);
      uVar12 = -(uint)(fVar38 < local_12d0._0_4_);
      uVar29 = -(uint)(fVar58 < local_12d0._4_4_);
      uVar33 = -(uint)(fVar59 < local_12d0._8_4_);
      uVar36 = -(uint)(fVar35 < local_12d0._12_4_);
      local_12e0._0_4_ = local_1340 & uVar12 | ~uVar12 & local_12e0._0_4_;
      local_12e0._4_4_ = uStack_133c & uVar29 | ~uVar29 & local_12e0._4_4_;
      local_12e0._8_4_ = uStack_1338 & uVar33 | ~uVar33 & local_12e0._8_4_;
      local_12e0._12_4_ = uStack_1334 & uVar36 | ~uVar36 & local_12e0._12_4_;
      auVar52._4_4_ = uVar29 & (uint)fVar58;
      auVar52._0_4_ = uVar12 & (uint)fVar38;
      auVar49._0_4_ = ~uVar12 & (uint)local_12d0._0_4_;
      auVar49._4_4_ = ~uVar29 & (uint)local_12d0._4_4_;
      auVar49._8_4_ = ~uVar33 & (uint)local_12d0._8_4_;
      auVar49._12_4_ = ~uVar36 & (uint)local_12d0._12_4_;
      auVar52._8_4_ = uVar33 & (uint)fVar59;
      auVar52._12_4_ = uVar36 & (uint)fVar35;
      local_12d0 = auVar52 | auVar49;
      pauVar15 = pauVar15 + 6;
      local_1340 = local_1340 + __LC16;
      uStack_133c = uStack_133c + _UNK_0012fb84;
      uStack_1338 = uStack_1338 + _UNK_0012fb88;
      uStack_1334 = uStack_1334 + _UNK_0012fb8c;
    } while (uVar26 < uVar25);
    local_12c0[0]._4_4_ = local_12e0._4_4_;
    local_12c0[0]._0_4_ = local_12e0._0_4_;
    local_12c0[0]._8_4_ = local_12e0._8_4_;
    local_12c0[0]._12_4_ = local_12e0._12_4_;
  }
  lVar24 = 0;
  uVar26 = 0;
  lVar21 = -1;
  fVar35 = _LC3;
  do {
    if (((local_1290[lVar24] != 0.0) && (*(float *)(local_12d0 + lVar24 * 4) < fVar35)) &&
       (local_1290[lVar24 + -0xc] != 0.0)) {
      lVar21 = (long)(int)lVar24;
      uVar26 = (ulong)(int)local_1290[lVar24 + -0xc];
      fVar35 = *(float *)(local_12d0 + lVar24 * 4);
    }
    lVar24 = lVar24 + 1;
  } while (lVar24 != 3);
  iVar30 = (int)lVar21;
  *(int *)(param_1 + 4) = iVar30;
  *(int *)(param_1 + 8) = (int)uVar26;
  *(undefined4 *)(param_1 + 0xc) = 0;
  *(ulong *)(param_1 + 0x10) = uVar25;
  *(float *)param_1 = fVar35;
  *(float *)(param_1 + 0x20) = fVar28;
  *(float *)(param_1 + 0x24) = fVar2;
  *(float *)(param_1 + 0x28) = fVar3;
  *(float *)(param_1 + 0x2c) = fVar4;
  *(float *)(param_1 + 0x30) = fVar50;
  *(float *)(param_1 + 0x34) = fVar53;
  *(float *)(param_1 + 0x38) = fVar54;
  *(uint *)(param_1 + 0x3c) = uVar55;
  if (iVar30 == -1) {
    *in_R8 = 0;
    in_R8[1] = 0;
    *(undefined1 (*) [16])(in_R8 + 2) = auVar47;
    *(undefined1 (*) [16])(in_R8 + 4) = auVar48;
    *(undefined1 (*) [16])(in_R8 + 6) = auVar47;
    *(undefined1 (*) [16])(in_R8 + 8) = auVar48;
  }
  else {
    lVar24 = 0;
    auVar32._8_4_ = uVar10;
    auVar32._0_8_ = auVar48._0_8_;
    auVar32._12_4_ = uVar10;
    auVar44._8_4_ = fVar11;
    auVar44._0_8_ = auVar47._0_8_;
    auVar44._12_4_ = fVar11;
    if (uVar26 != 0) {
      lVar23 = (long)iVar30;
      lVar24 = 0;
      pauVar15 = (undefined1 (*) [16])(local_e70 + lVar23 * 0x20);
      puVar19 = *(undefined1 (*) [16])local_e80 + lVar23 * 4;
      do {
        puVar18 = puVar19 + 0x10;
        auVar44 = minps(auVar44,pauVar15[-1]);
        auVar32 = maxps(auVar32,*pauVar15);
        pauVar15 = pauVar15 + 6;
        lVar24 = lVar24 + (ulong)*(uint *)(puVar19 + 0xc00);
        puVar19 = puVar18;
      } while (((undefined1 (*) [16])local_e80)[uVar26] + lVar23 * 4 != puVar18);
    }
    if (uVar26 < uVar25) {
      puVar20 = (uint *)(((undefined1 (*) [16])local_e80)[uVar26 + 0xc0] + lVar21 * 4);
      lVar23 = 0;
      pauVar15 = (undefined1 (*) [16])(local_e70 + (uVar26 * 3 + lVar21) * 0x20);
      do {
        uVar55 = *puVar20;
        puVar20 = puVar20 + 4;
        auVar47 = minps(auVar47,pauVar15[-1]);
        auVar48 = maxps(auVar48,*pauVar15);
        lVar23 = lVar23 + (ulong)uVar55;
        pauVar15 = pauVar15 + 6;
      } while ((uint *)(((undefined1 (*) [16])local_280)[uVar25] + lVar21 * 4) != puVar20);
    }
    else {
      lVar23 = 0;
    }
    *in_R8 = lVar24;
    in_R8[1] = lVar23;
    *(undefined1 (*) [16])(in_R8 + 2) = auVar44;
    *(undefined1 (*) [16])(in_R8 + 4) = auVar32;
    *(undefined1 (*) [16])(in_R8 + 6) = auVar47;
    *(undefined1 (*) [16])(in_R8 + 8) = auVar48;
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::sequential_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&) [clone .isra.0] */

undefined1  [16] __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
sequential_spatial_split
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,SpatialBinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  undefined1 auVar1 [16];
  undefined1 auVar2 [16];
  int iVar3;
  long lVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  long lVar8;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar9;
  long lVar10;
  int iVar11;
  ulong uVar12;
  ulong uVar13;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar14
  ;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar15
  ;
  long lVar16;
  int unaff_R12D;
  undefined1 auVar17 [16];
  uint uVar18;
  undefined4 uVar19;
  uint uVar21;
  undefined4 uVar22;
  uint uVar23;
  undefined4 uVar24;
  uint uVar25;
  undefined1 auVar20 [16];
  undefined4 uVar26;
  uint uVar27;
  uint uVar29;
  uint uVar30;
  uint uVar31;
  undefined1 auVar28 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined4 uVar37;
  undefined4 uVar38;
  undefined4 uVar39;
  undefined4 uVar40;
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  undefined1 local_98 [16];
  uint local_78;
  uint uStack_74;
  uint uStack_70;
  uint uStack_6c;
  
  uVar12 = (ulong)*(uint *)(param_1 + 4);
  auVar36._0_8_ = CONCAT44(_LC1,_LC1);
  auVar36._8_4_ = _LC1;
  auVar36._12_4_ = _LC1;
  iVar3 = *(int *)(param_1 + 8);
  lVar4 = *(long *)(param_2 + 0x48);
  auVar35._0_8_ = CONCAT44(_LC3,_LC3);
  auVar35._8_4_ = _LC3;
  auVar35._12_4_ = _LC3;
  lVar16 = 0;
  lVar10 = *(long *)(param_2 + 0x40);
  auVar43._8_4_ = _LC3;
  auVar43._0_8_ = auVar35._0_8_;
  auVar43._12_4_ = _LC3;
  auVar41._8_4_ = _LC3;
  auVar41._0_8_ = auVar35._0_8_;
  auVar41._12_4_ = _LC3;
  lVar8 = (long)(1 << ((byte)*(uint *)(param_1 + 4) & 0x1f));
  auVar42._8_4_ = _LC3;
  auVar42._0_8_ = auVar35._0_8_;
  auVar42._12_4_ = _LC3;
  uVar5 = (&mm_lookupmask_ps)[lVar8 * 2];
  uVar6 = *(undefined8 *)(operator_delete + lVar8 * 0x10);
  pHVar15 = this + lVar4 * 0x20 + -0x20;
  auVar17._8_4_ = _LC1;
  auVar17._0_8_ = auVar36._0_8_;
  auVar17._12_4_ = _LC1;
  pHVar9 = this + lVar10 * 0x20;
  lVar8 = 0;
  uVar19 = _LC1;
  uVar22 = _LC1;
  uVar24 = _LC1;
  uVar26 = _LC1;
  local_98 = auVar36;
  do {
    if (pHVar15 < pHVar9) {
      uVar37 = auVar41._0_4_;
      uVar38 = auVar41._4_4_;
      uVar39 = auVar41._8_4_;
      uVar40 = auVar41._12_4_;
      auVar34._4_4_ = uVar22;
      auVar34._0_4_ = uVar19;
      auVar34._8_4_ = uVar24;
      auVar34._12_4_ = uVar26;
LAB_00102ec4:
      *(long *)(param_3 + 0x40) = lVar10;
      lVar10 = (long)pHVar9 - (long)this >> 5;
      *(undefined1 (*) [16])param_3 = auVar42;
      *(long *)(param_3 + 0x48) = lVar10;
      *(long *)(param_3 + 0x50) = lVar10;
      *(undefined8 *)(param_3 + 0x10) = local_98._0_8_;
      *(undefined8 *)(param_3 + 0x18) = local_98._8_8_;
      *(undefined1 (*) [16])(param_3 + 0x20) = auVar43;
      *(undefined1 (*) [16])(param_3 + 0x30) = auVar17;
      *(long *)(param_4 + 0x40) = lVar10;
      *(long *)(param_4 + 0x48) = lVar4;
      *(long *)(param_4 + 0x50) = lVar4;
      *(undefined4 *)param_4 = uVar37;
      *(undefined4 *)(param_4 + 4) = uVar38;
      *(undefined4 *)(param_4 + 8) = uVar39;
      *(undefined4 *)(param_4 + 0xc) = uVar40;
      *(undefined1 (*) [16])(param_4 + 0x10) = auVar34;
      *(undefined1 (*) [16])(param_4 + 0x20) = auVar35;
      *(undefined1 (*) [16])(param_4 + 0x30) = auVar36;
      auVar44._8_8_ = lVar16;
      auVar44._0_8_ = lVar8;
      return auVar44;
    }
    auVar44 = *(undefined1 (*) [16])(pHVar9 + 0x10);
    auVar1 = *(undefined1 (*) [16])pHVar9;
    auVar32._0_4_ = auVar44._0_4_ + auVar1._0_4_;
    auVar32._4_4_ = auVar44._4_4_ + auVar1._4_4_;
    auVar32._8_4_ = auVar44._8_4_ + auVar1._8_4_;
    auVar32._12_4_ = auVar44._12_4_ + auVar1._12_4_;
    uVar18 = (uint)((_LC22 * auVar32._0_4_ - *(float *)(param_1 + 0x20)) *
                    *(float *)(param_1 + 0x30) + _LC12);
    uVar21 = (uint)((_UNK_0012fbd4 * auVar32._4_4_ - *(float *)(param_1 + 0x24)) *
                    *(float *)(param_1 + 0x34) + _UNK_0012fb94);
    uVar23 = (uint)((_UNK_0012fbd8 * auVar32._8_4_ - *(float *)(param_1 + 0x28)) *
                    *(float *)(param_1 + 0x38) + _UNK_0012fb98);
    uVar25 = (uint)((_UNK_0012fbdc * auVar32._12_4_ - *(float *)(param_1 + 0x2c)) *
                    *(float *)(param_1 + 0x3c) + _UNK_0012fb9c);
    uVar27 = -(uint)((int)uVar18 < (int)__LC24);
    uVar29 = -(uint)((int)uVar21 < (int)_UNK_0012fbe4);
    uVar30 = -(uint)((int)uVar23 < (int)_UNK_0012fbe8);
    uVar31 = -(uint)((int)uVar25 < (int)_UNK_0012fbec);
    uVar18 = uVar27 & uVar18 | ~uVar27 & __LC24;
    uVar21 = uVar29 & uVar21 | ~uVar29 & _UNK_0012fbe4;
    uVar23 = uVar30 & uVar23 | ~uVar30 & _UNK_0012fbe8;
    uVar25 = uVar31 & uVar25 | ~uVar31 & _UNK_0012fbec;
    local_78 = (uint)uVar5;
    uStack_74 = (uint)((ulong)uVar5 >> 0x20);
    uStack_70 = (uint)uVar6;
    uStack_6c = (uint)((ulong)uVar6 >> 0x20);
    auVar20._0_4_ = -(uint)((int)(~-(uint)((int)uVar18 < 0) & uVar18) < iVar3) & local_78;
    auVar20._4_4_ = -(uint)((int)(~-(uint)((int)uVar21 < 0) & uVar21) < iVar3) & uStack_74;
    auVar20._8_4_ = -(uint)((int)(~-(uint)((int)uVar23 < 0) & uVar23) < iVar3) & uStack_70;
    auVar20._12_4_ = -(uint)((int)(~-(uint)((int)uVar25 < 0) & uVar25) < iVar3) & uStack_6c;
    iVar11 = movmskps((int)uVar12,auVar20);
    if (iVar11 == 0) {
      auVar34._4_4_ = uVar22;
      auVar34._0_4_ = uVar19;
      auVar34._8_4_ = uVar24;
      auVar34._12_4_ = uVar26;
      pHVar14 = pHVar15;
      while( true ) {
        auVar20 = *(undefined1 (*) [16])(pHVar14 + 0x10);
        auVar2 = *(undefined1 (*) [16])pHVar14;
        pHVar15 = pHVar14 + -0x20;
        auVar33._0_4_ = auVar20._0_4_ + auVar2._0_4_;
        auVar33._4_4_ = auVar20._4_4_ + auVar2._4_4_;
        auVar33._8_4_ = auVar20._8_4_ + auVar2._8_4_;
        auVar33._12_4_ = auVar20._12_4_ + auVar2._12_4_;
        uVar13 = (ulong)(*(uint *)(pHVar14 + 0xc) >> 0x1b);
        uVar18 = (uint)((_LC22 * auVar33._0_4_ - *(float *)(param_1 + 0x20)) *
                        *(float *)(param_1 + 0x30) + _LC12);
        uVar21 = (uint)((_UNK_0012fbd4 * auVar33._4_4_ - *(float *)(param_1 + 0x24)) *
                        *(float *)(param_1 + 0x34) + _UNK_0012fb94);
        uVar23 = (uint)((_UNK_0012fbd8 * auVar33._8_4_ - *(float *)(param_1 + 0x28)) *
                        *(float *)(param_1 + 0x38) + _UNK_0012fb98);
        uVar25 = (uint)((_UNK_0012fbdc * auVar33._12_4_ - *(float *)(param_1 + 0x2c)) *
                        *(float *)(param_1 + 0x3c) + _UNK_0012fb9c);
        uVar27 = -(uint)((int)uVar18 < (int)__LC24);
        uVar29 = -(uint)((int)uVar21 < (int)_UNK_0012fbe4);
        uVar30 = -(uint)((int)uVar23 < (int)_UNK_0012fbe8);
        uVar31 = -(uint)((int)uVar25 < (int)_UNK_0012fbec);
        uVar18 = uVar27 & uVar18 | ~uVar27 & __LC24;
        uVar21 = uVar29 & uVar21 | ~uVar29 & _UNK_0012fbe4;
        uVar23 = uVar30 & uVar23 | ~uVar30 & _UNK_0012fbe8;
        uVar25 = uVar31 & uVar25 | ~uVar31 & _UNK_0012fbec;
        auVar28._0_4_ = -(uint)((int)(~-(uint)((int)uVar18 < 0) & uVar18) < iVar3) & local_78;
        auVar28._4_4_ = -(uint)((int)(~-(uint)((int)uVar21 < 0) & uVar21) < iVar3) & uStack_74;
        auVar28._8_4_ = -(uint)((int)(~-(uint)((int)uVar23 < 0) & uVar23) < iVar3) & uStack_70;
        auVar28._12_4_ = -(uint)((int)(~-(uint)((int)uVar25 < 0) & uVar25) < iVar3) & uStack_6c;
        unaff_R12D = movmskps(unaff_R12D,auVar28);
        if (unaff_R12D != 0) break;
        auVar41 = minps(auVar41,auVar2);
        auVar34 = maxps(auVar34,auVar20);
        lVar16 = lVar16 + uVar13;
        auVar35 = minps(auVar35,auVar33);
        auVar36 = maxps(auVar36,auVar33);
        pHVar14 = pHVar15;
        if (pHVar15 < pHVar9) {
          uVar37 = auVar41._0_4_;
          uVar38 = auVar41._4_4_;
          uVar39 = auVar41._8_4_;
          uVar40 = auVar41._12_4_;
          goto LAB_00102ec4;
        }
      }
      *(undefined1 (*) [16])pHVar9 = auVar2;
      auVar42 = minps(auVar42,auVar2);
      local_98 = maxps(local_98,auVar20);
      auVar20 = maxps(auVar34,auVar44);
      uVar7 = *(undefined8 *)(pHVar14 + 0x18);
      uVar12 = (ulong)(*(uint *)(pHVar9 + 0xc) >> 0x1b);
      auVar43 = minps(auVar43,auVar33);
      auVar41 = minps(auVar41,auVar1);
      *(undefined8 *)(pHVar9 + 0x10) = *(undefined8 *)(pHVar14 + 0x10);
      *(undefined8 *)(pHVar9 + 0x18) = uVar7;
      auVar35 = minps(auVar35,auVar32);
      auVar36 = maxps(auVar36,auVar32);
      lVar16 = lVar16 + uVar12;
      auVar17 = maxps(auVar17,auVar33);
      uVar19 = auVar20._0_4_;
      uVar22 = auVar20._4_4_;
      uVar24 = auVar20._8_4_;
      uVar26 = auVar20._12_4_;
      *(undefined1 (*) [16])pHVar14 = auVar1;
      *(undefined1 (*) [16])(pHVar14 + 0x10) = auVar44;
    }
    else {
      auVar42 = minps(auVar42,auVar1);
      auVar43 = minps(auVar43,auVar32);
      auVar17 = maxps(auVar17,auVar32);
      local_98 = maxps(local_98,auVar44);
      uVar12 = (ulong)(*(uint *)(pHVar9 + 0xc) >> 0x1b);
      uVar13 = uVar12;
    }
    lVar8 = lVar8 + uVar13;
    pHVar9 = pHVar9 + 0x20;
  } while( true );
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0012fa98;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  operator_delete(this,0xa0);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0012fb28;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  operator_delete(this,0xa0);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0012fae0;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  operator_delete(this,0xa0);
  return;
}



/* embree::FastAllocator::reset() */

void __thiscall embree::FastAllocator::reset(FastAllocator *this)

{
  long *plVar1;
  ulong *puVar2;
  long *plVar3;
  FastAllocator *pFVar4;
  long lVar5;
  FastAllocator *pFVar6;
  ulong uVar7;
  long *plVar8;
  long in_FS_OFFSET;
  long local_48;
  long local_40;
  
  pFVar6 = this + 0xf8;
  plVar8 = &local_48;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pFVar4 = this + 0xb8;
  do {
    while (*(long *)pFVar4 != 0) {
      lVar5 = *(long *)(*(long *)pFVar4 + 0x18);
      *(long *)(*(long *)pFVar4 + 0x18) = *(long *)pFVar6;
      LOCK();
      *(long *)pFVar6 = *(long *)pFVar4;
      UNLOCK();
      LOCK();
      *(long *)pFVar4 = lVar5;
      UNLOCK();
    }
    LOCK();
    *(long *)pFVar4 = 0;
    UNLOCK();
    pFVar4 = pFVar4 + 8;
  } while (pFVar4 != pFVar6);
  LOCK();
  *(undefined8 *)(this + 0x118) = 0;
  UNLOCK();
  LOCK();
  *(undefined8 *)(this + 0x120) = 0;
  UNLOCK();
  LOCK();
  *(undefined8 *)(this + 0x128) = 0;
  UNLOCK();
  pFVar4 = this + 0x100;
  while (*(long *)pFVar6 != 0) {
    puVar2 = *(ulong **)pFVar6;
    uVar7 = *puVar2;
    if (*puVar2 < puVar2[1]) {
      uVar7 = puVar2[1];
    }
    LOCK();
    puVar2[1] = uVar7;
    UNLOCK();
    LOCK();
    *puVar2 = 0;
    UNLOCK();
    lVar5 = *(long *)(*(long *)pFVar6 + 0x18);
    *(long *)(*(long *)pFVar6 + 0x18) = *(long *)pFVar4;
    LOCK();
    *(long *)pFVar4 = *(long *)pFVar6;
    UNLOCK();
    LOCK();
    *(long *)pFVar6 = lVar5;
    UNLOCK();
  }
  lVar5 = *(long *)(this + 0x100);
  local_48 = lVar5;
  for (; lVar5 != 0; lVar5 = *(long *)(lVar5 + 0x18)) {
    while (*(int *)(lVar5 + 0x28) != 2) {
      plVar8 = (long *)(lVar5 + 0x18);
      lVar5 = *(long *)(lVar5 + 0x18);
      if (lVar5 == 0) goto LAB_00103317;
    }
    *plVar8 = *(undefined8 *)(lVar5 + 0x18);
  }
LAB_00103317:
  LOCK();
  *(long *)pFVar4 = local_48;
  UNLOCK();
  pFVar6 = this + 0x78;
  do {
    LOCK();
    *(long *)pFVar6 = 0;
    UNLOCK();
    LOCK();
    *(long *)(pFVar6 + 0x40) = 0;
    UNLOCK();
    pFVar6 = pFVar6 + 8;
  } while (pFVar6 != this + 0xb8);
  plVar8 = *(long **)(this + 0x130);
  plVar3 = *(long **)(this + 0x138);
  if (plVar3 != plVar8) {
    do {
      while( true ) {
        lVar5 = *plVar8;
        if (this != *(FastAllocator **)(lVar5 + 8)) break;
        embree::MutexSys::lock();
        if (this == *(FastAllocator **)(lVar5 + 8)) {
          LOCK();
          plVar1 = (long *)(*(long *)(lVar5 + 8) + 0x118);
          *plVar1 = *plVar1 + *(long *)(lVar5 + 0xa8) + *(long *)(lVar5 + 0x68);
          UNLOCK();
          LOCK();
          plVar1 = (long *)(*(long *)(lVar5 + 8) + 0x120);
          *plVar1 = *plVar1 + (((*(long *)(lVar5 + 0x98) + *(long *)(lVar5 + 0x58)) -
                               *(long *)(lVar5 + 0x50)) - *(long *)(lVar5 + 0x90));
          UNLOCK();
          LOCK();
          plVar1 = (long *)(*(long *)(lVar5 + 8) + 0x128);
          *plVar1 = *plVar1 + *(long *)(lVar5 + 0xb0) + *(long *)(lVar5 + 0x70);
          UNLOCK();
          *(undefined8 *)(lVar5 + 0x48) = 0;
          *(undefined8 *)(lVar5 + 0x58) = 0;
          *(undefined8 *)(lVar5 + 0x50) = 0;
          *(undefined8 *)(lVar5 + 0x68) = 0;
          *(undefined8 *)(lVar5 + 0x70) = 0;
          *(undefined8 *)(lVar5 + 0x60) = 0;
          *(undefined8 *)(lVar5 + 0x88) = 0;
          *(undefined8 *)(lVar5 + 0x98) = 0;
          *(undefined8 *)(lVar5 + 0x90) = 0;
          *(undefined8 *)(lVar5 + 0xa8) = 0;
          *(undefined8 *)(lVar5 + 0xb0) = 0;
          *(undefined8 *)(lVar5 + 0xa0) = 0;
          LOCK();
          *(undefined8 *)(lVar5 + 8) = 0;
          UNLOCK();
        }
        plVar8 = plVar8 + 1;
        embree::MutexSys::unlock();
        if (plVar3 == plVar8) goto LAB_00103468;
      }
      plVar8 = plVar8 + 1;
    } while (plVar3 != plVar8);
LAB_00103468:
    if (*(long *)(this + 0x130) != *(long *)(this + 0x138)) {
      *(long *)(this + 0x138) = *(long *)(this + 0x130);
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::FastAllocator::init_estimate(unsigned long) */

void __thiscall embree::FastAllocator::init_estimate(FastAllocator *this,ulong param_1)

{
  FastAllocator *pFVar1;
  long lVar2;
  FastAllocator *pFVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  
  pFVar3 = this + 0xb8;
  pFVar1 = this + 0xf8;
  do {
    while (*(long *)pFVar3 != 0) {
      lVar2 = *(long *)(*(long *)pFVar3 + 0x18);
      *(long *)(*(long *)pFVar3 + 0x18) = *(long *)pFVar1;
      LOCK();
      *(long *)pFVar1 = *(long *)pFVar3;
      UNLOCK();
      LOCK();
      *(long *)pFVar3 = lVar2;
      UNLOCK();
    }
    LOCK();
    *(long *)pFVar3 = 0;
    UNLOCK();
    pFVar3 = pFVar3 + 8;
  } while (pFVar1 != pFVar3);
  if ((*(long *)(this + 0xf8) != 0) || (*(long *)(this + 0x100) != 0)) {
    reset(this);
    return;
  }
  *(ulong *)(this + 0x18) = param_1;
  uVar6 = 3;
  this[0x10a] = (FastAllocator)0x0;
  uVar5 = param_1 / 0x14 + 0x7f & 0xffffffffffffff80;
  uVar4 = 0x1fffc0;
  if (uVar5 < 0x1fffc1) {
    uVar4 = uVar5;
  }
  if (uVar4 < 0x400) {
    uVar4 = 0x400;
  }
  *(ulong *)(this + 0x28) = uVar4;
  *(ulong *)(this + 0x20) = uVar4;
  if (param_1 <= uVar4 * 0x50) {
    uVar6 = (ulong)(uVar4 * 0x28 < param_1);
  }
  *(ulong *)(this + 8) = uVar6;
  if (uVar4 * 0xa0 < param_1) {
    *(undefined8 *)(this + 8) = 7;
    if (uVar4 * 0x140 < param_1) {
LAB_00103655:
      *(undefined8 *)(this + 0x10) = 0x1040;
      *(ulong *)(this + 0x20) = uVar4 * 2;
      goto LAB_001035c1;
    }
  }
  else {
    if (uVar4 * 0x140 < param_1) goto LAB_00103655;
    if (0x1040 < uVar5) {
      uVar5 = 0x1040;
    }
    if (uVar5 < 0x400) {
      uVar5 = 0x400;
    }
    *(ulong *)(this + 0x10) = uVar5;
    if (param_1 != 0) goto LAB_001035c1;
    *(undefined8 *)(this + 0x28) = 0x1fffc0;
  }
  *(undefined8 *)(this + 0x10) = 0x1040;
LAB_001035c1:
  LOCK();
  *(undefined8 *)(this + 0x110) = 0;
  UNLOCK();
  lVar2 = *(long *)this;
  if (*(long *)(lVar2 + 0x4e0) != 0) {
    *(long *)(this + 0x20) = *(long *)(lVar2 + 0x4e0);
  }
  if ((((0 < *(int *)(lVar2 + 0x4e8)) &&
       (*(undefined8 *)(this + 8) = 0, 1 < *(int *)(lVar2 + 0x4e8))) &&
      (*(undefined8 *)(this + 8) = 1, 3 < *(int *)(lVar2 + 0x4e8))) &&
     (*(undefined8 *)(this + 8) = 3, 7 < *(int *)(lVar2 + 0x4e8))) {
    *(undefined8 *)(this + 8) = 7;
  }
  if (*(long *)(lVar2 + 0x4f0) != 0) {
    *(long *)(this + 0x10) = *(long *)(lVar2 + 0x4f0);
  }
  if (*(int *)(lVar2 + 0x4f8) != -1) {
    this[0x10a] = (FastAllocator)(*(int *)(lVar2 + 0x4f8) != 0);
  }
  return;
}



/* embree::FastAllocator::Block::create(embree::Device*, bool, unsigned long, unsigned long,
   embree::FastAllocator::Block*, embree::FastAllocator::AllocationType) */

undefined8 *
embree::FastAllocator::Block::create
          (long *param_1,char param_2,ulong param_3,long param_4,undefined8 param_5,int param_6)

{
  undefined8 *puVar1;
  ulong uVar2;
  void *pvVar3;
  ulong uVar4;
  long in_FS_OFFSET;
  bool local_31;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_6 == 1) {
    if (0x1fffbf < param_3) {
      uVar2 = param_3 + 0x103f & 0xfffffffffffff000;
      if (param_1 != (long *)0x0) {
        (**(code **)(*param_1 + 0x20))(param_1,uVar2,0);
      }
      uVar4 = param_4 + 0x103fU & 0xfffffffffffff000;
      puVar1 = (undefined8 *)embree::os_malloc(uVar4,&local_31);
      *puVar1 = 0;
      puVar1[1] = uVar2 - 0x40;
      puVar1[2] = uVar4 - 0x40;
      puVar1[3] = param_5;
      puVar1[4] = 0;
      *(undefined4 *)(puVar1 + 5) = 1;
      *(bool *)((long)puVar1 + 0x2c) = local_31;
      goto LAB_00103740;
    }
  }
  else {
    puVar1 = (undefined8 *)0x0;
    if (param_6 != 0) goto LAB_00103740;
    if (param_3 == 0x3fffc0) {
      if (param_1 != (long *)0x0) {
        (**(code **)(*param_1 + 0x20))(param_1,0x400040,0);
      }
      if (param_2 == '\0') {
        puVar1 = (undefined8 *)embree::alignedMalloc(0x400000,0x40);
      }
      else {
        puVar1 = (undefined8 *)(**(code **)(*param_1 + 0x38))(param_1,0x400000,0x40);
      }
      pvVar3 = (void *)((ulong)puVar1 & 0xffffffffffe00000);
      embree::os_advise(pvVar3,0x200000);
      embree::os_advise((void *)((long)pvVar3 + 0x200000),0x200000);
      embree::os_advise((void *)((long)pvVar3 + 0x400000),0x200000);
      *puVar1 = 0;
      puVar1[1] = 0x3fffc0;
      puVar1[2] = 0x3fffc0;
      puVar1[3] = param_5;
      puVar1[4] = 0x40;
      *(undefined4 *)(puVar1 + 5) = 0;
      *(undefined1 *)((long)puVar1 + 0x2c) = 0;
      goto LAB_00103740;
    }
  }
  if (param_1 != (long *)0x0) {
    (**(code **)(*param_1 + 0x20))(param_1,param_3 + 0x80,0);
  }
  if (param_2 == '\0') {
    puVar1 = (undefined8 *)embree::alignedMalloc(param_3 + 0x40,0x40);
  }
  else {
    puVar1 = (undefined8 *)(**(code **)(*param_1 + 0x38))(param_1,param_3 + 0x40,0x40);
  }
  *puVar1 = 0;
  puVar1[1] = param_3;
  puVar1[2] = param_3;
  puVar1[3] = param_5;
  puVar1[4] = 0x40;
  *(undefined4 *)(puVar1 + 5) = 0;
  *(undefined1 *)((long)puVar1 + 0x2c) = 0;
LAB_00103740:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return puVar1;
}



/* embree::FastAllocator::malloc(unsigned long&, unsigned long, bool) */

void __thiscall
embree::FastAllocator::malloc(FastAllocator *this,ulong *param_1,ulong param_2,bool param_3)

{
  FastAllocator *pFVar1;
  long lVar2;
  ulong *puVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  undefined8 uVar7;
  FastAllocator *pFVar8;
  undefined8 *puVar9;
  undefined4 uVar10;
  
  do {
    uVar4 = embree::TaskScheduler::threadID();
    lVar2 = (uVar4 & *(ulong *)(this + 8)) * 8;
    pFVar1 = this + lVar2 + 0x78;
    puVar3 = *(ulong **)pFVar1;
    if (puVar3 != (ulong *)0x0) {
      puVar9 = *(undefined8 **)this;
      if (puVar9 != (undefined8 *)0x0) {
        puVar9 = puVar9 + 0xa9;
      }
      uVar4 = -param_2 & (param_2 - 1) + *param_1;
      if (puVar3[2] < *puVar3 + uVar4) {
        if (param_3) {
          LOCK();
          uVar6 = *puVar3;
          *puVar3 = *puVar3 + uVar4;
          UNLOCK();
          goto LAB_0010398a;
        }
      }
      else {
        LOCK();
        uVar6 = *puVar3;
        *puVar3 = *puVar3 + uVar4;
        UNLOCK();
        if ((uVar4 + uVar6 <= puVar3[2]) || (param_3)) {
LAB_0010398a:
          if (uVar6 <= puVar3[2]) {
            uVar5 = puVar3[2] - uVar6;
            if (uVar4 < puVar3[2] - uVar6) {
              uVar5 = uVar4;
            }
            *param_1 = uVar5;
            if ((puVar9 != (undefined8 *)0x0) && (puVar3[1] < uVar5 + uVar6)) {
              uVar4 = puVar3[1];
              if (puVar3[1] <= uVar6) {
                uVar4 = uVar6;
              }
              (**(code **)*puVar9)(puVar9,(uVar5 + uVar6) - uVar4,1);
            }
            if ((long)puVar3 + uVar6 + 0x40 != 0) {
              return;
            }
          }
        }
      }
      if (this[0x109] == (FastAllocator)0x0) {
LAB_00103b9a:
                    /* WARNING: Subroutine does not return */
        abort();
      }
    }
    if (0x1fffc0 < *param_1) goto LAB_00103b9a;
    if (*(long *)(this + 0x100) == 0) {
      embree::MutexSys::lock();
      if (puVar3 == *(ulong **)pFVar1) {
        pFVar8 = this + lVar2 + 0xb8;
        uVar10 = *(undefined4 *)(this + 0x148);
        uVar4 = (param_2 - 1) + *param_1 & -param_2;
        uVar6 = *(ulong *)(this + 0x28);
        if (*(ulong *)(this + 0x20) < *(ulong *)(this + 0x28)) {
          uVar6 = *(ulong *)(this + 0x20);
        }
        uVar7 = *(undefined8 *)pFVar8;
        if (uVar4 < uVar6) {
          uVar4 = uVar6;
        }
LAB_00103a64:
        uVar7 = Block::create(*(undefined8 *)this,this[0x108],uVar4,uVar4,uVar7,uVar10);
        LOCK();
        *(undefined8 *)pFVar1 = uVar7;
        UNLOCK();
        LOCK();
        *(undefined8 *)pFVar8 = uVar7;
        UNLOCK();
      }
    }
    else {
      embree::MutexSys::lock();
      if (puVar3 == *(ulong **)pFVar1) {
        if (*(long *)(this + 0x100) == 0) {
          LOCK();
          pFVar8 = this + 0x110;
          lVar2 = *(long *)pFVar8;
          *(long *)pFVar8 = *(long *)pFVar8 + 1;
          UNLOCK();
          uVar10 = *(undefined4 *)(this + 0x148);
          uVar7 = *(undefined8 *)(this + 0xf8);
          pFVar8 = this + 0xf8;
          uVar4 = 0x10;
          if (lVar2 + 1U < 0x11) {
            uVar4 = lVar2 + 1U;
          }
          uVar4 = *(long *)(this + 0x20) << ((byte)uVar4 & 0x3f);
          if (*(ulong *)(this + 0x28) < uVar4) {
            uVar4 = *(ulong *)(this + 0x28);
          }
          goto LAB_00103a64;
        }
        uVar7 = *(undefined8 *)(*(long *)(this + 0x100) + 0x18);
        *(undefined8 *)(*(long *)(this + 0x100) + 0x18) = *(undefined8 *)(this + 0xf8);
        LOCK();
        *(undefined8 *)(this + 0xf8) = *(undefined8 *)(this + 0x100);
        UNLOCK();
        LOCK();
        *(undefined8 *)pFVar1 = *(undefined8 *)(this + 0x100);
        UNLOCK();
        LOCK();
        *(undefined8 *)(this + 0x100) = uVar7;
        UNLOCK();
      }
    }
    embree::MutexSys::unlock();
  } while( true );
}



/* WARNING: Control flow encountered bad instruction data */
/* void std::vector<embree::FastAllocator::ThreadLocal2*,
   std::allocator<embree::FastAllocator::ThreadLocal2*>
   >::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*
   const&>(__gnu_cxx::__normal_iterator<embree::FastAllocator::ThreadLocal2**,
   std::vector<embree::FastAllocator::ThreadLocal2*,
   std::allocator<embree::FastAllocator::ThreadLocal2*> > >, embree::FastAllocator::ThreadLocal2*
   const&) */

void __thiscall
std::
vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>::
_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
          (vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
           *this,void *param_2,undefined8 *param_3)

{
  void *__src;
  ulong uVar1;
  void *pvVar2;
  void *__dest;
  size_t __n;
  long lVar3;
  ulong uVar4;
  size_t __n_00;
  
  pvVar2 = *(void **)(this + 8);
  __src = *(void **)this;
  uVar1 = (long)pvVar2 - (long)__src >> 3;
  if (uVar1 == 0xfffffffffffffff) {
    std::__throw_length_error("vector::_M_realloc_insert");
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  __n = (long)param_2 - (long)__src;
  if (__src == pvVar2) {
    if (0xfffffffffffffffe < uVar1) goto LAB_00103ca0;
    uVar4 = 0xfffffffffffffff;
    if (uVar1 + 1 < 0x1000000000000000) {
      uVar4 = uVar1 + 1;
    }
    uVar4 = uVar4 << 3;
  }
  else {
    uVar4 = uVar1 * 2;
    if (uVar4 < uVar1) {
LAB_00103ca0:
      uVar4 = 0x7ffffffffffffff8;
    }
    else {
      if (uVar4 == 0) {
        lVar3 = 0;
        __dest = (void *)0x0;
        goto LAB_00103c29;
      }
      if (0xfffffffffffffff < uVar4) {
        uVar4 = 0xfffffffffffffff;
      }
      uVar4 = uVar4 * 8;
    }
  }
  __dest = operator_new(uVar4);
  lVar3 = uVar4 + (long)__dest;
LAB_00103c29:
  *(undefined8 *)((long)__dest + __n) = *param_3;
  if (0 < (long)__n) {
    memmove(__dest,__src,__n);
  }
  __n_00 = (long)pvVar2 - (long)param_2;
  pvVar2 = (void *)((long)__dest + __n + 8);
  if (0 < (long)__n_00) {
    pvVar2 = memmove(pvVar2,param_2,__n_00);
  }
  if (__src != (void *)0x0) {
    operator_delete(__src,*(long *)(this + 0x10) - (long)__src);
  }
  *(void **)this = __dest;
  *(size_t *)(this + 8) = __n_00 + (long)pvVar2;
  *(long *)(this + 0x10) = lVar3;
  return;
}



/* embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> > >::createLeaf(embree::PrimRef const*, embree::range<unsigned long>
   const&, embree::FastAllocator::CachedAllocator const&) */

ulong __thiscall
embree::sse2::BVHNBuilderVirtual<4>::
BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>::createLeaf
          (BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>> *this,
          PrimRef *param_1,range *param_2,CachedAllocator *param_3)

{
  long *plVar1;
  long lVar2;
  long lVar3;
  uint uVar4;
  int iVar5;
  ulong *puVar6;
  FastAllocator *this_00;
  ulong *puVar7;
  ulong uVar8;
  long lVar9;
  ulong uVar10;
  ulong uVar11;
  long lVar12;
  int *piVar13;
  uint uVar14;
  undefined8 uVar15;
  ulong uVar16;
  undefined8 *puVar17;
  undefined8 *puVar18;
  undefined8 *puVar19;
  ulong uVar20;
  ulong uVar21;
  ulong uVar22;
  long in_FS_OFFSET;
  ulong local_a8;
  ulong local_a0;
  undefined1 local_98 [16];
  undefined1 local_88 [16];
  undefined1 local_78 [16];
  uint local_68 [10];
  long local_40;
  
  uVar16 = *(ulong *)param_2;
  puVar6 = *(ulong **)(param_3 + 0x10);
  this_00 = *(FastAllocator **)param_3;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar11 = *puVar6;
  uVar21 = (*(long *)(param_2 + 8) + 3) - uVar16;
  uVar22 = uVar21 & 0xfffffffffffffffc;
  uVar21 = uVar21 >> 2;
  lVar3 = uVar22 + uVar21;
  uVar20 = lVar3 * 0x10;
  local_a8 = uVar20;
  if (this_00 != *(FastAllocator **)(uVar11 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar11 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar11 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar11 + 0xa8) + *(long *)(uVar11 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar11 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar11 + 0x98) + *(long *)(uVar11 + 0x58)) -
                           *(long *)(uVar11 + 0x50)) - *(long *)(uVar11 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar11 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar11 + 0xb0) + *(long *)(uVar11 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar11 + 0x48) = 0;
    *(undefined8 *)(uVar11 + 0x58) = 0;
    *(undefined8 *)(uVar11 + 0x50) = 0;
    *(undefined8 *)(uVar11 + 0x68) = 0;
    *(undefined8 *)(uVar11 + 0x70) = 0;
    *(undefined8 *)(uVar11 + 0x60) = 0;
    if (this_00 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar11 + 0x88) = 0;
      uVar15 = 0;
      *(undefined8 *)(uVar11 + 0x98) = 0;
      *(undefined8 *)(uVar11 + 0x90) = 0;
      *(undefined8 *)(uVar11 + 0xa8) = 0;
      *(undefined8 *)(uVar11 + 0xb0) = 0;
    }
    else {
      uVar15 = *(undefined8 *)(this_00 + 0x10);
      *(undefined8 *)(uVar11 + 0x88) = 0;
      *(undefined8 *)(uVar11 + 0x98) = 0;
      *(undefined8 *)(uVar11 + 0x60) = uVar15;
      *(undefined8 *)(uVar11 + 0x90) = 0;
      *(undefined8 *)(uVar11 + 0xa8) = 0;
      *(undefined8 *)(uVar11 + 0xb0) = 0;
      *(undefined8 *)(uVar11 + 0xa0) = 0;
      uVar15 = *(undefined8 *)(this_00 + 0x10);
    }
    *(undefined8 *)(uVar11 + 0xa0) = uVar15;
    LOCK();
    *(FastAllocator **)(uVar11 + 8) = this_00;
    UNLOCK();
    local_a0 = uVar11;
    embree::MutexSys::lock();
    puVar7 = *(ulong **)(this_00 + 0x138);
    if (puVar7 == *(ulong **)(this_00 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(this_00 + 0x130),puVar7,&local_a0);
    }
    else {
      *puVar7 = uVar11;
      *(long *)(this_00 + 0x138) = *(long *)(this_00 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar8 = puVar6[2];
  puVar6[5] = puVar6[5] + uVar20;
  uVar10 = (ulong)(-(int)uVar8 & 0xf);
  lVar2 = uVar8 + uVar10;
  uVar11 = uVar20 + lVar2;
  puVar6[2] = uVar11;
  if (puVar6[3] < uVar11) {
    puVar6[2] = uVar8;
    if (puVar6[4] < (uVar22 + uVar21) * 0x40) {
      puVar17 = (undefined8 *)FastAllocator::malloc(this_00,&local_a8,0x40,false);
    }
    else {
      local_a0 = puVar6[4];
      puVar17 = (undefined8 *)FastAllocator::malloc(this_00,&local_a0,0x40,true);
      puVar6[1] = (ulong)puVar17;
      uVar11 = puVar6[2];
      puVar6[2] = uVar20;
      puVar6[6] = (puVar6[3] + puVar6[6]) - uVar11;
      puVar6[3] = local_a0;
      if (local_a0 < uVar20) {
        puVar6[2] = 0;
        local_a0 = puVar6[4];
        puVar17 = (undefined8 *)FastAllocator::malloc(this_00,&local_a0,0x40,false);
        puVar6[1] = (ulong)puVar17;
        uVar11 = puVar6[2];
        puVar6[2] = uVar20;
        puVar6[6] = (puVar6[3] + puVar6[6]) - uVar11;
        puVar6[3] = local_a0;
        if (local_a0 < uVar20) {
          puVar17 = (undefined8 *)0x0;
          puVar6[2] = 0;
        }
      }
    }
  }
  else {
    puVar6[6] = puVar6[6] + uVar10;
    puVar17 = (undefined8 *)(lVar2 + puVar6[1]);
  }
  uVar11 = 7;
  if (uVar21 < 8) {
    uVar11 = uVar21;
  }
  if (uVar21 != 0) {
    puVar18 = puVar17;
    do {
      local_98 = (undefined1  [16])0x0;
      local_88 = (undefined1  [16])0x0;
      lVar2 = *(long *)(*(long *)(this + 8) + 0x68);
      local_78 = (undefined1  [16])0x0;
      local_68[0] = 0xffffffff;
      local_68[1] = 0xffffffff;
      local_68[2] = 0xffffffff;
      local_68[3] = 0xffffffff;
      uVar20 = *(ulong *)(param_2 + 8);
      local_68[4] = 0xffffffff;
      local_68[5] = 0xffffffff;
      local_68[6] = 0xffffffff;
      local_68[7] = 0xffffffff;
      if (uVar20 <= uVar16) {
        lVar12 = 1;
        goto LAB_001040d6;
      }
      lVar12 = 0;
      uVar21 = uVar16;
      do {
        uVar14 = *(uint *)(param_1 + uVar21 * 0x20 + 0xc);
        lVar9 = *(long *)(lVar2 + 0x1e0);
        uVar16 = uVar21 + 1;
        uVar4 = *(uint *)(param_1 + uVar21 * 0x20 + 0x1c);
        local_68[lVar12] = uVar14;
        lVar9 = *(long *)(lVar9 + (ulong)uVar14 * 8);
        local_68[lVar12 + 4] = uVar4;
        piVar13 = (int *)((ulong)uVar4 * *(long *)(lVar9 + 0x60) + *(long *)(lVar9 + 0x58));
        uVar14 = (uint)(*(ulong *)(lVar9 + 0x90) >> 2) & 0x3fffffff;
        *(uint *)(local_98 + lVar12 * 4) = *piVar13 * uVar14;
        iVar5 = piVar13[2];
        *(uint *)(local_88 + lVar12 * 4) = piVar13[1] * uVar14;
        uVar14 = uVar14 * iVar5;
        while (local_68[lVar12 + -4] = uVar14, uVar20 <= uVar16) {
          lVar12 = lVar12 + 1;
          if (lVar12 == 4) goto LAB_00104050;
LAB_001040d6:
          local_68[lVar12 + 4] = 0xffffffff;
          local_68[lVar12] = local_68[0];
          *(undefined4 *)(local_98 + lVar12 * 4) = local_98._0_4_;
          *(undefined4 *)(local_88 + lVar12 * 4) = local_98._0_4_;
          uVar14 = local_98._0_4_;
        }
        lVar12 = lVar12 + 1;
        uVar21 = uVar16;
      } while (lVar12 != 4);
LAB_00104050:
      puVar19 = puVar18 + 10;
      *puVar18 = local_98._0_8_;
      puVar18[1] = local_98._8_8_;
      puVar18[2] = local_88._0_8_;
      puVar18[3] = local_88._8_8_;
      puVar18[4] = local_78._0_8_;
      puVar18[5] = local_78._8_8_;
      puVar18[6] = CONCAT44(local_68[1],local_68[0]);
      puVar18[7] = CONCAT44(local_68[3],local_68[2]);
      puVar18[8] = CONCAT44(local_68[5],local_68[4]);
      puVar18[9] = CONCAT44(local_68[7],local_68[6]);
      puVar18 = puVar19;
    } while (puVar17 + lVar3 * 2 != puVar19);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar11 + 8 | (ulong)puVar17;
}



/* embree::NodeRefPtr<4>
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> >
   >::TEMPNAMEPLACEHOLDERVALUE(embree::PrimRef*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator) const [clone .isra.0] */

ulong embree::sse2::BVHBuilderBinnedFastSpatialSAH::
      CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>
      ::operator()(long *param_1,long param_2,ulong *param_3,FastAllocator *param_4,ulong *param_5)

{
  long *plVar1;
  long lVar2;
  uint uVar3;
  int iVar4;
  ulong uVar5;
  ulong *puVar6;
  ulong uVar7;
  long lVar8;
  long lVar9;
  ulong uVar10;
  long lVar11;
  long lVar12;
  int *piVar13;
  uint uVar14;
  undefined8 uVar15;
  ulong uVar16;
  undefined8 *puVar17;
  undefined8 *puVar18;
  undefined8 *puVar19;
  ulong uVar20;
  ulong uVar21;
  ulong uVar22;
  long in_FS_OFFSET;
  ulong local_a8;
  ulong local_a0;
  undefined1 local_98 [16];
  undefined1 local_88 [16];
  undefined1 local_78 [16];
  uint local_68 [10];
  long local_40;
  
  uVar16 = *param_3;
  uVar20 = param_3[1];
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar16 < uVar20) {
    lVar9 = uVar16 * 0x20 + param_2;
    do {
      *(uint *)(lVar9 + 0xc) = *(uint *)(lVar9 + 0xc) & 0x7ffffff;
      uVar20 = param_3[1];
      uVar16 = uVar16 + 1;
      lVar9 = lVar9 + 0x20;
    } while (uVar16 < uVar20);
    uVar16 = *param_3;
  }
  uVar5 = *param_5;
  uVar21 = (uVar20 + 3) - uVar16;
  uVar22 = uVar21 & 0xfffffffffffffffc;
  uVar21 = uVar21 >> 2;
  lVar9 = uVar22 + uVar21;
  uVar20 = lVar9 * 0x10;
  local_a8 = uVar20;
  if (param_4 != *(FastAllocator **)(uVar5 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar5 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar5 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar5 + 0xa8) + *(long *)(uVar5 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar5 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar5 + 0x98) + *(long *)(uVar5 + 0x58)) -
                           *(long *)(uVar5 + 0x50)) - *(long *)(uVar5 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar5 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar5 + 0xb0) + *(long *)(uVar5 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar5 + 0x48) = 0;
    *(undefined8 *)(uVar5 + 0x58) = 0;
    *(undefined8 *)(uVar5 + 0x50) = 0;
    *(undefined8 *)(uVar5 + 0x68) = 0;
    *(undefined8 *)(uVar5 + 0x70) = 0;
    *(undefined8 *)(uVar5 + 0x60) = 0;
    if (param_4 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar5 + 0x88) = 0;
      uVar15 = 0;
      *(undefined8 *)(uVar5 + 0x98) = 0;
      *(undefined8 *)(uVar5 + 0x90) = 0;
      *(undefined8 *)(uVar5 + 0xa8) = 0;
      *(undefined8 *)(uVar5 + 0xb0) = 0;
    }
    else {
      uVar15 = *(undefined8 *)(param_4 + 0x10);
      *(undefined8 *)(uVar5 + 0x88) = 0;
      *(undefined8 *)(uVar5 + 0x98) = 0;
      *(undefined8 *)(uVar5 + 0x60) = uVar15;
      *(undefined8 *)(uVar5 + 0x90) = 0;
      *(undefined8 *)(uVar5 + 0xa8) = 0;
      *(undefined8 *)(uVar5 + 0xb0) = 0;
      *(undefined8 *)(uVar5 + 0xa0) = 0;
      uVar15 = *(undefined8 *)(param_4 + 0x10);
    }
    *(undefined8 *)(uVar5 + 0xa0) = uVar15;
    LOCK();
    *(FastAllocator **)(uVar5 + 8) = param_4;
    UNLOCK();
    local_a0 = uVar5;
    embree::MutexSys::lock();
    puVar6 = *(ulong **)(param_4 + 0x138);
    if (puVar6 == *(ulong **)(param_4 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(param_4 + 0x130),puVar6,&local_a0);
    }
    else {
      *puVar6 = uVar5;
      *(long *)(param_4 + 0x138) = *(long *)(param_4 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar7 = param_5[2];
  param_5[5] = param_5[5] + uVar20;
  uVar10 = (ulong)(-(int)uVar7 & 0xf);
  lVar2 = uVar7 + uVar10;
  uVar5 = uVar20 + lVar2;
  param_5[2] = uVar5;
  if (param_5[3] < uVar5) {
    param_5[2] = uVar7;
    if (param_5[4] < (uVar22 + uVar21) * 0x40) {
      puVar17 = (undefined8 *)FastAllocator::malloc(param_4,&local_a8,0x40,false);
    }
    else {
      local_a0 = param_5[4];
      puVar17 = (undefined8 *)FastAllocator::malloc(param_4,&local_a0,0x40,true);
      param_5[1] = (ulong)puVar17;
      uVar5 = param_5[2];
      param_5[2] = uVar20;
      param_5[6] = (param_5[3] + param_5[6]) - uVar5;
      param_5[3] = local_a0;
      if (local_a0 < uVar20) {
        param_5[2] = 0;
        local_a0 = param_5[4];
        puVar17 = (undefined8 *)FastAllocator::malloc(param_4,&local_a0,0x40,false);
        param_5[1] = (ulong)puVar17;
        uVar5 = param_5[2];
        param_5[2] = uVar20;
        param_5[6] = (param_5[3] + param_5[6]) - uVar5;
        param_5[3] = local_a0;
        if (local_a0 < uVar20) {
          puVar17 = (undefined8 *)0x0;
          param_5[2] = 0;
        }
      }
    }
  }
  else {
    param_5[6] = param_5[6] + uVar10;
    puVar17 = (undefined8 *)(lVar2 + param_5[1]);
  }
  uVar20 = 7;
  if (uVar21 < 8) {
    uVar20 = uVar21;
  }
  if (uVar21 != 0) {
    puVar18 = puVar17;
    do {
      local_98 = (undefined1  [16])0x0;
      local_88 = (undefined1  [16])0x0;
      lVar2 = *(long *)(*param_1 + 0x68);
      local_78 = (undefined1  [16])0x0;
      local_68[0] = 0xffffffff;
      local_68[1] = 0xffffffff;
      local_68[2] = 0xffffffff;
      local_68[3] = 0xffffffff;
      uVar5 = param_3[1];
      local_68[4] = 0xffffffff;
      local_68[5] = 0xffffffff;
      local_68[6] = 0xffffffff;
      local_68[7] = 0xffffffff;
      if (uVar5 <= uVar16) {
        lVar11 = 1;
        goto LAB_00104656;
      }
      lVar11 = 0;
      do {
        lVar12 = uVar16 * 0x20 + param_2;
        uVar14 = *(uint *)(lVar12 + 0xc);
        lVar8 = *(long *)(lVar2 + 0x1e0);
        uVar16 = uVar16 + 1;
        uVar3 = *(uint *)(lVar12 + 0x1c);
        local_68[lVar11] = uVar14;
        lVar8 = *(long *)(lVar8 + (ulong)uVar14 * 8);
        local_68[lVar11 + 4] = uVar3;
        piVar13 = (int *)((ulong)uVar3 * *(long *)(lVar8 + 0x60) + *(long *)(lVar8 + 0x58));
        uVar14 = (uint)(*(ulong *)(lVar8 + 0x90) >> 2) & 0x3fffffff;
        *(uint *)(local_98 + lVar11 * 4) = *piVar13 * uVar14;
        iVar4 = piVar13[2];
        *(uint *)(local_88 + lVar11 * 4) = piVar13[1] * uVar14;
        uVar14 = uVar14 * iVar4;
        while (local_68[lVar11 + -4] = uVar14, uVar5 <= uVar16) {
          lVar11 = lVar11 + 1;
          if (lVar11 == 4) goto LAB_001045cf;
LAB_00104656:
          local_68[lVar11 + 4] = 0xffffffff;
          local_68[lVar11] = local_68[0];
          *(undefined4 *)(local_98 + lVar11 * 4) = local_98._0_4_;
          *(undefined4 *)(local_88 + lVar11 * 4) = local_98._0_4_;
          uVar14 = local_98._0_4_;
        }
        lVar11 = lVar11 + 1;
      } while (lVar11 != 4);
LAB_001045cf:
      puVar19 = puVar18 + 10;
      *puVar18 = local_98._0_8_;
      puVar18[1] = local_98._8_8_;
      puVar18[2] = local_88._0_8_;
      puVar18[3] = local_88._8_8_;
      puVar18[4] = local_78._0_8_;
      puVar18[5] = local_78._8_8_;
      puVar18[6] = CONCAT44(local_68[1],local_68[0]);
      puVar18[7] = CONCAT44(local_68[3],local_68[2]);
      puVar18[8] = CONCAT44(local_68[5],local_68[4]);
      puVar18[9] = CONCAT44(local_68[7],local_68[6]);
      puVar18 = puVar19;
    } while (puVar17 + lVar9 * 2 != puVar19);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar20 + 8 | (ulong)puVar17;
}



/* embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> > >::createLeaf(embree::PrimRef const*, embree::range<unsigned long>
   const&, embree::FastAllocator::CachedAllocator const&) */

ulong __thiscall
embree::sse2::BVHNBuilderVirtual<4>::
BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>::createLeaf
          (BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>> *this,
          PrimRef *param_1,range *param_2,CachedAllocator *param_3)

{
  long *plVar1;
  long lVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  uint uVar9;
  uint uVar10;
  ulong *puVar11;
  FastAllocator *this_00;
  ulong *puVar12;
  ulong uVar13;
  long lVar14;
  long lVar15;
  ulong uVar16;
  ulong uVar17;
  undefined8 uVar18;
  undefined4 *puVar19;
  undefined4 *puVar20;
  uint *puVar21;
  undefined4 *puVar22;
  undefined4 *puVar23;
  undefined4 *puVar24;
  undefined4 *puVar25;
  long lVar26;
  PrimRef *pPVar27;
  ulong uVar28;
  ulong uVar29;
  ulong uVar30;
  ulong uVar31;
  long in_FS_OFFSET;
  ulong local_108;
  ulong local_100;
  uint local_f8 [8];
  undefined1 local_d8 [16];
  undefined1 local_c8 [16];
  undefined1 local_b8 [16];
  undefined1 local_a8 [16];
  undefined1 local_98 [16];
  undefined1 local_88 [16];
  undefined1 local_78 [16];
  undefined1 local_68 [16];
  undefined1 local_58 [16];
  long local_40;
  
  uVar30 = *(ulong *)param_2;
  puVar11 = *(ulong **)(param_3 + 0x10);
  uVar17 = *puVar11;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar28 = (*(long *)(param_2 + 8) + 3) - uVar30;
  uVar29 = uVar28 & 0xfffffffffffffffc;
  uVar28 = uVar28 >> 2;
  this_00 = *(FastAllocator **)param_3;
  lVar2 = uVar29 * 2 + uVar28 * 3;
  uVar31 = lVar2 * 0x10;
  local_108 = uVar31;
  if (this_00 != *(FastAllocator **)(uVar17 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar17 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar17 + 0xa8) + *(long *)(uVar17 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar17 + 0x98) + *(long *)(uVar17 + 0x58)) -
                           *(long *)(uVar17 + 0x50)) - *(long *)(uVar17 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar17 + 0xb0) + *(long *)(uVar17 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar17 + 0x48) = 0;
    *(undefined8 *)(uVar17 + 0x58) = 0;
    *(undefined8 *)(uVar17 + 0x50) = 0;
    *(undefined8 *)(uVar17 + 0x68) = 0;
    *(undefined8 *)(uVar17 + 0x70) = 0;
    *(undefined8 *)(uVar17 + 0x60) = 0;
    if (this_00 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar17 + 0x88) = 0;
      uVar18 = 0;
      *(undefined8 *)(uVar17 + 0x98) = 0;
      *(undefined8 *)(uVar17 + 0x90) = 0;
      *(undefined8 *)(uVar17 + 0xa8) = 0;
      *(undefined8 *)(uVar17 + 0xb0) = 0;
    }
    else {
      uVar18 = *(undefined8 *)(this_00 + 0x10);
      *(undefined8 *)(uVar17 + 0x88) = 0;
      *(undefined8 *)(uVar17 + 0x98) = 0;
      *(undefined8 *)(uVar17 + 0x60) = uVar18;
      *(undefined8 *)(uVar17 + 0x90) = 0;
      *(undefined8 *)(uVar17 + 0xa8) = 0;
      *(undefined8 *)(uVar17 + 0xb0) = 0;
      *(undefined8 *)(uVar17 + 0xa0) = 0;
      uVar18 = *(undefined8 *)(this_00 + 0x10);
    }
    *(undefined8 *)(uVar17 + 0xa0) = uVar18;
    LOCK();
    *(FastAllocator **)(uVar17 + 8) = this_00;
    UNLOCK();
    local_100 = uVar17;
    embree::MutexSys::lock();
    puVar12 = *(ulong **)(this_00 + 0x138);
    if (puVar12 == *(ulong **)(this_00 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(this_00 + 0x130),puVar12,&local_100);
    }
    else {
      *puVar12 = uVar17;
      *(long *)(this_00 + 0x138) = *(long *)(this_00 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar13 = puVar11[2];
  puVar11[5] = puVar11[5] + uVar31;
  uVar16 = (ulong)(-(int)uVar13 & 0xf);
  lVar26 = uVar13 + uVar16;
  uVar17 = uVar31 + lVar26;
  puVar11[2] = uVar17;
  if (puVar11[3] < uVar17) {
    puVar11[2] = uVar13;
    if (puVar11[4] < (uVar29 * 2 + uVar28 * 3) * 0x40) {
      puVar22 = (undefined4 *)FastAllocator::malloc(this_00,&local_108,0x40,false);
    }
    else {
      local_100 = puVar11[4];
      puVar22 = (undefined4 *)FastAllocator::malloc(this_00,&local_100,0x40,true);
      puVar11[1] = (ulong)puVar22;
      uVar17 = puVar11[2];
      puVar11[2] = uVar31;
      puVar11[6] = (puVar11[3] + puVar11[6]) - uVar17;
      puVar11[3] = local_100;
      if (local_100 < uVar31) {
        puVar11[2] = 0;
        local_100 = puVar11[4];
        puVar22 = (undefined4 *)FastAllocator::malloc(this_00,&local_100,0x40,false);
        puVar11[1] = (ulong)puVar22;
        uVar17 = puVar11[2];
        puVar11[2] = uVar31;
        puVar11[6] = (puVar11[3] + puVar11[6]) - uVar17;
        puVar11[3] = local_100;
        if (local_100 < uVar31) {
          puVar22 = (undefined4 *)0x0;
          puVar11[2] = 0;
        }
      }
    }
  }
  else {
    puVar11[6] = puVar11[6] + uVar16;
    puVar22 = (undefined4 *)(lVar26 + puVar11[1]);
  }
  uVar17 = 7;
  if (uVar28 < 8) {
    uVar17 = uVar28;
  }
  uVar17 = uVar17 + 8 | (ulong)puVar22;
  puVar3 = puVar22 + lVar2 * 4;
  if (uVar28 != 0) {
    do {
      local_d8 = (undefined1  [16])0x0;
      local_f8[0] = 0xffffffff;
      local_f8[1] = 0xffffffff;
      local_f8[2] = 0xffffffff;
      local_f8[3] = 0xffffffff;
      uVar28 = *(ulong *)(param_2 + 8);
      local_f8[4] = 0xffffffff;
      local_f8[5] = 0xffffffff;
      local_f8[6] = 0xffffffff;
      local_f8[7] = 0xffffffff;
      local_c8 = (undefined1  [16])0x0;
      local_b8 = (undefined1  [16])0x0;
      local_a8 = (undefined1  [16])0x0;
      local_98 = (undefined1  [16])0x0;
      local_88 = (undefined1  [16])0x0;
      local_78 = (undefined1  [16])0x0;
      local_68 = (undefined1  [16])0x0;
      local_58 = (undefined1  [16])0x0;
      if (uVar30 < uVar28) {
        lVar26 = 0;
        lVar2 = *(long *)(*(long *)(*(long *)(this + 8) + 0x68) + 0x1e0);
        puVar23 = (undefined4 *)local_78;
        puVar24 = (undefined4 *)local_a8;
        puVar25 = (undefined4 *)local_d8;
        pPVar27 = param_1 + uVar30 * 0x20;
        do {
          uVar9 = *(uint *)(pPVar27 + 0x1c);
          uVar30 = uVar30 + 1;
          lVar14 = *(long *)(lVar2 + (ulong)*(uint *)(pPVar27 + 0xc) * 8);
          local_f8[lVar26] = *(uint *)(pPVar27 + 0xc);
          puVar21 = (uint *)((ulong)uVar9 * *(long *)(lVar14 + 0x60) + *(long *)(lVar14 + 0x58));
          lVar15 = *(long *)(lVar14 + 0x88);
          lVar14 = *(long *)(lVar14 + 0x90);
          puVar19 = (undefined4 *)((ulong)*puVar21 * lVar14 + lVar15);
          uVar4 = puVar19[2];
          uVar5 = *puVar19;
          uVar9 = puVar21[1];
          uVar10 = puVar21[2];
          puVar25[4] = puVar19[1];
          *puVar25 = uVar5;
          puVar25[8] = uVar4;
          puVar20 = (undefined4 *)((ulong)uVar9 * lVar14 + lVar15);
          puVar19 = (undefined4 *)(lVar15 + (ulong)uVar10 * lVar14);
          uVar4 = puVar20[2];
          uVar5 = puVar19[2];
          uVar6 = puVar19[1];
          uVar7 = *puVar19;
          uVar8 = *puVar20;
          puVar24[4] = puVar20[1];
          uVar9 = *(uint *)(pPVar27 + 0x1c);
          puVar24[8] = uVar4;
          *puVar24 = uVar8;
          local_f8[lVar26 + 4] = uVar9;
          lVar26 = lVar26 + 1;
          *puVar23 = uVar7;
          puVar23[4] = uVar6;
          puVar23[8] = uVar5;
          if (uVar28 <= uVar30) break;
          puVar23 = puVar23 + 1;
          puVar24 = puVar24 + 1;
          puVar25 = puVar25 + 1;
          pPVar27 = pPVar27 + 0x20;
        } while (lVar26 != 4);
      }
      else {
        local_58._0_8_ = 0;
        local_58._8_8_ = 0;
        local_68._0_4_ = 0;
        local_68._4_4_ = 0;
        local_68._8_4_ = 0;
        local_68._12_4_ = 0;
        local_88._0_4_ = 0;
        local_a8._4_4_ = 0;
        local_78._0_4_ = local_68._0_4_;
        local_78._4_4_ = local_68._4_4_;
        local_78._8_4_ = local_68._8_4_;
        local_78._12_4_ = local_68._12_4_;
        local_88._4_4_ = local_68._4_4_;
        local_88._8_4_ = local_68._8_4_;
        local_88._12_4_ = local_68._12_4_;
        local_98._0_4_ = local_88._0_4_;
        local_98._4_4_ = local_68._4_4_;
        local_98._8_4_ = local_68._8_4_;
        local_98._12_4_ = local_68._12_4_;
        local_a8._0_4_ = local_88._0_4_;
        local_a8._8_4_ = local_68._8_4_;
        local_a8._12_4_ = local_68._12_4_;
        local_b8._0_4_ = local_88._0_4_;
        local_b8._4_4_ = local_a8._4_4_;
        local_b8._8_4_ = local_68._8_4_;
        local_b8._12_4_ = local_68._12_4_;
        local_c8._0_4_ = local_88._0_4_;
        local_c8._4_4_ = local_a8._4_4_;
        local_c8._8_4_ = local_68._8_4_;
        local_c8._12_4_ = local_68._12_4_;
        local_d8._0_4_ = local_88._0_4_;
        local_d8._4_4_ = local_a8._4_4_;
        local_d8._8_4_ = local_68._8_4_;
        local_d8._12_4_ = local_68._12_4_;
      }
      *puVar22 = local_d8._0_4_;
      puVar22[1] = local_d8._4_4_;
      puVar22[2] = local_d8._8_4_;
      puVar22[3] = local_d8._12_4_;
      puVar23 = puVar22 + 0x2c;
      puVar22[4] = local_c8._0_4_;
      puVar22[5] = local_c8._4_4_;
      puVar22[6] = local_c8._8_4_;
      puVar22[7] = local_c8._12_4_;
      puVar22[8] = local_b8._0_4_;
      puVar22[9] = local_b8._4_4_;
      puVar22[10] = local_b8._8_4_;
      puVar22[0xb] = local_b8._12_4_;
      puVar22[0xc] = local_a8._0_4_;
      puVar22[0xd] = local_a8._4_4_;
      puVar22[0xe] = local_a8._8_4_;
      puVar22[0xf] = local_a8._12_4_;
      puVar22[0x10] = local_98._0_4_;
      puVar22[0x11] = local_98._4_4_;
      puVar22[0x12] = local_98._8_4_;
      puVar22[0x13] = local_98._12_4_;
      puVar22[0x14] = local_88._0_4_;
      puVar22[0x15] = local_88._4_4_;
      puVar22[0x16] = local_88._8_4_;
      puVar22[0x17] = local_88._12_4_;
      puVar22[0x18] = local_78._0_4_;
      puVar22[0x19] = local_78._4_4_;
      puVar22[0x1a] = local_78._8_4_;
      puVar22[0x1b] = local_78._12_4_;
      puVar22[0x1c] = local_68._0_4_;
      puVar22[0x1d] = local_68._4_4_;
      puVar22[0x1e] = local_68._8_4_;
      puVar22[0x1f] = local_68._12_4_;
      *(undefined8 *)(puVar22 + 0x20) = local_58._0_8_;
      *(undefined8 *)(puVar22 + 0x22) = local_58._8_8_;
      puVar22[0x24] = local_f8[0];
      puVar22[0x25] = local_f8[1];
      puVar22[0x26] = local_f8[2];
      puVar22[0x27] = local_f8[3];
      puVar22[0x28] = local_f8[4];
      puVar22[0x29] = local_f8[5];
      puVar22[0x2a] = local_f8[6];
      puVar22[0x2b] = local_f8[7];
      puVar22 = puVar23;
    } while (puVar3 != puVar23);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar17;
}



/* embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> > >::createLeaf(embree::PrimRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&) */

ulong __thiscall
embree::sse2::BVHNBuilderVirtual<4>::
BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>::createLeaf
          (BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>> *this,
          PrimRef *param_1,range *param_2,CachedAllocator *param_3)

{
  long *plVar1;
  long lVar2;
  float *pfVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  uint uVar9;
  uint uVar10;
  ulong *puVar11;
  FastAllocator *this_00;
  ulong *puVar12;
  ulong uVar13;
  long lVar14;
  long lVar15;
  ulong uVar16;
  ulong uVar17;
  undefined8 uVar18;
  undefined4 *puVar19;
  undefined4 *puVar20;
  float *pfVar21;
  uint *puVar22;
  float *pfVar23;
  undefined4 *puVar24;
  undefined4 *puVar25;
  undefined4 *puVar26;
  long lVar27;
  PrimRef *pPVar28;
  ulong uVar29;
  ulong uVar30;
  ulong uVar31;
  ulong uVar32;
  long in_FS_OFFSET;
  float fVar33;
  float fVar34;
  float fVar35;
  float fVar36;
  float fVar37;
  float fVar38;
  float fVar39;
  float fVar40;
  float fVar41;
  float fVar42;
  float fVar43;
  float fVar44;
  float fVar45;
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  float fVar56;
  ulong local_108;
  ulong local_100;
  float local_f8 [8];
  undefined1 local_d8 [8];
  float fStack_d0;
  float fStack_cc;
  undefined1 local_c8 [8];
  float fStack_c0;
  float fStack_bc;
  undefined1 local_b8 [8];
  float fStack_b0;
  float fStack_ac;
  undefined1 local_a8 [8];
  float fStack_a0;
  float fStack_9c;
  undefined1 local_98 [8];
  float fStack_90;
  float fStack_8c;
  undefined1 local_88 [8];
  float fStack_80;
  float fStack_7c;
  undefined1 local_78 [8];
  float fStack_70;
  float fStack_6c;
  undefined1 local_68 [8];
  float fStack_60;
  float fStack_5c;
  undefined1 local_58 [8];
  float fStack_50;
  float fStack_4c;
  long local_40;
  
  uVar31 = *(ulong *)param_2;
  puVar11 = *(ulong **)(param_3 + 0x10);
  uVar17 = *puVar11;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar29 = (*(long *)(param_2 + 8) + 3) - uVar31;
  uVar30 = uVar29 & 0xfffffffffffffffc;
  uVar29 = uVar29 >> 2;
  this_00 = *(FastAllocator **)param_3;
  lVar2 = uVar30 * 2 + uVar29 * 3;
  uVar32 = lVar2 * 0x10;
  local_108 = uVar32;
  if (this_00 != *(FastAllocator **)(uVar17 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar17 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar17 + 0xa8) + *(long *)(uVar17 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar17 + 0x98) + *(long *)(uVar17 + 0x58)) -
                           *(long *)(uVar17 + 0x50)) - *(long *)(uVar17 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar17 + 0xb0) + *(long *)(uVar17 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar17 + 0x48) = 0;
    *(undefined8 *)(uVar17 + 0x58) = 0;
    *(undefined8 *)(uVar17 + 0x50) = 0;
    *(undefined8 *)(uVar17 + 0x68) = 0;
    *(undefined8 *)(uVar17 + 0x70) = 0;
    *(undefined8 *)(uVar17 + 0x60) = 0;
    if (this_00 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar17 + 0x88) = 0;
      uVar18 = 0;
      *(undefined8 *)(uVar17 + 0x98) = 0;
      *(undefined8 *)(uVar17 + 0x90) = 0;
      *(undefined8 *)(uVar17 + 0xa8) = 0;
      *(undefined8 *)(uVar17 + 0xb0) = 0;
    }
    else {
      uVar18 = *(undefined8 *)(this_00 + 0x10);
      *(undefined8 *)(uVar17 + 0x88) = 0;
      *(undefined8 *)(uVar17 + 0x98) = 0;
      *(undefined8 *)(uVar17 + 0x60) = uVar18;
      *(undefined8 *)(uVar17 + 0x90) = 0;
      *(undefined8 *)(uVar17 + 0xa8) = 0;
      *(undefined8 *)(uVar17 + 0xb0) = 0;
      *(undefined8 *)(uVar17 + 0xa0) = 0;
      uVar18 = *(undefined8 *)(this_00 + 0x10);
    }
    *(undefined8 *)(uVar17 + 0xa0) = uVar18;
    LOCK();
    *(FastAllocator **)(uVar17 + 8) = this_00;
    UNLOCK();
    local_100 = uVar17;
    embree::MutexSys::lock();
    puVar12 = *(ulong **)(this_00 + 0x138);
    if (puVar12 == *(ulong **)(this_00 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(this_00 + 0x130),puVar12,&local_100);
    }
    else {
      *puVar12 = uVar17;
      *(long *)(this_00 + 0x138) = *(long *)(this_00 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar13 = puVar11[2];
  puVar11[5] = puVar11[5] + uVar32;
  uVar16 = (ulong)(-(int)uVar13 & 0xf);
  lVar27 = uVar13 + uVar16;
  uVar17 = uVar32 + lVar27;
  puVar11[2] = uVar17;
  if (puVar11[3] < uVar17) {
    puVar11[2] = uVar13;
    if (puVar11[4] < (uVar30 * 2 + uVar29 * 3) * 0x40) {
      pfVar23 = (float *)FastAllocator::malloc(this_00,&local_108,0x40,false);
    }
    else {
      local_100 = puVar11[4];
      pfVar23 = (float *)FastAllocator::malloc(this_00,&local_100,0x40,true);
      puVar11[1] = (ulong)pfVar23;
      uVar17 = puVar11[2];
      puVar11[2] = uVar32;
      puVar11[6] = (puVar11[3] + puVar11[6]) - uVar17;
      puVar11[3] = local_100;
      if (local_100 < uVar32) {
        puVar11[2] = 0;
        local_100 = puVar11[4];
        pfVar23 = (float *)FastAllocator::malloc(this_00,&local_100,0x40,false);
        puVar11[1] = (ulong)pfVar23;
        uVar17 = puVar11[2];
        puVar11[2] = uVar32;
        puVar11[6] = (puVar11[3] + puVar11[6]) - uVar17;
        puVar11[3] = local_100;
        if (local_100 < uVar32) {
          pfVar23 = (float *)0x0;
          puVar11[2] = 0;
        }
      }
    }
  }
  else {
    puVar11[6] = puVar11[6] + uVar16;
    pfVar23 = (float *)(lVar27 + puVar11[1]);
  }
  uVar17 = 7;
  if (uVar29 < 8) {
    uVar17 = uVar29;
  }
  uVar17 = uVar17 + 8 | (ulong)pfVar23;
  pfVar3 = pfVar23 + lVar2 * 4;
  if (uVar29 != 0) {
    do {
      _local_d8 = (undefined1  [16])0x0;
      local_f8[0] = -NAN;
      local_f8[1] = -NAN;
      local_f8[2] = -NAN;
      local_f8[3] = -NAN;
      uVar29 = *(ulong *)(param_2 + 8);
      local_f8[4] = -NAN;
      local_f8[5] = -NAN;
      local_f8[6] = -NAN;
      local_f8[7] = -NAN;
      _local_c8 = (undefined1  [16])0x0;
      _local_b8 = (undefined1  [16])0x0;
      _local_a8 = (undefined1  [16])0x0;
      _local_98 = (undefined1  [16])0x0;
      _local_88 = (undefined1  [16])0x0;
      _local_78 = (undefined1  [16])0x0;
      _local_68 = (undefined1  [16])0x0;
      _local_58 = (undefined1  [16])0x0;
      if (uVar31 < uVar29) {
        lVar27 = 0;
        lVar2 = *(long *)(*(long *)(*(long *)(this + 8) + 0x68) + 0x1e0);
        puVar24 = (undefined4 *)local_78;
        puVar25 = (undefined4 *)local_a8;
        puVar26 = (undefined4 *)local_d8;
        pPVar28 = param_1 + uVar31 * 0x20;
        do {
          uVar9 = *(uint *)(pPVar28 + 0x1c);
          uVar31 = uVar31 + 1;
          lVar14 = *(long *)(lVar2 + (ulong)(uint)*(float *)(pPVar28 + 0xc) * 8);
          local_f8[lVar27] = *(float *)(pPVar28 + 0xc);
          puVar22 = (uint *)((ulong)uVar9 * *(long *)(lVar14 + 0x60) + *(long *)(lVar14 + 0x58));
          lVar15 = *(long *)(lVar14 + 0x88);
          lVar14 = *(long *)(lVar14 + 0x90);
          puVar19 = (undefined4 *)((ulong)*puVar22 * lVar14 + lVar15);
          uVar4 = puVar19[2];
          uVar5 = *puVar19;
          uVar9 = puVar22[1];
          uVar10 = puVar22[2];
          puVar26[4] = puVar19[1];
          *puVar26 = uVar5;
          puVar26[8] = uVar4;
          puVar20 = (undefined4 *)((ulong)uVar9 * lVar14 + lVar15);
          puVar19 = (undefined4 *)(lVar15 + (ulong)uVar10 * lVar14);
          uVar4 = puVar20[2];
          uVar5 = puVar19[2];
          uVar6 = puVar19[1];
          uVar7 = *puVar19;
          uVar8 = *puVar20;
          puVar25[4] = puVar20[1];
          fVar37 = *(float *)(pPVar28 + 0x1c);
          puVar25[8] = uVar4;
          *puVar25 = uVar8;
          local_f8[lVar27 + 4] = fVar37;
          lVar27 = lVar27 + 1;
          *puVar24 = uVar7;
          puVar24[4] = uVar6;
          puVar24[8] = uVar5;
          if (uVar29 <= uVar31) break;
          puVar24 = puVar24 + 1;
          puVar25 = puVar25 + 1;
          puVar26 = puVar26 + 1;
          pPVar28 = pPVar28 + 0x20;
        } while (lVar27 != 4);
        fVar33 = (float)local_58._0_4_ - (float)local_b8._0_4_;
        fVar34 = (float)local_58._4_4_ - (float)local_b8._4_4_;
        fVar35 = fStack_50 - fStack_b0;
        fVar36 = fStack_4c - fStack_ac;
        fVar41 = (float)local_78._0_4_ - (float)local_d8._0_4_;
        fVar42 = (float)local_78._4_4_ - (float)local_d8._4_4_;
        fVar43 = fStack_70 - fStack_d0;
        fVar44 = fStack_6c - fStack_cc;
        fVar37 = (float)local_68._0_4_ - (float)local_c8._0_4_;
        fVar38 = (float)local_68._4_4_ - (float)local_c8._4_4_;
        fVar39 = fStack_60 - fStack_c0;
        fVar40 = fStack_5c - fStack_bc;
        fVar45 = (float)local_b8._0_4_ - (float)local_88._0_4_;
        fVar46 = (float)local_b8._4_4_ - (float)local_88._4_4_;
        fVar47 = fStack_b0 - fStack_80;
        fVar48 = fStack_ac - fStack_7c;
        fVar49 = (float)local_c8._0_4_ - (float)local_98._0_4_;
        fVar50 = (float)local_c8._4_4_ - (float)local_98._4_4_;
        fVar51 = fStack_c0 - fStack_90;
        fVar52 = fStack_bc - fStack_8c;
        fVar53 = (float)local_d8._0_4_ - (float)local_a8._0_4_;
        fVar54 = (float)local_d8._4_4_ - (float)local_a8._4_4_;
        fVar55 = fStack_d0 - fStack_a0;
        fVar56 = fStack_cc - fStack_9c;
      }
      else {
        fVar41 = 0.0;
        fVar42 = 0.0;
        fVar43 = 0.0;
        fVar44 = 0.0;
        fVar33 = 0.0;
        fVar34 = 0.0;
        fVar35 = 0.0;
        fVar36 = 0.0;
        local_b8._0_4_ = 0.0;
        local_b8._4_4_ = 0.0;
        fVar37 = fVar33;
        fVar38 = fVar34;
        fVar39 = fVar35;
        fVar40 = fVar36;
        fStack_b0 = fVar35;
        fStack_ac = fVar36;
        local_c8._0_4_ = local_b8._0_4_;
        local_c8._4_4_ = local_b8._4_4_;
        fStack_c0 = fVar35;
        fStack_bc = fVar36;
        local_d8._0_4_ = local_b8._0_4_;
        local_d8._4_4_ = local_b8._4_4_;
        fStack_d0 = fVar35;
        fStack_cc = fVar36;
        fVar45 = (float)local_b8._0_4_;
        fVar46 = (float)local_b8._4_4_;
        fVar47 = fVar35;
        fVar48 = fVar36;
        fVar49 = (float)local_b8._0_4_;
        fVar50 = fVar34;
        fVar51 = fVar35;
        fVar52 = fVar36;
        fVar53 = (float)local_b8._0_4_;
        fVar54 = fVar34;
        fVar55 = fVar35;
        fVar56 = fVar36;
      }
      *pfVar23 = (float)local_d8._0_4_;
      pfVar23[1] = (float)local_d8._4_4_;
      pfVar23[2] = fStack_d0;
      pfVar23[3] = fStack_cc;
      pfVar21 = pfVar23 + 0x2c;
      pfVar23[4] = (float)local_c8._0_4_;
      pfVar23[5] = (float)local_c8._4_4_;
      pfVar23[6] = fStack_c0;
      pfVar23[7] = fStack_bc;
      pfVar23[8] = (float)local_b8._0_4_;
      pfVar23[9] = (float)local_b8._4_4_;
      pfVar23[10] = fStack_b0;
      pfVar23[0xb] = fStack_ac;
      pfVar23[0xc] = fVar53;
      pfVar23[0xd] = fVar54;
      pfVar23[0xe] = fVar55;
      pfVar23[0xf] = fVar56;
      pfVar23[0x10] = fVar49;
      pfVar23[0x11] = fVar50;
      pfVar23[0x12] = fVar51;
      pfVar23[0x13] = fVar52;
      pfVar23[0x14] = fVar45;
      pfVar23[0x15] = fVar46;
      pfVar23[0x16] = fVar47;
      pfVar23[0x17] = fVar48;
      pfVar23[0x18] = fVar41;
      pfVar23[0x19] = fVar42;
      pfVar23[0x1a] = fVar43;
      pfVar23[0x1b] = fVar44;
      pfVar23[0x1c] = fVar37;
      pfVar23[0x1d] = fVar38;
      pfVar23[0x1e] = fVar39;
      pfVar23[0x1f] = fVar40;
      pfVar23[0x20] = fVar33;
      pfVar23[0x21] = fVar34;
      pfVar23[0x22] = fVar35;
      pfVar23[0x23] = fVar36;
      pfVar23[0x24] = local_f8[0];
      pfVar23[0x25] = local_f8[1];
      pfVar23[0x26] = local_f8[2];
      pfVar23[0x27] = local_f8[3];
      pfVar23[0x28] = local_f8[4];
      pfVar23[0x29] = local_f8[5];
      pfVar23[0x2a] = local_f8[6];
      pfVar23[0x2b] = local_f8[7];
      pfVar23 = pfVar21;
    } while (pfVar3 != pfVar21);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar17;
}



/* embree::NodeRefPtr<4>
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> >
   >::TEMPNAMEPLACEHOLDERVALUE(embree::PrimRef*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator) const [clone .isra.0] */

ulong embree::sse2::BVHBuilderBinnedFastSpatialSAH::
      CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>
      ::operator()(long *param_1,long param_2,ulong *param_3,FastAllocator *param_4,ulong *param_5)

{
  long *plVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  uint uVar8;
  uint uVar9;
  ulong *puVar10;
  ulong uVar11;
  long lVar12;
  long lVar13;
  long lVar14;
  ulong uVar15;
  ulong uVar16;
  ulong uVar17;
  ulong uVar18;
  undefined4 *puVar19;
  undefined4 *puVar20;
  uint *puVar21;
  undefined8 uVar22;
  ulong uVar23;
  undefined4 *puVar24;
  undefined4 *puVar25;
  undefined4 *puVar26;
  undefined4 *puVar27;
  long lVar28;
  long lVar29;
  ulong uVar30;
  long in_FS_OFFSET;
  ulong local_108;
  ulong local_100;
  uint local_f8 [8];
  undefined1 local_d8 [16];
  undefined1 local_c8 [16];
  undefined1 local_b8 [16];
  undefined1 local_a8 [16];
  undefined1 local_98 [16];
  undefined1 local_88 [16];
  undefined1 local_78 [16];
  undefined1 local_68 [16];
  undefined1 local_58 [16];
  long local_40;
  
  uVar23 = *param_3;
  uVar18 = param_3[1];
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar23 < uVar18) {
    lVar14 = uVar23 * 0x20 + param_2;
    do {
      *(uint *)(lVar14 + 0xc) = *(uint *)(lVar14 + 0xc) & 0x7ffffff;
      uVar18 = param_3[1];
      uVar23 = uVar23 + 1;
      lVar14 = lVar14 + 0x20;
    } while (uVar23 < uVar18);
    uVar23 = *param_3;
  }
  uVar15 = (uVar18 + 3) - uVar23;
  uVar16 = uVar15 & 0xfffffffffffffffc;
  uVar15 = uVar15 >> 2;
  lVar14 = uVar16 * 2 + uVar15 * 3;
  uVar18 = *param_5;
  uVar30 = lVar14 * 0x10;
  local_108 = uVar30;
  if (param_4 != *(FastAllocator **)(uVar18 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar18 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar18 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar18 + 0xa8) + *(long *)(uVar18 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar18 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar18 + 0x98) + *(long *)(uVar18 + 0x58)) -
                           *(long *)(uVar18 + 0x50)) - *(long *)(uVar18 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar18 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar18 + 0xb0) + *(long *)(uVar18 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar18 + 0x48) = 0;
    *(undefined8 *)(uVar18 + 0x58) = 0;
    *(undefined8 *)(uVar18 + 0x50) = 0;
    *(undefined8 *)(uVar18 + 0x68) = 0;
    *(undefined8 *)(uVar18 + 0x70) = 0;
    *(undefined8 *)(uVar18 + 0x60) = 0;
    if (param_4 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar18 + 0x88) = 0;
      uVar22 = 0;
      *(undefined8 *)(uVar18 + 0x98) = 0;
      *(undefined8 *)(uVar18 + 0x90) = 0;
      *(undefined8 *)(uVar18 + 0xa8) = 0;
      *(undefined8 *)(uVar18 + 0xb0) = 0;
    }
    else {
      uVar22 = *(undefined8 *)(param_4 + 0x10);
      *(undefined8 *)(uVar18 + 0x88) = 0;
      *(undefined8 *)(uVar18 + 0x98) = 0;
      *(undefined8 *)(uVar18 + 0x60) = uVar22;
      *(undefined8 *)(uVar18 + 0x90) = 0;
      *(undefined8 *)(uVar18 + 0xa8) = 0;
      *(undefined8 *)(uVar18 + 0xb0) = 0;
      *(undefined8 *)(uVar18 + 0xa0) = 0;
      uVar22 = *(undefined8 *)(param_4 + 0x10);
    }
    *(undefined8 *)(uVar18 + 0xa0) = uVar22;
    LOCK();
    *(FastAllocator **)(uVar18 + 8) = param_4;
    UNLOCK();
    local_100 = uVar18;
    embree::MutexSys::lock();
    puVar10 = *(ulong **)(param_4 + 0x138);
    if (puVar10 == *(ulong **)(param_4 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(param_4 + 0x130),puVar10,&local_100,
                 &FastAllocator::s_thread_local_allocators_lock);
    }
    else {
      *puVar10 = uVar18;
      *(long *)(param_4 + 0x138) = *(long *)(param_4 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar11 = param_5[2];
  param_5[5] = param_5[5] + uVar30;
  uVar17 = (ulong)(-(int)uVar11 & 0xf);
  lVar29 = uVar11 + uVar17;
  uVar18 = uVar30 + lVar29;
  param_5[2] = uVar18;
  if (param_5[3] < uVar18) {
    param_5[2] = uVar11;
    if (param_5[4] < (uVar16 * 2 + uVar15 * 3) * 0x40) {
      puVar24 = (undefined4 *)FastAllocator::malloc(param_4,&local_108,0x40,false);
    }
    else {
      local_100 = param_5[4];
      puVar24 = (undefined4 *)FastAllocator::malloc(param_4,&local_100,0x40,true);
      param_5[1] = (ulong)puVar24;
      uVar18 = param_5[2];
      param_5[2] = uVar30;
      param_5[6] = (param_5[3] + param_5[6]) - uVar18;
      param_5[3] = local_100;
      if (local_100 < uVar30) {
        param_5[2] = 0;
        local_100 = param_5[4];
        puVar24 = (undefined4 *)FastAllocator::malloc(param_4,&local_100,0x40,false);
        param_5[1] = (ulong)puVar24;
        uVar18 = param_5[2];
        param_5[2] = uVar30;
        param_5[6] = (param_5[3] + param_5[6]) - uVar18;
        param_5[3] = local_100;
        if (local_100 < uVar30) {
          puVar24 = (undefined4 *)0x0;
          param_5[2] = 0;
        }
      }
    }
  }
  else {
    param_5[6] = param_5[6] + uVar17;
    puVar24 = (undefined4 *)(lVar29 + param_5[1]);
  }
  uVar18 = 7;
  if (uVar15 < 8) {
    uVar18 = uVar15;
  }
  uVar18 = uVar18 + 8 | (ulong)puVar24;
  puVar2 = puVar24 + lVar14 * 4;
  if (uVar15 != 0) {
    do {
      local_d8 = (undefined1  [16])0x0;
      local_f8[0] = 0xffffffff;
      local_f8[1] = 0xffffffff;
      local_f8[2] = 0xffffffff;
      local_f8[3] = 0xffffffff;
      uVar15 = param_3[1];
      local_f8[4] = 0xffffffff;
      local_f8[5] = 0xffffffff;
      local_f8[6] = 0xffffffff;
      local_f8[7] = 0xffffffff;
      local_c8 = (undefined1  [16])0x0;
      local_b8 = (undefined1  [16])0x0;
      local_a8 = (undefined1  [16])0x0;
      local_98 = (undefined1  [16])0x0;
      local_88 = (undefined1  [16])0x0;
      local_78 = (undefined1  [16])0x0;
      local_68 = (undefined1  [16])0x0;
      local_58 = (undefined1  [16])0x0;
      if (uVar23 < uVar15) {
        lVar28 = 0;
        lVar14 = *(long *)(*(long *)(*param_1 + 0x68) + 0x1e0);
        puVar25 = (undefined4 *)local_78;
        puVar26 = (undefined4 *)local_a8;
        puVar27 = (undefined4 *)local_d8;
        lVar29 = uVar23 * 0x20 + param_2;
        do {
          uVar8 = *(uint *)(lVar29 + 0x1c);
          uVar23 = uVar23 + 1;
          lVar12 = *(long *)(lVar14 + (ulong)*(uint *)(lVar29 + 0xc) * 8);
          local_f8[lVar28] = *(uint *)(lVar29 + 0xc);
          puVar21 = (uint *)((ulong)uVar8 * *(long *)(lVar12 + 0x60) + *(long *)(lVar12 + 0x58));
          lVar13 = *(long *)(lVar12 + 0x88);
          lVar12 = *(long *)(lVar12 + 0x90);
          puVar19 = (undefined4 *)((ulong)*puVar21 * lVar12 + lVar13);
          uVar3 = puVar19[2];
          uVar4 = *puVar19;
          uVar8 = puVar21[1];
          uVar9 = puVar21[2];
          puVar27[4] = puVar19[1];
          *puVar27 = uVar4;
          puVar27[8] = uVar3;
          puVar20 = (undefined4 *)((ulong)uVar8 * lVar12 + lVar13);
          puVar19 = (undefined4 *)(lVar13 + (ulong)uVar9 * lVar12);
          uVar3 = puVar20[2];
          uVar4 = puVar19[2];
          uVar5 = puVar19[1];
          uVar6 = *puVar19;
          uVar7 = *puVar20;
          puVar26[4] = puVar20[1];
          uVar8 = *(uint *)(lVar29 + 0x1c);
          puVar26[8] = uVar3;
          *puVar26 = uVar7;
          local_f8[lVar28 + 4] = uVar8;
          lVar28 = lVar28 + 1;
          *puVar25 = uVar6;
          puVar25[4] = uVar5;
          puVar25[8] = uVar4;
          if (uVar15 <= uVar23) break;
          puVar25 = puVar25 + 1;
          puVar26 = puVar26 + 1;
          puVar27 = puVar27 + 1;
          lVar29 = lVar29 + 0x20;
        } while (lVar28 != 4);
      }
      else {
        local_58._0_8_ = 0;
        local_58._8_8_ = 0;
        local_68._0_4_ = 0;
        local_68._4_4_ = 0;
        local_68._8_4_ = 0;
        local_68._12_4_ = 0;
        local_88._0_4_ = 0;
        local_a8._4_4_ = 0;
        local_78._0_4_ = local_68._0_4_;
        local_78._4_4_ = local_68._4_4_;
        local_78._8_4_ = local_68._8_4_;
        local_78._12_4_ = local_68._12_4_;
        local_88._4_4_ = local_68._4_4_;
        local_88._8_4_ = local_68._8_4_;
        local_88._12_4_ = local_68._12_4_;
        local_98._0_4_ = local_88._0_4_;
        local_98._4_4_ = local_68._4_4_;
        local_98._8_4_ = local_68._8_4_;
        local_98._12_4_ = local_68._12_4_;
        local_a8._0_4_ = local_88._0_4_;
        local_a8._8_4_ = local_68._8_4_;
        local_a8._12_4_ = local_68._12_4_;
        local_b8._0_4_ = local_88._0_4_;
        local_b8._4_4_ = local_a8._4_4_;
        local_b8._8_4_ = local_68._8_4_;
        local_b8._12_4_ = local_68._12_4_;
        local_c8._0_4_ = local_88._0_4_;
        local_c8._4_4_ = local_a8._4_4_;
        local_c8._8_4_ = local_68._8_4_;
        local_c8._12_4_ = local_68._12_4_;
        local_d8._0_4_ = local_88._0_4_;
        local_d8._4_4_ = local_a8._4_4_;
        local_d8._8_4_ = local_68._8_4_;
        local_d8._12_4_ = local_68._12_4_;
      }
      *puVar24 = local_d8._0_4_;
      puVar24[1] = local_d8._4_4_;
      puVar24[2] = local_d8._8_4_;
      puVar24[3] = local_d8._12_4_;
      puVar25 = puVar24 + 0x2c;
      puVar24[4] = local_c8._0_4_;
      puVar24[5] = local_c8._4_4_;
      puVar24[6] = local_c8._8_4_;
      puVar24[7] = local_c8._12_4_;
      puVar24[8] = local_b8._0_4_;
      puVar24[9] = local_b8._4_4_;
      puVar24[10] = local_b8._8_4_;
      puVar24[0xb] = local_b8._12_4_;
      puVar24[0xc] = local_a8._0_4_;
      puVar24[0xd] = local_a8._4_4_;
      puVar24[0xe] = local_a8._8_4_;
      puVar24[0xf] = local_a8._12_4_;
      puVar24[0x10] = local_98._0_4_;
      puVar24[0x11] = local_98._4_4_;
      puVar24[0x12] = local_98._8_4_;
      puVar24[0x13] = local_98._12_4_;
      puVar24[0x14] = local_88._0_4_;
      puVar24[0x15] = local_88._4_4_;
      puVar24[0x16] = local_88._8_4_;
      puVar24[0x17] = local_88._12_4_;
      puVar24[0x18] = local_78._0_4_;
      puVar24[0x19] = local_78._4_4_;
      puVar24[0x1a] = local_78._8_4_;
      puVar24[0x1b] = local_78._12_4_;
      puVar24[0x1c] = local_68._0_4_;
      puVar24[0x1d] = local_68._4_4_;
      puVar24[0x1e] = local_68._8_4_;
      puVar24[0x1f] = local_68._12_4_;
      *(undefined8 *)(puVar24 + 0x20) = local_58._0_8_;
      *(undefined8 *)(puVar24 + 0x22) = local_58._8_8_;
      puVar24[0x24] = local_f8[0];
      puVar24[0x25] = local_f8[1];
      puVar24[0x26] = local_f8[2];
      puVar24[0x27] = local_f8[3];
      puVar24[0x28] = local_f8[4];
      puVar24[0x29] = local_f8[5];
      puVar24[0x2a] = local_f8[6];
      puVar24[0x2b] = local_f8[7];
      puVar24 = puVar25;
    } while (puVar2 != puVar25);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar18;
}



/* embree::NodeRefPtr<4>
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> >
   >::TEMPNAMEPLACEHOLDERVALUE(embree::PrimRef*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator) const [clone .isra.0] */

ulong embree::sse2::BVHBuilderBinnedFastSpatialSAH::
      CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>::
      operator()(long *param_1,long param_2,ulong *param_3,FastAllocator *param_4,ulong *param_5)

{
  long *plVar1;
  float *pfVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  uint uVar8;
  uint uVar9;
  ulong *puVar10;
  ulong uVar11;
  long lVar12;
  long lVar13;
  long lVar14;
  ulong uVar15;
  ulong uVar16;
  ulong uVar17;
  ulong uVar18;
  undefined4 *puVar19;
  undefined4 *puVar20;
  float *pfVar21;
  uint *puVar22;
  undefined8 uVar23;
  ulong uVar24;
  float *pfVar25;
  undefined4 *puVar26;
  undefined4 *puVar27;
  undefined4 *puVar28;
  long lVar29;
  long lVar30;
  ulong uVar31;
  long in_FS_OFFSET;
  float fVar32;
  float fVar33;
  float fVar34;
  float fVar35;
  float fVar36;
  float fVar37;
  float fVar38;
  float fVar39;
  float fVar40;
  float fVar41;
  float fVar42;
  float fVar43;
  float fVar44;
  float fVar45;
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  ulong local_108;
  ulong local_100;
  float local_f8 [8];
  undefined1 local_d8 [8];
  float fStack_d0;
  float fStack_cc;
  undefined1 local_c8 [8];
  float fStack_c0;
  float fStack_bc;
  undefined1 local_b8 [8];
  float fStack_b0;
  float fStack_ac;
  undefined1 local_a8 [8];
  float fStack_a0;
  float fStack_9c;
  undefined1 local_98 [8];
  float fStack_90;
  float fStack_8c;
  undefined1 local_88 [8];
  float fStack_80;
  float fStack_7c;
  undefined1 local_78 [8];
  float fStack_70;
  float fStack_6c;
  undefined1 local_68 [8];
  float fStack_60;
  float fStack_5c;
  undefined1 local_58 [8];
  float fStack_50;
  float fStack_4c;
  long local_40;
  
  uVar24 = *param_3;
  uVar18 = param_3[1];
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar24 < uVar18) {
    lVar14 = uVar24 * 0x20 + param_2;
    do {
      *(uint *)(lVar14 + 0xc) = *(uint *)(lVar14 + 0xc) & 0x7ffffff;
      uVar18 = param_3[1];
      uVar24 = uVar24 + 1;
      lVar14 = lVar14 + 0x20;
    } while (uVar24 < uVar18);
    uVar24 = *param_3;
  }
  uVar15 = (uVar18 + 3) - uVar24;
  uVar16 = uVar15 & 0xfffffffffffffffc;
  uVar15 = uVar15 >> 2;
  lVar14 = uVar16 * 2 + uVar15 * 3;
  uVar18 = *param_5;
  uVar31 = lVar14 * 0x10;
  local_108 = uVar31;
  if (param_4 != *(FastAllocator **)(uVar18 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar18 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar18 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar18 + 0xa8) + *(long *)(uVar18 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar18 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar18 + 0x98) + *(long *)(uVar18 + 0x58)) -
                           *(long *)(uVar18 + 0x50)) - *(long *)(uVar18 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar18 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar18 + 0xb0) + *(long *)(uVar18 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar18 + 0x48) = 0;
    *(undefined8 *)(uVar18 + 0x58) = 0;
    *(undefined8 *)(uVar18 + 0x50) = 0;
    *(undefined8 *)(uVar18 + 0x68) = 0;
    *(undefined8 *)(uVar18 + 0x70) = 0;
    *(undefined8 *)(uVar18 + 0x60) = 0;
    if (param_4 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar18 + 0x88) = 0;
      uVar23 = 0;
      *(undefined8 *)(uVar18 + 0x98) = 0;
      *(undefined8 *)(uVar18 + 0x90) = 0;
      *(undefined8 *)(uVar18 + 0xa8) = 0;
      *(undefined8 *)(uVar18 + 0xb0) = 0;
    }
    else {
      uVar23 = *(undefined8 *)(param_4 + 0x10);
      *(undefined8 *)(uVar18 + 0x88) = 0;
      *(undefined8 *)(uVar18 + 0x98) = 0;
      *(undefined8 *)(uVar18 + 0x60) = uVar23;
      *(undefined8 *)(uVar18 + 0x90) = 0;
      *(undefined8 *)(uVar18 + 0xa8) = 0;
      *(undefined8 *)(uVar18 + 0xb0) = 0;
      *(undefined8 *)(uVar18 + 0xa0) = 0;
      uVar23 = *(undefined8 *)(param_4 + 0x10);
    }
    *(undefined8 *)(uVar18 + 0xa0) = uVar23;
    LOCK();
    *(FastAllocator **)(uVar18 + 8) = param_4;
    UNLOCK();
    local_100 = uVar18;
    embree::MutexSys::lock();
    puVar10 = *(ulong **)(param_4 + 0x138);
    if (puVar10 == *(ulong **)(param_4 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(param_4 + 0x130),puVar10,&local_100,
                 &FastAllocator::s_thread_local_allocators_lock);
    }
    else {
      *puVar10 = uVar18;
      *(long *)(param_4 + 0x138) = *(long *)(param_4 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar11 = param_5[2];
  param_5[5] = param_5[5] + uVar31;
  uVar17 = (ulong)(-(int)uVar11 & 0xf);
  lVar30 = uVar11 + uVar17;
  uVar18 = uVar31 + lVar30;
  param_5[2] = uVar18;
  if (param_5[3] < uVar18) {
    param_5[2] = uVar11;
    if (param_5[4] < (uVar16 * 2 + uVar15 * 3) * 0x40) {
      pfVar25 = (float *)FastAllocator::malloc(param_4,&local_108,0x40,false);
    }
    else {
      local_100 = param_5[4];
      pfVar25 = (float *)FastAllocator::malloc(param_4,&local_100,0x40,true);
      param_5[1] = (ulong)pfVar25;
      uVar18 = param_5[2];
      param_5[2] = uVar31;
      param_5[6] = (param_5[3] + param_5[6]) - uVar18;
      param_5[3] = local_100;
      if (local_100 < uVar31) {
        param_5[2] = 0;
        local_100 = param_5[4];
        pfVar25 = (float *)FastAllocator::malloc(param_4,&local_100,0x40,false);
        param_5[1] = (ulong)pfVar25;
        uVar18 = param_5[2];
        param_5[2] = uVar31;
        param_5[6] = (param_5[3] + param_5[6]) - uVar18;
        param_5[3] = local_100;
        if (local_100 < uVar31) {
          pfVar25 = (float *)0x0;
          param_5[2] = 0;
        }
      }
    }
  }
  else {
    param_5[6] = param_5[6] + uVar17;
    pfVar25 = (float *)(lVar30 + param_5[1]);
  }
  uVar18 = 7;
  if (uVar15 < 8) {
    uVar18 = uVar15;
  }
  uVar18 = uVar18 + 8 | (ulong)pfVar25;
  pfVar2 = pfVar25 + lVar14 * 4;
  if (uVar15 != 0) {
    do {
      _local_d8 = (undefined1  [16])0x0;
      local_f8[0] = -NAN;
      local_f8[1] = -NAN;
      local_f8[2] = -NAN;
      local_f8[3] = -NAN;
      uVar15 = param_3[1];
      local_f8[4] = -NAN;
      local_f8[5] = -NAN;
      local_f8[6] = -NAN;
      local_f8[7] = -NAN;
      _local_c8 = (undefined1  [16])0x0;
      _local_b8 = (undefined1  [16])0x0;
      _local_a8 = (undefined1  [16])0x0;
      _local_98 = (undefined1  [16])0x0;
      _local_88 = (undefined1  [16])0x0;
      _local_78 = (undefined1  [16])0x0;
      _local_68 = (undefined1  [16])0x0;
      _local_58 = (undefined1  [16])0x0;
      if (uVar24 < uVar15) {
        lVar29 = 0;
        lVar14 = *(long *)(*(long *)(*param_1 + 0x68) + 0x1e0);
        puVar26 = (undefined4 *)local_78;
        puVar27 = (undefined4 *)local_a8;
        puVar28 = (undefined4 *)local_d8;
        lVar30 = uVar24 * 0x20 + param_2;
        do {
          uVar8 = *(uint *)(lVar30 + 0x1c);
          uVar24 = uVar24 + 1;
          lVar12 = *(long *)(lVar14 + (ulong)(uint)*(float *)(lVar30 + 0xc) * 8);
          local_f8[lVar29] = *(float *)(lVar30 + 0xc);
          puVar22 = (uint *)((ulong)uVar8 * *(long *)(lVar12 + 0x60) + *(long *)(lVar12 + 0x58));
          lVar13 = *(long *)(lVar12 + 0x88);
          lVar12 = *(long *)(lVar12 + 0x90);
          puVar19 = (undefined4 *)((ulong)*puVar22 * lVar12 + lVar13);
          uVar3 = puVar19[2];
          uVar4 = *puVar19;
          uVar8 = puVar22[1];
          uVar9 = puVar22[2];
          puVar28[4] = puVar19[1];
          *puVar28 = uVar4;
          puVar28[8] = uVar3;
          puVar20 = (undefined4 *)((ulong)uVar8 * lVar12 + lVar13);
          puVar19 = (undefined4 *)(lVar13 + (ulong)uVar9 * lVar12);
          uVar3 = puVar20[2];
          uVar4 = puVar19[2];
          uVar5 = puVar19[1];
          uVar6 = *puVar19;
          uVar7 = *puVar20;
          puVar27[4] = puVar20[1];
          fVar36 = *(float *)(lVar30 + 0x1c);
          puVar27[8] = uVar3;
          *puVar27 = uVar7;
          local_f8[lVar29 + 4] = fVar36;
          lVar29 = lVar29 + 1;
          *puVar26 = uVar6;
          puVar26[4] = uVar5;
          puVar26[8] = uVar4;
          if (uVar15 <= uVar24) break;
          puVar26 = puVar26 + 1;
          puVar27 = puVar27 + 1;
          puVar28 = puVar28 + 1;
          lVar30 = lVar30 + 0x20;
        } while (lVar29 != 4);
        fVar32 = (float)local_58._0_4_ - (float)local_b8._0_4_;
        fVar33 = (float)local_58._4_4_ - (float)local_b8._4_4_;
        fVar34 = fStack_50 - fStack_b0;
        fVar35 = fStack_4c - fStack_ac;
        fVar40 = (float)local_78._0_4_ - (float)local_d8._0_4_;
        fVar41 = (float)local_78._4_4_ - (float)local_d8._4_4_;
        fVar42 = fStack_70 - fStack_d0;
        fVar43 = fStack_6c - fStack_cc;
        fVar36 = (float)local_68._0_4_ - (float)local_c8._0_4_;
        fVar37 = (float)local_68._4_4_ - (float)local_c8._4_4_;
        fVar38 = fStack_60 - fStack_c0;
        fVar39 = fStack_5c - fStack_bc;
        fVar44 = (float)local_b8._0_4_ - (float)local_88._0_4_;
        fVar45 = (float)local_b8._4_4_ - (float)local_88._4_4_;
        fVar46 = fStack_b0 - fStack_80;
        fVar47 = fStack_ac - fStack_7c;
        fVar48 = (float)local_c8._0_4_ - (float)local_98._0_4_;
        fVar49 = (float)local_c8._4_4_ - (float)local_98._4_4_;
        fVar50 = fStack_c0 - fStack_90;
        fVar51 = fStack_bc - fStack_8c;
        fVar52 = (float)local_d8._0_4_ - (float)local_a8._0_4_;
        fVar53 = (float)local_d8._4_4_ - (float)local_a8._4_4_;
        fVar54 = fStack_d0 - fStack_a0;
        fVar55 = fStack_cc - fStack_9c;
      }
      else {
        fVar40 = 0.0;
        fVar41 = 0.0;
        fVar42 = 0.0;
        fVar43 = 0.0;
        fVar32 = 0.0;
        fVar33 = 0.0;
        fVar34 = 0.0;
        fVar35 = 0.0;
        local_b8._0_4_ = 0.0;
        local_b8._4_4_ = 0.0;
        fVar36 = fVar32;
        fVar37 = fVar33;
        fVar38 = fVar34;
        fVar39 = fVar35;
        fStack_b0 = fVar34;
        fStack_ac = fVar35;
        local_c8._0_4_ = local_b8._0_4_;
        local_c8._4_4_ = local_b8._4_4_;
        fStack_c0 = fVar34;
        fStack_bc = fVar35;
        local_d8._0_4_ = local_b8._0_4_;
        local_d8._4_4_ = local_b8._4_4_;
        fStack_d0 = fVar34;
        fStack_cc = fVar35;
        fVar44 = (float)local_b8._0_4_;
        fVar45 = (float)local_b8._4_4_;
        fVar46 = fVar34;
        fVar47 = fVar35;
        fVar48 = (float)local_b8._0_4_;
        fVar49 = fVar33;
        fVar50 = fVar34;
        fVar51 = fVar35;
        fVar52 = (float)local_b8._0_4_;
        fVar53 = fVar33;
        fVar54 = fVar34;
        fVar55 = fVar35;
      }
      *pfVar25 = (float)local_d8._0_4_;
      pfVar25[1] = (float)local_d8._4_4_;
      pfVar25[2] = fStack_d0;
      pfVar25[3] = fStack_cc;
      pfVar21 = pfVar25 + 0x2c;
      pfVar25[4] = (float)local_c8._0_4_;
      pfVar25[5] = (float)local_c8._4_4_;
      pfVar25[6] = fStack_c0;
      pfVar25[7] = fStack_bc;
      pfVar25[8] = (float)local_b8._0_4_;
      pfVar25[9] = (float)local_b8._4_4_;
      pfVar25[10] = fStack_b0;
      pfVar25[0xb] = fStack_ac;
      pfVar25[0xc] = fVar52;
      pfVar25[0xd] = fVar53;
      pfVar25[0xe] = fVar54;
      pfVar25[0xf] = fVar55;
      pfVar25[0x10] = fVar48;
      pfVar25[0x11] = fVar49;
      pfVar25[0x12] = fVar50;
      pfVar25[0x13] = fVar51;
      pfVar25[0x14] = fVar44;
      pfVar25[0x15] = fVar45;
      pfVar25[0x16] = fVar46;
      pfVar25[0x17] = fVar47;
      pfVar25[0x18] = fVar40;
      pfVar25[0x19] = fVar41;
      pfVar25[0x1a] = fVar42;
      pfVar25[0x1b] = fVar43;
      pfVar25[0x1c] = fVar36;
      pfVar25[0x1d] = fVar37;
      pfVar25[0x1e] = fVar38;
      pfVar25[0x1f] = fVar39;
      pfVar25[0x20] = fVar32;
      pfVar25[0x21] = fVar33;
      pfVar25[0x22] = fVar34;
      pfVar25[0x23] = fVar35;
      pfVar25[0x24] = local_f8[0];
      pfVar25[0x25] = local_f8[1];
      pfVar25[0x26] = local_f8[2];
      pfVar25[0x27] = local_f8[3];
      pfVar25[0x28] = local_f8[4];
      pfVar25[0x29] = local_f8[5];
      pfVar25[0x2a] = local_f8[6];
      pfVar25[0x2b] = local_f8[7];
      pfVar25 = pfVar21;
    } while (pfVar2 != pfVar21);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar18;
}



/* WARNING: Control flow encountered bad instruction data */
/* void std::vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >,
   std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> > >
   >::_M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >
   >(__gnu_cxx::__normal_iterator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >*,
   std::vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >,
   std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> > > > >,
   std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >&&) */

void __thiscall
std::
vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
::
_M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>
          (vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
           *this,undefined8 *param_2,undefined8 *param_3)

{
  undefined8 *puVar1;
  undefined8 uVar2;
  ulong uVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  ulong uVar8;
  undefined8 *puVar9;
  long lVar10;
  
  puVar5 = *(undefined8 **)(this + 8);
  puVar1 = *(undefined8 **)this;
  uVar3 = (long)puVar5 - (long)puVar1 >> 3;
  if (uVar3 == 0xfffffffffffffff) {
    std::__throw_length_error("vector::_M_realloc_insert");
                    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
  }
  if (puVar1 == puVar5) {
    if (0xfffffffffffffffe < uVar3) goto LAB_00106370;
    uVar8 = 0xfffffffffffffff;
    if (uVar3 + 1 < 0x1000000000000000) {
      uVar8 = uVar3 + 1;
    }
    uVar8 = uVar8 << 3;
LAB_0010637a:
    puVar7 = (undefined8 *)operator_new(uVar8);
    lVar10 = uVar8 + (long)puVar7;
    *(undefined8 *)((long)puVar7 + ((long)param_2 - (long)puVar1)) = *param_3;
    puVar4 = puVar7 + 1;
    *param_3 = 0;
    if (param_2 != puVar1) {
LAB_001062e1:
      puVar4 = puVar1;
      puVar9 = puVar7;
      do {
        uVar2 = *puVar4;
        puVar4 = puVar4 + 1;
        *puVar9 = uVar2;
        puVar9 = puVar9 + 1;
      } while (puVar4 != param_2);
      puVar4 = (undefined8 *)((long)puVar7 + (long)param_2 + (8 - (long)puVar1));
    }
    if (param_2 == puVar5) goto LAB_00106334;
  }
  else {
    uVar8 = uVar3 * 2;
    if (uVar8 < uVar3) {
LAB_00106370:
      uVar8 = 0x7ffffffffffffff8;
      goto LAB_0010637a;
    }
    if (uVar8 != 0) {
      if (0xfffffffffffffff < uVar8) {
        uVar8 = 0xfffffffffffffff;
      }
      uVar8 = uVar8 * 8;
      goto LAB_0010637a;
    }
    lVar10 = 0;
    puVar7 = (undefined8 *)0x0;
    *(undefined8 *)((long)param_2 - (long)puVar1) = *param_3;
    puVar4 = (undefined8 *)&DAT_00000008;
    *param_3 = 0;
    if (param_2 != puVar1) goto LAB_001062e1;
  }
  puVar9 = (undefined8 *)(((long)puVar5 - (long)param_2) + (long)puVar4);
  puVar5 = puVar4;
  do {
    uVar2 = *param_2;
    puVar6 = puVar5 + 1;
    param_2 = param_2 + 1;
    *puVar5 = uVar2;
    puVar5 = puVar6;
    puVar4 = puVar9;
  } while (puVar6 != puVar9);
LAB_00106334:
  if (puVar1 != (undefined8 *)0x0) {
    operator_delete(puVar1,*(long *)(this + 0x10) - (long)puVar1);
  }
  *(undefined8 **)this = puVar7;
  *(undefined8 **)(this + 8) = puVar4;
  *(long *)(this + 0x10) = lVar10;
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* void embree::sse2::splitPrimitive<embree::sse2::TriangleSplitter>(embree::sse2::TriangleSplitter
   const&, embree::PrimRef const&, unsigned int, embree::sse2::SplittingGrid const&,
   embree::PrimRef*, unsigned int&) */

void embree::sse2::splitPrimitive<embree::sse2::TriangleSplitter>
               (TriangleSplitter *param_1,PrimRef *param_2,uint param_3,SplittingGrid *param_4,
               PrimRef *param_5,uint *param_6)

{
  undefined1 auVar1 [16];
  undefined1 auVar2 [16];
  undefined8 uVar3;
  undefined8 uVar4;
  ulong uVar5;
  PrimRef *pPVar6;
  TriangleSplitter *pTVar7;
  long in_FS_OFFSET;
  float fVar8;
  uint uVar9;
  float fVar10;
  uint uVar11;
  float fVar12;
  uint uVar13;
  float fVar14;
  uint uVar15;
  uint uVar17;
  uint uVar18;
  undefined1 auVar16 [16];
  float fVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  float fVar25;
  undefined1 auVar26 [16];
  undefined1 auVar27 [16];
  undefined1 auStack_b0 [12];
  undefined4 uStack_a4;
  undefined8 uStack_a0;
  undefined8 uStack_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  undefined1 local_80 [16];
  undefined8 uStack_70;
  undefined8 uStack_68;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_3 != 1) {
    auVar1 = *(undefined1 (*) [16])param_2;
    fVar25 = *(float *)(param_4 + 0x10);
    auVar2 = *(undefined1 (*) [16])(param_2 + 0x10);
    fVar19 = (auVar1._0_4_ - *(float *)param_4) * fVar25 + _LC27;
    fVar20 = (auVar1._4_4_ - *(float *)(param_4 + 4)) * fVar25 + _LC27;
    fVar21 = (auVar1._8_4_ - *(float *)(param_4 + 8)) * fVar25 + _LC27;
    fVar8 = (auVar2._0_4_ - *(float *)param_4) * fVar25 + _LC29;
    fVar10 = (auVar2._4_4_ - *(float *)(param_4 + 4)) * fVar25 + _LC29;
    fVar12 = (auVar2._8_4_ - *(float *)(param_4 + 8)) * fVar25 + _LC29;
    fVar25 = fVar21;
    if ((float)((uint)fVar21 & _LC19) < _LC18) {
      fVar25 = (float)((uint)((float)(int)fVar21 -
                             (float)(-(uint)(fVar21 < (float)(int)fVar21) & (uint)_LC30)) |
                      ~_LC19 & (uint)fVar21);
    }
    fVar22 = fVar20;
    if ((float)((uint)fVar20 & _LC19) < _LC18) {
      fVar22 = (float)((uint)((float)(int)fVar20 -
                             (float)(-(uint)(fVar20 < (float)(int)fVar20) & (uint)_LC30)) |
                      ~_LC19 & (uint)fVar20);
    }
    fVar14 = fVar19;
    if ((float)((uint)fVar19 & _LC19) < _LC18) {
      fVar14 = (float)((uint)((float)(int)fVar19 -
                             (float)(-(uint)(fVar19 < (float)(int)fVar19) & (uint)_LC30)) |
                      ~_LC19 & (uint)fVar19);
    }
    uVar15 = (uint)fVar14;
    uVar17 = (uint)fVar22;
    uVar18 = (uint)fVar25;
    fVar25 = fVar12;
    if ((float)((uint)fVar12 & _LC19) < _LC18) {
      fVar25 = (float)((uint)((float)(int)fVar12 -
                             (float)(-(uint)(fVar12 < (float)(int)fVar12) & (uint)_LC30)) |
                      ~_LC19 & (uint)fVar12);
    }
    fVar22 = fVar10;
    if ((float)((uint)fVar10 & _LC19) < _LC18) {
      fVar22 = (float)((uint)((float)(int)fVar10 -
                             (float)(-(uint)(fVar10 < (float)(int)fVar10) & (uint)_LC30)) |
                      ~_LC19 & (uint)fVar10);
    }
    fVar14 = fVar8;
    if ((float)((uint)fVar8 & _LC19) < _LC18) {
      fVar14 = (float)((uint)((float)(int)fVar8 -
                             (float)(-(uint)(fVar8 < (float)(int)fVar8) & (uint)_LC30)) |
                      ~_LC19 & (uint)fVar8);
    }
    uVar9 = -(uint)((int)fVar19 < (int)fVar8) ^ 0xffffffff;
    uVar11 = -(uint)((int)fVar20 < (int)fVar10) ^ 0xffffffff;
    uVar13 = -(uint)((int)fVar21 < (int)fVar12) ^ 0xffffffff;
    local_80._0_4_ = uVar9 & uVar15 | ~uVar9 & (int)fVar14;
    local_80._4_4_ = uVar11 & uVar17 | ~uVar11 & (int)fVar22;
    local_80._8_4_ = uVar13 & uVar18 | ~uVar13 & (int)fVar25;
    local_80._12_4_ = 0;
    uVar17 = ((((uVar17 << 0x10 | uVar17) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 10
             & 0x12492492 |
             (((((uVar18 | uVar18 << 0x10) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249) << 2 |
             ((((uVar15 << 0x10 | uVar15) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249;
    uVar15 = ((((local_80._4_4_ << 0x10 | local_80._4_4_) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 &
             0x30c30c3) * 10 & 0x12492492 |
             (((((local_80._8_4_ << 0x10 | local_80._8_4_) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11
              & 0x30c30c3) * 5 & 0x9249249) << 2 |
             ((((local_80._0_4_ << 0x10 | local_80._0_4_) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 &
             0x30c30c3) * 5 & 0x9249249;
    if (uVar17 != uVar15) {
      uVar17 = uVar17 ^ uVar15;
      uVar15 = 0x1f;
      if (uVar17 != 0) {
        for (; uVar17 >> uVar15 == 0; uVar15 = uVar15 - 1) {
        }
      }
      auVar23._0_8_ = CONCAT44(_LC1,_LC1);
      auVar23._8_4_ = _LC1;
      auVar23._12_4_ = _LC1;
      auVar24._0_8_ = CONCAT44(_LC3,_LC3);
      auVar24._8_4_ = _LC3;
      auVar24._12_4_ = _LC3;
      auVar26._8_4_ = _LC1;
      auVar26._0_8_ = auVar23._0_8_;
      auVar26._12_4_ = _LC1;
      auVar27._8_4_ = _LC3;
      auVar27._0_8_ = auVar24._0_8_;
      auVar27._12_4_ = _LC3;
      uVar5 = (ulong)(uVar15 % 3);
      fVar8 = (float)(-1 << ((byte)(uVar15 / 3) & 0x1f) & *(uint *)(local_80 + uVar5 * 4)) * __LC31
              * *(float *)(param_4 + 0x14) + *(float *)(param_4 + uVar5 * 4);
      pTVar7 = param_1;
      fVar25 = *(float *)(param_1 + uVar5 * 4);
      do {
        fVar10 = *(float *)(pTVar7 + uVar5 * 4 + 0x10);
        fVar12 = fVar10;
        if (fVar8 < fVar25) {
          if (fVar8 <= fVar25) {
            auVar16 = *(undefined1 (*) [16])pTVar7;
            goto LAB_001067ba;
          }
          if (fVar25 < fVar8) goto joined_r0x001067c8;
LAB_001067c0:
          fVar12 = fVar25;
          if (fVar10 < fVar8) goto joined_r0x001067c8;
        }
        else {
          auVar16 = *(undefined1 (*) [16])pTVar7;
          auVar27 = minps(auVar27,auVar16);
          auVar26 = maxps(auVar26,auVar16);
          if (fVar8 == fVar25) {
LAB_001067ba:
            auVar24 = minps(auVar24,auVar16);
            auVar23 = maxps(auVar23,auVar16);
            goto LAB_001067c0;
          }
joined_r0x001067c8:
          if (fVar8 < fVar12) {
            fVar25 = (_LC30 / (fVar10 - fVar25)) * (fVar8 - fVar25);
            auVar16._0_4_ =
                 (*(float *)(pTVar7 + 0x10) - *(float *)pTVar7) * fVar25 + *(float *)pTVar7;
            auVar16._4_4_ =
                 (*(float *)(pTVar7 + 0x14) - *(float *)(pTVar7 + 4)) * fVar25 +
                 *(float *)(pTVar7 + 4);
            auVar16._8_4_ =
                 (*(float *)(pTVar7 + 0x18) - *(float *)(pTVar7 + 8)) * fVar25 +
                 *(float *)(pTVar7 + 8);
            auVar16._12_4_ =
                 (*(float *)(pTVar7 + 0x1c) - *(float *)(pTVar7 + 0xc)) * fVar25 +
                 *(float *)(pTVar7 + 0xc);
            auVar27 = minps(auVar27,auVar16);
            auVar26 = maxps(auVar26,auVar16);
            auVar24 = minps(auVar24,auVar16);
            auVar23 = maxps(auVar23,auVar16);
          }
        }
        pTVar7 = pTVar7 + 0x10;
        fVar25 = fVar10;
      } while (param_1 + 0x30 != pTVar7);
      auVar27 = maxps(auVar27,auVar1);
      auVar24 = maxps(auVar24,auVar1);
      auVar26 = minps(auVar26,auVar2);
      auVar23 = minps(auVar23,auVar2);
      local_80._0_12_ = auVar27._0_12_;
      local_80._12_4_ = *(undefined4 *)(param_2 + 0xc);
      auVar1 = local_80;
      local_80._0_8_ = auVar27._0_8_;
      uStack_a0 = local_80._0_8_;
      local_80._8_8_ = auVar1._8_8_;
      uStack_98 = local_80._8_8_;
      auStack_b0 = auVar24._0_12_;
      uStack_a4 = *(undefined4 *)(param_2 + 0xc);
      auVar1 = _auStack_b0;
      auStack_b0._0_8_ = auVar24._0_8_;
      uVar3 = auStack_b0._0_8_;
      stack0xffffffffffffff58 = auVar1._8_8_;
      uVar4 = stack0xffffffffffffff58;
      local_80._0_12_ = auVar26._0_12_;
      local_80._12_4_ = *(undefined4 *)(param_2 + 0x1c);
      auVar2 = local_80;
      auStack_b0 = auVar23._0_12_;
      uStack_a4 = *(undefined4 *)(param_2 + 0x1c);
      auVar1 = _auStack_b0;
      auStack_b0._0_8_ = auVar23._0_8_;
      stack0xffffffffffffff58 = auVar1._8_8_;
      local_80._0_8_ = auVar26._0_8_;
      uStack_90 = local_80._0_8_;
      local_80._8_8_ = auVar2._8_8_;
      uStack_88 = local_80._8_8_;
      uStack_70 = auStack_b0._0_8_;
      uStack_68 = stack0xffffffffffffff58;
      local_80._8_8_ = uVar4;
      local_80._0_8_ = uVar3;
      splitPrimitive<embree::sse2::TriangleSplitter>
                (param_1,(PrimRef *)&uStack_a0,param_3 >> 1,param_4,param_5,param_6);
      splitPrimitive<embree::sse2::TriangleSplitter>
                (param_1,(PrimRef *)local_80,param_3 - (param_3 >> 1),param_4,param_5,param_6);
      goto LAB_00106900;
    }
  }
  uVar15 = *param_6;
  *param_6 = uVar15 + 1;
  uVar3 = *(undefined8 *)(param_2 + 8);
  pPVar6 = param_5 + (ulong)uVar15 * 0x20;
  *(undefined8 *)pPVar6 = *(undefined8 *)param_2;
  *(undefined8 *)(pPVar6 + 8) = uVar3;
  uVar3 = *(undefined8 *)(param_2 + 0x18);
  *(undefined8 *)(pPVar6 + 0x10) = *(undefined8 *)(param_2 + 0x10);
  *(undefined8 *)(pPVar6 + 0x18) = uVar3;
LAB_00106900:
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long>
   const&)#1}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

void __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
::{lambda(embree::range<unsigned_long>const&)#1}::operator()
          (_lambda_embree__range<unsigned_long>const___1_ *this,range *param_1)

{
  float *pfVar1;
  float *pfVar2;
  long lVar3;
  float *pfVar4;
  long lVar5;
  float fVar6;
  long lVar7;
  float *pfVar8;
  uint *puVar9;
  ulong uVar10;
  float fVar11;
  uint uVar12;
  float fVar13;
  uint uVar14;
  float fVar15;
  uint uVar16;
  float fVar17;
  uint uVar18;
  uint uVar19;
  uint uVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  float fVar25;
  float fVar26;
  uint uVar27;
  uint uVar28;
  
  fVar6 = _LC27;
  uVar10 = *(ulong *)param_1;
  if (*(ulong *)(param_1 + 8) <= uVar10) {
    return;
  }
  lVar7 = *(long *)(*(long *)this + 0x18);
  fVar25 = _LC18;
  uVar27 = _LC19;
  uVar28 = _LC19;
  do {
    lVar3 = uVar10 * 8;
    *(int *)(lVar7 + 4 + lVar3) = (int)uVar10;
    pfVar4 = *(float **)(this + 8);
    pfVar8 = (float *)(uVar10 * 0x20 + *(long *)(*(long *)(this + 0x10) + 0x20));
    fVar26 = pfVar4[4];
    fVar21 = (*pfVar8 - *pfVar4) * fVar26 + fVar6;
    fVar22 = (pfVar8[1] - pfVar4[1]) * fVar26 + fVar6;
    fVar23 = (pfVar8[2] - pfVar4[2]) * fVar26 + fVar6;
    fVar11 = (pfVar8[4] - *pfVar4) * fVar26 + _LC29;
    fVar13 = (pfVar8[5] - pfVar4[1]) * fVar26 + _UNK_0012fbf4;
    fVar15 = (pfVar8[6] - pfVar4[2]) * fVar26 + _UNK_0012fbf8;
    fVar26 = fVar23;
    if ((float)((uint)fVar23 & uVar28) < fVar25) {
      fVar26 = (float)((uint)((float)(int)fVar23 -
                             (float)(-(uint)(fVar23 < (float)(int)fVar23) & _LC30)) |
                      ~uVar28 & (uint)fVar23);
    }
    fVar24 = fVar22;
    if ((float)((uint)fVar22 & uVar28) < fVar25) {
      fVar24 = (float)((uint)((float)(int)fVar22 -
                             (float)(-(uint)(fVar22 < (float)(int)fVar22) & _LC30)) |
                      ~uVar28 & (uint)fVar22);
    }
    fVar17 = fVar21;
    if ((float)((uint)fVar21 & uVar28) < fVar25) {
      fVar17 = (float)((uint)((float)(int)fVar21 -
                             (float)(-(uint)(fVar21 < (float)(int)fVar21) & _LC30)) |
                      ~uVar28 & (uint)fVar21);
    }
    uVar18 = (uint)fVar17;
    uVar19 = (uint)fVar24;
    uVar20 = (uint)fVar26;
    fVar26 = fVar15;
    if ((float)((uint)fVar15 & uVar28) < fVar25) {
      fVar26 = (float)((uint)((float)(int)fVar15 -
                             (float)(-(uint)(fVar15 < (float)(int)fVar15) & _LC30)) |
                      ~uVar28 & (uint)fVar15);
    }
    fVar24 = fVar13;
    if ((float)((uint)fVar13 & uVar28) < fVar25) {
      fVar24 = (float)((uint)((float)(int)fVar13 -
                             (float)(-(uint)(fVar13 < (float)(int)fVar13) & _LC30)) |
                      ~uVar28 & (uint)fVar13);
    }
    fVar17 = fVar11;
    if ((float)((uint)fVar11 & uVar28) < fVar25) {
      fVar17 = (float)((uint)((float)(int)fVar11 -
                             (float)(-(uint)(fVar11 < (float)(int)fVar11) & _LC30)) |
                      ~uVar28 & (uint)fVar11);
    }
    uVar12 = -(uint)((int)fVar21 < (int)fVar11) ^ 0xffffffff;
    uVar14 = -(uint)((int)fVar22 < (int)fVar13) ^ 0xffffffff;
    uVar16 = -(uint)((int)fVar23 < (int)fVar15) ^ 0xffffffff;
    uVar12 = uVar12 & uVar18 | ~uVar12 & (int)fVar17;
    uVar14 = uVar14 & uVar19 | ~uVar14 & (int)fVar24;
    uVar16 = uVar16 & uVar20 | ~uVar16 & (int)fVar26;
    fVar26 = 0.0;
    uVar18 = ((((uVar19 << 0x10 | uVar19) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 10
             & 0x12492492 |
             (((((uVar20 << 0x10 | uVar20) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249) << 2 |
             ((((uVar18 << 0x10 | uVar18) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249;
    uVar19 = ((((uVar14 << 0x10 | uVar14) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 10
             & 0x12492492 |
             (((((uVar16 << 0x10 | uVar16) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249) << 2 |
             ((((uVar12 << 0x10 | uVar12) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249;
    if (uVar18 != uVar19) {
      lVar7 = *(long *)(*(long *)(*(long *)**(undefined8 **)(this + 0x18) + 0x1e0) +
                       (ulong)(uint)pfVar8[3] * 8);
      puVar9 = (uint *)((ulong)(uint)pfVar8[7] * *(long *)(lVar7 + 0x60) + *(long *)(lVar7 + 0x58));
      lVar5 = *(long *)(lVar7 + 0x88);
      lVar7 = *(long *)(lVar7 + 0x90);
      pfVar4 = (float *)(lVar5 + (ulong)*puVar9 * lVar7);
      pfVar1 = (float *)(lVar5 + (ulong)puVar9[1] * lVar7);
      pfVar2 = (float *)(lVar5 + (ulong)puVar9[2] * lVar7);
      fVar11 = *pfVar1 - *pfVar4;
      fVar13 = pfVar1[1] - pfVar4[1];
      fVar15 = pfVar1[2] - pfVar4[2];
      fVar21 = *pfVar2 - *pfVar4;
      fVar22 = pfVar2[1] - pfVar4[1];
      fVar23 = pfVar2[2] - pfVar4[2];
      fVar11 = (float)((uint)(fVar11 * fVar22 - fVar21 * fVar13) & uVar27) +
               (float)((uint)(fVar13 * fVar23 - fVar22 * fVar15) & uVar27) +
               (float)((uint)(fVar15 * fVar21 - fVar23 * fVar11) & uVar27);
      if (fVar11 != 0.0) {
        fVar25 = pfVar8[5] - pfVar8[1];
        fVar26 = pfVar8[6] - pfVar8[2];
        uVar19 = uVar19 ^ uVar18;
        uVar27 = 0x1f;
        if (uVar19 != 0) {
          for (; uVar19 >> uVar27 == 0; uVar27 = uVar27 - 1) {
          }
        }
        fVar25 = (fVar25 + fVar26) * (pfVar8[4] - *pfVar8) + fVar25 * fVar26;
        fVar11 = (fVar25 + fVar25) - fVar11;
        if (fVar11 <= 0.0) {
          fVar11 = 0.0;
        }
        fVar25 = powf(_LC32,(float)uVar27);
        fVar26 = SQRT(SQRT(fVar25 * fVar11));
        fVar25 = _LC18;
        uVar27 = _LC19;
        uVar28 = _LC20;
      }
    }
    uVar10 = uVar10 + 1;
    *(float *)(*(long *)(*(long *)this + 0x18) + lVar3) = fVar26;
    lVar7 = *(long *)(*(long *)this + 0x18);
  } while (uVar10 < *(ulong *)(param_1 + 8));
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long>
   const&)#5}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

long __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
::{lambda(embree::range<unsigned_long>const&)#5}::operator()
          (_lambda_embree__range<unsigned_long>const___5_ *this,range *param_1)

{
  float *pfVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  uint *puVar8;
  long lVar9;
  PrimRef *pPVar10;
  ulong uVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined4 uVar15;
  undefined4 uVar16;
  undefined4 uVar17;
  undefined4 uVar18;
  undefined1 auVar19 [16];
  undefined1 auVar20 [16];
  uint local_4d4;
  float local_4d0;
  float fStack_4cc;
  float fStack_4c8;
  float fStack_4c4;
  float local_4c0;
  float fStack_4bc;
  float fStack_4b8;
  float fStack_4b4;
  float local_4b0;
  float fStack_4ac;
  float fStack_4a8;
  float fStack_4a4;
  float local_4a0;
  float fStack_49c;
  float fStack_498;
  float fStack_494;
  undefined1 local_490 [16];
  undefined1 local_480 [16];
  undefined1 local_470 [16];
  PrimRef local_460 [1048];
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)param_1 < *(ulong *)(param_1 + 8)) {
    lVar9 = 0;
    uVar11 = *(ulong *)param_1;
    uVar15 = _LC30;
    uVar16 = _LC30;
    uVar17 = _LC30;
    uVar18 = _LC30;
    do {
      lVar3 = *(long *)this;
      auVar19._4_4_ = uVar16;
      auVar19._0_4_ = uVar15;
      auVar19._8_4_ = uVar17;
      auVar19._12_4_ = uVar18;
      puVar8 = (uint *)(*(long *)(lVar3 + 0x18) + uVar11 * 8);
      uVar2 = *puVar8;
      local_4d4 = 0;
      pPVar10 = (PrimRef *)((ulong)puVar8[1] * 0x20 + *(long *)(*(long *)(this + 0x10) + 0x20));
      lVar4 = *(long *)(*(long *)(*(long *)**(undefined8 **)(this + 8) + 0x1e0) +
                       (ulong)(*(uint *)(pPVar10 + 0xc) & 0x7ffffff) * 8);
      puVar8 = (uint *)((ulong)*(uint *)(pPVar10 + 0x1c) * *(long *)(lVar4 + 0x60) +
                       *(long *)(lVar4 + 0x58));
      lVar5 = *(long *)(lVar4 + 0x88);
      lVar4 = *(long *)(lVar4 + 0x90);
      pfVar1 = (float *)(lVar5 + (ulong)*puVar8 * lVar4);
      local_4d0 = *pfVar1;
      fStack_4cc = pfVar1[1];
      fStack_4c8 = pfVar1[2];
      fStack_4c4 = pfVar1[3];
      pfVar1 = (float *)(lVar5 + (ulong)puVar8[1] * lVar4);
      local_4c0 = *pfVar1;
      fStack_4bc = pfVar1[1];
      fStack_4b8 = pfVar1[2];
      fStack_4b4 = pfVar1[3];
      pfVar1 = (float *)(lVar5 + (ulong)puVar8[2] * lVar4);
      local_4b0 = *pfVar1;
      fStack_4ac = pfVar1[1];
      fStack_4a8 = pfVar1[2];
      fStack_4a4 = pfVar1[3];
      auVar7._4_4_ = fStack_4bc - fStack_4cc;
      auVar7._0_4_ = local_4c0 - local_4d0;
      auVar7._8_4_ = fStack_4b8 - fStack_4c8;
      auVar7._12_4_ = fStack_4b4 - fStack_4c4;
      local_490 = divps(auVar19,auVar7);
      auVar13._4_4_ = uVar16;
      auVar13._0_4_ = uVar15;
      auVar13._8_4_ = uVar17;
      auVar13._12_4_ = uVar18;
      auVar20._0_4_ = local_4b0 - local_4c0;
      auVar20._4_4_ = fStack_4ac - fStack_4bc;
      auVar20._8_4_ = fStack_4a8 - fStack_4b8;
      auVar20._12_4_ = fStack_4a4 - fStack_4b4;
      auVar6._4_4_ = fStack_4cc - fStack_4ac;
      auVar6._0_4_ = local_4d0 - local_4b0;
      auVar6._8_4_ = fStack_4c8 - fStack_4a8;
      auVar6._12_4_ = fStack_4c4 - fStack_4a4;
      local_470 = divps(auVar13,auVar6);
      auVar14._4_4_ = uVar16;
      auVar14._0_4_ = uVar15;
      auVar14._8_4_ = uVar17;
      auVar14._12_4_ = uVar18;
      local_480 = divps(auVar14,auVar20);
      local_4a0 = local_4d0;
      fStack_49c = fStack_4cc;
      fStack_498 = fStack_4c8;
      fStack_494 = fStack_4c4;
      splitPrimitive<embree::sse2::TriangleSplitter>
                ((TriangleSplitter *)&local_4d0,pPVar10,uVar2,*(SplittingGrid **)(this + 0x18),
                 local_460,&local_4d4);
      uVar18 = _UNK_0012fc0c;
      uVar17 = _UNK_0012fc08;
      uVar16 = _UNK_0012fc04;
      uVar15 = _LC30;
      local_4d4 = local_4d4 - 1;
      lVar9 = lVar9 + (ulong)local_4d4;
      *(uint *)(*(long *)(lVar3 + 0x18) + uVar11 * 8) = local_4d4 * 0x10000 | uVar2;
      uVar12 = uVar11 + 1;
      *(uint *)(**(long **)(this + 0x20) + (uVar11 - **(long **)(this + 0x28)) * 4) = local_4d4;
      uVar11 = uVar12;
    } while (uVar12 < *(ulong *)(param_1 + 8));
  }
  else {
    lVar9 = 0;
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar9;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long>
   const&)#7}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

void __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
::{lambda(embree::range<unsigned_long>const&)#7}::operator()
          (_lambda_embree__range<unsigned_long>const___7_ *this,range *param_1)

{
  ushort *puVar1;
  float *pfVar2;
  long lVar3;
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  undefined8 uVar6;
  long lVar7;
  undefined8 *puVar8;
  long lVar9;
  long lVar10;
  uint *puVar11;
  PrimRef *pPVar12;
  undefined8 *puVar13;
  ulong uVar14;
  long in_FS_OFFSET;
  undefined1 auVar15 [16];
  undefined1 auVar16 [16];
  undefined4 uVar17;
  undefined4 uVar18;
  undefined4 uVar19;
  undefined4 uVar20;
  undefined1 auVar21 [16];
  undefined1 auVar22 [16];
  uint local_4d4;
  float local_4d0;
  float fStack_4cc;
  float fStack_4c8;
  float fStack_4c4;
  float local_4c0;
  float fStack_4bc;
  float fStack_4b8;
  float fStack_4b4;
  float local_4b0;
  float fStack_4ac;
  float fStack_4a8;
  float fStack_4a4;
  float local_4a0;
  float fStack_49c;
  float fStack_498;
  float fStack_494;
  undefined1 local_490 [16];
  undefined1 local_480 [16];
  undefined1 local_470 [16];
  undefined8 local_460;
  undefined8 uStack_458;
  undefined8 local_450;
  undefined8 uStack_448;
  undefined8 auStack_440 [127];
  long local_48;
  
  uVar14 = *(ulong *)param_1;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar14 < *(ulong *)(param_1 + 8)) {
    uVar17 = _LC30;
    uVar18 = _LC30;
    uVar19 = _LC30;
    uVar20 = _LC30;
    do {
      lVar9 = *(long *)(this + 0x10);
      auVar21._4_4_ = uVar18;
      auVar21._0_4_ = uVar17;
      auVar21._8_4_ = uVar19;
      auVar21._12_4_ = uVar20;
      puVar1 = (ushort *)(*(long *)(*(long *)this + 0x18) + uVar14 * 8);
      local_4d4 = 0;
      lVar7 = (ulong)*(uint *)(puVar1 + 2) * 0x20;
      pPVar12 = (PrimRef *)(*(long *)(lVar9 + 0x20) + lVar7);
      lVar10 = *(long *)(*(long *)(*(long *)**(undefined8 **)(this + 8) + 0x1e0) +
                        (ulong)(*(uint *)(pPVar12 + 0xc) & 0x7ffffff) * 8);
      puVar11 = (uint *)((ulong)*(uint *)(pPVar12 + 0x1c) * *(long *)(lVar10 + 0x60) +
                        *(long *)(lVar10 + 0x58));
      lVar3 = *(long *)(lVar10 + 0x88);
      lVar10 = *(long *)(lVar10 + 0x90);
      pfVar2 = (float *)(lVar3 + (ulong)*puVar11 * lVar10);
      local_4d0 = *pfVar2;
      fStack_4cc = pfVar2[1];
      fStack_4c8 = pfVar2[2];
      fStack_4c4 = pfVar2[3];
      pfVar2 = (float *)(lVar3 + (ulong)puVar11[1] * lVar10);
      local_4c0 = *pfVar2;
      fStack_4bc = pfVar2[1];
      fStack_4b8 = pfVar2[2];
      fStack_4b4 = pfVar2[3];
      pfVar2 = (float *)(lVar3 + (ulong)puVar11[2] * lVar10);
      local_4b0 = *pfVar2;
      fStack_4ac = pfVar2[1];
      fStack_4a8 = pfVar2[2];
      fStack_4a4 = pfVar2[3];
      auVar5._4_4_ = fStack_4bc - fStack_4cc;
      auVar5._0_4_ = local_4c0 - local_4d0;
      auVar5._8_4_ = fStack_4b8 - fStack_4c8;
      auVar5._12_4_ = fStack_4b4 - fStack_4c4;
      local_490 = divps(auVar21,auVar5);
      auVar15._4_4_ = uVar18;
      auVar15._0_4_ = uVar17;
      auVar15._8_4_ = uVar19;
      auVar15._12_4_ = uVar20;
      auVar22._0_4_ = local_4b0 - local_4c0;
      auVar22._4_4_ = fStack_4ac - fStack_4bc;
      auVar22._8_4_ = fStack_4a8 - fStack_4b8;
      auVar22._12_4_ = fStack_4a4 - fStack_4b4;
      auVar4._4_4_ = fStack_4cc - fStack_4ac;
      auVar4._0_4_ = local_4d0 - local_4b0;
      auVar4._8_4_ = fStack_4c8 - fStack_4a8;
      auVar4._12_4_ = fStack_4c4 - fStack_4a4;
      local_470 = divps(auVar15,auVar4);
      auVar16._4_4_ = uVar18;
      auVar16._0_4_ = uVar17;
      auVar16._8_4_ = uVar19;
      auVar16._12_4_ = uVar20;
      local_480 = divps(auVar16,auVar22);
      local_4a0 = local_4d0;
      fStack_49c = fStack_4cc;
      fStack_498 = fStack_4c8;
      fStack_494 = fStack_4c4;
      splitPrimitive<embree::sse2::TriangleSplitter>
                ((TriangleSplitter *)&local_4d0,pPVar12,(uint)*puVar1,
                 *(SplittingGrid **)(this + 0x18),(PrimRef *)&local_460,&local_4d4);
      lVar10 = (ulong)*(uint *)(**(long **)(this + 0x28) + (uVar14 - **(long **)(this + 0x30)) * 4)
               + **(long **)(this + 0x20);
      puVar8 = (undefined8 *)(*(long *)(lVar9 + 0x20) + lVar7);
      *puVar8 = local_460;
      puVar8[1] = uStack_458;
      puVar8[2] = local_450;
      puVar8[3] = uStack_448;
      uVar20 = _UNK_0012fc0c;
      uVar19 = _UNK_0012fc08;
      uVar18 = _UNK_0012fc04;
      uVar17 = _LC30;
      if (1 < local_4d4) {
        lVar9 = lVar10 * 0x20;
        do {
          puVar8 = (undefined8 *)((long)auStack_440 + lVar9 + lVar10 * -0x20);
          uVar6 = puVar8[1];
          puVar13 = (undefined8 *)(*(long *)(*(long *)(this + 0x10) + 0x20) + lVar9);
          *puVar13 = *puVar8;
          puVar13[1] = uVar6;
          puVar8 = (undefined8 *)((long)auStack_440 + lVar9 + lVar10 * -0x20 + 0x10);
          uVar6 = puVar8[1];
          lVar9 = lVar9 + 0x20;
          puVar13[2] = *puVar8;
          puVar13[3] = uVar6;
        } while ((lVar10 + (ulong)local_4d4) * 0x20 + -0x20 != lVar9);
      }
      uVar14 = uVar14 + 1;
    } while (uVar14 < *(ulong *)(param_1 + 8));
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::parallel_for_for_prefix_sum0_<embree::parallel_for_for_prefix_sum0<embree::Scene::Iterator2,
   unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long)#1}, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#2}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, embree::Scene::Iterator2&, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long)#1} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2} const&)::{lambda(unsigned long)#1},
   unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::parallel_for_for_prefix_sum0<embree::Scene::Iterator2, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long)#1}, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#2}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, embree::Scene::Iterator2&, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long)#1} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2} const&)::{lambda(unsigned long,
   embree::range<unsigned long> const&, unsigned long)#2},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#2}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, unsigned long, embree::parallel_for_for_prefix_sum0<embree::Scene::Iterator2, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long)#1}, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#2}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, embree::Scene::Iterator2&, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long)#1} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2} const&)::{lambda(unsigned long)#1}
   const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::parallel_for_for_prefix_sum0<embree::Scene::Iterator2, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long)#1}, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#2}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, embree::Scene::Iterator2&, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long)#1} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2} const&)::{lambda(unsigned long,
   embree::range<unsigned long> const&, unsigned long)#2} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2} const&)::{lambda(unsigned
   long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_for_for_prefix_sum0_<embree::parallel_for_for_prefix_sum0<embree::Scene::Iterator2,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::Geometry*,embree::range<unsigned_long>const&,unsigned_long,unsigned_long)#1},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#2}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT...embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#2}const&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined1 (*pauVar1) [16];
  long *plVar2;
  ulong uVar3;
  ulong uVar4;
  long *plVar5;
  long lVar6;
  long lVar7;
  ulong uVar8;
  ulong uVar9;
  ulong uVar10;
  long lVar11;
  long in_FS_OFFSET;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  ulong local_a8;
  ulong local_a0;
  undefined1 local_98 [16];
  undefined1 local_88 [16];
  undefined1 local_78 [16];
  undefined1 local_68 [16];
  long local_58;
  long local_50;
  long local_40;
  
  lVar6 = *(long *)this;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar8 = *(ulong *)(lVar6 + param_1 * 8);
  uVar10 = *(ulong *)(lVar6 + 0x200 + param_1 * 8);
  uVar9 = param_1 * *(long *)(lVar6 + 0x408);
  uVar3 = uVar9 / **(ulong **)(this + 8);
  uVar9 = (uVar9 + *(long *)(lVar6 + 0x408)) / **(ulong **)(this + 8);
  pauVar1 = *(undefined1 (**) [16])(this + 0x10);
  auVar15 = *pauVar1;
  auVar14 = pauVar1[1];
  auVar13 = pauVar1[2];
  auVar12 = pauVar1[3];
  lVar7 = *(long *)pauVar1[4];
  lVar11 = *(long *)(pauVar1[4] + 8);
  if (uVar3 < uVar9) {
    do {
      plVar2 = (long *)**(long **)(this + 0x18);
      lVar6 = *(long *)(*(long *)(*plVar2 + 0x1e0) + uVar8 * 8);
      if (((lVar6 == 0) || ((*(byte *)(lVar6 + 0x3e) & 0x20) == 0)) ||
         (((long)(1 << (*(byte *)(lVar6 + 0x3c) & 0x1f)) & plVar2[1]) == 0)) {
        uVar4 = 0;
      }
      else {
        uVar4 = 0;
        if ((*(int *)(lVar6 + 0x24) != 1) == (bool)(char)plVar2[2]) {
          uVar4 = (uVar9 + uVar10) - uVar3;
          if (*(uint *)(lVar6 + 0x20) < uVar4) {
            uVar4 = (ulong)*(uint *)(lVar6 + 0x20);
          }
          if (uVar10 < uVar4) {
            plVar2 = (long *)(*(undefined8 **)(this + 0x28))[1];
            plVar5 = *(long **)(*(long *)(*plVar2 + 0x1e0) + uVar8 * 8);
            if (plVar5 != (long *)0x0) {
              if (((*(byte *)((long)plVar5 + 0x3e) & 0x20) == 0) ||
                 (((long)(1 << (*(byte *)((long)plVar5 + 0x3c) & 0x1f)) & plVar2[1]) == 0)) {
                plVar5 = (long *)0x0;
              }
              else if ((*(int *)((long)plVar5 + 0x24) != 1) != (bool)(char)plVar2[2]) {
                plVar5 = (long *)0x0;
              }
            }
            local_a8 = uVar10;
            local_a0 = uVar4;
            (**(code **)(*plVar5 + 0x168))
                      (local_98,plVar5,
                       *(undefined8 *)(*(long *)**(undefined8 **)(this + 0x28) + 0x20),&local_a8,
                       uVar3,uVar8 & 0xffffffff);
            auVar15 = minps(auVar15,local_98);
            auVar14 = maxps(auVar14,local_88);
            auVar13 = minps(auVar13,local_78);
            auVar12 = maxps(auVar12,local_68);
            lVar11 = lVar11 + local_50;
            lVar7 = lVar7 + local_58;
          }
        }
      }
      lVar6 = uVar3 - uVar10;
      uVar8 = uVar8 + 1;
      uVar10 = 0;
      uVar3 = lVar6 + uVar4;
    } while (uVar3 < uVar9);
    lVar6 = *(long *)this;
  }
  pauVar1 = (undefined1 (*) [16])(lVar6 + 0x410 + param_1 * 0x50);
  lVar6 = lVar6 + param_1 * 0x50;
  *pauVar1 = auVar15;
  pauVar1[1] = auVar14;
  pauVar1[2] = auVar13;
  pauVar1[3] = auVar12;
  *(long *)(lVar6 + 0x450) = lVar7;
  *(long *)(lVar6 + 0x458) = lVar11;
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* embree::parallel_for_for_prefix_sum1_<embree::parallel_for_for_prefix_sum1<embree::Scene::Iterator2,
   unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#4}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, embree::Scene::Iterator2&, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#4} const&)::{lambda(unsigned long)#1},
   unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::parallel_for_for_prefix_sum1<embree::Scene::Iterator2, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#4}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, embree::Scene::Iterator2&, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#4} const&)::{lambda(unsigned long,
   embree::range<unsigned long> const&, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#4}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, unsigned long, embree::parallel_for_for_prefix_sum1<embree::Scene::Iterator2, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#4}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, embree::Scene::Iterator2&, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#4} const&)::{lambda(unsigned long)#1}
   const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::parallel_for_for_prefix_sum1<embree::Scene::Iterator2, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#4}>(embree::ParallelForForPrefixSumState<embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   >&, embree::Scene::Iterator2&, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::Geometry*, embree::range<unsigned long> const&,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#4} const&)::{lambda(unsigned long,
   embree::range<unsigned long> const&, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#4} const&)::{lambda(unsigned
   long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_for_for_prefix_sum1_<embree::parallel_for_for_prefix_sum1<embree::Scene::Iterator2,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::Geometry*,embree::range<unsigned_long>const&,unsigned_long,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#3},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#4}>(...embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#4}const&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined1 (*pauVar1) [16];
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  long *plVar7;
  long lVar8;
  ulong uVar9;
  ulong uVar10;
  ulong uVar11;
  long in_FS_OFFSET;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  long local_110;
  ulong local_a8;
  ulong local_a0;
  undefined1 local_98 [16];
  undefined1 local_88 [16];
  undefined1 local_78 [16];
  undefined1 local_68 [16];
  long local_58;
  long local_50;
  long local_40;
  
  lVar8 = *(long *)this;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar9 = *(ulong *)(lVar8 + param_1 * 8);
  uVar10 = *(ulong *)(lVar8 + 0x200 + param_1 * 8);
  uVar11 = param_1 * *(long *)(lVar8 + 0x408);
  uVar3 = uVar11 / **(ulong **)(this + 8);
  uVar11 = (uVar11 + *(long *)(lVar8 + 0x408)) / **(ulong **)(this + 8);
  pauVar1 = *(undefined1 (**) [16])(this + 0x10);
  local_110 = *(long *)pauVar1[4];
  auVar15 = *pauVar1;
  auVar14 = pauVar1[1];
  auVar13 = pauVar1[2];
  auVar12 = pauVar1[3];
  lVar4 = *(long *)(pauVar1[4] + 8);
  if (uVar3 < uVar11) {
    do {
      plVar2 = (long *)**(long **)(this + 0x18);
      lVar5 = *(long *)(*(long *)(*plVar2 + 0x1e0) + uVar9 * 8);
      if (((lVar5 == 0) || ((*(byte *)(lVar5 + 0x3e) & 0x20) == 0)) ||
         (((long)(1 << (*(byte *)(lVar5 + 0x3c) & 0x1f)) & plVar2[1]) == 0)) {
        uVar6 = 0;
      }
      else {
        uVar6 = 0;
        if ((*(int *)(lVar5 + 0x24) != 1) == (bool)(char)plVar2[2]) {
          uVar6 = (uVar10 + uVar11) - uVar3;
          if (*(uint *)(lVar5 + 0x20) < uVar6) {
            uVar6 = (ulong)*(uint *)(lVar5 + 0x20);
          }
          if (uVar10 < uVar6) {
            lVar8 = lVar8 + param_1 * 0x50;
            plVar2 = (long *)(*(undefined8 **)(this + 0x28))[1];
            plVar7 = *(long **)(*(long *)(*plVar2 + 0x1e0) + uVar9 * 8);
            if (plVar7 != (long *)0x0) {
              if (((*(byte *)((long)plVar7 + 0x3e) & 0x20) == 0) ||
                 (((long)(1 << (*(byte *)((long)plVar7 + 0x3c) & 0x1f)) & plVar2[1]) == 0)) {
                plVar7 = (long *)0x0;
              }
              else if ((*(int *)((long)plVar7 + 0x24) != 1) != (bool)(char)plVar2[2]) {
                plVar7 = (long *)0x0;
              }
            }
            local_a8 = uVar10;
            local_a0 = uVar6;
            (**(code **)(*plVar7 + 0x168))
                      (local_98,plVar7,
                       *(undefined8 *)(*(long *)**(undefined8 **)(this + 0x28) + 0x20),&local_a8,
                       ((*(long *)(lVar8 + 0x1858) - local_110) + lVar4) - *(long *)(lVar8 + 0x1850)
                       ,uVar9 & 0xffffffff);
            lVar8 = *(long *)this;
            auVar15 = minps(auVar15,local_98);
            auVar14 = maxps(auVar14,local_88);
            auVar13 = minps(auVar13,local_78);
            auVar12 = maxps(auVar12,local_68);
            local_110 = local_110 + local_58;
            lVar4 = lVar4 + local_50;
          }
        }
      }
      lVar5 = uVar3 - uVar10;
      uVar9 = uVar9 + 1;
      uVar10 = 0;
      uVar3 = lVar5 + uVar6;
    } while (uVar3 < uVar11);
  }
  pauVar1 = (undefined1 (*) [16])(lVar8 + 0x410 + param_1 * 0x50);
  lVar8 = lVar8 + param_1 * 0x50;
  *pauVar1 = auVar15;
  pauVar1[1] = auVar14;
  pauVar1[2] = auVar13;
  pauVar1[3] = auVar12;
  *(long *)(lVar8 + 0x450) = local_110;
  *(long *)(lVar8 + 0x458) = lVar4;
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* embree::parallel_partition_task<embree::sse2::PresplitItem, unsigned long, int,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4},
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, embree::sse2::PresplitItem const&)#1},
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, unsigned long&)#2}>::partition(unsigned long&, unsigned long&)::{lambda(unsigned
   long)#2}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_partition_task<embree::sse2::PresplitItem,unsigned_long,int,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monito...bree::sse2::PresplitItem_const&)#4}const&,unsigned_long)::{lambda(unsigned_long&,unsigned_long&)#2}>
::partition(unsigned_long&,unsigned_long&)::{lambda(unsigned_long)#2}::operator()
          (_lambda_unsigned_long__2_ *this,ulong param_1)

{
  long *plVar1;
  undefined8 uVar2;
  long *plVar3;
  ulong uVar4;
  ulong uVar5;
  long lVar6;
  long *plVar7;
  long *plVar8;
  ulong uVar9;
  ulong uVar10;
  long lVar11;
  ulong uVar12;
  ulong uVar13;
  
  plVar1 = *(long **)(this + 8);
  lVar11 = plVar1[0x98];
  uVar9 = param_1 * **(long **)this;
  uVar13 = plVar1[0x99] - lVar11;
  uVar4 = uVar9 / (ulong)plVar1[6];
  uVar10 = uVar4;
  if (uVar4 < uVar13) {
    plVar7 = plVar1 + 0x98;
  }
  else {
    plVar8 = plVar1 + 0x9a;
    do {
      plVar7 = plVar8;
      lVar11 = *plVar7;
      uVar10 = uVar10 - uVar13;
      uVar13 = plVar7[1] - lVar11;
      plVar8 = plVar7 + 2;
    } while (uVar13 <= uVar10);
  }
  lVar6 = plVar1[0x118];
  uVar12 = plVar1[0x119] - lVar6;
  uVar5 = uVar4;
  if (uVar4 < uVar12) {
    plVar8 = plVar1 + 0x118;
  }
  else {
    plVar3 = plVar1 + 0x11a;
    do {
      plVar8 = plVar3;
      lVar6 = *plVar8;
      uVar5 = uVar5 - uVar12;
      uVar12 = plVar8[1] - lVar6;
      plVar3 = plVar8 + 2;
    } while (uVar12 <= uVar5);
  }
  uVar13 = uVar13 - uVar10;
  uVar4 = (**(long **)this + uVar9) / (ulong)plVar1[6] - uVar4;
  uVar12 = uVar12 - uVar5;
  uVar9 = uVar4;
  if (uVar13 <= uVar4) {
    uVar9 = uVar13;
  }
  lVar11 = *plVar1 + (lVar11 + uVar10) * 8;
  lVar6 = *plVar1 + (lVar6 + uVar5) * 8;
  if (uVar12 < uVar9) {
    uVar9 = uVar12;
  }
  if (uVar4 != 0) {
    do {
      if (uVar12 == 0) {
        uVar12 = plVar8[3] - plVar8[2];
        lVar6 = *plVar1 + plVar8[2] * 8;
        uVar9 = uVar4;
        if (uVar12 <= uVar4) {
          uVar9 = uVar12;
        }
        if (uVar13 < uVar9) {
          uVar9 = uVar13;
        }
        plVar8 = plVar8 + 2;
      }
      uVar4 = uVar4 - uVar9;
      uVar13 = uVar13 - uVar9;
      uVar12 = uVar12 - uVar9;
      if (uVar9 != 0) {
        uVar10 = 0;
        do {
          uVar2 = *(undefined8 *)(lVar11 + uVar10 * 8);
          *(undefined8 *)(lVar11 + uVar10 * 8) = *(undefined8 *)(lVar6 + uVar10 * 8);
          *(undefined8 *)(lVar6 + uVar10 * 8) = uVar2;
          uVar10 = uVar10 + 1;
        } while (uVar9 != uVar10);
        lVar6 = lVar6 + uVar9 * 8;
        lVar11 = lVar11 + uVar9 * 8;
        if (uVar4 == 0) {
          return;
        }
      }
      if (uVar13 == 0) {
        uVar13 = plVar7[3] - plVar7[2];
        uVar9 = uVar12;
        if (uVar4 <= uVar12) {
          uVar9 = uVar4;
        }
        lVar11 = *plVar1 + plVar7[2] * 8;
        if (uVar13 < uVar9) {
          uVar9 = uVar13;
        }
        plVar7 = plVar7 + 2;
      }
      else {
        uVar9 = 0;
      }
    } while( true );
  }
  return;
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long>
   const&)#1}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

void __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)
::{lambda(embree::range<unsigned_long>const&)#1}::operator()
          (_lambda_embree__range<unsigned_long>const___1_ *this,range *param_1)

{
  float *pfVar1;
  float fVar2;
  float fVar3;
  ulong uVar4;
  float fVar5;
  float fVar6;
  long lVar7;
  long lVar8;
  ulong *puVar9;
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined4 uVar17;
  ulong uVar18;
  undefined1 (*pauVar19) [16];
  uint uVar20;
  undefined8 *puVar21;
  uint *puVar22;
  undefined1 (*pauVar23) [16];
  long lVar24;
  long in_FS_OFFSET;
  float fVar25;
  float fVar26;
  float fVar27;
  float fVar28;
  undefined1 auVar29 [16];
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  float fVar41;
  undefined1 local_110 [8];
  float fStack_108;
  undefined1 local_e0 [8];
  float fStack_d8;
  uint uStack_d4;
  float local_c0 [12];
  float local_90;
  float fStack_8c;
  float fStack_88;
  float fStack_84;
  undefined1 local_80 [16];
  undefined1 local_70 [16];
  undefined1 local_60 [16];
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  uVar18 = *(ulong *)param_1;
  if (uVar18 < *(ulong *)(param_1 + 8)) {
    do {
      pauVar19 = (undefined1 (*) [16])(**(long **)this + uVar18 * 0x20);
      fVar5 = *(float *)(*pauVar19 + 0xc);
      if (0xfffffff < (uint)fVar5) {
        lVar24 = (long)*(int *)(*(long *)(this + 8) + 4);
        fVar2 = **(float **)(this + 0x10);
        if ((*(float *)(*pauVar19 + lVar24 * 4) <= fVar2 &&
             fVar2 != *(float *)(*pauVar19 + lVar24 * 4)) &&
           (fVar2 < *(float *)(pauVar19[1] + lVar24 * 4))) {
          auVar32._0_8_ = CONCAT44(_LC30,_LC30);
          auVar32._8_4_ = _LC30;
          auVar32._12_4_ = _LC30;
          auVar40._8_4_ = _LC30;
          auVar40._0_8_ = auVar32._0_8_;
          auVar40._12_4_ = _LC30;
          lVar7 = *(long *)(*(long *)(*(long *)(*(long **)this)[1] + 0x1e0) +
                           (ulong)((uint)fVar5 & 0x7ffffff) * 8);
          fVar6 = *(float *)(pauVar19[1] + 0xc);
          puVar22 = (uint *)((ulong)(uint)fVar6 * *(long *)(lVar7 + 0x60) + *(long *)(lVar7 + 0x58))
          ;
          lVar8 = *(long *)(lVar7 + 0x88);
          lVar7 = *(long *)(lVar7 + 0x90);
          pfVar1 = (float *)(lVar8 + (ulong)*puVar22 * lVar7);
          local_c0[0] = *pfVar1;
          local_c0[1] = pfVar1[1];
          local_c0[2] = pfVar1[2];
          local_c0[3] = pfVar1[3];
          local_90 = local_c0[0];
          fStack_8c = local_c0[1];
          fStack_88 = local_c0[2];
          fStack_84 = local_c0[3];
          pfVar1 = (float *)(lVar8 + (ulong)puVar22[1] * lVar7);
          local_c0[4] = *pfVar1;
          local_c0[5] = pfVar1[1];
          local_c0[6] = pfVar1[2];
          local_c0[7] = pfVar1[3];
          pfVar1 = (float *)(lVar8 + (ulong)puVar22[2] * lVar7);
          local_c0[8] = *pfVar1;
          local_c0[9] = pfVar1[1];
          local_c0[10] = pfVar1[2];
          local_c0[0xb] = pfVar1[3];
          pauVar23 = (undefined1 (*) [16])local_c0;
          auVar36._0_4_ = local_c0[4] - local_c0[0];
          auVar36._4_4_ = local_c0[5] - local_c0[1];
          auVar36._8_4_ = local_c0[6] - local_c0[2];
          auVar36._12_4_ = local_c0[7] - local_c0[3];
          local_80 = divps(auVar40,auVar36);
          auVar35._0_4_ = local_c0[8] - local_c0[4];
          auVar35._4_4_ = local_c0[9] - local_c0[5];
          auVar35._8_4_ = local_c0[10] - local_c0[6];
          auVar35._12_4_ = local_c0[0xb] - local_c0[7];
          auVar38._8_4_ = _LC30;
          auVar38._0_8_ = auVar32._0_8_;
          auVar38._12_4_ = _LC30;
          auVar30._4_4_ = local_c0[1] - local_c0[9];
          auVar30._0_4_ = local_c0[0] - local_c0[8];
          auVar30._8_4_ = local_c0[2] - local_c0[10];
          auVar30._12_4_ = local_c0[3] - local_c0[0xb];
          local_60 = divps(auVar32,auVar30);
          auVar31._0_8_ = CONCAT44(_LC3,_LC3);
          auVar31._8_4_ = _LC3;
          auVar31._12_4_ = _LC3;
          auVar39._8_4_ = _LC3;
          auVar39._0_8_ = auVar31._0_8_;
          auVar39._12_4_ = _LC3;
          local_70 = divps(auVar38,auVar35);
          auVar29._0_8_ = CONCAT44(_LC1,_LC1);
          auVar29._8_4_ = _LC1;
          auVar29._12_4_ = _LC1;
          auVar37._8_4_ = _LC1;
          auVar37._0_8_ = auVar29._0_8_;
          auVar37._12_4_ = _LC1;
          fVar41 = local_c0[lVar24];
          do {
            fVar3 = *(float *)(pauVar23[1] + lVar24 * 4);
            if (fVar2 < fVar41) {
              if (fVar41 < fVar2) {
                fVar25 = fVar3;
                if (((fVar41 < fVar2) || (fVar25 = fVar41, fVar3 < fVar2)) && (fVar2 < fVar25)) {
                  fVar25 = *(float *)*pauVar23;
                  fVar26 = *(float *)(*pauVar23 + 4);
                  fVar27 = *(float *)(*pauVar23 + 8);
                  fVar28 = *(float *)(*pauVar23 + 0xc);
                  goto LAB_00107d53;
                }
              }
              else {
                auVar30 = *pauVar23;
                fVar25 = auVar30._0_4_;
                fVar26 = auVar30._4_4_;
                fVar27 = auVar30._8_4_;
                fVar28 = auVar30._12_4_;
                auVar31 = minps(auVar31,auVar30);
                auVar29 = maxps(auVar29,auVar30);
                if (fVar3 < fVar2) {
LAB_00107d53:
                  fVar41 = (_LC30 / (fVar3 - fVar41)) * (fVar2 - fVar41);
                  fVar25 = fVar25 + (*(float *)pauVar23[1] - fVar25) * fVar41;
                  fVar26 = fVar26 + (*(float *)(pauVar23[1] + 4) - fVar26) * fVar41;
                  fVar27 = fVar27 + (*(float *)(pauVar23[1] + 8) - fVar27) * fVar41;
                  fVar28 = fVar28 + (*(float *)(pauVar23[1] + 0xc) - fVar28) * fVar41;
                  auVar10._4_4_ = fVar26;
                  auVar10._0_4_ = fVar25;
                  auVar10._8_4_ = fVar27;
                  auVar10._12_4_ = fVar28;
                  auVar39 = minps(auVar39,auVar10);
                  auVar11._4_4_ = fVar26;
                  auVar11._0_4_ = fVar25;
                  auVar11._8_4_ = fVar27;
                  auVar11._12_4_ = fVar28;
                  auVar37 = maxps(auVar37,auVar11);
                  goto LAB_00107d8c;
                }
              }
            }
            else {
              auVar30 = *pauVar23;
              fVar25 = auVar30._0_4_;
              fVar26 = auVar30._4_4_;
              fVar27 = auVar30._8_4_;
              fVar28 = auVar30._12_4_;
              auVar39 = minps(auVar39,auVar30);
              auVar37 = maxps(auVar37,auVar30);
              if (fVar2 != fVar41) {
                if (fVar2 < fVar3) goto LAB_00107d53;
                goto LAB_00107d92;
              }
LAB_00107d8c:
              auVar12._4_4_ = fVar26;
              auVar12._0_4_ = fVar25;
              auVar12._8_4_ = fVar27;
              auVar12._12_4_ = fVar28;
              auVar31 = minps(auVar31,auVar12);
              auVar13._4_4_ = fVar26;
              auVar13._0_4_ = fVar25;
              auVar13._8_4_ = fVar27;
              auVar13._12_4_ = fVar28;
              auVar29 = maxps(auVar29,auVar13);
            }
LAB_00107d92:
            pauVar23 = pauVar23 + 1;
            fVar41 = fVar3;
          } while ((undefined1 (*) [16])&local_90 != pauVar23);
          auVar40 = maxps(auVar39,*pauVar19);
          auVar38 = minps(auVar37,pauVar19[1]);
          auVar32 = maxps(auVar31,*pauVar19);
          auVar30 = minps(auVar29,pauVar19[1]);
          local_e0._0_4_ = auVar40._0_4_;
          uVar14 = local_e0._0_4_;
          local_e0._4_4_ = auVar40._4_4_;
          uVar15 = local_e0._4_4_;
          fStack_d8 = auVar40._8_4_;
          fVar41 = fStack_d8;
          local_e0._0_4_ = auVar38._0_4_;
          uVar16 = local_e0._0_4_;
          local_e0._4_4_ = auVar38._4_4_;
          uVar17 = local_e0._4_4_;
          fStack_d8 = auVar38._8_4_;
          fVar3 = fStack_d8;
          auVar33._4_4_ = -(uint)((float)uVar15 <= (float)local_e0._4_4_);
          auVar33._0_4_ = -(uint)((float)uVar14 <= (float)local_e0._0_4_);
          auVar33._8_4_ = -(uint)(fVar41 <= fStack_d8);
          auVar33._12_4_ = -(uint)(fVar5 <= fVar6);
          _local_110 = auVar32._0_12_;
          _local_e0 = _local_110;
          local_110._0_4_ = auVar32._0_4_;
          uVar14 = local_110._0_4_;
          local_110._4_4_ = auVar32._4_4_;
          uVar15 = local_110._4_4_;
          fStack_108 = auVar32._8_4_;
          fVar2 = fStack_108;
          uVar20 = movmskps(fVar5,auVar33);
          local_110._0_4_ = auVar30._0_4_;
          local_110._4_4_ = auVar30._4_4_;
          fStack_108 = auVar30._8_4_;
          if (((~uVar20 & 7) == 0) &&
             (auVar34._4_4_ = -(uint)((float)uVar15 <= (float)local_110._4_4_),
             auVar34._0_4_ = -(uint)((float)uVar14 <= (float)local_110._0_4_),
             auVar34._8_4_ = -(uint)(fVar2 <= fStack_108), auVar34._12_4_ = -(uint)(fVar5 <= fVar6),
             uVar20 = movmskps(0,auVar34), (~uVar20 & 7) == 0)) {
            uVar20 = (((uint)fVar5 >> 0x1b) - 1) * 0x8000000;
            puVar9 = *(ulong **)(this + 0x18);
            uStack_d4 = uVar20 | (uint)fVar5 & 0x7ffffff;
            LOCK();
            uVar4 = *puVar9;
            *puVar9 = *puVar9 + 1;
            UNLOCK();
            if (**(ulong **)(this + 0x20) <= uVar4) break;
            puVar21 = (undefined8 *)(uVar18 * 0x20 + **(long **)this);
            *puVar21 = auVar40._0_8_;
            puVar21[1] = CONCAT44((uint)fVar5 & 0x7ffffff | uVar20,fVar41);
            *(undefined4 *)(puVar21 + 2) = uVar16;
            *(undefined4 *)((long)puVar21 + 0x14) = uVar17;
            *(float *)(puVar21 + 3) = fVar3;
            *(float *)((long)puVar21 + 0x1c) = fVar6;
            pauVar19 = (undefined1 (*) [16])
                       ((uVar4 + **(long **)(this + 0x28)) * 0x20 + **(long **)this);
            *pauVar19 = _local_e0;
            *(undefined4 *)pauVar19[1] = local_110._0_4_;
            *(undefined4 *)(pauVar19[1] + 4) = local_110._4_4_;
            *(float *)(pauVar19[1] + 8) = fStack_108;
            *(float *)(pauVar19[1] + 0xc) = fVar6;
          }
        }
      }
      uVar18 = uVar18 + 1;
    } while (uVar18 < *(ulong *)(param_1 + 8));
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Geometry*, unsigned int, unsigned long,
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&) */

sse2 * __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
          (sse2 *this,Geometry *param_1,uint param_2,ulong param_3,vector_t *param_4,
          BuildProgressMonitor *param_5)

{
  ulong uVar1;
  ulong uVar2;
  undefined1 (*pauVar3) [16];
  undefined1 (*pauVar4) [16];
  long lVar5;
  long lVar6;
  long in_FS_OFFSET;
  undefined1 auVar7 [16];
  undefined1 auVar8 [16];
  undefined1 auVar9 [16];
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined4 uVar15;
  undefined4 uVar16;
  uint local_28d4;
  Geometry *local_28d0 [2];
  long local_28c0;
  ulong local_28b8;
  ulong local_28b0;
  undefined8 **local_28a8;
  long **local_28a0;
  Geometry **local_2898;
  vector_t *local_2890;
  uint *local_2888;
  long *local_2878;
  ulong *local_2870;
  ulong *local_2868;
  undefined1 (*local_2860) [16];
  Geometry ***local_2858;
  undefined1 local_2848 [10248];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_28d4 = param_2;
  local_28d0[0] = param_1;
  if ((code *)**(undefined8 **)param_5 == Scene::BuildProgressMonitorInterface::operator()) {
    embree::Scene::progressMonitor(0.0);
  }
  else {
    (*(code *)**(undefined8 **)param_5)(param_5,0);
  }
  local_28b8 = (ulong)*(uint *)(local_28d0[0] + 0x20);
  local_28c0 = 0;
  local_2898 = local_28d0;
  local_2890 = param_4;
  local_2888 = &local_28d4;
  uVar1 = embree::TaskScheduler::threadCount();
  uVar16 = _LC3;
  uVar15 = _LC1;
  uVar2 = (local_28b8 + 0x3ff) - local_28c0 >> 10;
  if (uVar1 < uVar2) {
    uVar2 = uVar1;
  }
  local_28b0 = 0x40;
  if (uVar2 < 0x41) {
    local_28b0 = uVar2;
  }
  local_2878 = &local_28c0;
  local_2870 = &local_28b8;
  local_2868 = &local_28b0;
  local_2860 = (undefined1 (*) [16])local_2848;
  local_2858 = &local_2898;
  if (uVar2 == 0) {
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined4 *)this = uVar16;
    *(undefined4 *)(this + 4) = uVar16;
    *(undefined4 *)(this + 8) = uVar16;
    *(undefined4 *)(this + 0xc) = uVar16;
    *(undefined4 *)(this + 0x10) = uVar15;
    *(undefined4 *)(this + 0x14) = uVar15;
    *(undefined4 *)(this + 0x18) = uVar15;
    *(undefined4 *)(this + 0x1c) = uVar15;
    *(undefined4 *)(this + 0x20) = uVar16;
    *(undefined4 *)(this + 0x24) = uVar16;
    *(undefined4 *)(this + 0x28) = uVar16;
    *(undefined4 *)(this + 0x2c) = uVar16;
    *(undefined4 *)(this + 0x30) = uVar15;
    *(undefined4 *)(this + 0x34) = uVar15;
    *(undefined4 *)(this + 0x38) = uVar15;
    *(undefined4 *)(this + 0x3c) = uVar15;
LAB_00108f7f:
    uVar2 = 0;
  }
  else {
    local_28a0 = &local_2878;
    local_28a8 = (long **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_19parallel_prefix_sumImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitINS_12TriangleMeshENS9_23TriangleSplitterFactoryEEES8_PNS_8GeometryEjmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISG_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKNS_5rangeImEERKS8_E_ZNSA_ISB_SC_EES8_SE_jmSK_SM_EUlSS_SS_E0_EET0_RNS_22ParallelPrefixSumStateISV_EET_SZ_SZ_RKSV_RKT1_RKT2_EUlmE_EEvSZ_S11_EUlSQ_E_EEvSZ_SZ_SZ_S11_PNS0_16TaskGroupContextE
              (0,local_28b0,1,&local_28a0,&local_28a8);
    embree::TaskScheduler::wait();
    uVar16 = _LC3;
    uVar15 = _LC1;
    if (local_28a8 != (long **)0x0) {
      local_28a0 = local_28a8;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_28a0);
    }
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined4 *)this = uVar16;
    *(undefined4 *)(this + 4) = uVar16;
    *(undefined4 *)(this + 8) = uVar16;
    *(undefined4 *)(this + 0xc) = uVar16;
    *(undefined4 *)(this + 0x10) = uVar15;
    *(undefined4 *)(this + 0x14) = uVar15;
    *(undefined4 *)(this + 0x18) = uVar15;
    *(undefined4 *)(this + 0x1c) = uVar15;
    *(undefined4 *)(this + 0x20) = uVar16;
    *(undefined4 *)(this + 0x24) = uVar16;
    *(undefined4 *)(this + 0x28) = uVar16;
    *(undefined4 *)(this + 0x2c) = uVar16;
    *(undefined4 *)(this + 0x30) = uVar15;
    *(undefined4 *)(this + 0x34) = uVar15;
    *(undefined4 *)(this + 0x38) = uVar15;
    *(undefined4 *)(this + 0x3c) = uVar15;
    if (local_28b0 == 0) goto LAB_00108f7f;
    lVar6 = 0;
    lVar5 = 0;
    auVar7._4_4_ = uVar15;
    auVar7._0_4_ = uVar15;
    auVar7._8_4_ = uVar15;
    auVar7._12_4_ = uVar15;
    auVar9._4_4_ = uVar16;
    auVar9._0_4_ = uVar16;
    auVar9._8_4_ = uVar16;
    auVar9._12_4_ = uVar16;
    auVar11._4_4_ = uVar15;
    auVar11._0_4_ = uVar15;
    auVar11._8_4_ = uVar15;
    auVar11._12_4_ = uVar15;
    auVar13._4_4_ = uVar16;
    auVar13._0_4_ = uVar16;
    auVar13._8_4_ = uVar16;
    auVar13._12_4_ = uVar16;
    pauVar3 = (undefined1 (*) [16])local_2848;
    do {
      *(long *)pauVar3[0x144] = lVar5;
      lVar5 = lVar5 + *(long *)pauVar3[4];
      pauVar4 = pauVar3 + 5;
      pauVar3[0x140] = auVar13;
      auVar13 = minps(auVar13,*pauVar3);
      pauVar3[0x141] = auVar11;
      auVar11 = maxps(auVar11,pauVar3[1]);
      pauVar3[0x142] = auVar9;
      auVar9 = minps(auVar9,pauVar3[2]);
      pauVar3[0x143] = auVar7;
      auVar7 = maxps(auVar7,pauVar3[3]);
      *(long *)(pauVar3[0x144] + 8) = lVar6;
      lVar6 = lVar6 + *(long *)(pauVar3[4] + 8);
      pauVar3 = pauVar4;
    } while ((undefined1 (*) [16])local_2848 + local_28b0 * 5 != pauVar4);
    *(long *)(this + 0x40) = lVar5;
    *(long *)(this + 0x48) = lVar6;
    uVar2 = lVar6 - lVar5;
    *(undefined1 (*) [16])this = auVar13;
    *(undefined1 (*) [16])(this + 0x10) = auVar11;
    *(undefined1 (*) [16])(this + 0x20) = auVar9;
    *(undefined1 (*) [16])(this + 0x30) = auVar7;
  }
  if (param_3 == uVar2) goto LAB_001091e3;
  if ((code *)**(undefined8 **)param_5 == Scene::BuildProgressMonitorInterface::operator()) {
    embree::Scene::progressMonitor(0.0);
  }
  else {
    (*(code *)**(undefined8 **)param_5)(param_5,0);
  }
  local_28b8 = (ulong)*(uint *)(local_28d0[0] + 0x20);
  local_28c0 = 0;
  local_2898 = local_28d0;
  local_2890 = param_4;
  local_2888 = &local_28d4;
  uVar1 = embree::TaskScheduler::threadCount();
  uVar2 = (local_28b8 + 0x3ff) - local_28c0 >> 10;
  if (uVar1 < uVar2) {
    uVar2 = uVar1;
  }
  local_28b0 = 0x40;
  if (uVar2 < 0x41) {
    local_28b0 = uVar2;
  }
  local_2878 = &local_28c0;
  local_2870 = &local_28b8;
  local_2868 = &local_28b0;
  local_2860 = (undefined1 (*) [16])local_2848;
  local_2858 = &local_2898;
  if (uVar2 == 0) {
LAB_001091b1:
    lVar5 = 0;
    auVar8._4_4_ = uVar15;
    auVar8._0_4_ = uVar15;
    auVar8._8_4_ = uVar15;
    auVar8._12_4_ = uVar15;
    auVar10._4_4_ = uVar16;
    auVar10._0_4_ = uVar16;
    auVar10._8_4_ = uVar16;
    auVar10._12_4_ = uVar16;
    lVar6 = 0;
    auVar12._4_4_ = uVar15;
    auVar12._0_4_ = uVar15;
    auVar12._8_4_ = uVar15;
    auVar12._12_4_ = uVar15;
    auVar14._4_4_ = uVar16;
    auVar14._0_4_ = uVar16;
    auVar14._8_4_ = uVar16;
    auVar14._12_4_ = uVar16;
  }
  else {
    local_28a0 = &local_2878;
    local_28a8 = (long **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_19parallel_prefix_sumImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitINS_12TriangleMeshENS9_23TriangleSplitterFactoryEEES8_PNS_8GeometryEjmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISG_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKNS_5rangeImEERKS8_E1_ZNSA_ISB_SC_EES8_SE_jmSK_SM_EUlSS_SS_E2_EET0_RNS_22ParallelPrefixSumStateISV_EET_SZ_SZ_RKSV_RKT1_RKT2_EUlmE_EEvSZ_S11_EUlSQ_E_EEvSZ_SZ_SZ_S11_PNS0_16TaskGroupContextE
              (0,local_28b0,1,&local_28a0,&local_28a8);
    embree::TaskScheduler::wait();
    auVar8._4_4_ = uVar15;
    auVar8._0_4_ = uVar15;
    auVar8._8_4_ = uVar15;
    auVar8._12_4_ = uVar15;
    auVar10._4_4_ = uVar16;
    auVar10._0_4_ = uVar16;
    auVar10._8_4_ = uVar16;
    auVar10._12_4_ = uVar16;
    if (local_28a8 != (long **)0x0) {
      local_28a0 = local_28a8;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_28a0);
    }
    if (local_28b0 == 0) goto LAB_001091b1;
    lVar5 = 0;
    lVar6 = 0;
    pauVar3 = (undefined1 (*) [16])local_2848;
    auVar12 = auVar8;
    auVar14 = auVar10;
    do {
      *(long *)pauVar3[0x144] = lVar6;
      lVar6 = lVar6 + *(long *)pauVar3[4];
      pauVar4 = pauVar3 + 5;
      pauVar3[0x140] = auVar14;
      auVar14 = minps(auVar14,*pauVar3);
      pauVar3[0x141] = auVar12;
      auVar12 = maxps(auVar12,pauVar3[1]);
      pauVar3[0x142] = auVar10;
      auVar10 = minps(auVar10,pauVar3[2]);
      pauVar3[0x143] = auVar8;
      auVar8 = maxps(auVar8,pauVar3[3]);
      *(long *)(pauVar3[0x144] + 8) = lVar5;
      lVar5 = lVar5 + *(long *)(pauVar3[4] + 8);
      pauVar3 = pauVar4;
    } while ((undefined1 (*) [16])local_2848 + local_28b0 * 5 != pauVar4);
  }
  *(long *)(this + 0x40) = lVar6;
  *(long *)(this + 0x48) = lVar5;
  *(undefined1 (*) [16])this = auVar14;
  *(undefined1 (*) [16])(this + 0x10) = auVar12;
  *(undefined1 (*) [16])(this + 0x20) = auVar10;
  *(undefined1 (*) [16])(this + 0x30) = auVar8;
LAB_001091e3:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* WARNING: Removing unreachable block (ram,0x001098b5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  char cVar15;
  long lVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar16 = embree::TaskScheduler::allocThreadIndex();
  pTVar17 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar17 = lVar16;
  pTVar20 = pTVar17 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar18 = pTVar18 + 0x40;
  } while (pTVar17 + 0x40040 != pTVar18);
  *(undefined8 *)(pTVar17 + 0x40040) = 0;
  *(undefined8 *)(pTVar17 + 0x40080) = 0;
  *(undefined8 *)(pTVar17 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar17 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar17 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar16 * 8) = pTVar17;
  UNLOCK();
  local_48 = pTVar17;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar17);
  if (*(ulong *)(pTVar17 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar17 + 0xc00c0);
    uVar3 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar17 + 0xc00c0) = uVar3;
      pTVar4 = pTVar17 + uVar3 + 0x40080;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      uVar13 = *(undefined8 *)(param_1 + 0x20);
      uVar14 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f4c0;
      uVar6 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      *(undefined8 *)(pTVar4 + 0x38) = uVar6;
      *(undefined8 *)(pTVar4 + 0x28) = uVar13;
      *(undefined8 *)(pTVar4 + 0x30) = uVar14;
      lVar19 = *(long *)(pTVar17 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar17 + 0xc0100);
      pTVar17[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar17 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar17 + lVar19 + 0x50) = pTVar4;
      *(long *)(pTVar17 + lVar19 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar17 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar17 + lVar19 + 0x68) = lVar5;
      *(ulong *)(pTVar17 + lVar19 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar17 + 0x40080) = *(long *)(pTVar17 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar17 + 0x40080) - 1U <= *(ulong *)(pTVar17 + 0x40040)) {
        LOCK();
        *(long *)(pTVar17 + 0x40040) = *(long *)(pTVar17 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar15 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar17);
      } while (cVar15 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar16 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar17 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar17 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar17);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar20;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_3_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___3_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_40 = *(undefined8 *)param_4;
  uStack_38 = *(undefined8 *)(param_4 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)(param_4 + 0x10);
  local_58 = param_2;
  uStack_50 = param_1;
  local_48 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_58,param_5,param_2 - param_1,true);
LAB_00109b67:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0012f4c0;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[7] = local_28;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = uStack_38;
      puVar3[6] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00109b67;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_al...mbree::range<unsigned_long>const&)#3}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_al___mbree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  long lVar1;
  float fVar2;
  ulong uVar3;
  int *piVar4;
  ulong uVar5;
  float *pfVar6;
  float fVar7;
  float fVar8;
  
  uVar5 = *(ulong *)(this + 8);
  uVar3 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < uVar5 - uVar3) {
    uVar5 = uVar5 + uVar3 >> 1;
    spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_3_>
              (uVar3,uVar5,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___3_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x38));
    spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_3_>
              (uVar5,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___3_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x38));
    embree::TaskScheduler::wait();
    return;
  }
  fVar8 = _LC30;
  if (uVar3 < uVar5) {
    do {
      while( true ) {
        lVar1 = uVar3 * 8;
        pfVar6 = (float *)(*(long *)(*(long *)(this + 0x20) + 0x18) + lVar1);
        if ((0.0 < *pfVar6) &&
           (fVar7 = (float)**(ulong **)(this + 0x28) * *pfVar6 * **(float **)(this + 0x30),
           fVar8 <= fVar7)) break;
        uVar3 = uVar3 + 1;
        *pfVar6 = 1.4013e-45;
        if (uVar5 == uVar3) {
          return;
        }
      }
      fVar7 = logf(fVar7);
      fVar8 = _LC30;
      fVar7 = fVar7 / __LC35;
      if ((float)((uint)fVar7 & _LC19) < _LC18) {
        fVar7 = (float)((uint)((float)(int)fVar7 +
                              (float)(-(uint)((float)(int)fVar7 < fVar7) & (uint)_LC30)) |
                       ~_LC19 & (uint)fVar7);
      }
      fVar2 = 7.00649e-45;
      if ((fVar7 < _LC36) && (fVar2 = 1.4013e-45, _LC30 <= fVar7)) {
        fVar2 = (float)(long)fVar7;
      }
      *pfVar6 = fVar2;
      uVar3 = uVar3 + 1;
      piVar4 = (int *)(lVar1 + *(long *)(*(long *)(this + 0x20) + 0x18));
      *piVar4 = 1 << ((byte)*piVar4 & 0x1f);
    } while (uVar5 != uVar3);
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x0010a16d) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_7_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  char cVar17;
  long lVar18;
  Thread *pTVar19;
  Thread *pTVar20;
  long lVar21;
  Thread *pTVar22;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar18 = embree::TaskScheduler::allocThreadIndex();
  pTVar19 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar19 = lVar18;
  pTVar22 = pTVar19 + 0x40;
  pTVar20 = pTVar22;
  do {
    *(undefined4 *)pTVar20 = 0;
    pTVar20 = pTVar20 + 0x40;
  } while (pTVar19 + 0x40040 != pTVar20);
  *(undefined8 *)(pTVar19 + 0x40040) = 0;
  *(undefined8 *)(pTVar19 + 0x40080) = 0;
  *(undefined8 *)(pTVar19 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar19 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar19 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar18 * 8) = pTVar19;
  UNLOCK();
  local_48 = pTVar19;
  pTVar20 = (Thread *)embree::TaskScheduler::swapThread(pTVar19);
  if (*(ulong *)(pTVar19 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar19 + 0xc00c0);
    uVar3 = lVar5 + 0x60 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar19 + 0xc00c0) = uVar3;
      pTVar4 = pTVar19 + uVar3 + 0x40060;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      uVar13 = *(undefined8 *)(param_1 + 0x20);
      uVar14 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f4d8;
      uVar6 = *(undefined8 *)(param_1 + 0x50);
      uVar15 = *(undefined8 *)(param_1 + 0x30);
      uVar16 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      uVar9 = *(undefined8 *)(param_1 + 0x40);
      uVar10 = *(undefined8 *)(param_1 + 0x48);
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      *(undefined8 *)(pTVar4 + 0x58) = uVar6;
      *(undefined8 *)(pTVar4 + 0x28) = uVar13;
      *(undefined8 *)(pTVar4 + 0x30) = uVar14;
      *(undefined8 *)(pTVar4 + 0x38) = uVar15;
      *(undefined8 *)(pTVar4 + 0x40) = uVar16;
      *(undefined8 *)(pTVar4 + 0x48) = uVar9;
      *(undefined8 *)(pTVar4 + 0x50) = uVar10;
      lVar21 = *(long *)(pTVar19 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar19 + 0xc0100);
      pTVar19[lVar21 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar19 + lVar21 + 0x44) = 1;
      *(Thread **)(pTVar19 + lVar21 + 0x50) = pTVar4;
      *(long *)(pTVar19 + lVar21 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar19 + lVar21 + 0x60) = param_2;
      *(long *)(pTVar19 + lVar21 + 0x68) = lVar5;
      *(ulong *)(pTVar19 + lVar21 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar22 + lVar21) == 0) {
        *(undefined4 *)(pTVar22 + lVar21) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar19 + 0x40080) = *(long *)(pTVar19 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar19 + 0x40080) - 1U <= *(ulong *)(pTVar19 + 0x40040)) {
        LOCK();
        *(long *)(pTVar19 + 0x40040) = *(long *)(pTVar19 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar17 = embree::TaskScheduler::TaskQueue::execute_local(pTVar22,(Task *)pTVar19);
      } while (cVar17 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar18 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar20);
      pTVar22 = *(Thread **)param_2;
      if (pTVar22 != (Thread *)0x0) {
        local_48 = pTVar22;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar22 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar22 == (Thread *)0x0) {
        if (pTVar19 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar19 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar19);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar22;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_7_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___7_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  undefined8 uStack_60;
  undefined8 uStack_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 local_40;
  undefined8 uStack_38;
  undefined8 local_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_60 = *(undefined8 *)param_4;
  uStack_58 = *(undefined8 *)(param_4 + 8);
  uStack_50 = *(undefined8 *)(param_4 + 0x10);
  uStack_48 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_40 = *(undefined8 *)(param_4 + 0x20);
  uStack_38 = *(undefined8 *)(param_4 + 0x28);
  local_30 = *(undefined8 *)(param_4 + 0x30);
  local_78 = param_2;
  uStack_70 = param_1;
  local_68 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_7_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_78,param_5,param_2 - param_1,true);
LAB_0010a43f:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x60 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40060 + uVar2);
      *puVar3 = &PTR_execute_0012f4d8;
      puVar3[1] = local_78;
      puVar3[2] = uStack_70;
      puVar3[3] = local_68;
      puVar3[4] = uStack_60;
      puVar3[0xb] = local_28;
      puVar3[5] = uStack_58;
      puVar3[6] = uStack_50;
      puVar3[7] = uStack_48;
      puVar3[8] = local_40;
      puVar3[9] = uStack_38;
      puVar3[10] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010a43f;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_al...mbree::range<unsigned_long>const&)#7}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_al___mbree::range<unsigned_long>const&)_7_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  ulong local_38;
  long local_30;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  lVar1 = *(long *)(this + 8);
  uVar2 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < lVar1 - uVar2) {
    uVar3 = lVar1 + uVar2 >> 1;
    spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_7_>
              (uVar2,uVar3,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___7_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x58));
    spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_7_>
              (uVar3,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___7_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x58));
    if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    local_38 = uVar2;
    local_30 = lVar1;
    sse2::
    createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
    ::{lambda(embree::range<unsigned_long>const&)#7}::operator()
              ((_lambda_embree__range<unsigned_long>const___7_ *)(this + 0x20),(range *)&local_38);
    if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0010a93d) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  char cVar16;
  long lVar17;
  Thread *pTVar18;
  Thread *pTVar19;
  long lVar20;
  Thread *pTVar21;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar17 = embree::TaskScheduler::allocThreadIndex();
  pTVar18 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar18 = lVar17;
  pTVar21 = pTVar18 + 0x40;
  pTVar19 = pTVar21;
  do {
    *(undefined4 *)pTVar19 = 0;
    pTVar19 = pTVar19 + 0x40;
  } while (pTVar18 + 0x40040 != pTVar19);
  *(undefined8 *)(pTVar18 + 0x40040) = 0;
  *(undefined8 *)(pTVar18 + 0x40080) = 0;
  *(undefined8 *)(pTVar18 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar18 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar18 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar17 * 8) = pTVar18;
  UNLOCK();
  local_48 = pTVar18;
  pTVar19 = (Thread *)embree::TaskScheduler::swapThread(pTVar18);
  if (*(ulong *)(pTVar18 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar18 + 0xc00c0);
    uVar3 = lVar5 + 0x48 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar18 + 0xc00c0) = uVar3;
      pTVar4 = pTVar18 + uVar3 + 0x40078;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f4f0;
      uVar14 = *(undefined8 *)(param_1 + 0x30);
      uVar15 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(pTVar4 + 8) = uVar8;
      *(undefined8 *)(pTVar4 + 0x10) = uVar9;
      *(undefined8 *)(pTVar4 + 0x18) = uVar10;
      *(undefined8 *)(pTVar4 + 0x20) = uVar11;
      *(undefined8 *)(pTVar4 + 0x28) = uVar12;
      *(undefined8 *)(pTVar4 + 0x30) = uVar13;
      *(undefined8 *)(pTVar4 + 0x38) = uVar14;
      *(undefined8 *)(pTVar4 + 0x40) = uVar15;
      lVar20 = *(long *)(pTVar18 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar18 + 0xc0100);
      pTVar18[lVar20 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar18 + lVar20 + 0x44) = 1;
      *(Thread **)(pTVar18 + lVar20 + 0x50) = pTVar4;
      *(long *)(pTVar18 + lVar20 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar18 + lVar20 + 0x60) = param_2;
      *(long *)(pTVar18 + lVar20 + 0x68) = lVar5;
      *(ulong *)(pTVar18 + lVar20 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar21 + lVar20) == 0) {
        *(undefined4 *)(pTVar21 + lVar20) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar18 + 0x40080) = *(long *)(pTVar18 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar18 + 0x40080) - 1U <= *(ulong *)(pTVar18 + 0x40040)) {
        LOCK();
        *(long *)(pTVar18 + 0x40040) = *(long *)(pTVar18 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar16 = embree::TaskScheduler::TaskQueue::execute_local(pTVar21,(Task *)pTVar18);
      } while (cVar16 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar17 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar19);
      pTVar21 = *(Thread **)param_2;
      if (pTVar21 != (Thread *)0x0) {
        local_48 = pTVar21;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar21 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar21 == (Thread *)0x0) {
        if (pTVar18 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar18 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar18);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar21;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___2_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  TaskGroupContext *local_30;
  long local_20;
  
  uStack_50 = *(undefined8 *)param_4;
  uStack_48 = *(undefined8 *)(param_4 + 8);
  uStack_40 = *(undefined8 *)(param_4 + 0x10);
  uStack_38 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_68 = param_2;
  uStack_60 = param_1;
  local_58 = param_3;
  local_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_68,param_5,param_2 - param_1,true);
LAB_0010abe9:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x48 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40078 + uVar2);
      *puVar3 = &PTR_execute_0012f4f0;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      puVar3[7] = uStack_38;
      puVar3[8] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010abe9;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  uint uVar1;
  uint uVar2;
  float fVar3;
  int iVar4;
  float *pfVar5;
  ulong uVar6;
  ulong uVar7;
  float fVar8;
  
  fVar3 = _LC18;
  uVar2 = _LC30;
  uVar1 = _LC20;
  uVar6 = *(ulong *)(this + 8);
  uVar7 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < uVar6 - uVar7) {
    uVar6 = uVar6 + uVar7 >> 1;
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (uVar7,uVar6,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___2_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x40));
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (uVar6,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___2_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x40));
    embree::TaskScheduler::wait();
    return;
  }
  if (uVar7 < uVar6) {
    do {
      pfVar5 = (float *)(uVar7 * 0x20 + **(long **)(this + 0x20));
      fVar8 = (pfVar5[4] - *pfVar5) * ((pfVar5[5] - pfVar5[1]) + (pfVar5[6] - pfVar5[2])) +
              (pfVar5[5] - pfVar5[1]) * (pfVar5[6] - pfVar5[2]);
      fVar8 = (float)(ulong)(*(long *)(*(long *)(this + 0x30) + 0x48) -
                            *(long *)(*(long *)(this + 0x30) + 0x40)) * **(float **)(this + 0x28) *
              (fVar8 + fVar8) * **(float **)(this + 0x38);
      if ((float)((uint)fVar8 & uVar1) < fVar3) {
        fVar8 = (float)((uint)((float)(int)fVar8 +
                              (float)(-(uint)((float)(int)fVar8 < fVar8) & uVar2)) |
                       ~uVar1 & (uint)fVar8);
      }
      iVar4 = (int)fVar8;
      if (iVar4 < 1) {
        iVar4 = 1;
      }
      if (0x1b < iVar4) {
        iVar4 = 0x1b;
      }
      uVar7 = uVar7 + 1;
      pfVar5[3] = (float)((uint)pfVar5[3] | (iVar4 + 4) * 0x8000000);
    } while (uVar6 != uVar7);
  }
  return;
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(embree::range<unsigned long>
   const&)#1}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

_lambda_embree__range<unsigned_long>const___1_ * __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)
::{lambda(embree::range<unsigned_long>const&)#1}::operator()
          (_lambda_embree__range<unsigned_long>const___1_ *this,range *param_1)

{
  undefined1 auVar1 [16];
  int *piVar2;
  ulong uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  float fVar6;
  uint uVar7;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var8;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var9;
  long lVar10;
  long *in_RDX;
  undefined1 (*pauVar11) [16];
  ulong uVar12;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var13;
  ulong uVar14;
  ulong uVar15;
  undefined1 (*pauVar16) [16];
  bool bVar17;
  uint uVar18;
  uint uVar19;
  uint uVar20;
  uint uVar21;
  uint uVar25;
  uint uVar26;
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  undefined1 auVar27 [16];
  uint uVar28;
  uint uVar29;
  
  uVar5 = _LC3;
  uVar4 = _LC1;
  p_Var9 = this;
  p_Var13 = this + 0xc00;
  do {
    *(undefined4 *)(p_Var9 + 0x40) = uVar5;
    *(undefined4 *)(p_Var9 + 0x44) = uVar5;
    *(undefined4 *)(p_Var9 + 0x48) = uVar5;
    *(undefined4 *)(p_Var9 + 0x4c) = uVar5;
    p_Var8 = p_Var9 + 0x60;
    *(undefined4 *)(p_Var9 + 0x50) = uVar4;
    *(undefined4 *)(p_Var9 + 0x54) = uVar4;
    *(undefined4 *)(p_Var9 + 0x58) = uVar4;
    *(undefined4 *)(p_Var9 + 0x5c) = uVar4;
    *(undefined4 *)(p_Var9 + 0x20) = uVar5;
    *(undefined4 *)(p_Var9 + 0x24) = uVar5;
    *(undefined4 *)(p_Var9 + 0x28) = uVar5;
    *(undefined4 *)(p_Var9 + 0x2c) = uVar5;
    *(undefined4 *)(p_Var9 + 0x30) = uVar4;
    *(undefined4 *)(p_Var9 + 0x34) = uVar4;
    *(undefined4 *)(p_Var9 + 0x38) = uVar4;
    *(undefined4 *)(p_Var9 + 0x3c) = uVar4;
    *(undefined4 *)p_Var9 = uVar5;
    *(undefined4 *)(p_Var9 + 4) = uVar5;
    *(undefined4 *)(p_Var9 + 8) = uVar5;
    *(undefined4 *)(p_Var9 + 0xc) = uVar5;
    *(undefined4 *)(p_Var9 + 0x10) = uVar4;
    *(undefined4 *)(p_Var9 + 0x14) = uVar4;
    *(undefined4 *)(p_Var9 + 0x18) = uVar4;
    *(undefined4 *)(p_Var9 + 0x1c) = uVar4;
    *(undefined1 (*) [16])p_Var13 = (undefined1  [16])0x0;
    fVar6 = _LC12;
    p_Var9 = p_Var8;
    p_Var13 = p_Var13 + 0x10;
  } while (this + 0xc00 != p_Var8);
  piVar2 = *(int **)(param_1 + 8);
  pauVar16 = (undefined1 (*) [16])(*in_RDX * 0x20 + **(long **)param_1);
  uVar15 = in_RDX[1] - *in_RDX;
  if (uVar15 == 0) {
    return this;
  }
  if (uVar15 != 1) {
    pauVar11 = pauVar16;
    do {
      auVar23 = pauVar11[1];
      auVar22 = *pauVar11;
      auVar24 = pauVar11[3];
      auVar1 = pauVar11[2];
      uVar7 = *piVar2 - 1;
      uVar18 = (uint)(((auVar23._0_4_ + auVar22._0_4_) - (float)piVar2[4]) * (float)piVar2[8] +
                     fVar6);
      uVar19 = (uint)(((auVar23._4_4_ + auVar22._4_4_) - (float)piVar2[5]) * (float)piVar2[9] +
                     fVar6);
      uVar20 = (uint)(((auVar23._8_4_ + auVar22._8_4_) - (float)piVar2[6]) * (float)piVar2[10] +
                     fVar6);
      uVar21 = -(uint)((int)uVar18 < (int)uVar7);
      uVar25 = -(uint)((int)uVar19 < (int)uVar7);
      uVar26 = -(uint)((int)uVar20 < (int)uVar7);
      uVar18 = uVar18 & uVar21 | ~uVar21 & uVar7;
      uVar19 = uVar19 & uVar25 | ~uVar25 & uVar7;
      uVar21 = uVar20 & uVar26 | ~uVar26 & uVar7;
      uVar12 = (ulong)(~-(uint)((int)uVar18 < 0) & uVar18);
      p_Var9 = this + uVar12 * 0x60;
      uVar18 = (uint)(((auVar24._0_4_ + auVar1._0_4_) - (float)piVar2[4]) * (float)piVar2[8] + fVar6
                     );
      uVar20 = (uint)(((auVar24._4_4_ + auVar1._4_4_) - (float)piVar2[5]) * (float)piVar2[9] + fVar6
                     );
      uVar25 = (uint)(((auVar24._8_4_ + auVar1._8_4_) - (float)piVar2[6]) * (float)piVar2[10] +
                     fVar6);
      uVar26 = -(uint)((int)uVar18 < (int)uVar7);
      uVar28 = -(uint)((int)uVar20 < (int)uVar7);
      uVar29 = -(uint)((int)uVar25 < (int)uVar7);
      uVar18 = uVar26 & uVar18 | ~uVar26 & uVar7;
      uVar20 = uVar28 & uVar20 | ~uVar28 & uVar7;
      uVar7 = uVar29 & uVar25 | ~uVar29 & uVar7;
      auVar27 = minps(*(undefined1 (*) [16])p_Var9,auVar22);
      *(undefined1 (*) [16])p_Var9 = auVar27;
      auVar27 = maxps(*(undefined1 (*) [16])(p_Var9 + 0x10),auVar23);
      *(undefined1 (*) [16])(p_Var9 + 0x10) = auVar27;
      uVar14 = (ulong)(~-(uint)((int)uVar19 < 0) & uVar19);
      p_Var9 = this + uVar14 * 0x60 + 0x20;
      auVar27 = minps(*(undefined1 (*) [16])p_Var9,auVar22);
      *(undefined1 (*) [16])p_Var9 = auVar27;
      auVar27 = maxps(*(undefined1 (*) [16])(p_Var9 + 0x10),auVar23);
      *(undefined1 (*) [16])(p_Var9 + 0x10) = auVar27;
      uVar3 = (ulong)(~-(uint)((int)uVar21 < 0) & uVar21);
      p_Var9 = this + uVar3 * 0x60 + 0x40;
      auVar22 = minps(*(undefined1 (*) [16])p_Var9,auVar22);
      *(undefined1 (*) [16])p_Var9 = auVar22;
      auVar23 = maxps(*(undefined1 (*) [16])(p_Var9 + 0x10),auVar23);
      *(undefined1 (*) [16])(p_Var9 + 0x10) = auVar23;
      *(int *)(this + uVar12 * 0x10 + 0xc00) = *(int *)(this + uVar12 * 0x10 + 0xc00) + 1;
      uVar12 = (ulong)(~-(uint)((int)uVar18 < 0) & uVar18);
      *(int *)(this + uVar14 * 0x10 + 0xc04) = *(int *)(this + uVar14 * 0x10 + 0xc04) + 1;
      *(int *)(this + uVar3 * 0x10 + 0xc08) = *(int *)(this + uVar3 * 0x10 + 0xc08) + 1;
      p_Var9 = this + uVar12 * 0x60;
      auVar23 = minps(*(undefined1 (*) [16])p_Var9,auVar1);
      *(undefined1 (*) [16])p_Var9 = auVar23;
      auVar23 = maxps(*(undefined1 (*) [16])(p_Var9 + 0x10),auVar24);
      *(undefined1 (*) [16])(p_Var9 + 0x10) = auVar23;
      uVar14 = (ulong)(~-(uint)((int)uVar20 < 0) & uVar20);
      p_Var9 = this + uVar14 * 0x60 + 0x20;
      auVar23 = minps(*(undefined1 (*) [16])p_Var9,auVar1);
      *(undefined1 (*) [16])p_Var9 = auVar23;
      auVar23 = maxps(*(undefined1 (*) [16])(p_Var9 + 0x10),auVar24);
      *(undefined1 (*) [16])(p_Var9 + 0x10) = auVar23;
      uVar3 = (ulong)(~-(uint)((int)uVar7 < 0) & uVar7);
      p_Var9 = this + uVar3 * 0x60 + 0x40;
      auVar23 = minps(*(undefined1 (*) [16])p_Var9,auVar1);
      *(undefined1 (*) [16])p_Var9 = auVar23;
      auVar23 = maxps(*(undefined1 (*) [16])(p_Var9 + 0x10),auVar24);
      *(undefined1 (*) [16])(p_Var9 + 0x10) = auVar23;
      *(int *)(this + uVar12 * 0x10 + 0xc00) = *(int *)(this + uVar12 * 0x10 + 0xc00) + 1;
      *(int *)(this + uVar14 * 0x10 + 0xc04) = *(int *)(this + uVar14 * 0x10 + 0xc04) + 1;
      *(int *)(this + uVar3 * 0x10 + 0xc08) = *(int *)(this + uVar3 * 0x10 + 0xc08) + 1;
      bVar17 = pauVar16 + (uVar15 - 2 >> 1) * 4 != pauVar11;
      pauVar11 = pauVar11 + 4;
    } while (bVar17);
    uVar14 = (uVar15 - 2 & 0xfffffffffffffffe) + 2;
    if (uVar15 <= uVar14) {
      return this;
    }
    pauVar16 = pauVar16 + uVar14 * 2;
  }
  auVar23 = pauVar16[1];
  auVar22 = *pauVar16;
  uVar7 = (int)*(undefined8 *)piVar2 - 1;
  uVar18 = (uint)(((auVar23._0_4_ + auVar22._0_4_) - (float)piVar2[4]) * (float)piVar2[8] + fVar6);
  uVar19 = (uint)(((auVar23._4_4_ + auVar22._4_4_) - (float)piVar2[5]) * (float)piVar2[9] + fVar6);
  uVar20 = (uint)(((auVar23._8_4_ + auVar22._8_4_) - (float)piVar2[6]) * (float)piVar2[10] + fVar6);
  uVar21 = -(uint)((int)uVar18 < (int)uVar7);
  uVar25 = -(uint)((int)uVar19 < (int)uVar7);
  uVar26 = -(uint)((int)uVar20 < (int)uVar7);
  uVar18 = uVar21 & uVar18 | ~uVar21 & uVar7;
  uVar19 = uVar25 & uVar19 | ~uVar25 & uVar7;
  uVar7 = uVar26 & uVar20 | ~uVar26 & uVar7;
  lVar10 = (long)(int)(~-(uint)((int)uVar18 < 0) & uVar18);
  p_Var9 = this + lVar10 * 0x60;
  *(int *)(this + lVar10 * 0x10 + 0xc00) = *(int *)(this + lVar10 * 0x10 + 0xc00) + 1;
  auVar24 = minps(*(undefined1 (*) [16])p_Var9,auVar22);
  *(undefined1 (*) [16])p_Var9 = auVar24;
  auVar24 = maxps(*(undefined1 (*) [16])(p_Var9 + 0x10),auVar23);
  *(undefined1 (*) [16])(p_Var9 + 0x10) = auVar24;
  lVar10 = (long)(int)(~-(uint)((int)uVar19 < 0) & uVar19);
  p_Var9 = this + lVar10 * 0x60 + 0x20;
  *(int *)(this + lVar10 * 0x10 + 0xc04) = *(int *)(this + lVar10 * 0x10 + 0xc04) + 1;
  auVar24 = minps(*(undefined1 (*) [16])p_Var9,auVar22);
  *(undefined1 (*) [16])p_Var9 = auVar24;
  auVar24 = maxps(*(undefined1 (*) [16])(p_Var9 + 0x10),auVar23);
  *(undefined1 (*) [16])(p_Var9 + 0x10) = auVar24;
  lVar10 = (long)(int)(~-(uint)((int)uVar7 < 0) & uVar7);
  p_Var9 = this + lVar10 * 0x60 + 0x40;
  *(int *)(this + lVar10 * 0x10 + 0xc08) = *(int *)(this + lVar10 * 0x10 + 0xc08) + 1;
  auVar22 = minps(*(undefined1 (*) [16])p_Var9,auVar22);
  *(undefined1 (*) [16])p_Var9 = auVar22;
  auVar23 = maxps(*(undefined1 (*) [16])(p_Var9 + 0x10),auVar23);
  *(undefined1 (*) [16])(p_Var9 + 0x10) = auVar23;
  return this;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long>
   const&)#1}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

_lambda_embree__range<unsigned_long>const___1_ * __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::
{lambda(embree::range<unsigned_long>const&)#1}::operator()
          (_lambda_embree__range<unsigned_long>const___1_ *this,range *param_1)

{
  float *pfVar1;
  ulong uVar2;
  undefined1 (*pauVar3) [16];
  long *plVar4;
  long lVar5;
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  undefined1 auVar8 [16];
  undefined4 uVar9;
  undefined4 uVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var15;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var16;
  ulong uVar17;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var18;
  ulong *in_RDX;
  long lVar19;
  long lVar20;
  undefined1 (*pauVar21) [16];
  ulong uVar22;
  ulong uVar23;
  ulong uVar24;
  ulong uVar25;
  undefined1 (*pauVar26) [16];
  uint *puVar27;
  uint uVar28;
  undefined1 (*pauVar29) [16];
  long in_FS_OFFSET;
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  uint uVar41;
  uint uVar42;
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  uint uVar43;
  uint uVar44;
  uint uVar48;
  uint uVar49;
  undefined1 auVar45 [16];
  undefined1 auVar46 [16];
  undefined1 auVar47 [16];
  uint uVar50;
  float fVar51;
  undefined1 auVar52 [16];
  undefined1 auVar53 [16];
  undefined1 auVar54 [16];
  undefined1 auVar55 [16];
  undefined1 auVar56 [16];
  float fVar57;
  float fVar58;
  float fVar59;
  undefined1 auVar60 [16];
  undefined4 uVar61;
  undefined4 uVar63;
  undefined4 uVar64;
  undefined4 uVar65;
  undefined1 auVar62 [16];
  float fVar66;
  float fVar67;
  float fVar68;
  float fVar69;
  undefined1 local_f8 [16];
  undefined1 local_e8 [16];
  undefined1 local_d8 [16];
  undefined1 local_c8 [16];
  float local_b8 [12];
  float local_88;
  float fStack_84;
  float fStack_80;
  float fStack_7c;
  undefined1 local_78 [16];
  undefined1 local_68 [16];
  undefined1 local_58 [16];
  long local_40;
  
  uVar10 = _LC3;
  uVar9 = _LC1;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  p_Var16 = this;
  p_Var18 = this + 0x600;
  do {
    *(undefined4 *)(p_Var16 + 0x40) = uVar10;
    *(undefined4 *)(p_Var16 + 0x44) = uVar10;
    *(undefined4 *)(p_Var16 + 0x48) = uVar10;
    *(undefined4 *)(p_Var16 + 0x4c) = uVar10;
    p_Var15 = p_Var16 + 0x60;
    *(undefined4 *)(p_Var16 + 0x50) = uVar9;
    *(undefined4 *)(p_Var16 + 0x54) = uVar9;
    *(undefined4 *)(p_Var16 + 0x58) = uVar9;
    *(undefined4 *)(p_Var16 + 0x5c) = uVar9;
    *(undefined4 *)(p_Var16 + 0x20) = uVar10;
    *(undefined4 *)(p_Var16 + 0x24) = uVar10;
    *(undefined4 *)(p_Var16 + 0x28) = uVar10;
    *(undefined4 *)(p_Var16 + 0x2c) = uVar10;
    *(undefined4 *)(p_Var16 + 0x30) = uVar9;
    *(undefined4 *)(p_Var16 + 0x34) = uVar9;
    *(undefined4 *)(p_Var16 + 0x38) = uVar9;
    *(undefined4 *)(p_Var16 + 0x3c) = uVar9;
    *(undefined4 *)p_Var16 = uVar10;
    *(undefined4 *)(p_Var16 + 4) = uVar10;
    *(undefined4 *)(p_Var16 + 8) = uVar10;
    *(undefined4 *)(p_Var16 + 0xc) = uVar10;
    *(undefined4 *)(p_Var16 + 0x10) = uVar9;
    *(undefined4 *)(p_Var16 + 0x14) = uVar9;
    *(undefined4 *)(p_Var16 + 0x18) = uVar9;
    *(undefined4 *)(p_Var16 + 0x1c) = uVar9;
    *(undefined1 (*) [16])(p_Var18 + 0x100) = (undefined1  [16])0x0;
    *(undefined1 (*) [16])p_Var18 = (undefined1  [16])0x0;
    uVar14 = _UNK_0012fbec;
    uVar13 = _UNK_0012fbe8;
    uVar12 = _UNK_0012fbe4;
    uVar11 = __LC24;
    p_Var16 = p_Var15;
    p_Var18 = p_Var18 + 0x10;
  } while (this + 0x600 != p_Var15);
  uVar2 = in_RDX[1];
  pauVar3 = *(undefined1 (**) [16])(param_1 + 8);
  plVar4 = (long *)(*(long **)param_1)[1];
  lVar5 = **(long **)param_1;
  if (*in_RDX < uVar2) {
    pauVar26 = (undefined1 (*) [16])(*in_RDX * 0x20 + lVar5);
    do {
      auVar31 = pauVar26[1];
      auVar30 = *pauVar26;
      auVar56 = *pauVar3;
      auVar54 = pauVar3[1];
      fVar51 = auVar56._0_4_;
      fVar57 = auVar56._4_4_;
      fVar58 = auVar56._8_4_;
      fVar59 = auVar56._12_4_;
      fVar66 = auVar54._0_4_;
      fVar67 = auVar54._4_4_;
      fVar68 = auVar54._8_4_;
      fVar69 = auVar54._12_4_;
      if (*(uint *)(*pauVar26 + 0xc) < 0x10000000) {
        lVar19 = 0;
        uVar28 = (uint)(((auVar31._0_4_ + auVar30._0_4_) * _LC22 - fVar51) * fVar66 + _LC12);
        uVar41 = (uint)(((auVar31._4_4_ + auVar30._4_4_) * _LC22 - fVar57) * fVar67 + _UNK_0012fb94)
        ;
        uVar42 = (uint)(((auVar31._8_4_ + auVar30._8_4_) * _LC22 - fVar58) * fVar68 + _UNK_0012fb98)
        ;
        uVar43 = (uint)(((auVar31._12_4_ + auVar30._12_4_) * _LC22 - fVar59) * fVar69 +
                       _UNK_0012fb9c);
        uVar44 = -(uint)((int)uVar28 < (int)uVar11);
        uVar48 = -(uint)((int)uVar41 < (int)uVar12);
        uVar49 = -(uint)((int)uVar42 < (int)uVar13);
        uVar50 = -(uint)((int)uVar43 < (int)uVar14);
        uVar28 = uVar28 & uVar44 | ~uVar44 & __LC24;
        uVar41 = uVar41 & uVar48 | ~uVar48 & _UNK_0012fbe4;
        uVar42 = uVar42 & uVar49 | ~uVar49 & _UNK_0012fbe8;
        uVar43 = uVar43 & uVar50 | ~uVar50 & _UNK_0012fbec;
        local_b8[0] = (float)(~-(uint)((int)uVar28 < 0) & uVar28);
        local_b8[1] = (float)(~-(uint)((int)uVar41 < 0) & uVar41);
        local_b8[2] = (float)(~-(uint)((int)uVar42 < 0) & uVar42);
        local_b8[3] = (float)(~-(uint)((int)uVar43 < 0) & uVar43);
        while( true ) {
          fVar66 = local_b8[lVar19];
          lVar20 = lVar19 + (long)(int)fVar66 * 4;
          *(int *)(this + lVar20 * 4 + 0x600) = *(int *)(this + lVar20 * 4 + 0x600) + 1;
          *(int *)(this + lVar20 * 4 + 0x700) = *(int *)(this + lVar20 * 4 + 0x700) + 1;
          lVar20 = (long)(int)fVar66 * 3 + lVar19;
          lVar19 = lVar19 + 1;
          p_Var16 = this + lVar20 * 0x20;
          auVar30 = minps(*(undefined1 (*) [16])p_Var16,auVar30);
          auVar31 = maxps(*(undefined1 (*) [16])(p_Var16 + 0x10),auVar31);
          *(undefined1 (*) [16])p_Var16 = auVar30;
          *(undefined1 (*) [16])(p_Var16 + 0x10) = auVar31;
          if (lVar19 == 3) break;
          auVar31 = pauVar26[1];
          auVar30 = *pauVar26;
        }
      }
      else {
        lVar19 = 0;
        auVar56._0_4_ = (int)((auVar30._0_4_ - fVar51) * fVar66 + _LC12);
        auVar56._4_4_ = (int)((auVar30._4_4_ - fVar57) * fVar67 + _UNK_0012fb94);
        auVar56._8_4_ = (int)((auVar30._8_4_ - fVar58) * fVar68 + _UNK_0012fb98);
        auVar56._12_4_ = (int)((auVar30._12_4_ - fVar59) * fVar69 + _UNK_0012fb9c);
        auVar38._0_4_ = -(uint)(auVar56._0_4_ < (int)uVar11);
        auVar38._4_4_ = -(uint)(auVar56._4_4_ < (int)uVar12);
        auVar38._8_4_ = -(uint)(auVar56._8_4_ < (int)uVar13);
        auVar38._12_4_ = -(uint)(auVar56._12_4_ < (int)uVar14);
        auVar30._4_4_ = _UNK_0012fbe4;
        auVar30._0_4_ = __LC24;
        auVar30._8_4_ = _UNK_0012fbe8;
        auVar30._12_4_ = _UNK_0012fbec;
        auVar30 = auVar56 & auVar38 | ~auVar38 & auVar30;
        auVar39._0_4_ = -(uint)(auVar30._0_4_ < 0);
        auVar39._4_4_ = -(uint)(auVar30._4_4_ < 0);
        auVar39._8_4_ = -(uint)(auVar30._8_4_ < 0);
        auVar39._12_4_ = -(uint)(auVar30._12_4_ < 0);
        local_d8 = ~auVar39 & auVar30;
        auVar54._0_4_ = (int)((auVar31._0_4_ - fVar51) * fVar66 + _LC12);
        auVar54._4_4_ = (int)((auVar31._4_4_ - fVar57) * fVar67 + _UNK_0012fb94);
        auVar54._8_4_ = (int)((auVar31._8_4_ - fVar58) * fVar68 + _UNK_0012fb98);
        auVar54._12_4_ = (int)((auVar31._12_4_ - fVar59) * fVar69 + _UNK_0012fb9c);
        auVar35._0_4_ = -(uint)(auVar54._0_4_ < (int)uVar11);
        auVar35._4_4_ = -(uint)(auVar54._4_4_ < (int)uVar12);
        auVar35._8_4_ = -(uint)(auVar54._8_4_ < (int)uVar13);
        auVar35._12_4_ = -(uint)(auVar54._12_4_ < (int)uVar14);
        auVar31._4_4_ = _UNK_0012fbe4;
        auVar31._0_4_ = __LC24;
        auVar31._8_4_ = _UNK_0012fbe8;
        auVar31._12_4_ = _UNK_0012fbec;
        auVar31 = auVar54 & auVar35 | ~auVar35 & auVar31;
        auVar36._0_4_ = -(uint)(auVar31._0_4_ < 0);
        auVar36._4_4_ = -(uint)(auVar31._4_4_ < 0);
        auVar36._8_4_ = -(uint)(auVar31._8_4_ < 0);
        auVar36._12_4_ = -(uint)(auVar31._12_4_ < 0);
        local_c8 = ~auVar36 & auVar31;
        pauVar21 = pauVar3;
        do {
          if (*(float *)pauVar21[1] != 0.0) {
            uVar22 = (ulong)*(int *)(local_d8 + lVar19 * 4);
            uVar25 = (ulong)(int)local_b8[lVar19 + -4];
            auVar31 = pauVar26[1];
            uVar61 = auVar31._0_4_;
            uVar63 = auVar31._4_4_;
            uVar64 = auVar31._8_4_;
            uVar65 = auVar31._12_4_;
            auVar30 = *pauVar26;
            fVar66 = auVar30._0_4_;
            fVar67 = auVar30._4_4_;
            fVar68 = auVar30._8_4_;
            fVar69 = auVar30._12_4_;
            if (uVar22 == uVar25) {
              lVar20 = lVar19 + uVar22 * 4;
              *(int *)(this + lVar20 * 4 + 0x600) = *(int *)(this + lVar20 * 4 + 0x600) + 1;
              *(int *)(this + lVar20 * 4 + 0x700) = *(int *)(this + lVar20 * 4 + 0x700) + 1;
              uVar17 = uVar22;
            }
            else {
              local_f8 = auVar30;
              local_e8 = auVar31;
              uVar24 = uVar22;
              do {
                uVar17 = uVar24;
                uVar23 = uVar25;
                if (uVar25 <= uVar17) goto LAB_0010b4c2;
                uVar24 = uVar17 + 1;
              } while ((float)(uVar17 + 1) * *(float *)pauVar21[2] + *(float *)*pauVar21 <=
                       *(float *)(local_f8 + lVar19 * 4));
              do {
                if ((float)uVar23 * *(float *)pauVar21[2] + *(float *)*pauVar21 <
                    *(float *)(local_e8 + lVar19 * 4)) break;
                uVar23 = uVar23 - 1;
              } while (uVar17 < uVar23);
LAB_0010b4c2:
              auVar45._4_4_ = _LC30;
              auVar45._0_4_ = _LC30;
              auVar45._8_4_ = _LC30;
              auVar45._12_4_ = _LC30;
              lVar20 = *(long *)(*(long *)(*plVar4 + 0x1e0) +
                                (ulong)(*(uint *)(*pauVar26 + 0xc) & 0x7ffffff) * 8);
              puVar27 = (uint *)((ulong)*(uint *)(pauVar26[1] + 0xc) * *(long *)(lVar20 + 0x60) +
                                *(long *)(lVar20 + 0x58));
              uVar24 = *(ulong *)(lVar20 + 0x88);
              lVar20 = *(long *)(lVar20 + 0x90);
              pfVar1 = (float *)(uVar24 + (ulong)*puVar27 * lVar20);
              local_b8[0] = *pfVar1;
              local_b8[1] = pfVar1[1];
              local_b8[2] = pfVar1[2];
              local_b8[3] = pfVar1[3];
              local_88 = local_b8[0];
              fStack_84 = local_b8[1];
              fStack_80 = local_b8[2];
              fStack_7c = local_b8[3];
              pfVar1 = (float *)(uVar24 + (ulong)puVar27[1] * lVar20);
              local_b8[4] = *pfVar1;
              local_b8[5] = pfVar1[1];
              local_b8[6] = pfVar1[2];
              local_b8[7] = pfVar1[3];
              pfVar1 = (float *)(uVar24 + (ulong)puVar27[2] * lVar20);
              local_b8[8] = *pfVar1;
              local_b8[9] = pfVar1[1];
              local_b8[10] = pfVar1[2];
              local_b8[0xb] = pfVar1[3];
              auVar52._0_4_ = local_b8[4] - local_b8[0];
              auVar52._4_4_ = local_b8[5] - local_b8[1];
              auVar52._8_4_ = local_b8[6] - local_b8[2];
              auVar52._12_4_ = local_b8[7] - local_b8[3];
              auVar32._0_4_ = local_b8[0] - local_b8[8];
              auVar32._4_4_ = local_b8[1] - local_b8[9];
              auVar32._8_4_ = local_b8[2] - local_b8[10];
              auVar32._12_4_ = local_b8[3] - local_b8[0xb];
              local_78 = divps(auVar45,auVar52);
              auVar37._4_4_ = _LC30;
              auVar37._0_4_ = _LC30;
              auVar37._8_4_ = _LC30;
              auVar37._12_4_ = _LC30;
              auVar46._0_4_ = local_b8[8] - local_b8[4];
              auVar46._4_4_ = local_b8[9] - local_b8[5];
              auVar46._8_4_ = local_b8[10] - local_b8[6];
              auVar46._12_4_ = local_b8[0xb] - local_b8[7];
              local_58 = divps(auVar37,auVar32);
              auVar40._4_4_ = _LC30;
              auVar40._0_4_ = _LC30;
              auVar40._8_4_ = _LC30;
              auVar40._12_4_ = _LC30;
              local_68 = divps(auVar40,auVar46);
              if (uVar17 < uVar23) {
                fVar51 = *(float *)(*(undefined1 (*) [16])local_b8 + lVar19 * 4);
                p_Var16 = this + (uVar17 * 3 + lVar19) * 0x20;
                do {
                  uVar17 = uVar17 + 1;
                  fVar67 = (float)uVar17 * *(float *)pauVar21[2] + *(float *)*pauVar21;
                  auVar62._4_4_ = uVar9;
                  auVar62._0_4_ = uVar9;
                  auVar62._8_4_ = uVar9;
                  auVar62._12_4_ = uVar9;
                  auVar60._4_4_ = uVar10;
                  auVar60._0_4_ = uVar10;
                  auVar60._8_4_ = uVar10;
                  auVar60._12_4_ = uVar10;
                  auVar53._4_4_ = uVar9;
                  auVar53._0_4_ = uVar9;
                  auVar53._8_4_ = uVar9;
                  auVar53._12_4_ = uVar9;
                  auVar55._4_4_ = uVar10;
                  auVar55._0_4_ = uVar10;
                  auVar55._8_4_ = uVar10;
                  auVar55._12_4_ = uVar10;
                  pauVar29 = (undefined1 (*) [16])local_b8;
                  fVar66 = fVar51;
                  do {
                    fVar68 = *(float *)(pauVar29[1] + lVar19 * 4);
                    if (fVar67 < fVar66) {
                      if (fVar66 < fVar67) {
                        fVar69 = fVar68;
                        if (((fVar66 < fVar67) || (fVar69 = fVar66, fVar68 < fVar67)) &&
                           (fVar67 < fVar69)) {
                          fVar69 = *(float *)*pauVar29;
                          fVar57 = *(float *)(*pauVar29 + 4);
                          fVar58 = *(float *)(*pauVar29 + 8);
                          fVar59 = *(float *)(*pauVar29 + 0xc);
                          goto LAB_0010b6f3;
                        }
                      }
                      else {
                        auVar31 = *pauVar29;
                        fVar69 = auVar31._0_4_;
                        fVar57 = auVar31._4_4_;
                        fVar58 = auVar31._8_4_;
                        fVar59 = auVar31._12_4_;
                        auVar60 = minps(auVar60,auVar31);
                        auVar62 = maxps(auVar62,auVar31);
                        if (fVar68 < fVar67) {
LAB_0010b6f3:
                          fVar66 = (fVar67 - fVar66) * *(float *)(pauVar29[4] + lVar19 * 4);
                          auVar47._0_4_ = (*(float *)pauVar29[1] - fVar69) * fVar66 + fVar69;
                          auVar47._4_4_ = (*(float *)(pauVar29[1] + 4) - fVar57) * fVar66 + fVar57;
                          auVar47._8_4_ = (*(float *)(pauVar29[1] + 8) - fVar58) * fVar66 + fVar58;
                          auVar47._12_4_ =
                               (*(float *)(pauVar29[1] + 0xc) - fVar59) * fVar66 + fVar59;
                          auVar55 = minps(auVar55,auVar47);
                          auVar53 = maxps(auVar53,auVar47);
                          auVar60 = minps(auVar60,auVar47);
                          auVar62 = maxps(auVar62,auVar47);
                        }
                      }
                    }
                    else {
                      auVar31 = *pauVar29;
                      fVar69 = auVar31._0_4_;
                      fVar57 = auVar31._4_4_;
                      fVar58 = auVar31._8_4_;
                      fVar59 = auVar31._12_4_;
                      auVar55 = minps(auVar55,auVar31);
                      auVar53 = maxps(auVar53,auVar31);
                      if (fVar67 == fVar66) {
                        auVar60 = minps(auVar60,auVar31);
                        auVar62 = maxps(auVar62,auVar31);
                      }
                      else if (fVar67 < fVar68) goto LAB_0010b6f3;
                    }
                    pauVar29 = pauVar29 + 1;
                    fVar66 = fVar68;
                  } while ((undefined1 (*) [16])&local_88 != pauVar29);
                  auVar7._4_4_ = uVar63;
                  auVar7._0_4_ = uVar61;
                  auVar7._8_4_ = uVar64;
                  auVar7._12_4_ = uVar65;
                  auVar54 = minps(auVar53,auVar7);
                  auVar8._4_4_ = uVar63;
                  auVar8._0_4_ = uVar61;
                  auVar8._8_4_ = uVar64;
                  auVar8._12_4_ = uVar65;
                  auVar31 = minps(auVar62,auVar8);
                  auVar56 = maxps(auVar55,auVar30);
                  auVar30 = maxps(auVar60,auVar30);
                  uVar61 = auVar31._0_4_;
                  uVar63 = auVar31._4_4_;
                  uVar64 = auVar31._8_4_;
                  uVar65 = auVar31._12_4_;
                  fVar66 = auVar30._0_4_;
                  fVar67 = auVar30._4_4_;
                  fVar68 = auVar30._8_4_;
                  fVar69 = auVar30._12_4_;
                  auVar33._4_4_ = -(uint)(auVar56._4_4_ <= auVar54._4_4_);
                  auVar33._0_4_ = -(uint)(auVar56._0_4_ <= auVar54._0_4_);
                  auVar33._8_4_ = -(uint)(auVar56._8_4_ <= auVar54._8_4_);
                  auVar33._12_4_ = -(uint)(auVar56._12_4_ <= auVar54._12_4_);
                  uVar28 = movmskps((int)pauVar29,auVar33);
                  auVar56 = minps(*(undefined1 (*) [16])p_Var16,auVar56);
                  *(undefined1 (*) [16])p_Var16 = auVar56;
                  uVar22 = uVar22 + ((~uVar28 & 7) != 0);
                  auVar56 = maxps(*(undefined1 (*) [16])(p_Var16 + 0x10),auVar54);
                  *(undefined1 (*) [16])(p_Var16 + 0x10) = auVar56;
                  uVar24 = uVar23;
                  p_Var16 = p_Var16 + 0x60;
                } while (uVar23 != uVar17);
              }
              auVar34._4_4_ = -(uint)(fVar67 <= auVar31._4_4_);
              auVar34._0_4_ = -(uint)(fVar66 <= auVar31._0_4_);
              auVar34._8_4_ = -(uint)(fVar68 <= auVar31._8_4_);
              auVar34._12_4_ = -(uint)(fVar69 <= auVar31._12_4_);
              uVar28 = movmskps((int)uVar24,auVar34);
              *(int *)(this + (lVar19 + 0x180 + uVar22 * 4) * 4) =
                   *(int *)(this + (lVar19 + 0x180 + uVar22 * 4) * 4) + 1;
              *(int *)(this + (lVar19 + 0x1c0 + (uVar25 - ((~uVar28 & 7) != 0)) * 4) * 4) =
                   *(int *)(this + (lVar19 + 0x1c0 + (uVar25 - ((~uVar28 & 7) != 0)) * 4) * 4) + 1;
            }
            p_Var16 = this + (uVar17 * 3 + lVar19) * 0x20;
            auVar6._4_4_ = fVar67;
            auVar6._0_4_ = fVar66;
            auVar6._8_4_ = fVar68;
            auVar6._12_4_ = fVar69;
            auVar30 = minps(*(undefined1 (*) [16])p_Var16,auVar6);
            *(undefined1 (*) [16])p_Var16 = auVar30;
            auVar31 = maxps(*(undefined1 (*) [16])(p_Var16 + 0x10),auVar31);
            *(undefined1 (*) [16])(p_Var16 + 0x10) = auVar31;
          }
          lVar19 = lVar19 + 1;
          pauVar21 = (undefined1 (*) [16])(*pauVar21 + 4);
        } while (lVar19 != 3);
      }
      pauVar26 = pauVar26 + 2;
    } while ((undefined1 (*) [16])(uVar2 * 0x20 + lVar5) != pauVar26);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* WARNING: Removing unreachable block (ram,0x0010bc4d) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  char cVar16;
  long lVar17;
  Thread *pTVar18;
  Thread *pTVar19;
  long lVar20;
  Thread *pTVar21;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar17 = embree::TaskScheduler::allocThreadIndex();
  pTVar18 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar18 = lVar17;
  pTVar21 = pTVar18 + 0x40;
  pTVar19 = pTVar21;
  do {
    *(undefined4 *)pTVar19 = 0;
    pTVar19 = pTVar19 + 0x40;
  } while (pTVar18 + 0x40040 != pTVar19);
  *(undefined8 *)(pTVar18 + 0x40040) = 0;
  *(undefined8 *)(pTVar18 + 0x40080) = 0;
  *(undefined8 *)(pTVar18 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar18 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar18 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar17 * 8) = pTVar18;
  UNLOCK();
  local_48 = pTVar18;
  pTVar19 = (Thread *)embree::TaskScheduler::swapThread(pTVar18);
  if (*(ulong *)(pTVar18 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar18 + 0xc00c0);
    uVar3 = lVar5 + 0x48 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar18 + 0xc00c0) = uVar3;
      pTVar4 = pTVar18 + uVar3 + 0x40078;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f508;
      uVar14 = *(undefined8 *)(param_1 + 0x30);
      uVar15 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(pTVar4 + 8) = uVar8;
      *(undefined8 *)(pTVar4 + 0x10) = uVar9;
      *(undefined8 *)(pTVar4 + 0x18) = uVar10;
      *(undefined8 *)(pTVar4 + 0x20) = uVar11;
      *(undefined8 *)(pTVar4 + 0x28) = uVar12;
      *(undefined8 *)(pTVar4 + 0x30) = uVar13;
      *(undefined8 *)(pTVar4 + 0x38) = uVar14;
      *(undefined8 *)(pTVar4 + 0x40) = uVar15;
      lVar20 = *(long *)(pTVar18 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar18 + 0xc0100);
      pTVar18[lVar20 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar18 + lVar20 + 0x44) = 1;
      *(Thread **)(pTVar18 + lVar20 + 0x50) = pTVar4;
      *(long *)(pTVar18 + lVar20 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar18 + lVar20 + 0x60) = param_2;
      *(long *)(pTVar18 + lVar20 + 0x68) = lVar5;
      *(ulong *)(pTVar18 + lVar20 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar21 + lVar20) == 0) {
        *(undefined4 *)(pTVar21 + lVar20) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar18 + 0x40080) = *(long *)(pTVar18 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar18 + 0x40080) - 1U <= *(ulong *)(pTVar18 + 0x40040)) {
        LOCK();
        *(long *)(pTVar18 + 0x40040) = *(long *)(pTVar18 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar16 = embree::TaskScheduler::TaskQueue::execute_local(pTVar21,(Task *)pTVar18);
      } while (cVar16 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar17 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar19);
      pTVar21 = *(Thread **)param_2;
      if (pTVar21 != (Thread *)0x0) {
        local_48 = pTVar21;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar21 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar21 == (Thread *)0x0) {
        if (pTVar18 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar18 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar18);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar21;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___2_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  TaskGroupContext *local_30;
  long local_20;
  
  uStack_50 = *(undefined8 *)param_4;
  uStack_48 = *(undefined8 *)(param_4 + 8);
  uStack_40 = *(undefined8 *)(param_4 + 0x10);
  uStack_38 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_68 = param_2;
  uStack_60 = param_1;
  local_58 = param_3;
  local_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_68,param_5,param_2 - param_1,true);
LAB_0010bef9:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x48 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40078 + uVar2);
      *puVar3 = &PTR_execute_0012f508;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      puVar3[7] = uStack_38;
      puVar3[8] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010bef9;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  uint uVar1;
  uint uVar2;
  float fVar3;
  int iVar4;
  float *pfVar5;
  ulong uVar6;
  ulong uVar7;
  float fVar8;
  
  fVar3 = _LC18;
  uVar2 = _LC30;
  uVar1 = _LC20;
  uVar6 = *(ulong *)(this + 8);
  uVar7 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < uVar6 - uVar7) {
    uVar6 = uVar6 + uVar7 >> 1;
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (uVar7,uVar6,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___2_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x40));
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (uVar6,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___2_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x40));
    embree::TaskScheduler::wait();
    return;
  }
  if (uVar7 < uVar6) {
    do {
      pfVar5 = (float *)(uVar7 * 0x20 + **(long **)(this + 0x20));
      fVar8 = (pfVar5[4] - *pfVar5) * ((pfVar5[5] - pfVar5[1]) + (pfVar5[6] - pfVar5[2])) +
              (pfVar5[5] - pfVar5[1]) * (pfVar5[6] - pfVar5[2]);
      fVar8 = (float)(ulong)(*(long *)(*(long *)(this + 0x30) + 0x48) -
                            *(long *)(*(long *)(this + 0x30) + 0x40)) * **(float **)(this + 0x28) *
              (fVar8 + fVar8) * **(float **)(this + 0x38);
      if ((float)((uint)fVar8 & uVar1) < fVar3) {
        fVar8 = (float)((uint)((float)(int)fVar8 +
                              (float)(-(uint)((float)(int)fVar8 < fVar8) & uVar2)) |
                       ~uVar1 & (uint)fVar8);
      }
      iVar4 = (int)fVar8;
      if (iVar4 < 1) {
        iVar4 = 1;
      }
      if (0x1b < iVar4) {
        iVar4 = 0x1b;
      }
      uVar7 = uVar7 + 1;
      pfVar5[3] = (float)((uint)pfVar5[3] | (iVar4 + 4) * 0x8000000);
    } while (uVar6 != uVar7);
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x0010c4ad) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  char cVar16;
  long lVar17;
  Thread *pTVar18;
  Thread *pTVar19;
  long lVar20;
  Thread *pTVar21;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar17 = embree::TaskScheduler::allocThreadIndex();
  pTVar18 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar18 = lVar17;
  pTVar21 = pTVar18 + 0x40;
  pTVar19 = pTVar21;
  do {
    *(undefined4 *)pTVar19 = 0;
    pTVar19 = pTVar19 + 0x40;
  } while (pTVar18 + 0x40040 != pTVar19);
  *(undefined8 *)(pTVar18 + 0x40040) = 0;
  *(undefined8 *)(pTVar18 + 0x40080) = 0;
  *(undefined8 *)(pTVar18 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar18 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar18 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar17 * 8) = pTVar18;
  UNLOCK();
  local_48 = pTVar18;
  pTVar19 = (Thread *)embree::TaskScheduler::swapThread(pTVar18);
  if (*(ulong *)(pTVar18 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar18 + 0xc00c0);
    uVar3 = lVar5 + 0x48 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar18 + 0xc00c0) = uVar3;
      pTVar4 = pTVar18 + uVar3 + 0x40078;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f520;
      uVar14 = *(undefined8 *)(param_1 + 0x30);
      uVar15 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(pTVar4 + 8) = uVar8;
      *(undefined8 *)(pTVar4 + 0x10) = uVar9;
      *(undefined8 *)(pTVar4 + 0x18) = uVar10;
      *(undefined8 *)(pTVar4 + 0x20) = uVar11;
      *(undefined8 *)(pTVar4 + 0x28) = uVar12;
      *(undefined8 *)(pTVar4 + 0x30) = uVar13;
      *(undefined8 *)(pTVar4 + 0x38) = uVar14;
      *(undefined8 *)(pTVar4 + 0x40) = uVar15;
      lVar20 = *(long *)(pTVar18 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar18 + 0xc0100);
      pTVar18[lVar20 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar18 + lVar20 + 0x44) = 1;
      *(Thread **)(pTVar18 + lVar20 + 0x50) = pTVar4;
      *(long *)(pTVar18 + lVar20 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar18 + lVar20 + 0x60) = param_2;
      *(long *)(pTVar18 + lVar20 + 0x68) = lVar5;
      *(ulong *)(pTVar18 + lVar20 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar21 + lVar20) == 0) {
        *(undefined4 *)(pTVar21 + lVar20) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar18 + 0x40080) = *(long *)(pTVar18 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar18 + 0x40080) - 1U <= *(ulong *)(pTVar18 + 0x40040)) {
        LOCK();
        *(long *)(pTVar18 + 0x40040) = *(long *)(pTVar18 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar16 = embree::TaskScheduler::TaskQueue::execute_local(pTVar21,(Task *)pTVar18);
      } while (cVar16 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar17 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar19);
      pTVar21 = *(Thread **)param_2;
      if (pTVar21 != (Thread *)0x0) {
        local_48 = pTVar21;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar21 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar21 == (Thread *)0x0) {
        if (pTVar18 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar18 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar18);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar21;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___2_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  TaskGroupContext *local_30;
  long local_20;
  
  uStack_50 = *(undefined8 *)param_4;
  uStack_48 = *(undefined8 *)(param_4 + 8);
  uStack_40 = *(undefined8 *)(param_4 + 0x10);
  uStack_38 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_68 = param_2;
  uStack_60 = param_1;
  local_58 = param_3;
  local_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_68,param_5,param_2 - param_1,true);
LAB_0010c759:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x48 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40078 + uVar2);
      *puVar3 = &PTR_execute_0012f520;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      puVar3[7] = uStack_38;
      puVar3[8] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010c759;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  uint uVar1;
  uint uVar2;
  float fVar3;
  int iVar4;
  float *pfVar5;
  ulong uVar6;
  ulong uVar7;
  float fVar8;
  
  fVar3 = _LC18;
  uVar2 = _LC30;
  uVar1 = _LC20;
  uVar6 = *(ulong *)(this + 8);
  uVar7 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < uVar6 - uVar7) {
    uVar6 = uVar6 + uVar7 >> 1;
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (uVar7,uVar6,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___2_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x40));
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (uVar6,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___2_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x40));
    embree::TaskScheduler::wait();
    return;
  }
  if (uVar7 < uVar6) {
    do {
      pfVar5 = (float *)(uVar7 * 0x20 + **(long **)(this + 0x20));
      fVar8 = (pfVar5[4] - *pfVar5) * ((pfVar5[5] - pfVar5[1]) + (pfVar5[6] - pfVar5[2])) +
              (pfVar5[5] - pfVar5[1]) * (pfVar5[6] - pfVar5[2]);
      fVar8 = (float)(ulong)(*(long *)(*(long *)(this + 0x30) + 0x48) -
                            *(long *)(*(long *)(this + 0x30) + 0x40)) * **(float **)(this + 0x28) *
              (fVar8 + fVar8) * **(float **)(this + 0x38);
      if ((float)((uint)fVar8 & uVar1) < fVar3) {
        fVar8 = (float)((uint)((float)(int)fVar8 +
                              (float)(-(uint)((float)(int)fVar8 < fVar8) & uVar2)) |
                       ~uVar1 & (uint)fVar8);
      }
      iVar4 = (int)fVar8;
      if (iVar4 < 1) {
        iVar4 = 1;
      }
      if (0x1b < iVar4) {
        iVar4 = 0x1b;
      }
      uVar7 = uVar7 + 1;
      pfVar5[3] = (float)((uint)pfVar5[3] | (iVar4 + 4) * 0x8000000);
    } while (uVar6 != uVar7);
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::SpatialBinInfo<16ul, embree::PrimRef>::best(embree::sse2::SpatialBinMapping<16ul>
   const&, unsigned long) const */

SpatialBinMapping *
embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>::best(SpatialBinMapping *param_1,ulong param_2)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  undefined1 auVar6 [16];
  undefined1 (*pauVar7) [16];
  undefined1 (*pauVar8) [16];
  undefined1 (*pauVar9) [16];
  ulong uVar10;
  uint in_ECX;
  ulong uVar11;
  undefined8 *in_RDX;
  float *pfVar12;
  undefined4 uVar13;
  long lVar14;
  undefined4 uVar15;
  long in_FS_OFFSET;
  undefined1 auVar16 [16];
  int iVar17;
  int iVar19;
  int iVar20;
  int iVar21;
  undefined1 auVar18 [16];
  uint uVar22;
  float fVar24;
  float fVar25;
  uint uVar26;
  float fVar27;
  float fVar28;
  uint uVar29;
  uint uVar30;
  undefined1 auVar23 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined8 uVar33;
  undefined1 auVar34 [16];
  uint uVar35;
  uint uVar37;
  uint uVar38;
  undefined1 auVar36 [16];
  uint uVar39;
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  float fVar43;
  float fVar44;
  undefined1 auVar42 [16];
  undefined1 auVar45 [16];
  undefined1 auVar46 [16];
  undefined1 local_2f8 [16];
  undefined1 local_2e8 [16];
  undefined1 local_2d8 [16];
  undefined1 local_2c8 [8];
  float fStack_2c0;
  float fStack_2bc;
  int local_2b8;
  int iStack_2b4;
  int iStack_2b0;
  int iStack_2ac;
  undefined1 local_2a8 [16];
  undefined1 local_298 [16];
  undefined1 local_288 [16];
  undefined1 local_278 [16];
  undefined1 local_258 [16];
  undefined1 local_248 [16];
  undefined1 local_238 [16];
  undefined1 local_228 [16];
  float local_218 [60];
  float local_128 [4];
  int local_118 [66];
  long local_10;
  
  iVar17 = 0;
  iVar19 = 0;
  iVar20 = 0;
  iVar21 = 0;
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  lVar14 = 0xf0;
  local_2c8 = CONCAT44(_LC3,_LC3);
  fStack_2c0 = _LC3;
  fStack_2bc = _LC3;
  uVar33 = CONCAT44(_LC1,_LC1);
  auVar42._8_4_ = _LC3;
  auVar42._0_8_ = local_2c8;
  auVar42._12_4_ = _LC3;
  auVar41._8_4_ = _LC3;
  auVar41._0_8_ = local_2c8;
  auVar41._12_4_ = _LC3;
  auVar40._8_4_ = _LC1;
  auVar40._0_8_ = uVar33;
  auVar40._12_4_ = _LC1;
  auVar36._8_4_ = _LC3;
  auVar36._0_8_ = local_2c8;
  auVar36._12_4_ = _LC3;
  auVar34._8_4_ = _LC1;
  auVar34._0_8_ = uVar33;
  auVar34._12_4_ = _LC1;
  auVar31._8_4_ = _LC1;
  auVar31._0_8_ = uVar33;
  auVar31._12_4_ = _LC1;
  pauVar8 = (undefined1 (*) [16])(param_2 + 0x5a0);
  pfVar12 = local_128;
  do {
    pauVar7 = pauVar8;
    auVar40 = maxps(auVar40,pauVar7[1]);
    auVar36 = minps(auVar36,*pauVar7);
    pauVar8 = pauVar7 + -6;
    piVar1 = (int *)(param_2 + 0x700 + lVar14);
    iVar2 = *piVar1;
    iVar3 = piVar1[1];
    iVar4 = piVar1[2];
    iVar5 = piVar1[3];
    auVar31 = maxps(auVar31,pauVar7[3]);
    pfVar12[3] = 0.0;
    auVar41 = minps(auVar41,pauVar7[2]);
    auVar34 = maxps(auVar34,pauVar7[5]);
    iVar17 = iVar2 + iVar17;
    iVar19 = iVar3 + iVar19;
    iVar20 = iVar4 + iVar20;
    iVar21 = iVar5 + iVar21;
    auVar42 = minps(auVar42,pauVar7[4]);
    fVar24 = auVar40._4_4_ - auVar36._4_4_;
    fVar27 = auVar40._8_4_ - auVar36._8_4_;
    *(int *)((long)local_118 + lVar14) = iVar17;
    *(int *)((long)local_118 + lVar14 + 4) = iVar19;
    *(int *)((long)local_118 + lVar14 + 8) = iVar20;
    *(int *)((long)local_118 + lVar14 + 0xc) = iVar21;
    lVar14 = lVar14 + -0x10;
    fVar25 = auVar31._4_4_ - auVar41._4_4_;
    fVar28 = auVar31._8_4_ - auVar41._8_4_;
    *pfVar12 = (fVar24 + fVar27) * (auVar40._0_4_ - auVar36._0_4_) + fVar24 * fVar27;
    fVar24 = auVar34._4_4_ - auVar42._4_4_;
    fVar27 = auVar34._8_4_ - auVar42._8_4_;
    pfVar12[1] = (fVar25 + fVar28) * (auVar31._0_4_ - auVar41._0_4_) + fVar25 * fVar28;
    pfVar12[2] = (fVar24 + fVar27) * (auVar34._0_4_ - auVar42._0_4_) + fVar24 * fVar27;
    pfVar12 = pfVar12 + -4;
  } while ((undefined1 (*) [16])param_2 != pauVar8);
  lVar14 = 0x10;
  auVar46._8_4_ = _LC1;
  auVar46._0_8_ = uVar33;
  auVar46._12_4_ = _LC1;
  auVar45._8_4_ = _LC1;
  auVar45._0_8_ = uVar33;
  auVar45._12_4_ = _LC1;
  iVar17 = (1 << ((byte)in_ECX & 0x1f)) + -1;
  uVar10 = (ulong)in_ECX;
  auVar16._8_4_ = _LC1;
  auVar16._0_8_ = uVar33;
  auVar16._12_4_ = _LC1;
  local_2d8 = (undefined1  [16])0x0;
  local_2e8 = (undefined1  [16])0x0;
  local_2f8 = (undefined1  [16])0x0;
  local_2b8 = __LC16;
  iStack_2b4 = _UNK_0012fb84;
  iStack_2b0 = _UNK_0012fb88;
  iStack_2ac = _UNK_0012fb8c;
  local_278 = (undefined1  [16])0x0;
  local_2a8 = _local_2c8;
  local_298 = _local_2c8;
  local_288 = _local_2c8;
  do {
    auVar46 = maxps(auVar46,pauVar8[5]);
    pauVar9 = pauVar8 + 6;
    local_2a8 = minps(local_2a8,pauVar8[4]);
    auVar45 = maxps(auVar45,pauVar8[1]);
    auVar16 = maxps(auVar16,pauVar8[3]);
    local_288 = minps(local_288,*pauVar8);
    fVar24 = auVar46._4_4_ - local_2a8._4_4_;
    fVar25 = auVar46._8_4_ - local_2a8._8_4_;
    local_298 = minps(local_298,pauVar8[2]);
    piVar1 = (int *)(param_2 + 0x5f0 + lVar14);
    local_278._0_4_ = local_278._0_4_ + *piVar1;
    local_278._4_4_ = local_278._4_4_ + piVar1[1];
    local_278._8_4_ = local_278._8_4_ + piVar1[2];
    local_278._12_4_ = local_278._12_4_ + piVar1[3];
    fVar43 = auVar45._4_4_ - local_288._4_4_;
    fVar44 = auVar45._8_4_ - local_288._8_4_;
    fVar27 = auVar16._4_4_ - local_298._4_4_;
    fVar28 = auVar16._8_4_ - local_298._8_4_;
    fVar24 = (fVar24 + fVar25) * (auVar46._0_4_ - local_2a8._0_4_) + fVar24 * fVar25;
    uVar35 = (uint)(iVar17 + local_278._0_4_) >> uVar10;
    uVar37 = (uint)(iVar17 + local_278._4_4_) >> uVar10;
    uVar38 = (uint)(iVar17 + local_278._8_4_) >> uVar10;
    uVar39 = (uint)(iVar17 + local_278._12_4_) >> uVar10;
    uVar22 = (uint)(iVar17 + *(int *)((long)local_118 + lVar14)) >> uVar10;
    uVar26 = (uint)(iVar17 + *(int *)((long)local_118 + lVar14 + 4)) >> uVar10;
    uVar29 = (uint)(iVar17 + *(int *)((long)local_118 + lVar14 + 8)) >> uVar10;
    uVar30 = (uint)(iVar17 + *(int *)((long)local_118 + lVar14 + 0xc)) >> uVar10;
    auVar6._4_4_ = iStack_2b4;
    auVar6._0_4_ = local_2b8;
    auVar6._8_4_ = iStack_2b0;
    auVar6._12_4_ = iStack_2ac;
    fVar25 = ((fVar43 + fVar44) * (auVar45._0_4_ - local_288._0_4_) + fVar43 * fVar44) *
             ((float)(int)(uVar35 & _LC20) + (float)((int)uVar35 >> 0x1f & __LC15)) +
             ((float)(int)(uVar22 & _LC20) + (float)((int)uVar22 >> 0x1f & __LC15)) *
             *(float *)((long)local_218 + lVar14);
    fVar27 = ((fVar27 + fVar28) * (auVar16._0_4_ - local_298._0_4_) + fVar27 * fVar28) *
             ((float)(int)(uVar37 & _UNK_0012fba4) + (float)((int)uVar37 >> 0x1f & _UNK_0012fbb4)) +
             ((float)(int)(uVar26 & _UNK_0012fba4) + (float)((int)uVar26 >> 0x1f & _UNK_0012fbb4)) *
             *(float *)((long)local_218 + lVar14 + 4);
    fVar28 = fVar24 * ((float)(int)(uVar38 & _UNK_0012fba8) +
                      (float)((int)uVar38 >> 0x1f & _UNK_0012fbb8)) +
             ((float)(int)(uVar29 & _UNK_0012fba8) + (float)((int)uVar29 >> 0x1f & _UNK_0012fbb8)) *
             *(float *)((long)local_218 + lVar14 + 8);
    fVar24 = fVar24 * ((float)(int)(uVar39 & _UNK_0012fbac) +
                      (float)((int)uVar39 >> 0x1f & _UNK_0012fbbc)) +
             ((float)(int)(uVar30 & _UNK_0012fbac) + (float)((int)uVar30 >> 0x1f & _UNK_0012fbbc)) *
             *(float *)((long)local_218 + lVar14 + 0xc);
    uVar22 = -(uint)(fVar25 < (float)local_2c8._0_4_);
    uVar26 = -(uint)(fVar27 < (float)local_2c8._4_4_);
    uVar29 = -(uint)(fVar28 < fStack_2c0);
    uVar30 = -(uint)(fVar24 < fStack_2bc);
    auVar18._4_4_ = uVar26;
    auVar18._0_4_ = uVar22;
    auVar18._8_4_ = uVar29;
    auVar18._12_4_ = uVar30;
    auVar32._0_4_ = (uint)fVar25 & uVar22;
    auVar32._4_4_ = (uint)fVar27 & uVar26;
    auVar32._8_4_ = (uint)fVar28 & uVar29;
    auVar32._12_4_ = (uint)fVar24 & uVar30;
    local_2d8 = auVar6 & auVar18 | ~auVar18 & local_2d8;
    auVar23._0_4_ = ~uVar22 & local_2c8._0_4_;
    auVar23._4_4_ = ~uVar26 & local_2c8._4_4_;
    auVar23._8_4_ = ~uVar29 & (uint)fStack_2c0;
    auVar23._12_4_ = ~uVar30 & (uint)fStack_2bc;
    _local_2c8 = auVar32 | auVar23;
    local_2e8 = local_278 & auVar18 | ~auVar18 & local_2e8;
    pauVar8 = (undefined1 (*) [16])((long)local_118 + lVar14);
    lVar14 = lVar14 + 0x10;
    local_2f8 = auVar18 & *pauVar8 | ~auVar18 & local_2f8;
    local_2b8 = local_2b8 + __LC16;
    iStack_2b4 = iStack_2b4 + _UNK_0012fb84;
    iStack_2b0 = iStack_2b0 + _UNK_0012fb88;
    iStack_2ac = iStack_2ac + _UNK_0012fb8c;
    pauVar8 = pauVar9;
  } while (pauVar7 + 0x54 != pauVar9);
  local_228 = local_2f8;
  uVar10 = 0;
  uVar13 = 0;
  uVar15 = 0;
  iVar17 = 0;
  local_248 = local_2d8;
  uVar11 = 0xffffffff;
  local_258 = _local_2c8;
  local_238 = local_2e8;
  fVar24 = _LC3;
  do {
    if (((*(float *)((long)in_RDX + uVar10 * 4 + 0x10) != 0.0) &&
        (*(float *)(local_258 + uVar10 * 4) < fVar24)) && (*(int *)(local_248 + uVar10 * 4) != 0)) {
      uVar15 = *(undefined4 *)(local_238 + uVar10 * 4);
      uVar11 = uVar10 & 0xffffffff;
      uVar13 = *(undefined4 *)(local_228 + uVar10 * 4);
      fVar24 = *(float *)(local_258 + uVar10 * 4);
      iVar17 = *(int *)(local_248 + uVar10 * 4);
    }
    uVar10 = uVar10 + 1;
  } while (uVar10 != 3);
  if ((int)uVar11 == -1) {
    *(undefined8 *)param_1 = 0xffffffff7f800000;
    *(undefined8 *)(param_1 + 8) = 0xffffffff00000000;
    *(undefined8 *)(param_1 + 0x10) = 0x3f800000ffffffff;
  }
  else {
    *(int *)(param_1 + 4) = (int)uVar11;
    *(int *)(param_1 + 8) = iVar17;
    *(undefined4 *)(param_1 + 0xc) = uVar15;
    *(undefined4 *)(param_1 + 0x10) = uVar13;
    *(undefined4 *)(param_1 + 0x14) = 0x3f800000;
    *(float *)param_1 = fVar24;
  }
  uVar33 = in_RDX[1];
  *(undefined8 *)(param_1 + 0x20) = *in_RDX;
  *(undefined8 *)(param_1 + 0x28) = uVar33;
  uVar33 = in_RDX[3];
  *(undefined8 *)(param_1 + 0x30) = in_RDX[2];
  *(undefined8 *)(param_1 + 0x38) = uVar33;
  uVar33 = in_RDX[5];
  *(undefined8 *)(param_1 + 0x40) = in_RDX[4];
  *(undefined8 *)(param_1 + 0x48) = uVar33;
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::sequential_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned long) [clone
   .isra.0] */

PrimInfoExtRange *
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
sequential_spatial_find(PrimInfoExtRange *param_1,ulong param_2)

{
  float *pfVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  undefined1 auVar6 [16];
  ulong uVar7;
  undefined1 auVar8 [16];
  undefined1 auVar9 [16];
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  undefined1 auVar16 [16];
  undefined1 auVar17 [16];
  ulong uVar18;
  long lVar19;
  long lVar20;
  ulong uVar21;
  undefined1 (*in_RCX) [16];
  long *in_RDX;
  undefined1 (*pauVar22) [16];
  long lVar23;
  ulong uVar24;
  float *pfVar25;
  ulong uVar26;
  ulong uVar27;
  uint *puVar28;
  undefined1 (*pauVar29) [16];
  undefined1 (*pauVar30) [16];
  long in_FS_OFFSET;
  float fVar31;
  float fVar33;
  uint uVar34;
  float fVar41;
  float fVar43;
  undefined1 auVar35 [16];
  uint uVar32;
  uint uVar42;
  uint uVar44;
  float fVar45;
  uint uVar46;
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  undefined1 auVar51 [16];
  uint uVar52;
  uint uVar57;
  uint uVar58;
  uint uVar59;
  undefined1 auVar53 [16];
  undefined1 auVar54 [16];
  undefined1 auVar55 [16];
  undefined1 auVar56 [16];
  undefined1 auVar60 [16];
  undefined1 auVar61 [16];
  undefined1 auVar62 [16];
  float fVar63;
  float fVar64;
  float fVar65;
  float fVar66;
  float fVar67;
  float fVar70;
  float fVar71;
  float fVar72;
  undefined1 auVar68 [16];
  undefined1 auVar69 [16];
  float fVar73;
  float fVar77;
  float fVar78;
  undefined1 auVar74 [16];
  undefined1 auVar75 [16];
  undefined1 auVar76 [16];
  float fVar79;
  float fVar80;
  float fVar83;
  float fVar84;
  undefined1 auVar81 [16];
  undefined1 auVar82 [16];
  float fVar85;
  float fVar86;
  undefined1 local_960 [16];
  undefined1 local_950 [16];
  float local_940;
  uint uStack_93c;
  uint uStack_938;
  uint uStack_934;
  undefined1 local_930 [16];
  undefined1 local_920 [16];
  float local_910 [4];
  undefined1 local_900 [16];
  float local_8f0 [4];
  float local_8e0;
  float fStack_8dc;
  float fStack_8d8;
  float fStack_8d4;
  float local_8d0;
  float fStack_8cc;
  float fStack_8c8;
  float fStack_8c4;
  float local_8c0;
  float fStack_8bc;
  float fStack_8b8;
  float fStack_8b4;
  undefined1 local_8b0 [16];
  undefined1 local_8a0 [16];
  undefined1 local_890 [16];
  int local_880 [4];
  undefined1 local_870 [1520];
  int local_280 [64];
  int local_180 [78];
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pauVar30 = (undefined1 (*) [16])local_880;
  pauVar22 = (undefined1 (*) [16])local_280;
  do {
    *(undefined4 *)pauVar30[4] = _LC3;
    *(undefined4 *)(pauVar30[4] + 4) = _LC3;
    *(undefined4 *)(pauVar30[4] + 8) = _LC3;
    *(undefined4 *)(pauVar30[4] + 0xc) = _LC3;
    pauVar29 = pauVar30 + 6;
    *(undefined4 *)pauVar30[5] = _LC1;
    *(undefined4 *)(pauVar30[5] + 4) = _LC1;
    *(undefined4 *)(pauVar30[5] + 8) = _LC1;
    *(undefined4 *)(pauVar30[5] + 0xc) = _LC1;
    *(undefined4 *)pauVar30[2] = _LC3;
    *(undefined4 *)(pauVar30[2] + 4) = _LC3;
    *(undefined4 *)(pauVar30[2] + 8) = _LC3;
    *(undefined4 *)(pauVar30[2] + 0xc) = _LC3;
    *(undefined4 *)pauVar30[3] = _LC1;
    *(undefined4 *)(pauVar30[3] + 4) = _LC1;
    *(undefined4 *)(pauVar30[3] + 8) = _LC1;
    *(undefined4 *)(pauVar30[3] + 0xc) = _LC1;
    *(undefined4 *)*pauVar30 = _LC3;
    *(undefined4 *)(*pauVar30 + 4) = _LC3;
    *(undefined4 *)(*pauVar30 + 8) = _LC3;
    *(undefined4 *)(*pauVar30 + 0xc) = _LC3;
    *(undefined4 *)pauVar30[1] = _LC1;
    *(undefined4 *)(pauVar30[1] + 4) = _LC1;
    *(undefined4 *)(pauVar30[1] + 8) = _LC1;
    *(undefined4 *)(pauVar30[1] + 0xc) = _LC1;
    pauVar22[0x10] = (undefined1  [16])0x0;
    *pauVar22 = (undefined1  [16])0x0;
    pauVar30 = pauVar29;
    pauVar22 = pauVar22 + 1;
  } while ((undefined1 (*) [16])local_280 != pauVar29);
  local_920 = *in_RCX;
  fVar67 = local_920._0_4_;
  fVar70 = local_920._4_4_;
  fVar71 = local_920._8_4_;
  fVar72 = local_920._12_4_;
  uVar7 = *(ulong *)(in_RCX[4] + 8);
  auVar56._0_4_ = _LC20 & (uint)fVar67;
  auVar56._4_4_ = _LC20 & (uint)fVar70;
  auVar56._8_4_ = _LC20 & (uint)fVar71;
  auVar56._12_4_ = _LC20 & (uint)fVar72;
  auVar35._4_4_ = *(uint *)(in_RCX[1] + 4) & _LC20;
  auVar35._0_4_ = *(uint *)in_RCX[1] & _LC20;
  auVar35._8_4_ = *(uint *)(in_RCX[1] + 8) & _LC20;
  auVar35._12_4_ = *(uint *)(in_RCX[1] + 0xc) & _LC20;
  auVar35 = maxps(auVar56,auVar35);
  fVar31 = auVar35._0_4_ * _LC39;
  fVar41 = auVar35._4_4_ * _LC39;
  auVar51._4_4_ = fVar41;
  auVar51._0_4_ = fVar31;
  fVar43 = auVar35._8_4_ * _LC39;
  fVar45 = auVar35._12_4_ * _LC39;
  fVar47 = *(float *)in_RCX[1] - fVar67;
  fVar48 = *(float *)(in_RCX[1] + 4) - fVar70;
  fVar49 = *(float *)(in_RCX[1] + 8) - fVar71;
  fVar50 = *(float *)(in_RCX[1] + 0xc) - fVar72;
  auVar51._8_4_ = fVar43;
  auVar51._12_4_ = fVar45;
  auVar6._4_4_ = fVar48;
  auVar6._0_4_ = fVar47;
  auVar6._8_4_ = fVar49;
  auVar6._12_4_ = fVar50;
  auVar35 = maxps(auVar51,auVar6);
  auVar76._4_4_ = _LC41;
  auVar76._0_4_ = _LC41;
  auVar76._8_4_ = _LC41;
  auVar76._12_4_ = _LC41;
  auVar35 = divps(auVar76,auVar35);
  auVar82._4_4_ = _LC30;
  auVar82._0_4_ = _LC30;
  local_910[0] = (float)(~-(uint)(fVar47 <= fVar31) & auVar35._0_4_);
  local_910[1] = (float)(~-(uint)(fVar48 <= fVar41) & auVar35._4_4_);
  local_910[2] = (float)(~-(uint)(fVar49 <= fVar43) & auVar35._8_4_);
  local_910[3] = (float)(~-(uint)(fVar50 <= fVar45) & auVar35._12_4_);
  auVar82._8_4_ = _LC30;
  auVar82._12_4_ = _LC30;
  auVar37._4_4_ = local_910[1];
  auVar37._0_4_ = local_910[0];
  auVar37._8_4_ = local_910[2];
  auVar37._12_4_ = local_910[3];
  local_900 = divps(auVar82,auVar37);
  if (*(ulong *)in_RCX[4] < uVar7) {
    pauVar30 = (undefined1 (*) [16])(*(ulong *)in_RCX[4] * 0x20 + param_2);
    do {
      uVar34 = *(uint *)(*pauVar30 + 0xc);
      auVar35 = pauVar30[1];
      auVar6 = *pauVar30;
      fVar43 = auVar6._0_4_;
      fVar45 = auVar6._4_4_;
      fVar47 = auVar6._8_4_;
      fVar48 = auVar6._12_4_;
      fVar49 = auVar35._4_4_;
      fVar50 = auVar35._12_4_;
      fVar31 = auVar35._0_4_;
      fVar41 = auVar35._8_4_;
      if (uVar34 < 0x10000000) {
        lVar23 = 0;
        uVar34 = (uint)(((fVar31 + fVar43) * _LC22 - fVar67) * local_910[0] + _LC12);
        uVar32 = (uint)(((fVar49 + fVar45) * _LC22 - fVar70) * local_910[1] + _UNK_0012fb94);
        uVar42 = (uint)(((fVar41 + fVar47) * _LC22 - fVar71) * local_910[2] + _UNK_0012fb98);
        uVar44 = (uint)(((fVar50 + fVar48) * _LC22 - fVar72) * local_910[3] + _UNK_0012fb9c);
        uVar46 = -(uint)((int)uVar34 < (int)__LC24);
        uVar52 = -(uint)((int)uVar32 < (int)_UNK_0012fbe4);
        uVar57 = -(uint)((int)uVar42 < (int)_UNK_0012fbe8);
        uVar58 = -(uint)((int)uVar44 < (int)_UNK_0012fbec);
        uVar34 = uVar34 & uVar46 | ~uVar46 & __LC24;
        uVar32 = uVar32 & uVar52 | ~uVar52 & _UNK_0012fbe4;
        uVar42 = uVar42 & uVar57 | ~uVar57 & _UNK_0012fbe8;
        uVar44 = uVar44 & uVar58 | ~uVar58 & _UNK_0012fbec;
        local_8f0[0] = (float)(~-(uint)((int)uVar34 < 0) & uVar34);
        local_8f0[1] = (float)(~-(uint)((int)uVar32 < 0) & uVar32);
        local_8f0[2] = (float)(~-(uint)((int)uVar42 < 0) & uVar42);
        local_8f0[3] = (float)(~-(uint)((int)uVar44 < 0) & uVar44);
        do {
          fVar31 = local_8f0[lVar23];
          lVar19 = lVar23 + (long)(int)fVar31 * 4;
          local_280[lVar19] = local_280[lVar19] + 1;
          local_180[lVar19] = local_180[lVar19] + 1;
          lVar19 = (long)(int)fVar31 * 3 + lVar23;
          lVar23 = lVar23 + 1;
          lVar20 = lVar19 * 0x20;
          pauVar22 = (undefined1 (*) [16])local_880 + lVar19 * 2;
          auVar37 = minps(*pauVar22,auVar6);
          *pauVar22 = auVar37;
          auVar37 = maxps(*(undefined1 (*) [16])(local_870 + lVar20),auVar35);
          *(undefined1 (*) [16])(local_870 + lVar20) = auVar37;
        } while (lVar23 != 3);
      }
      else {
        lVar23 = 0;
        uVar32 = (uint)((fVar43 - fVar67) * local_910[0] + _LC12);
        uVar42 = (uint)((fVar45 - fVar70) * local_910[1] + _UNK_0012fb94);
        uVar44 = (uint)((fVar47 - fVar71) * local_910[2] + _UNK_0012fb98);
        uVar46 = (uint)((fVar48 - fVar72) * local_910[3] + _UNK_0012fb9c);
        uVar52 = -(uint)((int)uVar32 < (int)__LC24);
        uVar57 = -(uint)((int)uVar42 < (int)_UNK_0012fbe4);
        uVar58 = -(uint)((int)uVar44 < (int)_UNK_0012fbe8);
        uVar59 = -(uint)((int)uVar46 < (int)_UNK_0012fbec);
        uVar32 = uVar32 & uVar52 | ~uVar52 & __LC24;
        uVar42 = uVar42 & uVar57 | ~uVar57 & _UNK_0012fbe4;
        uVar44 = uVar44 & uVar58 | ~uVar58 & _UNK_0012fbe8;
        uStack_934 = uVar46 & uVar59 | ~uVar59 & _UNK_0012fbec;
        uStack_934 = ~-(uint)((int)uStack_934 < 0) & uStack_934;
        local_940 = (float)(~-(uint)((int)uVar32 < 0) & uVar32);
        uStack_93c = ~-(uint)((int)uVar42 < 0) & uVar42;
        uStack_938 = ~-(uint)((int)uVar44 < 0) & uVar44;
        auVar36._0_4_ = (int)((fVar31 - fVar67) * local_910[0] + _LC12);
        auVar36._4_4_ = (int)((fVar49 - fVar70) * local_910[1] + _UNK_0012fb94);
        auVar36._8_4_ = (int)((fVar41 - fVar71) * local_910[2] + _UNK_0012fb98);
        auVar36._12_4_ = (int)((fVar50 - fVar72) * local_910[3] + _UNK_0012fb9c);
        auVar53._0_4_ = -(uint)(auVar36._0_4_ < (int)__LC24);
        auVar53._4_4_ = -(uint)(auVar36._4_4_ < (int)_UNK_0012fbe4);
        auVar53._8_4_ = -(uint)(auVar36._8_4_ < (int)_UNK_0012fbe8);
        auVar53._12_4_ = -(uint)(auVar36._12_4_ < (int)_UNK_0012fbec);
        auVar16._4_4_ = _UNK_0012fbe4;
        auVar16._0_4_ = __LC24;
        auVar16._8_4_ = _UNK_0012fbe8;
        auVar16._12_4_ = _UNK_0012fbec;
        auVar37 = auVar36 & auVar53 | ~auVar53 & auVar16;
        auVar54._0_4_ = -(uint)(auVar37._0_4_ < 0);
        auVar54._4_4_ = -(uint)(auVar37._4_4_ < 0);
        auVar54._8_4_ = -(uint)(auVar37._8_4_ < 0);
        auVar54._12_4_ = -(uint)(auVar37._12_4_ < 0);
        local_930 = ~auVar54 & auVar37;
        pfVar25 = (float *)local_920;
        do {
          if (pfVar25[4] != 0.0) {
            uVar24 = (ulong)(int)(&local_940)[lVar23];
            uVar27 = (ulong)*(int *)(local_930 + lVar23 * 4);
            if (uVar24 == uVar27) {
              lVar19 = lVar23 + uVar24 * 4;
              local_280[lVar19] = local_280[lVar19] + 1;
              local_180[lVar19] = local_180[lVar19] + 1;
              lVar19 = uVar24 * 3 + lVar23;
              lVar20 = lVar19 * 0x20;
              pauVar22 = (undefined1 (*) [16])local_880 + lVar19 * 2;
              auVar37 = minps(*pauVar22,auVar6);
              *pauVar22 = auVar37;
              auVar37 = maxps(*(undefined1 (*) [16])(local_870 + lVar20),auVar35);
              *(undefined1 (*) [16])(local_870 + lVar20) = auVar37;
            }
            else {
              local_960 = auVar6;
              local_950 = auVar35;
              uVar18 = uVar24;
              do {
                uVar21 = uVar18;
                uVar26 = uVar27;
                if (uVar27 <= uVar21) goto LAB_0010d200;
                uVar18 = uVar21 + 1;
              } while ((float)(uVar21 + 1) * pfVar25[8] + *pfVar25 <=
                       *(float *)(local_960 + lVar23 * 4));
              do {
                if ((float)uVar26 * pfVar25[8] + *pfVar25 < (&local_940)[lVar23 + -4]) break;
                uVar26 = uVar26 - 1;
              } while (uVar21 < uVar26);
LAB_0010d200:
              auVar68._4_4_ = _LC30;
              auVar68._0_4_ = _LC30;
              auVar68._8_4_ = _LC30;
              auVar68._12_4_ = _LC30;
              lVar19 = *(long *)(*(long *)(*in_RDX + 0x1e0) + (ulong)(uVar34 & 0x7ffffff) * 8);
              puVar28 = (uint *)((ulong)*(uint *)(pauVar30[1] + 0xc) * *(long *)(lVar19 + 0x60) +
                                *(long *)(lVar19 + 0x58));
              lVar20 = *(long *)(lVar19 + 0x88);
              lVar19 = *(long *)(lVar19 + 0x90);
              pfVar1 = (float *)(lVar20 + (ulong)*puVar28 * lVar19);
              local_8f0[0] = *pfVar1;
              local_8f0[1] = pfVar1[1];
              local_8f0[2] = pfVar1[2];
              local_8f0[3] = pfVar1[3];
              local_8c0 = local_8f0[0];
              fStack_8bc = local_8f0[1];
              fStack_8b8 = local_8f0[2];
              fStack_8b4 = local_8f0[3];
              pfVar1 = (float *)(lVar20 + (ulong)puVar28[1] * lVar19);
              local_8e0 = *pfVar1;
              fStack_8dc = pfVar1[1];
              fStack_8d8 = pfVar1[2];
              fStack_8d4 = pfVar1[3];
              pfVar1 = (float *)(lVar20 + (ulong)puVar28[2] * lVar19);
              local_8d0 = *pfVar1;
              fStack_8cc = pfVar1[1];
              fStack_8c8 = pfVar1[2];
              fStack_8c4 = pfVar1[3];
              auVar74._0_4_ = local_8e0 - local_8f0[0];
              auVar74._4_4_ = fStack_8dc - local_8f0[1];
              auVar74._8_4_ = fStack_8d8 - local_8f0[2];
              auVar74._12_4_ = fStack_8d4 - local_8f0[3];
              auVar38._0_4_ = local_8f0[0] - local_8d0;
              auVar38._4_4_ = local_8f0[1] - fStack_8cc;
              auVar38._8_4_ = local_8f0[2] - fStack_8c8;
              auVar38._12_4_ = local_8f0[3] - fStack_8c4;
              local_8b0 = divps(auVar68,auVar74);
              auVar69._0_4_ = local_8d0 - local_8e0;
              auVar69._4_4_ = fStack_8cc - fStack_8dc;
              auVar69._8_4_ = fStack_8c8 - fStack_8d8;
              auVar69._12_4_ = fStack_8c4 - fStack_8d4;
              auVar62._4_4_ = _LC30;
              auVar62._0_4_ = _LC30;
              auVar62._8_4_ = _LC30;
              auVar62._12_4_ = _LC30;
              local_8a0 = divps(auVar62,auVar69);
              auVar60._4_4_ = _LC30;
              auVar60._0_4_ = _LC30;
              auVar60._8_4_ = _LC30;
              auVar60._12_4_ = _LC30;
              local_890 = divps(auVar60,auVar38);
              fVar80 = fVar31;
              fVar83 = fVar49;
              fVar84 = fVar41;
              fVar85 = fVar50;
              fVar73 = fVar43;
              fVar77 = fVar45;
              fVar78 = fVar47;
              fVar79 = fVar48;
              if (uVar21 < uVar26) {
                fVar2 = *pfVar25;
                fVar3 = pfVar25[8];
                fVar4 = *(float *)(*(undefined1 (*) [16])local_8f0 + lVar23 * 4);
                pauVar22 = (undefined1 (*) [16])local_880 + (uVar21 * 3 + lVar23) * 2;
                do {
                  uVar21 = uVar21 + 1;
                  auVar81._4_4_ = _LC1;
                  auVar81._0_4_ = _LC1;
                  auVar81._8_4_ = _LC1;
                  auVar81._12_4_ = _LC1;
                  auVar75._4_4_ = _LC3;
                  auVar75._0_4_ = _LC3;
                  auVar75._8_4_ = _LC3;
                  auVar75._12_4_ = _LC3;
                  fVar33 = (float)uVar21 * fVar3 + fVar2;
                  auVar55._4_4_ = _LC1;
                  auVar55._0_4_ = _LC1;
                  auVar55._8_4_ = _LC1;
                  auVar55._12_4_ = _LC1;
                  auVar61._4_4_ = _LC3;
                  auVar61._0_4_ = _LC3;
                  auVar61._8_4_ = _LC3;
                  auVar61._12_4_ = _LC3;
                  pauVar29 = (undefined1 (*) [16])local_8f0;
                  fVar86 = fVar4;
                  do {
                    fVar5 = *(float *)(pauVar29[1] + lVar23 * 4);
                    if (fVar33 < fVar86) {
                      if (fVar86 < fVar33) {
                        fVar63 = fVar5;
                        if (((fVar86 < fVar33) || (fVar63 = fVar86, fVar5 < fVar33)) &&
                           (fVar33 < fVar63)) {
                          fVar63 = *(float *)*pauVar29;
                          fVar64 = *(float *)(*pauVar29 + 4);
                          fVar65 = *(float *)(*pauVar29 + 8);
                          fVar66 = *(float *)(*pauVar29 + 0xc);
                          goto LAB_0010d4c2;
                        }
                      }
                      else {
                        auVar37 = *pauVar29;
                        fVar63 = auVar37._0_4_;
                        fVar64 = auVar37._4_4_;
                        fVar65 = auVar37._8_4_;
                        fVar66 = auVar37._12_4_;
                        auVar75 = minps(auVar75,auVar37);
                        auVar81 = maxps(auVar81,auVar37);
                        if (fVar5 < fVar33) {
LAB_0010d4c2:
                          fVar86 = (fVar33 - fVar86) * *(float *)(pauVar29[4] + lVar23 * 4);
                          fVar63 = (*(float *)pauVar29[1] - fVar63) * fVar86 + fVar63;
                          fVar64 = (*(float *)(pauVar29[1] + 4) - fVar64) * fVar86 + fVar64;
                          fVar65 = (*(float *)(pauVar29[1] + 8) - fVar65) * fVar86 + fVar65;
                          fVar66 = (*(float *)(pauVar29[1] + 0xc) - fVar66) * fVar86 + fVar66;
                          auVar8._4_4_ = fVar64;
                          auVar8._0_4_ = fVar63;
                          auVar8._8_4_ = fVar65;
                          auVar8._12_4_ = fVar66;
                          auVar61 = minps(auVar61,auVar8);
                          auVar9._4_4_ = fVar64;
                          auVar9._0_4_ = fVar63;
                          auVar9._8_4_ = fVar65;
                          auVar9._12_4_ = fVar66;
                          auVar55 = maxps(auVar55,auVar9);
                          auVar10._4_4_ = fVar64;
                          auVar10._0_4_ = fVar63;
                          auVar10._8_4_ = fVar65;
                          auVar10._12_4_ = fVar66;
                          auVar75 = minps(auVar75,auVar10);
                          auVar11._4_4_ = fVar64;
                          auVar11._0_4_ = fVar63;
                          auVar11._8_4_ = fVar65;
                          auVar11._12_4_ = fVar66;
                          auVar81 = maxps(auVar81,auVar11);
                        }
                      }
                    }
                    else {
                      auVar37 = *pauVar29;
                      fVar63 = auVar37._0_4_;
                      fVar64 = auVar37._4_4_;
                      fVar65 = auVar37._8_4_;
                      fVar66 = auVar37._12_4_;
                      auVar61 = minps(auVar61,auVar37);
                      auVar55 = maxps(auVar55,auVar37);
                      if (fVar33 == fVar86) {
                        auVar75 = minps(auVar75,auVar37);
                        auVar81 = maxps(auVar81,auVar37);
                      }
                      else if (fVar33 < fVar5) goto LAB_0010d4c2;
                    }
                    pauVar29 = pauVar29 + 1;
                    fVar86 = fVar5;
                  } while ((undefined1 (*) [16])&local_8c0 != pauVar29);
                  auVar17._4_4_ = fVar83;
                  auVar17._0_4_ = fVar80;
                  auVar17._8_4_ = fVar84;
                  auVar17._12_4_ = fVar85;
                  auVar13._4_4_ = fVar77;
                  auVar13._0_4_ = fVar73;
                  auVar13._8_4_ = fVar78;
                  auVar13._12_4_ = fVar79;
                  auVar37 = maxps(auVar61,auVar13);
                  auVar14._4_4_ = fVar77;
                  auVar14._0_4_ = fVar73;
                  auVar14._8_4_ = fVar78;
                  auVar14._12_4_ = fVar79;
                  auVar76 = maxps(auVar75,auVar14);
                  auVar56 = minps(auVar55,auVar17);
                  auVar82 = minps(auVar81,auVar17);
                  fVar73 = auVar76._0_4_;
                  fVar77 = auVar76._4_4_;
                  fVar78 = auVar76._8_4_;
                  fVar79 = auVar76._12_4_;
                  auVar39._4_4_ = -(uint)(auVar37._4_4_ <= auVar56._4_4_);
                  auVar39._0_4_ = -(uint)(auVar37._0_4_ <= auVar56._0_4_);
                  auVar39._8_4_ = -(uint)(auVar37._8_4_ <= auVar56._8_4_);
                  auVar39._12_4_ = -(uint)(auVar37._12_4_ <= auVar56._12_4_);
                  fVar80 = auVar82._0_4_;
                  fVar83 = auVar82._4_4_;
                  fVar84 = auVar82._8_4_;
                  fVar85 = auVar82._12_4_;
                  uVar32 = movmskps((int)pauVar29,auVar39);
                  auVar37 = minps(*pauVar22,auVar37);
                  *pauVar22 = auVar37;
                  uVar24 = uVar24 + ((~uVar32 & 7) != 0);
                  auVar37 = maxps(pauVar22[1],auVar56);
                  pauVar22[1] = auVar37;
                  pauVar22 = pauVar22 + 6;
                } while (uVar26 != uVar21);
              }
              auVar40._4_4_ = -(uint)(fVar77 <= fVar83);
              auVar40._0_4_ = -(uint)(fVar73 <= fVar80);
              auVar40._8_4_ = -(uint)(fVar78 <= fVar84);
              auVar40._12_4_ = -(uint)(fVar79 <= fVar85);
              uVar32 = movmskps((int)uVar26,auVar40);
              lVar19 = uVar21 * 3 + lVar23;
              local_880[lVar23 + 0x180 + uVar24 * 4] = local_880[lVar23 + 0x180 + uVar24 * 4] + 1;
              lVar20 = lVar19 * 0x20;
              pauVar22 = (undefined1 (*) [16])local_880 + lVar19 * 2;
              local_880[lVar23 + 0x1c0 + (uVar27 - ((~uVar32 & 7) != 0)) * 4] =
                   local_880[lVar23 + 0x1c0 + (uVar27 - ((~uVar32 & 7) != 0)) * 4] + 1;
              auVar15._4_4_ = fVar77;
              auVar15._0_4_ = fVar73;
              auVar15._8_4_ = fVar78;
              auVar15._12_4_ = fVar79;
              auVar37 = minps(*pauVar22,auVar15);
              *pauVar22 = auVar37;
              auVar12._4_4_ = fVar83;
              auVar12._0_4_ = fVar80;
              auVar12._8_4_ = fVar84;
              auVar12._12_4_ = fVar85;
              auVar37 = maxps(*(undefined1 (*) [16])(local_870 + lVar20),auVar12);
              *(undefined1 (*) [16])(local_870 + lVar20) = auVar37;
            }
          }
          lVar23 = lVar23 + 1;
          pfVar25 = pfVar25 + 1;
        } while (lVar23 != 3);
      }
      pauVar30 = pauVar30 + 2;
    } while ((undefined1 (*) [16])(param_2 + uVar7 * 0x20) != pauVar30);
  }
  SpatialBinInfo<16ul,embree::PrimRef>::best((SpatialBinMapping *)param_1,(ulong)local_880);
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned
   long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#3}>
::
partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined8 *puVar1;
  undefined1 auVar2 [16];
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  long *plVar5;
  long *plVar6;
  float *pfVar7;
  int *piVar8;
  uint *puVar9;
  undefined8 uVar10;
  ulong uVar11;
  undefined1 (*pauVar12) [16];
  long lVar13;
  undefined1 (*pauVar14) [16];
  int iVar15;
  ulong uVar16;
  undefined1 (*pauVar17) [16];
  long lVar18;
  ulong uVar19;
  long lVar20;
  long lVar21;
  undefined1 auVar22 [16];
  uint uVar23;
  uint uVar26;
  uint uVar27;
  uint uVar28;
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  undefined1 auVar29 [16];
  uint uVar30;
  uint uVar32;
  uint uVar33;
  uint uVar34;
  undefined1 auVar31 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 local_68 [16];
  undefined1 local_58 [16];
  undefined1 local_48 [16];
  
  plVar5 = *(long **)this;
  lVar13 = *plVar5;
  auVar35._4_4_ = _LC1;
  auVar35._0_4_ = _LC1;
  auVar35._8_4_ = _LC1;
  auVar35._12_4_ = _LC1;
  auVar36._0_8_ = CONCAT44(_LC3,_LC3);
  auVar36._8_4_ = _LC3;
  auVar36._12_4_ = _LC3;
  plVar6 = (long *)plVar5[2];
  auVar22._8_4_ = _LC3;
  auVar22._0_8_ = auVar36._0_8_;
  auVar22._12_4_ = _LC3;
  auVar37._4_4_ = _LC1;
  auVar37._0_4_ = _LC1;
  auVar37._8_4_ = _LC1;
  auVar37._12_4_ = _LC1;
  local_58._4_4_ = _LC1;
  local_58._0_4_ = _LC1;
  local_58._8_4_ = _LC1;
  local_58._12_4_ = _LC1;
  auVar38._8_4_ = _LC3;
  auVar38._0_8_ = auVar36._0_8_;
  auVar38._12_4_ = _LC3;
  uVar19 = plVar5[1] * param_1;
  lVar21 = 0;
  local_48._4_4_ = _LC1;
  local_48._0_4_ = _LC1;
  local_48._8_4_ = _LC1;
  local_48._12_4_ = _LC1;
  uVar11 = uVar19 / (ulong)plVar5[6];
  lVar20 = 0;
  pauVar17 = (undefined1 (*) [16])(uVar11 * 0x20 + lVar13);
  pauVar14 = (undefined1 (*) [16])
             (lVar13 + -0x20 + ((plVar5[1] + uVar19) / (ulong)plVar5[6]) * 0x20);
  local_68 = auVar36;
  do {
    if (pauVar14 < pauVar17) {
LAB_0010d795:
      *(ulong *)(*(long *)this + 0x40 + param_1 * 8) = uVar11;
      *(ulong *)(*(long *)this + 0x280 + param_1 * 8) = ((long)pauVar17 - lVar13 >> 5) - uVar11;
      lVar13 = param_1 * 0x50;
      pauVar14 = (undefined1 (*) [16])(*(long *)this + 0xcc0 + lVar13);
      lVar18 = *(long *)this + lVar13;
      *pauVar14 = auVar38;
      pauVar14[1] = auVar37;
      pauVar14[2] = auVar22;
      pauVar14[3] = auVar35;
      *(undefined8 *)(lVar18 + 0xd00) = 0;
      *(long *)(lVar18 + 0xd08) = lVar21;
      puVar1 = (undefined8 *)(*(long *)this + 0x20c0 + lVar13);
      lVar13 = lVar13 + *(long *)this;
      *puVar1 = local_68._0_8_;
      puVar1[1] = local_68._8_8_;
      *(undefined1 (*) [16])(puVar1 + 4) = auVar36;
      puVar1[2] = local_58._0_8_;
      puVar1[3] = local_58._8_8_;
      *(undefined4 *)(puVar1 + 6) = local_48._0_4_;
      *(undefined4 *)((long)puVar1 + 0x34) = local_48._4_4_;
      *(undefined4 *)(puVar1 + 7) = local_48._8_4_;
      *(undefined4 *)((long)puVar1 + 0x3c) = local_48._12_4_;
      *(undefined8 *)(lVar13 + 0x2100) = 0;
      *(long *)(lVar13 + 0x2108) = lVar20;
      return;
    }
    auVar2 = pauVar17[1];
    auVar3 = *pauVar17;
    pfVar7 = (float *)*plVar6;
    auVar29._0_4_ = auVar2._0_4_ + auVar3._0_4_;
    auVar29._4_4_ = auVar2._4_4_ + auVar3._4_4_;
    auVar29._8_4_ = auVar2._8_4_ + auVar3._8_4_;
    auVar29._12_4_ = auVar2._12_4_ + auVar3._12_4_;
    piVar8 = (int *)plVar6[1];
    puVar9 = (uint *)plVar6[2];
    uVar23 = (uint)((_LC22 * auVar29._0_4_ - *pfVar7) * pfVar7[4] + _LC12);
    uVar26 = (uint)((_UNK_0012fbd4 * auVar29._4_4_ - pfVar7[1]) * pfVar7[5] + _UNK_0012fb94);
    uVar27 = (uint)((_UNK_0012fbd8 * auVar29._8_4_ - pfVar7[2]) * pfVar7[6] + _UNK_0012fb98);
    uVar28 = (uint)((_UNK_0012fbdc * auVar29._12_4_ - pfVar7[3]) * pfVar7[7] + _UNK_0012fb9c);
    uVar30 = -(uint)((int)uVar23 < (int)__LC24);
    uVar32 = -(uint)((int)uVar26 < (int)_UNK_0012fbe4);
    uVar33 = -(uint)((int)uVar27 < (int)_UNK_0012fbe8);
    uVar34 = -(uint)((int)uVar28 < (int)_UNK_0012fbec);
    uVar23 = uVar23 & uVar30 | ~uVar30 & __LC24;
    uVar26 = uVar26 & uVar32 | ~uVar32 & _UNK_0012fbe4;
    uVar27 = uVar27 & uVar33 | ~uVar33 & _UNK_0012fbe8;
    uVar28 = uVar28 & uVar34 | ~uVar34 & _UNK_0012fbec;
    auVar24._0_4_ = -(uint)((int)(~-(uint)((int)uVar23 < 0) & uVar23) < *piVar8) & *puVar9;
    auVar24._4_4_ = -(uint)((int)(~-(uint)((int)uVar26 < 0) & uVar26) < piVar8[1]) & puVar9[1];
    auVar24._8_4_ = -(uint)((int)(~-(uint)((int)uVar27 < 0) & uVar27) < piVar8[2]) & puVar9[2];
    auVar24._12_4_ = -(uint)((int)(~-(uint)((int)uVar28 < 0) & uVar28) < piVar8[3]) & puVar9[3];
    iVar15 = movmskps((int)puVar9,auVar24);
    if (iVar15 == 0) {
      while( true ) {
        auVar24 = pauVar14[1];
        auVar4 = *pauVar14;
        pauVar12 = pauVar14 + -2;
        auVar31._0_4_ = auVar24._0_4_ + auVar4._0_4_;
        auVar31._4_4_ = auVar24._4_4_ + auVar4._4_4_;
        auVar31._8_4_ = auVar24._8_4_ + auVar4._8_4_;
        auVar31._12_4_ = auVar24._12_4_ + auVar4._12_4_;
        uVar16 = (ulong)(*(uint *)(*pauVar14 + 0xc) >> 0x1b);
        uVar23 = (uint)((_LC22 * auVar31._0_4_ - *pfVar7) * pfVar7[4] + _LC12);
        uVar26 = (uint)((_UNK_0012fbd4 * auVar31._4_4_ - pfVar7[1]) * pfVar7[5] + _UNK_0012fb94);
        uVar27 = (uint)((_UNK_0012fbd8 * auVar31._8_4_ - pfVar7[2]) * pfVar7[6] + _UNK_0012fb98);
        uVar28 = (uint)((_UNK_0012fbdc * auVar31._12_4_ - pfVar7[3]) * pfVar7[7] + _UNK_0012fb9c);
        uVar30 = -(uint)((int)uVar23 < (int)__LC24);
        uVar32 = -(uint)((int)uVar26 < (int)_UNK_0012fbe4);
        uVar33 = -(uint)((int)uVar27 < (int)_UNK_0012fbe8);
        uVar34 = -(uint)((int)uVar28 < (int)_UNK_0012fbec);
        uVar23 = uVar30 & uVar23 | ~uVar30 & __LC24;
        uVar26 = uVar32 & uVar26 | ~uVar32 & _UNK_0012fbe4;
        uVar27 = uVar33 & uVar27 | ~uVar33 & _UNK_0012fbe8;
        uVar28 = uVar34 & uVar28 | ~uVar34 & _UNK_0012fbec;
        auVar25._0_4_ = -(uint)((int)(~-(uint)((int)uVar23 < 0) & uVar23) < *piVar8) & *puVar9;
        auVar25._4_4_ = -(uint)((int)(~-(uint)((int)uVar26 < 0) & uVar26) < piVar8[1]) & puVar9[1];
        auVar25._8_4_ = -(uint)((int)(~-(uint)((int)uVar27 < 0) & uVar27) < piVar8[2]) & puVar9[2];
        auVar25._12_4_ = -(uint)((int)(~-(uint)((int)uVar28 < 0) & uVar28) < piVar8[3]) & puVar9[3];
        uVar23 = movmskps((int)uVar19,auVar25);
        uVar19 = (ulong)uVar23;
        if (uVar23 != 0) break;
        local_68 = minps(local_68,auVar4);
        local_58 = maxps(local_58,auVar24);
        lVar20 = lVar20 + uVar16;
        auVar36 = minps(auVar36,auVar31);
        local_48 = maxps(local_48,auVar31);
        pauVar14 = pauVar12;
        if (pauVar12 < pauVar17) {
          goto LAB_0010d795;
        }
      }
      uVar23 = *(uint *)(*pauVar17 + 0xc);
      auVar37 = maxps(auVar37,auVar24);
      local_48 = maxps(local_48,auVar29);
      *pauVar17 = auVar4;
      auVar38 = minps(auVar38,auVar4);
      local_58 = maxps(local_58,auVar2);
      auVar36 = minps(auVar36,auVar29);
      local_68 = minps(local_68,auVar3);
      uVar10 = *(undefined8 *)(pauVar14[1] + 8);
      lVar20 = lVar20 + (ulong)(uVar23 >> 0x1b);
      auVar22 = minps(auVar22,auVar31);
      *(undefined8 *)pauVar17[1] = *(undefined8 *)pauVar14[1];
      *(undefined8 *)(pauVar17[1] + 8) = uVar10;
      auVar35 = maxps(auVar35,auVar31);
      *pauVar14 = auVar3;
      pauVar14[1] = auVar2;
    }
    else {
      auVar38 = minps(auVar38,auVar3);
      auVar37 = maxps(auVar37,auVar2);
      auVar22 = minps(auVar22,auVar29);
      auVar35 = maxps(auVar35,auVar29);
      uVar16 = (ulong)(*(uint *)(*pauVar17 + 0xc) >> 0x1b);
      pauVar12 = pauVar14;
    }
    lVar21 = lVar21 + uVar16;
    pauVar17 = pauVar17 + 2;
    pauVar14 = pauVar12;
  } while( true );
}



/* embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned
   long)#2}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#3}>
::
partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&)
::{lambda(unsigned_long)#2}::operator()(_lambda_unsigned_long__2_ *this,ulong param_1)

{
  long *plVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  long *plVar7;
  ulong uVar8;
  undefined8 *puVar9;
  undefined8 *puVar10;
  long *plVar11;
  ulong uVar12;
  ulong uVar13;
  ulong uVar14;
  ulong uVar15;
  ulong uVar16;
  long lVar17;
  undefined8 *puVar18;
  long lVar19;
  undefined8 *puVar20;
  long *plVar21;
  
  plVar1 = *(long **)(this + 8);
  lVar17 = plVar1[0x98];
  uVar12 = param_1 * **(long **)this;
  uVar16 = plVar1[0x99] - lVar17;
  uVar8 = uVar12 / (ulong)plVar1[6];
  uVar14 = uVar8;
  if (uVar8 < uVar16) {
    plVar11 = plVar1 + 0x98;
  }
  else {
    plVar21 = plVar1 + 0x9a;
    do {
      plVar11 = plVar21;
      lVar17 = *plVar11;
      uVar14 = uVar14 - uVar16;
      uVar16 = plVar11[1] - lVar17;
      plVar21 = plVar11 + 2;
    } while (uVar16 <= uVar14);
  }
  lVar19 = plVar1[0x118];
  uVar15 = plVar1[0x119] - lVar19;
  uVar13 = uVar8;
  if (uVar8 < uVar15) {
    plVar21 = plVar1 + 0x118;
  }
  else {
    plVar7 = plVar1 + 0x11a;
    do {
      plVar21 = plVar7;
      lVar19 = *plVar21;
      uVar13 = uVar13 - uVar15;
      uVar15 = plVar21[1] - lVar19;
      plVar7 = plVar21 + 2;
    } while (uVar15 <= uVar13);
  }
  uVar16 = uVar16 - uVar14;
  uVar8 = (**(long **)this + uVar12) / (ulong)plVar1[6] - uVar8;
  uVar15 = uVar15 - uVar13;
  puVar18 = (undefined8 *)((lVar17 + uVar14) * 0x20 + *plVar1);
  puVar20 = (undefined8 *)((lVar19 + uVar13) * 0x20 + *plVar1);
  uVar14 = uVar8;
  if (uVar16 <= uVar8) {
    uVar14 = uVar16;
  }
  if (uVar15 < uVar14) {
    uVar14 = uVar15;
  }
  if (uVar8 == 0) {
    return;
  }
  do {
    if (uVar15 == 0) {
      uVar15 = plVar21[3] - plVar21[2];
      puVar20 = (undefined8 *)(plVar21[2] * 0x20 + *plVar1);
      uVar14 = uVar8;
      if (uVar15 <= uVar8) {
        uVar14 = uVar15;
      }
      if (uVar16 < uVar14) {
        uVar14 = uVar16;
      }
      plVar21 = plVar21 + 2;
    }
    uVar8 = uVar8 - uVar14;
    uVar16 = uVar16 - uVar14;
    uVar15 = uVar15 - uVar14;
    puVar9 = puVar18;
    puVar10 = puVar20;
    uVar12 = uVar14;
    if (uVar14 != 0) {
      do {
        uVar2 = puVar10[1];
        uVar3 = *puVar9;
        uVar4 = puVar9[1];
        uVar5 = puVar9[2];
        uVar6 = puVar9[3];
        *puVar9 = *puVar10;
        puVar9[1] = uVar2;
        uVar2 = puVar10[3];
        puVar9[2] = puVar10[2];
        puVar9[3] = uVar2;
        *puVar10 = uVar3;
        puVar10[1] = uVar4;
        puVar10[2] = uVar5;
        puVar10[3] = uVar6;
        uVar12 = uVar12 - 1;
        puVar9 = puVar9 + 4;
        puVar10 = puVar10 + 4;
      } while (uVar12 != 0);
      puVar20 = puVar20 + uVar14 * 4;
      puVar18 = puVar18 + uVar14 * 4;
      if (uVar8 == 0) {
        return;
      }
    }
    if (uVar16 == 0) {
      uVar16 = plVar11[3] - plVar11[2];
      puVar18 = (undefined8 *)(plVar11[2] * 0x20 + *plVar1);
      uVar14 = uVar15;
      if (uVar8 <= uVar15) {
        uVar14 = uVar8;
      }
      if (uVar16 < uVar14) {
        uVar14 = uVar16;
      }
      plVar11 = plVar11 + 2;
    }
    else {
      uVar14 = 0;
    }
  } while( true );
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned
   long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#3}>
::
partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined4 *puVar1;
  undefined1 auVar2 [16];
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  long *plVar5;
  long *plVar6;
  int *piVar7;
  uint *puVar8;
  undefined8 uVar9;
  ulong uVar10;
  undefined1 (*pauVar11) [16];
  long lVar12;
  undefined1 (*pauVar13) [16];
  int iVar14;
  ulong uVar15;
  undefined1 (*pauVar16) [16];
  long lVar17;
  uint uVar18;
  ulong uVar19;
  long lVar20;
  long lVar21;
  undefined4 uVar22;
  undefined4 uVar24;
  undefined4 uVar25;
  undefined1 auVar23 [16];
  undefined4 uVar26;
  undefined1 auVar27 [16];
  undefined1 auVar28 [16];
  undefined1 auVar29 [16];
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 local_58 [16];
  undefined1 local_48 [16];
  
  plVar5 = *(long **)this;
  lVar12 = *plVar5;
  auVar29._4_4_ = _LC1;
  auVar29._0_4_ = _LC1;
  auVar29._8_4_ = _LC1;
  auVar29._12_4_ = _LC1;
  auVar33._0_8_ = CONCAT44(_LC3,_LC3);
  auVar33._8_4_ = _LC3;
  auVar33._12_4_ = _LC3;
  plVar6 = (long *)plVar5[2];
  auVar34._4_4_ = _LC1;
  auVar34._0_4_ = _LC1;
  auVar34._8_4_ = _LC1;
  auVar34._12_4_ = _LC1;
  local_58._4_4_ = _LC1;
  local_58._0_4_ = _LC1;
  local_58._8_4_ = _LC1;
  local_58._12_4_ = _LC1;
  auVar35._8_4_ = _LC3;
  auVar35._0_8_ = auVar33._0_8_;
  auVar35._12_4_ = _LC3;
  auVar32._8_4_ = _LC3;
  auVar32._0_8_ = auVar33._0_8_;
  auVar32._12_4_ = _LC3;
  uVar19 = plVar5[1] * param_1;
  local_48._4_4_ = _LC1;
  local_48._0_4_ = _LC1;
  local_48._8_4_ = _LC1;
  local_48._12_4_ = _LC1;
  lVar21 = 0;
  uVar10 = uVar19 / (ulong)plVar5[6];
  lVar20 = 0;
  pauVar16 = (undefined1 (*) [16])(uVar10 * 0x20 + lVar12);
  pauVar11 = (undefined1 (*) [16])
             (lVar12 + -0x20 + ((plVar5[1] + uVar19) / (ulong)plVar5[6]) * 0x20);
  uVar22 = _LC3;
  uVar24 = _LC3;
  uVar25 = _LC3;
  uVar26 = _LC3;
  do {
    if (pauVar11 < pauVar16) {
LAB_0010dc90:
      *(ulong *)(*(long *)this + 0x40 + param_1 * 8) = uVar10;
      *(ulong *)(*(long *)this + 0x280 + param_1 * 8) = ((long)pauVar16 - lVar12 >> 5) - uVar10;
      lVar12 = param_1 * 0x50;
      pauVar11 = (undefined1 (*) [16])(*(long *)this + 0xcc0 + lVar12);
      lVar17 = *(long *)this + lVar12;
      pauVar11[3] = auVar29;
      *pauVar11 = auVar35;
      pauVar11[1] = auVar34;
      pauVar11[2] = auVar32;
      *(undefined8 *)(lVar17 + 0xd00) = 0;
      *(long *)(lVar17 + 0xd08) = lVar21;
      puVar1 = (undefined4 *)(*(long *)this + 0x20c0 + lVar12);
      lVar12 = lVar12 + *(long *)this;
      *puVar1 = uVar22;
      puVar1[1] = uVar24;
      puVar1[2] = uVar25;
      puVar1[3] = uVar26;
      *(undefined8 *)(puVar1 + 4) = local_58._0_8_;
      *(undefined8 *)(puVar1 + 6) = local_58._8_8_;
      *(undefined1 (*) [16])(puVar1 + 8) = auVar33;
      puVar1[0xc] = local_48._0_4_;
      puVar1[0xd] = local_48._4_4_;
      puVar1[0xe] = local_48._8_4_;
      puVar1[0xf] = local_48._12_4_;
      *(undefined8 *)(lVar12 + 0x2100) = 0;
      *(long *)(lVar12 + 0x2108) = lVar20;
      return;
    }
    auVar2 = pauVar16[1];
    auVar3 = *pauVar16;
    lVar17 = *plVar6;
    auVar27._0_4_ = auVar2._0_4_ + auVar3._0_4_;
    auVar27._4_4_ = auVar2._4_4_ + auVar3._4_4_;
    auVar27._8_4_ = auVar2._8_4_ + auVar3._8_4_;
    auVar27._12_4_ = auVar2._12_4_ + auVar3._12_4_;
    piVar7 = (int *)plVar6[1];
    puVar8 = (uint *)plVar6[2];
    auVar30._0_4_ =
         -(uint)((int)((auVar27._0_4_ - *(float *)(lVar17 + 0x20)) * *(float *)(lVar17 + 0x30) +
                      _LC12) < *piVar7) & *puVar8;
    auVar30._4_4_ =
         -(uint)((int)((auVar27._4_4_ - *(float *)(lVar17 + 0x24)) * *(float *)(lVar17 + 0x34) +
                      _UNK_0012fb94) < piVar7[1]) & puVar8[1];
    auVar30._8_4_ =
         -(uint)((int)((auVar27._8_4_ - *(float *)(lVar17 + 0x28)) * *(float *)(lVar17 + 0x38) +
                      _UNK_0012fb98) < piVar7[2]) & puVar8[2];
    auVar30._12_4_ =
         -(uint)((int)((auVar27._12_4_ - *(float *)(lVar17 + 0x2c)) * *(float *)(lVar17 + 0x3c) +
                      _UNK_0012fb9c) < piVar7[3]) & puVar8[3];
    iVar14 = movmskps((int)puVar8,auVar30);
    if (iVar14 == 0) {
      auVar23._4_4_ = uVar24;
      auVar23._0_4_ = uVar22;
      auVar23._8_4_ = uVar25;
      auVar23._12_4_ = uVar26;
      pauVar13 = pauVar11;
      while( true ) {
        auVar30 = pauVar13[1];
        auVar4 = *pauVar13;
        pauVar11 = pauVar13 + -2;
        auVar31._0_4_ = auVar30._0_4_ + auVar4._0_4_;
        auVar31._4_4_ = auVar30._4_4_ + auVar4._4_4_;
        auVar31._8_4_ = auVar30._8_4_ + auVar4._8_4_;
        auVar31._12_4_ = auVar30._12_4_ + auVar4._12_4_;
        uVar15 = (ulong)(*(uint *)(*pauVar13 + 0xc) >> 0x1b);
        auVar28._0_4_ =
             -(uint)((int)((auVar31._0_4_ - *(float *)(lVar17 + 0x20)) * *(float *)(lVar17 + 0x30) +
                          _LC12) < *piVar7) & *puVar8;
        auVar28._4_4_ =
             -(uint)((int)((auVar31._4_4_ - *(float *)(lVar17 + 0x24)) * *(float *)(lVar17 + 0x34) +
                          _UNK_0012fb94) < piVar7[1]) & puVar8[1];
        auVar28._8_4_ =
             -(uint)((int)((auVar31._8_4_ - *(float *)(lVar17 + 0x28)) * *(float *)(lVar17 + 0x38) +
                          _UNK_0012fb98) < piVar7[2]) & puVar8[2];
        auVar28._12_4_ =
             -(uint)((int)((auVar31._12_4_ - *(float *)(lVar17 + 0x2c)) * *(float *)(lVar17 + 0x3c)
                          + _UNK_0012fb9c) < piVar7[3]) & puVar8[3];
        uVar18 = movmskps((int)uVar19,auVar28);
        uVar19 = (ulong)uVar18;
        if (uVar18 != 0) break;
        auVar23 = minps(auVar23,auVar4);
        local_58 = maxps(local_58,auVar30);
        lVar20 = lVar20 + uVar15;
        auVar33 = minps(auVar33,auVar31);
        local_48 = maxps(local_48,auVar31);
        pauVar13 = pauVar11;
        if (pauVar11 < pauVar16) {
          uVar22 = auVar23._0_4_;
          uVar24 = auVar23._4_4_;
          uVar25 = auVar23._8_4_;
          uVar26 = auVar23._12_4_;
          goto LAB_0010dc90;
        }
      }
      uVar18 = *(uint *)(*pauVar16 + 0xc);
      auVar23 = minps(auVar23,auVar3);
      local_48 = maxps(local_48,auVar27);
      *pauVar16 = auVar4;
      local_58 = maxps(local_58,auVar2);
      auVar34 = maxps(auVar34,auVar30);
      auVar35 = minps(auVar35,auVar4);
      auVar32 = minps(auVar32,auVar31);
      lVar20 = lVar20 + (ulong)(uVar18 >> 0x1b);
      uVar22 = auVar23._0_4_;
      uVar24 = auVar23._4_4_;
      uVar25 = auVar23._8_4_;
      uVar26 = auVar23._12_4_;
      uVar9 = *(undefined8 *)(pauVar13[1] + 8);
      auVar29 = maxps(auVar29,auVar31);
      auVar33 = minps(auVar33,auVar27);
      *(undefined8 *)pauVar16[1] = *(undefined8 *)pauVar13[1];
      *(undefined8 *)(pauVar16[1] + 8) = uVar9;
      *pauVar13 = auVar3;
      pauVar13[1] = auVar2;
    }
    else {
      auVar35 = minps(auVar35,auVar3);
      auVar34 = maxps(auVar34,auVar2);
      auVar32 = minps(auVar32,auVar27);
      auVar29 = maxps(auVar29,auVar27);
      uVar15 = (ulong)(*(uint *)(*pauVar16 + 0xc) >> 0x1b);
    }
    lVar21 = lVar21 + uVar15;
    pauVar16 = pauVar16 + 2;
  } while( true );
}



/* embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned
   long)#2}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#3}>
::
partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&)
::{lambda(unsigned_long)#2}::operator()(_lambda_unsigned_long__2_ *this,ulong param_1)

{
  long *plVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  long *plVar7;
  ulong uVar8;
  undefined8 *puVar9;
  undefined8 *puVar10;
  long *plVar11;
  ulong uVar12;
  ulong uVar13;
  ulong uVar14;
  ulong uVar15;
  ulong uVar16;
  long lVar17;
  undefined8 *puVar18;
  long lVar19;
  undefined8 *puVar20;
  long *plVar21;
  
  plVar1 = *(long **)(this + 8);
  lVar17 = plVar1[0x98];
  uVar12 = param_1 * **(long **)this;
  uVar16 = plVar1[0x99] - lVar17;
  uVar8 = uVar12 / (ulong)plVar1[6];
  uVar14 = uVar8;
  if (uVar8 < uVar16) {
    plVar11 = plVar1 + 0x98;
  }
  else {
    plVar21 = plVar1 + 0x9a;
    do {
      plVar11 = plVar21;
      lVar17 = *plVar11;
      uVar14 = uVar14 - uVar16;
      uVar16 = plVar11[1] - lVar17;
      plVar21 = plVar11 + 2;
    } while (uVar16 <= uVar14);
  }
  lVar19 = plVar1[0x118];
  uVar15 = plVar1[0x119] - lVar19;
  uVar13 = uVar8;
  if (uVar8 < uVar15) {
    plVar21 = plVar1 + 0x118;
  }
  else {
    plVar7 = plVar1 + 0x11a;
    do {
      plVar21 = plVar7;
      lVar19 = *plVar21;
      uVar13 = uVar13 - uVar15;
      uVar15 = plVar21[1] - lVar19;
      plVar7 = plVar21 + 2;
    } while (uVar15 <= uVar13);
  }
  uVar16 = uVar16 - uVar14;
  uVar8 = (**(long **)this + uVar12) / (ulong)plVar1[6] - uVar8;
  uVar15 = uVar15 - uVar13;
  puVar18 = (undefined8 *)((lVar17 + uVar14) * 0x20 + *plVar1);
  puVar20 = (undefined8 *)((lVar19 + uVar13) * 0x20 + *plVar1);
  uVar14 = uVar8;
  if (uVar16 <= uVar8) {
    uVar14 = uVar16;
  }
  if (uVar15 < uVar14) {
    uVar14 = uVar15;
  }
  if (uVar8 == 0) {
    return;
  }
  do {
    if (uVar15 == 0) {
      uVar15 = plVar21[3] - plVar21[2];
      puVar20 = (undefined8 *)(plVar21[2] * 0x20 + *plVar1);
      uVar14 = uVar8;
      if (uVar15 <= uVar8) {
        uVar14 = uVar15;
      }
      if (uVar16 < uVar14) {
        uVar14 = uVar16;
      }
      plVar21 = plVar21 + 2;
    }
    uVar8 = uVar8 - uVar14;
    uVar16 = uVar16 - uVar14;
    uVar15 = uVar15 - uVar14;
    puVar9 = puVar18;
    puVar10 = puVar20;
    uVar12 = uVar14;
    if (uVar14 != 0) {
      do {
        uVar2 = puVar10[1];
        uVar3 = *puVar9;
        uVar4 = puVar9[1];
        uVar5 = puVar9[2];
        uVar6 = puVar9[3];
        *puVar9 = *puVar10;
        puVar9[1] = uVar2;
        uVar2 = puVar10[3];
        puVar9[2] = puVar10[2];
        puVar9[3] = uVar2;
        *puVar10 = uVar3;
        puVar10[1] = uVar4;
        puVar10[2] = uVar5;
        puVar10[3] = uVar6;
        uVar12 = uVar12 - 1;
        puVar9 = puVar9 + 4;
        puVar10 = puVar10 + 4;
      } while (uVar12 != 0);
      puVar20 = puVar20 + uVar14 * 4;
      puVar18 = puVar18 + uVar14 * 4;
      if (uVar8 == 0) {
        return;
      }
    }
    if (uVar16 == 0) {
      uVar16 = plVar11[3] - plVar11[2];
      puVar18 = (undefined8 *)(plVar11[2] * 0x20 + *plVar1);
      uVar14 = uVar15;
      if (uVar8 <= uVar15) {
        uVar14 = uVar8;
      }
      if (uVar16 < uVar14) {
        uVar14 = uVar16;
      }
      plVar11 = plVar11 + 2;
    }
    else {
      uVar14 = 0;
    }
  } while( true );
}



/* float embree::parallel_reduce_internal<unsigned long, float,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&)::{lambda(float const&,
   float const&)#2}>(unsigned long, unsigned long, unsigned long, unsigned long, float const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&)::{lambda(float const&,
   float const&)#2} const&) */

float embree::
      parallel_reduce_internal<unsigned_long,float,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::Pr___ProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(float_const&,float_const&)_2_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,float *param_5,
                _lambda_embree__range<unsigned_long>_const___1_ *param_6,
                _lambda_float_const__float_const___2_ *param_7)

{
  ulong uVar1;
  float *pfVar2;
  long in_FS_OFFSET;
  float fVar3;
  ulong local_2118;
  ulong local_2110;
  ulong local_2108;
  undefined8 **local_2100;
  ulong **local_20f8;
  ulong *local_20f0;
  ulong *local_20e8;
  ulong *local_20e0;
  float *local_20d8;
  _lambda_embree__range<unsigned_long>_const___1_ *local_20d0;
  float local_20c0 [2048];
  float *local_c0;
  ulong local_b8;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2118 = param_3;
  local_2110 = param_2;
  local_2108 = param_1;
  uVar1 = embree::TaskScheduler::threadCount();
  if (local_2108 < uVar1) {
    uVar1 = local_2108;
  }
  local_20f0 = &local_2110;
  local_20e8 = &local_2118;
  local_20e0 = &local_2108;
  local_2108 = 0x200;
  if (uVar1 < 0x201) {
    local_2108 = uVar1;
  }
  local_20d8 = local_20c0;
  local_20d0 = param_6;
  local_c0 = local_20c0;
  local_b8 = local_2108;
  if (uVar1 == 0) {
    fVar3 = *param_5;
  }
  else {
    local_20f8 = &local_20f0;
    local_2100 = (ulong **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImfZNS_4sse227createPrimRefArray_presplitIZNS4_27createPrimRefArray_presplitINS_12TriangleMeshENS4_23TriangleSplitterFactoryEEENS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEPNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISJ_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSJ_jRKNS4_13SplittingGridEPSJ_RjE3_ZNS6_IS7_S8_EESD_SF_SH_bmSN_SP_EUlSR_E4_SM_EESD_mRT1_RKSD_RKT_RKT0_EUlRKNS_5rangeImEEE_ZNS5_ISX_SY_SM_EESD_mS10_S12_S15_S18_EUlRKfS1F_E0_EES16_S13_S13_S13_S13_S18_RKSZ_RKT2_EUlmE_EEvS13_S18_EUlS1C_E_EEvS13_S13_S13_S18_PNS0_16TaskGroupContextE
              (0,local_2108,1,&local_20f8,&local_2100);
    embree::TaskScheduler::wait();
    if (local_2100 != (ulong **)0x0) {
      local_20f8 = local_2100;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_20f8);
    }
    fVar3 = *param_5;
    if (local_2108 != 0) {
      pfVar2 = local_c0;
      do {
        fVar3 = fVar3 + *pfVar2;
        pfVar2 = pfVar2 + 1;
      } while (local_c0 + local_2108 != pfVar2);
    }
  }
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return fVar3;
}



/* unsigned long embree::parallel_reduce_internal<unsigned long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&)::{lambda(unsigned long
   const&, unsigned long const&)#6}>(unsigned long, unsigned long, unsigned long, unsigned long,
   unsigned long const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&)::{lambda(unsigned long
   const&, unsigned long const&)#6} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<em___)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(unsigned_long_const&,unsigned_long_const&)_6_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,ulong *param_5,
                _lambda_embree__range<unsigned_long>_const___5_ *param_6,
                _lambda_unsigned_long_const__unsigned_long_const___6_ *param_7)

{
  ulong uVar1;
  long *plVar2;
  long in_FS_OFFSET;
  ulong local_2118;
  ulong local_2110;
  ulong local_2108;
  undefined8 **local_2100;
  ulong **local_20f8;
  ulong *local_20f0;
  ulong *local_20e8;
  ulong *local_20e0;
  long *local_20d8;
  _lambda_embree__range<unsigned_long>_const___5_ *local_20d0;
  long local_20c0 [1024];
  long *local_c0;
  ulong local_b8;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2118 = param_3;
  local_2110 = param_2;
  local_2108 = param_1;
  uVar1 = embree::TaskScheduler::threadCount();
  if (local_2108 < uVar1) {
    uVar1 = local_2108;
  }
  local_20f0 = &local_2110;
  local_20e8 = &local_2118;
  local_20e0 = &local_2108;
  local_2108 = 0x200;
  if (uVar1 < 0x201) {
    local_2108 = uVar1;
  }
  local_20d8 = local_20c0;
  local_20d0 = param_6;
  local_c0 = local_20c0;
  local_b8 = local_2108;
  if (uVar1 == 0) {
    uVar1 = *param_5;
  }
  else {
    local_20f8 = &local_20f0;
    local_2100 = (ulong **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImmZNS_4sse227createPrimRefArray_presplitIZNS4_27createPrimRefArray_presplitINS_12TriangleMeshENS4_23TriangleSplitterFactoryEEENS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEPNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISJ_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSJ_jRKNS4_13SplittingGridEPSJ_RjE3_ZNS6_IS7_S8_EESD_SF_SH_bmSN_SP_EUlSR_E4_SM_EESD_mRT1_RKSD_RKT_RKT0_EUlRKNS_5rangeImEEE3_ZNS5_ISX_SY_SM_EESD_mS10_S12_S15_S18_EUlRKmS1F_E4_EES16_S13_S13_S13_S13_S18_RKSZ_RKT2_EUlmE_EEvS13_S18_EUlS1C_E_EEvS13_S13_S13_S18_PNS0_16TaskGroupContextE
              (0,local_2108,1,&local_20f8,&local_2100);
    embree::TaskScheduler::wait();
    if (local_2100 != (ulong **)0x0) {
      local_20f8 = local_2100;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_20f8);
    }
    uVar1 = *param_5;
    if (local_2108 != 0) {
      plVar2 = local_c0;
      do {
        uVar1 = uVar1 + *plVar2;
        plVar2 = plVar2 + 1;
      } while (local_c0 + local_2108 != plVar2);
    }
  }
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar1;
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] [clone .cold] */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] [clone .cold] */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___2_ *param_4,TaskGroupContext *param_5)

{
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] [clone .cold] */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] [clone .cold] */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> > embree::parallel_reduce_internal<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#8},
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#9}>(unsigned long, unsigned long,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#8} const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#9} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embr___InfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_9_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,PrimInfoT *param_5,
                _lambda_embree__range<unsigned_long>_const___8_ *param_6,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___9_
                *param_7)

{
  undefined8 uVar1;
  ulong uVar2;
  undefined1 (*pauVar3) [16];
  undefined1 (*pauVar4) [16];
  long lVar5;
  long lVar6;
  long in_FS_OFFSET;
  undefined1 auVar7 [16];
  undefined1 auVar8 [16];
  undefined1 auVar9 [16];
  undefined1 auVar10 [16];
  ulong local_20d8;
  ulong local_20d0;
  ulong local_20c8;
  undefined8 **local_20c0;
  ulong **local_20b8;
  ulong *local_20b0;
  ulong *local_20a8;
  ulong *local_20a0;
  undefined1 (*local_2098) [16];
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___9_
  *local_2090;
  undefined1 local_2080 [8160];
  undefined1 (*local_a0) [16];
  ulong local_98;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_20d8 = param_4;
  local_20d0 = param_3;
  local_20c8 = param_2;
  uVar2 = embree::TaskScheduler::threadCount();
  if (0x200 < local_20c8) {
    local_20c8 = 0x200;
  }
  if (uVar2 < local_20c8) {
    local_20c8 = uVar2;
  }
  local_98 = local_20c8;
  if (local_20c8 * 0x50 < 0x2001) {
    local_a0 = (undefined1 (*) [16])local_2080;
  }
  else {
    local_a0 = (undefined1 (*) [16])embree::alignedMalloc(local_20c8 * 0x50,0x40);
  }
  local_20b0 = &local_20d0;
  local_20a8 = &local_20d8;
  local_20a0 = &local_20c8;
  local_2090 = param_7;
  local_2098 = (undefined1 (*) [16])local_2080;
  if (local_20c8 == 0) {
    uVar1 = *(undefined8 *)(param_6 + 8);
    *(undefined8 *)param_1 = *(undefined8 *)param_6;
    *(undefined8 *)(param_1 + 8) = uVar1;
    uVar1 = *(undefined8 *)(param_6 + 0x18);
    *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_6 + 0x10);
    *(undefined8 *)(param_1 + 0x18) = uVar1;
    uVar1 = *(undefined8 *)(param_6 + 0x28);
    *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_6 + 0x20);
    *(undefined8 *)(param_1 + 0x28) = uVar1;
    uVar1 = *(undefined8 *)(param_6 + 0x38);
    *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_6 + 0x30);
    *(undefined8 *)(param_1 + 0x38) = uVar1;
    *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_6 + 0x40);
    *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_6 + 0x48);
  }
  else {
    local_20b8 = &local_20b0;
    local_20c0 = (ulong **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitIZNS9_27createPrimRefArray_presplitINS_12TriangleMeshENS9_23TriangleSplitterFactoryEEES8_PNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISJ_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSJ_jRKNS9_13SplittingGridEPSJ_RjE3_ZNSB_ISC_SD_EES8_SF_SH_bmSN_SP_EUlSR_E4_SM_EES8_mRT1_RKS8_RKT_RKT0_EUlRKNS_5rangeImEEE6_ZNSA_ISX_SY_SM_EES8_mS10_S12_S15_S18_EUlS12_S12_E7_EES16_S13_S13_S13_S13_S18_RKSZ_RKT2_EUlmE_EEvS13_S18_EUlS1C_E_EEvS13_S13_S13_S18_PNS0_16TaskGroupContextE
              (0,local_20c8,1,&local_20b8,&local_20c0);
    embree::TaskScheduler::wait();
    if (local_20c0 != (ulong **)0x0) {
      local_20b8 = local_20c0;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_20b8);
    }
    auVar8 = *(undefined1 (*) [16])param_6;
    *(undefined1 (*) [16])param_1 = auVar8;
    auVar7 = *(undefined1 (*) [16])(param_6 + 0x10);
    *(undefined1 (*) [16])(param_1 + 0x10) = auVar7;
    auVar9 = *(undefined1 (*) [16])(param_6 + 0x20);
    *(undefined1 (*) [16])(param_1 + 0x20) = auVar9;
    auVar10 = *(undefined1 (*) [16])(param_6 + 0x30);
    *(undefined1 (*) [16])(param_1 + 0x30) = auVar10;
    lVar6 = *(long *)(param_6 + 0x40);
    lVar5 = *(long *)(param_6 + 0x48);
    *(long *)(param_1 + 0x40) = lVar6;
    *(long *)(param_1 + 0x48) = lVar5;
    if (local_20c8 != 0) {
      pauVar3 = local_a0;
      do {
        auVar8 = minps(auVar8,*pauVar3);
        auVar7 = maxps(auVar7,pauVar3[1]);
        pauVar4 = pauVar3 + 5;
        auVar9 = minps(auVar9,pauVar3[2]);
        auVar10 = maxps(auVar10,pauVar3[3]);
        lVar6 = lVar6 + *(long *)pauVar3[4];
        lVar5 = lVar5 + *(long *)(pauVar3[4] + 8);
        *(long *)(param_1 + 0x48) = lVar5;
        *(long *)(param_1 + 0x40) = lVar6;
        *(undefined1 (*) [16])param_1 = auVar8;
        *(undefined1 (*) [16])(param_1 + 0x10) = auVar7;
        *(undefined1 (*) [16])(param_1 + 0x20) = auVar9;
        *(undefined1 (*) [16])(param_1 + 0x30) = auVar10;
        pauVar3 = pauVar4;
      } while (local_a0 + local_20c8 * 5 != pauVar4);
    }
  }
  if (local_a0 != (undefined1 (*) [16])local_2080) {
    embree::alignedFree(local_a0);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul, embree::PrimRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(embree::range<unsigned long>
   const&)#1}, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long, embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>
   >&)::{lambda(embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned
   long, unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul, embree::PrimRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(embree::range<unsigned long>
   const&)#1} const&, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long, embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>
   >&)::{lambda(embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&)#2}
   const&)::{lambda(unsigned long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::{lambda(embree::range<unsigned_long>const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::{lambda(embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,unsigned_long,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::{lambda(embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&)#2}const&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  _lambda_embree__range<unsigned_long>const___1_ *p_Var1;
  undefined4 *puVar2;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  long lVar11;
  ulong uVar12;
  long lVar13;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var14;
  long lVar15;
  undefined8 *puVar16;
  long in_FS_OFFSET;
  byte bVar17;
  _lambda_embree__range<unsigned_long>const___1_ local_e80 [3072];
  _lambda_embree__range<unsigned_long>const___1_ local_280 [504];
  undefined8 local_88;
  long local_48;
  
  bVar17 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  p_Var14 = local_e80;
  sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
  parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)
  ::{lambda(embree::range<unsigned_long>const&)#1}::operator()(p_Var14,*(range **)(this + 0x20));
  lVar15 = param_1 * 0xe00 + *(long *)(*(long *)(this + 0x18) + 0x1c00);
  lVar13 = lVar15;
  do {
    lVar11 = 0;
    do {
      p_Var1 = p_Var14 + lVar11;
      uVar4 = *(undefined4 *)(p_Var1 + 4);
      uVar5 = *(undefined4 *)(p_Var1 + 8);
      uVar6 = *(undefined4 *)(p_Var1 + 0xc);
      p_Var3 = p_Var14 + lVar11 + 0x10;
      uVar7 = *(undefined4 *)p_Var3;
      uVar8 = *(undefined4 *)(p_Var3 + 4);
      uVar9 = *(undefined4 *)(p_Var3 + 8);
      uVar10 = *(undefined4 *)(p_Var3 + 0xc);
      puVar2 = (undefined4 *)(lVar13 + lVar11);
      *puVar2 = *(undefined4 *)p_Var1;
      puVar2[1] = uVar4;
      puVar2[2] = uVar5;
      puVar2[3] = uVar6;
      puVar2 = (undefined4 *)(lVar13 + 0x10 + lVar11);
      *puVar2 = uVar7;
      puVar2[1] = uVar8;
      puVar2[2] = uVar9;
      puVar2[3] = uVar10;
      lVar11 = lVar11 + 0x20;
    } while (lVar11 != 0x60);
    p_Var14 = p_Var14 + 0x60;
    lVar13 = lVar13 + 0x60;
  } while (p_Var14 != local_280);
  *(undefined8 *)(lVar15 + 0xc00) = *(undefined8 *)p_Var14;
  *(undefined8 *)(lVar15 + 0xdf8) = local_88;
  puVar16 = (undefined8 *)(lVar15 + 0xc08U & 0xfffffffffffffff8);
  lVar13 = (lVar15 + 0xc00) - (long)puVar16;
  p_Var14 = p_Var14 + -lVar13;
  for (uVar12 = (ulong)((int)lVar13 + 0x200U >> 3); uVar12 != 0; uVar12 = uVar12 - 1) {
    *puVar16 = *(undefined8 *)p_Var14;
    p_Var14 = p_Var14 + ((ulong)bVar17 * -2 + 1) * 8;
    puVar16 = puVar16 + (ulong)bVar17 * -2 + 1;
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::parallel_reduce_internal<unsigned long, embree::sse2::SpatialBinInfo<16ul,
   embree::PrimRef>, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&)#2}>(unsigned long, unsigned long,
   unsigned long, unsigned long, embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&)#2} const&)::{lambda(unsigned
   long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::range<unsigned_long>const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,unsigned_long,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&)#2}const&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined4 *puVar1;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  undefined8 uVar21;
  long lVar22;
  long lVar23;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var24;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var25;
  long lVar26;
  long in_FS_OFFSET;
  _lambda_embree__range<unsigned_long>const___1_ local_880 [1536];
  _lambda_embree__range<unsigned_long>const___1_ local_280 [256];
  undefined8 local_180;
  undefined8 uStack_178;
  undefined8 local_170;
  undefined8 uStack_168;
  undefined8 local_160;
  undefined8 uStack_158;
  undefined8 local_150;
  undefined8 uStack_148;
  undefined8 local_140;
  undefined8 uStack_138;
  undefined8 local_130;
  undefined8 uStack_128;
  undefined8 local_120;
  undefined8 uStack_118;
  undefined8 local_110;
  undefined8 uStack_108;
  undefined8 local_100;
  undefined8 uStack_f8;
  undefined8 local_f0;
  undefined8 uStack_e8;
  undefined8 local_e0;
  undefined8 uStack_d8;
  undefined8 local_d0;
  undefined8 uStack_c8;
  undefined8 local_c0;
  undefined8 uStack_b8;
  undefined8 local_b0;
  undefined8 uStack_a8;
  undefined8 local_a0;
  undefined8 uStack_98;
  undefined8 local_90;
  undefined8 uStack_88;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
  parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::
  {lambda(embree::range<unsigned_long>const&)#1}::operator()(local_880,*(range **)(this + 0x20));
  lVar26 = param_1 * 0x800 + *(long *)(*(long *)(this + 0x18) + 0x2000);
  lVar23 = lVar26;
  p_Var25 = local_880;
  do {
    p_Var24 = p_Var25;
    lVar22 = 0;
    do {
      p_Var25 = p_Var24 + lVar22;
      uVar3 = *(undefined4 *)(p_Var25 + 4);
      uVar4 = *(undefined4 *)(p_Var25 + 8);
      uVar5 = *(undefined4 *)(p_Var25 + 0xc);
      p_Var2 = p_Var24 + lVar22 + 0x10;
      uVar6 = *(undefined4 *)p_Var2;
      uVar7 = *(undefined4 *)(p_Var2 + 4);
      uVar8 = *(undefined4 *)(p_Var2 + 8);
      uVar9 = *(undefined4 *)(p_Var2 + 0xc);
      puVar1 = (undefined4 *)(lVar23 + lVar22);
      *puVar1 = *(undefined4 *)p_Var25;
      puVar1[1] = uVar3;
      puVar1[2] = uVar4;
      puVar1[3] = uVar5;
      puVar1 = (undefined4 *)(lVar23 + 0x10 + lVar22);
      *puVar1 = uVar6;
      puVar1[1] = uVar7;
      puVar1[2] = uVar8;
      puVar1[3] = uVar9;
      lVar22 = lVar22 + 0x20;
    } while (lVar22 != 0x60);
    p_Var25 = p_Var24 + 0x60;
    lVar23 = lVar23 + 0x60;
  } while (p_Var25 != local_280);
  uVar10 = *(undefined8 *)(p_Var24 + 0x68);
  uVar11 = *(undefined8 *)(p_Var24 + 0x70);
  uVar12 = *(undefined8 *)(p_Var24 + 0x78);
  uVar13 = *(undefined8 *)(p_Var24 + 0x80);
  uVar14 = *(undefined8 *)(p_Var24 + 0x88);
  uVar15 = *(undefined8 *)(p_Var24 + 0x90);
  uVar16 = *(undefined8 *)(p_Var24 + 0x98);
  uVar17 = *(undefined8 *)(p_Var24 + 0xa0);
  uVar18 = *(undefined8 *)(p_Var24 + 0xa8);
  uVar19 = *(undefined8 *)(p_Var24 + 0xb0);
  uVar20 = *(undefined8 *)(p_Var24 + 0xb8);
  *(undefined8 *)(lVar26 + 0x600) = *(undefined8 *)p_Var25;
  *(undefined8 *)(lVar26 + 0x608) = uVar10;
  *(undefined8 *)(lVar26 + 0x610) = uVar11;
  *(undefined8 *)(lVar26 + 0x618) = uVar12;
  uVar10 = *(undefined8 *)(p_Var24 + 0xc0);
  uVar11 = *(undefined8 *)(p_Var24 + 200);
  uVar12 = *(undefined8 *)(p_Var24 + 0xd0);
  uVar21 = *(undefined8 *)(p_Var24 + 0xd8);
  *(undefined8 *)(lVar26 + 0x620) = uVar13;
  *(undefined8 *)(lVar26 + 0x628) = uVar14;
  uVar13 = *(undefined8 *)(p_Var24 + 0xe0);
  uVar14 = *(undefined8 *)(p_Var24 + 0xe8);
  *(undefined8 *)(lVar26 + 0x630) = uVar15;
  *(undefined8 *)(lVar26 + 0x638) = uVar16;
  uVar15 = *(undefined8 *)(p_Var24 + 0xf0);
  uVar16 = *(undefined8 *)(p_Var24 + 0xf8);
  *(undefined8 *)(lVar26 + 0x640) = uVar17;
  *(undefined8 *)(lVar26 + 0x648) = uVar18;
  uVar17 = *(undefined8 *)(p_Var24 + 0x100);
  uVar18 = *(undefined8 *)(p_Var24 + 0x108);
  *(undefined8 *)(lVar26 + 0x650) = uVar19;
  *(undefined8 *)(lVar26 + 0x658) = uVar20;
  uVar19 = *(undefined8 *)(p_Var24 + 0x110);
  uVar20 = *(undefined8 *)(p_Var24 + 0x118);
  *(undefined8 *)(lVar26 + 0x660) = uVar10;
  *(undefined8 *)(lVar26 + 0x668) = uVar11;
  uVar10 = *(undefined8 *)(p_Var24 + 0x120);
  uVar11 = *(undefined8 *)(p_Var24 + 0x128);
  *(undefined8 *)(lVar26 + 0x670) = uVar12;
  *(undefined8 *)(lVar26 + 0x678) = uVar21;
  uVar12 = *(undefined8 *)(p_Var24 + 0x130);
  uVar21 = *(undefined8 *)(p_Var24 + 0x138);
  *(undefined8 *)(lVar26 + 0x680) = uVar13;
  *(undefined8 *)(lVar26 + 0x688) = uVar14;
  uVar13 = *(undefined8 *)(p_Var24 + 0x140);
  uVar14 = *(undefined8 *)(p_Var24 + 0x148);
  *(undefined8 *)(lVar26 + 0x690) = uVar15;
  *(undefined8 *)(lVar26 + 0x698) = uVar16;
  uVar15 = *(undefined8 *)(p_Var24 + 0x150);
  uVar16 = *(undefined8 *)(p_Var24 + 0x158);
  *(undefined8 *)(lVar26 + 0x6b0) = uVar19;
  *(undefined8 *)(lVar26 + 0x6b8) = uVar20;
  *(undefined8 *)(lVar26 + 0x6c0) = uVar10;
  *(undefined8 *)(lVar26 + 0x6c8) = uVar11;
  *(undefined8 *)(lVar26 + 0x6d0) = uVar12;
  *(undefined8 *)(lVar26 + 0x6d8) = uVar21;
  *(undefined8 *)(lVar26 + 0x6e0) = uVar13;
  *(undefined8 *)(lVar26 + 0x6e8) = uVar14;
  *(undefined8 *)(lVar26 + 0x6f0) = uVar15;
  *(undefined8 *)(lVar26 + 0x6f8) = uVar16;
  *(undefined8 *)(lVar26 + 0x6a0) = uVar17;
  *(undefined8 *)(lVar26 + 0x6a8) = uVar18;
  *(undefined8 *)(lVar26 + 0x700) = local_180;
  *(undefined8 *)(lVar26 + 0x708) = uStack_178;
  *(undefined8 *)(lVar26 + 0x710) = local_170;
  *(undefined8 *)(lVar26 + 0x718) = uStack_168;
  *(undefined8 *)(lVar26 + 0x720) = local_160;
  *(undefined8 *)(lVar26 + 0x728) = uStack_158;
  *(undefined8 *)(lVar26 + 0x730) = local_150;
  *(undefined8 *)(lVar26 + 0x738) = uStack_148;
  *(undefined8 *)(lVar26 + 0x740) = local_140;
  *(undefined8 *)(lVar26 + 0x748) = uStack_138;
  *(undefined8 *)(lVar26 + 0x750) = local_130;
  *(undefined8 *)(lVar26 + 0x758) = uStack_128;
  *(undefined8 *)(lVar26 + 0x760) = local_120;
  *(undefined8 *)(lVar26 + 0x768) = uStack_118;
  *(undefined8 *)(lVar26 + 0x770) = local_110;
  *(undefined8 *)(lVar26 + 0x778) = uStack_108;
  *(undefined8 *)(lVar26 + 0x780) = local_100;
  *(undefined8 *)(lVar26 + 0x788) = uStack_f8;
  *(undefined8 *)(lVar26 + 0x790) = local_f0;
  *(undefined8 *)(lVar26 + 0x798) = uStack_e8;
  *(undefined8 *)(lVar26 + 0x7a0) = local_e0;
  *(undefined8 *)(lVar26 + 0x7a8) = uStack_d8;
  *(undefined8 *)(lVar26 + 0x7b0) = local_d0;
  *(undefined8 *)(lVar26 + 0x7b8) = uStack_c8;
  *(undefined8 *)(lVar26 + 0x7c0) = local_c0;
  *(undefined8 *)(lVar26 + 0x7c8) = uStack_b8;
  *(undefined8 *)(lVar26 + 2000) = local_b0;
  *(undefined8 *)(lVar26 + 0x7d8) = uStack_a8;
  *(undefined8 *)(lVar26 + 0x7e0) = local_a0;
  *(undefined8 *)(lVar26 + 0x7e8) = uStack_98;
  *(undefined8 *)(lVar26 + 0x7f0) = local_90;
  *(undefined8 *)(lVar26 + 0x7f8) = uStack_88;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00112835) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  char cVar15;
  long lVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar16 = embree::TaskScheduler::allocThreadIndex();
  pTVar17 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar17 = lVar16;
  pTVar20 = pTVar17 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar18 = pTVar18 + 0x40;
  } while (pTVar17 + 0x40040 != pTVar18);
  *(undefined8 *)(pTVar17 + 0x40040) = 0;
  *(undefined8 *)(pTVar17 + 0x40080) = 0;
  *(undefined8 *)(pTVar17 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar17 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar17 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar16 * 8) = pTVar17;
  UNLOCK();
  local_48 = pTVar17;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar17);
  if (*(ulong *)(pTVar17 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar17 + 0xc00c0);
    uVar3 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar17 + 0xc00c0) = uVar3;
      pTVar4 = pTVar17 + uVar3 + 0x40080;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      uVar13 = *(undefined8 *)(param_1 + 0x20);
      uVar14 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f5f8;
      uVar6 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      *(undefined8 *)(pTVar4 + 0x38) = uVar6;
      *(undefined8 *)(pTVar4 + 0x28) = uVar13;
      *(undefined8 *)(pTVar4 + 0x30) = uVar14;
      lVar19 = *(long *)(pTVar17 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar17 + 0xc0100);
      pTVar17[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar17 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar17 + lVar19 + 0x50) = pTVar4;
      *(long *)(pTVar17 + lVar19 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar17 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar17 + lVar19 + 0x68) = lVar5;
      *(ulong *)(pTVar17 + lVar19 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar17 + 0x40080) = *(long *)(pTVar17 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar17 + 0x40080) - 1U <= *(ulong *)(pTVar17 + 0x40040)) {
        LOCK();
        *(long *)(pTVar17 + 0x40040) = *(long *)(pTVar17 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar15 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar17);
      } while (cVar15 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar16 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar17 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar17 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar17);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar20;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_40 = *(undefined8 *)param_4;
  uStack_38 = *(undefined8 *)(param_4 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)(param_4 + 0x10);
  local_58 = param_2;
  uStack_50 = param_1;
  local_48 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_58,param_5,param_2 - param_1,true);
LAB_00112ae7:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0012f5f8;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[7] = local_28;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = uStack_38;
      puVar3[6] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00112ae7;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Removing unreachable block (ram,0x00113705) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  char cVar15;
  long lVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar16 = embree::TaskScheduler::allocThreadIndex();
  pTVar17 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar17 = lVar16;
  pTVar20 = pTVar17 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar18 = pTVar18 + 0x40;
  } while (pTVar17 + 0x40040 != pTVar18);
  *(undefined8 *)(pTVar17 + 0x40040) = 0;
  *(undefined8 *)(pTVar17 + 0x40080) = 0;
  *(undefined8 *)(pTVar17 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar17 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar17 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar16 * 8) = pTVar17;
  UNLOCK();
  local_48 = pTVar17;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar17);
  if (*(ulong *)(pTVar17 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar17 + 0xc00c0);
    uVar3 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar17 + 0xc00c0) = uVar3;
      pTVar4 = pTVar17 + uVar3 + 0x40080;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      uVar13 = *(undefined8 *)(param_1 + 0x20);
      uVar14 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f628;
      uVar6 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      *(undefined8 *)(pTVar4 + 0x38) = uVar6;
      *(undefined8 *)(pTVar4 + 0x28) = uVar13;
      *(undefined8 *)(pTVar4 + 0x30) = uVar14;
      lVar19 = *(long *)(pTVar17 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar17 + 0xc0100);
      pTVar17[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar17 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar17 + lVar19 + 0x50) = pTVar4;
      *(long *)(pTVar17 + lVar19 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar17 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar17 + lVar19 + 0x68) = lVar5;
      *(ulong *)(pTVar17 + lVar19 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar17 + 0x40080) = *(long *)(pTVar17 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar17 + 0x40080) - 1U <= *(ulong *)(pTVar17 + 0x40040)) {
        LOCK();
        *(long *)(pTVar17 + 0x40040) = *(long *)(pTVar17 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar15 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar17);
      } while (cVar15 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar16 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar17 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar17 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar17);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar20;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_40 = *(undefined8 *)param_4;
  uStack_38 = *(undefined8 *)(param_4 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)(param_4 + 0x10);
  local_58 = param_2;
  uStack_50 = param_1;
  local_48 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_58,param_5,param_2 - param_1,true);
LAB_001139b7:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0012f628;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[7] = local_28;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = uStack_38;
      puVar3[6] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_001139b7;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Removing unreachable block (ram,0x001145d5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInte___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  char cVar15;
  long lVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar16 = embree::TaskScheduler::allocThreadIndex();
  pTVar17 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar17 = lVar16;
  pTVar20 = pTVar17 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar18 = pTVar18 + 0x40;
  } while (pTVar17 + 0x40040 != pTVar18);
  *(undefined8 *)(pTVar17 + 0x40040) = 0;
  *(undefined8 *)(pTVar17 + 0x40080) = 0;
  *(undefined8 *)(pTVar17 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar17 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar17 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar16 * 8) = pTVar17;
  UNLOCK();
  local_48 = pTVar17;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar17);
  if (*(ulong *)(pTVar17 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar17 + 0xc00c0);
    uVar3 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar17 + 0xc00c0) = uVar3;
      pTVar4 = pTVar17 + uVar3 + 0x40080;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      uVar13 = *(undefined8 *)(param_1 + 0x20);
      uVar14 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f658;
      uVar6 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      *(undefined8 *)(pTVar4 + 0x38) = uVar6;
      *(undefined8 *)(pTVar4 + 0x28) = uVar13;
      *(undefined8 *)(pTVar4 + 0x30) = uVar14;
      lVar19 = *(long *)(pTVar17 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar17 + 0xc0100);
      pTVar17[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar17 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar17 + lVar19 + 0x50) = pTVar4;
      *(long *)(pTVar17 + lVar19 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar17 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar17 + lVar19 + 0x68) = lVar5;
      *(ulong *)(pTVar17 + lVar19 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar17 + 0x40080) = *(long *)(pTVar17 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar17 + 0x40080) - 1U <= *(ulong *)(pTVar17 + 0x40040)) {
        LOCK();
        *(long *)(pTVar17 + 0x40040) = *(long *)(pTVar17 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar15 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar17);
      } while (cVar15 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar16 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar17 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar17 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar17);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar20;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_40 = *(undefined8 *)param_4;
  uStack_38 = *(undefined8 *)(param_4 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)(param_4 + 0x10);
  local_58 = param_2;
  uStack_50 = param_1;
  local_48 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInte___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_58,param_5,param_2 - param_1,true);
LAB_00114887:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0012f658;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[7] = local_28;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = uStack_38;
      puVar3[6] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00114887;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* unsigned long embree::parallel_partitioning<embree::sse2::PresplitItem, unsigned long, int,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4},
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, embree::sse2::PresplitItem const&)#1},
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, unsigned long&)#2}>(embree::sse2::PresplitItem*, unsigned long, unsigned long, int const&,
   unsigned long&, unsigned long&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&,
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, embree::sse2::PresplitItem const&)#1} const&,
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, unsigned long&)#2} const&, unsigned long) */

ulong embree::
      parallel_partitioning<embree::sse2::PresplitItem,unsigned_long,int,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitore___bree::sse2::PresplitItem_const&)_4_const&,unsigned_long)::_lambda(unsigned_long&,unsigned_long&)_2_>
                (PresplitItem *param_1,ulong param_2,ulong param_3,int *param_4,ulong *param_5,
                ulong *param_6,_lambda_embree__sse2__PresplitItem_const___4_ *param_7,
                _lambda_unsigned_long__embree__sse2__PresplitItem_const___1_ *param_8,
                _lambda_unsigned_long__unsigned_long___2_ *param_9,ulong param_10)

{
  long ****pppplVar1;
  long **pplVar2;
  bool bVar3;
  bool bVar4;
  long ****pppplVar5;
  long ***ppplVar6;
  ulong uVar7;
  PresplitItem *pPVar8;
  long ****pppplVar9;
  long ****pppplVar10;
  PresplitItem *pPVar11;
  PresplitItem *pPVar12;
  long ****pppplVar13;
  long lVar14;
  long lVar15;
  long lVar16;
  long lVar17;
  long lVar18;
  long ***ppplVar19;
  long in_FS_OFFSET;
  long local_98;
  long local_90;
  long **local_88;
  long **local_80;
  long ***local_78;
  long ***ppplStack_70;
  long ***local_68;
  long ***ppplStack_60;
  long *local_58;
  long *local_50;
  long local_40;
  
  ppplVar19 = (long ***)(param_3 - param_2);
  pPVar8 = param_1 + param_2 * 8;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (ppplVar19 < param_10) {
    pPVar12 = param_1 + param_3 * 8 + -8;
    for (; pPVar8 <= pPVar12; pPVar8 = pPVar8 + 8) {
      pPVar11 = pPVar12;
      if (1 < *(uint *)pPVar8) {
        while (pPVar12 = pPVar11 + -8, 1 < *(uint *)pPVar11) {
          pPVar11 = pPVar12;
          if (pPVar12 < pPVar8) goto LAB_00115b76;
        }
        pplVar2 = *(long ***)pPVar8;
        *(long ***)pPVar8 = *(long ***)pPVar11;
        *(long ***)pPVar11 = pplVar2;
      }
    }
LAB_00115b76:
    uVar7 = (long)pPVar8 - (long)param_1 >> 3;
    goto LAB_001158fb;
  }
  pppplVar5 = (long ****)embree::alignedMalloc(0x10c0,0x40);
  *pppplVar5 = (long ***)pPVar8;
  pppplVar5[1] = ppplVar19;
  pppplVar5[2] = (long ***)param_7;
  pppplVar5[3] = (long ***)param_8;
  pppplVar5[4] = (long ***)param_9;
  pppplVar5[5] = (long ***)param_4;
  ppplVar6 = (long ***)embree::TaskScheduler::threadCount();
  ppplVar19 = (long ***)(((long)ppplVar19 + (param_10 - 1)) / param_10);
  if ((long ***)0x40 < ppplVar19) {
    ppplVar19 = (long ***)0x40;
  }
  if (ppplVar19 <= ppplVar6) {
    ppplVar6 = ppplVar19;
  }
  pppplVar5[6] = ppplVar6;
  local_68 = (long ***)pppplVar5;
  if (ppplVar6 == (long ***)0x0) {
    pppplVar5[0x50] = (long ***)0x0;
    pppplVar5[8] = pppplVar5[1];
    pppplVar10 = (long ****)0x0;
  }
  else {
    local_80 = (long **)0x0;
    local_78 = (long ***)&local_68;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_23parallel_partition_taskINS_4sse212PresplitItemEmiZNS4_27createPrimRefArray_presplitIZNS4_27createPrimRefArray_presplitINS_12TriangleMeshENS4_23TriangleSplitterFactoryEEENS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEPNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSK_jRKNS4_13SplittingGridEPSK_RjE3_ZNS7_IS8_S9_EESE_SG_SI_bmSO_SQ_EUlSS_E4_SN_EESE_mRT1_RKSE_RKT_RKT0_EUlRKS5_E2_ZNS_21parallel_partitioningIS5_S1C_EEmPS14_mmS19_mEUlRmS1B_E_ZNS1D_IS5_S1C_EEmS1E_mmS19_mEUlS1F_S1F_E0_E9partitionES1F_S1F_EUlmE_EEvS14_S19_EUlRKNS_5rangeImEEE_EEvS14_S14_S14_S19_PNS0_16TaskGroupContextE
              (0,ppplVar6,1);
    embree::TaskScheduler::wait();
    if ((long ***)local_80 != (long ***)0x0) goto LAB_00115b3b;
    ppplVar19 = pppplVar5[6];
    pppplVar1 = (long ****)pppplVar5[1];
    pppplVar5[(long)(ppplVar19 + 10)] = (long ***)0x0;
    pppplVar5[(long)(ppplVar19 + 1)] = (long ***)pppplVar1;
    pppplVar10 = (long ****)pppplVar5[0x50];
    pppplVar13 = pppplVar10;
    if (ppplVar19 < (long ***)0x2) {
      local_98 = 0;
      local_90 = 0;
      local_88 = (long **)0x0;
      if (ppplVar19 == (long ***)0x0) goto LAB_001158e6;
      ppplVar19 = (long ***)0x1;
      lVar18 = 8;
    }
    else {
      lVar18 = (long)ppplVar19 * 8;
      pppplVar9 = pppplVar5 + 0x51;
      do {
        pppplVar13 = (long ****)((long)pppplVar13 + (long)*pppplVar9);
        pppplVar9 = pppplVar9 + 1;
      } while (pppplVar9 != pppplVar5 + (long)(ppplVar19 + 10));
    }
    local_88 = (long **)0x0;
    local_90 = 0;
    local_98 = 0;
    bVar3 = false;
    bVar4 = false;
    ppplVar6 = (long ***)0x0;
    pppplVar9 = pppplVar5 + 8;
    lVar14 = 0;
    lVar16 = 0;
    while( true ) {
      local_68 = *pppplVar9;
      ppplStack_60 = (long ***)((long)pppplVar10 + (long)local_68);
      ppplStack_70 = pppplVar9[1];
      if ((long)pppplVar13 <= (long)pppplVar9[1]) {
        ppplStack_70 = (long ***)pppplVar13;
      }
      local_78 = (long ***)(long ****)0x0;
      if (-1 < (long)ppplStack_60) {
        local_78 = ppplStack_60;
      }
      if ((long)pppplVar1 < (long)ppplStack_60) {
        ppplStack_60 = (long ***)pppplVar1;
      }
      if ((long)local_68 < (long)pppplVar13) {
        local_68 = (long ***)pppplVar13;
      }
      lVar15 = lVar14;
      if ((long)local_78 < (long)ppplStack_70) {
        bVar4 = true;
        ppplVar6 = (long ***)((long)ppplStack_70 + ((long)ppplVar6 - (long)local_78));
        lVar15 = lVar14 + 1;
        pppplVar5[lVar14 * 2 + 0x98] = local_78;
        (pppplVar5 + lVar14 * 2 + 0x98)[1] = ppplStack_70;
      }
      lVar17 = lVar16;
      if ((long)local_68 < (long)ppplStack_60) {
        lVar17 = lVar16 + 1;
        bVar3 = true;
        pppplVar5[lVar16 * 2 + 0x118] = local_68;
        (pppplVar5 + lVar16 * 2 + 0x118)[1] = ppplStack_60;
      }
      if ((long ****)(lVar18 + (long)(pppplVar5 + 8)) == pppplVar9 + 1) break;
      pppplVar10 = (long ****)pppplVar9[0x49];
      pppplVar9 = pppplVar9 + 1;
      lVar14 = lVar15;
      lVar16 = lVar17;
    }
    if (bVar3) {
      local_90 = lVar17;
    }
    pppplVar10 = pppplVar13;
    if ((bVar4) && (local_98 = lVar15, local_88 = (long **)ppplVar6, ppplVar6 != (long ***)0x0)) {
      local_68 = &local_88;
      local_58 = &local_98;
      local_50 = &local_90;
      local_80 = (long **)0x0;
      local_78 = (long ***)&local_68;
      ppplStack_60 = (long ***)pppplVar5;
      _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_23parallel_partition_taskINS_4sse212PresplitItemEmiZNS4_27createPrimRefArray_presplitIZNS4_27createPrimRefArray_presplitINS_12TriangleMeshENS4_23TriangleSplitterFactoryEEENS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEPNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSK_jRKNS4_13SplittingGridEPSK_RjE3_ZNS7_IS8_S9_EESE_SG_SI_bmSO_SQ_EUlSS_E4_SN_EESE_mRT1_RKSE_RKT_RKT0_EUlRKS5_E2_ZNS_21parallel_partitioningIS5_S1C_EEmPS14_mmS19_mEUlRmS1B_E_ZNS1D_IS5_S1C_EEmS1E_mmS19_mEUlS1F_S1F_E0_E9partitionES1F_S1F_EUlmE0_EEvS14_S19_EUlRKNS_5rangeImEEE_EEvS14_S14_S14_S19_PNS0_16TaskGroupContextE
                (0,ppplVar19,1,&local_78,&local_80);
      embree::TaskScheduler::wait();
      if ((long ***)local_80 != (long ***)0x0) {
LAB_00115b3b:
        local_78 = (long ***)local_80;
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception(&local_78);
      }
    }
  }
LAB_001158e6:
  if (pppplVar5 != (long ****)0x0) {
    embree::alignedFree(pppplVar5);
  }
  uVar7 = param_2 + (long)pppplVar10;
LAB_001158fb:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar7;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__insertion_sort<embree::sse2::PresplitItem*, __gnu_cxx::__ops::_Iter_comp_iter<bool
   (*)(embree::sse2::PresplitItem const&, embree::sse2::PresplitItem const&)>
   >(embree::sse2::PresplitItem*, embree::sse2::PresplitItem*,
   __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&)>) */

void std::
     __insertion_sort<embree::sse2::PresplitItem*,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
               (undefined8 *param_1,undefined8 *param_2,code *param_3)

{
  undefined8 uVar1;
  char cVar2;
  size_t __n;
  undefined8 *puVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  long in_FS_OFFSET;
  undefined8 local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1 != param_2) {
    puVar4 = param_1 + 1;
    while (param_2 != puVar4) {
      while( true ) {
        cVar2 = (*param_3)(puVar4,param_1);
        puVar5 = puVar4 + 1;
        if (cVar2 != '\0') break;
        local_48 = *puVar4;
        while( true ) {
          puVar3 = puVar4 + -1;
          cVar2 = (*param_3)(&local_48,puVar3);
          if (cVar2 == '\0') break;
          *puVar4 = *puVar3;
          puVar4 = puVar3;
        }
        *puVar4 = local_48;
        puVar4 = puVar5;
        if (param_2 == puVar5) goto LAB_00115ca5;
      }
      uVar1 = *puVar4;
      __n = (long)puVar4 - (long)param_1;
      if ((long)__n < 9) {
        if (__n == 8) {
          *puVar4 = *param_1;
        }
      }
      else {
        memmove((void *)((long)puVar4 + (8 - __n)),param_1,__n);
      }
      *param_1 = uVar1;
      puVar4 = puVar5;
    }
  }
LAB_00115ca5:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__heap_select<embree::PrimRef*, __gnu_cxx::__ops::_Iter_less_iter>(embree::PrimRef*,
   embree::PrimRef*, embree::PrimRef*, __gnu_cxx::__ops::_Iter_less_iter) */

void std::__heap_select<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined4 *param_2,undefined4 *param_3)

{
  long lVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  long lVar5;
  undefined4 *puVar6;
  long in_FS_OFFSET;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (0x20 < (long)param_2 - (long)param_1) {
    for (lVar5 = (((long)param_2 - (long)param_1 >> 5) + -2) / 2;
        __adjust_heap<embree::PrimRef*,long,embree::PrimRef,__gnu_cxx::__ops::_Iter_less_iter>(),
        lVar5 != 0; lVar5 = lVar5 + -1) {
    }
  }
  if (param_2 < param_3) {
    do {
      while (CONCAT44(param_1[7],param_1[3]) <= CONCAT44(param_2[7],param_2[3])) {
        param_2 = param_2 + 8;
        if (param_3 <= param_2) goto LAB_00115dfe;
      }
      uVar2 = param_1[1];
      uVar3 = param_1[2];
      uVar4 = param_1[3];
      puVar6 = param_2 + 8;
      *param_2 = *param_1;
      param_2[1] = uVar2;
      param_2[2] = uVar3;
      param_2[3] = uVar4;
      uVar2 = param_1[5];
      uVar3 = param_1[6];
      uVar4 = param_1[7];
      param_2[4] = param_1[4];
      param_2[5] = uVar2;
      param_2[6] = uVar3;
      param_2[7] = uVar4;
      __adjust_heap<embree::PrimRef*,long,embree::PrimRef,__gnu_cxx::__ops::_Iter_less_iter>();
      param_2 = puVar6;
    } while (puVar6 < param_3);
  }
LAB_00115dfe:
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x00116215) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  undefined8 uVar17;
  char cVar18;
  long lVar19;
  Thread *pTVar20;
  Thread *pTVar21;
  long lVar22;
  Thread *pTVar23;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar19 = embree::TaskScheduler::allocThreadIndex();
  pTVar20 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar20 = lVar19;
  pTVar23 = pTVar20 + 0x40;
  pTVar21 = pTVar23;
  do {
    *(undefined4 *)pTVar21 = 0;
    pTVar21 = pTVar21 + 0x40;
  } while (pTVar20 + 0x40040 != pTVar21);
  *(undefined8 *)(pTVar20 + 0x40040) = 0;
  *(undefined8 *)(pTVar20 + 0x40080) = 0;
  *(undefined8 *)(pTVar20 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar20 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar20 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar19 * 8) = pTVar20;
  UNLOCK();
  local_48 = pTVar20;
  pTVar21 = (Thread *)embree::TaskScheduler::swapThread(pTVar20);
  if (*(ulong *)(pTVar20 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar20 + 0xc00c0);
    uVar3 = lVar5 + 0x58 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar20 + 0xc00c0) = uVar3;
      pTVar4 = pTVar20 + uVar3 + 0x40068;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f6a0;
      uVar14 = *(undefined8 *)(param_1 + 0x30);
      uVar15 = *(undefined8 *)(param_1 + 0x38);
      uVar16 = *(undefined8 *)(param_1 + 0x40);
      uVar17 = *(undefined8 *)(param_1 + 0x48);
      *(undefined8 *)(pTVar4 + 8) = uVar8;
      *(undefined8 *)(pTVar4 + 0x10) = uVar9;
      *(undefined8 *)(pTVar4 + 0x18) = uVar10;
      *(undefined8 *)(pTVar4 + 0x20) = uVar11;
      *(undefined8 *)(pTVar4 + 0x28) = uVar12;
      *(undefined8 *)(pTVar4 + 0x30) = uVar13;
      *(undefined8 *)(pTVar4 + 0x38) = uVar14;
      *(undefined8 *)(pTVar4 + 0x40) = uVar15;
      *(undefined8 *)(pTVar4 + 0x48) = uVar16;
      *(undefined8 *)(pTVar4 + 0x50) = uVar17;
      lVar22 = *(long *)(pTVar20 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar20 + 0xc0100);
      pTVar20[lVar22 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar20 + lVar22 + 0x44) = 1;
      *(Thread **)(pTVar20 + lVar22 + 0x50) = pTVar4;
      *(long *)(pTVar20 + lVar22 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar20 + lVar22 + 0x60) = param_2;
      *(long *)(pTVar20 + lVar22 + 0x68) = lVar5;
      *(ulong *)(pTVar20 + lVar22 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar23 + lVar22) == 0) {
        *(undefined4 *)(pTVar23 + lVar22) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar20 + 0x40080) = *(long *)(pTVar20 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar20 + 0x40080) - 1U <= *(ulong *)(pTVar20 + 0x40040)) {
        LOCK();
        *(long *)(pTVar20 + 0x40040) = *(long *)(pTVar20 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar18 = embree::TaskScheduler::TaskQueue::execute_local(pTVar23,(Task *)pTVar20);
      } while (cVar18 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar19 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar21);
      pTVar23 = *(Thread **)param_2;
      if (pTVar23 != (Thread *)0x0) {
        local_48 = pTVar23;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar23 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar23 == (Thread *)0x0) {
        if (pTVar20 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar20 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar20);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar23;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  undefined8 uStack_60;
  undefined8 uStack_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 local_40;
  undefined8 uStack_38;
  TaskGroupContext *local_30;
  long local_20;
  
  uStack_60 = *(undefined8 *)param_4;
  uStack_58 = *(undefined8 *)(param_4 + 8);
  uStack_50 = *(undefined8 *)(param_4 + 0x10);
  uStack_48 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_40 = *(undefined8 *)(param_4 + 0x20);
  uStack_38 = *(undefined8 *)(param_4 + 0x28);
  local_78 = param_2;
  uStack_70 = param_1;
  local_68 = param_3;
  local_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_78,param_5,param_2 - param_1,true);
LAB_001164dd:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x58 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40068 + uVar2);
      *puVar3 = &PTR_execute_0012f6a0;
      puVar3[1] = local_78;
      puVar3[2] = uStack_70;
      puVar3[3] = local_68;
      puVar3[4] = uStack_60;
      puVar3[5] = uStack_58;
      puVar3[6] = uStack_50;
      puVar3[7] = uStack_48;
      puVar3[8] = local_40;
      puVar3[9] = uStack_38;
      puVar3[10] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_001164dd;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  long lVar1;
  ulong uVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  ulong local_38;
  long local_30;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  lVar1 = *(long *)(this + 8);
  uVar2 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < lVar1 - uVar2) {
    uVar3 = lVar1 + uVar2 >> 1;
    spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar2,uVar3,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x50));
    spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar3,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x50));
    if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    local_38 = uVar2;
    local_30 = lVar1;
    sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
    ::
    create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)
    ::{lambda(embree::range<unsigned_long>const&)#1}::operator()
              ((_lambda_embree__range<unsigned_long>const___1_ *)(this + 0x20),(range *)&local_38);
    if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul> const&) [clone
   .isra.0] */

void embree::sse2::
     HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
     create_spatial_splits
               (PrimInfoExtRange *param_1,SpatialBinSplit *param_2,SpatialBinMapping *param_3)

{
  ulong uVar1;
  long in_FS_OFFSET;
  float fVar2;
  float local_74;
  ulong local_70;
  long local_68;
  ulong local_60;
  long local_58;
  long local_50;
  PrimInfoExtRange *local_48;
  SpatialBinMapping *local_40;
  float *local_38;
  ulong *local_30;
  ulong *local_28;
  long *local_20;
  long local_10;
  
  local_68 = *(long *)(param_2 + 0x48);
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_70 = *(long *)(param_2 + 0x50) - local_68;
  LOCK();
  local_60 = 0;
  UNLOCK();
  uVar1 = (ulong)(int)*(uint *)(param_3 + 8);
  if ((long)uVar1 < 0) {
    fVar2 = (float)(uVar1 >> 1 | (ulong)(*(uint *)(param_3 + 8) & 1));
    fVar2 = fVar2 + fVar2;
  }
  else {
    fVar2 = (float)(long)uVar1;
  }
  local_38 = &local_74;
  local_74 = fVar2 * *(float *)(param_3 + (long)*(int *)(param_3 + 4) * 4 + 0x40) +
             *(float *)(param_3 + (long)*(int *)(param_3 + 4) * 4 + 0x20);
  local_30 = &local_60;
  local_28 = &local_70;
  local_20 = &local_68;
  local_58 = 0;
  local_48 = param_1;
  local_40 = param_3;
  TaskScheduler::
  spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>
            (*(ulong *)(param_2 + 0x40),*(ulong *)(param_2 + 0x48),0x40,
             (_lambda_embree__range<unsigned_long>_const___1_ *)&local_48,
             (TaskGroupContext *)&local_58);
  embree::TaskScheduler::wait();
  if (local_58 != 0) {
    local_50 = local_58;
    std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
    std::rethrow_exception(&local_50);
  }
  uVar1 = local_60;
  if (local_70 < local_60) {
    uVar1 = local_70;
  }
  *(ulong *)(param_2 + 0x48) = *(long *)(param_2 + 0x48) + uVar1;
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00116b15) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  char cVar14;
  long lVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar15 = embree::TaskScheduler::allocThreadIndex();
  pTVar16 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar16 = lVar15;
  pTVar19 = pTVar16 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar17 = pTVar17 + 0x40;
  } while (pTVar16 + 0x40040 != pTVar17);
  *(undefined8 *)(pTVar16 + 0x40040) = 0;
  *(undefined8 *)(pTVar16 + 0x40080) = 0;
  *(undefined8 *)(pTVar16 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar16 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar16 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar15 * 8) = pTVar16;
  UNLOCK();
  local_48 = pTVar16;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar16);
  if (*(ulong *)(pTVar16 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar16 + 0xc00c0);
    uVar3 = lVar5 + 0x38 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar16 + 0xc00c0) = uVar3;
      pTVar4 = pTVar16 + uVar3 + 0x40088;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f6b8;
      *(undefined8 *)(pTVar4 + 8) = uVar8;
      *(undefined8 *)(pTVar4 + 0x10) = uVar9;
      *(undefined8 *)(pTVar4 + 0x18) = uVar10;
      *(undefined8 *)(pTVar4 + 0x20) = uVar11;
      *(undefined8 *)(pTVar4 + 0x28) = uVar12;
      *(undefined8 *)(pTVar4 + 0x30) = uVar13;
      lVar18 = *(long *)(pTVar16 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar16 + 0xc0100);
      pTVar16[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar16 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar16 + lVar18 + 0x50) = pTVar4;
      *(long *)(pTVar16 + lVar18 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar16 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar16 + lVar18 + 0x68) = lVar5;
      *(ulong *)(pTVar16 + lVar18 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar16 + 0x40080) = *(long *)(pTVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar16 + 0x40080) - 1U <= *(ulong *)(pTVar16 + 0x40040)) {
        LOCK();
        *(long *)(pTVar16 + 0x40040) = *(long *)(pTVar16 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar14 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar16);
      } while (cVar14 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar15 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar16 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar16 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar16);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar19;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  TaskScheduler *pTVar1;
  undefined8 uVar2;
  undefined8 *puVar3;
  undefined8 *puVar4;
  TaskScheduler *this_00;
  TaskScheduler *pTVar5;
  
  pTVar1 = *(TaskScheduler **)(this + 8);
  this_00 = *(TaskScheduler **)(this + 0x10);
  if (*(ulong *)(this + 0x18) < (ulong)((long)pTVar1 - (long)this_00)) {
    spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (this_00,(ulong)(pTVar1 + (long)this_00) >> 1,*(ulong *)(this + 0x18),
               *(ulong *)(this + 0x20),
               *(_lambda_embree__range<unsigned_long>_const___1_ **)(this + 0x28),
               *(TaskGroupContext **)(this + 0x30));
    spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>
              ((TaskScheduler *)((ulong)(pTVar1 + (long)this_00) >> 1),*(ulong *)(this + 8),
               *(ulong *)(this + 0x18),*(ulong *)(this + 0x20),
               *(_lambda_embree__range<unsigned_long>_const___1_ **)(this + 0x28),
               *(TaskGroupContext **)(this + 0x30));
    embree::TaskScheduler::wait();
    return;
  }
  if (this_00 < pTVar1) {
    do {
      pTVar5 = this_00 + **(long **)(this + 0x28);
      puVar4 = (undefined8 *)((long)this_00 * 0x20 + **(long **)(this + 0x20));
      this_00 = this_00 + 1;
      uVar2 = puVar4[1];
      puVar3 = (undefined8 *)(**(long **)(this + 0x20) + (long)pTVar5 * 0x20);
      *puVar3 = *puVar4;
      puVar3[1] = uVar2;
      uVar2 = puVar4[3];
      puVar3[2] = puVar4[2];
      puVar3[3] = uVar2;
    } while (pTVar1 != this_00);
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x00117115) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  char cVar14;
  long lVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar15 = embree::TaskScheduler::allocThreadIndex();
  pTVar16 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar16 = lVar15;
  pTVar19 = pTVar16 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar17 = pTVar17 + 0x40;
  } while (pTVar16 + 0x40040 != pTVar17);
  *(undefined8 *)(pTVar16 + 0x40040) = 0;
  *(undefined8 *)(pTVar16 + 0x40080) = 0;
  *(undefined8 *)(pTVar16 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar16 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar16 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar15 * 8) = pTVar16;
  UNLOCK();
  local_48 = pTVar16;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar16);
  if (*(ulong *)(pTVar16 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar16 + 0xc00c0);
    uVar3 = lVar5 + 0x38 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar16 + 0xc00c0) = uVar3;
      pTVar4 = pTVar16 + uVar3 + 0x40088;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar4 = &PTR_execute_0012f6d0;
      *(undefined8 *)(pTVar4 + 8) = uVar8;
      *(undefined8 *)(pTVar4 + 0x10) = uVar9;
      *(undefined8 *)(pTVar4 + 0x18) = uVar10;
      *(undefined8 *)(pTVar4 + 0x20) = uVar11;
      *(undefined8 *)(pTVar4 + 0x28) = uVar12;
      *(undefined8 *)(pTVar4 + 0x30) = uVar13;
      lVar18 = *(long *)(pTVar16 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar16 + 0xc0100);
      pTVar16[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar16 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar16 + lVar18 + 0x50) = pTVar4;
      *(long *)(pTVar16 + lVar18 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar16 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar16 + lVar18 + 0x68) = lVar5;
      *(ulong *)(pTVar16 + lVar18 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar16 + 0x40080) = *(long *)(pTVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar16 + 0x40080) - 1U <= *(ulong *)(pTVar16 + 0x40040)) {
        LOCK();
        *(long *)(pTVar16 + 0x40040) = *(long *)(pTVar16 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar14 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar16);
      } while (cVar14 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar15 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar16 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar16 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar16);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar19;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  TaskScheduler *pTVar1;
  undefined8 uVar2;
  undefined8 *puVar3;
  undefined8 *puVar4;
  TaskScheduler *this_00;
  TaskScheduler *pTVar5;
  
  pTVar1 = *(TaskScheduler **)(this + 8);
  this_00 = *(TaskScheduler **)(this + 0x10);
  if (*(ulong *)(this + 0x18) < (ulong)((long)pTVar1 - (long)this_00)) {
    spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (this_00,(ulong)(pTVar1 + (long)this_00) >> 1,*(ulong *)(this + 0x18),
               *(ulong *)(this + 0x20),
               *(_lambda_embree__range<unsigned_long>_const___2_ **)(this + 0x28),
               *(TaskGroupContext **)(this + 0x30));
    spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>
              ((TaskScheduler *)((ulong)(pTVar1 + (long)this_00) >> 1),*(ulong *)(this + 8),
               *(ulong *)(this + 0x18),*(ulong *)(this + 0x20),
               *(_lambda_embree__range<unsigned_long>_const___2_ **)(this + 0x28),
               *(TaskGroupContext **)(this + 0x30));
    embree::TaskScheduler::wait();
    return;
  }
  if (this_00 < pTVar1) {
    do {
      pTVar5 = this_00 + **(long **)(this + 0x28);
      puVar4 = (undefined8 *)((long)this_00 * 0x20 + **(long **)(this + 0x20));
      this_00 = this_00 + 1;
      uVar2 = puVar4[1];
      puVar3 = (undefined8 *)(**(long **)(this + 0x20) + (long)pTVar5 * 0x20);
      *puVar3 = *puVar4;
      puVar3[1] = uVar2;
      uVar2 = puVar4[3];
      puVar3[2] = puVar4[2];
      puVar3[3] = uVar2;
    } while (pTVar1 != this_00);
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::createLargeLeaf(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >
   const&, embree::FastAllocator::CachedAllocator) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::createLargeLeaf(ulong *param_1,ulong *param_2)

{
  long *plVar1;
  undefined1 (*pauVar2) [16];
  undefined1 (*pauVar3) [16];
  undefined8 *puVar4;
  undefined8 *puVar5;
  undefined8 uVar6;
  long lVar7;
  ulong *puVar8;
  undefined8 *puVar9;
  ulong uVar10;
  ulong uVar11;
  ulong uVar12;
  ulong *puVar13;
  ulong uVar14;
  PrimInfoExtRange *pPVar15;
  PrimInfoExtRange *pPVar16;
  ulong uVar17;
  ulong uVar18;
  long in_FS_OFFSET;
  byte bVar19;
  undefined1 auVar20 [16];
  undefined1 auVar21 [16];
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  undefined4 uVar26;
  undefined4 uVar27;
  undefined4 uVar28;
  undefined4 uVar29;
  undefined4 uVar30;
  undefined4 uVar31;
  undefined4 uVar32;
  undefined4 uVar33;
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  undefined8 in_stack_00000018;
  ulong local_8a8;
  undefined1 local_8a0;
  PrimInfoExtRange local_898 [16];
  undefined1 local_888 [16];
  undefined1 local_878 [16];
  undefined1 local_868 [16];
  ulong local_858;
  ulong uStack_850;
  ulong local_848;
  ulong local_838;
  undefined1 local_830;
  PrimInfoExtRange local_828 [16];
  undefined1 local_818 [16];
  undefined1 local_808 [16];
  undefined1 local_7f8 [16];
  ulong local_7e8;
  ulong uStack_7e0;
  ulong local_7d8;
  undefined8 auStack_7d0 [17];
  ulong local_748;
  undefined1 local_740 [8];
  ulong local_738 [4];
  ulong local_718;
  ulong uStack_710;
  ulong local_708;
  ulong uStack_700;
  ulong local_6f8;
  ulong uStack_6f0;
  ulong local_6e8;
  long local_40;
  
  bVar19 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1[1] < *param_2) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar17 = param_1[4];
  if (uVar17 < param_2[0xb] - param_2[10]) {
    uVar18 = 1;
    local_748 = *param_2;
    local_740[0] = (char)param_2[1];
    local_738[2] = param_2[4];
    local_738[3] = param_2[5];
    local_738[0] = param_2[2];
    local_738[1] = param_2[3];
    local_6e8 = param_2[0xc];
    local_718 = param_2[6];
    uStack_710 = param_2[7];
    local_708 = param_2[8];
    uStack_700 = param_2[9];
    local_6f8 = param_2[10];
    uStack_6f0 = param_2[0xb];
    puVar8 = &local_748;
    uVar26 = _LC1;
    uVar27 = _LC1;
    uVar28 = _LC1;
    uVar29 = _LC1;
    uVar30 = _LC3;
    uVar31 = _LC3;
    uVar32 = _LC3;
    uVar33 = _LC3;
    while( true ) {
      uVar10 = 0;
      uVar11 = 0;
      uVar12 = 0xffffffffffffffff;
      puVar13 = local_738 + 8;
      do {
        uVar14 = uVar17;
        if (uVar17 <= uVar11) {
          uVar14 = uVar11;
        }
        if (uVar14 < puVar13[1] - *puVar13) {
          uVar12 = uVar10;
          uVar11 = puVar13[1] - *puVar13;
        }
        uVar10 = uVar10 + 1;
        puVar13 = puVar13 + 0xe;
      } while (uVar18 != uVar10);
      if (uVar12 == 0xffffffffffffffff) break;
      local_8a0 = 0;
      local_830 = 0;
      uVar17 = *param_2 + 1;
      pPVar15 = (PrimInfoExtRange *)param_1[9];
      local_858 = local_738[uVar12 * 0xe + 8];
      uStack_7e0 = local_738[uVar12 * 0xe + 9];
      uStack_850 = local_858 + uStack_7e0 >> 1;
      if (local_858 < uStack_850) {
        uVar11 = 0;
        auVar22._4_4_ = uVar27;
        auVar22._0_4_ = uVar26;
        auVar22._8_4_ = uVar28;
        auVar22._12_4_ = uVar29;
        auVar23._4_4_ = uVar31;
        auVar23._0_4_ = uVar30;
        auVar23._8_4_ = uVar32;
        auVar23._12_4_ = uVar33;
        auVar24._4_4_ = uVar27;
        auVar24._0_4_ = uVar26;
        auVar24._8_4_ = uVar28;
        auVar24._12_4_ = uVar29;
        auVar25._4_4_ = uVar31;
        auVar25._0_4_ = uVar30;
        auVar25._8_4_ = uVar32;
        auVar25._12_4_ = uVar33;
        pauVar3 = (undefined1 (*) [16])(local_858 * 0x20 + *(long *)pPVar15);
        do {
          pauVar2 = pauVar3 + 2;
          auVar20._0_4_ = *(float *)pauVar3[1] + *(float *)*pauVar3;
          auVar20._4_4_ = *(float *)(pauVar3[1] + 4) + *(float *)(*pauVar3 + 4);
          auVar20._8_4_ = *(float *)(pauVar3[1] + 8) + *(float *)(*pauVar3 + 8);
          auVar20._12_4_ = *(float *)(pauVar3[1] + 0xc) + *(float *)(*pauVar3 + 0xc);
          auVar25 = minps(auVar25,*pauVar3);
          auVar24 = maxps(auVar24,pauVar3[1]);
          uVar11 = uVar11 + (*(uint *)(*pauVar3 + 0xc) >> 0x1b);
          auVar23 = minps(auVar23,auVar20);
          auVar22 = maxps(auVar22,auVar20);
          pauVar3 = pauVar2;
        } while ((undefined1 (*) [16])(*(long *)pPVar15 + uStack_850 * 0x20) != pauVar2);
      }
      else {
        auVar22._4_4_ = uVar27;
        auVar22._0_4_ = uVar26;
        auVar22._8_4_ = uVar28;
        auVar22._12_4_ = uVar29;
        auVar23._4_4_ = uVar31;
        auVar23._0_4_ = uVar30;
        auVar23._8_4_ = uVar32;
        auVar23._12_4_ = uVar33;
        auVar24._4_4_ = uVar27;
        auVar24._0_4_ = uVar26;
        auVar24._8_4_ = uVar28;
        auVar24._12_4_ = uVar29;
        uVar11 = 0;
        auVar25._4_4_ = uVar31;
        auVar25._0_4_ = uVar30;
        auVar25._8_4_ = uVar32;
        auVar25._12_4_ = uVar33;
      }
      if (uStack_850 < uStack_7e0) {
        uVar10 = 0;
        local_7f8._4_4_ = uVar27;
        local_7f8._0_4_ = uVar26;
        local_7f8._8_4_ = uVar28;
        local_7f8._12_4_ = uVar29;
        local_808._4_4_ = uVar31;
        local_808._0_4_ = uVar30;
        local_808._8_4_ = uVar32;
        local_808._12_4_ = uVar33;
        local_818._4_4_ = uVar27;
        local_818._0_4_ = uVar26;
        local_818._8_4_ = uVar28;
        local_818._12_4_ = uVar29;
        local_828._4_4_ = uVar31;
        local_828._0_4_ = uVar30;
        local_828._8_4_ = uVar32;
        local_828._12_4_ = uVar33;
        pauVar3 = (undefined1 (*) [16])(uStack_850 * 0x20 + *(long *)pPVar15);
        do {
          pauVar2 = pauVar3 + 2;
          auVar21._0_4_ = *(float *)pauVar3[1] + *(float *)*pauVar3;
          auVar21._4_4_ = *(float *)(pauVar3[1] + 4) + *(float *)(*pauVar3 + 4);
          auVar21._8_4_ = *(float *)(pauVar3[1] + 8) + *(float *)(*pauVar3 + 8);
          auVar21._12_4_ = *(float *)(pauVar3[1] + 0xc) + *(float *)(*pauVar3 + 0xc);
          local_828 = (PrimInfoExtRange  [16])minps((undefined1  [16])local_828,*pauVar3);
          local_818 = maxps(local_818,pauVar3[1]);
          uVar10 = uVar10 + (*(uint *)(*pauVar3 + 0xc) >> 0x1b);
          local_808 = minps(local_808,auVar21);
          local_7f8 = maxps(local_7f8,auVar21);
          pauVar3 = pauVar2;
        } while ((undefined1 (*) [16])(*(long *)pPVar15 + uStack_7e0 * 0x20) != pauVar2);
      }
      else {
        local_7f8._4_4_ = uVar27;
        local_7f8._0_4_ = uVar26;
        local_7f8._8_4_ = uVar28;
        local_7f8._12_4_ = uVar29;
        local_808._4_4_ = uVar31;
        local_808._0_4_ = uVar30;
        local_808._8_4_ = uVar32;
        local_808._12_4_ = uVar33;
        local_818._4_4_ = uVar27;
        local_818._0_4_ = uVar26;
        local_818._8_4_ = uVar28;
        local_818._12_4_ = uVar29;
        uVar10 = 0;
        local_828._4_4_ = uVar31;
        local_828._0_4_ = uVar30;
        local_828._8_4_ = uVar32;
        local_828._12_4_ = uVar33;
      }
      local_898 = (PrimInfoExtRange  [16])auVar25;
      local_888 = auVar24;
      local_878 = auVar23;
      local_868 = auVar22;
      local_848 = uStack_850;
      local_838 = uVar17;
      local_7e8 = uStack_850;
      local_7d8 = uStack_7e0;
      if (uStack_7e0 != local_738[uVar12 * 0xe + 10]) {
        pPVar16 = local_898;
        local_8a8 = uVar17;
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        setExtentedRanges((PrimInfoExtRange *)(local_738 + uVar12 * 0xe),pPVar16,local_828,uVar11,
                          uVar10);
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        moveExtentedRange(pPVar15,pPVar16,local_828);
        uVar26 = _LC1;
        uVar27 = _UNK_0012fb64;
        uVar28 = _UNK_0012fb68;
        uVar29 = _UNK_0012fb6c;
        uVar30 = _LC3;
        uVar31 = _UNK_0012fb74;
        uVar32 = _UNK_0012fb78;
        uVar33 = _UNK_0012fb7c;
      }
      uVar18 = uVar18 + 1;
      *(ulong *)(local_740 + uVar12 * 0x70 + -8) = *puVar8;
      local_740[uVar12 * 0x70] = (char)puVar8[1];
      uVar11 = puVar8[3];
      local_738[uVar12 * 0xe] = puVar8[2];
      local_738[uVar12 * 0xe + 1] = uVar11;
      uVar11 = puVar8[5];
      local_738[uVar12 * 0xe + 2] = puVar8[4];
      local_738[uVar12 * 0xe + 3] = uVar11;
      uVar11 = puVar8[7];
      local_738[uVar12 * 0xe + 4] = puVar8[6];
      local_738[uVar12 * 0xe + 5] = uVar11;
      uVar11 = puVar8[9];
      local_738[uVar12 * 0xe + 6] = puVar8[8];
      local_738[uVar12 * 0xe + 7] = uVar11;
      uVar11 = puVar8[0xb];
      local_738[uVar12 * 0xe + 8] = puVar8[10];
      local_738[uVar12 * 0xe + 9] = uVar11;
      local_738[uVar12 * 0xe + 10] = puVar8[0xc];
      *(undefined1 (*) [16])(puVar8 + 6) = auVar23;
      *(undefined1 (*) [16])(puVar8 + 4) = auVar24;
      puVar8[0xc] = local_848;
      *puVar8 = uVar17;
      *(undefined1 *)(puVar8 + 1) = 0;
      *(undefined1 (*) [16])(puVar8 + 2) = auVar25;
      *(undefined1 (*) [16])(puVar8 + 8) = auVar22;
      puVar8[10] = local_858;
      puVar8[0xb] = uStack_850;
      puVar8[0xe] = local_838;
      *(undefined1 *)(puVar8 + 0xf) = local_830;
      *(PrimInfoExtRange (*) [16])(puVar8 + 0x10) = local_828;
      *(undefined1 (*) [16])(puVar8 + 0x12) = local_818;
      *(undefined1 (*) [16])(puVar8 + 0x14) = local_808;
      *(undefined1 (*) [16])(puVar8 + 0x16) = local_7f8;
      puVar8[0x1a] = local_7d8;
      puVar8[0x18] = local_7e8;
      puVar8[0x19] = uStack_7e0;
      if (*param_1 <= uVar18) break;
      uVar17 = param_1[4];
      puVar8 = puVar8 + 0xe;
    }
    uVar17 = param_1[7];
    if (uVar17 < param_2[0xb] - param_2[10]) {
      puVar8 = &local_748;
      do {
        *(bool *)(puVar8 + 1) = puVar8[0xb] - puVar8[10] <= uVar17;
        puVar8 = puVar8 + 0xe;
      } while (&local_748 + uVar18 * 0xe != puVar8);
    }
    local_8a8 = 0x80;
    uVar17 = *in_stack_00000010;
    if (in_stack_00000008 != *(FastAllocator **)(uVar17 + 8)) {
      embree::MutexSys::lock();
      if (*(long *)(uVar17 + 8) != 0) {
        LOCK();
        plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x118);
        *plVar1 = *plVar1 + *(long *)(uVar17 + 0xa8) + *(long *)(uVar17 + 0x68);
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x120);
        *plVar1 = *plVar1 + (((*(long *)(uVar17 + 0x98) + *(long *)(uVar17 + 0x58)) -
                             *(long *)(uVar17 + 0x50)) - *(long *)(uVar17 + 0x90));
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x128);
        *plVar1 = *plVar1 + *(long *)(uVar17 + 0xb0) + *(long *)(uVar17 + 0x70);
        UNLOCK();
      }
      *(undefined8 *)(uVar17 + 0x48) = 0;
      *(undefined8 *)(uVar17 + 0x58) = 0;
      *(undefined8 *)(uVar17 + 0x50) = 0;
      *(undefined8 *)(uVar17 + 0x68) = 0;
      *(undefined8 *)(uVar17 + 0x70) = 0;
      *(undefined8 *)(uVar17 + 0x60) = 0;
      if (in_stack_00000008 == (FastAllocator *)0x0) {
        *(undefined8 *)(uVar17 + 0x88) = 0;
        uVar6 = 0;
        *(undefined8 *)(uVar17 + 0x98) = 0;
        *(undefined8 *)(uVar17 + 0x90) = 0;
        *(undefined8 *)(uVar17 + 0xa8) = 0;
        *(undefined8 *)(uVar17 + 0xb0) = 0;
      }
      else {
        uVar6 = *(undefined8 *)(in_stack_00000008 + 0x10);
        *(undefined8 *)(uVar17 + 0x88) = 0;
        *(undefined8 *)(uVar17 + 0x98) = 0;
        *(undefined8 *)(uVar17 + 0x60) = uVar6;
        *(undefined8 *)(uVar17 + 0x90) = 0;
        *(undefined8 *)(uVar17 + 0xa8) = 0;
        *(undefined8 *)(uVar17 + 0xb0) = 0;
        *(undefined8 *)(uVar17 + 0xa0) = 0;
        uVar6 = *(undefined8 *)(in_stack_00000008 + 0x10);
      }
      *(undefined8 *)(uVar17 + 0xa0) = uVar6;
      LOCK();
      *(FastAllocator **)(uVar17 + 8) = in_stack_00000008;
      UNLOCK();
      local_838 = uVar17;
      embree::MutexSys::lock();
      puVar8 = *(ulong **)(in_stack_00000008 + 0x138);
      if (puVar8 == *(ulong **)(in_stack_00000008 + 0x140)) {
        std::
        vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
        ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                  ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                    *)(in_stack_00000008 + 0x130),puVar8,&local_838);
      }
      else {
        *puVar8 = uVar17;
        *(long *)(in_stack_00000008 + 0x138) = *(long *)(in_stack_00000008 + 0x138) + 8;
      }
      embree::MutexSys::unlock();
      embree::MutexSys::unlock();
      uVar26 = _LC1;
      uVar27 = _UNK_0012fb64;
      uVar28 = _UNK_0012fb68;
      uVar29 = _UNK_0012fb6c;
      uVar30 = _LC3;
      uVar31 = _UNK_0012fb74;
      uVar32 = _UNK_0012fb78;
      uVar33 = _UNK_0012fb7c;
    }
    uVar11 = in_stack_00000010[2];
    in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
    uVar12 = (ulong)(-(int)uVar11 & 0xf);
    uVar17 = uVar11 + 0x80 + uVar12;
    in_stack_00000010[2] = uVar17;
    if (in_stack_00000010[3] < uVar17) {
      in_stack_00000010[2] = uVar11;
      if (in_stack_00000010[4] < 0x200) {
        puVar9 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_8a8,0x40,false);
        uVar26 = _LC1;
        uVar27 = _UNK_0012fb64;
        uVar28 = _UNK_0012fb68;
        uVar29 = _UNK_0012fb6c;
        uVar30 = _LC3;
        uVar31 = _UNK_0012fb74;
        uVar32 = _UNK_0012fb78;
        uVar33 = _UNK_0012fb7c;
      }
      else {
        local_838 = in_stack_00000010[4];
        puVar9 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,true);
        uVar29 = _UNK_0012fb6c;
        uVar28 = _UNK_0012fb68;
        uVar27 = _UNK_0012fb64;
        uVar26 = _LC1;
        in_stack_00000010[1] = (ulong)puVar9;
        uVar17 = in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar17;
        uVar33 = _UNK_0012fb7c;
        uVar32 = _UNK_0012fb78;
        uVar31 = _UNK_0012fb74;
        uVar30 = _LC3;
        in_stack_00000010[3] = local_838;
        if (local_838 < 0x80) {
          local_838 = in_stack_00000010[4];
          in_stack_00000010[2] = 0;
          puVar9 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,false);
          uVar33 = _UNK_0012fb7c;
          uVar32 = _UNK_0012fb78;
          uVar31 = _UNK_0012fb74;
          uVar30 = _LC3;
          uVar29 = _UNK_0012fb6c;
          uVar28 = _UNK_0012fb68;
          uVar27 = _UNK_0012fb64;
          uVar26 = _LC1;
          in_stack_00000010[1] = (ulong)puVar9;
          uVar17 = in_stack_00000010[2];
          in_stack_00000010[2] = 0x80;
          in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar17;
          in_stack_00000010[3] = local_838;
          if (local_838 < 0x80) {
            puVar9 = (undefined8 *)0x0;
            in_stack_00000010[2] = 0;
          }
        }
      }
    }
    else {
      in_stack_00000010[6] = in_stack_00000010[6] + uVar12;
      puVar9 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar17);
    }
    *puVar9 = 8;
    puVar9[1] = 8;
    puVar9[2] = 8;
    puVar9[3] = 8;
    *(undefined4 *)(puVar9 + 0xc) = uVar30;
    *(undefined4 *)((long)puVar9 + 100) = uVar31;
    *(undefined4 *)(puVar9 + 0xd) = uVar32;
    *(undefined4 *)((long)puVar9 + 0x6c) = uVar33;
    *(undefined4 *)(puVar9 + 8) = uVar30;
    *(undefined4 *)((long)puVar9 + 0x44) = uVar31;
    *(undefined4 *)(puVar9 + 9) = uVar32;
    *(undefined4 *)((long)puVar9 + 0x4c) = uVar33;
    *(undefined4 *)(puVar9 + 4) = uVar30;
    *(undefined4 *)((long)puVar9 + 0x24) = uVar31;
    *(undefined4 *)(puVar9 + 5) = uVar32;
    *(undefined4 *)((long)puVar9 + 0x2c) = uVar33;
    *(undefined4 *)(puVar9 + 0xe) = uVar26;
    *(undefined4 *)((long)puVar9 + 0x74) = uVar27;
    *(undefined4 *)(puVar9 + 0xf) = uVar28;
    *(undefined4 *)((long)puVar9 + 0x7c) = uVar29;
    *(undefined4 *)(puVar9 + 10) = uVar26;
    *(undefined4 *)((long)puVar9 + 0x54) = uVar27;
    *(undefined4 *)(puVar9 + 0xb) = uVar28;
    *(undefined4 *)((long)puVar9 + 0x5c) = uVar29;
    *(undefined4 *)(puVar9 + 6) = uVar26;
    *(undefined4 *)((long)puVar9 + 0x34) = uVar27;
    *(undefined4 *)(puVar9 + 7) = uVar28;
    *(undefined4 *)((long)puVar9 + 0x3c) = uVar29;
    puVar4 = puVar9 + 4;
    puVar8 = &local_748;
    do {
      uVar17 = puVar8[3];
      puVar5 = (undefined8 *)((long)puVar4 + 4);
      uVar11 = puVar8[2];
      uVar12 = puVar8[5];
      uVar26 = *(undefined4 *)((long)puVar8 + 0x24);
      uVar10 = puVar8[4];
      *(undefined4 *)(puVar4 + 4) = *(undefined4 *)((long)puVar8 + 0x14);
      *(int *)puVar4 = (int)uVar11;
      *(int *)(puVar4 + 8) = (int)uVar17;
      *(int *)(puVar4 + 2) = (int)uVar10;
      *(undefined4 *)(puVar4 + 6) = uVar26;
      *(int *)(puVar4 + 10) = (int)uVar12;
      puVar4 = puVar5;
      puVar8 = puVar8 + 0xe;
    } while ((undefined8 *)((long)puVar9 + uVar18 * 4 + 0x20) != puVar5);
    uVar17 = 0;
    puVar8 = &local_748;
    do {
      uVar6 = createLargeLeaf(param_1,puVar8);
      auStack_7d0[uVar17 + 1] = uVar6;
      uVar17 = uVar17 + 1;
      puVar8 = puVar8 + 0xe;
    } while (uVar18 != uVar17);
    *puVar9 = auStack_7d0[1];
    uVar17 = uVar18 * 8 & 0xffffffff;
    *(undefined8 *)((long)puVar9 + (uVar17 - 8)) = *(undefined8 *)((long)auStack_7d0 + uVar17);
    lVar7 = (long)puVar9 - (long)((ulong)(puVar9 + 1) & 0xfffffffffffffff8);
    puVar4 = (undefined8 *)((long)auStack_7d0 + (8 - lVar7));
    puVar5 = (undefined8 *)((ulong)(puVar9 + 1) & 0xfffffffffffffff8);
    for (uVar17 = (ulong)((uint)((int)(uVar18 * 8) + (int)lVar7) >> 3); uVar17 != 0;
        uVar17 = uVar17 - 1) {
      *puVar5 = *puVar4;
      puVar4 = puVar4 + (ulong)bVar19 * -2 + 1;
      puVar5 = puVar5 + (ulong)bVar19 * -2 + 1;
    }
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      return puVar9;
    }
  }
  else if (*(long *)(in_FS_OFFSET + 0x28) == *(long *)(in_FS_OFFSET + 0x28)) {
    puVar9 = (undefined8 *)
             BVHBuilderBinnedFastSpatialSAH::
             CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>
             ::operator()(param_1[0xd],param_1[8],param_2 + 10,in_stack_00000008,in_stack_00000018);
    return puVar9;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::createLargeLeaf(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >
   const&, embree::FastAllocator::CachedAllocator) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::createLargeLeaf(ulong *param_1,ulong *param_2)

{
  long *plVar1;
  undefined1 (*pauVar2) [16];
  undefined1 (*pauVar3) [16];
  undefined8 *puVar4;
  undefined8 *puVar5;
  undefined8 uVar6;
  long lVar7;
  ulong *puVar8;
  undefined8 *puVar9;
  ulong uVar10;
  ulong uVar11;
  ulong uVar12;
  ulong *puVar13;
  ulong uVar14;
  PrimInfoExtRange *pPVar15;
  PrimInfoExtRange *pPVar16;
  ulong uVar17;
  ulong uVar18;
  long in_FS_OFFSET;
  byte bVar19;
  undefined1 auVar20 [16];
  undefined1 auVar21 [16];
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  undefined4 uVar26;
  undefined4 uVar27;
  undefined4 uVar28;
  undefined4 uVar29;
  undefined4 uVar30;
  undefined4 uVar31;
  undefined4 uVar32;
  undefined4 uVar33;
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  undefined8 in_stack_00000018;
  ulong local_8a8;
  undefined1 local_8a0;
  PrimInfoExtRange local_898 [16];
  undefined1 local_888 [16];
  undefined1 local_878 [16];
  undefined1 local_868 [16];
  ulong local_858;
  ulong uStack_850;
  ulong local_848;
  ulong local_838;
  undefined1 local_830;
  PrimInfoExtRange local_828 [16];
  undefined1 local_818 [16];
  undefined1 local_808 [16];
  undefined1 local_7f8 [16];
  ulong local_7e8;
  ulong uStack_7e0;
  ulong local_7d8;
  undefined8 auStack_7d0 [17];
  ulong local_748;
  undefined1 local_740 [8];
  ulong local_738 [4];
  ulong local_718;
  ulong uStack_710;
  ulong local_708;
  ulong uStack_700;
  ulong local_6f8;
  ulong uStack_6f0;
  ulong local_6e8;
  long local_40;
  
  bVar19 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1[1] < *param_2) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar17 = param_1[4];
  if (uVar17 < param_2[0xb] - param_2[10]) {
    uVar18 = 1;
    local_748 = *param_2;
    local_740[0] = (char)param_2[1];
    local_738[2] = param_2[4];
    local_738[3] = param_2[5];
    local_738[0] = param_2[2];
    local_738[1] = param_2[3];
    local_6e8 = param_2[0xc];
    local_718 = param_2[6];
    uStack_710 = param_2[7];
    local_708 = param_2[8];
    uStack_700 = param_2[9];
    local_6f8 = param_2[10];
    uStack_6f0 = param_2[0xb];
    puVar8 = &local_748;
    uVar26 = _LC1;
    uVar27 = _LC1;
    uVar28 = _LC1;
    uVar29 = _LC1;
    uVar30 = _LC3;
    uVar31 = _LC3;
    uVar32 = _LC3;
    uVar33 = _LC3;
    while( true ) {
      uVar10 = 0;
      uVar11 = 0;
      uVar12 = 0xffffffffffffffff;
      puVar13 = local_738 + 8;
      do {
        uVar14 = uVar17;
        if (uVar17 <= uVar11) {
          uVar14 = uVar11;
        }
        if (uVar14 < puVar13[1] - *puVar13) {
          uVar12 = uVar10;
          uVar11 = puVar13[1] - *puVar13;
        }
        uVar10 = uVar10 + 1;
        puVar13 = puVar13 + 0xe;
      } while (uVar18 != uVar10);
      if (uVar12 == 0xffffffffffffffff) break;
      local_8a0 = 0;
      local_830 = 0;
      uVar17 = *param_2 + 1;
      pPVar15 = (PrimInfoExtRange *)param_1[9];
      local_858 = local_738[uVar12 * 0xe + 8];
      uStack_7e0 = local_738[uVar12 * 0xe + 9];
      uStack_850 = local_858 + uStack_7e0 >> 1;
      if (local_858 < uStack_850) {
        uVar11 = 0;
        auVar22._4_4_ = uVar27;
        auVar22._0_4_ = uVar26;
        auVar22._8_4_ = uVar28;
        auVar22._12_4_ = uVar29;
        auVar23._4_4_ = uVar31;
        auVar23._0_4_ = uVar30;
        auVar23._8_4_ = uVar32;
        auVar23._12_4_ = uVar33;
        auVar24._4_4_ = uVar27;
        auVar24._0_4_ = uVar26;
        auVar24._8_4_ = uVar28;
        auVar24._12_4_ = uVar29;
        auVar25._4_4_ = uVar31;
        auVar25._0_4_ = uVar30;
        auVar25._8_4_ = uVar32;
        auVar25._12_4_ = uVar33;
        pauVar3 = (undefined1 (*) [16])(local_858 * 0x20 + *(long *)pPVar15);
        do {
          pauVar2 = pauVar3 + 2;
          auVar20._0_4_ = *(float *)pauVar3[1] + *(float *)*pauVar3;
          auVar20._4_4_ = *(float *)(pauVar3[1] + 4) + *(float *)(*pauVar3 + 4);
          auVar20._8_4_ = *(float *)(pauVar3[1] + 8) + *(float *)(*pauVar3 + 8);
          auVar20._12_4_ = *(float *)(pauVar3[1] + 0xc) + *(float *)(*pauVar3 + 0xc);
          auVar25 = minps(auVar25,*pauVar3);
          auVar24 = maxps(auVar24,pauVar3[1]);
          uVar11 = uVar11 + (*(uint *)(*pauVar3 + 0xc) >> 0x1b);
          auVar23 = minps(auVar23,auVar20);
          auVar22 = maxps(auVar22,auVar20);
          pauVar3 = pauVar2;
        } while ((undefined1 (*) [16])(*(long *)pPVar15 + uStack_850 * 0x20) != pauVar2);
      }
      else {
        auVar22._4_4_ = uVar27;
        auVar22._0_4_ = uVar26;
        auVar22._8_4_ = uVar28;
        auVar22._12_4_ = uVar29;
        auVar23._4_4_ = uVar31;
        auVar23._0_4_ = uVar30;
        auVar23._8_4_ = uVar32;
        auVar23._12_4_ = uVar33;
        auVar24._4_4_ = uVar27;
        auVar24._0_4_ = uVar26;
        auVar24._8_4_ = uVar28;
        auVar24._12_4_ = uVar29;
        uVar11 = 0;
        auVar25._4_4_ = uVar31;
        auVar25._0_4_ = uVar30;
        auVar25._8_4_ = uVar32;
        auVar25._12_4_ = uVar33;
      }
      if (uStack_850 < uStack_7e0) {
        uVar10 = 0;
        local_7f8._4_4_ = uVar27;
        local_7f8._0_4_ = uVar26;
        local_7f8._8_4_ = uVar28;
        local_7f8._12_4_ = uVar29;
        local_808._4_4_ = uVar31;
        local_808._0_4_ = uVar30;
        local_808._8_4_ = uVar32;
        local_808._12_4_ = uVar33;
        local_818._4_4_ = uVar27;
        local_818._0_4_ = uVar26;
        local_818._8_4_ = uVar28;
        local_818._12_4_ = uVar29;
        local_828._4_4_ = uVar31;
        local_828._0_4_ = uVar30;
        local_828._8_4_ = uVar32;
        local_828._12_4_ = uVar33;
        pauVar3 = (undefined1 (*) [16])(uStack_850 * 0x20 + *(long *)pPVar15);
        do {
          pauVar2 = pauVar3 + 2;
          auVar21._0_4_ = *(float *)pauVar3[1] + *(float *)*pauVar3;
          auVar21._4_4_ = *(float *)(pauVar3[1] + 4) + *(float *)(*pauVar3 + 4);
          auVar21._8_4_ = *(float *)(pauVar3[1] + 8) + *(float *)(*pauVar3 + 8);
          auVar21._12_4_ = *(float *)(pauVar3[1] + 0xc) + *(float *)(*pauVar3 + 0xc);
          local_828 = (PrimInfoExtRange  [16])minps((undefined1  [16])local_828,*pauVar3);
          local_818 = maxps(local_818,pauVar3[1]);
          uVar10 = uVar10 + (*(uint *)(*pauVar3 + 0xc) >> 0x1b);
          local_808 = minps(local_808,auVar21);
          local_7f8 = maxps(local_7f8,auVar21);
          pauVar3 = pauVar2;
        } while ((undefined1 (*) [16])(*(long *)pPVar15 + uStack_7e0 * 0x20) != pauVar2);
      }
      else {
        local_7f8._4_4_ = uVar27;
        local_7f8._0_4_ = uVar26;
        local_7f8._8_4_ = uVar28;
        local_7f8._12_4_ = uVar29;
        local_808._4_4_ = uVar31;
        local_808._0_4_ = uVar30;
        local_808._8_4_ = uVar32;
        local_808._12_4_ = uVar33;
        local_818._4_4_ = uVar27;
        local_818._0_4_ = uVar26;
        local_818._8_4_ = uVar28;
        local_818._12_4_ = uVar29;
        uVar10 = 0;
        local_828._4_4_ = uVar31;
        local_828._0_4_ = uVar30;
        local_828._8_4_ = uVar32;
        local_828._12_4_ = uVar33;
      }
      local_898 = (PrimInfoExtRange  [16])auVar25;
      local_888 = auVar24;
      local_878 = auVar23;
      local_868 = auVar22;
      local_848 = uStack_850;
      local_838 = uVar17;
      local_7e8 = uStack_850;
      local_7d8 = uStack_7e0;
      if (uStack_7e0 != local_738[uVar12 * 0xe + 10]) {
        pPVar16 = local_898;
        local_8a8 = uVar17;
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        setExtentedRanges((PrimInfoExtRange *)(local_738 + uVar12 * 0xe),pPVar16,local_828,uVar11,
                          uVar10);
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        moveExtentedRange(pPVar15,pPVar16,local_828);
        uVar26 = _LC1;
        uVar27 = _UNK_0012fb64;
        uVar28 = _UNK_0012fb68;
        uVar29 = _UNK_0012fb6c;
        uVar30 = _LC3;
        uVar31 = _UNK_0012fb74;
        uVar32 = _UNK_0012fb78;
        uVar33 = _UNK_0012fb7c;
      }
      uVar18 = uVar18 + 1;
      *(ulong *)(local_740 + uVar12 * 0x70 + -8) = *puVar8;
      local_740[uVar12 * 0x70] = (char)puVar8[1];
      uVar11 = puVar8[3];
      local_738[uVar12 * 0xe] = puVar8[2];
      local_738[uVar12 * 0xe + 1] = uVar11;
      uVar11 = puVar8[5];
      local_738[uVar12 * 0xe + 2] = puVar8[4];
      local_738[uVar12 * 0xe + 3] = uVar11;
      uVar11 = puVar8[7];
      local_738[uVar12 * 0xe + 4] = puVar8[6];
      local_738[uVar12 * 0xe + 5] = uVar11;
      uVar11 = puVar8[9];
      local_738[uVar12 * 0xe + 6] = puVar8[8];
      local_738[uVar12 * 0xe + 7] = uVar11;
      uVar11 = puVar8[0xb];
      local_738[uVar12 * 0xe + 8] = puVar8[10];
      local_738[uVar12 * 0xe + 9] = uVar11;
      local_738[uVar12 * 0xe + 10] = puVar8[0xc];
      *(undefined1 (*) [16])(puVar8 + 6) = auVar23;
      *(undefined1 (*) [16])(puVar8 + 4) = auVar24;
      puVar8[0xc] = local_848;
      *puVar8 = uVar17;
      *(undefined1 *)(puVar8 + 1) = 0;
      *(undefined1 (*) [16])(puVar8 + 2) = auVar25;
      *(undefined1 (*) [16])(puVar8 + 8) = auVar22;
      puVar8[10] = local_858;
      puVar8[0xb] = uStack_850;
      puVar8[0xe] = local_838;
      *(undefined1 *)(puVar8 + 0xf) = local_830;
      *(PrimInfoExtRange (*) [16])(puVar8 + 0x10) = local_828;
      *(undefined1 (*) [16])(puVar8 + 0x12) = local_818;
      *(undefined1 (*) [16])(puVar8 + 0x14) = local_808;
      *(undefined1 (*) [16])(puVar8 + 0x16) = local_7f8;
      puVar8[0x1a] = local_7d8;
      puVar8[0x18] = local_7e8;
      puVar8[0x19] = uStack_7e0;
      if (*param_1 <= uVar18) break;
      uVar17 = param_1[4];
      puVar8 = puVar8 + 0xe;
    }
    uVar17 = param_1[7];
    if (uVar17 < param_2[0xb] - param_2[10]) {
      puVar8 = &local_748;
      do {
        *(bool *)(puVar8 + 1) = puVar8[0xb] - puVar8[10] <= uVar17;
        puVar8 = puVar8 + 0xe;
      } while (&local_748 + uVar18 * 0xe != puVar8);
    }
    local_8a8 = 0x80;
    uVar17 = *in_stack_00000010;
    if (in_stack_00000008 != *(FastAllocator **)(uVar17 + 8)) {
      embree::MutexSys::lock();
      if (*(long *)(uVar17 + 8) != 0) {
        LOCK();
        plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x118);
        *plVar1 = *plVar1 + *(long *)(uVar17 + 0xa8) + *(long *)(uVar17 + 0x68);
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x120);
        *plVar1 = *plVar1 + (((*(long *)(uVar17 + 0x98) + *(long *)(uVar17 + 0x58)) -
                             *(long *)(uVar17 + 0x50)) - *(long *)(uVar17 + 0x90));
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x128);
        *plVar1 = *plVar1 + *(long *)(uVar17 + 0xb0) + *(long *)(uVar17 + 0x70);
        UNLOCK();
      }
      *(undefined8 *)(uVar17 + 0x48) = 0;
      *(undefined8 *)(uVar17 + 0x58) = 0;
      *(undefined8 *)(uVar17 + 0x50) = 0;
      *(undefined8 *)(uVar17 + 0x68) = 0;
      *(undefined8 *)(uVar17 + 0x70) = 0;
      *(undefined8 *)(uVar17 + 0x60) = 0;
      if (in_stack_00000008 == (FastAllocator *)0x0) {
        *(undefined8 *)(uVar17 + 0x88) = 0;
        uVar6 = 0;
        *(undefined8 *)(uVar17 + 0x98) = 0;
        *(undefined8 *)(uVar17 + 0x90) = 0;
        *(undefined8 *)(uVar17 + 0xa8) = 0;
        *(undefined8 *)(uVar17 + 0xb0) = 0;
      }
      else {
        uVar6 = *(undefined8 *)(in_stack_00000008 + 0x10);
        *(undefined8 *)(uVar17 + 0x88) = 0;
        *(undefined8 *)(uVar17 + 0x98) = 0;
        *(undefined8 *)(uVar17 + 0x60) = uVar6;
        *(undefined8 *)(uVar17 + 0x90) = 0;
        *(undefined8 *)(uVar17 + 0xa8) = 0;
        *(undefined8 *)(uVar17 + 0xb0) = 0;
        *(undefined8 *)(uVar17 + 0xa0) = 0;
        uVar6 = *(undefined8 *)(in_stack_00000008 + 0x10);
      }
      *(undefined8 *)(uVar17 + 0xa0) = uVar6;
      LOCK();
      *(FastAllocator **)(uVar17 + 8) = in_stack_00000008;
      UNLOCK();
      local_838 = uVar17;
      embree::MutexSys::lock();
      puVar8 = *(ulong **)(in_stack_00000008 + 0x138);
      if (puVar8 == *(ulong **)(in_stack_00000008 + 0x140)) {
        std::
        vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
        ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                  ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                    *)(in_stack_00000008 + 0x130),puVar8,&local_838);
      }
      else {
        *puVar8 = uVar17;
        *(long *)(in_stack_00000008 + 0x138) = *(long *)(in_stack_00000008 + 0x138) + 8;
      }
      embree::MutexSys::unlock();
      embree::MutexSys::unlock();
      uVar26 = _LC1;
      uVar27 = _UNK_0012fb64;
      uVar28 = _UNK_0012fb68;
      uVar29 = _UNK_0012fb6c;
      uVar30 = _LC3;
      uVar31 = _UNK_0012fb74;
      uVar32 = _UNK_0012fb78;
      uVar33 = _UNK_0012fb7c;
    }
    uVar11 = in_stack_00000010[2];
    in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
    uVar12 = (ulong)(-(int)uVar11 & 0xf);
    uVar17 = uVar11 + 0x80 + uVar12;
    in_stack_00000010[2] = uVar17;
    if (in_stack_00000010[3] < uVar17) {
      in_stack_00000010[2] = uVar11;
      if (in_stack_00000010[4] < 0x200) {
        puVar9 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_8a8,0x40,false);
        uVar26 = _LC1;
        uVar27 = _UNK_0012fb64;
        uVar28 = _UNK_0012fb68;
        uVar29 = _UNK_0012fb6c;
        uVar30 = _LC3;
        uVar31 = _UNK_0012fb74;
        uVar32 = _UNK_0012fb78;
        uVar33 = _UNK_0012fb7c;
      }
      else {
        local_838 = in_stack_00000010[4];
        puVar9 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,true);
        uVar29 = _UNK_0012fb6c;
        uVar28 = _UNK_0012fb68;
        uVar27 = _UNK_0012fb64;
        uVar26 = _LC1;
        in_stack_00000010[1] = (ulong)puVar9;
        uVar17 = in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar17;
        uVar33 = _UNK_0012fb7c;
        uVar32 = _UNK_0012fb78;
        uVar31 = _UNK_0012fb74;
        uVar30 = _LC3;
        in_stack_00000010[3] = local_838;
        if (local_838 < 0x80) {
          local_838 = in_stack_00000010[4];
          in_stack_00000010[2] = 0;
          puVar9 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,false);
          uVar33 = _UNK_0012fb7c;
          uVar32 = _UNK_0012fb78;
          uVar31 = _UNK_0012fb74;
          uVar30 = _LC3;
          uVar29 = _UNK_0012fb6c;
          uVar28 = _UNK_0012fb68;
          uVar27 = _UNK_0012fb64;
          uVar26 = _LC1;
          in_stack_00000010[1] = (ulong)puVar9;
          uVar17 = in_stack_00000010[2];
          in_stack_00000010[2] = 0x80;
          in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar17;
          in_stack_00000010[3] = local_838;
          if (local_838 < 0x80) {
            puVar9 = (undefined8 *)0x0;
            in_stack_00000010[2] = 0;
          }
        }
      }
    }
    else {
      in_stack_00000010[6] = in_stack_00000010[6] + uVar12;
      puVar9 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar17);
    }
    *puVar9 = 8;
    puVar9[1] = 8;
    puVar9[2] = 8;
    puVar9[3] = 8;
    *(undefined4 *)(puVar9 + 0xc) = uVar30;
    *(undefined4 *)((long)puVar9 + 100) = uVar31;
    *(undefined4 *)(puVar9 + 0xd) = uVar32;
    *(undefined4 *)((long)puVar9 + 0x6c) = uVar33;
    *(undefined4 *)(puVar9 + 8) = uVar30;
    *(undefined4 *)((long)puVar9 + 0x44) = uVar31;
    *(undefined4 *)(puVar9 + 9) = uVar32;
    *(undefined4 *)((long)puVar9 + 0x4c) = uVar33;
    *(undefined4 *)(puVar9 + 4) = uVar30;
    *(undefined4 *)((long)puVar9 + 0x24) = uVar31;
    *(undefined4 *)(puVar9 + 5) = uVar32;
    *(undefined4 *)((long)puVar9 + 0x2c) = uVar33;
    *(undefined4 *)(puVar9 + 0xe) = uVar26;
    *(undefined4 *)((long)puVar9 + 0x74) = uVar27;
    *(undefined4 *)(puVar9 + 0xf) = uVar28;
    *(undefined4 *)((long)puVar9 + 0x7c) = uVar29;
    *(undefined4 *)(puVar9 + 10) = uVar26;
    *(undefined4 *)((long)puVar9 + 0x54) = uVar27;
    *(undefined4 *)(puVar9 + 0xb) = uVar28;
    *(undefined4 *)((long)puVar9 + 0x5c) = uVar29;
    *(undefined4 *)(puVar9 + 6) = uVar26;
    *(undefined4 *)((long)puVar9 + 0x34) = uVar27;
    *(undefined4 *)(puVar9 + 7) = uVar28;
    *(undefined4 *)((long)puVar9 + 0x3c) = uVar29;
    puVar4 = puVar9 + 4;
    puVar8 = &local_748;
    do {
      uVar17 = puVar8[3];
      puVar5 = (undefined8 *)((long)puVar4 + 4);
      uVar11 = puVar8[2];
      uVar12 = puVar8[5];
      uVar26 = *(undefined4 *)((long)puVar8 + 0x24);
      uVar10 = puVar8[4];
      *(undefined4 *)(puVar4 + 4) = *(undefined4 *)((long)puVar8 + 0x14);
      *(int *)puVar4 = (int)uVar11;
      *(int *)(puVar4 + 8) = (int)uVar17;
      *(int *)(puVar4 + 2) = (int)uVar10;
      *(undefined4 *)(puVar4 + 6) = uVar26;
      *(int *)(puVar4 + 10) = (int)uVar12;
      puVar4 = puVar5;
      puVar8 = puVar8 + 0xe;
    } while ((undefined8 *)((long)puVar9 + uVar18 * 4 + 0x20) != puVar5);
    uVar17 = 0;
    puVar8 = &local_748;
    do {
      uVar6 = createLargeLeaf(param_1,puVar8);
      auStack_7d0[uVar17 + 1] = uVar6;
      uVar17 = uVar17 + 1;
      puVar8 = puVar8 + 0xe;
    } while (uVar18 != uVar17);
    *puVar9 = auStack_7d0[1];
    uVar17 = uVar18 * 8 & 0xffffffff;
    *(undefined8 *)((long)puVar9 + (uVar17 - 8)) = *(undefined8 *)((long)auStack_7d0 + uVar17);
    lVar7 = (long)puVar9 - (long)((ulong)(puVar9 + 1) & 0xfffffffffffffff8);
    puVar4 = (undefined8 *)((long)auStack_7d0 + (8 - lVar7));
    puVar5 = (undefined8 *)((ulong)(puVar9 + 1) & 0xfffffffffffffff8);
    for (uVar17 = (ulong)((uint)((int)(uVar18 * 8) + (int)lVar7) >> 3); uVar17 != 0;
        uVar17 = uVar17 - 1) {
      *puVar5 = *puVar4;
      puVar4 = puVar4 + (ulong)bVar19 * -2 + 1;
      puVar5 = puVar5 + (ulong)bVar19 * -2 + 1;
    }
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      return puVar9;
    }
  }
  else if (*(long *)(in_FS_OFFSET + 0x28) == *(long *)(in_FS_OFFSET + 0x28)) {
    puVar9 = (undefined8 *)
             BVHBuilderBinnedFastSpatialSAH::
             CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>
             ::operator()(param_1[0xd],param_1[8],param_2 + 10,in_stack_00000008,in_stack_00000018);
    return puVar9;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::createLargeLeaf(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >
   const&, embree::FastAllocator::CachedAllocator) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::createLargeLeaf(ulong *param_1,ulong *param_2)

{
  long *plVar1;
  undefined1 (*pauVar2) [16];
  undefined1 (*pauVar3) [16];
  undefined8 *puVar4;
  undefined8 *puVar5;
  undefined8 uVar6;
  long lVar7;
  ulong *puVar8;
  undefined8 *puVar9;
  ulong uVar10;
  ulong uVar11;
  ulong uVar12;
  ulong *puVar13;
  ulong uVar14;
  PrimInfoExtRange *pPVar15;
  PrimInfoExtRange *pPVar16;
  ulong uVar17;
  ulong uVar18;
  long in_FS_OFFSET;
  byte bVar19;
  undefined1 auVar20 [16];
  undefined1 auVar21 [16];
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  undefined4 uVar26;
  undefined4 uVar27;
  undefined4 uVar28;
  undefined4 uVar29;
  undefined4 uVar30;
  undefined4 uVar31;
  undefined4 uVar32;
  undefined4 uVar33;
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  undefined8 in_stack_00000018;
  ulong local_8a8;
  undefined1 local_8a0;
  PrimInfoExtRange local_898 [16];
  undefined1 local_888 [16];
  undefined1 local_878 [16];
  undefined1 local_868 [16];
  ulong local_858;
  ulong uStack_850;
  ulong local_848;
  ulong local_838;
  undefined1 local_830;
  PrimInfoExtRange local_828 [16];
  undefined1 local_818 [16];
  undefined1 local_808 [16];
  undefined1 local_7f8 [16];
  ulong local_7e8;
  ulong uStack_7e0;
  ulong local_7d8;
  undefined8 auStack_7d0 [17];
  ulong local_748;
  undefined1 local_740 [8];
  ulong local_738 [4];
  ulong local_718;
  ulong uStack_710;
  ulong local_708;
  ulong uStack_700;
  ulong local_6f8;
  ulong uStack_6f0;
  ulong local_6e8;
  long local_40;
  
  bVar19 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1[1] < *param_2) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar17 = param_1[4];
  if (uVar17 < param_2[0xb] - param_2[10]) {
    uVar18 = 1;
    local_748 = *param_2;
    local_740[0] = (char)param_2[1];
    local_738[2] = param_2[4];
    local_738[3] = param_2[5];
    local_738[0] = param_2[2];
    local_738[1] = param_2[3];
    local_6e8 = param_2[0xc];
    local_718 = param_2[6];
    uStack_710 = param_2[7];
    local_708 = param_2[8];
    uStack_700 = param_2[9];
    local_6f8 = param_2[10];
    uStack_6f0 = param_2[0xb];
    puVar8 = &local_748;
    uVar26 = _LC1;
    uVar27 = _LC1;
    uVar28 = _LC1;
    uVar29 = _LC1;
    uVar30 = _LC3;
    uVar31 = _LC3;
    uVar32 = _LC3;
    uVar33 = _LC3;
    while( true ) {
      uVar10 = 0;
      uVar11 = 0;
      uVar12 = 0xffffffffffffffff;
      puVar13 = local_738 + 8;
      do {
        uVar14 = uVar17;
        if (uVar17 <= uVar11) {
          uVar14 = uVar11;
        }
        if (uVar14 < puVar13[1] - *puVar13) {
          uVar12 = uVar10;
          uVar11 = puVar13[1] - *puVar13;
        }
        uVar10 = uVar10 + 1;
        puVar13 = puVar13 + 0xe;
      } while (uVar18 != uVar10);
      if (uVar12 == 0xffffffffffffffff) break;
      local_8a0 = 0;
      local_830 = 0;
      uVar17 = *param_2 + 1;
      pPVar15 = (PrimInfoExtRange *)param_1[9];
      local_858 = local_738[uVar12 * 0xe + 8];
      uStack_7e0 = local_738[uVar12 * 0xe + 9];
      uStack_850 = local_858 + uStack_7e0 >> 1;
      if (local_858 < uStack_850) {
        uVar11 = 0;
        auVar22._4_4_ = uVar27;
        auVar22._0_4_ = uVar26;
        auVar22._8_4_ = uVar28;
        auVar22._12_4_ = uVar29;
        auVar23._4_4_ = uVar31;
        auVar23._0_4_ = uVar30;
        auVar23._8_4_ = uVar32;
        auVar23._12_4_ = uVar33;
        auVar24._4_4_ = uVar27;
        auVar24._0_4_ = uVar26;
        auVar24._8_4_ = uVar28;
        auVar24._12_4_ = uVar29;
        auVar25._4_4_ = uVar31;
        auVar25._0_4_ = uVar30;
        auVar25._8_4_ = uVar32;
        auVar25._12_4_ = uVar33;
        pauVar3 = (undefined1 (*) [16])(local_858 * 0x20 + *(long *)pPVar15);
        do {
          pauVar2 = pauVar3 + 2;
          auVar20._0_4_ = *(float *)pauVar3[1] + *(float *)*pauVar3;
          auVar20._4_4_ = *(float *)(pauVar3[1] + 4) + *(float *)(*pauVar3 + 4);
          auVar20._8_4_ = *(float *)(pauVar3[1] + 8) + *(float *)(*pauVar3 + 8);
          auVar20._12_4_ = *(float *)(pauVar3[1] + 0xc) + *(float *)(*pauVar3 + 0xc);
          auVar25 = minps(auVar25,*pauVar3);
          auVar24 = maxps(auVar24,pauVar3[1]);
          uVar11 = uVar11 + (*(uint *)(*pauVar3 + 0xc) >> 0x1b);
          auVar23 = minps(auVar23,auVar20);
          auVar22 = maxps(auVar22,auVar20);
          pauVar3 = pauVar2;
        } while ((undefined1 (*) [16])(*(long *)pPVar15 + uStack_850 * 0x20) != pauVar2);
      }
      else {
        auVar22._4_4_ = uVar27;
        auVar22._0_4_ = uVar26;
        auVar22._8_4_ = uVar28;
        auVar22._12_4_ = uVar29;
        auVar23._4_4_ = uVar31;
        auVar23._0_4_ = uVar30;
        auVar23._8_4_ = uVar32;
        auVar23._12_4_ = uVar33;
        auVar24._4_4_ = uVar27;
        auVar24._0_4_ = uVar26;
        auVar24._8_4_ = uVar28;
        auVar24._12_4_ = uVar29;
        uVar11 = 0;
        auVar25._4_4_ = uVar31;
        auVar25._0_4_ = uVar30;
        auVar25._8_4_ = uVar32;
        auVar25._12_4_ = uVar33;
      }
      if (uStack_850 < uStack_7e0) {
        uVar10 = 0;
        local_7f8._4_4_ = uVar27;
        local_7f8._0_4_ = uVar26;
        local_7f8._8_4_ = uVar28;
        local_7f8._12_4_ = uVar29;
        local_808._4_4_ = uVar31;
        local_808._0_4_ = uVar30;
        local_808._8_4_ = uVar32;
        local_808._12_4_ = uVar33;
        local_818._4_4_ = uVar27;
        local_818._0_4_ = uVar26;
        local_818._8_4_ = uVar28;
        local_818._12_4_ = uVar29;
        local_828._4_4_ = uVar31;
        local_828._0_4_ = uVar30;
        local_828._8_4_ = uVar32;
        local_828._12_4_ = uVar33;
        pauVar3 = (undefined1 (*) [16])(uStack_850 * 0x20 + *(long *)pPVar15);
        do {
          pauVar2 = pauVar3 + 2;
          auVar21._0_4_ = *(float *)pauVar3[1] + *(float *)*pauVar3;
          auVar21._4_4_ = *(float *)(pauVar3[1] + 4) + *(float *)(*pauVar3 + 4);
          auVar21._8_4_ = *(float *)(pauVar3[1] + 8) + *(float *)(*pauVar3 + 8);
          auVar21._12_4_ = *(float *)(pauVar3[1] + 0xc) + *(float *)(*pauVar3 + 0xc);
          local_828 = (PrimInfoExtRange  [16])minps((undefined1  [16])local_828,*pauVar3);
          local_818 = maxps(local_818,pauVar3[1]);
          uVar10 = uVar10 + (*(uint *)(*pauVar3 + 0xc) >> 0x1b);
          local_808 = minps(local_808,auVar21);
          local_7f8 = maxps(local_7f8,auVar21);
          pauVar3 = pauVar2;
        } while ((undefined1 (*) [16])(*(long *)pPVar15 + uStack_7e0 * 0x20) != pauVar2);
      }
      else {
        local_7f8._4_4_ = uVar27;
        local_7f8._0_4_ = uVar26;
        local_7f8._8_4_ = uVar28;
        local_7f8._12_4_ = uVar29;
        local_808._4_4_ = uVar31;
        local_808._0_4_ = uVar30;
        local_808._8_4_ = uVar32;
        local_808._12_4_ = uVar33;
        local_818._4_4_ = uVar27;
        local_818._0_4_ = uVar26;
        local_818._8_4_ = uVar28;
        local_818._12_4_ = uVar29;
        uVar10 = 0;
        local_828._4_4_ = uVar31;
        local_828._0_4_ = uVar30;
        local_828._8_4_ = uVar32;
        local_828._12_4_ = uVar33;
      }
      local_898 = (PrimInfoExtRange  [16])auVar25;
      local_888 = auVar24;
      local_878 = auVar23;
      local_868 = auVar22;
      local_848 = uStack_850;
      local_838 = uVar17;
      local_7e8 = uStack_850;
      local_7d8 = uStack_7e0;
      if (uStack_7e0 != local_738[uVar12 * 0xe + 10]) {
        pPVar16 = local_898;
        local_8a8 = uVar17;
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        setExtentedRanges((PrimInfoExtRange *)(local_738 + uVar12 * 0xe),pPVar16,local_828,uVar11,
                          uVar10);
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        moveExtentedRange(pPVar15,pPVar16,local_828);
        uVar26 = _LC1;
        uVar27 = _UNK_0012fb64;
        uVar28 = _UNK_0012fb68;
        uVar29 = _UNK_0012fb6c;
        uVar30 = _LC3;
        uVar31 = _UNK_0012fb74;
        uVar32 = _UNK_0012fb78;
        uVar33 = _UNK_0012fb7c;
      }
      uVar18 = uVar18 + 1;
      *(ulong *)(local_740 + uVar12 * 0x70 + -8) = *puVar8;
      local_740[uVar12 * 0x70] = (char)puVar8[1];
      uVar11 = puVar8[3];
      local_738[uVar12 * 0xe] = puVar8[2];
      local_738[uVar12 * 0xe + 1] = uVar11;
      uVar11 = puVar8[5];
      local_738[uVar12 * 0xe + 2] = puVar8[4];
      local_738[uVar12 * 0xe + 3] = uVar11;
      uVar11 = puVar8[7];
      local_738[uVar12 * 0xe + 4] = puVar8[6];
      local_738[uVar12 * 0xe + 5] = uVar11;
      uVar11 = puVar8[9];
      local_738[uVar12 * 0xe + 6] = puVar8[8];
      local_738[uVar12 * 0xe + 7] = uVar11;
      uVar11 = puVar8[0xb];
      local_738[uVar12 * 0xe + 8] = puVar8[10];
      local_738[uVar12 * 0xe + 9] = uVar11;
      local_738[uVar12 * 0xe + 10] = puVar8[0xc];
      *(undefined1 (*) [16])(puVar8 + 6) = auVar23;
      *(undefined1 (*) [16])(puVar8 + 4) = auVar24;
      puVar8[0xc] = local_848;
      *puVar8 = uVar17;
      *(undefined1 *)(puVar8 + 1) = 0;
      *(undefined1 (*) [16])(puVar8 + 2) = auVar25;
      *(undefined1 (*) [16])(puVar8 + 8) = auVar22;
      puVar8[10] = local_858;
      puVar8[0xb] = uStack_850;
      puVar8[0xe] = local_838;
      *(undefined1 *)(puVar8 + 0xf) = local_830;
      *(PrimInfoExtRange (*) [16])(puVar8 + 0x10) = local_828;
      *(undefined1 (*) [16])(puVar8 + 0x12) = local_818;
      *(undefined1 (*) [16])(puVar8 + 0x14) = local_808;
      *(undefined1 (*) [16])(puVar8 + 0x16) = local_7f8;
      puVar8[0x1a] = local_7d8;
      puVar8[0x18] = local_7e8;
      puVar8[0x19] = uStack_7e0;
      if (*param_1 <= uVar18) break;
      uVar17 = param_1[4];
      puVar8 = puVar8 + 0xe;
    }
    uVar17 = param_1[7];
    if (uVar17 < param_2[0xb] - param_2[10]) {
      puVar8 = &local_748;
      do {
        *(bool *)(puVar8 + 1) = puVar8[0xb] - puVar8[10] <= uVar17;
        puVar8 = puVar8 + 0xe;
      } while (&local_748 + uVar18 * 0xe != puVar8);
    }
    local_8a8 = 0x80;
    uVar17 = *in_stack_00000010;
    if (in_stack_00000008 != *(FastAllocator **)(uVar17 + 8)) {
      embree::MutexSys::lock();
      if (*(long *)(uVar17 + 8) != 0) {
        LOCK();
        plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x118);
        *plVar1 = *plVar1 + *(long *)(uVar17 + 0xa8) + *(long *)(uVar17 + 0x68);
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x120);
        *plVar1 = *plVar1 + (((*(long *)(uVar17 + 0x98) + *(long *)(uVar17 + 0x58)) -
                             *(long *)(uVar17 + 0x50)) - *(long *)(uVar17 + 0x90));
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar17 + 8) + 0x128);
        *plVar1 = *plVar1 + *(long *)(uVar17 + 0xb0) + *(long *)(uVar17 + 0x70);
        UNLOCK();
      }
      *(undefined8 *)(uVar17 + 0x48) = 0;
      *(undefined8 *)(uVar17 + 0x58) = 0;
      *(undefined8 *)(uVar17 + 0x50) = 0;
      *(undefined8 *)(uVar17 + 0x68) = 0;
      *(undefined8 *)(uVar17 + 0x70) = 0;
      *(undefined8 *)(uVar17 + 0x60) = 0;
      if (in_stack_00000008 == (FastAllocator *)0x0) {
        *(undefined8 *)(uVar17 + 0x88) = 0;
        uVar6 = 0;
        *(undefined8 *)(uVar17 + 0x98) = 0;
        *(undefined8 *)(uVar17 + 0x90) = 0;
        *(undefined8 *)(uVar17 + 0xa8) = 0;
        *(undefined8 *)(uVar17 + 0xb0) = 0;
      }
      else {
        uVar6 = *(undefined8 *)(in_stack_00000008 + 0x10);
        *(undefined8 *)(uVar17 + 0x88) = 0;
        *(undefined8 *)(uVar17 + 0x98) = 0;
        *(undefined8 *)(uVar17 + 0x60) = uVar6;
        *(undefined8 *)(uVar17 + 0x90) = 0;
        *(undefined8 *)(uVar17 + 0xa8) = 0;
        *(undefined8 *)(uVar17 + 0xb0) = 0;
        *(undefined8 *)(uVar17 + 0xa0) = 0;
        uVar6 = *(undefined8 *)(in_stack_00000008 + 0x10);
      }
      *(undefined8 *)(uVar17 + 0xa0) = uVar6;
      LOCK();
      *(FastAllocator **)(uVar17 + 8) = in_stack_00000008;
      UNLOCK();
      local_838 = uVar17;
      embree::MutexSys::lock();
      puVar8 = *(ulong **)(in_stack_00000008 + 0x138);
      if (puVar8 == *(ulong **)(in_stack_00000008 + 0x140)) {
        std::
        vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
        ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                  ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                    *)(in_stack_00000008 + 0x130),puVar8,&local_838);
      }
      else {
        *puVar8 = uVar17;
        *(long *)(in_stack_00000008 + 0x138) = *(long *)(in_stack_00000008 + 0x138) + 8;
      }
      embree::MutexSys::unlock();
      embree::MutexSys::unlock();
      uVar26 = _LC1;
      uVar27 = _UNK_0012fb64;
      uVar28 = _UNK_0012fb68;
      uVar29 = _UNK_0012fb6c;
      uVar30 = _LC3;
      uVar31 = _UNK_0012fb74;
      uVar32 = _UNK_0012fb78;
      uVar33 = _UNK_0012fb7c;
    }
    uVar11 = in_stack_00000010[2];
    in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
    uVar12 = (ulong)(-(int)uVar11 & 0xf);
    uVar17 = uVar11 + 0x80 + uVar12;
    in_stack_00000010[2] = uVar17;
    if (in_stack_00000010[3] < uVar17) {
      in_stack_00000010[2] = uVar11;
      if (in_stack_00000010[4] < 0x200) {
        puVar9 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_8a8,0x40,false);
        uVar26 = _LC1;
        uVar27 = _UNK_0012fb64;
        uVar28 = _UNK_0012fb68;
        uVar29 = _UNK_0012fb6c;
        uVar30 = _LC3;
        uVar31 = _UNK_0012fb74;
        uVar32 = _UNK_0012fb78;
        uVar33 = _UNK_0012fb7c;
      }
      else {
        local_838 = in_stack_00000010[4];
        puVar9 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,true);
        uVar29 = _UNK_0012fb6c;
        uVar28 = _UNK_0012fb68;
        uVar27 = _UNK_0012fb64;
        uVar26 = _LC1;
        in_stack_00000010[1] = (ulong)puVar9;
        uVar17 = in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar17;
        uVar33 = _UNK_0012fb7c;
        uVar32 = _UNK_0012fb78;
        uVar31 = _UNK_0012fb74;
        uVar30 = _LC3;
        in_stack_00000010[3] = local_838;
        if (local_838 < 0x80) {
          local_838 = in_stack_00000010[4];
          in_stack_00000010[2] = 0;
          puVar9 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,false);
          uVar33 = _UNK_0012fb7c;
          uVar32 = _UNK_0012fb78;
          uVar31 = _UNK_0012fb74;
          uVar30 = _LC3;
          uVar29 = _UNK_0012fb6c;
          uVar28 = _UNK_0012fb68;
          uVar27 = _UNK_0012fb64;
          uVar26 = _LC1;
          in_stack_00000010[1] = (ulong)puVar9;
          uVar17 = in_stack_00000010[2];
          in_stack_00000010[2] = 0x80;
          in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar17;
          in_stack_00000010[3] = local_838;
          if (local_838 < 0x80) {
            puVar9 = (undefined8 *)0x0;
            in_stack_00000010[2] = 0;
          }
        }
      }
    }
    else {
      in_stack_00000010[6] = in_stack_00000010[6] + uVar12;
      puVar9 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar17);
    }
    *puVar9 = 8;
    puVar9[1] = 8;
    puVar9[2] = 8;
    puVar9[3] = 8;
    *(undefined4 *)(puVar9 + 0xc) = uVar30;
    *(undefined4 *)((long)puVar9 + 100) = uVar31;
    *(undefined4 *)(puVar9 + 0xd) = uVar32;
    *(undefined4 *)((long)puVar9 + 0x6c) = uVar33;
    *(undefined4 *)(puVar9 + 8) = uVar30;
    *(undefined4 *)((long)puVar9 + 0x44) = uVar31;
    *(undefined4 *)(puVar9 + 9) = uVar32;
    *(undefined4 *)((long)puVar9 + 0x4c) = uVar33;
    *(undefined4 *)(puVar9 + 4) = uVar30;
    *(undefined4 *)((long)puVar9 + 0x24) = uVar31;
    *(undefined4 *)(puVar9 + 5) = uVar32;
    *(undefined4 *)((long)puVar9 + 0x2c) = uVar33;
    *(undefined4 *)(puVar9 + 0xe) = uVar26;
    *(undefined4 *)((long)puVar9 + 0x74) = uVar27;
    *(undefined4 *)(puVar9 + 0xf) = uVar28;
    *(undefined4 *)((long)puVar9 + 0x7c) = uVar29;
    *(undefined4 *)(puVar9 + 10) = uVar26;
    *(undefined4 *)((long)puVar9 + 0x54) = uVar27;
    *(undefined4 *)(puVar9 + 0xb) = uVar28;
    *(undefined4 *)((long)puVar9 + 0x5c) = uVar29;
    *(undefined4 *)(puVar9 + 6) = uVar26;
    *(undefined4 *)((long)puVar9 + 0x34) = uVar27;
    *(undefined4 *)(puVar9 + 7) = uVar28;
    *(undefined4 *)((long)puVar9 + 0x3c) = uVar29;
    puVar4 = puVar9 + 4;
    puVar8 = &local_748;
    do {
      uVar17 = puVar8[3];
      puVar5 = (undefined8 *)((long)puVar4 + 4);
      uVar11 = puVar8[2];
      uVar12 = puVar8[5];
      uVar26 = *(undefined4 *)((long)puVar8 + 0x24);
      uVar10 = puVar8[4];
      *(undefined4 *)(puVar4 + 4) = *(undefined4 *)((long)puVar8 + 0x14);
      *(int *)puVar4 = (int)uVar11;
      *(int *)(puVar4 + 8) = (int)uVar17;
      *(int *)(puVar4 + 2) = (int)uVar10;
      *(undefined4 *)(puVar4 + 6) = uVar26;
      *(int *)(puVar4 + 10) = (int)uVar12;
      puVar4 = puVar5;
      puVar8 = puVar8 + 0xe;
    } while ((undefined8 *)((long)puVar9 + uVar18 * 4 + 0x20) != puVar5);
    uVar17 = 0;
    puVar8 = &local_748;
    do {
      uVar6 = createLargeLeaf(param_1,puVar8);
      auStack_7d0[uVar17 + 1] = uVar6;
      uVar17 = uVar17 + 1;
      puVar8 = puVar8 + 0xe;
    } while (uVar18 != uVar17);
    *puVar9 = auStack_7d0[1];
    uVar17 = uVar18 * 8 & 0xffffffff;
    *(undefined8 *)((long)puVar9 + (uVar17 - 8)) = *(undefined8 *)((long)auStack_7d0 + uVar17);
    lVar7 = (long)puVar9 - (long)((ulong)(puVar9 + 1) & 0xfffffffffffffff8);
    puVar4 = (undefined8 *)((long)auStack_7d0 + (8 - lVar7));
    puVar5 = (undefined8 *)((ulong)(puVar9 + 1) & 0xfffffffffffffff8);
    for (uVar17 = (ulong)((uint)((int)(uVar18 * 8) + (int)lVar7) >> 3); uVar17 != 0;
        uVar17 = uVar17 - 1) {
      *puVar5 = *puVar4;
      puVar4 = puVar4 + (ulong)bVar19 * -2 + 1;
      puVar5 = puVar5 + (ulong)bVar19 * -2 + 1;
    }
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      return puVar9;
    }
  }
  else if (*(long *)(in_FS_OFFSET + 0x28) == *(long *)(in_FS_OFFSET + 0x28)) {
    puVar9 = (undefined8 *)
             BVHBuilderBinnedFastSpatialSAH::
             CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>
             ::operator()(param_1[0xd],param_1[8],param_2 + 10,in_stack_00000008,in_stack_00000018);
    return puVar9;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >&)
    */

void std::
     __make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (BuildRecordT *param_1,BuildRecordT *param_2,_Iter_comp_iter *param_3)

{
  long lVar1;
  long lVar2;
  long in_FS_OFFSET;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (0x70 < (long)param_2 - (long)param_1) {
    lVar2 = (((long)param_2 - (long)param_1 >> 4) * 0x6db6db6db6db6db7 + -2) / 2;
    while( true ) {
      __adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                ();
      if (lVar2 == 0) break;
      lVar2 = lVar2 + -1;
    }
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   long, 
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   long, 
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >)
    */

void std::
     __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (BuildRecordT *param_1,BuildRecordT *param_2,long param_3)

{
  BuildRecordT *pBVar1;
  BuildRecordT *pBVar2;
  BuildRecordT BVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined4 uVar17;
  undefined4 uVar18;
  undefined4 uVar19;
  undefined4 uVar20;
  undefined4 uVar21;
  undefined8 uVar22;
  long lVar23;
  BuildRecordT *pBVar24;
  BuildRecordT *pBVar25;
  ulong uVar26;
  ulong uVar27;
  BuildRecordT *pBVar28;
  long lVar29;
  ulong uVar30;
  long lVar31;
  long lVar32;
  BuildRecordT *pBVar33;
  long in_FS_OFFSET;
  undefined8 local_b8;
  BuildRecordT local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar23 = (long)param_2 - (long)param_1;
  if (0x700 < lVar23) {
    pBVar28 = param_1 + 0x70;
    pBVar33 = param_2;
    if (param_3 == 0) {
      __make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (param_1,param_2,(_Iter_comp_iter *)&local_b8);
    }
    else {
      do {
        uVar4 = *(undefined8 *)param_1;
        param_3 = param_3 + -1;
        BVar3 = param_1[8];
        uVar26 = *(long *)(param_1 + 200) - *(long *)(param_1 + 0xc0);
        uVar6 = *(undefined4 *)(param_1 + 0x10);
        uVar7 = *(undefined4 *)(param_1 + 0x14);
        uVar8 = *(undefined4 *)(param_1 + 0x18);
        uVar9 = *(undefined4 *)(param_1 + 0x1c);
        uVar10 = *(undefined4 *)(param_1 + 0x20);
        uVar11 = *(undefined4 *)(param_1 + 0x24);
        uVar12 = *(undefined4 *)(param_1 + 0x28);
        uVar13 = *(undefined4 *)(param_1 + 0x2c);
        uVar14 = *(undefined4 *)(param_1 + 0x30);
        uVar15 = *(undefined4 *)(param_1 + 0x34);
        uVar16 = *(undefined4 *)(param_1 + 0x38);
        uVar17 = *(undefined4 *)(param_1 + 0x3c);
        uVar18 = *(undefined4 *)(param_1 + 0x40);
        uVar19 = *(undefined4 *)(param_1 + 0x44);
        uVar20 = *(undefined4 *)(param_1 + 0x48);
        uVar21 = *(undefined4 *)(param_1 + 0x4c);
        lVar32 = *(long *)(param_1 + 0x50);
        lVar31 = *(long *)(param_1 + 0x58);
        uVar5 = *(undefined8 *)(param_1 + 0x60);
        uVar30 = *(long *)(pBVar33 + -0x18) - *(long *)(pBVar33 + -0x20);
        pBVar24 = param_1 + ((lVar23 >> 4) * 0x6db6db6db6db6db7 >> 1) * 0x70;
        uVar27 = *(long *)(pBVar24 + 0x58) - *(long *)(pBVar24 + 0x50);
        pBVar25 = pBVar33;
        param_2 = pBVar28;
        if (uVar27 < uVar26) {
          if (uVar30 < uVar27) {
            *(undefined8 *)param_1 = *(undefined8 *)pBVar24;
            param_1[8] = pBVar24[8];
            uVar22 = *(undefined8 *)(pBVar24 + 0x18);
            *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar24 + 0x10);
            *(undefined8 *)(param_1 + 0x18) = uVar22;
            uVar22 = *(undefined8 *)(pBVar24 + 0x28);
            *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar24 + 0x20);
            *(undefined8 *)(param_1 + 0x28) = uVar22;
            uVar22 = *(undefined8 *)(pBVar24 + 0x38);
            *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar24 + 0x30);
            *(undefined8 *)(param_1 + 0x38) = uVar22;
            uVar22 = *(undefined8 *)(pBVar24 + 0x48);
            *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar24 + 0x40);
            *(undefined8 *)(param_1 + 0x48) = uVar22;
LAB_0011966e:
            uVar22 = *(undefined8 *)(pBVar24 + 0x58);
            *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar24 + 0x50);
            *(undefined8 *)(param_1 + 0x58) = uVar22;
            *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(pBVar24 + 0x60);
            *(undefined8 *)pBVar24 = uVar4;
            pBVar24[8] = BVar3;
            *(long *)(pBVar24 + 0x50) = lVar32;
            *(long *)(pBVar24 + 0x58) = lVar31;
            *(undefined8 *)(pBVar24 + 0x60) = uVar5;
            *(undefined4 *)(pBVar24 + 0x10) = uVar6;
            *(undefined4 *)(pBVar24 + 0x14) = uVar7;
            *(undefined4 *)(pBVar24 + 0x18) = uVar8;
            *(undefined4 *)(pBVar24 + 0x1c) = uVar9;
            *(undefined4 *)(pBVar24 + 0x20) = uVar10;
            *(undefined4 *)(pBVar24 + 0x24) = uVar11;
            *(undefined4 *)(pBVar24 + 0x28) = uVar12;
            *(undefined4 *)(pBVar24 + 0x2c) = uVar13;
            *(undefined4 *)(pBVar24 + 0x30) = uVar14;
            *(undefined4 *)(pBVar24 + 0x34) = uVar15;
            *(undefined4 *)(pBVar24 + 0x38) = uVar16;
            *(undefined4 *)(pBVar24 + 0x3c) = uVar17;
            *(undefined4 *)(pBVar24 + 0x40) = uVar18;
            *(undefined4 *)(pBVar24 + 0x44) = uVar19;
            *(undefined4 *)(pBVar24 + 0x48) = uVar20;
            *(undefined4 *)(pBVar24 + 0x4c) = uVar21;
            lVar29 = *(long *)(param_1 + 200);
            lVar23 = *(long *)(param_1 + 0xc0);
            lVar31 = *(long *)(pBVar33 + -0x18);
            lVar32 = *(long *)(pBVar33 + -0x20);
          }
          else {
            if (uVar26 <= uVar30) {
              *(undefined8 *)param_1 = *(undefined8 *)(param_1 + 0x70);
              *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_1 + 0x80);
              *(undefined8 *)(param_1 + 0x18) = *(undefined8 *)(param_1 + 0x88);
              *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_1 + 0x90);
              *(undefined8 *)(param_1 + 0x28) = *(undefined8 *)(param_1 + 0x98);
              param_1[8] = param_1[0x78];
              *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_1 + 0xa0);
              *(undefined8 *)(param_1 + 0x38) = *(undefined8 *)(param_1 + 0xa8);
              *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_1 + 0xb0);
              *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_1 + 0xb8);
              *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(param_1 + 0xc0);
              *(undefined8 *)(param_1 + 0x58) = *(undefined8 *)(param_1 + 200);
              goto LAB_0011949e;
            }
LAB_001196be:
            *(undefined8 *)param_1 = *(undefined8 *)(pBVar33 + -0x70);
            param_1[8] = pBVar33[-0x68];
            uVar22 = *(undefined8 *)(pBVar33 + -0x58);
            *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar33 + -0x60);
            *(undefined8 *)(param_1 + 0x18) = uVar22;
            uVar22 = *(undefined8 *)(pBVar33 + -0x48);
            *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar33 + -0x50);
            *(undefined8 *)(param_1 + 0x28) = uVar22;
            uVar22 = *(undefined8 *)(pBVar33 + -0x38);
            *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar33 + -0x40);
            *(undefined8 *)(param_1 + 0x38) = uVar22;
            uVar22 = *(undefined8 *)(pBVar33 + -0x28);
            *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar33 + -0x30);
            *(undefined8 *)(param_1 + 0x48) = uVar22;
            uVar22 = *(undefined8 *)(pBVar33 + -0x18);
            *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar33 + -0x20);
            *(undefined8 *)(param_1 + 0x58) = uVar22;
            *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(pBVar33 + -0x10);
            *(undefined8 *)(pBVar33 + -0x10) = uVar5;
            *(undefined8 *)(pBVar33 + -0x70) = uVar4;
            pBVar33[-0x68] = BVar3;
            *(long *)(pBVar33 + -0x20) = lVar32;
            *(long *)(pBVar33 + -0x18) = lVar31;
            *(undefined4 *)(pBVar33 + -0x60) = uVar6;
            *(undefined4 *)(pBVar33 + -0x5c) = uVar7;
            *(undefined4 *)(pBVar33 + -0x58) = uVar8;
            *(undefined4 *)(pBVar33 + -0x54) = uVar9;
            *(undefined4 *)(pBVar33 + -0x50) = uVar10;
            *(undefined4 *)(pBVar33 + -0x4c) = uVar11;
            *(undefined4 *)(pBVar33 + -0x48) = uVar12;
            *(undefined4 *)(pBVar33 + -0x44) = uVar13;
            *(undefined4 *)(pBVar33 + -0x40) = uVar14;
            *(undefined4 *)(pBVar33 + -0x3c) = uVar15;
            *(undefined4 *)(pBVar33 + -0x38) = uVar16;
            *(undefined4 *)(pBVar33 + -0x34) = uVar17;
            *(undefined4 *)(pBVar33 + -0x30) = uVar18;
            *(undefined4 *)(pBVar33 + -0x2c) = uVar19;
            *(undefined4 *)(pBVar33 + -0x28) = uVar20;
            *(undefined4 *)(pBVar33 + -0x24) = uVar21;
            lVar23 = *(long *)(param_1 + 0xc0);
            lVar29 = *(long *)(param_1 + 200);
          }
        }
        else {
          if (uVar26 <= uVar30) {
            if (uVar30 < uVar27) goto LAB_001196be;
            *(undefined8 *)param_1 = *(undefined8 *)pBVar24;
            param_1[8] = pBVar24[8];
            uVar22 = *(undefined8 *)(pBVar24 + 0x18);
            *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar24 + 0x10);
            *(undefined8 *)(param_1 + 0x18) = uVar22;
            uVar22 = *(undefined8 *)(pBVar24 + 0x28);
            *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar24 + 0x20);
            *(undefined8 *)(param_1 + 0x28) = uVar22;
            uVar22 = *(undefined8 *)(pBVar24 + 0x38);
            *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar24 + 0x30);
            *(undefined8 *)(param_1 + 0x38) = uVar22;
            uVar22 = *(undefined8 *)(pBVar24 + 0x48);
            *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar24 + 0x40);
            *(undefined8 *)(param_1 + 0x48) = uVar22;
            goto LAB_0011966e;
          }
          *(undefined8 *)param_1 = *(undefined8 *)(param_1 + 0x70);
          *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_1 + 0x80);
          *(undefined8 *)(param_1 + 0x18) = *(undefined8 *)(param_1 + 0x88);
          *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_1 + 0x90);
          *(undefined8 *)(param_1 + 0x28) = *(undefined8 *)(param_1 + 0x98);
          param_1[8] = param_1[0x78];
          *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_1 + 0xa0);
          *(undefined8 *)(param_1 + 0x38) = *(undefined8 *)(param_1 + 0xa8);
          *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_1 + 0xb0);
          *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_1 + 0xb8);
          *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(param_1 + 0xc0);
          *(undefined8 *)(param_1 + 0x58) = *(undefined8 *)(param_1 + 200);
LAB_0011949e:
          *(undefined8 *)(param_1 + 0x70) = uVar4;
          param_1[0x78] = BVar3;
          *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(param_1 + 0xd0);
          *(long *)(param_1 + 0xc0) = lVar32;
          *(long *)(param_1 + 200) = lVar31;
          *(undefined8 *)(param_1 + 0xd0) = uVar5;
          *(undefined4 *)(param_1 + 0x80) = uVar6;
          *(undefined4 *)(param_1 + 0x84) = uVar7;
          *(undefined4 *)(param_1 + 0x88) = uVar8;
          *(undefined4 *)(param_1 + 0x8c) = uVar9;
          *(undefined4 *)(param_1 + 0x90) = uVar10;
          *(undefined4 *)(param_1 + 0x94) = uVar11;
          *(undefined4 *)(param_1 + 0x98) = uVar12;
          *(undefined4 *)(param_1 + 0x9c) = uVar13;
          *(undefined4 *)(param_1 + 0xa0) = uVar14;
          *(undefined4 *)(param_1 + 0xa4) = uVar15;
          *(undefined4 *)(param_1 + 0xa8) = uVar16;
          *(undefined4 *)(param_1 + 0xac) = uVar17;
          *(undefined4 *)(param_1 + 0xb0) = uVar18;
          *(undefined4 *)(param_1 + 0xb4) = uVar19;
          *(undefined4 *)(param_1 + 0xb8) = uVar20;
          *(undefined4 *)(param_1 + 0xbc) = uVar21;
          lVar23 = lVar32;
          lVar29 = lVar31;
          lVar31 = *(long *)(pBVar33 + -0x18);
          lVar32 = *(long *)(pBVar33 + -0x20);
        }
        while( true ) {
          uVar26 = lVar29 - lVar23;
          while ((ulong)(*(long *)(param_1 + 0x58) - *(long *)(param_1 + 0x50)) < uVar26) {
            lVar29 = *(long *)(param_2 + 200);
            lVar23 = *(long *)(param_2 + 0xc0);
            param_2 = param_2 + 0x70;
            uVar26 = lVar29 - lVar23;
          }
          uVar26 = lVar31 - lVar32;
          pBVar24 = pBVar25;
          while (pBVar25 = pBVar24 + -0x70,
                uVar26 < (ulong)(*(long *)(param_1 + 0x58) - *(long *)(param_1 + 0x50))) {
            uVar26 = *(long *)(pBVar24 + -0x88) - *(long *)(pBVar24 + -0x90);
            pBVar24 = pBVar25;
          }
          if (pBVar25 <= param_2) break;
          uVar4 = *(undefined8 *)param_2;
          BVar3 = param_2[8];
          uVar6 = *(undefined4 *)(param_2 + 0x10);
          uVar7 = *(undefined4 *)(param_2 + 0x14);
          uVar8 = *(undefined4 *)(param_2 + 0x18);
          uVar9 = *(undefined4 *)(param_2 + 0x1c);
          uVar10 = *(undefined4 *)(param_2 + 0x20);
          uVar11 = *(undefined4 *)(param_2 + 0x24);
          uVar12 = *(undefined4 *)(param_2 + 0x28);
          uVar13 = *(undefined4 *)(param_2 + 0x2c);
          uVar14 = *(undefined4 *)(param_2 + 0x30);
          uVar15 = *(undefined4 *)(param_2 + 0x34);
          uVar16 = *(undefined4 *)(param_2 + 0x38);
          uVar17 = *(undefined4 *)(param_2 + 0x3c);
          *(undefined8 *)param_2 = *(undefined8 *)pBVar25;
          uVar18 = *(undefined4 *)(param_2 + 0x40);
          uVar19 = *(undefined4 *)(param_2 + 0x44);
          uVar20 = *(undefined4 *)(param_2 + 0x48);
          uVar21 = *(undefined4 *)(param_2 + 0x4c);
          uVar5 = *(undefined8 *)(param_2 + 0x60);
          param_2[8] = pBVar24[-0x68];
          uVar22 = *(undefined8 *)(pBVar24 + -0x58);
          *(undefined8 *)(param_2 + 0x10) = *(undefined8 *)(pBVar24 + -0x60);
          *(undefined8 *)(param_2 + 0x18) = uVar22;
          uVar22 = *(undefined8 *)(pBVar24 + -0x48);
          *(undefined8 *)(param_2 + 0x20) = *(undefined8 *)(pBVar24 + -0x50);
          *(undefined8 *)(param_2 + 0x28) = uVar22;
          uVar22 = *(undefined8 *)(pBVar24 + -0x38);
          *(undefined8 *)(param_2 + 0x30) = *(undefined8 *)(pBVar24 + -0x40);
          *(undefined8 *)(param_2 + 0x38) = uVar22;
          uVar22 = *(undefined8 *)(pBVar24 + -0x28);
          *(undefined8 *)(param_2 + 0x40) = *(undefined8 *)(pBVar24 + -0x30);
          *(undefined8 *)(param_2 + 0x48) = uVar22;
          uVar22 = *(undefined8 *)(pBVar24 + -0x18);
          *(undefined8 *)(param_2 + 0x50) = *(undefined8 *)(pBVar24 + -0x20);
          *(undefined8 *)(param_2 + 0x58) = uVar22;
          *(undefined8 *)(param_2 + 0x60) = *(undefined8 *)(pBVar24 + -0x10);
          *(long *)(pBVar24 + -0x20) = lVar23;
          *(long *)(pBVar24 + -0x18) = lVar29;
          *(undefined8 *)pBVar25 = uVar4;
          pBVar24[-0x68] = BVar3;
          *(undefined8 *)(pBVar24 + -0x10) = uVar5;
          *(undefined4 *)(pBVar24 + -0x60) = uVar6;
          *(undefined4 *)(pBVar24 + -0x5c) = uVar7;
          *(undefined4 *)(pBVar24 + -0x58) = uVar8;
          *(undefined4 *)(pBVar24 + -0x54) = uVar9;
          *(undefined4 *)(pBVar24 + -0x50) = uVar10;
          *(undefined4 *)(pBVar24 + -0x4c) = uVar11;
          *(undefined4 *)(pBVar24 + -0x48) = uVar12;
          *(undefined4 *)(pBVar24 + -0x44) = uVar13;
          *(undefined4 *)(pBVar24 + -0x40) = uVar14;
          *(undefined4 *)(pBVar24 + -0x3c) = uVar15;
          *(undefined4 *)(pBVar24 + -0x38) = uVar16;
          *(undefined4 *)(pBVar24 + -0x34) = uVar17;
          *(undefined4 *)(pBVar24 + -0x30) = uVar18;
          *(undefined4 *)(pBVar24 + -0x2c) = uVar19;
          *(undefined4 *)(pBVar24 + -0x28) = uVar20;
          *(undefined4 *)(pBVar24 + -0x24) = uVar21;
          pBVar1 = param_2 + 200;
          pBVar2 = param_2 + 0xc0;
          param_2 = param_2 + 0x70;
          lVar23 = *(long *)pBVar2;
          lVar29 = *(long *)pBVar1;
          lVar31 = *(long *)(pBVar24 + -0x88);
          lVar32 = *(long *)(pBVar24 + -0x90);
        }
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (param_2,pBVar33,param_3);
        lVar23 = (long)param_2 - (long)param_1;
        if (lVar23 < 0x701) goto LAB_00119832;
        pBVar33 = param_2;
      } while (param_3 != 0);
      __make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (param_1,param_2,(_Iter_comp_iter *)&local_b8);
    }
    do {
      local_b8 = *(undefined8 *)(param_2 + -0x70);
      pBVar28 = param_2 + -0x70;
      local_b0 = param_2[-0x68];
      local_a8 = *(undefined4 *)(param_2 + -0x60);
      uStack_a4 = *(undefined4 *)(param_2 + -0x5c);
      uStack_a0 = *(undefined4 *)(param_2 + -0x58);
      uStack_9c = *(undefined4 *)(param_2 + -0x54);
      local_98 = *(undefined4 *)(param_2 + -0x50);
      uStack_94 = *(undefined4 *)(param_2 + -0x4c);
      uStack_90 = *(undefined4 *)(param_2 + -0x48);
      uStack_8c = *(undefined4 *)(param_2 + -0x44);
      local_88 = *(undefined4 *)(param_2 + -0x40);
      uStack_84 = *(undefined4 *)(param_2 + -0x3c);
      uStack_80 = *(undefined4 *)(param_2 + -0x38);
      uStack_7c = *(undefined4 *)(param_2 + -0x34);
      *(undefined8 *)pBVar28 = *(undefined8 *)param_1;
      local_78 = *(undefined4 *)(param_2 + -0x30);
      uStack_74 = *(undefined4 *)(param_2 + -0x2c);
      uStack_70 = *(undefined4 *)(param_2 + -0x28);
      uStack_6c = *(undefined4 *)(param_2 + -0x24);
      local_68 = *(undefined8 *)(param_2 + -0x20);
      local_60 = *(undefined8 *)(param_2 + -0x18);
      param_2[-0x68] = param_1[8];
      uVar4 = *(undefined8 *)(param_1 + 0x18);
      local_58 = *(undefined8 *)(param_2 + -0x10);
      *(undefined8 *)(param_2 + -0x60) = *(undefined8 *)(param_1 + 0x10);
      *(undefined8 *)(param_2 + -0x58) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x28);
      *(undefined8 *)(param_2 + -0x50) = *(undefined8 *)(param_1 + 0x20);
      *(undefined8 *)(param_2 + -0x48) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(param_2 + -0x40) = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(param_2 + -0x38) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x48);
      *(undefined8 *)(param_2 + -0x30) = *(undefined8 *)(param_1 + 0x40);
      *(undefined8 *)(param_2 + -0x28) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x58);
      *(undefined8 *)(param_2 + -0x20) = *(undefined8 *)(param_1 + 0x50);
      *(undefined8 *)(param_2 + -0x18) = uVar4;
      *(undefined8 *)(param_2 + -0x10) = *(undefined8 *)(param_1 + 0x60);
      __adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (param_1,0,((long)pBVar28 - (long)param_1 >> 4) * 0x6db6db6db6db6db7,&local_b8);
      param_2 = pBVar28;
    } while (0x70 < (long)pBVar28 - (long)param_1);
  }
LAB_00119832:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x00119ccd) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar18 = pTVar15 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar16 = pTVar16 + 0x40;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar4 = pTVar15 + uVar3 + 0x40090;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar4 = &PTR_execute_0012f6e8;
      uVar6 = *(undefined8 *)(param_1 + 0x20);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x28) = uVar6;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      lVar17 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar17 + 0x50) = pTVar4;
      *(long *)(pTVar15 + lVar17 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar15 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar17 + 0x68) = lVar5;
      *(ulong *)(pTVar15 + lVar17 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar15 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)param_4;
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_00119f63:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0012f6e8;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00119f63;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_s...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_s___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  ulong uVar1;
  ulong uVar2;
  
  uVar1 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < *(long *)(this + 8) - uVar1) {
    uVar2 = *(long *)(this + 8) + uVar1 >> 1;
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar1,uVar2,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar2,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    embree::TaskScheduler::wait();
    return;
  }
  parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#3}>
  ::
  partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&)
  ::{lambda(unsigned_long)#1}::operator()(*(_lambda_unsigned_long__1_ **)(this + 0x20),uVar1);
  return;
}



/* WARNING: Removing unreachable block (ram,0x0011a40d) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar18 = pTVar15 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar16 = pTVar16 + 0x40;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar4 = pTVar15 + uVar3 + 0x40090;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar4 = &PTR_execute_0012f700;
      uVar6 = *(undefined8 *)(param_1 + 0x20);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x28) = uVar6;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      lVar17 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar17 + 0x50) = pTVar4;
      *(long *)(pTVar15 + lVar17 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar15 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar17 + 0x68) = lVar5;
      *(ulong *)(pTVar15 + lVar17 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar15 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)param_4;
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_0011a6a3:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0012f700;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0011a6a3;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_s...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_s___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  ulong uVar1;
  ulong uVar2;
  
  uVar1 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < *(long *)(this + 8) - uVar1) {
    uVar2 = *(long *)(this + 8) + uVar1 >> 1;
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar1,uVar2,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar2,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    embree::TaskScheduler::wait();
    return;
  }
  parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#3}>
  ::
  partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&)
  ::{lambda(unsigned_long)#2}::operator()(*(_lambda_unsigned_long__2_ **)(this + 0x20),uVar1);
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* unsigned long embree::parallel_partitioning<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3}>(embree::PrimRef*, unsigned long,
   unsigned long, embree::EmptyTy const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&, unsigned long) */

ulong embree::
      parallel_partitioning<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                (PrimRef *param_1,ulong param_2,ulong param_3,EmptyTy *param_4,PrimInfoT *param_5,
                PrimInfoT *param_6,_lambda_embree__PrimRef_const___1_ *param_7,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimRef_const___2_
                *param_8,_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                         *param_9,ulong param_10)

{
  float *pfVar1;
  int *piVar2;
  uint *puVar3;
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  bool bVar13;
  bool bVar14;
  float fVar15;
  float fVar16;
  uint uVar17;
  uint uVar18;
  uint uVar19;
  uint uVar20;
  undefined8 ****ppppuVar21;
  undefined8 ***pppuVar22;
  ulong uVar23;
  undefined1 (*pauVar24) [16];
  undefined8 ****ppppuVar25;
  PrimRef *pPVar26;
  PrimRef *pPVar27;
  int iVar28;
  PrimRef *pPVar29;
  undefined8 ****ppppuVar30;
  undefined8 ****ppppuVar31;
  undefined8 ****ppppuVar32;
  PrimInfoT *pPVar33;
  long lVar34;
  long lVar35;
  long lVar36;
  long lVar37;
  undefined8 ***pppuVar38;
  long in_FS_OFFSET;
  uint uVar39;
  uint uVar43;
  uint uVar44;
  undefined1 auVar40 [16];
  uint uVar45;
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  uint uVar46;
  int iVar47;
  uint uVar50;
  int iVar51;
  uint uVar52;
  int iVar53;
  uint uVar54;
  int iVar55;
  undefined1 auVar48 [16];
  undefined1 auVar49 [16];
  float fVar56;
  uint uVar57;
  float fVar58;
  uint uVar59;
  float fVar60;
  uint uVar61;
  float fVar62;
  uint uVar63;
  float fVar64;
  float fVar65;
  float fVar66;
  float fVar67;
  float fVar68;
  float fVar69;
  float fVar70;
  float fVar71;
  long local_98;
  long local_90;
  undefined8 **local_88;
  long local_80;
  undefined8 ***local_78;
  undefined8 ***pppuStack_70;
  undefined8 ***local_68;
  undefined8 ***pppuStack_60;
  long *local_58;
  long *local_50;
  long local_40;
  
  uVar20 = _UNK_0012fbec;
  uVar19 = _UNK_0012fbe8;
  uVar18 = _UNK_0012fbe4;
  uVar17 = __LC24;
  fVar16 = _LC22;
  fVar15 = _LC12;
  pppuVar38 = (undefined8 ***)(param_3 - param_2);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pPVar29 = param_1 + param_2 * 0x20;
  if (pppuVar38 < param_10) {
    pPVar26 = param_1 + param_3 * 0x20 + -0x20;
    pPVar33 = param_5;
    for (; pPVar29 <= pPVar26; pPVar29 = pPVar29 + 0x20) {
      auVar40 = *(undefined1 (*) [16])pPVar29;
      pfVar1 = *(float **)param_7;
      auVar41 = *(undefined1 (*) [16])(pPVar29 + 0x10);
      fVar64 = *pfVar1;
      fVar65 = pfVar1[1];
      fVar66 = pfVar1[2];
      fVar67 = pfVar1[3];
      fVar56 = pfVar1[4];
      fVar58 = pfVar1[5];
      fVar60 = pfVar1[6];
      fVar62 = pfVar1[7];
      piVar2 = *(int **)(param_7 + 8);
      fVar68 = auVar41._0_4_ + auVar40._0_4_;
      fVar69 = auVar41._4_4_ + auVar40._4_4_;
      fVar70 = auVar41._8_4_ + auVar40._8_4_;
      fVar71 = auVar41._12_4_ + auVar40._12_4_;
      uVar39 = (uint)((fVar68 * fVar16 - fVar64) * fVar56 + fVar15);
      uVar43 = (uint)((fVar69 * fVar16 - fVar65) * fVar58 + fVar15);
      uVar44 = (uint)((fVar70 * fVar16 - fVar66) * fVar60 + fVar15);
      uVar45 = (uint)((fVar71 * fVar16 - fVar67) * fVar62 + fVar15);
      uVar46 = -(uint)((int)uVar39 < (int)uVar17);
      uVar50 = -(uint)((int)uVar43 < (int)uVar18);
      uVar52 = -(uint)((int)uVar44 < (int)uVar19);
      uVar54 = -(uint)((int)uVar45 < (int)uVar20);
      iVar47 = *piVar2;
      iVar51 = piVar2[1];
      iVar53 = piVar2[2];
      iVar55 = piVar2[3];
      puVar3 = *(uint **)(param_7 + 0x10);
      uVar46 = uVar39 & uVar46 | ~uVar46 & uVar17;
      uVar50 = uVar43 & uVar50 | ~uVar50 & uVar18;
      uVar52 = uVar44 & uVar52 | ~uVar52 & uVar19;
      uVar54 = uVar45 & uVar54 | ~uVar54 & uVar20;
      uVar39 = *puVar3;
      uVar43 = puVar3[1];
      uVar44 = puVar3[2];
      uVar45 = puVar3[3];
      auVar49._0_4_ = -(uint)((int)(~-(uint)((int)uVar46 < 0) & uVar46) < iVar47) & uVar39;
      auVar49._4_4_ = -(uint)((int)(~-(uint)((int)uVar50 < 0) & uVar50) < iVar51) & uVar43;
      auVar49._8_4_ = -(uint)((int)(~-(uint)((int)uVar52 < 0) & uVar52) < iVar53) & uVar44;
      auVar49._12_4_ = -(uint)((int)(~-(uint)((int)uVar54 < 0) & uVar54) < iVar55) & uVar45;
      iVar28 = movmskps((int)puVar3,auVar49);
      pPVar27 = pPVar26;
      if (iVar28 == 0) {
        while( true ) {
          auVar40 = *(undefined1 (*) [16])(pPVar27 + 0x10);
          auVar41 = *(undefined1 (*) [16])pPVar27;
          pPVar26 = pPVar27 + -0x20;
          fVar68 = auVar40._0_4_ + auVar41._0_4_;
          fVar69 = auVar40._4_4_ + auVar41._4_4_;
          fVar70 = auVar40._8_4_ + auVar41._8_4_;
          fVar71 = auVar40._12_4_ + auVar41._12_4_;
          uVar46 = (uint)((fVar68 * fVar16 - fVar64) * fVar56 + fVar15);
          uVar50 = (uint)((fVar69 * fVar16 - fVar65) * fVar58 + fVar15);
          uVar52 = (uint)((fVar70 * fVar16 - fVar66) * fVar60 + fVar15);
          uVar54 = (uint)((fVar71 * fVar16 - fVar67) * fVar62 + fVar15);
          uVar57 = -(uint)((int)uVar46 < (int)uVar17);
          uVar59 = -(uint)((int)uVar50 < (int)uVar18);
          uVar61 = -(uint)((int)uVar52 < (int)uVar19);
          uVar63 = -(uint)((int)uVar54 < (int)uVar20);
          uVar46 = uVar46 & uVar57 | ~uVar57 & uVar17;
          uVar50 = uVar50 & uVar59 | ~uVar59 & uVar18;
          uVar52 = uVar52 & uVar61 | ~uVar61 & uVar19;
          uVar54 = uVar54 & uVar63 | ~uVar63 & uVar20;
          auVar48._0_4_ = -(uint)((int)(~-(uint)((int)uVar46 < 0) & uVar46) < iVar47) & uVar39;
          auVar48._4_4_ = -(uint)((int)(~-(uint)((int)uVar50 < 0) & uVar50) < iVar51) & uVar43;
          auVar48._8_4_ = -(uint)((int)(~-(uint)((int)uVar52 < 0) & uVar52) < iVar53) & uVar44;
          auVar48._12_4_ = -(uint)((int)(~-(uint)((int)uVar54 < 0) & uVar54) < iVar55) & uVar45;
          uVar39 = movmskps((int)pPVar33,auVar48);
          pPVar33 = (PrimInfoT *)(ulong)uVar39;
          if (uVar39 != 0) break;
          *(ulong *)(param_6 + 0x48) =
               *(long *)(param_6 + 0x48) + (ulong)(*(uint *)(pPVar27 + 0xc) >> 0x1b);
          auVar41 = minps(*(undefined1 (*) [16])param_6,auVar41);
          *(undefined1 (*) [16])param_6 = auVar41;
          auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar40);
          *(undefined1 (*) [16])(param_6 + 0x10) = auVar40;
          auVar6._4_4_ = fVar69;
          auVar6._0_4_ = fVar68;
          auVar6._8_4_ = fVar70;
          auVar6._12_4_ = fVar71;
          auVar40 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar6);
          *(undefined1 (*) [16])(param_6 + 0x20) = auVar40;
          auVar7._4_4_ = fVar69;
          auVar7._0_4_ = fVar68;
          auVar7._8_4_ = fVar70;
          auVar7._12_4_ = fVar71;
          auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar7);
          *(undefined1 (*) [16])(param_6 + 0x30) = auVar40;
          if (pPVar26 < pPVar29) goto LAB_0011acda;
          pfVar1 = *(float **)param_7;
          fVar64 = *pfVar1;
          fVar65 = pfVar1[1];
          fVar66 = pfVar1[2];
          fVar67 = pfVar1[3];
          fVar56 = pfVar1[4];
          fVar58 = pfVar1[5];
          fVar60 = pfVar1[6];
          fVar62 = pfVar1[7];
          piVar2 = *(int **)(param_7 + 8);
          iVar47 = *piVar2;
          iVar51 = piVar2[1];
          iVar53 = piVar2[2];
          iVar55 = piVar2[3];
          puVar3 = *(uint **)(param_7 + 0x10);
          uVar39 = *puVar3;
          uVar43 = puVar3[1];
          uVar44 = puVar3[2];
          uVar45 = puVar3[3];
          pPVar27 = pPVar26;
        }
        *(ulong *)(param_5 + 0x48) =
             *(long *)(param_5 + 0x48) + (ulong)(*(uint *)(pPVar27 + 0xc) >> 0x1b);
        auVar41 = minps(*(undefined1 (*) [16])param_5,auVar41);
        *(undefined1 (*) [16])param_5 = auVar41;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar40);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar40;
        auVar40._4_4_ = fVar69;
        auVar40._0_4_ = fVar68;
        auVar40._8_4_ = fVar70;
        auVar40._12_4_ = fVar71;
        auVar40 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar40);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar40;
        auVar41._4_4_ = fVar69;
        auVar41._0_4_ = fVar68;
        auVar41._8_4_ = fVar70;
        auVar41._12_4_ = fVar71;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar41);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar40;
        auVar40 = *(undefined1 (*) [16])pPVar29;
        auVar41 = *(undefined1 (*) [16])(pPVar29 + 0x10);
        auVar49 = minps(*(undefined1 (*) [16])param_6,auVar40);
        *(ulong *)(param_6 + 0x48) =
             *(long *)(param_6 + 0x48) + (ulong)(*(uint *)(pPVar29 + 0xc) >> 0x1b);
        *(undefined1 (*) [16])param_6 = auVar49;
        auVar49 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar41);
        auVar42._0_4_ = auVar41._0_4_ + auVar40._0_4_;
        auVar42._4_4_ = auVar41._4_4_ + auVar40._4_4_;
        auVar42._8_4_ = auVar41._8_4_ + auVar40._8_4_;
        auVar42._12_4_ = auVar41._12_4_ + auVar40._12_4_;
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar49;
        auVar40 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar42);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar42);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar40;
        uVar8 = *(undefined8 *)(pPVar27 + 8);
        uVar9 = *(undefined8 *)pPVar29;
        uVar10 = *(undefined8 *)(pPVar29 + 8);
        uVar11 = *(undefined8 *)(pPVar29 + 0x10);
        uVar12 = *(undefined8 *)(pPVar29 + 0x18);
        *(undefined8 *)pPVar29 = *(undefined8 *)pPVar27;
        *(undefined8 *)(pPVar29 + 8) = uVar8;
        uVar8 = *(undefined8 *)(pPVar27 + 0x18);
        *(undefined8 *)(pPVar29 + 0x10) = *(undefined8 *)(pPVar27 + 0x10);
        *(undefined8 *)(pPVar29 + 0x18) = uVar8;
        *(undefined8 *)pPVar27 = uVar9;
        *(undefined8 *)(pPVar27 + 8) = uVar10;
        *(undefined8 *)(pPVar27 + 0x10) = uVar11;
        *(undefined8 *)(pPVar27 + 0x18) = uVar12;
      }
      else {
        auVar40 = minps(*(undefined1 (*) [16])param_5,auVar40);
        *(ulong *)(param_5 + 0x48) =
             *(long *)(param_5 + 0x48) + (ulong)(*(uint *)(pPVar29 + 0xc) >> 0x1b);
        *(undefined1 (*) [16])param_5 = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar41);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar40;
        auVar4._4_4_ = fVar69;
        auVar4._0_4_ = fVar68;
        auVar4._8_4_ = fVar70;
        auVar4._12_4_ = fVar71;
        auVar40 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar4);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar40;
        auVar5._4_4_ = fVar69;
        auVar5._0_4_ = fVar68;
        auVar5._8_4_ = fVar70;
        auVar5._12_4_ = fVar71;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar5);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar40;
      }
    }
LAB_0011acda:
    uVar23 = (long)pPVar29 - (long)param_1 >> 5;
    goto LAB_0011a8a5;
  }
  ppppuVar21 = (undefined8 ****)embree::alignedMalloc(0x34c0,0x40);
  ppppuVar21[1] = pppuVar38;
  *ppppuVar21 = (undefined8 ***)pPVar29;
  ppppuVar21[2] = (undefined8 ***)param_7;
  ppppuVar21[3] = (undefined8 ***)param_8;
  ppppuVar21[4] = (undefined8 ***)param_9;
  ppppuVar21[5] = (undefined8 ***)param_4;
  pppuVar22 = (undefined8 ***)embree::TaskScheduler::threadCount();
  pppuVar38 = (undefined8 ***)(((long)pppuVar38 + (param_10 - 1)) / param_10);
  if ((undefined8 ***)0x40 < pppuVar38) {
    pppuVar38 = (undefined8 ***)0x40;
  }
  if (pppuVar38 <= pppuVar22) {
    pppuVar22 = pppuVar38;
  }
  ppppuVar21[6] = pppuVar22;
  local_68 = ppppuVar21;
  if (pppuVar22 == (undefined8 ***)0x0) {
    ppppuVar21[0x50] = (undefined8 ***)0x0;
    ppppuVar21[8] = ppppuVar21[1];
LAB_0011a886:
    ppppuVar30 = (undefined8 ****)ppppuVar21[0x50];
  }
  else {
    local_80 = 0;
    local_78 = &local_68;
    TaskScheduler::
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (0,(ulong)pppuVar22,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_78,
               (TaskGroupContext *)&local_80);
    embree::TaskScheduler::wait();
    if (local_80 != 0) goto LAB_0011abaf;
    pppuVar38 = ppppuVar21[6];
    pppuVar22 = ppppuVar21[1];
    ppppuVar21[(long)(pppuVar38 + 10)] = (undefined8 ***)0x0;
    ppppuVar21[(long)(pppuVar38 + 1)] = pppuVar22;
    if (pppuVar38 == (undefined8 ***)0x0) goto LAB_0011a886;
    pppuVar38 = (undefined8 ***)0x0;
    pauVar24 = (undefined1 (*) [16])(ppppuVar21 + 0x198);
    do {
      auVar40 = minps(*(undefined1 (*) [16])param_5,*pauVar24);
      pppuVar38 = (undefined8 ***)((long)pppuVar38 + 1);
      *(undefined1 (*) [16])param_5 = auVar40;
      auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),pauVar24[1]);
      *(undefined1 (*) [16])(param_5 + 0x10) = auVar40;
      auVar40 = minps(*(undefined1 (*) [16])(param_5 + 0x20),pauVar24[2]);
      *(undefined1 (*) [16])(param_5 + 0x20) = auVar40;
      auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),pauVar24[3]);
      *(undefined1 (*) [16])(param_5 + 0x30) = auVar40;
      *(long *)(param_5 + 0x40) = *(long *)(param_5 + 0x40) + *(long *)pauVar24[4];
      *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + *(long *)(pauVar24[4] + 8);
      auVar40 = minps(*(undefined1 (*) [16])param_6,pauVar24[0x140]);
      *(undefined1 (*) [16])param_6 = auVar40;
      auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),pauVar24[0x141]);
      *(undefined1 (*) [16])(param_6 + 0x10) = auVar40;
      auVar40 = minps(*(undefined1 (*) [16])(param_6 + 0x20),pauVar24[0x142]);
      *(undefined1 (*) [16])(param_6 + 0x20) = auVar40;
      auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),pauVar24[0x143]);
      *(undefined1 (*) [16])(param_6 + 0x30) = auVar40;
      *(long *)(param_6 + 0x40) = *(long *)(param_6 + 0x40) + *(long *)pauVar24[0x144];
      *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + *(long *)(pauVar24[0x144] + 8);
      pppuVar22 = ppppuVar21[6];
      pauVar24 = pauVar24 + 5;
    } while (pppuVar38 < pppuVar22);
    ppppuVar30 = (undefined8 ****)ppppuVar21[0x50];
    ppppuVar31 = ppppuVar30;
    if (pppuVar22 < (undefined8 ***)0x2) {
      ppppuVar25 = (undefined8 ****)ppppuVar21[1];
      local_98 = 0;
      local_90 = 0;
      local_88 = (undefined8 ***)0x0;
      if (pppuVar22 == (undefined8 ***)0x0) goto LAB_0011a890;
    }
    else {
      ppppuVar25 = ppppuVar21 + 0x51;
      do {
        ppppuVar31 = (undefined8 ****)((long)ppppuVar31 + (long)*ppppuVar25);
        ppppuVar25 = ppppuVar25 + 1;
      } while (ppppuVar21 + (long)(pppuVar22 + 10) != ppppuVar25);
      ppppuVar25 = (undefined8 ****)ppppuVar21[1];
    }
    local_88 = (undefined8 ***)0x0;
    local_90 = 0;
    local_98 = 0;
    bVar14 = false;
    bVar13 = false;
    pppuVar38 = (undefined8 ***)0x0;
    ppppuVar32 = ppppuVar21 + 8;
    lVar34 = 0;
    lVar36 = 0;
    while( true ) {
      local_68 = *ppppuVar32;
      pppuStack_60 = (undefined8 ***)((long)ppppuVar30 + (long)local_68);
      pppuStack_70 = ppppuVar32[1];
      if ((long)ppppuVar31 <= (long)ppppuVar32[1]) {
        pppuStack_70 = ppppuVar31;
      }
      local_78 = (undefined8 ****)0x0;
      if (-1 < (long)pppuStack_60) {
        local_78 = pppuStack_60;
      }
      if ((long)ppppuVar25 <= (long)pppuStack_60) {
        pppuStack_60 = ppppuVar25;
      }
      if ((long)local_68 < (long)ppppuVar31) {
        local_68 = ppppuVar31;
      }
      lVar35 = lVar34;
      if ((long)local_78 < (long)pppuStack_70) {
        bVar14 = true;
        pppuVar38 = (undefined8 ***)((long)pppuStack_70 + ((long)pppuVar38 - (long)local_78));
        lVar35 = lVar34 + 1;
        ppppuVar21[lVar34 * 2 + 0x98] = local_78;
        (ppppuVar21 + lVar34 * 2 + 0x98)[1] = pppuStack_70;
      }
      lVar37 = lVar36;
      if ((long)local_68 < (long)pppuStack_60) {
        lVar37 = lVar36 + 1;
        bVar13 = true;
        ppppuVar21[lVar36 * 2 + 0x118] = local_68;
        (ppppuVar21 + lVar36 * 2 + 0x118)[1] = pppuStack_60;
      }
      if (ppppuVar21 + 8 + (long)pppuVar22 == ppppuVar32 + 1) break;
      ppppuVar30 = (undefined8 ****)ppppuVar32[0x49];
      ppppuVar32 = ppppuVar32 + 1;
      lVar34 = lVar35;
      lVar36 = lVar37;
    }
    if (bVar13) {
      local_90 = lVar37;
    }
    ppppuVar30 = ppppuVar31;
    if ((bVar14) && (local_98 = lVar35, local_88 = pppuVar38, pppuVar38 != (undefined8 ***)0x0)) {
      local_68 = &local_88;
      local_58 = &local_98;
      local_50 = &local_90;
      local_80 = 0;
      local_78 = &local_68;
      pppuStack_60 = ppppuVar21;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,(ulong)pppuVar22,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_78,
                 (TaskGroupContext *)&local_80);
      embree::TaskScheduler::wait();
      if (local_80 != 0) {
LAB_0011abaf:
        local_78 = (undefined8 ***)local_80;
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception((_lambda_embree__range<unsigned_long>_const___1_ *)&local_78);
      }
    }
  }
LAB_0011a890:
  if (ppppuVar21 != (undefined8 ****)0x0) {
    embree::alignedFree(ppppuVar21);
  }
  uVar23 = param_2 + (long)ppppuVar30;
LAB_0011a8a5:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar23;
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&) [clone .isra.0] */

undefined8 __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_spatial_split
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,SpatialBinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  ulong uVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  long in_FS_OFFSET;
  EmptyTy local_11b;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimRef_const___2_ local_11a;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
  local_119;
  SpatialBinSplit *local_118;
  undefined4 *local_110;
  undefined8 *local_108;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined4 local_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined8 local_48;
  undefined8 uStack_40;
  long local_30;
  
  local_118 = param_1 + 0x20;
  uVar1 = *(ulong *)(param_2 + 0x48);
  uVar2 = *(ulong *)(param_2 + 0x40);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_58 = *(undefined4 *)(param_1 + 8);
  local_b8 = 0;
  local_b0 = 0;
  local_68 = 0;
  lVar4 = (long)(1 << ((byte)*(undefined4 *)(param_1 + 4) & 0x1f));
  local_e8 = _LC1;
  uStack_e4 = _LC1;
  uStack_e0 = _LC1;
  uStack_dc = _LC1;
  local_c8 = _LC1;
  uStack_c4 = _LC1;
  uStack_c0 = _LC1;
  uStack_bc = _LC1;
  local_48 = (&mm_lookupmask_ps)[lVar4 * 2];
  uStack_40 = *(undefined8 *)(operator_delete + lVar4 * 0x10);
  local_98 = _LC1;
  uStack_94 = _LC1;
  uStack_90 = _LC1;
  uStack_8c = _LC1;
  local_78 = _LC1;
  uStack_74 = _LC1;
  uStack_70 = _LC1;
  uStack_6c = _LC1;
  local_f8 = _LC3;
  uStack_f4 = _LC3;
  uStack_f0 = _LC3;
  uStack_ec = _LC3;
  local_d8 = _LC3;
  uStack_d4 = _LC3;
  uStack_d0 = _LC3;
  uStack_cc = _LC3;
  local_a8 = _LC3;
  uStack_a4 = _LC3;
  uStack_a0 = _LC3;
  uStack_9c = _LC3;
  local_88 = _LC3;
  uStack_84 = _LC3;
  uStack_80 = _LC3;
  uStack_7c = _LC3;
  local_60 = 0;
  local_110 = &local_58;
  local_108 = &local_48;
  uStack_54 = local_58;
  uStack_50 = local_58;
  uStack_4c = local_58;
  uVar3 = parallel_partitioning<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                    ((PrimRef *)this,uVar2,uVar1,&local_11b,(PrimInfoT *)&local_f8,
                     (PrimInfoT *)&local_a8,(_lambda_embree__PrimRef_const___1_ *)&local_118,
                     &local_11a,&local_119,0x80);
  *(ulong *)(param_3 + 0x40) = uVar2;
  *(ulong *)(param_3 + 0x48) = uVar3;
  *(ulong *)param_3 = CONCAT44(uStack_f4,local_f8);
  *(ulong *)(param_3 + 8) = CONCAT44(uStack_ec,uStack_f0);
  *(ulong *)(param_3 + 0x10) = CONCAT44(uStack_e4,local_e8);
  *(ulong *)(param_3 + 0x18) = CONCAT44(uStack_dc,uStack_e0);
  *(ulong *)(param_3 + 0x50) = uVar3;
  *(undefined4 *)(param_3 + 0x20) = local_d8;
  *(undefined4 *)(param_3 + 0x24) = uStack_d4;
  *(undefined4 *)(param_3 + 0x28) = uStack_d0;
  *(undefined4 *)(param_3 + 0x2c) = uStack_cc;
  *(undefined4 *)(param_3 + 0x30) = local_c8;
  *(undefined4 *)(param_3 + 0x34) = uStack_c4;
  *(undefined4 *)(param_3 + 0x38) = uStack_c0;
  *(undefined4 *)(param_3 + 0x3c) = uStack_bc;
  *(ulong *)(param_4 + 0x40) = uVar3;
  *(ulong *)(param_4 + 0x48) = uVar1;
  *(ulong *)(param_4 + 0x50) = uVar1;
  *(ulong *)param_4 = CONCAT44(uStack_a4,local_a8);
  *(ulong *)(param_4 + 8) = CONCAT44(uStack_9c,uStack_a0);
  *(undefined4 *)(param_4 + 0x10) = local_98;
  *(undefined4 *)(param_4 + 0x14) = uStack_94;
  *(undefined4 *)(param_4 + 0x18) = uStack_90;
  *(undefined4 *)(param_4 + 0x1c) = uStack_8c;
  *(undefined4 *)(param_4 + 0x20) = local_88;
  *(undefined4 *)(param_4 + 0x24) = uStack_84;
  *(undefined4 *)(param_4 + 0x28) = uStack_80;
  *(undefined4 *)(param_4 + 0x2c) = uStack_7c;
  *(undefined4 *)(param_4 + 0x30) = local_78;
  *(undefined4 *)(param_4 + 0x34) = uStack_74;
  *(undefined4 *)(param_4 + 0x38) = uStack_70;
  *(undefined4 *)(param_4 + 0x3c) = uStack_6c;
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_b0;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0011b44d) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar18 = pTVar15 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar16 = pTVar16 + 0x40;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar4 = pTVar15 + uVar3 + 0x40090;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar4 = &PTR_execute_0012f718;
      uVar6 = *(undefined8 *)(param_1 + 0x20);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x28) = uVar6;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      lVar17 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar17 + 0x50) = pTVar4;
      *(long *)(pTVar15 + lVar17 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar15 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar17 + 0x68) = lVar5;
      *(ulong *)(pTVar15 + lVar17 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar15 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)param_4;
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_0011b6e3:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0012f718;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0011b6e3;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  ulong uVar1;
  ulong uVar2;
  
  uVar1 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < *(long *)(this + 8) - uVar1) {
    uVar2 = *(long *)(this + 8) + uVar1 >> 1;
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar1,uVar2,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar2,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    embree::TaskScheduler::wait();
    return;
  }
  parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#3}>
  ::
  partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&)
  ::{lambda(unsigned_long)#1}::operator()(*(_lambda_unsigned_long__1_ **)(this + 0x20),uVar1);
  return;
}



/* WARNING: Removing unreachable block (ram,0x0011bb8d) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar18 = pTVar15 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar16 = pTVar16 + 0x40;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar4 = pTVar15 + uVar3 + 0x40090;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar4 = &PTR_execute_0012f730;
      uVar6 = *(undefined8 *)(param_1 + 0x20);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x28) = uVar6;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      lVar17 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar17 + 0x50) = pTVar4;
      *(long *)(pTVar15 + lVar17 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar15 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar17 + 0x68) = lVar5;
      *(ulong *)(pTVar15 + lVar17 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar15 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)param_4;
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_0011be23:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0012f730;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0011be23;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  ulong uVar1;
  ulong uVar2;
  
  uVar1 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < *(long *)(this + 8) - uVar1) {
    uVar2 = *(long *)(this + 8) + uVar1 >> 1;
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar1,uVar2,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar2,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    embree::TaskScheduler::wait();
    return;
  }
  parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)#3}>
  ::
  partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&)
  ::{lambda(unsigned_long)#2}::operator()(*(_lambda_unsigned_long__2_ **)(this + 0x20),uVar1);
  return;
}



/* unsigned long embree::parallel_partitioning<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3}>(embree::PrimRef*, unsigned long,
   unsigned long, embree::EmptyTy const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&, unsigned long) */

ulong embree::
      parallel_partitioning<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                (PrimRef *param_1,ulong param_2,ulong param_3,EmptyTy *param_4,PrimInfoT *param_5,
                PrimInfoT *param_6,_lambda_embree__PrimRef_const___1_ *param_7,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimRef_const___2_
                *param_8,_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                         *param_9,ulong param_10)

{
  int *piVar1;
  uint *puVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  bool bVar8;
  bool bVar9;
  float fVar10;
  undefined8 ****ppppuVar11;
  undefined8 ***pppuVar12;
  ulong uVar13;
  undefined1 (*pauVar14) [16];
  undefined8 ****ppppuVar15;
  PrimRef *pPVar16;
  PrimRef *pPVar17;
  int iVar18;
  PrimRef *pPVar19;
  undefined8 ****ppppuVar20;
  undefined8 ****ppppuVar21;
  undefined8 ****ppppuVar22;
  uint uVar23;
  long lVar25;
  long lVar26;
  long lVar27;
  long lVar28;
  undefined8 ***pppuVar29;
  long in_FS_OFFSET;
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  int iVar33;
  int iVar36;
  int iVar37;
  int iVar38;
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar39 [16];
  uint uVar40;
  uint uVar41;
  uint uVar42;
  float fVar43;
  float fVar44;
  float fVar45;
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  long local_98;
  long local_90;
  undefined8 **local_88;
  long local_80;
  undefined8 ***local_78;
  undefined8 ***pppuStack_70;
  undefined8 ***local_68;
  undefined8 ***pppuStack_60;
  long *local_58;
  long *local_50;
  long local_40;
  PrimInfoT *pPVar24;
  
  fVar10 = _LC12;
  pppuVar29 = (undefined8 ***)(param_3 - param_2);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pPVar19 = param_1 + param_2 * 0x20;
  if (pppuVar29 < param_10) {
    pPVar16 = param_1 + param_3 * 0x20 + -0x20;
    pPVar24 = param_5;
    for (; pPVar19 <= pPVar16; pPVar19 = pPVar19 + 0x20) {
      auVar30 = *(undefined1 (*) [16])(pPVar19 + 0x10);
      auVar31 = *(undefined1 (*) [16])pPVar19;
      lVar25 = *(long *)param_7;
      fVar51 = auVar30._0_4_ + auVar31._0_4_;
      fVar52 = auVar30._4_4_ + auVar31._4_4_;
      fVar53 = auVar30._8_4_ + auVar31._8_4_;
      fVar54 = auVar30._12_4_ + auVar31._12_4_;
      fVar47 = *(float *)(lVar25 + 0x20);
      fVar48 = *(float *)(lVar25 + 0x24);
      fVar49 = *(float *)(lVar25 + 0x28);
      fVar50 = *(float *)(lVar25 + 0x2c);
      fVar43 = *(float *)(lVar25 + 0x30);
      fVar44 = *(float *)(lVar25 + 0x34);
      fVar45 = *(float *)(lVar25 + 0x38);
      fVar46 = *(float *)(lVar25 + 0x3c);
      piVar1 = *(int **)(param_7 + 8);
      iVar33 = *piVar1;
      iVar36 = piVar1[1];
      iVar37 = piVar1[2];
      iVar38 = piVar1[3];
      puVar2 = *(uint **)(param_7 + 0x10);
      uVar23 = *puVar2;
      uVar40 = puVar2[1];
      uVar41 = puVar2[2];
      uVar42 = puVar2[3];
      auVar35._0_4_ = -(uint)((int)((fVar51 - fVar47) * fVar43 + fVar10) < iVar33) & uVar23;
      auVar35._4_4_ = -(uint)((int)((fVar52 - fVar48) * fVar44 + fVar10) < iVar36) & uVar40;
      auVar35._8_4_ = -(uint)((int)((fVar53 - fVar49) * fVar45 + fVar10) < iVar37) & uVar41;
      auVar35._12_4_ = -(uint)((int)((fVar54 - fVar50) * fVar46 + fVar10) < iVar38) & uVar42;
      iVar18 = movmskps((int)puVar2,auVar35);
      pPVar17 = pPVar16;
      if (iVar18 == 0) {
        while( true ) {
          auVar30 = *(undefined1 (*) [16])(pPVar17 + 0x10);
          auVar31 = *(undefined1 (*) [16])pPVar17;
          pPVar16 = pPVar17 + -0x20;
          auVar39._0_4_ = auVar30._0_4_ + auVar31._0_4_;
          auVar39._4_4_ = auVar30._4_4_ + auVar31._4_4_;
          auVar39._8_4_ = auVar30._8_4_ + auVar31._8_4_;
          auVar39._12_4_ = auVar30._12_4_ + auVar31._12_4_;
          auVar34._0_4_ =
               -(uint)((int)((auVar39._0_4_ - fVar47) * fVar43 + fVar10) < iVar33) & uVar23;
          auVar34._4_4_ =
               -(uint)((int)((auVar39._4_4_ - fVar48) * fVar44 + fVar10) < iVar36) & uVar40;
          auVar34._8_4_ =
               -(uint)((int)((auVar39._8_4_ - fVar49) * fVar45 + fVar10) < iVar37) & uVar41;
          auVar34._12_4_ =
               -(uint)((int)((auVar39._12_4_ - fVar50) * fVar46 + fVar10) < iVar38) & uVar42;
          uVar23 = movmskps((int)pPVar24,auVar34);
          pPVar24 = (PrimInfoT *)(ulong)uVar23;
          if (uVar23 != 0) break;
          *(ulong *)(param_6 + 0x48) =
               *(long *)(param_6 + 0x48) + (ulong)(*(uint *)(pPVar17 + 0xc) >> 0x1b);
          auVar31 = minps(*(undefined1 (*) [16])param_6,auVar31);
          *(undefined1 (*) [16])param_6 = auVar31;
          auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar30);
          *(undefined1 (*) [16])(param_6 + 0x10) = auVar30;
          auVar30 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar39);
          *(undefined1 (*) [16])(param_6 + 0x20) = auVar30;
          auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar39);
          *(undefined1 (*) [16])(param_6 + 0x30) = auVar30;
          if (pPVar16 < pPVar19) goto LAB_0011c409;
          lVar25 = *(long *)param_7;
          fVar47 = *(float *)(lVar25 + 0x20);
          fVar48 = *(float *)(lVar25 + 0x24);
          fVar49 = *(float *)(lVar25 + 0x28);
          fVar50 = *(float *)(lVar25 + 0x2c);
          fVar43 = *(float *)(lVar25 + 0x30);
          fVar44 = *(float *)(lVar25 + 0x34);
          fVar45 = *(float *)(lVar25 + 0x38);
          fVar46 = *(float *)(lVar25 + 0x3c);
          piVar1 = *(int **)(param_7 + 8);
          iVar33 = *piVar1;
          iVar36 = piVar1[1];
          iVar37 = piVar1[2];
          iVar38 = piVar1[3];
          puVar2 = *(uint **)(param_7 + 0x10);
          uVar23 = *puVar2;
          uVar40 = puVar2[1];
          uVar41 = puVar2[2];
          uVar42 = puVar2[3];
          pPVar17 = pPVar16;
        }
        *(ulong *)(param_5 + 0x48) =
             *(long *)(param_5 + 0x48) + (ulong)(*(uint *)(pPVar17 + 0xc) >> 0x1b);
        auVar31 = minps(*(undefined1 (*) [16])param_5,auVar31);
        *(undefined1 (*) [16])param_5 = auVar31;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar30);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar30;
        auVar30 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar39);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar30;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar39);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar30;
        auVar30 = *(undefined1 (*) [16])pPVar19;
        auVar31 = *(undefined1 (*) [16])(pPVar19 + 0x10);
        auVar35 = minps(*(undefined1 (*) [16])param_6,auVar30);
        *(ulong *)(param_6 + 0x48) =
             *(long *)(param_6 + 0x48) + (ulong)(*(uint *)(pPVar19 + 0xc) >> 0x1b);
        *(undefined1 (*) [16])param_6 = auVar35;
        auVar35 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar31);
        auVar32._0_4_ = auVar31._0_4_ + auVar30._0_4_;
        auVar32._4_4_ = auVar31._4_4_ + auVar30._4_4_;
        auVar32._8_4_ = auVar31._8_4_ + auVar30._8_4_;
        auVar32._12_4_ = auVar31._12_4_ + auVar30._12_4_;
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar35;
        auVar30 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar32);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar30;
        auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar32);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar30;
        uVar3 = *(undefined8 *)(pPVar17 + 8);
        uVar4 = *(undefined8 *)pPVar19;
        uVar5 = *(undefined8 *)(pPVar19 + 8);
        uVar6 = *(undefined8 *)(pPVar19 + 0x10);
        uVar7 = *(undefined8 *)(pPVar19 + 0x18);
        *(undefined8 *)pPVar19 = *(undefined8 *)pPVar17;
        *(undefined8 *)(pPVar19 + 8) = uVar3;
        uVar3 = *(undefined8 *)(pPVar17 + 0x18);
        *(undefined8 *)(pPVar19 + 0x10) = *(undefined8 *)(pPVar17 + 0x10);
        *(undefined8 *)(pPVar19 + 0x18) = uVar3;
        *(undefined8 *)pPVar17 = uVar4;
        *(undefined8 *)(pPVar17 + 8) = uVar5;
        *(undefined8 *)(pPVar17 + 0x10) = uVar6;
        *(undefined8 *)(pPVar17 + 0x18) = uVar7;
      }
      else {
        auVar31 = minps(*(undefined1 (*) [16])param_5,auVar31);
        *(ulong *)(param_5 + 0x48) =
             *(long *)(param_5 + 0x48) + (ulong)(*(uint *)(pPVar19 + 0xc) >> 0x1b);
        *(undefined1 (*) [16])param_5 = auVar31;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar30);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar30;
        auVar30._4_4_ = fVar52;
        auVar30._0_4_ = fVar51;
        auVar30._8_4_ = fVar53;
        auVar30._12_4_ = fVar54;
        auVar30 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar30);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar30;
        auVar31._4_4_ = fVar52;
        auVar31._0_4_ = fVar51;
        auVar31._8_4_ = fVar53;
        auVar31._12_4_ = fVar54;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar31);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar30;
      }
    }
LAB_0011c409:
    uVar13 = (long)pPVar19 - (long)param_1 >> 5;
    goto LAB_0011c025;
  }
  ppppuVar11 = (undefined8 ****)embree::alignedMalloc(0x34c0,0x40);
  ppppuVar11[1] = pppuVar29;
  *ppppuVar11 = (undefined8 ***)pPVar19;
  ppppuVar11[2] = (undefined8 ***)param_7;
  ppppuVar11[3] = (undefined8 ***)param_8;
  ppppuVar11[4] = (undefined8 ***)param_9;
  ppppuVar11[5] = (undefined8 ***)param_4;
  pppuVar12 = (undefined8 ***)embree::TaskScheduler::threadCount();
  pppuVar29 = (undefined8 ***)(((long)pppuVar29 + (param_10 - 1)) / param_10);
  if ((undefined8 ***)0x40 < pppuVar29) {
    pppuVar29 = (undefined8 ***)0x40;
  }
  if (pppuVar29 <= pppuVar12) {
    pppuVar12 = pppuVar29;
  }
  ppppuVar11[6] = pppuVar12;
  local_68 = ppppuVar11;
  if (pppuVar12 == (undefined8 ***)0x0) {
    ppppuVar11[0x50] = (undefined8 ***)0x0;
    ppppuVar11[8] = ppppuVar11[1];
LAB_0011c006:
    ppppuVar20 = (undefined8 ****)ppppuVar11[0x50];
  }
  else {
    local_80 = 0;
    local_78 = &local_68;
    TaskScheduler::
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (0,(ulong)pppuVar12,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_78,
               (TaskGroupContext *)&local_80);
    embree::TaskScheduler::wait();
    if (local_80 != 0) goto LAB_0011c32f;
    pppuVar29 = ppppuVar11[6];
    pppuVar12 = ppppuVar11[1];
    ppppuVar11[(long)(pppuVar29 + 10)] = (undefined8 ***)0x0;
    ppppuVar11[(long)(pppuVar29 + 1)] = pppuVar12;
    if (pppuVar29 == (undefined8 ***)0x0) goto LAB_0011c006;
    pppuVar29 = (undefined8 ***)0x0;
    pauVar14 = (undefined1 (*) [16])(ppppuVar11 + 0x198);
    do {
      auVar30 = minps(*(undefined1 (*) [16])param_5,*pauVar14);
      pppuVar29 = (undefined8 ***)((long)pppuVar29 + 1);
      *(undefined1 (*) [16])param_5 = auVar30;
      auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),pauVar14[1]);
      *(undefined1 (*) [16])(param_5 + 0x10) = auVar30;
      auVar30 = minps(*(undefined1 (*) [16])(param_5 + 0x20),pauVar14[2]);
      *(undefined1 (*) [16])(param_5 + 0x20) = auVar30;
      auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),pauVar14[3]);
      *(undefined1 (*) [16])(param_5 + 0x30) = auVar30;
      *(long *)(param_5 + 0x40) = *(long *)(param_5 + 0x40) + *(long *)pauVar14[4];
      *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + *(long *)(pauVar14[4] + 8);
      auVar30 = minps(*(undefined1 (*) [16])param_6,pauVar14[0x140]);
      *(undefined1 (*) [16])param_6 = auVar30;
      auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),pauVar14[0x141]);
      *(undefined1 (*) [16])(param_6 + 0x10) = auVar30;
      auVar30 = minps(*(undefined1 (*) [16])(param_6 + 0x20),pauVar14[0x142]);
      *(undefined1 (*) [16])(param_6 + 0x20) = auVar30;
      auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),pauVar14[0x143]);
      *(undefined1 (*) [16])(param_6 + 0x30) = auVar30;
      *(long *)(param_6 + 0x40) = *(long *)(param_6 + 0x40) + *(long *)pauVar14[0x144];
      *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + *(long *)(pauVar14[0x144] + 8);
      pppuVar12 = ppppuVar11[6];
      pauVar14 = pauVar14 + 5;
    } while (pppuVar29 < pppuVar12);
    ppppuVar20 = (undefined8 ****)ppppuVar11[0x50];
    ppppuVar21 = ppppuVar20;
    if (pppuVar12 < (undefined8 ***)0x2) {
      ppppuVar15 = (undefined8 ****)ppppuVar11[1];
      local_98 = 0;
      local_90 = 0;
      local_88 = (undefined8 ***)0x0;
      if (pppuVar12 == (undefined8 ***)0x0) goto LAB_0011c010;
    }
    else {
      ppppuVar15 = ppppuVar11 + 0x51;
      do {
        ppppuVar21 = (undefined8 ****)((long)ppppuVar21 + (long)*ppppuVar15);
        ppppuVar15 = ppppuVar15 + 1;
      } while (ppppuVar11 + (long)(pppuVar12 + 10) != ppppuVar15);
      ppppuVar15 = (undefined8 ****)ppppuVar11[1];
    }
    local_88 = (undefined8 ***)0x0;
    local_90 = 0;
    local_98 = 0;
    bVar9 = false;
    bVar8 = false;
    pppuVar29 = (undefined8 ***)0x0;
    ppppuVar22 = ppppuVar11 + 8;
    lVar25 = 0;
    lVar27 = 0;
    while( true ) {
      local_68 = *ppppuVar22;
      pppuStack_60 = (undefined8 ***)((long)ppppuVar20 + (long)local_68);
      pppuStack_70 = ppppuVar22[1];
      if ((long)ppppuVar21 <= (long)ppppuVar22[1]) {
        pppuStack_70 = ppppuVar21;
      }
      local_78 = (undefined8 ****)0x0;
      if (-1 < (long)pppuStack_60) {
        local_78 = pppuStack_60;
      }
      if ((long)ppppuVar15 <= (long)pppuStack_60) {
        pppuStack_60 = ppppuVar15;
      }
      if ((long)local_68 < (long)ppppuVar21) {
        local_68 = ppppuVar21;
      }
      lVar26 = lVar25;
      if ((long)local_78 < (long)pppuStack_70) {
        bVar9 = true;
        pppuVar29 = (undefined8 ***)((long)pppuStack_70 + ((long)pppuVar29 - (long)local_78));
        lVar26 = lVar25 + 1;
        ppppuVar11[lVar25 * 2 + 0x98] = local_78;
        (ppppuVar11 + lVar25 * 2 + 0x98)[1] = pppuStack_70;
      }
      lVar28 = lVar27;
      if ((long)local_68 < (long)pppuStack_60) {
        lVar28 = lVar27 + 1;
        bVar8 = true;
        ppppuVar11[lVar27 * 2 + 0x118] = local_68;
        (ppppuVar11 + lVar27 * 2 + 0x118)[1] = pppuStack_60;
      }
      if (ppppuVar11 + 8 + (long)pppuVar12 == ppppuVar22 + 1) break;
      ppppuVar20 = (undefined8 ****)ppppuVar22[0x49];
      ppppuVar22 = ppppuVar22 + 1;
      lVar25 = lVar26;
      lVar27 = lVar28;
    }
    if (bVar8) {
      local_90 = lVar28;
    }
    ppppuVar20 = ppppuVar21;
    if ((bVar9) && (local_98 = lVar26, local_88 = pppuVar29, pppuVar29 != (undefined8 ***)0x0)) {
      local_68 = &local_88;
      local_58 = &local_98;
      local_50 = &local_90;
      local_80 = 0;
      local_78 = &local_68;
      pppuStack_60 = ppppuVar11;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,(ulong)pppuVar12,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_78,
                 (TaskGroupContext *)&local_80);
      embree::TaskScheduler::wait();
      if (local_80 != 0) {
LAB_0011c32f:
        local_78 = (undefined8 ***)local_80;
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception((_lambda_embree__range<unsigned_long>_const___1_ *)&local_78);
      }
    }
  }
LAB_0011c010:
  if (ppppuVar11 != (undefined8 ****)0x0) {
    embree::alignedFree(ppppuVar11);
  }
  uVar13 = param_2 + (long)ppppuVar20;
LAB_0011c025:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar13;
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&) [clone .isra.0] */

undefined8 __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_object_split
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,BinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  ulong uVar1;
  ulong uVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  EmptyTy local_11b;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimRef_const___2_ local_11a;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
  local_119;
  BinSplit *local_118;
  undefined4 *local_110;
  undefined8 *local_108;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined4 local_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined8 local_48;
  undefined8 uStack_40;
  long local_30;
  
  uVar1 = *(ulong *)(param_2 + 0x48);
  uVar2 = *(ulong *)(param_2 + 0x40);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_58 = *(undefined4 *)(param_1 + 8);
  local_110 = &local_58;
  local_b8 = 0;
  local_b0 = 0;
  uVar3 = (ulong)(uint)(1 << ((byte)*(undefined4 *)(param_1 + 4) & 0x1f));
  local_e8 = _LC1;
  uStack_e4 = _LC1;
  uStack_e0 = _LC1;
  uStack_dc = _LC1;
  local_48 = (&mm_lookupmask_ps)[uVar3 * 2];
  uStack_40 = *(undefined8 *)(operator_delete + uVar3 * 0x10);
  local_c8 = _LC1;
  uStack_c4 = _LC1;
  uStack_c0 = _LC1;
  uStack_bc = _LC1;
  local_98 = _LC1;
  uStack_94 = _LC1;
  uStack_90 = _LC1;
  uStack_8c = _LC1;
  local_78 = _LC1;
  uStack_74 = _LC1;
  uStack_70 = _LC1;
  uStack_6c = _LC1;
  local_f8 = _LC3;
  uStack_f4 = _LC3;
  uStack_f0 = _LC3;
  uStack_ec = _LC3;
  local_d8 = _LC3;
  uStack_d4 = _LC3;
  uStack_d0 = _LC3;
  uStack_cc = _LC3;
  local_a8 = _LC3;
  uStack_a4 = _LC3;
  uStack_a0 = _LC3;
  uStack_9c = _LC3;
  local_88 = _LC3;
  uStack_84 = _LC3;
  uStack_80 = _LC3;
  uStack_7c = _LC3;
  local_68 = 0;
  local_60 = 0;
  local_108 = &local_48;
  local_118 = param_1;
  uStack_54 = local_58;
  uStack_50 = local_58;
  uStack_4c = local_58;
  uVar3 = parallel_partitioning<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                    ((PrimRef *)this,uVar2,uVar1,&local_11b,(PrimInfoT *)&local_f8,
                     (PrimInfoT *)&local_a8,(_lambda_embree__PrimRef_const___1_ *)&local_118,
                     &local_11a,&local_119,0x80);
  *(ulong *)(param_3 + 0x40) = uVar2;
  *(ulong *)(param_3 + 0x48) = uVar3;
  *(ulong *)param_3 = CONCAT44(uStack_f4,local_f8);
  *(ulong *)(param_3 + 8) = CONCAT44(uStack_ec,uStack_f0);
  *(ulong *)(param_3 + 0x10) = CONCAT44(uStack_e4,local_e8);
  *(ulong *)(param_3 + 0x18) = CONCAT44(uStack_dc,uStack_e0);
  *(ulong *)(param_3 + 0x50) = uVar3;
  *(undefined4 *)(param_3 + 0x20) = local_d8;
  *(undefined4 *)(param_3 + 0x24) = uStack_d4;
  *(undefined4 *)(param_3 + 0x28) = uStack_d0;
  *(undefined4 *)(param_3 + 0x2c) = uStack_cc;
  *(undefined4 *)(param_3 + 0x30) = local_c8;
  *(undefined4 *)(param_3 + 0x34) = uStack_c4;
  *(undefined4 *)(param_3 + 0x38) = uStack_c0;
  *(undefined4 *)(param_3 + 0x3c) = uStack_bc;
  *(ulong *)(param_4 + 0x40) = uVar3;
  *(ulong *)(param_4 + 0x48) = uVar1;
  *(ulong *)(param_4 + 0x50) = uVar1;
  *(ulong *)param_4 = CONCAT44(uStack_a4,local_a8);
  *(ulong *)(param_4 + 8) = CONCAT44(uStack_9c,uStack_a0);
  *(undefined4 *)(param_4 + 0x10) = local_98;
  *(undefined4 *)(param_4 + 0x14) = uStack_94;
  *(undefined4 *)(param_4 + 0x18) = uStack_90;
  *(undefined4 *)(param_4 + 0x1c) = uStack_8c;
  *(undefined4 *)(param_4 + 0x20) = local_88;
  *(undefined4 *)(param_4 + 0x24) = uStack_84;
  *(undefined4 *)(param_4 + 0x28) = uStack_80;
  *(undefined4 *)(param_4 + 0x2c) = uStack_7c;
  *(undefined4 *)(param_4 + 0x30) = local_78;
  *(undefined4 *)(param_4 + 0x34) = uStack_74;
  *(undefined4 *)(param_4 + 0x38) = uStack_70;
  *(undefined4 *)(param_4 + 0x3c) = uStack_6c;
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_b0;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::split(embree::sse2::Split2<embree::sse2::BinSplit<32ul>,
   embree::sse2::SpatialBinSplit<16ul> > const&, embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&, embree::sse2::PrimInfoExtRange&) */

void __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::split
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,Split2 *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  ulong uVar4;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *this_00
  ;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar9;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar10
  ;
  ulong uVar11;
  undefined1 (*pauVar12) [16];
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar13
  ;
  long lVar14;
  int iVar15;
  undefined8 *puVar16;
  undefined8 *puVar17;
  long lVar18;
  long lVar19;
  int in_R11D;
  undefined8 *puVar20;
  ulong uVar21;
  undefined1 (*pauVar22) [16];
  ulong uVar23;
  long in_FS_OFFSET;
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  undefined1 auVar26 [16];
  undefined1 auVar27 [16];
  undefined1 auVar28 [16];
  undefined1 auVar29 [16];
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  uint local_f8;
  uint uStack_f4;
  uint uStack_f0;
  uint uStack_ec;
  undefined1 local_e8 [16];
  undefined1 local_d8 [16];
  undefined8 local_a8;
  undefined8 uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  ulong local_68;
  ulong local_60;
  ulong local_58;
  long local_40;
  
  local_a8 = *(undefined8 *)param_2;
  uStack_a0 = *(undefined8 *)(param_2 + 8);
  local_88 = *(undefined8 *)(param_2 + 0x20);
  uStack_80 = *(undefined8 *)(param_2 + 0x28);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_98 = *(undefined8 *)(param_2 + 0x10);
  uStack_90 = *(undefined8 *)(param_2 + 0x18);
  uVar4 = *(ulong *)(param_2 + 0x40);
  uVar21 = *(ulong *)(param_2 + 0x48);
  uVar23 = *(ulong *)(param_2 + 0x50);
  local_78 = *(undefined8 *)(param_2 + 0x30);
  uStack_70 = *(undefined8 *)(param_2 + 0x38);
  local_68 = uVar4;
  local_60 = uVar21;
  local_58 = uVar23;
  if (_LC49 < *(float *)(param_1 + 0x54)) {
    lVar14 = uVar21 * 0x20;
    puVar16 = (undefined8 *)(*(long *)this + lVar14);
    puVar17 = (undefined8 *)(*(long *)this + uVar4 * 0x20);
    if (puVar16 != puVar17) {
      lVar18 = lVar14 + uVar4 * -0x20;
      uVar11 = lVar18 >> 5;
      if (uVar11 == 0) {
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar16,0xfffffffffffffffe);
      }
      else {
        lVar19 = 0x3f;
        if (uVar11 != 0) {
          for (; uVar11 >> lVar19 == 0; lVar19 = lVar19 + -1) {
          }
        }
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar16,(long)(int)lVar19 * 2);
        if (0x200 < lVar18) {
          puVar20 = puVar17 + 0x40;
          std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar20)
          ;
          for (; puVar16 != puVar20; puVar20 = puVar20 + 4) {
            uVar2 = *(undefined4 *)((long)puVar20 + 0x1c);
            uVar3 = *(undefined4 *)((long)puVar20 + 0xc);
            uVar5 = puVar20[2];
            uVar6 = puVar20[3];
            uVar7 = *puVar20;
            uVar8 = puVar20[1];
            uVar11 = CONCAT44(*(undefined4 *)((long)puVar20 + -4),
                              *(undefined4 *)((long)puVar20 + -0x14));
            puVar17 = puVar20;
            while (CONCAT44(uVar2,uVar3) < uVar11) {
              *puVar17 = puVar17[-4];
              puVar17[1] = puVar17[-3];
              puVar17[2] = puVar17[-2];
              puVar17[3] = puVar17[-1];
              uVar11 = CONCAT44(*(undefined4 *)((long)puVar17 + -0x24),
                                *(undefined4 *)((long)puVar17 + -0x34));
              puVar17 = puVar17 + -4;
            }
            *puVar17 = uVar7;
            puVar17[1] = uVar8;
            puVar17[2] = uVar5;
            puVar17[3] = uVar6;
          }
          goto LAB_0011cbb9;
        }
      }
      std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar16);
    }
LAB_0011cbb9:
    uVar11 = uVar4 + uVar21 >> 1;
    if (uVar4 < uVar11) {
      lVar18 = 0;
      auVar32._8_4_ = _LC1;
      auVar32._0_8_ = CONCAT44(_LC1,_LC1);
      auVar32._12_4_ = _LC1;
      auVar34._8_4_ = _LC1;
      auVar34._0_8_ = CONCAT44(_LC1,_LC1);
      auVar34._12_4_ = _LC1;
      auVar33._8_4_ = _LC3;
      auVar33._0_8_ = CONCAT44(_LC3,_LC3);
      auVar33._12_4_ = _LC3;
      auVar35._8_4_ = _LC3;
      auVar35._0_8_ = CONCAT44(_LC3,_LC3);
      auVar35._12_4_ = _LC3;
      pauVar12 = (undefined1 (*) [16])(uVar4 * 0x20 + *(long *)this);
      do {
        pauVar22 = pauVar12 + 2;
        auVar31._0_4_ = *(float *)pauVar12[1] + *(float *)*pauVar12;
        auVar31._4_4_ = *(float *)(pauVar12[1] + 4) + *(float *)(*pauVar12 + 4);
        auVar31._8_4_ = *(float *)(pauVar12[1] + 8) + *(float *)(*pauVar12 + 8);
        auVar31._12_4_ = *(float *)(pauVar12[1] + 0xc) + *(float *)(*pauVar12 + 0xc);
        auVar35 = minps(auVar35,*pauVar12);
        auVar34 = maxps(auVar34,pauVar12[1]);
        lVar18 = lVar18 + (ulong)(*(uint *)(*pauVar12 + 0xc) >> 0x1b);
        auVar33 = minps(auVar33,auVar31);
        auVar32 = maxps(auVar32,auVar31);
        pauVar12 = pauVar22;
      } while ((undefined1 (*) [16])(*(long *)this + uVar11 * 0x20) != pauVar22);
    }
    else {
      lVar18 = 0;
      auVar32._8_4_ = _LC1;
      auVar32._0_8_ = CONCAT44(_LC1,_LC1);
      auVar32._12_4_ = _LC1;
      auVar33._8_4_ = _LC3;
      auVar33._0_8_ = CONCAT44(_LC3,_LC3);
      auVar33._12_4_ = _LC3;
      auVar34._8_4_ = _LC1;
      auVar34._0_8_ = CONCAT44(_LC1,_LC1);
      auVar34._12_4_ = _LC1;
      auVar35._8_4_ = _LC3;
      auVar35._0_8_ = CONCAT44(_LC3,_LC3);
      auVar35._12_4_ = _LC3;
    }
    auVar30._4_4_ = _LC3;
    auVar30._0_4_ = _LC3;
    auVar27._4_4_ = _LC1;
    auVar27._0_4_ = _LC1;
    auVar30._8_4_ = _LC3;
    auVar27._8_4_ = _LC1;
    auVar30._12_4_ = _LC3;
    auVar27._12_4_ = _LC1;
    auVar31 = auVar27;
    auVar36 = auVar30;
    if (uVar11 < uVar21) {
      lVar19 = 0;
      pauVar12 = (undefined1 (*) [16])(uVar11 * 0x20 + *(long *)this);
      do {
        pauVar22 = pauVar12 + 2;
        auVar24._0_4_ = *(float *)pauVar12[1] + *(float *)*pauVar12;
        auVar24._4_4_ = *(float *)(pauVar12[1] + 4) + *(float *)(*pauVar12 + 4);
        auVar24._8_4_ = *(float *)(pauVar12[1] + 8) + *(float *)(*pauVar12 + 8);
        auVar24._12_4_ = *(float *)(pauVar12[1] + 0xc) + *(float *)(*pauVar12 + 0xc);
        auVar36 = minps(auVar36,*pauVar12);
        auVar31 = maxps(auVar31,pauVar12[1]);
        lVar19 = lVar19 + (ulong)(*(uint *)(*pauVar12 + 0xc) >> 0x1b);
        auVar30 = minps(auVar30,auVar24);
        auVar27 = maxps(auVar27,auVar24);
        pauVar12 = pauVar22;
      } while ((undefined1 (*) [16])(*(long *)this + lVar14) != pauVar22);
    }
    else {
      lVar19 = 0;
    }
    auVar42._8_8_ = lVar19;
    auVar42._0_8_ = lVar18;
    *(ulong *)(param_3 + 0x40) = uVar4;
    *(ulong *)(param_3 + 0x48) = uVar11;
    *(ulong *)(param_3 + 0x50) = uVar11;
    *(undefined1 (*) [16])param_3 = auVar35;
    *(undefined1 (*) [16])(param_3 + 0x10) = auVar34;
    *(undefined1 (*) [16])(param_3 + 0x20) = auVar33;
    *(undefined1 (*) [16])(param_3 + 0x30) = auVar32;
    *(ulong *)(param_4 + 0x40) = uVar11;
    *(ulong *)(param_4 + 0x48) = uVar21;
    *(ulong *)(param_4 + 0x50) = uVar21;
    *(undefined1 (*) [16])param_4 = auVar36;
    *(undefined1 (*) [16])(param_4 + 0x10) = auVar31;
    *(undefined1 (*) [16])(param_4 + 0x20) = auVar30;
    *(undefined1 (*) [16])(param_4 + 0x30) = auVar27;
    if (uVar21 != uVar23) goto LAB_0011ccc6;
  }
  else {
    if (param_1[0x50] == (Split2)0x0) {
      this_00 = *(HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                  **)this;
      if (uVar21 - uVar4 < 0xc00) {
        iVar1 = *(int *)(param_1 + 8);
        lVar18 = 0;
        puVar16 = &mm_lookupmask_ps;
        lVar14 = 0;
        auVar36._0_8_ = CONCAT44(_LC1,_LC1);
        auVar36._8_4_ = _LC1;
        auVar36._12_4_ = _LC1;
        auVar32 = *(undefined1 (*) [16])
                   (&mm_lookupmask_ps +
                   (ulong)(uint)(1 << ((byte)*(undefined4 *)(param_1 + 4) & 0x1f)) * 2);
        auVar38._8_4_ = _LC1;
        auVar38._0_8_ = auVar36._0_8_;
        auVar38._12_4_ = _LC1;
        auVar37._0_8_ = CONCAT44(_LC3,_LC3);
        auVar37._8_4_ = _LC3;
        auVar37._12_4_ = _LC3;
        auVar40._8_4_ = _LC1;
        auVar40._0_8_ = auVar36._0_8_;
        auVar40._12_4_ = _LC1;
        auVar39._8_4_ = _LC3;
        auVar39._0_8_ = auVar37._0_8_;
        auVar39._12_4_ = _LC3;
        auVar41._8_4_ = _LC3;
        auVar41._0_8_ = auVar37._0_8_;
        auVar41._12_4_ = _LC3;
        pHVar9 = this_00 + uVar21 * 0x20 + -0x20;
        local_e8 = auVar36;
        local_d8 = auVar37;
        for (pHVar13 = this_00 + uVar4 * 0x20; pHVar13 <= pHVar9; pHVar13 = pHVar13 + 0x20) {
          auVar33 = *(undefined1 (*) [16])(pHVar13 + 0x10);
          auVar34 = *(undefined1 (*) [16])pHVar13;
          auVar25._0_4_ = auVar33._0_4_ + auVar34._0_4_;
          auVar25._4_4_ = auVar33._4_4_ + auVar34._4_4_;
          auVar25._8_4_ = auVar33._8_4_ + auVar34._8_4_;
          auVar25._12_4_ = auVar33._12_4_ + auVar34._12_4_;
          local_f8 = auVar32._0_4_;
          uStack_f4 = auVar32._4_4_;
          uStack_f0 = auVar32._8_4_;
          uStack_ec = auVar32._12_4_;
          auVar28._0_4_ =
               -(uint)((int)((auVar25._0_4_ - *(float *)(param_1 + 0x20)) *
                             *(float *)(param_1 + 0x30) + _LC12) < iVar1) & local_f8;
          auVar28._4_4_ =
               -(uint)((int)((auVar25._4_4_ - *(float *)(param_1 + 0x24)) *
                             *(float *)(param_1 + 0x34) + _UNK_0012fb94) < iVar1) & uStack_f4;
          auVar28._8_4_ =
               -(uint)((int)((auVar25._8_4_ - *(float *)(param_1 + 0x28)) *
                             *(float *)(param_1 + 0x38) + _UNK_0012fb98) < iVar1) & uStack_f0;
          auVar28._12_4_ =
               -(uint)((int)((auVar25._12_4_ - *(float *)(param_1 + 0x2c)) *
                             *(float *)(param_1 + 0x3c) + _UNK_0012fb9c) < iVar1) & uStack_ec;
          iVar15 = movmskps((int)puVar16,auVar28);
          if (iVar15 == 0) {
            while( true ) {
              auVar35 = *(undefined1 (*) [16])(pHVar9 + 0x10);
              auVar31 = *(undefined1 (*) [16])pHVar9;
              pHVar10 = pHVar9 + -0x20;
              auVar29._0_4_ = auVar35._0_4_ + auVar31._0_4_;
              auVar29._4_4_ = auVar35._4_4_ + auVar31._4_4_;
              auVar29._8_4_ = auVar35._8_4_ + auVar31._8_4_;
              auVar29._12_4_ = auVar35._12_4_ + auVar31._12_4_;
              puVar17 = (undefined8 *)(ulong)(*(uint *)(pHVar9 + 0xc) >> 0x1b);
              auVar26._0_4_ =
                   -(uint)((int)((auVar29._0_4_ - *(float *)(param_1 + 0x20)) *
                                 *(float *)(param_1 + 0x30) + _LC12) < iVar1) & local_f8;
              auVar26._4_4_ =
                   -(uint)((int)((auVar29._4_4_ - *(float *)(param_1 + 0x24)) *
                                 *(float *)(param_1 + 0x34) + _UNK_0012fb94) < iVar1) & uStack_f4;
              auVar26._8_4_ =
                   -(uint)((int)((auVar29._8_4_ - *(float *)(param_1 + 0x28)) *
                                 *(float *)(param_1 + 0x38) + _UNK_0012fb98) < iVar1) & uStack_f0;
              auVar26._12_4_ =
                   -(uint)((int)((auVar29._12_4_ - *(float *)(param_1 + 0x2c)) *
                                 *(float *)(param_1 + 0x3c) + _UNK_0012fb9c) < iVar1) & uStack_ec;
              in_R11D = movmskps(in_R11D,auVar26);
              if (in_R11D != 0) break;
              local_d8 = minps(local_d8,auVar31);
              local_e8 = maxps(local_e8,auVar35);
              lVar18 = lVar18 + (long)puVar17;
              auVar37 = minps(auVar37,auVar29);
              auVar36 = maxps(auVar36,auVar29);
              pHVar9 = pHVar10;
              if (pHVar10 < pHVar13) goto LAB_0011c920;
            }
            *(undefined1 (*) [16])pHVar13 = auVar31;
            auVar40 = maxps(auVar40,auVar35);
            local_d8 = minps(local_d8,auVar34);
            local_e8 = maxps(local_e8,auVar33);
            puVar16 = (undefined8 *)(ulong)(*(uint *)(pHVar13 + 0xc) >> 0x1b);
            auVar41 = minps(auVar41,auVar31);
            auVar39 = minps(auVar39,auVar29);
            *(undefined1 (*) [16])(pHVar13 + 0x10) = *(undefined1 (*) [16])(pHVar9 + 0x10);
            auVar38 = maxps(auVar38,auVar29);
            auVar37 = minps(auVar37,auVar25);
            lVar18 = lVar18 + (long)puVar16;
            auVar36 = maxps(auVar36,auVar25);
            *(undefined1 (*) [16])pHVar9 = auVar34;
            *(undefined1 (*) [16])(pHVar9 + 0x10) = auVar33;
          }
          else {
            auVar41 = minps(auVar41,auVar34);
            auVar40 = maxps(auVar40,auVar33);
            auVar39 = minps(auVar39,auVar25);
            auVar38 = maxps(auVar38,auVar25);
            puVar16 = (undefined8 *)(ulong)(*(uint *)(pHVar13 + 0xc) >> 0x1b);
            pHVar10 = pHVar9;
            puVar17 = puVar16;
          }
          lVar14 = lVar14 + (long)puVar17;
          pHVar9 = pHVar10;
        }
LAB_0011c920:
        auVar42._8_8_ = lVar18;
        auVar42._0_8_ = lVar14;
        *(ulong *)(param_3 + 0x40) = uVar4;
        lVar14 = (long)pHVar13 - (long)this_00 >> 5;
        *(undefined1 (*) [16])param_3 = auVar41;
        *(long *)(param_3 + 0x48) = lVar14;
        *(long *)(param_3 + 0x50) = lVar14;
        *(undefined1 (*) [16])(param_3 + 0x10) = auVar40;
        *(undefined1 (*) [16])(param_3 + 0x20) = auVar39;
        *(undefined1 (*) [16])(param_3 + 0x30) = auVar38;
        *(long *)(param_4 + 0x40) = lVar14;
        *(ulong *)(param_4 + 0x48) = uVar21;
        *(ulong *)(param_4 + 0x50) = uVar21;
        *(undefined8 *)param_4 = local_d8._0_8_;
        *(undefined8 *)(param_4 + 8) = local_d8._8_8_;
        *(undefined8 *)(param_4 + 0x10) = local_e8._0_8_;
        *(undefined8 *)(param_4 + 0x18) = local_e8._8_8_;
        *(undefined1 (*) [16])(param_4 + 0x20) = auVar37;
        *(undefined1 (*) [16])(param_4 + 0x30) = auVar36;
      }
      else {
        auVar42 = parallel_object_split
                            (this_00,(BinSplit *)param_1,(PrimInfoExtRange *)&local_a8,param_3,
                             param_4);
      }
    }
    else {
      create_spatial_splits
                ((PrimInfoExtRange *)this,(SpatialBinSplit *)&local_a8,(SpatialBinMapping *)param_1)
      ;
      uVar21 = local_60;
      if (local_60 - local_68 < 0xc00) {
        auVar42 = sequential_spatial_split
                            (*(HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                               **)this,(SpatialBinSplit *)param_1,(PrimInfoExtRange *)&local_a8,
                             param_3,param_4);
        uVar23 = local_58;
      }
      else {
        auVar42 = parallel_spatial_split
                            (*(HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                               **)this,(SpatialBinSplit *)param_1,(PrimInfoExtRange *)&local_a8,
                             param_3,param_4);
        uVar23 = local_58;
      }
    }
    if (uVar21 != uVar23) {
LAB_0011ccc6:
      setExtentedRanges((PrimInfoExtRange *)&local_a8,param_3,param_4,auVar42._0_8_,auVar42._8_8_);
      if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
        moveExtentedRange((PrimInfoExtRange *)this,param_3,param_4);
        return;
      }
      goto LAB_0011ce1d;
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
LAB_0011ce1d:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__adjust_heap<embree::sse2::PresplitItem*, long, embree::sse2::PresplitItem,
   __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&)> >(embree::sse2::PresplitItem*, long, long,
   embree::sse2::PresplitItem, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem
   const&, embree::sse2::PresplitItem const&)>) */

void std::
     __adjust_heap<embree::sse2::PresplitItem*,long,embree::sse2::PresplitItem,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
               (long param_1,long param_2,ulong param_3,undefined8 param_4,code *param_5)

{
  undefined8 *puVar1;
  char cVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  undefined8 *puVar7;
  long in_FS_OFFSET;
  undefined8 local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar5 = (long)(param_3 - 1) / 2;
  lVar6 = param_2;
  local_48 = param_4;
  if (param_2 < lVar5) {
    do {
      lVar4 = (lVar6 + 1) * 2;
      lVar3 = (lVar6 + 1) * 0x10;
      puVar7 = (undefined8 *)(param_1 + lVar3);
      cVar2 = (*param_5)(puVar7,param_1 + -8 + lVar3);
      if (cVar2 != '\0') {
        lVar4 = lVar4 + -1;
        puVar7 = (undefined8 *)(param_1 + lVar4 * 8);
      }
      *(undefined8 *)(param_1 + lVar6 * 8) = *puVar7;
      lVar6 = lVar4;
    } while (lVar4 < lVar5);
    if ((param_3 & 1) == 0) goto LAB_0011cf98;
  }
  else {
    puVar7 = (undefined8 *)(param_1 + param_2 * 8);
    lVar4 = param_2;
    if ((param_3 & 1) != 0) goto LAB_0011cf4f;
LAB_0011cf98:
    if ((long)(param_3 - 2) / 2 == lVar4) {
      lVar6 = lVar4 * 2;
      lVar4 = lVar6 + 1;
      *puVar7 = *(undefined8 *)(param_1 + -8 + (lVar6 + 2) * 8);
      puVar7 = (undefined8 *)(param_1 + lVar4 * 8);
    }
  }
  lVar6 = (lVar4 + -1) - (lVar4 + -1 >> 0x3f);
  if (param_2 < lVar4) {
    do {
      lVar5 = lVar6 >> 1;
      puVar1 = (undefined8 *)(param_1 + lVar5 * 8);
      puVar7 = (undefined8 *)(param_1 + lVar4 * 8);
      cVar2 = (*param_5)(puVar1,&local_48);
      if (cVar2 == '\0') break;
      *puVar7 = *puVar1;
      lVar6 = (lVar5 + -1) - (lVar5 + -1 >> 0x3f);
      lVar4 = lVar5;
      puVar7 = puVar1;
    } while (param_2 < lVar5);
  }
LAB_0011cf4f:
  *puVar7 = local_48;
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__introsort_loop<embree::sse2::PresplitItem*, long,
   __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&)> >(embree::sse2::PresplitItem*, embree::sse2::PresplitItem*,
   long, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&)>) */

void std::
     __introsort_loop<embree::sse2::PresplitItem*,long,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
               (undefined8 *param_1,undefined8 *param_2,long param_3,code *param_4)

{
  undefined8 *puVar1;
  undefined8 *puVar2;
  undefined8 *puVar3;
  undefined8 uVar4;
  char cVar5;
  long lVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  long lVar10;
  
  lVar6 = (long)param_2 - (long)param_1;
  if (lVar6 < 0x81) {
    return;
  }
  if (param_3 != 0) {
    puVar3 = param_1 + 1;
    puVar9 = param_2;
    do {
      puVar1 = puVar9 + -1;
      param_3 = param_3 + -1;
      puVar2 = param_1 + (lVar6 >> 4);
      cVar5 = (*param_4)(puVar3,puVar2);
      param_2 = puVar3;
      puVar8 = puVar9;
      if (cVar5 == '\0') {
        cVar5 = (*param_4)(puVar3,puVar1);
        if (cVar5 == '\0') {
          cVar5 = (*param_4)(puVar2,puVar1);
          uVar7 = *param_1;
          if (cVar5 != '\0') goto LAB_0011d13e;
          *param_1 = *puVar2;
          *puVar2 = uVar7;
        }
        else {
          uVar7 = *param_1;
LAB_0011d118:
          uVar4 = param_1[1];
          param_1[1] = uVar7;
          *param_1 = uVar4;
        }
      }
      else {
        cVar5 = (*param_4)(puVar2);
        if (cVar5 == '\0') {
          cVar5 = (*param_4)(puVar3,puVar1);
          uVar7 = *param_1;
          if (cVar5 == '\0') goto LAB_0011d118;
LAB_0011d13e:
          *param_1 = puVar9[-1];
          puVar9[-1] = uVar7;
        }
        else {
          uVar7 = *param_1;
          *param_1 = *puVar2;
          *puVar2 = uVar7;
        }
      }
      while( true ) {
        while (cVar5 = (*param_4)(param_2,param_1), cVar5 != '\0') {
          param_2 = param_2 + 1;
        }
        do {
          puVar8 = puVar8 + -1;
          cVar5 = (*param_4)(param_1,puVar8);
        } while (cVar5 != '\0');
        if (puVar8 <= param_2) break;
        uVar7 = *param_2;
        *param_2 = *puVar8;
        *puVar8 = uVar7;
        param_2 = param_2 + 1;
      }
      __introsort_loop<embree::sse2::PresplitItem*,long,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                (param_2,puVar9,param_3,param_4);
      lVar6 = (long)param_2 - (long)param_1;
      if (lVar6 < 0x81) {
        return;
      }
      puVar9 = param_2;
    } while (param_3 != 0);
  }
  for (lVar10 = (lVar6 >> 3) + -2 >> 1;
      __adjust_heap<embree::sse2::PresplitItem*,long,embree::sse2::PresplitItem,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                (param_1,lVar10,lVar6 >> 3,param_1[lVar10],param_4), lVar10 != 0;
      lVar10 = lVar10 + -1) {
  }
  do {
    param_2 = param_2 + -1;
    uVar7 = *param_2;
    *param_2 = *param_1;
    __adjust_heap<embree::sse2::PresplitItem*,long,embree::sse2::PresplitItem,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
              (param_1,0,(long)param_2 - (long)param_1 >> 3,uVar7,param_4);
  } while (8 < (long)param_2 - (long)param_1);
  return;
}



/* WARNING: Removing unreachable block (ram,0x0011d5ad) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar18 = pTVar15 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar16 = pTVar16 + 0x40;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar4 = pTVar15 + uVar3 + 0x40090;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar4 = &PTR_execute_0012f748;
      uVar6 = *(undefined8 *)(param_1 + 0x20);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x28) = uVar6;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      lVar17 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar17 + 0x50) = pTVar4;
      *(long *)(pTVar15 + lVar17 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar15 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar17 + 0x68) = lVar5;
      *(ulong *)(pTVar15 + lVar17 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar15 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#1}>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#1}const&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#1}>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#1}const&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  long lVar2;
  undefined4 uVar3;
  uint uVar4;
  ulong uVar5;
  undefined8 *puVar6;
  long *plVar7;
  long lVar8;
  long lVar9;
  uint *puVar10;
  ulong uVar11;
  ulong uVar12;
  
  uVar5 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < *(long *)(this + 8) - uVar5) {
    uVar12 = *(long *)(this + 8) + uVar5 >> 1;
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar5,uVar12,*(ulong *)(this + 0x18),
               *(_lambda_embree__range<unsigned_long>_const___1_ **)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar12,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               *(_lambda_embree__range<unsigned_long>_const___1_ **)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    embree::TaskScheduler::wait();
    return;
  }
  puVar6 = *(undefined8 **)(this + 0x20);
  plVar7 = (long *)puVar6[4];
  uVar11 = uVar5 * plVar7[3];
  lVar8 = *(long *)puVar6[1];
  uVar3 = *(undefined4 *)*puVar6;
  uVar12 = uVar11 / *(ulong *)puVar6[3];
  uVar11 = (plVar7[3] + uVar11) / *(ulong *)puVar6[3];
  lVar9 = 0;
  do {
    lVar2 = lVar9 * 4;
    lVar9 = lVar9 + 1;
    *(undefined4 *)(lVar2 + *plVar7 + uVar5 * 0x400) = 0;
  } while (lVar9 != 0x100);
  lVar9 = *plVar7;
  if (uVar12 < uVar11) {
    puVar10 = (uint *)(lVar8 + uVar12 * 8);
    do {
      uVar4 = *puVar10;
      puVar10 = puVar10 + 2;
      piVar1 = (int *)(lVar9 + uVar5 * 0x400 + (ulong)(byte)(uVar4 >> ((byte)uVar3 & 0x3f)) * 4);
      *piVar1 = *piVar1 + 1;
    } while ((uint *)(lVar8 + uVar11 * 8) != puVar10);
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x0011dbcd) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  Thread *pTVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar18 = pTVar15 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar16 = pTVar16 + 0x40;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar5 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar4 = pTVar15 + uVar3 + 0x40090;
      uVar9 = *(undefined8 *)param_1;
      uVar10 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar4 = &PTR_execute_0012f760;
      uVar6 = *(undefined8 *)(param_1 + 0x20);
      uVar11 = *(undefined8 *)(param_1 + 0x10);
      uVar12 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar4 + 8) = uVar9;
      *(undefined8 *)(pTVar4 + 0x10) = uVar10;
      *(undefined8 *)(pTVar4 + 0x28) = uVar6;
      *(undefined8 *)(pTVar4 + 0x18) = uVar11;
      *(undefined8 *)(pTVar4 + 0x20) = uVar12;
      lVar17 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar7 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar17 + 0x50) = pTVar4;
      *(long *)(pTVar15 + lVar17 + 0x58) = lVar7;
      *(TaskGroupContext **)(pTVar15 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar17 + 0x68) = lVar5;
      *(ulong *)(pTVar15 + lVar17 + 0x70) = param_3;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar4 = local_48 + 8;
            *(long *)pTVar4 = *(long *)pTVar4 + -1;
            UNLOCK();
            if (*(long *)pTVar4 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar8 = *(long **)(pTVar15 + 0xc0108);
          if (plVar8 != (long *)0x0) {
            if (*(code **)(*plVar8 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar8 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar8 + 8))();
              }
            }
            else {
              (**(code **)(*plVar8 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#2}>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#2}const&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#2}>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#2}const&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  ulong uVar1;
  undefined8 *puVar2;
  ulong uVar3;
  
  uVar1 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < *(long *)(this + 8) - uVar1) {
    uVar3 = *(long *)(this + 8) + uVar1 >> 1;
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar1,uVar3,*(ulong *)(this + 0x18),
               *(_lambda_embree__range<unsigned_long>_const___1_ **)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar3,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               *(_lambda_embree__range<unsigned_long>_const___1_ **)(this + 0x20),
               *(TaskGroupContext **)(this + 0x28));
    embree::TaskScheduler::wait();
    return;
  }
  puVar2 = *(undefined8 **)(this + 0x20);
  ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration1
            ((uint)*(undefined8 *)puVar2[4],(PresplitItem *)((undefined8 *)puVar2[4])[3],
             (PresplitItem *)(ulong)*(uint *)*puVar2,*(ulong *)puVar2[1],*(ulong *)puVar2[2]);
  return;
}



/* void embree::radix_sort<embree::sse2::PresplitItem, unsigned int>(embree::sse2::PresplitItem*,
   embree::sse2::PresplitItem*, unsigned long, unsigned long) */

void embree::radix_sort<embree::sse2::PresplitItem,unsigned_int>
               (PresplitItem *param_1,PresplitItem *param_2,ulong param_3,ulong param_4)

{
  PresplitItem *pPVar1;
  long lVar2;
  bool bVar3;
  ulong uVar4;
  ulong uVar5;
  long lVar6;
  PresplitItem *pPVar7;
  PresplitItem *pPVar8;
  long in_FS_OFFSET;
  undefined4 local_b4;
  PresplitItem *local_b0;
  PresplitItem *local_a8;
  ulong local_a0;
  long local_98;
  long local_90;
  void *local_88;
  PresplitItem *local_80;
  PresplitItem *local_78;
  ulong local_70;
  undefined4 *local_68;
  PresplitItem **local_60;
  PresplitItem **local_58;
  ulong *local_50;
  void **local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_88 = (void *)0x0;
  local_80 = param_1;
  local_78 = param_2;
  local_70 = param_3;
  if (param_4 < param_3) {
    uVar4 = embree::TaskScheduler::threadCount();
    uVar5 = ((param_4 - 1) + local_70) / param_4;
    if (uVar5 <= uVar4) {
      uVar4 = uVar5;
    }
    uVar5 = 0x40;
    if (uVar4 < 0x41) {
      uVar5 = uVar4;
    }
    local_88 = (void *)embree::alignedMalloc(0x10000,0x40);
    local_b4 = 0;
    local_b0 = local_80;
    local_a8 = local_78;
    if (uVar4 != 0) {
      local_98 = 0;
      local_a0 = uVar5;
      local_68 = &local_b4;
      local_60 = &local_b0;
      local_58 = &local_a8;
      local_50 = &local_a0;
      local_48 = &local_88;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar5,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                 (TaskGroupContext *)&local_98);
      embree::TaskScheduler::wait();
      local_90 = local_98;
      if (local_98 != 0) goto LAB_0011e3a4;
      if (local_a0 != 0) {
        local_68 = &local_b4;
        local_60 = &local_b0;
        local_58 = &local_a8;
        local_50 = &local_a0;
        local_48 = &local_88;
        TaskScheduler::
        spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                  (0,local_a0,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                   (TaskGroupContext *)&local_98);
        embree::TaskScheduler::wait();
        local_90 = local_98;
        if (local_98 != 0) goto LAB_0011e3a4;
      }
    }
    local_b4 = 8;
    if (uVar4 != 0) {
      local_98 = 0;
      local_b0 = local_78;
      local_a8 = local_80;
      local_a0 = uVar5;
      local_68 = &local_b4;
      local_60 = &local_b0;
      local_58 = &local_a8;
      local_50 = &local_a0;
      local_48 = &local_88;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar5,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                 (TaskGroupContext *)&local_98);
      embree::TaskScheduler::wait();
      local_90 = local_98;
      if (local_98 != 0) goto LAB_0011e3a4;
      if (local_a0 != 0) {
        local_68 = &local_b4;
        local_60 = &local_b0;
        local_58 = &local_a8;
        local_50 = &local_a0;
        local_48 = &local_88;
        TaskScheduler::
        spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                  (0,local_a0,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                   (TaskGroupContext *)&local_98);
        embree::TaskScheduler::wait();
        local_90 = local_98;
        if (local_98 != 0) goto LAB_0011e3a4;
      }
    }
    local_b4 = 0x10;
    if (uVar4 != 0) {
      local_98 = 0;
      local_b0 = local_80;
      local_a8 = local_78;
      local_a0 = uVar5;
      local_68 = &local_b4;
      local_60 = &local_b0;
      local_58 = &local_a8;
      local_50 = &local_a0;
      local_48 = &local_88;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar5,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                 (TaskGroupContext *)&local_98);
      embree::TaskScheduler::wait();
      local_90 = local_98;
      if (local_98 != 0) goto LAB_0011e3a4;
      if (local_a0 != 0) {
        local_68 = &local_b4;
        local_60 = &local_b0;
        local_58 = &local_a8;
        local_50 = &local_a0;
        local_48 = &local_88;
        TaskScheduler::
        spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                  (0,local_a0,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                   (TaskGroupContext *)&local_98);
        embree::TaskScheduler::wait();
        local_90 = local_98;
        if (local_98 != 0) goto LAB_0011e3a4;
      }
    }
    local_b4 = 0x18;
    local_b0 = local_78;
    local_a8 = local_80;
    local_a0 = uVar5;
    local_68 = &local_b4;
    local_60 = &local_b0;
    local_58 = &local_a8;
    local_50 = &local_a0;
    local_48 = &local_88;
    if (uVar4 != 0) {
      local_98 = 0;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar5,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                 (TaskGroupContext *)&local_98);
      embree::TaskScheduler::wait();
      local_90 = local_98;
      if (local_98 != 0) {
LAB_0011e3a4:
        local_98 = local_90;
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception(&local_90);
      }
      local_68 = &local_b4;
      local_60 = &local_b0;
      local_58 = &local_a8;
      local_50 = &local_a0;
      local_48 = &local_88;
      if (local_a0 != 0) {
        TaskScheduler::
        spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                  (0,local_a0,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                   (TaskGroupContext *)&local_98);
        embree::TaskScheduler::wait();
        if (local_98 != 0) {
          local_90 = local_98;
          goto LAB_0011e3a4;
        }
      }
    }
  }
  else {
    lVar2 = param_3 * 8;
    pPVar1 = param_1 + lVar2;
    if (param_1 != pPVar1) {
      lVar6 = -2;
      uVar4 = lVar2 >> 3;
      if (uVar4 != 0) {
        lVar6 = 0x3f;
        if (uVar4 != 0) {
          for (; uVar4 >> lVar6 == 0; lVar6 = lVar6 + -1) {
          }
        }
        lVar6 = (long)(int)lVar6 * 2;
      }
      std::
      __introsort_loop<embree::sse2::PresplitItem*,long,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                (param_1,pPVar1,lVar6,
                 ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                 compare<embree::sse2::PresplitItem>);
      if (lVar2 < 0x81) {
        std::
        __insertion_sort<embree::sse2::PresplitItem*,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                  (param_1,pPVar1,
                   ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                   compare<embree::sse2::PresplitItem>);
      }
      else {
        pPVar8 = param_1 + 0x78;
        std::
        __insertion_sort<embree::sse2::PresplitItem*,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                  (param_1,param_1 + 0x80,
                   ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                   compare<embree::sse2::PresplitItem>);
        if (pPVar1 != param_1 + 0x80) {
          do {
            local_68 = *(undefined4 **)(pPVar8 + 8);
            pPVar7 = pPVar8;
            while (bVar3 = ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                           compare<embree::sse2::PresplitItem>((PresplitItem *)&local_68,pPVar7),
                  bVar3) {
              *(undefined8 *)(pPVar7 + 8) = *(undefined8 *)pPVar7;
              pPVar7 = pPVar7 + -8;
            }
            pPVar8 = pPVar8 + 8;
            *(undefined4 **)(pPVar7 + 8) = local_68;
          } while (pPVar8 != pPVar1 + -8);
        }
      }
    }
  }
  embree::alignedFree(local_88);
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&) */

sse2 * __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>
          (sse2 *this,ulong param_1,vector_t *param_2,PrimInfoT *param_3,
          _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
          *param_4,_lambda_embree__PrimRef_const___6_ *param_5)

{
  undefined1 auVar1 [16];
  undefined1 auVar2 [16];
  undefined8 uVar3;
  undefined1 auVar4 [16];
  undefined4 **ppuVar5;
  uint uVar6;
  PresplitItem *pPVar7;
  PresplitItem *pPVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  undefined4 **ppuVar11;
  ulong uVar12;
  int *piVar13;
  long lVar14;
  undefined1 (*pauVar15) [16];
  ulong uVar16;
  ulong uVar17;
  undefined4 **ppuVar18;
  int *piVar19;
  long in_FS_OFFSET;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  TaskGroupContext *local_3f0;
  undefined4 *local_3e8;
  _lambda_embree__sse2__PresplitItem_const___4_ local_382;
  undefined1 local_381 [5];
  uint local_37c;
  undefined4 **local_378;
  ulong local_370;
  undefined4 **local_368;
  undefined4 *local_360;
  undefined4 *local_358;
  ulong local_350;
  long local_348;
  ulong local_340;
  long local_338;
  undefined8 local_330;
  undefined1 local_328 [8];
  long local_320;
  long local_318;
  PresplitItem *local_310;
  float local_308;
  float fStack_304;
  float fStack_300;
  undefined4 uStack_2fc;
  float local_2f8;
  float local_2f4;
  undefined4 **local_2e8;
  undefined4 **ppuStack_2e0;
  undefined4 **local_2d8;
  undefined4 **ppuStack_2d0;
  undefined1 local_2c8 [16];
  undefined1 local_2b8 [16];
  undefined8 local_2a8;
  undefined4 **local_2a0;
  undefined1 local_298 [16];
  undefined1 local_288 [16];
  undefined1 local_278 [16];
  undefined1 local_268 [16];
  undefined8 local_258;
  undefined8 local_250;
  int local_248 [130];
  long local_40;
  
  lVar14 = *(long *)(param_2 + 0x10);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_320 = 0;
  local_318 = 0;
  local_310 = (PresplitItem *)0x0;
  local_378 = (undefined4 **)(*(long *)(param_3 + 0x48) - *(long *)(param_3 + 0x40));
  local_370 = (*(long *)(param_3 + 0x40) + lVar14) - *(long *)(param_3 + 0x48);
  local_3e8 = (undefined4 *)0x0;
  if (lVar14 != 0) {
    uVar16 = lVar14 * 8;
    local_310 = (PresplitItem *)embree::alignedMalloc(uVar16,4);
    pPVar7 = local_310;
    do {
      *(undefined4 *)pPVar7 = 0;
      pPVar8 = pPVar7 + 8;
      *(undefined4 *)(pPVar7 + 4) = 0;
      pPVar7 = pPVar8;
    } while (pPVar8 != local_310 + uVar16);
    local_320 = lVar14;
    local_318 = lVar14;
    local_3e8 = (undefined4 *)embree::alignedMalloc(uVar16,4);
    puVar9 = local_3e8;
    do {
      *puVar9 = 0;
      puVar10 = puVar9 + 2;
      puVar9[1] = 0;
      puVar9 = puVar10;
    } while (local_3e8 + lVar14 * 2 != puVar10);
  }
  local_308 = *(float *)param_3;
  fStack_304 = *(float *)(param_3 + 4);
  fStack_300 = *(float *)(param_3 + 8);
  uStack_2fc = *(undefined4 *)(param_3 + 0xc);
  local_2f4 = *(float *)(param_3 + 0x18) - fStack_300;
  if (*(float *)(param_3 + 0x18) - fStack_300 <= *(float *)(param_3 + 0x14) - fStack_304) {
    local_2f4 = *(float *)(param_3 + 0x14) - fStack_304;
  }
  if (local_2f4 <= *(float *)(param_3 + 0x10) - local_308) {
    local_2f4 = *(float *)(param_3 + 0x10) - local_308;
  }
  local_2f8 = 0.0;
  if (local_2f4 != 0.0) {
    local_2f8 = _LC52 / local_2f4;
  }
  uVar16 = (long)local_378 + 0x7fU >> 7;
  local_330 = (vector_t *)((ulong)local_330._4_4_ << 0x20);
  local_298._0_8_ = local_328;
  local_298._8_8_ = &local_308;
  local_288._0_8_ = param_2;
  local_288._8_8_ = param_5;
  if (uVar16 == 1) {
    local_2e8 = (undefined4 **)0x0;
    ppuStack_2e0 = local_378;
    local_381._1_4_ =
         createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
         ::{lambda(embree::range<unsigned_long>const&)#1}::operator()
                   ((_lambda_embree__range<unsigned_long>const___1_ *)local_298,(range *)&local_2e8)
    ;
  }
  else {
    local_381._1_4_ =
         parallel_reduce_internal<unsigned_long,float,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::Pr___ProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(float_const&,float_const&)_2_>
                   (uVar16,0,(ulong)local_378,0x80,(float *)&local_330,
                    (_lambda_embree__range<unsigned_long>_const___1_ *)local_298,
                    (_lambda_float_const__float_const___2_ *)&local_2e8);
  }
  local_3f0 = (TaskGroupContext *)&local_330;
  local_298._8_8_ = &local_370;
  local_381._1_4_ = _LC30 / (float)local_381._1_4_;
  local_288._0_8_ = local_381 + 1;
  local_330 = (vector_t *)0x0;
  local_298._0_8_ = local_328;
  TaskScheduler::
  spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_3_>
            (0,(ulong)local_378,0x80,(_lambda_embree__range<unsigned_long>_const___3_ *)local_298,
             local_3f0);
  embree::TaskScheduler::wait();
  if (local_330 != (vector_t *)0x0) {
    local_2e8 = (undefined4 **)local_330;
    std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
    std::rethrow_exception((range *)&local_2e8);
  }
  local_330 = (vector_t *)0x0;
  local_2e8 = (undefined4 **)0x0;
  auVar4._8_8_ = 0;
  auVar4._0_8_ = local_298._8_8_;
  local_298 = auVar4 << 0x40;
  local_368 = (undefined4 **)
              parallel_partitioning<embree::sse2::PresplitItem,unsigned_long,int,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitore___bree::sse2::PresplitItem_const&)_4_const&,unsigned_long)::_lambda(unsigned_long&,unsigned_long&)_2_>
                        (local_310,0,(ulong)local_378,(int *)local_3f0,(ulong *)&local_2e8,
                         (ulong *)local_298,&local_382,
                         (_lambda_unsigned_long__embree__sse2__PresplitItem_const___1_ *)&local_340,
                         (_lambda_unsigned_long__unsigned_long___2_ *)&local_338,0x400);
  if (local_378 <= local_368) {
    uVar3 = *(undefined8 *)(param_3 + 8);
    *(undefined8 *)this = *(undefined8 *)param_3;
    *(undefined8 *)(this + 8) = uVar3;
    uVar3 = *(undefined8 *)(param_3 + 0x18);
    *(undefined8 *)(this + 0x10) = *(undefined8 *)(param_3 + 0x10);
    *(undefined8 *)(this + 0x18) = uVar3;
    uVar3 = *(undefined8 *)(param_3 + 0x28);
    *(undefined8 *)(this + 0x20) = *(undefined8 *)(param_3 + 0x20);
    *(undefined8 *)(this + 0x28) = uVar3;
    uVar3 = *(undefined8 *)(param_3 + 0x38);
    *(undefined8 *)(this + 0x30) = *(undefined8 *)(param_3 + 0x30);
    *(undefined8 *)(this + 0x38) = uVar3;
    *(undefined8 *)(this + 0x40) = *(undefined8 *)(param_3 + 0x40);
    *(undefined8 *)(this + 0x48) = *(undefined8 *)(param_3 + 0x48);
    goto LAB_0011e6a8;
  }
  uVar16 = (long)local_378 - (long)local_368;
  radix_sort<embree::sse2::PresplitItem,unsigned_int>
            (local_310 + (long)local_368 * 8,(PresplitItem *)(local_3e8 + (long)local_368 * 2),
             uVar16,0x400);
  local_360 = local_3e8;
  local_358 = local_3e8 + uVar16;
  uVar17 = (ulong)((long)local_378 + (0x7f - (long)local_368)) >> 7;
  local_330 = (vector_t *)0x0;
  local_288._8_8_ = &local_308;
  local_288._0_8_ = param_2;
  local_278._0_8_ = &local_360;
  local_278._8_8_ = &local_368;
  local_298._8_8_ = param_4;
  if (uVar17 == 1) {
    local_2e8 = local_368;
    ppuStack_2e0 = local_378;
    local_298._0_8_ = local_328;
    uVar17 = createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
             ::{lambda(embree::range<unsigned_long>const&)#5}::operator()
                       ((_lambda_embree__range<unsigned_long>const___5_ *)local_298,
                        (range *)&local_2e8);
  }
  else {
    local_298._0_8_ = local_328;
    uVar17 = parallel_reduce_internal<unsigned_long,unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<em___)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(unsigned_long_const&,unsigned_long_const&)_6_>
                       (uVar17,(ulong)local_368,(ulong)local_378,0x80,(ulong *)local_3f0,
                        (_lambda_embree__range<unsigned_long>_const___5_ *)local_298,
                        (_lambda_unsigned_long_const__unsigned_long_const___6_ *)&local_2e8);
  }
  if (local_370 < uVar17) {
    ppuVar11 = (undefined4 **)((long)local_378 - 1);
    ppuVar18 = local_378;
    if (local_368 <= ppuVar11) {
      uVar17 = (ulong)*(ushort *)(local_310 + (long)ppuVar11 * 8 + 2);
      while ((ppuVar5 = ppuVar11, uVar17 < local_370 &&
             (ppuVar11 = (undefined4 **)((long)ppuVar5 - 1), ppuVar18 = ppuVar5,
             local_368 <= ppuVar11))) {
        uVar17 = uVar17 + *(ushort *)(local_310 + (long)ppuVar11 * 8 + 2);
      }
    }
    local_37c = 0;
    uVar16 = (long)local_368 + (uVar16 - (long)ppuVar18);
    local_360 = local_360 + ((long)ppuVar18 - (long)local_368);
    local_368 = ppuVar18;
    if (uVar16 < 0x1000) {
      if (uVar16 != 0) goto LAB_0011e95d;
      uVar6 = 0;
    }
    else {
LAB_0011eaf0:
      local_37c = 0;
      local_348 = 0;
      local_350 = uVar16;
      local_2e8 = (undefined4 **)&local_37c;
      ppuStack_2e0 = (undefined4 **)local_381;
      local_2d8 = &local_360;
      uVar12 = embree::TaskScheduler::threadCount();
      piVar19 = local_248;
      uVar17 = (local_350 + 0x3ff) - local_348 >> 10;
      if (uVar12 < uVar17) {
        uVar17 = uVar12;
      }
      local_288._8_8_ = piVar19;
      local_288._0_8_ = (_lambda_unsigned_long__embree__sse2__PresplitItem_const___1_ *)&local_340;
      local_340 = 0x40;
      if (uVar17 < 0x41) {
        local_340 = uVar17;
      }
      local_278._0_8_ = (range *)&local_2e8;
      local_298._0_8_ = &local_348;
      local_298._8_8_ = &local_350;
      if (uVar17 != 0) {
        local_338 = 0;
        _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_19parallel_prefix_sumImjZNS_19parallel_prefix_sumIPjS5_jSt4plusIjEEET1_RKT_RT0_mRKS8_RKT2_mEUlRKNS_5rangeImEERKjE_S7_EESC_RNS_22ParallelPrefixSumStateISC_EES9_S9_S9_RKSC_SF_SI_EUlmE_EEvS9_SU_EUlSM_E_EEvS9_S9_S9_SU_PNS0_16TaskGroupContextE_isra_0
                  (0,local_340,1,(_lambda_embree__range<unsigned_long>const___5_ *)local_298,
                   (_lambda_unsigned_long__unsigned_long___2_ *)&local_338);
        embree::TaskScheduler::wait();
        if (local_338 != 0) goto LAB_0011eec1;
        if (local_340 != 0) {
          piVar13 = piVar19;
          uVar6 = local_37c;
          do {
            piVar13[0x40] = uVar6;
            uVar6 = uVar6 + *piVar13;
            piVar13 = piVar13 + 1;
          } while (piVar19 + local_340 != piVar13);
        }
      }
      ppuStack_2e0 = &local_358;
      local_348 = 0;
      local_350 = uVar16;
      local_2e8 = (undefined4 **)&local_37c;
      local_2d8 = (undefined4 **)local_381;
      ppuStack_2d0 = &local_360;
      uVar17 = embree::TaskScheduler::threadCount();
      uVar16 = (local_350 + 0x3ff) - local_348 >> 10;
      if (uVar17 < uVar16) {
        uVar16 = uVar17;
      }
      local_340 = 0x40;
      if (uVar16 < 0x41) {
        local_340 = uVar16;
      }
      uVar6 = local_37c;
      if (uVar16 != 0) {
        local_338 = 0;
        local_278._0_8_ = (range *)&local_2e8;
        local_298._0_8_ = &local_348;
        local_298._8_8_ = &local_350;
        _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_19parallel_prefix_sumImjZNS_19parallel_prefix_sumIPjS5_jSt4plusIjEEET1_RKT_RT0_mRKS8_RKT2_mEUlRKNS_5rangeImEERKjE0_S7_EESC_RNS_22ParallelPrefixSumStateISC_EES9_S9_S9_RKSC_SF_SI_EUlmE_EEvS9_SU_EUlSM_E_EEvS9_S9_S9_SU_PNS0_16TaskGroupContextE_isra_0
                  (0,local_340,1,(_lambda_embree__range<unsigned_long>const___5_ *)local_298,
                   (_lambda_unsigned_long__unsigned_long___2_ *)&local_338);
        embree::TaskScheduler::wait();
        if (local_338 != 0) {
LAB_0011eec1:
          local_330 = (vector_t *)local_338;
          std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
          std::rethrow_exception(local_3f0);
        }
        uVar6 = local_37c;
        if (local_340 != 0) {
          piVar13 = piVar19 + local_340;
          do {
            piVar19[0x40] = uVar6;
            uVar6 = uVar6 + *piVar19;
            piVar19 = piVar19 + 1;
          } while (piVar13 != piVar19);
        }
      }
    }
  }
  else {
    if (0xfff < uVar16) goto LAB_0011eaf0;
LAB_0011e95d:
    local_37c = 0;
    lVar14 = 0;
    uVar6 = 0;
    do {
      *(uint *)((long)local_358 + lVar14) = uVar6;
      uVar6 = uVar6 + *(int *)((long)local_360 + lVar14);
      lVar14 = lVar14 + 4;
    } while (uVar16 * 4 != lVar14);
  }
  local_278._8_8_ = &local_358;
  local_278._0_8_ = &local_378;
  local_298._8_8_ = param_4;
  local_298._0_8_ = local_328;
  local_288._8_8_ = &local_308;
  local_288._0_8_ = param_2;
  local_268._0_8_ = &local_368;
  local_330 = (vector_t *)0x0;
  TaskScheduler::
  spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_7_>
            ((ulong)local_368,(ulong)local_378,0x80,
             (_lambda_embree__range<unsigned_long>_const___7_ *)local_298,local_3f0);
  embree::TaskScheduler::wait();
  if (local_330 != (vector_t *)0x0) {
    local_2e8 = (undefined4 **)local_330;
    std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
    std::rethrow_exception((range *)&local_2e8);
  }
  local_378 = (undefined4 **)((ulong)uVar6 + (long)local_378);
  uVar16 = (long)local_378 + 0x7fU >> 7;
  local_298._0_8_ = CONCAT44(_LC3,_LC3);
  local_298._8_4_ = _LC3;
  local_298._12_4_ = _LC3;
  local_258 = 0;
  local_288._0_8_ = CONCAT44(_LC1,_LC1);
  local_288._8_4_ = _LC1;
  local_288._12_4_ = _LC1;
  local_250 = 0;
  local_330 = param_2;
  local_278 = local_298;
  local_268 = local_288;
  if (uVar16 == 1) {
    auVar24._8_4_ = _LC1;
    auVar24._0_8_ = local_288._0_8_;
    auVar24._12_4_ = _LC1;
    auVar25._8_4_ = _LC3;
    auVar25._0_8_ = local_298._0_8_;
    auVar25._12_4_ = _LC3;
    ppuVar11 = (undefined4 **)0x0;
    pauVar15 = *(undefined1 (**) [16])(param_2 + 0x20);
    local_2b8 = local_288;
    local_2c8 = local_298;
    do {
      fVar20 = *(float *)pauVar15[1] + *(float *)*pauVar15;
      fVar21 = *(float *)(pauVar15[1] + 4) + *(float *)(*pauVar15 + 4);
      fVar22 = *(float *)(pauVar15[1] + 8) + *(float *)(*pauVar15 + 8);
      fVar23 = *(float *)(pauVar15[1] + 0xc) + *(float *)(*pauVar15 + 0xc);
      ppuVar11 = (undefined4 **)((long)ppuVar11 + 1);
      auVar25 = minps(auVar25,*pauVar15);
      auVar24 = maxps(auVar24,pauVar15[1]);
      auVar1._4_4_ = fVar21;
      auVar1._0_4_ = fVar20;
      auVar1._8_4_ = fVar22;
      auVar1._12_4_ = fVar23;
      local_2c8 = minps(local_2c8,auVar1);
      auVar2._4_4_ = fVar21;
      auVar2._0_4_ = fVar20;
      auVar2._8_4_ = fVar22;
      auVar2._12_4_ = fVar23;
      local_2b8 = maxps(local_2b8,auVar2);
      pauVar15 = pauVar15 + 2;
    } while (ppuVar11 < local_378);
    local_2a8 = 0;
    local_2a0 = local_378;
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embr___InfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_9_>
              ((ulong)&local_2e8,uVar16,0,(ulong)local_378,(PrimInfoT *)0x80,
               (_lambda_embree__range<unsigned_long>_const___8_ *)local_298,
               (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___9_
                *)local_3f0);
    auVar25._8_8_ = ppuStack_2e0;
    auVar25._0_8_ = local_2e8;
    auVar24._8_8_ = ppuStack_2d0;
    auVar24._0_8_ = local_2d8;
  }
  *(undefined8 *)(this + 0x40) = local_2a8;
  *(undefined4 ***)(this + 0x48) = local_2a0;
  *(undefined1 (*) [16])this = auVar25;
  *(undefined1 (*) [16])(this + 0x10) = auVar24;
  *(undefined1 (*) [16])(this + 0x20) = local_2c8;
  *(undefined1 (*) [16])(this + 0x30) = local_2b8;
LAB_0011e6a8:
  embree::alignedFree(local_3e8);
  embree::alignedFree(local_310);
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return this;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&, embree::BuildProgressMonitor&) */

sse2 * __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
          (sse2 *this,
          _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
          *param_1,ulong param_3,char param_4,ulong param_5,vector_t *param_6,undefined8 *param_7)

{
  long *plVar1;
  long lVar2;
  vector_t *pvVar3;
  ulong uVar4;
  undefined1 (*pauVar5) [16];
  vector_t *pvVar6;
  ulong uVar7;
  long *plVar8;
  ulong uVar9;
  ulong uVar10;
  undefined1 (*pauVar11) [16];
  ulong uVar12;
  ulong uVar13;
  vector_t *pvVar14;
  ulong uVar15;
  long lVar16;
  ulong uVar17;
  long in_FS_OFFSET;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d90;
  undefined1 local_2d81;
  vector_t *local_2d80;
  vector_t *local_2d78;
  vector_t *local_2d70;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d68;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d60;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d58;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d50;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d48;
  ulong local_2d40;
  char local_2d38;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d28;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d20;
  _lambda_embree__PrimRef_const___6_ *local_2d18;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  **local_2d10;
  undefined1 *local_2d08;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  **local_2d00;
  undefined1 local_2cf8 [16];
  undefined1 local_2ce8 [16];
  undefined1 local_2cd8 [16];
  undefined1 local_2cc8 [16];
  long local_2cb8;
  long local_2cb0;
  undefined8 local_2ca8;
  undefined4 uStack_2ca0;
  undefined4 uStack_2c9c;
  undefined4 local_2c98;
  undefined4 uStack_2c94;
  undefined4 uStack_2c90;
  undefined4 uStack_2c8c;
  undefined4 local_2c88;
  undefined4 uStack_2c84;
  undefined4 uStack_2c80;
  undefined4 uStack_2c7c;
  undefined4 local_2c78;
  undefined4 uStack_2c74;
  undefined4 uStack_2c70;
  undefined4 uStack_2c6c;
  long local_2c68;
  long local_2c60;
  long local_2c58 [64];
  ulong local_2a58 [64];
  vector_t *local_2858;
  ulong local_2850;
  undefined1 local_2848 [10248];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_2858 = (vector_t *)0x0;
  local_2d90 = param_1;
  local_2d48 = param_1;
  local_2d40 = param_3;
  local_2d38 = param_4;
  if (*(code **)*param_7 == Scene::BuildProgressMonitorInterface::operator()) {
    embree::Scene::progressMonitor(0.0);
  }
  else {
    (**(code **)*param_7)(param_7,0);
  }
  if (*(long *)(local_2d48 + 0x1d0) == 0) {
    local_2850 = 0;
    embree::TaskScheduler::threadCount();
    local_2858 = (vector_t *)0x1;
  }
  else {
    plVar8 = *(long **)(local_2d48 + 0x1e0);
    uVar15 = 0;
    plVar1 = plVar8 + *(long *)(local_2d48 + 0x1d0);
    do {
      lVar16 = *plVar8;
      if ((((lVar16 != 0) && ((*(byte *)(lVar16 + 0x3e) & 0x20) != 0)) &&
          (((long)(1 << (*(byte *)(lVar16 + 0x3c) & 0x1f)) & local_2d40) != 0)) &&
         ((*(int *)(lVar16 + 0x24) != 1) == (bool)local_2d38)) {
        uVar15 = uVar15 + *(uint *)(lVar16 + 0x20);
      }
      plVar8 = plVar8 + 1;
    } while (plVar8 != plVar1);
    local_2850 = uVar15;
    pvVar3 = (vector_t *)embree::TaskScheduler::threadCount();
    local_2c58[0] = 0;
    local_2a58[0] = 0;
    pvVar6 = (vector_t *)(uVar15 + 0x3ff >> 10);
    if (pvVar3 < pvVar6) {
      pvVar6 = pvVar3;
    }
    local_2d70 = (vector_t *)0x40;
    if (pvVar6 < (vector_t *)0x41) {
      local_2d70 = pvVar6;
    }
    if (local_2d70 == (vector_t *)0x0) {
      local_2d70 = (vector_t *)0x1;
    }
    uVar4 = uVar15 / (ulong)local_2d70;
    local_2858 = local_2d70;
    if ((vector_t *)0x1 < pvVar6) {
      pvVar6 = (vector_t *)0x1;
      lVar16 = 0;
      uVar9 = 0;
      do {
        lVar2 = *(long *)(*(long *)(local_2d48 + 0x1e0) + lVar16 * 8);
        uVar10 = uVar9;
        if (((((lVar2 != 0) && ((*(byte *)(lVar2 + 0x3e) & 0x20) != 0)) &&
             (((local_2d40 & (long)(1 << (*(byte *)(lVar2 + 0x3c) & 0x1f))) != 0 &&
              (((*(int *)(lVar2 + 0x24) != 1) == (bool)local_2d38 &&
               (uVar17 = (ulong)*(uint *)(lVar2 + 0x20), uVar17 != 0)))))) &&
            (uVar10 = uVar9 + uVar17, pvVar6 < local_2d70)) && (uVar4 <= uVar10)) {
          uVar7 = 0;
          uVar12 = (long)(pvVar6 + 1) * uVar15;
          pvVar3 = pvVar6 + 1;
          pvVar14 = pvVar6;
          while( true ) {
            pvVar6 = pvVar3;
            uVar13 = uVar4;
            lVar2 = uVar13 + uVar7;
            local_2c58[(long)pvVar14] = lVar16;
            uVar4 = uVar12 / (ulong)local_2d70;
            uVar7 = lVar2 - uVar9;
            local_2a58[(long)pvVar14] = uVar7;
            if (uVar17 <= uVar7) break;
            uVar12 = uVar12 + uVar15;
            uVar10 = (uVar13 + uVar17 + uVar9) - lVar2;
            if ((uVar10 < uVar4) || (local_2d70 <= pvVar6)) goto LAB_0011f1a3;
            pvVar3 = pvVar6 + 1;
            pvVar14 = pvVar6;
            uVar9 = uVar13;
          }
          uVar10 = (uVar9 + uVar13 + uVar17) - lVar2;
        }
LAB_0011f1a3:
        lVar16 = lVar16 + 1;
        uVar9 = uVar10;
      } while (pvVar6 < local_2d70);
      goto LAB_0011f1ba;
    }
  }
  local_2a58[0] = 0;
  local_2c58[0] = 0;
  local_2d70 = (vector_t *)0x1;
LAB_0011f1ba:
  local_2cd8._8_8_ =
       (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
        *)&local_2d28;
  local_2cd8._0_8_ =
       (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
        *)&local_2d80;
  local_2ca8._0_4_ = _LC3;
  local_2ca8._4_4_ = _LC3;
  uStack_2ca0 = _LC3;
  uStack_2c9c = _LC3;
  local_2c98 = _LC1;
  uStack_2c94 = _LC1;
  uStack_2c90 = _LC1;
  uStack_2c8c = _LC1;
  local_2c88 = _LC3;
  uStack_2c84 = _LC3;
  uStack_2c80 = _LC3;
  uStack_2c7c = _LC3;
  local_2c78 = _LC1;
  uStack_2c74 = _LC1;
  uStack_2c70 = _LC1;
  uStack_2c6c = _LC1;
  local_2c68 = 0;
  local_2c60 = 0;
  local_2cf8._8_8_ = &local_2d70;
  local_2cf8._0_8_ = local_2c58;
  local_2ce8._8_8_ = &local_2d60;
  local_2ce8._0_8_ = (_lambda_embree__PrimRef_const___6_ *)&local_2ca8;
  local_2d68 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                *)0x0;
  local_2d78 = param_6;
  local_2d60 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                *)&local_2d48;
  local_2d58 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                *)local_2cf8;
  local_2d28 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                *)&local_2d78;
  local_2d20 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                *)&local_2d48;
  _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_29parallel_for_for_prefix_sum0_IZNS_28parallel_for_for_prefix_sum0INS_5Scene9Iterator2EmNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitINS_12TriangleMeshENSC_23TriangleSplitterFactoryEEESB_PS5_NS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlPSH_RKNS_5rangeImEEmmE_ZNSD_ISE_SF_EESB_SG_SI_bmSO_SQ_EUlRKSB_SY_E0_EET1_RNS_28ParallelForForPrefixSumStateIS10_EERT_T0_RKS10_RKT2_RKT3_EUlmE_mSB_ZNS4_IS6_mSB_SW_SZ_EES10_S13_S15_S16_S18_S1B_S1E_EUlmSV_mE0_SZ_EES10_S13_S16_RKS14_S18_S1B_S1E_EUlmE_EEvS14_RKS16_EUlSV_E_EEvS14_S14_S14_S1L_PNS0_16TaskGroupContextE
            (0,local_2d70,1,&local_2d58,&local_2d68);
  embree::TaskScheduler::wait();
  if (local_2d68 !=
      (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
       *)0x0) {
    local_2d58 = local_2d68;
    std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
    std::rethrow_exception(&local_2d58);
  }
  local_2cf8._4_4_ = local_2ca8._4_4_;
  local_2cf8._0_4_ = (undefined4)local_2ca8;
  local_2cf8._8_4_ = uStack_2ca0;
  local_2cf8._12_4_ = uStack_2c9c;
  local_2ce8._4_4_ = uStack_2c94;
  local_2ce8._0_4_ = local_2c98;
  local_2ce8._8_4_ = uStack_2c90;
  local_2ce8._12_4_ = uStack_2c8c;
  local_2cd8._4_4_ = uStack_2c84;
  local_2cd8._0_4_ = local_2c88;
  local_2cd8._8_4_ = uStack_2c80;
  local_2cd8._12_4_ = uStack_2c7c;
  local_2cc8._4_4_ = uStack_2c74;
  local_2cc8._0_4_ = local_2c78;
  local_2cc8._8_4_ = uStack_2c70;
  local_2cc8._12_4_ = uStack_2c6c;
  local_2cb0 = local_2c60;
  local_2cb8 = local_2c68;
  if (local_2d70 != (vector_t *)0x0) {
    pauVar5 = (undefined1 (*) [16])local_2848;
    do {
      *(long *)pauVar5[0x144] = local_2cb8;
      local_2cb8 = local_2cb8 + *(long *)pauVar5[4];
      pauVar11 = pauVar5 + 5;
      pauVar5[0x140] = local_2cf8;
      local_2cf8 = minps(local_2cf8,*pauVar5);
      pauVar5[0x141] = local_2ce8;
      local_2ce8 = maxps(local_2ce8,pauVar5[1]);
      pauVar5[0x142] = local_2cd8;
      local_2cd8 = minps(local_2cd8,pauVar5[2]);
      pauVar5[0x143] = local_2cc8;
      local_2cc8 = maxps(local_2cc8,pauVar5[3]);
      *(long *)(pauVar5[0x144] + 8) = local_2cb0;
      local_2cb0 = local_2cb0 + *(long *)(pauVar5[4] + 8);
      pauVar5 = pauVar11;
    } while ((undefined1 (*) [16])local_2848 + (long)local_2d70 * 5 != pauVar11);
  }
  if (param_5 != local_2cb0 - local_2cb8) {
    if (*(code **)*param_7 == Scene::BuildProgressMonitorInterface::operator()) {
      embree::Scene::progressMonitor(0.0);
    }
    else {
      (**(code **)*param_7)(param_7,0);
    }
    local_2c68 = 0;
    local_2c60 = 0;
    local_2d08 = &local_2d81;
    local_2d78 = local_2858;
    local_2ca8._0_4_ = _LC3;
    local_2ca8._4_4_ = _UNK_0012fb74;
    uStack_2ca0 = _UNK_0012fb78;
    uStack_2c9c = _UNK_0012fb7c;
    local_2c98 = _LC1;
    uStack_2c94 = _UNK_0012fb64;
    uStack_2c90 = _UNK_0012fb68;
    uStack_2c8c = _UNK_0012fb6c;
    local_2c88 = _LC3;
    uStack_2c84 = _UNK_0012fb74;
    uStack_2c80 = _UNK_0012fb78;
    uStack_2c7c = _UNK_0012fb7c;
    local_2c78 = _LC1;
    uStack_2c74 = _UNK_0012fb64;
    uStack_2c70 = _UNK_0012fb68;
    uStack_2c6c = _UNK_0012fb6c;
    local_2d80 = param_6;
    local_2d68 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                  *)&local_2d48;
    local_2d50 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                  *)&local_2d48;
    local_2d20 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                  *)&local_2d78;
    local_2d18 = (_lambda_embree__PrimRef_const___6_ *)&local_2ca8;
    local_2d10 = &local_2d68;
    local_2d00 = &local_2d58;
    if (local_2858 == (vector_t *)0x0) {
      local_2cc8._4_4_ = _UNK_0012fb64;
      local_2cc8._0_4_ = _LC1;
      local_2cc8._8_4_ = _UNK_0012fb68;
      local_2cc8._12_4_ = _UNK_0012fb6c;
      local_2cd8._4_4_ = _UNK_0012fb74;
      local_2cd8._0_4_ = _LC3;
      local_2cd8._8_4_ = _UNK_0012fb78;
      local_2cd8._12_4_ = _UNK_0012fb7c;
      local_2ce8._4_4_ = _UNK_0012fb64;
      local_2ce8._0_4_ = _LC1;
      local_2ce8._8_4_ = _UNK_0012fb68;
      local_2ce8._12_4_ = _UNK_0012fb6c;
      local_2cb0 = 0;
      local_2cf8._4_4_ = _UNK_0012fb74;
      local_2cf8._0_4_ = _LC3;
      local_2cf8._8_4_ = _UNK_0012fb78;
      local_2cf8._12_4_ = _UNK_0012fb7c;
      local_2cb8 = 0;
    }
    else {
      local_2d70 = (vector_t *)0x0;
      local_2d60 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                    *)&local_2d28;
      local_2d58 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                    *)&local_2d80;
      local_2d28 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                    *)local_2c58;
      _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_29parallel_for_for_prefix_sum1_IZNS_28parallel_for_for_prefix_sum1INS_5Scene9Iterator2EmNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitINS_12TriangleMeshENSC_23TriangleSplitterFactoryEEESB_PS5_NS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlPSH_RKNS_5rangeImEEmmRKSB_E1_ZNSD_ISE_SF_EESB_SG_SI_bmSO_SQ_EUlSX_SX_E2_EET1_RNS_28ParallelForForPrefixSumStateIS10_EERT_T0_RKS10_RKT2_RKT3_EUlmE_mSB_ZNS4_IS6_mSB_SY_SZ_EES10_S13_S15_S16_S18_S1B_S1E_EUlmSV_mSX_E0_SZ_EES10_S13_S16_RKS14_S18_S1B_S1E_EUlmE_EEvS14_RKS16_EUlSV_E_EEvS14_S14_S14_S1L_PNS0_16TaskGroupContextE
                (0,local_2858,1,&local_2d60,&local_2d70);
      embree::TaskScheduler::wait();
      if (local_2d70 != (vector_t *)0x0) {
        local_2d60 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                      *)local_2d70;
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception(&local_2d60);
      }
      local_2cf8._4_4_ = local_2ca8._4_4_;
      local_2cf8._0_4_ = (undefined4)local_2ca8;
      local_2cf8._8_4_ = uStack_2ca0;
      local_2cf8._12_4_ = uStack_2c9c;
      local_2ce8._4_4_ = uStack_2c94;
      local_2ce8._0_4_ = local_2c98;
      local_2ce8._8_4_ = uStack_2c90;
      local_2ce8._12_4_ = uStack_2c8c;
      local_2cd8._4_4_ = uStack_2c84;
      local_2cd8._0_4_ = local_2c88;
      local_2cd8._8_4_ = uStack_2c80;
      local_2cd8._12_4_ = uStack_2c7c;
      local_2cc8._4_4_ = uStack_2c74;
      local_2cc8._0_4_ = local_2c78;
      local_2cc8._8_4_ = uStack_2c70;
      local_2cc8._12_4_ = uStack_2c6c;
      local_2cb8 = local_2c68;
      local_2cb0 = local_2c60;
      if (local_2d78 != (vector_t *)0x0) {
        pauVar5 = (undefined1 (*) [16])local_2848;
        do {
          *(long *)pauVar5[0x144] = local_2cb8;
          local_2cb8 = local_2cb8 + *(long *)pauVar5[4];
          pauVar11 = pauVar5 + 5;
          pauVar5[0x140] = local_2cf8;
          local_2cf8 = minps(local_2cf8,*pauVar5);
          pauVar5[0x141] = local_2ce8;
          local_2ce8 = maxps(local_2ce8,pauVar5[1]);
          pauVar5[0x142] = local_2cd8;
          local_2cd8 = minps(local_2cd8,pauVar5[2]);
          pauVar5[0x143] = local_2cc8;
          local_2cc8 = maxps(local_2cc8,pauVar5[3]);
          *(long *)(pauVar5[0x144] + 8) = local_2cb0;
          local_2cb0 = local_2cb0 + *(long *)(pauVar5[4] + 8);
          pauVar5 = pauVar11;
        } while ((undefined1 (*) [16])local_2848 + (long)local_2d78 * 5 != pauVar11);
      }
    }
  }
  local_2d58 = local_2d90;
  local_2ca8 = &local_2d90;
  local_2d28 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                *)&local_2d58;
  createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>
            (this,param_5,param_6,
             (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
              *)local_2cf8,
             (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
              *)&local_2d28,(_lambda_embree__PrimRef_const___6_ *)&local_2ca8);
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> >
   embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul, embree::PrimRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(embree::range<unsigned long>
   const&)#1}, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long, embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>
   >&)::{lambda(embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned
   long, unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul, embree::PrimRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(embree::range<unsigned long>
   const&)#1} const&, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long, embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>
   >&)::{lambda(embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&)#2} const&)
    */

embree * __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::_lambda(embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&)_2_>
          (embree *this,ulong param_1,ulong param_2,ulong param_3,ulong param_4,
          BinInfoT_conflict *param_5,_lambda_embree__range<unsigned_long>_const___1_ *param_6,
          _lambda_embree__sse2__BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>_>_const___2_
          *param_7)

{
  BinInfoT_conflict *pBVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  ulong uVar12;
  embree *peVar13;
  undefined8 *puVar14;
  undefined1 (*pauVar15) [16];
  embree *peVar16;
  undefined8 *puVar17;
  undefined8 *puVar18;
  long lVar19;
  undefined1 (*pauVar20) [16];
  undefined1 (*pauVar21) [16];
  ulong uVar22;
  BinInfoT_conflict *pBVar23;
  embree *peVar24;
  undefined1 (*pauVar25) [16];
  undefined1 (*pauVar26) [16];
  undefined8 *puVar27;
  undefined1 (*pauVar28) [16];
  undefined1 (*pauVar29) [16];
  long in_FS_OFFSET;
  byte bVar30;
  undefined1 auVar31 [16];
  undefined1 (*local_2b38) [16];
  ulong local_2b18;
  ulong local_2b10;
  ulong local_2b08;
  undefined8 **local_2b00;
  ulong **local_2af8;
  ulong *local_2af0;
  ulong *local_2ae8;
  ulong *local_2ae0;
  undefined1 (*local_2ad8) [16];
  _lambda_embree__range<unsigned_long>_const___1_ *local_2ad0;
  undefined1 local_2ac0 [96];
  undefined8 local_2a60 [372];
  undefined8 local_1ec0;
  int aiStack_1eb8 [22];
  undefined8 local_1e60 [51];
  undefined8 local_1cc8;
  undefined1 local_1cc0 [7168];
  undefined1 (*local_c0) [16];
  ulong local_b8;
  long local_48;
  
  bVar30 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2b18 = param_3;
  local_2b10 = param_2;
  local_2b08 = param_1;
  uVar12 = embree::TaskScheduler::threadCount();
  if (0x200 < local_2b08) {
    local_2b08 = 0x200;
  }
  if (uVar12 < local_2b08) {
    local_2b08 = uVar12;
  }
  local_b8 = local_2b08;
  if (local_2b08 * 0xe00 < 0x2001) {
    local_c0 = (undefined1 (*) [16])local_1cc0;
  }
  else {
    local_c0 = (undefined1 (*) [16])embree::alignedMalloc(local_2b08 * 0xe00,0x40);
  }
  local_2b38 = (undefined1 (*) [16])local_1cc0;
  local_2af0 = &local_2b10;
  local_2ad0 = param_6;
  local_2ae8 = &local_2b18;
  local_2ae0 = &local_2b08;
  local_2ad8 = local_2b38;
  if (local_2b08 != 0) {
    local_2af8 = &local_2af0;
    local_2b00 = (ulong **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_4sse28BinInfoTILm32ENS_7PrimRefENS_4BBoxINS_6Vec3faEEEEEZNS4_24HeuristicArraySpatialSAHINS4_23TriangleSplitterFactoryES6_Lm32ELm16EE20parallel_object_findERKNS4_16PrimInfoExtRangeEmRNS4_10SplitInfoTIS9_EEEUlRKNS_5rangeImEEE_ZNSD_20parallel_object_findESG_mSJ_EUlRKSA_SQ_E0_EET0_T_ST_ST_ST_RKSS_RKT1_RKT2_EUlmE_EEvST_SV_EUlSN_E_EEvST_ST_ST_SV_PNS0_16TaskGroupContextE
              (0,local_2b08,1,&local_2af8,&local_2b00);
    embree::TaskScheduler::wait();
    if (local_2b00 != (ulong **)0x0) {
      local_2af8 = local_2b00;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_2af8);
    }
  }
  uVar12 = local_2b08;
  peVar16 = this + 0x60;
  pBVar1 = param_5 + 0xc00;
  do {
    peVar24 = peVar16 + -0x60;
    pBVar23 = param_5;
    do {
      peVar13 = peVar24;
      uVar8 = *(undefined8 *)(pBVar23 + 8);
      *(undefined8 *)peVar13 = *(undefined8 *)pBVar23;
      *(undefined8 *)(peVar13 + 8) = uVar8;
      uVar8 = *(undefined8 *)(pBVar23 + 0x18);
      *(undefined8 *)(peVar13 + 0x10) = *(undefined8 *)(pBVar23 + 0x10);
      *(undefined8 *)(peVar13 + 0x18) = uVar8;
      peVar24 = peVar13 + 0x20;
      pBVar23 = pBVar23 + 0x20;
    } while (peVar13 + 0x20 != peVar16);
    param_5 = param_5 + 0x60;
    peVar16 = peVar13 + 0x80;
  } while (param_5 != pBVar1);
  puVar14 = (undefined8 *)memmove(this + 0xc00,param_5,0x200);
  if (uVar12 != 0) {
    puVar27 = local_2a60;
    peVar16 = this;
    pauVar29 = local_c0;
    do {
      do {
        puVar17 = puVar27 + -0xc;
        peVar24 = peVar16;
        do {
          uVar8 = *(undefined8 *)peVar24;
          uVar9 = *(undefined8 *)(peVar24 + 8);
          uVar10 = *(undefined8 *)(peVar24 + 0x10);
          uVar11 = *(undefined8 *)(peVar24 + 0x18);
          puVar18 = puVar17 + 4;
          peVar24 = peVar24 + 0x20;
          *puVar17 = uVar8;
          puVar17[1] = uVar9;
          puVar17[2] = uVar10;
          puVar17[3] = uVar11;
          puVar17 = puVar18;
        } while (puVar27 != puVar18);
        puVar27 = puVar27 + 0xc;
        peVar16 = peVar16 + 0x60;
      } while (local_1e60 != puVar27);
      puVar27 = puVar14;
      pauVar21 = (undefined1 (*) [16])&local_1ec0;
      for (lVar19 = 0x40; lVar19 != 0; lVar19 = lVar19 + -1) {
        *(undefined8 *)*pauVar21 = *puVar27;
        puVar27 = puVar27 + (ulong)bVar30 * -2 + 1;
        pauVar21 = (undefined1 (*) [16])(pauVar21[-(ulong)bVar30] + 8);
      }
      lVar19 = **(long **)param_7;
      pauVar21 = (undefined1 (*) [16])local_2ac0;
      peVar16 = this;
      if (lVar19 != 0) {
        pauVar15 = (undefined1 (*) [16])local_2ac0;
        pauVar20 = pauVar29;
        pauVar25 = pauVar29;
        pauVar28 = (undefined1 (*) [16])&local_1ec0;
        do {
          iVar2 = *(int *)(*pauVar28 + 4);
          iVar3 = *(int *)(*pauVar28 + 8);
          iVar4 = *(int *)(*pauVar28 + 0xc);
          pauVar26 = pauVar25 + 1;
          iVar5 = *(int *)(pauVar25[0xc0] + 4);
          iVar6 = *(int *)(pauVar25[0xc0] + 8);
          iVar7 = *(int *)(pauVar25[0xc0] + 0xc);
          *(int *)*pauVar28 = *(int *)*pauVar28 + *(int *)pauVar25[0xc0];
          *(int *)(*pauVar28 + 4) = iVar2 + iVar5;
          *(int *)(*pauVar28 + 8) = iVar3 + iVar6;
          *(int *)(*pauVar28 + 0xc) = iVar4 + iVar7;
          auVar31 = minps(*pauVar15,*pauVar20);
          *pauVar15 = auVar31;
          auVar31 = maxps(pauVar15[1],pauVar20[1]);
          pauVar15[1] = auVar31;
          auVar31 = minps(pauVar15[2],pauVar20[2]);
          pauVar15[2] = auVar31;
          auVar31 = maxps(pauVar15[3],pauVar20[3]);
          pauVar15[3] = auVar31;
          auVar31 = minps(pauVar15[4],pauVar20[4]);
          pauVar15[4] = auVar31;
          auVar31 = maxps(pauVar15[5],pauVar20[5]);
          pauVar15[5] = auVar31;
          pauVar15 = pauVar15 + 6;
          pauVar20 = pauVar20 + 6;
          pauVar25 = pauVar26;
          pauVar28 = pauVar28 + 1;
        } while (pauVar26 != pauVar29 + lVar19);
      }
      do {
        lVar19 = 0;
        do {
          uVar8 = *(undefined8 *)((long)(*pauVar21 + lVar19) + 8);
          uVar9 = *(undefined8 *)(pauVar21[1] + lVar19);
          uVar10 = *(undefined8 *)((long)(pauVar21[1] + lVar19) + 8);
          *(undefined8 *)(peVar16 + lVar19) = *(undefined8 *)(*pauVar21 + lVar19);
          *(undefined8 *)(peVar16 + lVar19 + 8) = uVar8;
          *(undefined8 *)(peVar16 + lVar19 + 0x10) = uVar9;
          *(undefined8 *)(peVar16 + lVar19 + 0x10 + 8) = uVar10;
          lVar19 = lVar19 + 0x20;
        } while (lVar19 != 0x60);
        pauVar21 = pauVar21 + 6;
        peVar16 = peVar16 + 0x60;
      } while (pauVar21 != (undefined1 (*) [16])&local_1ec0);
      pauVar29 = pauVar29 + 0xe0;
      *puVar14 = local_1ec0;
      *(undefined8 *)(this + 0xdf8) = local_1cc8;
      lVar19 = (long)puVar14 - (long)((ulong)(this + 0xc08) & 0xfffffffffffffff8);
      puVar27 = (undefined8 *)((long)&local_1ec0 - lVar19);
      puVar17 = (undefined8 *)((ulong)(this + 0xc08) & 0xfffffffffffffff8);
      for (uVar22 = (ulong)((int)lVar19 + 0x200U >> 3); uVar22 != 0; uVar22 = uVar22 - 1) {
        *puVar17 = *puVar27;
        puVar27 = puVar27 + (ulong)bVar30 * -2 + 1;
        puVar17 = puVar17 + (ulong)bVar30 * -2 + 1;
      }
      puVar27 = local_2a60;
      peVar16 = this;
    } while (local_c0 + uVar12 * 0xe0 != pauVar29);
  }
  if (local_c0 != local_2b38) {
    embree::alignedFree(local_c0);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&) */

PrimInfoExtRange *
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_object_find(PrimInfoExtRange *param_1,ulong param_2,SplitInfoT *param_3)

{
  SplitInfoT *pSVar1;
  ulong uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined1 auVar10 [12];
  long lVar11;
  BinInfoT_conflict *pBVar12;
  long lVar13;
  BinInfoT_conflict *pBVar14;
  undefined1 (*pauVar15) [16];
  ulong in_RCX;
  long lVar16;
  long lVar17;
  BinInfoT_conflict *pBVar18;
  float *pfVar19;
  ulong uVar20;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var21;
  ulong uVar22;
  long *in_R8;
  ulong uVar23;
  long in_FS_OFFSET;
  byte bVar24;
  float fVar25;
  uint uVar26;
  undefined8 uVar27;
  uint uVar28;
  uint uVar29;
  undefined8 uVar30;
  uint uVar31;
  uint uVar32;
  undefined8 uVar33;
  uint uVar35;
  uint uVar36;
  undefined1 auVar34 [16];
  undefined8 uVar37;
  uint uVar38;
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  int iVar41;
  int iVar43;
  int iVar44;
  float fVar45;
  undefined1 auVar42 [16];
  int iVar46;
  undefined1 auVar47 [16];
  float fVar49;
  float fVar50;
  undefined1 auVar48 [16];
  undefined1 auVar51 [16];
  undefined1 auVar52 [16];
  float fVar53;
  float fVar54;
  uint local_1f70;
  uint uStack_1f6c;
  uint uStack_1f68;
  uint uStack_1f64;
  undefined1 local_1f60 [16];
  undefined1 local_1f50 [16];
  undefined1 local_1f40 [16];
  undefined1 local_1f30 [16];
  undefined1 local_1f20 [16];
  undefined1 local_1f10 [16];
  ulong *local_1ef8;
  ulong local_1ef0;
  ulong *local_1ee8;
  ulong local_1ee0;
  ulong local_1ed8;
  undefined1 local_1ed0 [16];
  undefined1 local_1ec0 [16];
  ulong local_1eb0 [2];
  float local_1ea0;
  float fStack_1e9c;
  float fStack_1e98;
  float fStack_1e94;
  float local_1e90;
  uint uStack_1e8c;
  uint uStack_1e88;
  uint uStack_1e84;
  float local_1e80 [104];
  BinInfoT_conflict aBStack_1ce0 [96];
  BinInfoT_conflict local_1c80 [16];
  undefined1 local_1c70 [3040];
  BinInfoT_conflict local_1090 [4];
  BinInfoT_conflict aBStack_108c [4];
  BinInfoT_conflict aBStack_1088 [4];
  BinInfoT_conflict aBStack_1084 [4];
  BinInfoT_conflict local_1080 [4];
  undefined4 auStack_107c [123];
  _lambda_embree__range<unsigned_long>const___1_ a_Stack_e90 [4];
  int aiStack_e8c [3];
  _lambda_embree__range<unsigned_long>const___1_ local_e80 [4];
  int aiStack_e7c [767];
  _lambda_embree__range<unsigned_long>const___1_ local_280 [568];
  long local_48;
  
  bVar24 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pBVar18 = local_1c80;
  pBVar14 = local_1080;
  do {
    *(float *)(pBVar18 + 0x40) = _LC3;
    *(float *)(pBVar18 + 0x44) = _LC3;
    *(float *)(pBVar18 + 0x48) = _LC3;
    *(float *)(pBVar18 + 0x4c) = _LC3;
    pBVar12 = pBVar18 + 0x60;
    *(undefined4 *)(pBVar18 + 0x50) = _LC1;
    *(undefined4 *)(pBVar18 + 0x54) = _LC1;
    *(undefined4 *)(pBVar18 + 0x58) = _LC1;
    *(undefined4 *)(pBVar18 + 0x5c) = _LC1;
    *(float *)(pBVar18 + 0x20) = _LC3;
    *(float *)(pBVar18 + 0x24) = _LC3;
    *(float *)(pBVar18 + 0x28) = _LC3;
    *(float *)(pBVar18 + 0x2c) = _LC3;
    *(undefined4 *)(pBVar18 + 0x30) = _LC1;
    *(undefined4 *)(pBVar18 + 0x34) = _LC1;
    *(undefined4 *)(pBVar18 + 0x38) = _LC1;
    *(undefined4 *)(pBVar18 + 0x3c) = _LC1;
    *(float *)pBVar18 = _LC3;
    *(float *)(pBVar18 + 4) = _LC3;
    *(float *)(pBVar18 + 8) = _LC3;
    *(float *)(pBVar18 + 0xc) = _LC3;
    *(undefined4 *)(pBVar18 + 0x10) = _LC1;
    *(undefined4 *)(pBVar18 + 0x14) = _LC1;
    *(undefined4 *)(pBVar18 + 0x18) = _LC1;
    *(undefined4 *)(pBVar18 + 0x1c) = _LC1;
    *(undefined1 (*) [16])pBVar14 = (undefined1  [16])0x0;
    pBVar18 = pBVar12;
    pBVar14 = pBVar14 + 0x10;
  } while (local_1080 != pBVar12);
  uVar22 = *(ulong *)(param_3 + 0x48);
  uVar2 = *(ulong *)(param_3 + 0x40);
  fVar25 = (float)(uVar22 - uVar2) * __LC5 + __LC6;
  if (__LC7 <= fVar25) {
    uVar23 = (long)(fVar25 - __LC7) ^ 0x8000000000000000;
  }
  else {
    uVar23 = (ulong)fVar25;
  }
  pSVar1 = param_3 + 0x20;
  local_1ea0 = *(float *)pSVar1;
  fStack_1e9c = *(float *)(param_3 + 0x24);
  fStack_1e98 = *(float *)(param_3 + 0x28);
  auVar10 = *(undefined1 (*) [12])pSVar1;
  fStack_1e94 = *(float *)(param_3 + 0x2c);
  auVar47 = *(undefined1 (*) [16])pSVar1;
  auVar34._0_4_ = *(float *)(param_3 + 0x30) - local_1ea0;
  auVar34._4_4_ = *(float *)(param_3 + 0x34) - fStack_1e9c;
  auVar34._8_4_ = *(float *)(param_3 + 0x38) - fStack_1e98;
  auVar34._12_4_ = *(float *)(param_3 + 0x3c) - fStack_1e94;
  if (0x20 < uVar23) {
    uVar23 = 0x20;
  }
  local_1ef8 = local_1eb0;
  uVar20 = (uVar22 - uVar2) + 0x3ff >> 10;
  auVar42._4_4_ = _LC9;
  auVar42._0_4_ = _LC9;
  auVar42._8_4_ = _LC9;
  auVar42._12_4_ = _LC9;
  auVar42 = maxps(auVar42,auVar34);
  auVar48._0_4_ = (float)(long)uVar23 * _LC10;
  auVar48._4_4_ = auVar48._0_4_;
  auVar48._8_4_ = auVar48._0_4_;
  auVar48._12_4_ = auVar48._0_4_;
  auVar34 = divps(auVar48,auVar42);
  local_1e90 = (float)(auVar34._0_4_ & -(uint)(_LC9 < auVar42._0_4_));
  uStack_1e8c = auVar34._4_4_ & -(uint)(_LC9 < auVar42._4_4_);
  uStack_1e88 = auVar34._8_4_ & -(uint)(_LC9 < auVar42._8_4_);
  uStack_1e84 = auVar34._12_4_ & -(uint)(_LC9 < auVar42._12_4_);
  local_1f50._4_4_ = uStack_1e8c;
  local_1f50._0_4_ = local_1e90;
  local_1f50._8_4_ = uStack_1e88;
  local_1f50._12_4_ = uStack_1e84;
  local_1ef0 = param_2;
  local_1ee8 = local_1ef8;
  local_1eb0[0] = uVar23;
  if (uVar20 == 1) {
    local_1ee0 = uVar2;
    local_1ed8 = uVar22;
    parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)
    ::{lambda(embree::range<unsigned_long>const&)#1}::operator()(local_e80,(range *)&local_1ef0);
    auVar40._4_12_ = _UNK_0012fb64;
    auVar40._0_4_ = _LC1;
    auVar39._4_12_ = _UNK_0012fb74;
    auVar39._0_4_ = _LC3;
    local_1f40._0_8_ = auVar10._0_8_;
    local_1f40._8_8_ = auVar47._8_8_;
    uVar27 = local_1f40._0_8_;
    uVar30 = local_1f40._8_8_;
    uVar33 = local_1f50._0_8_;
    uVar37 = local_1f50._8_8_;
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::_lambda(embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&)_2_>
              ((embree *)local_e80,uVar20,uVar2,uVar22,0x400,local_1c80,
               (_lambda_embree__range<unsigned_long>_const___1_ *)&local_1ef0,
               (_lambda_embree__sse2__BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>_>_const___2_
                *)&local_1ef8);
    uVar27 = CONCAT44(fStack_1e9c,local_1ea0);
    uVar30 = CONCAT44(fStack_1e94,fStack_1e98);
    uVar33 = CONCAT44(uStack_1e8c,local_1e90);
    uVar37 = CONCAT44(uStack_1e84,uStack_1e88);
    auVar39._4_12_ = _UNK_0012fb74;
    auVar39._0_4_ = _LC3;
    auVar40._4_12_ = _UNK_0012fb64;
    auVar40._0_4_ = _LC1;
    uVar23 = local_1eb0[0];
  }
  pBVar18 = local_1c80;
  p_Var21 = local_e80;
  do {
    lVar13 = 0;
    do {
      uVar7 = *(undefined8 *)(p_Var21 + lVar13 + 8);
      uVar8 = *(undefined8 *)(p_Var21 + lVar13 + 0x10);
      uVar9 = *(undefined8 *)(p_Var21 + lVar13 + 0x10 + 8);
      *(undefined8 *)(pBVar18 + lVar13) = *(undefined8 *)(p_Var21 + lVar13);
      *(undefined8 *)(pBVar18 + lVar13 + 8) = uVar7;
      *(undefined8 *)(pBVar18 + lVar13 + 0x10) = uVar8;
      *(undefined8 *)(pBVar18 + lVar13 + 0x10 + 8) = uVar9;
      lVar13 = lVar13 + 0x20;
    } while (lVar13 != 0x60);
    p_Var21 = p_Var21 + 0x60;
    pBVar18 = pBVar18 + 0x60;
  } while (p_Var21 != local_280);
  pBVar18 = local_1080;
  for (lVar13 = 0x40; lVar13 != 0; lVar13 = lVar13 + -1) {
    *(undefined8 *)pBVar18 = *(undefined8 *)p_Var21;
    p_Var21 = p_Var21 + ((ulong)bVar24 * -2 + 1) * 8;
    pBVar18 = pBVar18 + (ulong)bVar24 * -0x10 + 8;
  }
  if (uVar23 == 1) {
    local_1ed0 = auVar39;
    local_1ec0 = (undefined1  [16])0x0;
  }
  else {
    iVar41 = 0;
    iVar43 = 0;
    iVar44 = 0;
    iVar46 = 0;
    pBVar18 = aBStack_1ce0 + uVar23 * 0x60;
    pfVar19 = &local_1e90 + uVar23 * 4;
    auVar47 = auVar39;
    auVar34 = auVar40;
    auVar48 = auVar39;
    auVar42 = auVar40;
    auVar51 = auVar39;
    auVar52 = auVar40;
    lVar13 = uVar23 * 0x10;
    do {
      lVar16 = lVar13 + -0x10;
      auVar34 = maxps(auVar34,*(undefined1 (*) [16])(pBVar18 + 0x10));
      auVar47 = minps(auVar47,*(undefined1 (*) [16])pBVar18);
      pBVar14 = pBVar18 + -0x60;
      iVar3 = *(int *)(local_1080 + lVar16);
      iVar4 = *(int *)((long)auStack_107c + lVar13 + -0x10);
      iVar5 = *(int *)(local_1090 + lVar13 + 8);
      iVar6 = *(int *)(local_1090 + lVar13 + 0xc);
      auVar42 = maxps(auVar42,*(undefined1 (*) [16])(pBVar18 + 0x30));
      pfVar19[3] = 0.0;
      auVar48 = minps(auVar48,*(undefined1 (*) [16])(pBVar18 + 0x20));
      auVar52 = maxps(auVar52,*(undefined1 (*) [16])(pBVar18 + 0x50));
      iVar41 = iVar3 + iVar41;
      iVar43 = iVar4 + iVar43;
      iVar44 = iVar5 + iVar44;
      iVar46 = iVar6 + iVar46;
      auVar51 = minps(auVar51,*(undefined1 (*) [16])(pBVar18 + 0x40));
      *(int *)(local_e80 + lVar16) = iVar41;
      *(int *)((long)aiStack_e7c + lVar13 + -0x10) = iVar43;
      *(int *)((long)auStack_107c + lVar13 + 500) = iVar44;
      *(int *)((long)auStack_107c + lVar13 + 0x1f8) = iVar46;
      fVar25 = auVar34._4_4_ - auVar47._4_4_;
      fVar45 = auVar34._8_4_ - auVar47._8_4_;
      *pfVar19 = (auVar34._0_4_ - auVar47._0_4_) * (fVar25 + fVar45) + fVar25 * fVar45;
      fVar25 = auVar42._4_4_ - auVar48._4_4_;
      fVar45 = auVar42._8_4_ - auVar48._8_4_;
      pfVar19[1] = (auVar42._0_4_ - auVar48._0_4_) * (fVar25 + fVar45) + fVar25 * fVar45;
      fVar25 = auVar52._4_4_ - auVar51._4_4_;
      fVar45 = auVar52._8_4_ - auVar51._8_4_;
      pfVar19[2] = (auVar52._0_4_ - auVar51._0_4_) * (fVar25 + fVar45) + fVar25 * fVar45;
      pBVar18 = pBVar14;
      pfVar19 = pfVar19 + -4;
      lVar13 = lVar16;
    } while (local_1c80 != pBVar14);
    local_1ed0 = auVar39;
    local_1ec0 = (undefined1  [16])0x0;
    iVar41 = (1 << ((byte)in_RCX & 0x1f)) + -1;
    if (1 < uVar23) {
      lVar13 = 0x10;
      local_1ec0._0_4_ = 0;
      local_1ec0._4_4_ = 0;
      local_1ec0._8_4_ = 0;
      local_1ec0._12_4_ = 0;
      uVar22 = in_RCX & 0xffffffff;
      local_1f70 = __LC16;
      uStack_1f6c = _UNK_0012fb84;
      uStack_1f68 = _UNK_0012fb88;
      uStack_1f64 = _UNK_0012fb8c;
      local_1f10 = (undefined1  [16])0x0;
      auVar47 = auVar40;
      local_1f60 = auVar40;
      local_1f50 = auVar39;
      local_1f40 = auVar40;
      local_1f30 = auVar39;
      local_1f20 = auVar39;
      do {
        auVar47 = maxps(auVar47,*(undefined1 (*) [16])(pBVar14 + 0x10));
        local_1f20 = minps(local_1f20,*(undefined1 (*) [16])pBVar14);
        local_1f40 = maxps(local_1f40,*(undefined1 (*) [16])(pBVar14 + 0x30));
        local_1f60 = maxps(local_1f60,*(undefined1 (*) [16])(pBVar14 + 0x50));
        local_1f10._0_4_ = local_1f10._0_4_ + *(int *)(local_1090 + lVar13);
        local_1f10._4_4_ = local_1f10._4_4_ + *(int *)(local_1090 + lVar13 + 4);
        local_1f10._8_4_ = local_1f10._8_4_ + *(int *)(local_1090 + lVar13 + 8);
        local_1f10._12_4_ = local_1f10._12_4_ + *(int *)(local_1090 + lVar13 + 0xc);
        fVar25 = auVar47._4_4_ - local_1f20._4_4_;
        fVar45 = auVar47._8_4_ - local_1f20._8_4_;
        local_1f30 = minps(local_1f30,*(undefined1 (*) [16])(pBVar14 + 0x20));
        fVar49 = local_1f40._4_4_ - local_1f30._4_4_;
        fVar50 = local_1f40._8_4_ - local_1f30._8_4_;
        local_1f50 = minps(local_1f50,*(undefined1 (*) [16])(pBVar14 + 0x40));
        fVar53 = local_1f60._4_4_ - local_1f50._4_4_;
        fVar54 = local_1f60._8_4_ - local_1f50._8_4_;
        fVar53 = (local_1f60._0_4_ - local_1f50._0_4_) * (fVar53 + fVar54) + fVar53 * fVar54;
        uVar32 = (uint)(local_1f10._0_4_ + iVar41) >> uVar22;
        uVar35 = (uint)(local_1f10._4_4_ + iVar41) >> uVar22;
        uVar36 = (uint)(local_1f10._8_4_ + iVar41) >> uVar22;
        uVar38 = (uint)(local_1f10._12_4_ + iVar41) >> uVar22;
        uVar26 = (uint)(iVar41 + *(int *)(local_e80 + lVar13)) >> uVar22;
        uVar28 = (uint)(iVar41 + *(int *)((long)aiStack_e7c + lVar13)) >> uVar22;
        uVar29 = (uint)(iVar41 + *(int *)((long)aiStack_e7c + lVar13 + 4)) >> uVar22;
        uVar31 = (uint)(iVar41 + *(int *)((long)aiStack_e7c + lVar13 + 8)) >> uVar22;
        pfVar19 = (float *)((long)local_1e80 + lVar13);
        lVar16 = lVar13 + 4;
        lVar17 = lVar13 + 8;
        lVar11 = lVar13 + 0xc;
        lVar13 = lVar13 + 0x10;
        fVar25 = ((float)(int)(uVar32 & _LC20) + (float)((int)uVar32 >> 0x1f & __LC15)) *
                 (fVar45 * fVar25 + (auVar47._0_4_ - local_1f20._0_4_) * (fVar25 + fVar45)) +
                 ((float)(int)(uVar26 & _LC20) + (float)((int)uVar26 >> 0x1f & __LC15)) * *pfVar19;
        fVar45 = ((float)(int)(uVar35 & _UNK_0012fba4) +
                 (float)((int)uVar35 >> 0x1f & _UNK_0012fbb4)) *
                 ((fVar49 + fVar50) * (local_1f40._0_4_ - local_1f30._0_4_) + fVar49 * fVar50) +
                 ((float)(int)(uVar28 & _UNK_0012fba4) +
                 (float)((int)uVar28 >> 0x1f & _UNK_0012fbb4)) *
                 *(float *)((long)local_1e80 + lVar16);
        fVar49 = ((float)(int)(uVar36 & _UNK_0012fba8) +
                 (float)((int)uVar36 >> 0x1f & _UNK_0012fbb8)) * fVar53 +
                 ((float)(int)(uVar29 & _UNK_0012fba8) +
                 (float)((int)uVar29 >> 0x1f & _UNK_0012fbb8)) *
                 *(float *)((long)local_1e80 + lVar17);
        fVar50 = ((float)(int)(uVar38 & _UNK_0012fbac) +
                 (float)((int)uVar38 >> 0x1f & _UNK_0012fbbc)) * fVar53 +
                 ((float)(int)(uVar31 & _UNK_0012fbac) +
                 (float)((int)uVar31 >> 0x1f & _UNK_0012fbbc)) *
                 *(float *)((long)local_1e80 + lVar11);
        uVar26 = -(uint)(fVar25 < local_1ed0._0_4_);
        uVar28 = -(uint)(fVar45 < local_1ed0._4_4_);
        uVar29 = -(uint)(fVar49 < local_1ed0._8_4_);
        uVar31 = -(uint)(fVar50 < local_1ed0._12_4_);
        local_1ec0._0_4_ = local_1f70 & uVar26 | ~uVar26 & local_1ec0._0_4_;
        local_1ec0._4_4_ = uStack_1f6c & uVar28 | ~uVar28 & local_1ec0._4_4_;
        local_1ec0._8_4_ = uStack_1f68 & uVar29 | ~uVar29 & local_1ec0._8_4_;
        local_1ec0._12_4_ = uStack_1f64 & uVar31 | ~uVar31 & local_1ec0._12_4_;
        auVar52._4_4_ = uVar28 & (uint)fVar45;
        auVar52._0_4_ = uVar26 & (uint)fVar25;
        auVar51._0_4_ = ~uVar26 & (uint)local_1ed0._0_4_;
        auVar51._4_4_ = ~uVar28 & (uint)local_1ed0._4_4_;
        auVar51._8_4_ = ~uVar29 & (uint)local_1ed0._8_4_;
        auVar51._12_4_ = ~uVar31 & (uint)local_1ed0._12_4_;
        auVar52._8_4_ = uVar29 & (uint)fVar49;
        auVar52._12_4_ = uVar31 & (uint)fVar50;
        local_1f70 = __LC16 + local_1f70;
        uStack_1f6c = _UNK_0012fb84 + uStack_1f6c;
        uStack_1f68 = _UNK_0012fb88 + uStack_1f68;
        uStack_1f64 = _UNK_0012fb8c + uStack_1f64;
        local_1ed0 = auVar52 | auVar51;
        pBVar14 = pBVar14 + 0x60;
      } while (uVar23 * 0x10 != lVar13);
    }
  }
  lVar13 = 0;
  uVar22 = 0;
  lVar16 = -1;
  fVar25 = _LC3;
  do {
    if ((((&local_1e90)[lVar13] != 0.0) && (*(float *)(local_1ed0 + lVar13 * 4) < fVar25)) &&
       (*(int *)(local_1ec0 + lVar13 * 4) != 0)) {
      lVar16 = (long)(int)lVar13;
      uVar22 = (ulong)*(int *)(local_1ec0 + lVar13 * 4);
      fVar25 = *(float *)(local_1ed0 + lVar13 * 4);
    }
    lVar13 = lVar13 + 1;
  } while (lVar13 != 3);
  iVar41 = (int)lVar16;
  *(int *)(param_1 + 4) = iVar41;
  *(int *)(param_1 + 8) = (int)uVar22;
  *(undefined4 *)(param_1 + 0xc) = 0;
  *(ulong *)(param_1 + 0x10) = uVar23;
  *(float *)param_1 = fVar25;
  *(undefined8 *)(param_1 + 0x20) = uVar27;
  *(undefined8 *)(param_1 + 0x28) = uVar30;
  *(undefined8 *)(param_1 + 0x30) = uVar33;
  *(undefined8 *)(param_1 + 0x38) = uVar37;
  if (iVar41 == -1) {
    *in_R8 = 0;
    in_R8[1] = 0;
    *(undefined1 (*) [16])(in_R8 + 2) = auVar39;
    *(undefined1 (*) [16])(in_R8 + 4) = auVar40;
    *(undefined1 (*) [16])(in_R8 + 6) = auVar39;
    *(undefined1 (*) [16])(in_R8 + 8) = auVar40;
  }
  else {
    lVar13 = 0;
    auVar47 = auVar40;
    auVar34 = auVar39;
    if (uVar22 != 0) {
      lVar17 = (long)iVar41;
      lVar13 = 0;
      pauVar15 = (undefined1 (*) [16])(local_1c70 + lVar17 * 0x20);
      pBVar18 = local_1c80 + lVar17 * 4;
      do {
        pBVar14 = pBVar18 + 0x10;
        auVar34 = minps(auVar34,pauVar15[-1]);
        auVar47 = maxps(auVar47,*pauVar15);
        pauVar15 = pauVar15 + 6;
        lVar13 = lVar13 + (ulong)*(uint *)(pBVar18 + 0xc00);
        pBVar18 = pBVar14;
      } while (local_1c80 + (lVar17 + uVar22 * 4) * 4 != pBVar14);
    }
    if (uVar22 < uVar23) {
      pBVar18 = local_1c80 + (lVar16 + 0x300 + uVar22 * 4) * 4;
      lVar17 = 0;
      pauVar15 = (undefined1 (*) [16])(local_1c70 + (uVar22 * 3 + lVar16) * 0x20);
      do {
        uVar26 = *(uint *)pBVar18;
        pBVar18 = pBVar18 + 0x10;
        auVar39 = minps(auVar39,pauVar15[-1]);
        auVar40 = maxps(auVar40,*pauVar15);
        lVar17 = lVar17 + (ulong)uVar26;
        pauVar15 = pauVar15 + 6;
      } while (local_1080 + (lVar16 + uVar23 * 4) * 4 != pBVar18);
    }
    else {
      lVar17 = 0;
    }
    *in_R8 = lVar13;
    in_R8[1] = lVar17;
    *(undefined1 (*) [16])(in_R8 + 2) = auVar34;
    *(undefined1 (*) [16])(in_R8 + 4) = auVar47;
    *(undefined1 (*) [16])(in_R8 + 6) = auVar39;
    *(undefined1 (*) [16])(in_R8 + 8) = auVar40;
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> embree::parallel_reduce_internal<unsigned
   long, embree::sse2::SpatialBinInfo<16ul, embree::PrimRef>,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&)#2}>(unsigned long, unsigned long,
   unsigned long, unsigned long, embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&)#2} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&)_2_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,
                SpatialBinInfo_conflict *param_5,
                _lambda_embree__range<unsigned_long>_const___1_ *param_6,
                _lambda_embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const__embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const___2_
                *param_7)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  ulong uVar17;
  undefined8 *puVar18;
  undefined8 *puVar19;
  undefined8 *puVar20;
  undefined1 (*pauVar21) [16];
  undefined1 (*pauVar22) [16];
  undefined1 (*pauVar23) [16];
  _lambda_embree__range<unsigned_long>_const___1_ *p_Var24;
  ulong uVar25;
  _lambda_embree__range<unsigned_long>_const___1_ *__src;
  undefined1 (*pauVar26) [16];
  undefined1 (*pauVar27) [16];
  undefined1 (*pauVar28) [16];
  long lVar29;
  undefined1 (*pauVar30) [16];
  long in_FS_OFFSET;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 (*local_2928) [16];
  ulong local_2918;
  ulong local_2910;
  ulong local_2908;
  undefined8 **local_2900;
  ulong **local_28f8;
  ulong *local_28f0;
  ulong *local_28e8;
  ulong *local_28e0;
  undefined1 (*local_28d8) [16];
  _lambda_embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const__embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const___2_
  *local_28d0;
  undefined1 local_28c0 [1536];
  int local_22c0 [4];
  undefined8 local_22b0;
  undefined8 uStack_22a8;
  undefined8 local_22a0;
  undefined8 uStack_2298;
  undefined8 local_2290;
  undefined8 uStack_2288;
  undefined8 local_2280;
  undefined8 uStack_2278;
  undefined8 local_2270;
  undefined8 uStack_2268;
  undefined8 local_2260;
  undefined8 uStack_2258;
  undefined8 local_2250;
  undefined8 uStack_2248;
  undefined8 local_2240;
  undefined8 uStack_2238;
  undefined8 local_2230;
  undefined8 uStack_2228;
  undefined8 local_2220;
  undefined8 uStack_2218;
  undefined8 local_2210;
  undefined8 uStack_2208;
  undefined8 local_2200;
  undefined8 uStack_21f8;
  undefined8 local_21f0;
  undefined8 uStack_21e8;
  undefined8 local_21e0;
  undefined8 uStack_21d8;
  undefined8 local_21d0;
  undefined8 uStack_21c8;
  int local_21c0 [4];
  undefined8 local_21b0;
  undefined8 uStack_21a8;
  undefined8 local_21a0;
  undefined8 uStack_2198;
  undefined8 local_2190;
  undefined8 uStack_2188;
  undefined8 local_2180;
  undefined8 uStack_2178;
  undefined8 local_2170;
  undefined8 uStack_2168;
  undefined8 local_2160;
  undefined8 uStack_2158;
  undefined8 local_2150;
  undefined8 uStack_2148;
  undefined8 local_2140;
  undefined8 uStack_2138;
  undefined8 local_2130;
  undefined8 uStack_2128;
  undefined8 local_2120;
  undefined8 uStack_2118;
  undefined8 local_2110;
  undefined8 uStack_2108;
  undefined8 local_2100;
  undefined8 uStack_20f8;
  undefined8 local_20f0;
  undefined8 uStack_20e8;
  undefined8 local_20e0;
  undefined8 uStack_20d8;
  undefined8 local_20d0;
  undefined8 uStack_20c8;
  undefined1 local_20c0 [8192];
  undefined1 (*local_c0) [16];
  ulong local_b8;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2918 = param_4;
  local_2910 = param_3;
  local_2908 = param_2;
  uVar17 = embree::TaskScheduler::threadCount();
  if (0x200 < local_2908) {
    local_2908 = 0x200;
  }
  if (uVar17 < local_2908) {
    local_2908 = uVar17;
  }
  local_b8 = local_2908;
  if (local_2908 << 0xb < 0x2001) {
    local_c0 = (undefined1 (*) [16])local_20c0;
  }
  else {
    local_c0 = (undefined1 (*) [16])embree::alignedMalloc(local_2908 << 0xb,0x40);
  }
  local_2928 = (undefined1 (*) [16])local_20c0;
  local_28f0 = &local_2910;
  local_28d0 = param_7;
  local_28e8 = &local_2918;
  local_28e0 = &local_2908;
  local_28d8 = local_2928;
  if (local_2908 != 0) {
    local_28f8 = &local_28f0;
    local_2900 = (ulong **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_4sse214SpatialBinInfoILm16ENS_7PrimRefEEEZNS4_24HeuristicArraySpatialSAHINS4_23TriangleSplitterFactoryES6_Lm32ELm16EE21parallel_spatial_findERKNS4_16PrimInfoExtRangeEmEUlRKNS_5rangeImEEE_ZNSA_21parallel_spatial_findESD_mEUlRKS7_SK_E0_EET0_T_SN_SN_SN_RKSM_RKT1_RKT2_EUlmE_EEvSN_SP_EUlSH_E_EEvSN_SN_SN_SP_PNS0_16TaskGroupContextE
              (0,local_2908,1,&local_28f8,&local_2900);
    embree::TaskScheduler::wait();
    if (local_2900 != (ulong **)0x0) {
      local_28f8 = local_2900;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_28f8);
    }
  }
  uVar17 = local_2908;
  puVar20 = (undefined8 *)(param_1 + 0x60);
  __src = param_6;
  do {
    puVar18 = puVar20 + -0xc;
    p_Var24 = __src;
    do {
      uVar12 = *(undefined8 *)(p_Var24 + 8);
      puVar19 = puVar18 + 4;
      *puVar18 = *(undefined8 *)p_Var24;
      puVar18[1] = uVar12;
      uVar12 = *(undefined8 *)(p_Var24 + 0x18);
      puVar18[2] = *(undefined8 *)(p_Var24 + 0x10);
      puVar18[3] = uVar12;
      puVar18 = puVar19;
      p_Var24 = p_Var24 + 0x20;
    } while (puVar20 != puVar19);
    __src = __src + 0x60;
    puVar20 = puVar20 + 0xc;
  } while (__src != param_6 + 0x600);
  memmove((undefined8 *)(param_1 + 0x600),__src,0x100);
  puVar20 = (undefined8 *)memmove((void *)(param_1 + 0x700),param_6 + 0x700,0x100);
  uVar16 = _LC3;
  uVar15 = _LC1;
  if (uVar17 != 0) {
    pauVar21 = (undefined1 (*) [16])local_22c0;
    pauVar22 = (undefined1 (*) [16])local_28c0;
    pauVar30 = local_c0;
    do {
      do {
        *(undefined4 *)pauVar22[4] = uVar16;
        *(undefined4 *)(pauVar22[4] + 4) = uVar16;
        *(undefined4 *)(pauVar22[4] + 8) = uVar16;
        *(undefined4 *)(pauVar22[4] + 0xc) = uVar16;
        pauVar26 = pauVar22 + 6;
        *(undefined4 *)pauVar22[5] = uVar15;
        *(undefined4 *)(pauVar22[5] + 4) = uVar15;
        *(undefined4 *)(pauVar22[5] + 8) = uVar15;
        *(undefined4 *)(pauVar22[5] + 0xc) = uVar15;
        *(undefined4 *)pauVar22[2] = uVar16;
        *(undefined4 *)(pauVar22[2] + 4) = uVar16;
        *(undefined4 *)(pauVar22[2] + 8) = uVar16;
        *(undefined4 *)(pauVar22[2] + 0xc) = uVar16;
        *(undefined4 *)pauVar22[3] = uVar15;
        *(undefined4 *)(pauVar22[3] + 4) = uVar15;
        *(undefined4 *)(pauVar22[3] + 8) = uVar15;
        *(undefined4 *)(pauVar22[3] + 0xc) = uVar15;
        *(undefined4 *)*pauVar22 = uVar16;
        *(undefined4 *)(*pauVar22 + 4) = uVar16;
        *(undefined4 *)(*pauVar22 + 8) = uVar16;
        *(undefined4 *)(*pauVar22 + 0xc) = uVar16;
        *(undefined4 *)pauVar22[1] = uVar15;
        *(undefined4 *)(pauVar22[1] + 4) = uVar15;
        *(undefined4 *)(pauVar22[1] + 8) = uVar15;
        *(undefined4 *)(pauVar22[1] + 0xc) = uVar15;
        pauVar21[0x10] = (undefined1  [16])0x0;
        *pauVar21 = (undefined1  [16])0x0;
        pauVar21 = pauVar21 + 1;
        pauVar22 = pauVar26;
      } while (pauVar26 != (undefined1 (*) [16])local_22c0);
      lVar29 = 0x600;
      pauVar21 = (undefined1 (*) [16])local_28c0;
      pauVar22 = pauVar30;
      pauVar26 = (undefined1 (*) [16])param_1;
      pauVar27 = (undefined1 (*) [16])local_22c0;
      do {
        auVar32 = minps(*pauVar26,*pauVar22);
        pauVar28 = pauVar27 + 1;
        piVar1 = (int *)(param_1 + lVar29);
        iVar3 = piVar1[1];
        iVar4 = piVar1[2];
        iVar5 = piVar1[3];
        piVar2 = (int *)(*pauVar30 + lVar29);
        iVar6 = piVar2[1];
        iVar7 = piVar2[2];
        iVar8 = piVar2[3];
        iVar9 = *(int *)(*pauVar27 + 4);
        iVar10 = *(int *)(*pauVar27 + 8);
        iVar11 = *(int *)(*pauVar27 + 0xc);
        *(int *)*pauVar27 = *piVar1 + *piVar2 + *(int *)*pauVar27;
        *(int *)(*pauVar27 + 4) = iVar3 + iVar6 + iVar9;
        *(int *)(*pauVar27 + 8) = iVar4 + iVar7 + iVar10;
        *(int *)(*pauVar27 + 0xc) = iVar5 + iVar8 + iVar11;
        piVar1 = (int *)(param_1 + 0x100 + lVar29);
        iVar3 = piVar1[1];
        iVar4 = piVar1[2];
        iVar5 = piVar1[3];
        piVar2 = (int *)(pauVar30[0x10] + lVar29);
        iVar6 = piVar2[1];
        iVar7 = piVar2[2];
        iVar8 = piVar2[3];
        lVar29 = lVar29 + 0x10;
        iVar9 = *(int *)(pauVar27[0x10] + 4);
        iVar10 = *(int *)(pauVar27[0x10] + 8);
        iVar11 = *(int *)(pauVar27[0x10] + 0xc);
        *(int *)pauVar27[0x10] = *piVar1 + *piVar2 + *(int *)pauVar27[0x10];
        *(int *)(pauVar27[0x10] + 4) = iVar3 + iVar6 + iVar9;
        *(int *)(pauVar27[0x10] + 8) = iVar4 + iVar7 + iVar10;
        *(int *)(pauVar27[0x10] + 0xc) = iVar5 + iVar8 + iVar11;
        auVar31 = maxps(pauVar26[1],pauVar22[1]);
        *pauVar21 = auVar32;
        auVar32 = minps(pauVar26[2],pauVar22[2]);
        pauVar21[1] = auVar31;
        auVar31 = maxps(pauVar26[3],pauVar22[3]);
        pauVar21[2] = auVar32;
        auVar32 = minps(pauVar26[4],pauVar22[4]);
        pauVar21[3] = auVar31;
        auVar31 = maxps(pauVar26[5],pauVar22[5]);
        pauVar21[4] = auVar32;
        pauVar21[5] = auVar31;
        pauVar21 = pauVar21 + 6;
        pauVar23 = (undefined1 (*) [16])local_28c0;
        pauVar22 = pauVar22 + 6;
        uVar25 = param_1;
        pauVar26 = pauVar26 + 6;
        pauVar27 = pauVar28;
      } while ((undefined1 (*) [16])local_21c0 != pauVar28);
      do {
        lVar29 = 0;
        do {
          uVar12 = *(undefined8 *)((long)(*pauVar23 + lVar29) + 8);
          uVar13 = *(undefined8 *)(pauVar23[1] + lVar29);
          uVar14 = *(undefined8 *)((long)(pauVar23[1] + lVar29) + 8);
          *(undefined8 *)(uVar25 + lVar29) = *(undefined8 *)(*pauVar23 + lVar29);
          ((undefined8 *)(uVar25 + lVar29))[1] = uVar12;
          puVar18 = (undefined8 *)(uVar25 + 0x10 + lVar29);
          *puVar18 = uVar13;
          puVar18[1] = uVar14;
          lVar29 = lVar29 + 0x20;
        } while (lVar29 != 0x60);
        pauVar23 = pauVar23 + 6;
        uVar25 = uVar25 + 0x60;
      } while (pauVar23 != (undefined1 (*) [16])local_22c0);
      pauVar30 = pauVar30 + 0x80;
      *(undefined8 *)(param_1 + 0x600) = local_22c0._0_8_;
      *(undefined8 *)(param_1 + 0x608) = local_22c0._8_8_;
      *(undefined8 *)(param_1 + 0x610) = local_22b0;
      *(undefined8 *)(param_1 + 0x618) = uStack_22a8;
      *(undefined8 *)(param_1 + 0x620) = local_22a0;
      *(undefined8 *)(param_1 + 0x628) = uStack_2298;
      *(undefined8 *)(param_1 + 0x630) = local_2290;
      *(undefined8 *)(param_1 + 0x638) = uStack_2288;
      *(undefined8 *)(param_1 + 0x640) = local_2280;
      *(undefined8 *)(param_1 + 0x648) = uStack_2278;
      *(undefined8 *)(param_1 + 0x650) = local_2270;
      *(undefined8 *)(param_1 + 0x658) = uStack_2268;
      *(undefined8 *)(param_1 + 0x660) = local_2260;
      *(undefined8 *)(param_1 + 0x668) = uStack_2258;
      *(undefined8 *)(param_1 + 0x670) = local_2250;
      *(undefined8 *)(param_1 + 0x678) = uStack_2248;
      *(undefined8 *)(param_1 + 0x680) = local_2240;
      *(undefined8 *)(param_1 + 0x688) = uStack_2238;
      *(undefined8 *)(param_1 + 0x690) = local_2230;
      *(undefined8 *)(param_1 + 0x698) = uStack_2228;
      *(undefined8 *)(param_1 + 0x6a0) = local_2220;
      *(undefined8 *)(param_1 + 0x6a8) = uStack_2218;
      *(undefined8 *)(param_1 + 0x6b0) = local_2210;
      *(undefined8 *)(param_1 + 0x6b8) = uStack_2208;
      *(undefined8 *)(param_1 + 0x6c0) = local_2200;
      *(undefined8 *)(param_1 + 0x6c8) = uStack_21f8;
      *(undefined8 *)(param_1 + 0x6d0) = local_21f0;
      *(undefined8 *)(param_1 + 0x6d8) = uStack_21e8;
      *(undefined8 *)(param_1 + 0x6e0) = local_21e0;
      *(undefined8 *)(param_1 + 0x6e8) = uStack_21d8;
      *(undefined8 *)(param_1 + 0x6f0) = local_21d0;
      *(undefined8 *)(param_1 + 0x6f8) = uStack_21c8;
      *puVar20 = local_21c0._0_8_;
      puVar20[1] = local_21c0._8_8_;
      puVar20[2] = local_21b0;
      puVar20[3] = uStack_21a8;
      puVar20[4] = local_21a0;
      puVar20[5] = uStack_2198;
      puVar20[6] = local_2190;
      puVar20[7] = uStack_2188;
      puVar20[8] = local_2180;
      puVar20[9] = uStack_2178;
      puVar20[10] = local_2170;
      puVar20[0xb] = uStack_2168;
      puVar20[0xc] = local_2160;
      puVar20[0xd] = uStack_2158;
      puVar20[0xe] = local_2150;
      puVar20[0xf] = uStack_2148;
      puVar20[0x10] = local_2140;
      puVar20[0x11] = uStack_2138;
      puVar20[0x12] = local_2130;
      puVar20[0x13] = uStack_2128;
      puVar20[0x14] = local_2120;
      puVar20[0x15] = uStack_2118;
      puVar20[0x16] = local_2110;
      puVar20[0x17] = uStack_2108;
      puVar20[0x18] = local_2100;
      puVar20[0x19] = uStack_20f8;
      puVar20[0x1a] = local_20f0;
      puVar20[0x1b] = uStack_20e8;
      puVar20[0x1c] = local_20e0;
      puVar20[0x1d] = uStack_20d8;
      puVar20[0x1e] = local_20d0;
      puVar20[0x1f] = uStack_20c8;
      pauVar21 = (undefined1 (*) [16])local_22c0;
      pauVar22 = (undefined1 (*) [16])local_28c0;
    } while (local_c0 + uVar17 * 0x80 != pauVar30);
  }
  if (local_c0 != local_2928) {
    embree::alignedFree(local_c0);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned long) */

HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *
__thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_spatial_find
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,PrimInfoExtRange *param_1,ulong param_2)

{
  ulong uVar1;
  ulong uVar2;
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  _lambda_embree__range<unsigned_long>_const___1_ *p_Var8;
  long lVar9;
  _lambda_embree__range<unsigned_long>_const___1_ *p_Var10;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var11;
  ulong uVar12;
  _lambda_embree__range<unsigned_long>_const___1_ *p_Var13;
  long in_FS_OFFSET;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar23;
  float fVar24;
  undefined1 auVar19 [16];
  undefined1 auVar20 [16];
  float fVar25;
  undefined1 auVar21 [16];
  undefined1 auVar22 [16];
  undefined1 auVar26 [16];
  PrimInfoExtRange *local_10d0;
  float *local_10c8;
  ulong local_10c0;
  ulong local_10b8;
  float local_10b0;
  float fStack_10ac;
  float fStack_10a8;
  float fStack_10a4;
  uint local_10a0;
  uint uStack_109c;
  uint uStack_1098;
  uint uStack_1094;
  undefined1 local_1090 [16];
  _lambda_embree__range<unsigned_long>_const___1_ local_1080 [1536];
  undefined8 local_a80;
  undefined8 uStack_a78;
  undefined8 local_a70;
  undefined8 uStack_a68;
  undefined8 local_a60;
  undefined8 uStack_a58;
  undefined8 local_a50;
  undefined8 uStack_a48;
  undefined8 local_a40;
  undefined8 uStack_a38;
  undefined8 local_a30;
  undefined8 uStack_a28;
  undefined8 local_a20;
  undefined8 uStack_a18;
  undefined8 local_a10;
  undefined8 uStack_a08;
  undefined8 local_a00;
  undefined8 uStack_9f8;
  undefined8 local_9f0;
  undefined8 uStack_9e8;
  undefined8 local_9e0;
  undefined8 uStack_9d8;
  undefined8 local_9d0;
  undefined8 uStack_9c8;
  undefined8 local_9c0;
  undefined8 uStack_9b8;
  undefined8 local_9b0;
  undefined8 uStack_9a8;
  undefined8 local_9a0;
  undefined8 uStack_998;
  undefined8 local_990;
  undefined8 uStack_988;
  undefined8 local_980;
  undefined8 uStack_978;
  undefined8 local_970;
  undefined8 uStack_968;
  undefined8 local_960;
  undefined8 uStack_958;
  undefined8 local_950;
  undefined8 uStack_948;
  undefined8 local_940;
  undefined8 uStack_938;
  undefined8 local_930;
  undefined8 uStack_928;
  undefined8 local_920;
  undefined8 uStack_918;
  undefined8 local_910;
  undefined8 uStack_908;
  undefined8 local_900;
  undefined8 uStack_8f8;
  undefined8 local_8f0;
  undefined8 uStack_8e8;
  undefined8 local_8e0;
  undefined8 uStack_8d8;
  undefined8 local_8d0;
  undefined8 uStack_8c8;
  undefined8 local_8c0;
  undefined8 uStack_8b8;
  undefined8 local_8b0;
  undefined8 uStack_8a8;
  undefined8 local_8a0;
  undefined8 uStack_898;
  undefined8 local_890;
  undefined8 uStack_888;
  _lambda_embree__range<unsigned_long>const___1_ local_880 [1536];
  undefined8 local_280;
  undefined8 uStack_278;
  undefined8 local_270;
  undefined8 uStack_268;
  undefined8 local_260;
  undefined8 uStack_258;
  undefined8 local_250;
  undefined8 uStack_248;
  undefined8 local_240;
  undefined8 uStack_238;
  undefined8 local_230;
  undefined8 uStack_228;
  undefined8 local_220;
  undefined8 uStack_218;
  undefined8 local_210;
  undefined8 uStack_208;
  undefined8 local_200;
  undefined8 uStack_1f8;
  undefined8 local_1f0;
  undefined8 uStack_1e8;
  undefined8 local_1e0;
  undefined8 uStack_1d8;
  undefined8 local_1d0;
  undefined8 uStack_1c8;
  undefined8 local_1c0;
  undefined8 uStack_1b8;
  undefined8 local_1b0;
  undefined8 uStack_1a8;
  undefined8 local_1a0;
  undefined8 uStack_198;
  undefined8 local_190;
  undefined8 uStack_188;
  undefined8 local_180;
  undefined8 uStack_178;
  undefined8 local_170;
  undefined8 uStack_168;
  undefined8 local_160;
  undefined8 uStack_158;
  undefined8 local_150;
  undefined8 uStack_148;
  undefined8 local_140;
  undefined8 uStack_138;
  undefined8 local_130;
  undefined8 uStack_128;
  undefined8 local_120;
  undefined8 uStack_118;
  undefined8 local_110;
  undefined8 uStack_108;
  undefined8 local_100;
  undefined8 uStack_f8;
  undefined8 local_f0;
  undefined8 uStack_e8;
  undefined8 local_e0;
  undefined8 uStack_d8;
  undefined8 local_d0;
  undefined8 uStack_c8;
  undefined8 local_c0;
  undefined8 uStack_b8;
  undefined8 local_b0;
  undefined8 uStack_a8;
  undefined8 local_a0;
  undefined8 uStack_98;
  undefined8 local_90;
  undefined8 uStack_88;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  p_Var13 = local_1080;
  p_Var10 = (_lambda_embree__range<unsigned_long>_const___1_ *)&local_a80;
  do {
    *(undefined4 *)(p_Var13 + 0x40) = _LC3;
    *(undefined4 *)(p_Var13 + 0x44) = _LC3;
    *(undefined4 *)(p_Var13 + 0x48) = _LC3;
    *(undefined4 *)(p_Var13 + 0x4c) = _LC3;
    p_Var8 = p_Var13 + 0x60;
    *(undefined4 *)(p_Var13 + 0x50) = _LC1;
    *(undefined4 *)(p_Var13 + 0x54) = _LC1;
    *(undefined4 *)(p_Var13 + 0x58) = _LC1;
    *(undefined4 *)(p_Var13 + 0x5c) = _LC1;
    *(undefined4 *)(p_Var13 + 0x20) = _LC3;
    *(undefined4 *)(p_Var13 + 0x24) = _LC3;
    *(undefined4 *)(p_Var13 + 0x28) = _LC3;
    *(undefined4 *)(p_Var13 + 0x2c) = _LC3;
    *(undefined4 *)(p_Var13 + 0x30) = _LC1;
    *(undefined4 *)(p_Var13 + 0x34) = _LC1;
    *(undefined4 *)(p_Var13 + 0x38) = _LC1;
    *(undefined4 *)(p_Var13 + 0x3c) = _LC1;
    *(undefined4 *)p_Var13 = _LC3;
    *(undefined4 *)(p_Var13 + 4) = _LC3;
    *(undefined4 *)(p_Var13 + 8) = _LC3;
    *(undefined4 *)(p_Var13 + 0xc) = _LC3;
    *(undefined4 *)(p_Var13 + 0x10) = _LC1;
    *(undefined4 *)(p_Var13 + 0x14) = _LC1;
    *(undefined4 *)(p_Var13 + 0x18) = _LC1;
    *(undefined4 *)(p_Var13 + 0x1c) = _LC1;
    *(undefined1 (*) [16])(p_Var10 + 0x100) = (undefined1  [16])0x0;
    *(undefined1 (*) [16])p_Var10 = (undefined1  [16])0x0;
    p_Var13 = p_Var8;
    p_Var10 = p_Var10 + 0x10;
  } while (p_Var8 != (_lambda_embree__range<unsigned_long>_const___1_ *)&local_a80);
  local_10b0 = *(float *)param_2;
  fStack_10ac = *(float *)(param_2 + 4);
  fStack_10a8 = *(float *)(param_2 + 8);
  fStack_10a4 = *(float *)(param_2 + 0xc);
  local_10c8 = &local_10b0;
  uVar1 = *(ulong *)(param_2 + 0x48);
  auVar19._0_4_ = _LC20 & (uint)local_10b0;
  auVar19._4_4_ = _LC20 & (uint)fStack_10ac;
  auVar19._8_4_ = _LC20 & (uint)fStack_10a8;
  auVar19._12_4_ = _LC20 & (uint)fStack_10a4;
  auVar20._4_4_ = *(uint *)(param_2 + 0x14) & _LC20;
  auVar20._0_4_ = *(uint *)(param_2 + 0x10) & _LC20;
  auVar20._8_4_ = *(uint *)(param_2 + 0x18) & _LC20;
  auVar20._12_4_ = *(uint *)(param_2 + 0x1c) & _LC20;
  auVar20 = maxps(auVar19,auVar20);
  fVar18 = auVar20._0_4_ * _LC39;
  fVar23 = auVar20._4_4_ * _LC39;
  auVar26._4_4_ = fVar23;
  auVar26._0_4_ = fVar18;
  fVar24 = auVar20._8_4_ * _LC39;
  fVar25 = auVar20._12_4_ * _LC39;
  uVar2 = *(ulong *)(param_2 + 0x40);
  fVar14 = *(float *)(param_2 + 0x10) - local_10b0;
  fVar15 = *(float *)(param_2 + 0x14) - fStack_10ac;
  fVar16 = *(float *)(param_2 + 0x18) - fStack_10a8;
  fVar17 = *(float *)(param_2 + 0x1c) - fStack_10a4;
  uVar12 = (uVar1 + 0x3ff) - uVar2 >> 10;
  auVar26._8_4_ = fVar24;
  auVar26._12_4_ = fVar25;
  auVar3._4_4_ = fVar15;
  auVar3._0_4_ = fVar14;
  auVar3._8_4_ = fVar16;
  auVar3._12_4_ = fVar17;
  auVar20 = maxps(auVar26,auVar3);
  auVar21._4_4_ = _LC41;
  auVar21._0_4_ = _LC41;
  auVar21._8_4_ = _LC41;
  auVar21._12_4_ = _LC41;
  auVar20 = divps(auVar21,auVar20);
  local_10a0 = ~-(uint)(fVar14 <= fVar18) & auVar20._0_4_;
  uStack_109c = ~-(uint)(fVar15 <= fVar23) & auVar20._4_4_;
  uStack_1098 = ~-(uint)(fVar16 <= fVar24) & auVar20._8_4_;
  uStack_1094 = ~-(uint)(fVar17 <= fVar25) & auVar20._12_4_;
  auVar22._4_4_ = _LC30;
  auVar22._0_4_ = _LC30;
  auVar22._8_4_ = _LC30;
  auVar22._12_4_ = _LC30;
  auVar4._4_4_ = uStack_109c;
  auVar4._0_4_ = local_10a0;
  auVar4._8_4_ = uStack_1098;
  auVar4._12_4_ = uStack_1094;
  local_1090 = divps(auVar22,auVar4);
  local_10d0 = param_1;
  if (uVar12 == 1) {
    local_10c0 = uVar2;
    local_10b8 = uVar1;
    parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::
    {lambda(embree::range<unsigned_long>const&)#1}::operator()(local_880,(range *)&local_10d0);
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&)_2_>
              ((ulong)local_880,uVar12,uVar2,uVar1,(SpatialBinInfo_conflict *)0x400,local_1080,
               (_lambda_embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const__embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const___2_
                *)&local_10d0);
  }
  p_Var11 = local_880;
  p_Var13 = local_1080;
  do {
    lVar9 = 0;
    do {
      uVar5 = *(undefined8 *)(p_Var11 + lVar9 + 8);
      uVar6 = *(undefined8 *)(p_Var11 + lVar9 + 0x10);
      uVar7 = *(undefined8 *)(p_Var11 + lVar9 + 0x10 + 8);
      *(undefined8 *)(p_Var13 + lVar9) = *(undefined8 *)(p_Var11 + lVar9);
      *(undefined8 *)(p_Var13 + lVar9 + 8) = uVar5;
      *(undefined8 *)(p_Var13 + lVar9 + 0x10) = uVar6;
      *(undefined8 *)(p_Var13 + lVar9 + 0x10 + 8) = uVar7;
      lVar9 = lVar9 + 0x20;
    } while (lVar9 != 0x60);
    p_Var11 = p_Var11 + 0x60;
    p_Var13 = p_Var13 + 0x60;
  } while (p_Var11 != (_lambda_embree__range<unsigned_long>const___1_ *)&local_280);
  local_a80 = local_280;
  uStack_a78 = uStack_278;
  local_a70 = local_270;
  uStack_a68 = uStack_268;
  local_a60 = local_260;
  uStack_a58 = uStack_258;
  local_a50 = local_250;
  uStack_a48 = uStack_248;
  local_a40 = local_240;
  uStack_a38 = uStack_238;
  local_a30 = local_230;
  uStack_a28 = uStack_228;
  local_a20 = local_220;
  uStack_a18 = uStack_218;
  local_a10 = local_210;
  uStack_a08 = uStack_208;
  local_a00 = local_200;
  uStack_9f8 = uStack_1f8;
  local_9f0 = local_1f0;
  uStack_9e8 = uStack_1e8;
  local_9e0 = local_1e0;
  uStack_9d8 = uStack_1d8;
  local_9d0 = local_1d0;
  uStack_9c8 = uStack_1c8;
  local_9c0 = local_1c0;
  uStack_9b8 = uStack_1b8;
  local_9a0 = local_1a0;
  uStack_998 = uStack_198;
  local_990 = local_190;
  uStack_988 = uStack_188;
  local_9b0 = local_1b0;
  uStack_9a8 = uStack_1a8;
  local_980 = local_180;
  uStack_978 = uStack_178;
  local_970 = local_170;
  uStack_968 = uStack_168;
  local_960 = local_160;
  uStack_958 = uStack_158;
  local_950 = local_150;
  uStack_948 = uStack_148;
  local_940 = local_140;
  uStack_938 = uStack_138;
  local_930 = local_130;
  uStack_928 = uStack_128;
  local_920 = local_120;
  uStack_918 = uStack_118;
  local_910 = local_110;
  uStack_908 = uStack_108;
  local_900 = local_100;
  uStack_8f8 = uStack_f8;
  local_8f0 = local_f0;
  uStack_8e8 = uStack_e8;
  local_8e0 = local_e0;
  uStack_8d8 = uStack_d8;
  local_8d0 = local_d0;
  uStack_8c8 = uStack_c8;
  local_8c0 = local_c0;
  uStack_8b8 = uStack_b8;
  local_8b0 = local_b0;
  uStack_8a8 = uStack_a8;
  local_8a0 = local_a0;
  uStack_898 = uStack_98;
  local_890 = local_90;
  uStack_888 = uStack_88;
  SpatialBinInfo<16ul,embree::PrimRef>::best((SpatialBinMapping *)this,(ulong)local_1080);
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return this;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::find(embree::sse2::PrimInfoExtRange const&, unsigned long) */

HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *
__thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::find
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,PrimInfoExtRange *param_1,ulong param_2)

{
  float *pfVar1;
  undefined1 auVar2 [16];
  uint uVar3;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  undefined4 uVar4;
  uint uVar5;
  long lVar6;
  long in_FS_OFFSET;
  float fVar7;
  float fVar8;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  undefined1 auVar9 [16];
  undefined1 auVar14 [16];
  float fVar15;
  float fVar16;
  undefined1 auVar17 [16];
  float fVar18;
  undefined1 local_108 [16];
  undefined1 local_f8 [16];
  undefined1 local_e8 [16];
  undefined1 local_d8 [16];
  float local_c8;
  undefined4 local_c4;
  undefined4 local_c0;
  undefined4 local_bc;
  undefined8 local_b8;
  undefined8 local_a8;
  undefined8 uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  float local_88;
  undefined8 local_84;
  int local_7c;
  int local_78;
  undefined4 local_74;
  undefined8 local_68;
  undefined8 uStack_60;
  undefined8 local_58;
  undefined8 uStack_50;
  undefined8 local_48;
  undefined8 uStack_40;
  long local_30;
  
  lVar6 = *(long *)(param_2 + 0x48);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if ((ulong)(lVar6 - *(long *)(param_2 + 0x40)) < 0xc00) {
    sequential_object_find((PrimInfoExtRange *)&local_c8,*(ulong *)param_1,(SplitInfoT *)param_2);
    fVar7 = local_c8;
    uVar4 = extraout_EDX;
    if (*(long *)(param_2 + 0x50) != lVar6) {
LAB_00121c5e:
      auVar14 = maxps(local_108,local_e8);
      auVar9 = minps(local_f8,local_d8);
      pfVar1 = *(float **)(param_1 + 0x10);
      auVar17._4_4_ = -(uint)(auVar14._4_4_ <= auVar9._4_4_);
      auVar17._0_4_ = -(uint)(auVar14._0_4_ <= auVar9._0_4_);
      auVar17._8_4_ = -(uint)(auVar14._8_4_ <= auVar9._8_4_);
      auVar17._12_4_ = -(uint)(auVar14._12_4_ <= auVar9._12_4_);
      uVar5 = movmskps(uVar4,auVar17);
      auVar2._4_4_ = -(uint)(pfVar1[1] <= pfVar1[5]);
      auVar2._0_4_ = -(uint)(*pfVar1 <= pfVar1[4]);
      auVar2._8_4_ = -(uint)(pfVar1[2] <= pfVar1[6]);
      auVar2._12_4_ = -(uint)(pfVar1[3] <= pfVar1[7]);
      uVar3 = movmskps((int)pfVar1,auVar2);
      uVar3 = uVar3 & 7;
      local_c8 = fVar7;
      if ((~uVar5 & 7) == 0) {
        fVar10 = auVar9._4_4_ - auVar14._4_4_;
        fVar12 = auVar9._8_4_ - auVar14._8_4_;
        fVar15 = 0.0;
        fVar10 = (fVar10 + fVar12) * (auVar9._0_4_ - auVar14._0_4_) + fVar10 * fVar12;
        fVar10 = fVar10 + fVar10;
        if (uVar3 == 7) {
LAB_00121d09:
          fVar15 = pfVar1[5] - pfVar1[1];
          fVar12 = pfVar1[6] - pfVar1[2];
          fVar15 = (fVar15 + fVar12) * (pfVar1[4] - *pfVar1) + fVar15 * fVar12;
          fVar15 = (fVar15 + fVar15) * __LC53;
        }
        if (fVar15 <= fVar10) {
          fVar15 = *(float *)param_2;
          fVar12 = *(float *)(param_2 + 4);
          fVar18 = *(float *)(param_2 + 8);
          fVar8 = *(float *)(param_2 + 0x10);
          fVar11 = *(float *)(param_2 + 0x14);
          fVar13 = *(float *)(param_2 + 0x18);
          auVar14._4_4_ = -(uint)(fVar12 <= fVar11);
          auVar14._0_4_ = -(uint)(fVar15 <= fVar8);
          auVar14._8_4_ = -(uint)(fVar18 <= fVar13);
          auVar14._12_4_ = -(uint)(*(float *)(param_2 + 0xc) <= *(float *)(param_2 + 0x1c));
          uVar3 = movmskps(uVar3,auVar14);
          fVar16 = 0.0;
          if ((~uVar3 & 7) == 0) {
LAB_00121d5c:
            fVar15 = ((fVar11 - fVar12) + (fVar13 - fVar18)) * (fVar8 - fVar15) +
                     (fVar11 - fVar12) * (fVar13 - fVar18);
            fVar16 = (fVar15 + fVar15) * __LC54;
          }
          if (fVar16 <= fVar10) goto LAB_00121d94;
        }
      }
      else {
        if (uVar3 == 7) {
          fVar10 = 0.0;
          goto LAB_00121d09;
        }
        fVar15 = *(float *)param_2;
        fVar12 = *(float *)(param_2 + 4);
        fVar18 = *(float *)(param_2 + 8);
        fVar8 = *(float *)(param_2 + 0x10);
        fVar11 = *(float *)(param_2 + 0x14);
        fVar13 = *(float *)(param_2 + 0x18);
        auVar9._4_4_ = -(uint)(fVar12 <= fVar11);
        auVar9._0_4_ = -(uint)(fVar15 <= fVar8);
        auVar9._8_4_ = -(uint)(fVar18 <= fVar13);
        auVar9._12_4_ = -(uint)(*(float *)(param_2 + 0xc) <= *(float *)(param_2 + 0x1c));
        uVar3 = movmskps(uVar3,auVar9);
        fVar10 = 0.0;
        if ((~uVar3 & 7) == 0) goto LAB_00121d5c;
LAB_00121d94:
        if ((ulong)(lVar6 - *(long *)(param_2 + 0x40)) < 0xc00) {
          sequential_spatial_find((PrimInfoExtRange *)&local_88,*(ulong *)param_1);
        }
        else {
          parallel_spatial_find
                    ((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                      *)&local_88,param_1,param_2);
        }
        if ((local_88 < _LC10 * fVar7) &&
           ((ulong)(((long)(local_7c + local_78) + *(long *)(param_2 + 0x40)) -
                   *(long *)(param_2 + 0x48)) <=
            (ulong)(*(long *)(param_2 + 0x50) - *(long *)(param_2 + 0x48)))) {
          this[0x50] = (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                        )0x1;
          *(int *)(this + 0xc) = local_7c;
          *(undefined8 *)(this + 0x20) = local_68;
          *(undefined8 *)(this + 0x28) = uStack_60;
          *(undefined8 *)(this + 4) = local_84;
          *(undefined8 *)(this + 0x30) = local_58;
          *(undefined8 *)(this + 0x38) = uStack_50;
          *(int *)(this + 0x10) = local_78;
          *(float *)(this + 0x54) = local_88;
          *(float *)this = local_88;
          *(undefined4 *)(this + 0x14) = local_74;
          *(undefined8 *)(this + 0x40) = local_48;
          *(undefined8 *)(this + 0x48) = uStack_40;
          goto LAB_00121c0e;
        }
      }
    }
  }
  else {
    parallel_object_find((PrimInfoExtRange *)&local_c8,(ulong)param_1,(SplitInfoT *)param_2);
    lVar6 = *(long *)(param_2 + 0x48);
    fVar7 = local_c8;
    uVar4 = extraout_EDX_00;
    if (*(long *)(param_2 + 0x50) != lVar6) goto LAB_00121c5e;
  }
  this[0x50] = (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                )0x0;
  *(float *)(this + 0x54) = local_c8;
  *(undefined4 *)(this + 4) = local_c4;
  *(float *)this = local_c8;
  *(undefined4 *)(this + 8) = local_c0;
  *(undefined8 *)(this + 0x20) = local_a8;
  *(undefined8 *)(this + 0x28) = uStack_a0;
  *(undefined4 *)(this + 0xc) = local_bc;
  *(undefined8 *)(this + 0x30) = local_98;
  *(undefined8 *)(this + 0x38) = uStack_90;
  *(undefined8 *)(this + 0x10) = local_b8;
LAB_00121c0e:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::recurse(ulong *param_1,long *param_2,char param_3)

{
  MutexSys *pMVar1;
  undefined8 *puVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  long lVar6;
  long lVar7;
  undefined8 *puVar8;
  float *pfVar9;
  long *plVar10;
  undefined8 *puVar11;
  undefined8 uVar12;
  ulong uVar13;
  long lVar14;
  long *plVar15;
  ulong uVar16;
  undefined8 *puVar17;
  ulong uVar18;
  long lVar19;
  long in_FS_OFFSET;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  float fVar25;
  undefined4 uVar26;
  undefined4 uVar27;
  undefined4 uVar28;
  undefined4 uVar29;
  FastAllocator *in_stack_00000008;
  MutexSys *in_stack_00000010;
  long *local_a98;
  MutexSys *local_a80;
  FastAllocator *local_a78;
  MutexSys *local_a38;
  MutexSys *pMStack_a28;
  long local_a20;
  undefined8 uStack_a18;
  undefined8 local_a10;
  undefined8 uStack_a08;
  undefined8 local_a00;
  undefined8 uStack_9f8;
  undefined8 local_9f0;
  undefined8 uStack_9e8;
  long local_9e0;
  long local_9d8;
  undefined8 local_9d0;
  undefined8 local_9c0;
  undefined8 uStack_9b8;
  undefined8 local_9b0;
  undefined8 uStack_9a8;
  undefined8 local_9a0;
  undefined8 uStack_998;
  undefined8 local_990;
  undefined8 uStack_988;
  undefined8 local_980;
  undefined8 local_978;
  undefined8 local_970;
  MutexSys *local_960;
  undefined1 local_958;
  undefined4 local_950;
  undefined4 uStack_94c;
  undefined4 uStack_948;
  undefined4 uStack_944;
  float local_940;
  float fStack_93c;
  float fStack_938;
  float fStack_934;
  undefined4 local_930;
  undefined4 uStack_92c;
  undefined4 uStack_928;
  undefined4 uStack_924;
  float local_920;
  float fStack_91c;
  float fStack_918;
  float fStack_914;
  long local_910;
  long lStack_908;
  long local_900;
  MutexSys *local_8f0;
  long *local_8e8;
  undefined8 local_8e0;
  undefined4 uStack_8d8;
  undefined4 uStack_8d4;
  float local_8d0;
  float fStack_8cc;
  float fStack_8c8;
  float fStack_8c4;
  undefined4 local_8c0;
  undefined4 uStack_8bc;
  undefined4 uStack_8b8;
  undefined4 uStack_8b4;
  float local_8b0;
  float fStack_8ac;
  float fStack_8a8;
  float fStack_8a4;
  long local_8a0;
  long lStack_898;
  long local_890;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
  local_880 [84];
  float local_82c;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
  local_800 [176];
  long local_750;
  undefined1 local_748 [8];
  long local_740 [4];
  undefined8 local_720;
  undefined8 uStack_718;
  undefined8 local_710;
  undefined8 uStack_708;
  long local_700;
  long local_6f8;
  undefined8 local_6f0;
  long local_6e0;
  undefined1 local_6d8;
  undefined8 local_6d0;
  undefined8 uStack_6c8;
  undefined8 local_6c0;
  undefined8 uStack_6b8;
  undefined8 local_6b0;
  undefined8 uStack_6a8;
  undefined8 local_6a0;
  undefined8 uStack_698;
  undefined8 local_690;
  undefined8 local_688;
  undefined8 local_680;
  long local_670 [196];
  long lStack_50;
  long local_48;
  
  lVar19 = lRam00000000001225cb;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_a80 = in_stack_00000010;
  local_a78 = in_stack_00000008;
  if (in_stack_00000008 == (FastAllocator *)0x0) {
    local_a78 = *(FastAllocator **)param_1[10];
    local_a80 = *(MutexSys **)(in_FS_OFFSET + lRam00000000001225cb);
    if (local_a80 == (MutexSys *)0x0) {
      local_a80 = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
      embree::MutexSys::MutexSys(local_a80);
      *(MutexSys **)(local_a80 + 0x40) = local_a80;
      *(undefined8 *)(local_a80 + 8) = 0;
      *(undefined8 *)(local_a80 + 0x48) = 0;
      *(undefined8 *)(local_a80 + 0x50) = 0;
      *(undefined8 *)(local_a80 + 0x58) = 0;
      *(undefined8 *)(local_a80 + 0x60) = 0;
      *(undefined8 *)(local_a80 + 0x68) = 0;
      *(undefined8 *)(local_a80 + 0x70) = 0;
      *(MutexSys **)(local_a80 + 0x80) = local_a80;
      *(undefined8 *)(local_a80 + 0x88) = 0;
      *(undefined8 *)(local_a80 + 0x90) = 0;
      *(undefined8 *)(local_a80 + 0x98) = 0;
      *(undefined8 *)(local_a80 + 0xa0) = 0;
      *(undefined8 *)(local_a80 + 0xa8) = 0;
      *(undefined8 *)(local_a80 + 0xb0) = 0;
      *(MutexSys **)(in_FS_OFFSET + lVar19) = local_a80;
      embree::MutexSys::lock();
      local_8f0 = local_a80;
      if (__MutexSys == _preBuild) {
        std::
        vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
        ::
        _M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>
                  ((vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
                    *)&FastAllocator::s_thread_local_allocators,__MutexSys,&local_8f0);
        pMVar1 = local_8f0;
        if (local_8f0 != (MutexSys *)0x0) {
          embree::MutexSys::~MutexSys(local_8f0);
          embree::alignedFree(pMVar1);
        }
      }
      else {
        *__MutexSys = local_a80;
        __MutexSys = __MutexSys + 1;
      }
      embree::MutexSys::unlock();
    }
    local_a80 = local_a80 + 0x40;
  }
  if ((param_3 != '\0') && ((ulong)(param_2[0xb] - param_2[10]) <= param_1[6])) {
    if ((code *)**(undefined8 **)param_1[0x10] == Scene::BuildProgressMonitorInterface::operator())
    {
      embree::Scene::progressMonitor((double)(ulong)(param_2[0xb] - param_2[10]));
    }
    else {
      (*(code *)**(undefined8 **)param_1[0x10])();
    }
  }
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::find
            (local_880,(PrimInfoExtRange *)param_1[9],(ulong)(param_2 + 2));
  lVar19 = param_2[10];
  uVar16 = param_2[0xb] - lVar19;
  if (((uVar16 <= param_1[3]) || (param_1[1] <= *param_2 + 8U)) ||
     ((uVar16 <= param_1[4] &&
      (fVar21 = *(float *)((long)param_2 + 0x24) - *(float *)((long)param_2 + 0x14),
      fVar21 = (*(float *)(param_2 + 4) - *(float *)(param_2 + 2)) *
               (fVar21 + (*(float *)(param_2 + 5) - *(float *)(param_2 + 3))) +
               fVar21 * (*(float *)(param_2 + 5) - *(float *)(param_2 + 3)),
      (float)((uVar16 - 1) + (1L << ((byte)param_1[2] & 0x3f)) >> ((byte)param_1[2] & 0x3f)) *
      fVar21 * *(float *)((long)param_1 + 0x2c) <=
      fVar21 * *(float *)(param_1 + 5) + *(float *)((long)param_1 + 0x2c) * local_82c)))) {
    lVar14 = param_2[0xb] * 0x20;
    puVar8 = (undefined8 *)(*(long *)param_1[9] + lVar14);
    puVar17 = (undefined8 *)(*(long *)param_1[9] + lVar19 * 0x20);
    if (puVar8 != puVar17) {
      lVar14 = lVar14 + lVar19 * -0x20;
      uVar16 = lVar14 >> 5;
      if (uVar16 == 0) {
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar8,0xfffffffffffffffe);
      }
      else {
        lVar19 = 0x3f;
        if (uVar16 != 0) {
          for (; uVar16 >> lVar19 == 0; lVar19 = lVar19 + -1) {
          }
        }
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar8,(long)(int)lVar19 * 2);
        if (0x200 < lVar14) {
          puVar11 = puVar17 + 0x40;
          std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar11)
          ;
          for (; puVar8 != puVar11; puVar11 = puVar11 + 4) {
            while( true ) {
              uVar12 = puVar11[2];
              uVar3 = puVar11[3];
              uVar4 = *puVar11;
              uVar5 = puVar11[1];
              uVar16 = CONCAT44(*(undefined4 *)((long)puVar11 + 0x1c),
                                *(undefined4 *)((long)puVar11 + 0xc));
              puVar17 = puVar11;
              if (CONCAT44(*(undefined4 *)((long)puVar11 + -4),
                           *(undefined4 *)((long)puVar11 + -0x14)) <= uVar16) break;
              do {
                puVar2 = puVar17;
                puVar17 = puVar2 + -4;
                *puVar2 = *puVar17;
                puVar2[1] = puVar2[-3];
                *(undefined4 *)(puVar2 + 2) = *(undefined4 *)(puVar2 + -2);
                *(undefined4 *)((long)puVar2 + 0x14) = *(undefined4 *)((long)puVar2 + -0xc);
                *(undefined4 *)(puVar2 + 3) = *(undefined4 *)(puVar2 + -1);
                *(undefined4 *)((long)puVar2 + 0x1c) = *(undefined4 *)((long)puVar2 + -4);
              } while (uVar16 < CONCAT44(*(undefined4 *)((long)puVar2 + -0x24),
                                         *(undefined4 *)((long)puVar2 + -0x34)));
              puVar11 = puVar11 + 4;
              *puVar17 = uVar4;
              puVar2[-3] = uVar5;
              puVar2[-2] = uVar12;
              puVar2[-1] = uVar3;
              if (puVar8 == puVar11) goto LAB_001220c8;
            }
            *puVar11 = uVar4;
            puVar11[1] = uVar5;
            puVar11[2] = uVar12;
            puVar11[3] = uVar3;
          }
          goto LAB_001220c8;
        }
      }
      std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar8);
    }
LAB_001220c8:
    puVar8 = (undefined8 *)createLargeLeaf(param_1,param_2);
    goto LAB_00122102;
  }
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::split
            ((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
              *)param_1[9],(Split2 *)local_880,(PrimInfoExtRange *)(param_2 + 2),
             (PrimInfoExtRange *)&local_a20,(PrimInfoExtRange *)&local_9c0);
  uVar26 = _LC3;
  fVar21 = _LC1;
  local_748[0] = 0;
  local_6d8 = 0;
  local_750 = *param_2 + 1;
  local_740[0] = local_a20;
  local_740[1] = uStack_a18;
  local_740[2] = local_a10;
  local_740[3] = uStack_a08;
  local_690 = local_980;
  local_720 = local_a00;
  uStack_718 = uStack_9f8;
  local_688 = local_978;
  local_710 = local_9f0;
  uStack_708 = uStack_9e8;
  local_6d0 = local_9c0;
  uStack_6c8 = uStack_9b8;
  local_700 = local_9e0;
  local_6f8 = local_9d8;
  local_6f0 = local_9d0;
  local_6c0 = local_9b0;
  uStack_6b8 = uStack_9a8;
  local_6b0 = local_9a0;
  uStack_6a8 = uStack_998;
  local_6a0 = local_990;
  uStack_698 = uStack_988;
  local_680 = local_970;
  fVar23 = fVar21;
  fVar24 = fVar21;
  fVar25 = fVar21;
  uVar27 = uVar26;
  uVar28 = uVar26;
  uVar29 = uVar26;
  local_6e0 = local_750;
  if (*param_1 < 3) {
    uVar16 = param_1[7];
    if (uVar16 < (ulong)(param_2[0xb] - param_2[10])) {
      lVar19 = 0xe0;
      uVar18 = 2;
      goto LAB_00122ef9;
    }
    uVar18 = 2;
    plVar10 = local_670;
LAB_001226f7:
    local_a98 = &local_750;
    uVar16 = ((long)plVar10 - (long)local_a98 >> 4) * 0x6db6db6db6db6db7;
    if (uVar16 == 0) {
      std::
      __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (local_a98,plVar10,0xfffffffffffffffe);
    }
    else {
      lVar19 = 0x3f;
      if (uVar16 != 0) {
        for (; uVar16 >> lVar19 == 0; lVar19 = lVar19 + -1) {
        }
      }
      std::
      __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (local_a98,plVar10,(long)(int)lVar19 * 2);
      if (0x700 < (long)plVar10 - (long)local_a98) {
        plVar15 = &lStack_50;
        std::
        __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (local_a98,plVar15);
        for (; plVar10 != plVar15; plVar15 = plVar15 + 0xe) {
          std::
          __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                    (plVar15);
        }
        goto LAB_001227d3;
      }
    }
    std::
    __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
              (local_a98,plVar10);
  }
  else {
    uVar18 = 2;
    plVar10 = local_670;
    do {
      uVar13 = 0;
      uVar16 = 0xffffffffffffffff;
      pfVar9 = (float *)local_740;
      lVar19 = local_6f8;
      lVar14 = local_700;
      fVar22 = _LC1;
      while( true ) {
        if ((param_1[3] < (ulong)(lVar19 - lVar14)) &&
           (fVar20 = (pfVar9[4] - *pfVar9) * ((pfVar9[5] - pfVar9[1]) + (pfVar9[6] - pfVar9[2])) +
                     (pfVar9[5] - pfVar9[1]) * (pfVar9[6] - pfVar9[2]), fVar22 < fVar20)) {
          uVar16 = uVar13;
          fVar22 = fVar20;
        }
        uVar13 = uVar13 + 1;
        if (uVar13 == uVar18) break;
        lVar19 = *(long *)(pfVar9 + 0x2e);
        lVar14 = *(long *)(pfVar9 + 0x2c);
        pfVar9 = pfVar9 + 0x1c;
      }
      if (uVar16 == 0xffffffffffffffff) {
        lVar19 = (long)plVar10 - (long)&local_750;
        goto LAB_001226cf;
      }
      uVar18 = uVar18 + 1;
      local_960 = (MutexSys *)(*param_2 + 1);
      local_8e0 = (ulong *)CONCAT44(uVar26,uVar26);
      local_958 = 0;
      local_910 = 0;
      lStack_908 = 0;
      local_900 = 0;
      local_8e8 = (long *)((ulong)local_8e8 & 0xffffffffffffff00);
      local_8a0 = 0;
      lStack_898 = 0;
      local_890 = 0;
      local_950 = uVar26;
      uStack_94c = uVar26;
      uStack_948 = uVar26;
      uStack_944 = uVar26;
      local_940 = fVar21;
      fStack_93c = fVar21;
      fStack_938 = fVar21;
      fStack_934 = fVar21;
      local_930 = uVar26;
      uStack_92c = uVar26;
      uStack_928 = uVar26;
      uStack_924 = uVar26;
      local_920 = fVar21;
      fStack_91c = fVar21;
      fStack_918 = fVar21;
      fStack_914 = fVar21;
      local_8f0 = local_960;
      uStack_8d8 = uVar26;
      uStack_8d4 = uVar26;
      local_8d0 = fVar21;
      fStack_8cc = fVar21;
      fStack_8c8 = fVar21;
      fStack_8c4 = fVar21;
      local_8c0 = uVar26;
      uStack_8bc = uVar26;
      uStack_8b8 = uVar26;
      uStack_8b4 = uVar26;
      local_8b0 = fVar21;
      fStack_8ac = fVar21;
      fStack_8a8 = fVar21;
      fStack_8a4 = fVar21;
      HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
      find(local_800,(PrimInfoExtRange *)param_1[9],(ulong)(local_740 + uVar16 * 0xe));
      HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
      split((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
             *)param_1[9],(Split2 *)local_800,(PrimInfoExtRange *)(local_740 + uVar16 * 0xe),
            (PrimInfoExtRange *)&local_950,(PrimInfoExtRange *)&local_8e0);
      *(MutexSys **)(local_748 + uVar16 * 0x70 + -8) = local_960;
      local_748[uVar16 * 0x70] = local_958;
      local_740[uVar16 * 0xe] = CONCAT44(uStack_94c,local_950);
      local_740[uVar16 * 0xe + 1] = CONCAT44(uStack_944,uStack_948);
      local_740[uVar16 * 0xe + 10] = local_900;
      local_740[uVar16 * 0xe + 2] = CONCAT44(fStack_93c,local_940);
      local_740[uVar16 * 0xe + 3] = CONCAT44(fStack_934,fStack_938);
      local_740[uVar16 * 0xe + 4] = CONCAT44(uStack_92c,local_930);
      local_740[uVar16 * 0xe + 5] = CONCAT44(uStack_924,uStack_928);
      local_740[uVar16 * 0xe + 6] = CONCAT44(fStack_91c,local_920);
      local_740[uVar16 * 0xe + 7] = CONCAT44(fStack_914,fStack_918);
      local_740[uVar16 * 0xe + 8] = local_910;
      local_740[uVar16 * 0xe + 9] = lStack_908;
      *plVar10 = (long)local_8f0;
      plVar10[2] = (long)local_8e0;
      plVar10[3] = CONCAT44(uStack_8d4,uStack_8d8);
      *(undefined1 *)(plVar10 + 1) = local_8e8._0_1_;
      plVar10[4] = CONCAT44(fStack_8cc,local_8d0);
      plVar10[5] = CONCAT44(fStack_8c4,fStack_8c8);
      plVar10[10] = local_8a0;
      plVar10[0xb] = lStack_898;
      plVar10[6] = CONCAT44(uStack_8bc,local_8c0);
      plVar10[7] = CONCAT44(uStack_8b4,uStack_8b8);
      plVar10[8] = CONCAT44(fStack_8ac,local_8b0);
      plVar10[9] = CONCAT44(fStack_8a4,fStack_8a8);
      plVar10[0xc] = local_890;
      plVar10 = plVar10 + 0xe;
    } while (uVar18 < *param_1);
    lVar19 = uVar18 * 0x70;
LAB_001226cf:
    uVar16 = param_1[7];
    if (uVar16 < (ulong)(param_2[0xb] - param_2[10])) {
LAB_00122ef9:
      local_a98 = &local_750;
      plVar10 = local_a98 + uVar18 * 0xe;
      do {
        *(bool *)(local_a98 + 1) = (ulong)(local_a98[0xb] - local_a98[10]) <= uVar16;
        local_a98 = local_a98 + 0xe;
      } while (plVar10 != local_a98);
    }
    plVar10 = (long *)(local_748 + lVar19 + -8);
    if (lVar19 != 0) goto LAB_001226f7;
  }
LAB_001227d3:
  local_a38 = (MutexSys *)local_800;
  local_a98 = &local_750;
  local_960 = (MutexSys *)0x80;
  pMVar1 = *(MutexSys **)local_a80;
  if (local_a78 != *(FastAllocator **)(pMVar1 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(pMVar1 + 8) != 0) {
      LOCK();
      *(long *)(*(long *)(pMVar1 + 8) + 0x118) =
           *(long *)(*(long *)(pMVar1 + 8) + 0x118) +
           *(long *)(pMVar1 + 0xa8) + *(long *)(pMVar1 + 0x68);
      UNLOCK();
      LOCK();
      *(long *)(*(long *)(pMVar1 + 8) + 0x120) =
           *(long *)(*(long *)(pMVar1 + 8) + 0x120) +
           (((*(long *)(pMVar1 + 0x98) + *(long *)(pMVar1 + 0x58)) - *(long *)(pMVar1 + 0x50)) -
           *(long *)(pMVar1 + 0x90));
      UNLOCK();
      LOCK();
      *(long *)(*(long *)(pMVar1 + 8) + 0x128) =
           *(long *)(*(long *)(pMVar1 + 8) + 0x128) +
           *(long *)(pMVar1 + 0xb0) + *(long *)(pMVar1 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(pMVar1 + 0x48) = 0;
    *(undefined8 *)(pMVar1 + 0x58) = 0;
    *(undefined8 *)(pMVar1 + 0x50) = 0;
    *(undefined8 *)(pMVar1 + 0x68) = 0;
    *(undefined8 *)(pMVar1 + 0x70) = 0;
    *(undefined8 *)(pMVar1 + 0x60) = 0;
    if (local_a78 == (FastAllocator *)0x0) {
      *(undefined8 *)(pMVar1 + 0x88) = 0;
      uVar12 = 0;
      *(undefined8 *)(pMVar1 + 0x98) = 0;
      *(undefined8 *)(pMVar1 + 0x90) = 0;
      *(undefined8 *)(pMVar1 + 0xa8) = 0;
      *(undefined8 *)(pMVar1 + 0xb0) = 0;
    }
    else {
      uVar12 = *(undefined8 *)(local_a78 + 0x10);
      *(undefined8 *)(pMVar1 + 0x88) = 0;
      *(undefined8 *)(pMVar1 + 0x98) = 0;
      *(undefined8 *)(pMVar1 + 0x60) = uVar12;
      *(undefined8 *)(pMVar1 + 0x90) = 0;
      *(undefined8 *)(pMVar1 + 0xa8) = 0;
      *(undefined8 *)(pMVar1 + 0xb0) = 0;
      *(undefined8 *)(pMVar1 + 0xa0) = 0;
      uVar12 = *(undefined8 *)(local_a78 + 0x10);
    }
    *(undefined8 *)(pMVar1 + 0xa0) = uVar12;
    LOCK();
    *(FastAllocator **)(pMVar1 + 8) = local_a78;
    UNLOCK();
    local_8f0 = pMVar1;
    embree::MutexSys::lock();
    plVar10 = *(long **)(local_a78 + 0x138);
    if (plVar10 == *(long **)(local_a78 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(local_a78 + 0x130),plVar10,&local_8f0);
    }
    else {
      *plVar10 = (long)pMVar1;
      *(long *)(local_a78 + 0x138) = *(long *)(local_a78 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  lVar19 = *(long *)(local_a80 + 0x10);
  *(long *)(local_a80 + 0x28) = *(long *)(local_a80 + 0x28) + 0x80;
  uVar13 = (ulong)(-(int)lVar19 & 0xf);
  uVar16 = lVar19 + 0x80 + uVar13;
  *(ulong *)(local_a80 + 0x10) = uVar16;
  if (*(ulong *)(local_a80 + 0x18) < uVar16) {
    *(long *)(local_a80 + 0x10) = lVar19;
    if (*(MutexSys **)(local_a80 + 0x20) < (MutexSys *)0x200) {
      puVar8 = (undefined8 *)FastAllocator::malloc(local_a78,(ulong *)&local_960,0x40,false);
    }
    else {
      local_8f0 = *(MutexSys **)(local_a80 + 0x20);
      puVar8 = (undefined8 *)FastAllocator::malloc(local_a78,(ulong *)&local_8f0,0x40,true);
      *(undefined8 **)(local_a80 + 8) = puVar8;
      lVar19 = *(long *)(local_a80 + 0x10);
      *(long *)(local_a80 + 0x10) = 0x80;
      *(long *)(local_a80 + 0x30) =
           (*(long *)(local_a80 + 0x18) + *(long *)(local_a80 + 0x30)) - lVar19;
      *(MutexSys **)(local_a80 + 0x18) = local_8f0;
      if (local_8f0 < (MutexSys *)0x80) {
        local_8f0 = *(MutexSys **)(local_a80 + 0x20);
        *(long *)(local_a80 + 0x10) = 0;
        puVar8 = (undefined8 *)FastAllocator::malloc(local_a78,(ulong *)&local_8f0,0x40,false);
        *(undefined8 **)(local_a80 + 8) = puVar8;
        lVar19 = *(long *)(local_a80 + 0x10);
        *(long *)(local_a80 + 0x10) = 0x80;
        *(long *)(local_a80 + 0x30) =
             (*(long *)(local_a80 + 0x18) + *(long *)(local_a80 + 0x30)) - lVar19;
        *(MutexSys **)(local_a80 + 0x18) = local_8f0;
        if (local_8f0 < (MutexSys *)0x80) {
          puVar8 = (undefined8 *)0x0;
          *(long *)(local_a80 + 0x10) = 0;
        }
      }
    }
  }
  else {
    *(ulong *)(local_a80 + 0x30) = *(long *)(local_a80 + 0x30) + uVar13;
    puVar8 = (undefined8 *)(*(long *)(local_a80 + 8) + -0x80 + uVar16);
  }
  *puVar8 = 8;
  puVar8[1] = 8;
  puVar8[2] = 8;
  puVar8[3] = 8;
  *(undefined4 *)(puVar8 + 0xc) = uVar26;
  *(undefined4 *)((long)puVar8 + 100) = uVar27;
  *(undefined4 *)(puVar8 + 0xd) = uVar28;
  *(undefined4 *)((long)puVar8 + 0x6c) = uVar29;
  *(undefined4 *)(puVar8 + 8) = uVar26;
  *(undefined4 *)((long)puVar8 + 0x44) = uVar27;
  *(undefined4 *)(puVar8 + 9) = uVar28;
  *(undefined4 *)((long)puVar8 + 0x4c) = uVar29;
  *(undefined4 *)(puVar8 + 4) = uVar26;
  *(undefined4 *)((long)puVar8 + 0x24) = uVar27;
  *(undefined4 *)(puVar8 + 5) = uVar28;
  *(undefined4 *)((long)puVar8 + 0x2c) = uVar29;
  *(float *)(puVar8 + 0xe) = fVar21;
  *(float *)((long)puVar8 + 0x74) = fVar23;
  *(float *)(puVar8 + 0xf) = fVar24;
  *(float *)((long)puVar8 + 0x7c) = fVar25;
  *(float *)(puVar8 + 10) = fVar21;
  *(float *)((long)puVar8 + 0x54) = fVar23;
  *(float *)(puVar8 + 0xb) = fVar24;
  *(float *)((long)puVar8 + 0x5c) = fVar25;
  *(float *)(puVar8 + 6) = fVar21;
  *(float *)((long)puVar8 + 0x34) = fVar23;
  *(float *)(puVar8 + 7) = fVar24;
  *(float *)((long)puVar8 + 0x3c) = fVar25;
  puVar17 = puVar8 + 4;
  plVar10 = local_a98;
  do {
    lVar19 = plVar10[3];
    puVar11 = (undefined8 *)((long)puVar17 + 4);
    lVar14 = plVar10[2];
    lVar6 = plVar10[5];
    uVar26 = *(undefined4 *)((long)plVar10 + 0x24);
    lVar7 = plVar10[4];
    *(undefined4 *)(puVar17 + 4) = *(undefined4 *)((long)plVar10 + 0x14);
    *(int *)puVar17 = (int)lVar14;
    *(int *)(puVar17 + 8) = (int)lVar19;
    *(int *)(puVar17 + 2) = (int)lVar7;
    *(undefined4 *)(puVar17 + 6) = uVar26;
    *(int *)(puVar17 + 10) = (int)lVar6;
    puVar17 = puVar11;
    plVar10 = plVar10 + 0xe;
  } while ((undefined8 *)((long)puVar8 + uVar18 * 4 + 0x20) != puVar11);
  uVar16 = 0;
  if (param_1[6] < (ulong)(param_2[0xb] - param_2[10])) {
    local_8f0 = local_a38;
    pMStack_a28 = (MutexSys *)0x0;
    local_8e8 = local_a98;
    local_8e0 = param_1;
    TaskScheduler::
    spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
              (0,uVar18,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_8f0,
               (TaskGroupContext *)&pMStack_a28);
    embree::TaskScheduler::wait();
    if (pMStack_a28 != (MutexSys *)0x0) {
      local_960 = pMStack_a28;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_960);
    }
    uVar16 = 0;
    do {
      puVar8[uVar16] = *(undefined8 *)(local_a38 + uVar16 * 8);
      uVar16 = uVar16 + 1;
    } while (uVar16 != uVar18);
  }
  else {
    do {
      uVar12 = recurse(param_1,local_a98,0);
      *(undefined8 *)(local_800 + uVar16 * 8) = uVar12;
      uVar16 = uVar16 + 1;
      local_a98 = local_a98 + 0xe;
    } while (uVar16 != uVar18);
    uVar16 = 0;
    do {
      puVar8[uVar16] = *(undefined8 *)(local_a38 + uVar16 * 8);
      uVar16 = uVar16 + 1;
    } while (uVar16 != uVar18);
  }
LAB_00122102:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return puVar8;
}



/* embree::NodeRefPtr<4> embree::sse2::GeneralBVHBuilder::build<embree::NodeRefPtr<4>,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::Scene::BuildProgressMonitorInterface>(embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>&, embree::PrimRef*, embree::sse2::PrimInfoExtRange const&,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > > const&,
   embree::Scene::BuildProgressMonitorInterface const&, embree::sse2::GeneralBVHBuilder::Settings
   const&) */

void embree::sse2::GeneralBVHBuilder::
     build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::Scene::BuildProgressMonitorInterface>
               (undefined8 param_1,undefined8 param_2,undefined4 *param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,ulong *param_7)

{
  long in_FS_OFFSET;
  undefined1 local_132;
  undefined1 local_131;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 uStack_120;
  undefined8 local_118;
  undefined8 local_108;
  undefined1 local_100;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  ulong local_98;
  ulong uStack_90;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  ulong uStack_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 *local_48;
  undefined1 *local_40;
  undefined1 *local_38;
  undefined8 local_30;
  undefined8 *local_28;
  undefined8 *local_20;
  undefined8 local_18;
  long local_10;
  
  local_98 = *param_7;
  uStack_90 = param_7[1];
  local_88 = param_7[2];
  uStack_80 = param_7[3];
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = param_7[4];
  uStack_70 = param_7[5];
  local_68 = param_7[6];
  uStack_60 = param_7[7];
  local_48 = &local_130;
  local_40 = &local_131;
  local_38 = &local_132;
  local_20 = &local_108;
  local_28 = &local_128;
  local_130 = param_4;
  local_58 = param_2;
  local_50 = param_1;
  local_30 = param_5;
  local_18 = param_6;
  if (0x10 < *param_7) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  local_b8 = *(undefined8 *)(param_3 + 0x10);
  local_f8 = *param_3;
  uStack_f4 = param_3[1];
  uStack_f0 = param_3[2];
  uStack_ec = param_3[3];
  local_100 = 0;
  local_e8 = param_3[4];
  uStack_e4 = param_3[5];
  uStack_e0 = param_3[6];
  uStack_dc = param_3[7];
  local_d8 = param_3[8];
  uStack_d4 = param_3[9];
  uStack_d0 = param_3[10];
  uStack_cc = param_3[0xb];
  local_108 = 1;
  local_c8 = param_3[0xc];
  uStack_c4 = param_3[0xd];
  uStack_c0 = param_3[0xe];
  uStack_bc = param_3[0xf];
  local_b0 = *(undefined8 *)(param_3 + 0x12);
  local_a8 = *(undefined8 *)(param_3 + 0x14);
  local_128 = 0;
  uStack_120 = 0;
  local_118 = 0;
  BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
  ::recurse(&local_98,local_20,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::build() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::build(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  char cVar1;
  undefined8 *puVar2;
  Geometry *pGVar3;
  ulong *puVar4;
  void *pvVar5;
  string *psVar6;
  long lVar7;
  uint uVar8;
  ulong uVar9;
  long lVar10;
  undefined8 *puVar11;
  ulong uVar12;
  undefined8 uVar13;
  long lVar14;
  long *plVar15;
  size_t sVar16;
  long *plVar17;
  ulong uVar18;
  byte bVar19;
  uint uVar20;
  long *plVar21;
  ulong *puVar22;
  vector_t *pvVar23;
  undefined **ppuVar24;
  uint uVar25;
  undefined8 *puVar26;
  long *plVar27;
  ulong *puVar28;
  vector_t *pvVar29;
  ulong uVar30;
  char *__s;
  vector_t *pvVar31;
  long in_FS_OFFSET;
  bool bVar32;
  float fVar33;
  double dVar34;
  double dVar35;
  double local_1e0;
  undefined4 local_1b0;
  float local_1ac;
  undefined8 local_1a8;
  undefined **local_1a0;
  undefined ***local_198;
  undefined **local_190;
  undefined **local_188;
  undefined8 local_180;
  undefined **local_178;
  undefined8 *local_170;
  undefined ****local_168;
  undefined ***local_158;
  undefined8 uStack_150;
  undefined8 local_148;
  undefined8 uStack_140;
  undefined ***local_138;
  undefined8 uStack_130;
  undefined8 local_128;
  undefined8 uStack_120;
  long local_118;
  long local_110;
  undefined ***local_108;
  float *pfStack_100;
  TaskGroupContext *local_f8;
  float *pfStack_f0;
  undefined ***local_e8;
  undefined8 uStack_e0;
  undefined8 local_d8;
  undefined8 uStack_d0;
  long local_c8;
  long local_c0;
  vector_t *local_b8;
  long *local_a8 [2];
  long local_98 [2];
  long *local_88;
  long local_80;
  long local_78 [2];
  ulong *local_68;
  long local_60;
  ulong local_58 [5];
  
  local_58[3] = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(this + 0x20) == 0) {
LAB_001239df:
    lVar10 = *(long *)(this + 0x18);
    pvVar23 = *(vector_t **)(lVar10 + 0x288);
    *(int *)(this + 0x98) = (int)pvVar23;
    if (pvVar23 == (vector_t *)0x0) goto LAB_001239fc;
    psVar6 = *(string **)(this + 0x10);
    bVar19 = *(byte *)(*(long *)(lVar10 + 0x188) + 0x464);
    if (*(long *)(lVar10 + 0x1d0) == 0) {
      uVar25 = 0;
      uVar20 = 0;
      if (bVar19 != 0) goto LAB_001240eb;
LAB_00124920:
      bVar19 = 0;
      __s = "BuilderFastSpatialSAH";
    }
    else {
      uVar20 = 0;
      uVar25 = 0;
      lVar14 = 0;
      do {
        lVar7 = *(long *)(*(long *)(lVar10 + 0x1e0) + lVar14 * 8);
        if ((((lVar7 != 0) && ((*(byte *)(lVar7 + 0x3e) & 0x20) != 0)) &&
            (*(char *)(lVar7 + 0x3c) == '\x14')) &&
           ((*(int *)(lVar7 + 0x24) == 1 &&
            (uVar8 = (uint)lVar14, bVar32 = uVar25 < uVar8, uVar25 = uVar20, bVar32)))) {
          uVar25 = uVar8;
          uVar20 = uVar8;
        }
        lVar14 = lVar14 + 1;
      } while (*(long *)(lVar10 + 0x1d0) != lVar14);
      bVar19 = bVar19 | 0x7ffffff < uVar25;
      uVar20 = uVar25;
      if (bVar19 == 0) goto LAB_00124920;
LAB_001240eb:
      uVar25 = uVar20;
      __s = "BuilderFastSpatialPresplitSAH";
    }
    local_a8[0] = local_98;
    std::__cxx11::string::_M_construct((ulong)local_a8,'\x01');
    *(undefined1 *)local_a8[0] = 0x34;
    plVar15 = (long *)std::__cxx11::string::_M_replace((ulong)local_a8,0,(char *)0x0,0x1232cc);
    plVar17 = plVar15 + 2;
    if ((long *)*plVar15 == plVar17) {
      uVar9 = plVar15[1] + 1;
      plVar21 = plVar17;
      plVar27 = local_78;
      if (7 < (uint)uVar9) {
        uVar30 = 0;
        do {
          uVar20 = (int)uVar30 + 8;
          uVar18 = (ulong)uVar20;
          *(undefined8 *)((long)local_78 + uVar30) = *(undefined8 *)((long)plVar17 + uVar30);
          uVar30 = uVar18;
        } while (uVar20 < ((uint)uVar9 & 0xfffffff8));
        plVar27 = (long *)((long)local_78 + uVar18);
        plVar21 = (long *)(uVar18 + (long)plVar17);
      }
      lVar10 = 0;
      if ((uVar9 & 4) != 0) {
        *(int *)plVar27 = (int)*plVar21;
        lVar10 = 4;
      }
      if ((uVar9 & 2) != 0) {
        *(undefined2 *)((long)plVar27 + lVar10) = *(undefined2 *)((long)plVar21 + lVar10);
        lVar10 = lVar10 + 2;
      }
      local_88 = local_78;
      if ((uVar9 & 1) != 0) {
        *(undefined1 *)((long)plVar27 + lVar10) = *(undefined1 *)((long)plVar21 + lVar10);
      }
    }
    else {
      local_78[0] = plVar15[2];
      local_88 = (long *)*plVar15;
    }
    local_80 = plVar15[1];
    *plVar15 = (long)plVar17;
    plVar15[1] = 0;
    *(undefined1 *)(plVar15 + 2) = 0;
    sVar16 = strlen(__s);
    if (0x3fffffffffffffffU - local_80 < sVar16) {
      std::__throw_length_error("basic_string::append");
      goto LAB_00124a46;
    }
    plVar17 = (long *)std::__cxx11::string::_M_append((char *)&local_88,(ulong)__s);
    puVar4 = (ulong *)(plVar17 + 2);
    if ((ulong *)*plVar17 == puVar4) {
      uVar9 = plVar17[1] + 1;
      puVar22 = puVar4;
      puVar28 = local_58;
      if (7 < (uint)uVar9) {
        uVar30 = 0;
        do {
          uVar20 = (int)uVar30 + 8;
          uVar18 = (ulong)uVar20;
          *(undefined8 *)((long)local_58 + uVar30) = *(undefined8 *)((long)puVar4 + uVar30);
          uVar30 = uVar18;
        } while (uVar20 < ((uint)uVar9 & 0xfffffff8));
        puVar28 = (ulong *)((long)local_58 + uVar18);
        puVar22 = (ulong *)(uVar18 + (long)puVar4);
      }
      lVar10 = 0;
      if ((uVar9 & 4) != 0) {
        *(int *)puVar28 = (int)*puVar22;
        lVar10 = 4;
      }
      if ((uVar9 & 2) != 0) {
        *(undefined2 *)((long)puVar28 + lVar10) = *(undefined2 *)((long)puVar22 + lVar10);
        lVar10 = lVar10 + 2;
      }
      local_68 = local_58;
      if ((uVar9 & 1) != 0) {
        *(undefined1 *)((long)puVar28 + lVar10) = *(undefined1 *)((long)puVar22 + lVar10);
      }
    }
    else {
      local_58[0] = plVar17[2];
      local_68 = (ulong *)*plVar17;
    }
    local_60 = plVar17[1];
    *plVar17 = (long)puVar4;
    plVar17[1] = 0;
    *(undefined1 *)(plVar17 + 2) = 0;
    local_1e0 = (double)embree::BVHN<4>::preBuild(psVar6);
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
    if (local_88 != local_78) {
      operator_delete(local_88,local_78[0] + 1);
    }
    if (local_a8[0] != local_98) {
      operator_delete(local_a8[0],local_98[0] + 1);
    }
  }
  else {
    uVar25 = *(uint *)(this + 0x98);
    if (*(uint *)(*(long *)(this + 0x20) + 0x20) == uVar25) {
      *(uint *)(this + 0x98) = uVar25;
    }
    else {
      lVar10 = *(long *)(this + 0x10);
      plVar17 = (long *)(lVar10 + 0x170);
      plVar15 = (long *)(lVar10 + 0x130);
      do {
        while (*plVar15 != 0) {
          lVar14 = *(long *)(*plVar15 + 0x18);
          *(long *)(*plVar15 + 0x18) = *plVar17;
          LOCK();
          *plVar17 = *plVar15;
          UNLOCK();
          LOCK();
          *plVar15 = lVar14;
          UNLOCK();
        }
        LOCK();
        *plVar15 = 0;
        UNLOCK();
        plVar15 = plVar15 + 1;
      } while (plVar17 != plVar15);
      plVar15 = *(long **)(lVar10 + 0x1a8);
      plVar27 = *(long **)(lVar10 + 0x1b0);
      if (plVar27 != plVar15) {
        do {
          while( true ) {
            lVar14 = *plVar15;
            if (lVar10 + 0x78 != *(long *)(lVar14 + 8)) break;
            embree::MutexSys::lock();
            if (lVar10 + 0x78 == *(long *)(lVar14 + 8)) {
              LOCK();
              plVar21 = (long *)(*(long *)(lVar14 + 8) + 0x118);
              *plVar21 = *plVar21 + *(long *)(lVar14 + 0xa8) + *(long *)(lVar14 + 0x68);
              UNLOCK();
              LOCK();
              plVar21 = (long *)(*(long *)(lVar14 + 8) + 0x120);
              *plVar21 = *plVar21 +
                         (((*(long *)(lVar14 + 0x98) + *(long *)(lVar14 + 0x58)) -
                          *(long *)(lVar14 + 0x50)) - *(long *)(lVar14 + 0x90));
              UNLOCK();
              LOCK();
              plVar21 = (long *)(*(long *)(lVar14 + 8) + 0x128);
              *plVar21 = *plVar21 + *(long *)(lVar14 + 0xb0) + *(long *)(lVar14 + 0x70);
              UNLOCK();
              *(undefined8 *)(lVar14 + 0x48) = 0;
              *(undefined8 *)(lVar14 + 0x58) = 0;
              *(undefined8 *)(lVar14 + 0x50) = 0;
              *(undefined8 *)(lVar14 + 0x68) = 0;
              *(undefined8 *)(lVar14 + 0x70) = 0;
              *(undefined8 *)(lVar14 + 0x60) = 0;
              *(undefined8 *)(lVar14 + 0x88) = 0;
              *(undefined8 *)(lVar14 + 0x98) = 0;
              *(undefined8 *)(lVar14 + 0x90) = 0;
              *(undefined8 *)(lVar14 + 0xa8) = 0;
              *(undefined8 *)(lVar14 + 0xb0) = 0;
              *(undefined8 *)(lVar14 + 0xa0) = 0;
              LOCK();
              *(undefined8 *)(lVar14 + 8) = 0;
              UNLOCK();
            }
            plVar15 = plVar15 + 1;
            embree::MutexSys::unlock();
            if (plVar27 == plVar15) goto LAB_001238d8;
          }
          plVar15 = plVar15 + 1;
        } while (plVar27 != plVar15);
LAB_001238d8:
        if (*(long *)(lVar10 + 0x1b0) != *(long *)(lVar10 + 0x1a8)) {
          *(long *)(lVar10 + 0x1b0) = *(long *)(lVar10 + 0x1a8);
        }
      }
      LOCK();
      *(undefined8 *)(lVar10 + 400) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar10 + 0x198) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar10 + 0x1a0) = 0;
      UNLOCK();
      if (*(long *)(lVar10 + 0x170) != 0) {
        cVar1 = *(char *)(lVar10 + 0x180);
        plVar15 = *(long **)(lVar10 + 0x78);
        puVar4 = *(ulong **)(lVar10 + 0x170);
joined_r0x00123943:
        puVar28 = puVar4;
        if (puVar28 != (ulong *)0x0) {
          puVar4 = (ulong *)puVar28[3];
          uVar9 = puVar28[4];
          uVar30 = *puVar28;
          if (*puVar28 < puVar28[1]) {
            uVar30 = puVar28[1];
          }
          if (puVar28[2] < uVar30) {
            uVar30 = puVar28[2];
          }
          if ((int)puVar28[5] != 0) goto code_r0x001239c7;
          if (cVar1 == '\0') {
            embree::alignedFree(puVar28);
          }
          else {
            (**(code **)(*plVar15 + 0x40))(plVar15,puVar28);
          }
          goto LAB_00123975;
        }
      }
      LOCK();
      *plVar17 = 0;
      UNLOCK();
      if (*(long *)(lVar10 + 0x178) != 0) {
        cVar1 = *(char *)(lVar10 + 0x180);
        plVar17 = *(long **)(lVar10 + 0x78);
        puVar4 = *(ulong **)(lVar10 + 0x178);
joined_r0x00123ac2:
        puVar28 = puVar4;
        if (puVar28 != (ulong *)0x0) {
          puVar4 = (ulong *)puVar28[3];
          uVar9 = puVar28[4];
          uVar30 = *puVar28;
          if (*puVar28 < puVar28[1]) {
            uVar30 = puVar28[1];
          }
          if (puVar28[2] < uVar30) {
            uVar30 = puVar28[2];
          }
          if ((int)puVar28[5] != 0) goto code_r0x00123b43;
          if (cVar1 == '\0') {
            embree::alignedFree(puVar28);
          }
          else {
            (**(code **)(*plVar17 + 0x40))(plVar17,puVar28);
          }
          goto LAB_00123af5;
        }
      }
      LOCK();
      *(undefined8 *)(lVar10 + 0x178) = 0;
      UNLOCK();
      plVar17 = (long *)(lVar10 + 0xf0);
      do {
        LOCK();
        *plVar17 = 0;
        UNLOCK();
        LOCK();
        plVar17[8] = 0;
        UNLOCK();
        plVar17 = plVar17 + 1;
      } while ((long *)(lVar10 + 0x130) != plVar17);
      pvVar5 = *(void **)(lVar10 + 0x1e8);
      lVar14 = *(long *)(lVar10 + 0x1e0);
      if (pvVar5 != (void *)0x0) {
        if ((ulong)(lVar14 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar5);
        }
        else {
          embree::os_free(pvVar5,lVar14 << 5,*(bool *)(lVar10 + 0x1d0));
        }
      }
      if (lVar14 != 0) {
        (**(code **)**(undefined8 **)(lVar10 + 0x1c8))
                  (*(undefined8 **)(lVar10 + 0x1c8),lVar14 * -0x20,1);
      }
      *(undefined8 *)(lVar10 + 0x1e8) = 0;
      *(undefined8 *)(lVar10 + 0x1e0) = 0;
      *(undefined8 *)(lVar10 + 0x1d8) = 0;
      if (*(long *)(this + 0x20) == 0) goto LAB_001239df;
      uVar25 = *(uint *)(*(long *)(this + 0x20) + 0x20);
      *(uint *)(this + 0x98) = uVar25;
    }
    pvVar23 = (vector_t *)(ulong)uVar25;
    if (pvVar23 == (vector_t *)0x0) {
LAB_001239fc:
      pvVar5 = *(void **)(this + 0x48);
      lVar10 = *(long *)(this + 0x40);
      if (pvVar5 != (void *)0x0) {
        if ((ulong)(lVar10 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar5);
        }
        else {
          embree::os_free(pvVar5,lVar10 << 5,(bool)this[0x30]);
        }
      }
      if (lVar10 != 0) {
        (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar10 * -0x20,1);
      }
      *(undefined8 *)(this + 0x48) = 0;
      *(undefined8 *)(this + 0x40) = 0;
      *(undefined8 *)(this + 0x38) = 0;
      if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Could not recover jumptable at 0x00123a82. Too many branches */
                    /* WARNING: Treating indirect jump as call */
        (**(code **)(**(long **)(this + 0x10) + 0x28))();
        return;
      }
      goto LAB_00124a46;
    }
    uVar25 = *(uint *)(this + 0x94);
    local_60 = 0;
    local_58[0] = local_58[0] & 0xffffffffffffff00;
    bVar19 = 0x7ffffff < uVar25 | *(byte *)(*(long *)(*(long *)(this + 0x18) + 0x188) + 0x464);
    local_68 = local_58;
    local_1e0 = (double)embree::BVHN<4>::preBuild(*(string **)(this + 0x10));
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
  }
  fVar33 = (float)pvVar23 * *(float *)(this + 0x90);
  if (__LC7 <= fVar33) {
    pvVar29 = (vector_t *)((long)(fVar33 - __LC7) ^ 0x8000000000000000);
  }
  else {
    pvVar29 = (vector_t *)(long)fVar33;
  }
  pvVar31 = *(vector_t **)(this + 0x40);
  if (pvVar29 < pvVar23) {
    pvVar29 = pvVar23;
  }
  if (pvVar31 < pvVar29) {
    if (pvVar31 == (vector_t *)0x0) {
      pvVar31 = pvVar29;
      if (pvVar29 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar29;
      }
    }
    else {
      do {
        pvVar31 = (vector_t *)((long)pvVar31 * 2);
        if (pvVar31 == (vector_t *)0x0) {
          pvVar31 = (vector_t *)0x1;
        }
      } while (pvVar31 < pvVar29);
      if (pvVar29 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar29;
      }
    }
    puVar2 = *(undefined8 **)(this + 0x48);
    uVar9 = (long)pvVar31 << 5;
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),uVar9,0);
    if (uVar9 < 0x1c00000) {
      lVar10 = embree::alignedMalloc(uVar9,0x20);
    }
    else {
      lVar10 = embree::os_malloc(uVar9,(bool *)(this + 0x30));
    }
    *(long *)(this + 0x48) = lVar10;
    if (*(long *)(this + 0x38) != 0) {
      uVar9 = 0;
      puVar26 = puVar2;
      while( true ) {
        uVar13 = puVar26[1];
        puVar11 = (undefined8 *)(lVar10 + uVar9 * 0x20);
        *puVar11 = *puVar26;
        puVar11[1] = uVar13;
        uVar13 = puVar26[3];
        puVar11[2] = puVar26[2];
        puVar11[3] = uVar13;
        if (*(ulong *)(this + 0x38) <= uVar9 + 1) break;
        lVar10 = *(long *)(this + 0x48);
        uVar9 = uVar9 + 1;
        puVar26 = puVar26 + 4;
      }
    }
    lVar10 = *(long *)(this + 0x40);
    if (puVar2 != (undefined8 *)0x0) {
      if ((ulong)(lVar10 << 5) < 0x1c00000) {
        embree::alignedFree(puVar2);
      }
      else {
        embree::os_free(puVar2,lVar10 << 5,(bool)this[0x30]);
      }
    }
    if (lVar10 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar10 * -0x20,1);
    }
    lVar10 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar29;
    *(vector_t **)(this + 0x40) = pvVar31;
    if (*(long *)(this + 0x20) == 0) goto LAB_00123c76;
LAB_0012352b:
    *(undefined4 *)(lVar10 + 0x1c0) = 1;
    pGVar3 = *(Geometry **)(this + 0x20);
    lVar10 = *(long *)(*(long *)(this + 0x10) + 0x68);
    if (bVar19 == 0) {
      if (pGVar3 == (Geometry *)0x0) goto LAB_00124930;
      embree::sse2::createPrimRefArray
                ((Geometry *)&local_108,(uint)pGVar3,(ulong)*(uint *)(this + 0x94),pvVar29,
                 (BuildProgressMonitor *)(this + 0x28));
      goto LAB_00124508;
    }
    if (pGVar3 == (Geometry *)0x0) goto LAB_00123c84;
    createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
              ((sse2 *)&local_108,pGVar3,uVar25,(ulong)pvVar23,(vector_t *)(this + 0x28),
               (BuildProgressMonitor *)(lVar10 + 600));
LAB_00123577:
    dVar35 = _LC61;
    local_110 = local_c0;
    local_118 = local_c8;
    local_158 = local_108;
    uStack_150 = pfStack_100;
    dVar34 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC59 * __LC60;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC61 <= dVar34) {
      uVar9 = (long)(dVar34 - _LC61) ^ 0x8000000000000000;
    }
    else {
      uVar9 = (ulong)dVar34;
    }
    uVar9 = uVar9 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar9);
    local_170 = *(undefined8 **)(this + 0x10);
    uVar30 = local_110 - local_118;
    if ((uVar30 == 0) || (uVar9 == 0)) {
      uVar9 = 0x400;
    }
    else {
      bVar19 = *(byte *)((long)local_170 + 0x182);
      uVar12 = embree::TaskScheduler::threadCount();
      lVar10 = (2 - (ulong)bVar19) * local_170[0x11];
      uVar18 = lVar10 * 0x14;
      if (((uVar9 - 1) + uVar18) / uVar18 < uVar12) {
        uVar18 = lVar10 * 0x50;
        if ((long)uVar18 < 0) {
          dVar34 = (double)(uVar18 >> 1) + (double)(uVar18 >> 1);
        }
        else {
          dVar34 = (double)(long)uVar18;
        }
        dVar34 = dVar34 / ((double)uVar9 / (double)uVar30);
        if ((double)((ulong)dVar34 & _LC67) < _LC62) {
          dVar34 = (double)((ulong)((double)(long)dVar34 +
                                   (double)(-(ulong)((double)(long)dVar34 < dVar34) & _LC64)) |
                           ~_LC67 & (ulong)dVar34);
        }
        if (dVar35 <= dVar34) {
          uVar9 = (long)(dVar34 - dVar35) ^ 0x8000000000000000;
        }
        else {
          uVar9 = (ulong)dVar34;
        }
        local_170 = *(undefined8 **)(this + 0x10);
      }
      else {
        local_170 = *(undefined8 **)(this + 0x10);
        uVar9 = 0x400;
      }
    }
    local_f8 = *(TaskGroupContext **)(this + 0x60);
    pfStack_f0 = *(float **)(this + 0x68);
    *(ulong *)(this + 0x80) = uVar9;
    *(undefined8 *)(this + 0x50) = 4;
    local_e8 = *(undefined ****)(this + 0x70);
    uStack_e0 = *(undefined8 *)(this + 0x78);
    *(undefined8 *)(this + 0x58) = 0x28;
    local_108 = *(undefined ****)(this + 0x50);
    pfStack_100 = *(float **)(this + 0x58);
    local_d8 = *(undefined8 *)(this + 0x80);
    uStack_d0 = *(undefined8 *)(this + 0x88);
    local_178 = &PTR_createLeaf_0012f478;
    uVar13 = embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderV::build
                       (&local_178,local_170 + 0xf,local_170[0xd] + 600,*(undefined8 *)(this + 0x48)
                        ,&local_158);
  }
  else {
    lVar10 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar29;
    if (*(long *)(this + 0x20) != 0) goto LAB_0012352b;
LAB_00123c76:
    lVar10 = *(long *)(lVar10 + 0x68);
    if (bVar19 != 0) {
LAB_00123c84:
      createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
                ((sse2 *)&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar23,this + 0x28,
                 lVar10 + 600);
      goto LAB_00123577;
    }
LAB_00124930:
    embree::sse2::createPrimRefArray
              (&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar29,this + 0x28,lVar10 + 600);
LAB_00124508:
    dVar35 = _LC61;
    local_110 = local_c0;
    uVar13 = *(undefined8 *)(this + 0x18);
    local_118 = local_c8;
    local_158 = local_108;
    uStack_150 = pfStack_100;
    dVar34 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC59 * __LC60;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC61 <= dVar34) {
      uVar9 = (long)(dVar34 - _LC61) ^ 0x8000000000000000;
    }
    else {
      uVar9 = (ulong)dVar34;
    }
    uVar9 = uVar9 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar9);
    ppuVar24 = *(undefined ***)(this + 0x10);
    uVar30 = local_110 - local_118;
    if ((uVar30 == 0) || (uVar9 == 0)) {
      uVar9 = 0x400;
    }
    else {
      bVar19 = *(byte *)((long)ppuVar24 + 0x182);
      uVar12 = embree::TaskScheduler::threadCount();
      lVar10 = (2 - (ulong)bVar19) * (long)ppuVar24[0x11];
      uVar18 = lVar10 * 0x14;
      if (((uVar9 - 1) + uVar18) / uVar18 < uVar12) {
        uVar18 = lVar10 * 0x50;
        if ((long)uVar18 < 0) {
          dVar34 = (double)(uVar18 >> 1) + (double)(uVar18 >> 1);
        }
        else {
          dVar34 = (double)(long)uVar18;
        }
        dVar34 = dVar34 / ((double)uVar9 / (double)uVar30);
        if ((double)((ulong)dVar34 & _LC67) < _LC62) {
          dVar34 = (double)((ulong)((double)(long)dVar34 +
                                   (double)(-(ulong)((double)(long)dVar34 < dVar34) & _LC64)) |
                           ~_LC67 & (ulong)dVar34);
        }
        if (dVar35 <= dVar34) {
          uVar9 = (long)(dVar34 - dVar35) ^ 0x8000000000000000;
        }
        else {
          uVar9 = (ulong)dVar34;
        }
        ppuVar24 = *(undefined ***)(this + 0x10);
        uVar30 = local_110 - local_118;
      }
      else {
        ppuVar24 = *(undefined ***)(this + 0x10);
        uVar9 = 0x400;
        uVar30 = local_110 - local_118;
      }
    }
    local_1a0 = *(undefined ***)(this + 0x48);
    *(ulong *)(this + 0x80) = uVar9;
    *(undefined8 *)(this + 0x50) = 4;
    local_188 = &PTR_operator___0012fa80;
    *(undefined8 *)(this + 0x58) = 0x28;
    local_180 = *(undefined8 *)(ppuVar24[0xd] + 0x260);
    local_170 = &local_1a8;
    local_190 = (undefined **)0x0;
    local_1a8 = uVar13;
    local_178 = local_1a0;
    local_168 = &local_158;
    if (uVar30 == 1) {
      fVar33 = *(float *)((long)local_1a0 + 0x14) - *(float *)((long)local_1a0 + 4);
      fVar33 = (fVar33 + (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1))) *
               (*(float *)(local_1a0 + 2) - *(float *)local_1a0) +
               fVar33 * (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1));
      dVar35 = (double)(fVar33 + fVar33) + 0.0;
      uVar9 = 1;
    }
    else {
      local_198 = &local_1a0;
      local_108 = &local_190;
      pfStack_100 = &local_1ac;
      local_f8 = (TaskGroupContext *)&local_198;
      dVar35 = (double)_ZN6embree24parallel_reduce_internalImdZNS_15parallel_reduceImdZNS_4sse230BVHBuilderBinnedFastSpatialSAH5buildINS_10NodeRefPtrILi4EEENS_4BVHNILi4EE11CreateAllocENS_10AABBNode_tIS6_Li4EE7Create2ENSB_4Set2ENS2_17CreateLeafSpatialILi4ENS_9TriangleMILi4EEEEENS2_23TriangleSplitterFactoryENS_5Scene29BuildProgressMonitorInterfaceEEET_T0_T1_T2_RKT3_T4_T5_PNS_7PrimRefEmRKNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEERKNS2_17GeneralBVHBuilder8SettingsEEUlRKNS_5rangeImEEE_St4plusIdEEESM_SL_SL_RKSM_RKSN_RKSO_EUlS18_E_S1D_EESM_SL_SL_SL_SL_S1F_S1H_S1J__isra_0
                                 (uVar30,0,uVar30,&local_190,
                                  (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108);
      uVar9 = local_110 - local_118;
    }
    pfStack_100 = (float *)&local_1b0;
    local_1ac = _LC30 / (float)dVar35;
    local_1b0 = 0x41200000;
    local_198 = (undefined ***)0x0;
    local_108 = &local_1a0;
    local_f8 = (TaskGroupContext *)&local_158;
    pfStack_f0 = &local_1ac;
    TaskScheduler::
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (0,uVar9,1,(_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,
               (TaskGroupContext *)&local_198);
    embree::TaskScheduler::wait();
    if (local_198 != (undefined ***)0x0) {
      local_190 = (undefined **)local_198;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_190);
    }
    local_c8 = 0;
    local_c0 = local_110 - local_118;
    local_108 = local_158;
    pfStack_100 = (float *)uStack_150;
    local_f8 = (TaskGroupContext *)local_148;
    pfStack_f0 = (float *)uStack_140;
    local_e8 = local_138;
    uStack_e0 = uStack_130;
    local_d8 = local_128;
    uStack_d0 = uStack_120;
    local_190 = ppuVar24;
    local_b8 = pvVar29;
    uVar13 = GeneralBVHBuilder::
             build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::Scene::BuildProgressMonitorInterface>
                       (&local_178,local_1a0,
                        (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,ppuVar24 + 0xf
                        ,&local_190,&local_188,this + 0x50);
  }
  local_108 = local_158;
  pfStack_100 = (float *)uStack_150;
  local_f8 = (TaskGroupContext *)local_148;
  pfStack_f0 = (float *)uStack_140;
  local_e8 = local_158;
  uStack_e0 = uStack_150;
  local_d8 = local_148;
  uStack_d0 = uStack_140;
  embree::BVHN<4>::set(*(undefined8 *)(this + 0x10),uVar13,&local_108,local_110 - local_118);
  embree::BVHN<4>::layoutLargeNodes(*(ulong *)(this + 0x10));
  if ((*(long *)(this + 0x18) != 0) && ((*(byte *)(*(long *)(this + 0x18) + 0x230) & 1) == 0)) {
    pvVar5 = *(void **)(this + 0x48);
    lVar10 = *(long *)(this + 0x40);
    if (pvVar5 != (void *)0x0) {
      if ((ulong)(lVar10 << 5) < 0x1c00000) {
        embree::alignedFree(pvVar5);
      }
      else {
        embree::os_free(pvVar5,lVar10 << 5,(bool)this[0x30]);
      }
    }
    if (lVar10 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar10 * -0x20,1);
    }
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x38) = 0;
  }
  lVar10 = *(long *)(this + 0x10);
  plVar17 = (long *)(lVar10 + 0x130);
  plVar15 = (long *)(lVar10 + 0x170);
  do {
    while (*plVar17 != 0) {
      lVar14 = *(long *)(*plVar17 + 0x18);
      *(long *)(*plVar17 + 0x18) = *plVar15;
      LOCK();
      *plVar15 = *plVar17;
      UNLOCK();
      LOCK();
      *plVar17 = lVar14;
      UNLOCK();
    }
    LOCK();
    *plVar17 = 0;
    UNLOCK();
    plVar17 = plVar17 + 1;
  } while (plVar15 != plVar17);
  plVar17 = *(long **)(lVar10 + 0x1a8);
  plVar15 = *(long **)(lVar10 + 0x1b0);
  if (plVar17 != plVar15) {
    do {
      while( true ) {
        lVar14 = *plVar17;
        if (lVar10 + 0x78 != *(long *)(lVar14 + 8)) break;
        embree::MutexSys::lock();
        if (lVar10 + 0x78 == *(long *)(lVar14 + 8)) {
          LOCK();
          plVar27 = (long *)(*(long *)(lVar14 + 8) + 0x118);
          *plVar27 = *plVar27 + *(long *)(lVar14 + 0xa8) + *(long *)(lVar14 + 0x68);
          UNLOCK();
          LOCK();
          plVar27 = (long *)(*(long *)(lVar14 + 8) + 0x120);
          *plVar27 = *plVar27 +
                     (((*(long *)(lVar14 + 0x98) + *(long *)(lVar14 + 0x58)) -
                      *(long *)(lVar14 + 0x50)) - *(long *)(lVar14 + 0x90));
          UNLOCK();
          LOCK();
          plVar27 = (long *)(*(long *)(lVar14 + 8) + 0x128);
          *plVar27 = *plVar27 + *(long *)(lVar14 + 0xb0) + *(long *)(lVar14 + 0x70);
          UNLOCK();
          *(undefined8 *)(lVar14 + 0x48) = 0;
          *(undefined8 *)(lVar14 + 0x58) = 0;
          *(undefined8 *)(lVar14 + 0x50) = 0;
          *(undefined8 *)(lVar14 + 0x68) = 0;
          *(undefined8 *)(lVar14 + 0x70) = 0;
          *(undefined8 *)(lVar14 + 0x60) = 0;
          *(undefined8 *)(lVar14 + 0x88) = 0;
          *(undefined8 *)(lVar14 + 0x98) = 0;
          *(undefined8 *)(lVar14 + 0x90) = 0;
          *(undefined8 *)(lVar14 + 0xa8) = 0;
          *(undefined8 *)(lVar14 + 0xb0) = 0;
          *(undefined8 *)(lVar14 + 0xa0) = 0;
          LOCK();
          *(undefined8 *)(lVar14 + 8) = 0;
          UNLOCK();
        }
        plVar17 = plVar17 + 1;
        embree::MutexSys::unlock();
        if (plVar15 == plVar17) goto LAB_00123fe7;
      }
      plVar17 = plVar17 + 1;
    } while (plVar15 != plVar17);
LAB_00123fe7:
    if (*(long *)(lVar10 + 0x1a8) != *(long *)(lVar10 + 0x1b0)) {
      *(long *)(lVar10 + 0x1b0) = *(long *)(lVar10 + 0x1a8);
    }
  }
  embree::BVHN<4>::postBuild(local_1e0);
  if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
LAB_00124a46:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
code_r0x001239c7:
  if ((int)puVar28[5] == 1) {
    embree::os_free(puVar28,puVar28[2] + 0x40,*(bool *)((long)puVar28 + 0x2c));
LAB_00123975:
    if (plVar15 != (long *)0x0) {
      (**(code **)(*plVar15 + 0x20))(plVar15,-(uVar9 + 0x40 + uVar30),1);
    }
  }
  goto joined_r0x00123943;
code_r0x00123b43:
  if ((int)puVar28[5] == 1) {
    embree::os_free(puVar28,puVar28[2] + 0x40,*(bool *)((long)puVar28 + 0x2c));
LAB_00123af5:
    if (plVar17 != (long *)0x0) {
      (**(code **)(*plVar17 + 0x20))(plVar17,-(uVar9 + 0x40 + uVar30),1);
    }
  }
  goto joined_r0x00123ac2;
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMo...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMo___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  long lVar1;
  undefined8 uVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  
  uVar6 = *(ulong *)(this + 8);
  uVar3 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < uVar6 - uVar3) {
    uVar6 = uVar6 + uVar3 >> 1;
    spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar3,uVar6,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x38));
    spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar6,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x38));
    embree::TaskScheduler::wait();
    return;
  }
  if (uVar3 < uVar6) {
    lVar5 = uVar3 * 0x70;
    do {
      lVar1 = *(long *)(this + 0x20);
      lVar4 = *(long *)(this + 0x28) + lVar5;
      lVar5 = lVar5 + 0x70;
      uVar2 = sse2::GeneralBVHBuilder::
              BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
              ::recurse(*(undefined8 *)(this + 0x30),lVar4,1);
      *(undefined8 *)(lVar1 + uVar3 * 8) = uVar2;
      uVar3 = uVar3 + 1;
    } while (uVar3 < uVar6);
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::recurse(ulong *param_1,long *param_2,char param_3)

{
  MutexSys *pMVar1;
  undefined8 *puVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  long lVar6;
  long lVar7;
  undefined8 *puVar8;
  float *pfVar9;
  long *plVar10;
  undefined8 *puVar11;
  undefined8 uVar12;
  ulong uVar13;
  long lVar14;
  long *plVar15;
  ulong uVar16;
  undefined8 *puVar17;
  ulong uVar18;
  long lVar19;
  long in_FS_OFFSET;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  float fVar25;
  undefined4 uVar26;
  undefined4 uVar27;
  undefined4 uVar28;
  undefined4 uVar29;
  FastAllocator *in_stack_00000008;
  MutexSys *in_stack_00000010;
  long *local_a98;
  MutexSys *local_a80;
  FastAllocator *local_a78;
  MutexSys *local_a38;
  MutexSys *pMStack_a28;
  long local_a20;
  undefined8 uStack_a18;
  undefined8 local_a10;
  undefined8 uStack_a08;
  undefined8 local_a00;
  undefined8 uStack_9f8;
  undefined8 local_9f0;
  undefined8 uStack_9e8;
  long local_9e0;
  long local_9d8;
  undefined8 local_9d0;
  undefined8 local_9c0;
  undefined8 uStack_9b8;
  undefined8 local_9b0;
  undefined8 uStack_9a8;
  undefined8 local_9a0;
  undefined8 uStack_998;
  undefined8 local_990;
  undefined8 uStack_988;
  undefined8 local_980;
  undefined8 local_978;
  undefined8 local_970;
  MutexSys *local_960;
  undefined1 local_958;
  undefined4 local_950;
  undefined4 uStack_94c;
  undefined4 uStack_948;
  undefined4 uStack_944;
  float local_940;
  float fStack_93c;
  float fStack_938;
  float fStack_934;
  undefined4 local_930;
  undefined4 uStack_92c;
  undefined4 uStack_928;
  undefined4 uStack_924;
  float local_920;
  float fStack_91c;
  float fStack_918;
  float fStack_914;
  long local_910;
  long lStack_908;
  long local_900;
  MutexSys *local_8f0;
  long *local_8e8;
  undefined8 local_8e0;
  undefined4 uStack_8d8;
  undefined4 uStack_8d4;
  float local_8d0;
  float fStack_8cc;
  float fStack_8c8;
  float fStack_8c4;
  undefined4 local_8c0;
  undefined4 uStack_8bc;
  undefined4 uStack_8b8;
  undefined4 uStack_8b4;
  float local_8b0;
  float fStack_8ac;
  float fStack_8a8;
  float fStack_8a4;
  long local_8a0;
  long lStack_898;
  long local_890;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
  local_880 [84];
  float local_82c;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
  local_800 [176];
  long local_750;
  undefined1 local_748 [8];
  long local_740 [4];
  undefined8 local_720;
  undefined8 uStack_718;
  undefined8 local_710;
  undefined8 uStack_708;
  long local_700;
  long local_6f8;
  undefined8 local_6f0;
  long local_6e0;
  undefined1 local_6d8;
  undefined8 local_6d0;
  undefined8 uStack_6c8;
  undefined8 local_6c0;
  undefined8 uStack_6b8;
  undefined8 local_6b0;
  undefined8 uStack_6a8;
  undefined8 local_6a0;
  undefined8 uStack_698;
  undefined8 local_690;
  undefined8 local_688;
  undefined8 local_680;
  long local_670 [196];
  long lStack_50;
  long local_48;
  
  lVar19 = lRam000000000012529b;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_a80 = in_stack_00000010;
  local_a78 = in_stack_00000008;
  if (in_stack_00000008 == (FastAllocator *)0x0) {
    local_a78 = *(FastAllocator **)param_1[10];
    local_a80 = *(MutexSys **)(in_FS_OFFSET + lRam000000000012529b);
    if (local_a80 == (MutexSys *)0x0) {
      local_a80 = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
      embree::MutexSys::MutexSys(local_a80);
      *(MutexSys **)(local_a80 + 0x40) = local_a80;
      *(undefined8 *)(local_a80 + 8) = 0;
      *(undefined8 *)(local_a80 + 0x48) = 0;
      *(undefined8 *)(local_a80 + 0x50) = 0;
      *(undefined8 *)(local_a80 + 0x58) = 0;
      *(undefined8 *)(local_a80 + 0x60) = 0;
      *(undefined8 *)(local_a80 + 0x68) = 0;
      *(undefined8 *)(local_a80 + 0x70) = 0;
      *(MutexSys **)(local_a80 + 0x80) = local_a80;
      *(undefined8 *)(local_a80 + 0x88) = 0;
      *(undefined8 *)(local_a80 + 0x90) = 0;
      *(undefined8 *)(local_a80 + 0x98) = 0;
      *(undefined8 *)(local_a80 + 0xa0) = 0;
      *(undefined8 *)(local_a80 + 0xa8) = 0;
      *(undefined8 *)(local_a80 + 0xb0) = 0;
      *(MutexSys **)(in_FS_OFFSET + lVar19) = local_a80;
      embree::MutexSys::lock();
      local_8f0 = local_a80;
      if (__MutexSys == _preBuild) {
        std::
        vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
        ::
        _M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>
                  ((vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
                    *)&FastAllocator::s_thread_local_allocators,__MutexSys,&local_8f0);
        pMVar1 = local_8f0;
        if (local_8f0 != (MutexSys *)0x0) {
          embree::MutexSys::~MutexSys(local_8f0);
          embree::alignedFree(pMVar1);
        }
      }
      else {
        *__MutexSys = local_a80;
        __MutexSys = __MutexSys + 1;
      }
      embree::MutexSys::unlock();
    }
    local_a80 = local_a80 + 0x40;
  }
  if ((param_3 != '\0') && ((ulong)(param_2[0xb] - param_2[10]) <= param_1[6])) {
    if ((code *)**(undefined8 **)param_1[0x10] == Scene::BuildProgressMonitorInterface::operator())
    {
      embree::Scene::progressMonitor((double)(ulong)(param_2[0xb] - param_2[10]));
    }
    else {
      (*(code *)**(undefined8 **)param_1[0x10])();
    }
  }
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::find
            (local_880,(PrimInfoExtRange *)param_1[9],(ulong)(param_2 + 2));
  lVar19 = param_2[10];
  uVar16 = param_2[0xb] - lVar19;
  if (((uVar16 <= param_1[3]) || (param_1[1] <= *param_2 + 8U)) ||
     ((uVar16 <= param_1[4] &&
      (fVar21 = *(float *)((long)param_2 + 0x24) - *(float *)((long)param_2 + 0x14),
      fVar21 = (*(float *)(param_2 + 4) - *(float *)(param_2 + 2)) *
               (fVar21 + (*(float *)(param_2 + 5) - *(float *)(param_2 + 3))) +
               fVar21 * (*(float *)(param_2 + 5) - *(float *)(param_2 + 3)),
      (float)((uVar16 - 1) + (1L << ((byte)param_1[2] & 0x3f)) >> ((byte)param_1[2] & 0x3f)) *
      fVar21 * *(float *)((long)param_1 + 0x2c) <=
      fVar21 * *(float *)(param_1 + 5) + *(float *)((long)param_1 + 0x2c) * local_82c)))) {
    lVar14 = param_2[0xb] * 0x20;
    puVar8 = (undefined8 *)(*(long *)param_1[9] + lVar14);
    puVar17 = (undefined8 *)(*(long *)param_1[9] + lVar19 * 0x20);
    if (puVar8 != puVar17) {
      lVar14 = lVar14 + lVar19 * -0x20;
      uVar16 = lVar14 >> 5;
      if (uVar16 == 0) {
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar8,0xfffffffffffffffe);
      }
      else {
        lVar19 = 0x3f;
        if (uVar16 != 0) {
          for (; uVar16 >> lVar19 == 0; lVar19 = lVar19 + -1) {
          }
        }
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar8,(long)(int)lVar19 * 2);
        if (0x200 < lVar14) {
          puVar11 = puVar17 + 0x40;
          std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar11)
          ;
          for (; puVar8 != puVar11; puVar11 = puVar11 + 4) {
            while( true ) {
              uVar12 = puVar11[2];
              uVar3 = puVar11[3];
              uVar4 = *puVar11;
              uVar5 = puVar11[1];
              uVar16 = CONCAT44(*(undefined4 *)((long)puVar11 + 0x1c),
                                *(undefined4 *)((long)puVar11 + 0xc));
              puVar17 = puVar11;
              if (CONCAT44(*(undefined4 *)((long)puVar11 + -4),
                           *(undefined4 *)((long)puVar11 + -0x14)) <= uVar16) break;
              do {
                puVar2 = puVar17;
                puVar17 = puVar2 + -4;
                *puVar2 = *puVar17;
                puVar2[1] = puVar2[-3];
                *(undefined4 *)(puVar2 + 2) = *(undefined4 *)(puVar2 + -2);
                *(undefined4 *)((long)puVar2 + 0x14) = *(undefined4 *)((long)puVar2 + -0xc);
                *(undefined4 *)(puVar2 + 3) = *(undefined4 *)(puVar2 + -1);
                *(undefined4 *)((long)puVar2 + 0x1c) = *(undefined4 *)((long)puVar2 + -4);
              } while (uVar16 < CONCAT44(*(undefined4 *)((long)puVar2 + -0x24),
                                         *(undefined4 *)((long)puVar2 + -0x34)));
              puVar11 = puVar11 + 4;
              *puVar17 = uVar4;
              puVar2[-3] = uVar5;
              puVar2[-2] = uVar12;
              puVar2[-1] = uVar3;
              if (puVar8 == puVar11) goto LAB_00124d98;
            }
            *puVar11 = uVar4;
            puVar11[1] = uVar5;
            puVar11[2] = uVar12;
            puVar11[3] = uVar3;
          }
          goto LAB_00124d98;
        }
      }
      std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar8);
    }
LAB_00124d98:
    puVar8 = (undefined8 *)createLargeLeaf(param_1,param_2);
    goto LAB_00124dd2;
  }
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::split
            ((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
              *)param_1[9],(Split2 *)local_880,(PrimInfoExtRange *)(param_2 + 2),
             (PrimInfoExtRange *)&local_a20,(PrimInfoExtRange *)&local_9c0);
  uVar26 = _LC3;
  fVar21 = _LC1;
  local_748[0] = 0;
  local_6d8 = 0;
  local_750 = *param_2 + 1;
  local_740[0] = local_a20;
  local_740[1] = uStack_a18;
  local_740[2] = local_a10;
  local_740[3] = uStack_a08;
  local_690 = local_980;
  local_720 = local_a00;
  uStack_718 = uStack_9f8;
  local_688 = local_978;
  local_710 = local_9f0;
  uStack_708 = uStack_9e8;
  local_6d0 = local_9c0;
  uStack_6c8 = uStack_9b8;
  local_700 = local_9e0;
  local_6f8 = local_9d8;
  local_6f0 = local_9d0;
  local_6c0 = local_9b0;
  uStack_6b8 = uStack_9a8;
  local_6b0 = local_9a0;
  uStack_6a8 = uStack_998;
  local_6a0 = local_990;
  uStack_698 = uStack_988;
  local_680 = local_970;
  fVar23 = fVar21;
  fVar24 = fVar21;
  fVar25 = fVar21;
  uVar27 = uVar26;
  uVar28 = uVar26;
  uVar29 = uVar26;
  local_6e0 = local_750;
  if (*param_1 < 3) {
    uVar16 = param_1[7];
    if (uVar16 < (ulong)(param_2[0xb] - param_2[10])) {
      lVar19 = 0xe0;
      uVar18 = 2;
      goto LAB_00125bc9;
    }
    uVar18 = 2;
    plVar10 = local_670;
LAB_001253c7:
    local_a98 = &local_750;
    uVar16 = ((long)plVar10 - (long)local_a98 >> 4) * 0x6db6db6db6db6db7;
    if (uVar16 == 0) {
      std::
      __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (local_a98,plVar10,0xfffffffffffffffe);
    }
    else {
      lVar19 = 0x3f;
      if (uVar16 != 0) {
        for (; uVar16 >> lVar19 == 0; lVar19 = lVar19 + -1) {
        }
      }
      std::
      __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (local_a98,plVar10,(long)(int)lVar19 * 2);
      if (0x700 < (long)plVar10 - (long)local_a98) {
        plVar15 = &lStack_50;
        std::
        __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (local_a98,plVar15);
        for (; plVar10 != plVar15; plVar15 = plVar15 + 0xe) {
          std::
          __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                    (plVar15);
        }
        goto LAB_001254a3;
      }
    }
    std::
    __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
              (local_a98,plVar10);
  }
  else {
    uVar18 = 2;
    plVar10 = local_670;
    do {
      uVar13 = 0;
      uVar16 = 0xffffffffffffffff;
      pfVar9 = (float *)local_740;
      lVar19 = local_6f8;
      lVar14 = local_700;
      fVar22 = _LC1;
      while( true ) {
        if ((param_1[3] < (ulong)(lVar19 - lVar14)) &&
           (fVar20 = (pfVar9[4] - *pfVar9) * ((pfVar9[5] - pfVar9[1]) + (pfVar9[6] - pfVar9[2])) +
                     (pfVar9[5] - pfVar9[1]) * (pfVar9[6] - pfVar9[2]), fVar22 < fVar20)) {
          uVar16 = uVar13;
          fVar22 = fVar20;
        }
        uVar13 = uVar13 + 1;
        if (uVar13 == uVar18) break;
        lVar19 = *(long *)(pfVar9 + 0x2e);
        lVar14 = *(long *)(pfVar9 + 0x2c);
        pfVar9 = pfVar9 + 0x1c;
      }
      if (uVar16 == 0xffffffffffffffff) {
        lVar19 = (long)plVar10 - (long)&local_750;
        goto LAB_0012539f;
      }
      uVar18 = uVar18 + 1;
      local_960 = (MutexSys *)(*param_2 + 1);
      local_8e0 = (ulong *)CONCAT44(uVar26,uVar26);
      local_958 = 0;
      local_910 = 0;
      lStack_908 = 0;
      local_900 = 0;
      local_8e8 = (long *)((ulong)local_8e8 & 0xffffffffffffff00);
      local_8a0 = 0;
      lStack_898 = 0;
      local_890 = 0;
      local_950 = uVar26;
      uStack_94c = uVar26;
      uStack_948 = uVar26;
      uStack_944 = uVar26;
      local_940 = fVar21;
      fStack_93c = fVar21;
      fStack_938 = fVar21;
      fStack_934 = fVar21;
      local_930 = uVar26;
      uStack_92c = uVar26;
      uStack_928 = uVar26;
      uStack_924 = uVar26;
      local_920 = fVar21;
      fStack_91c = fVar21;
      fStack_918 = fVar21;
      fStack_914 = fVar21;
      local_8f0 = local_960;
      uStack_8d8 = uVar26;
      uStack_8d4 = uVar26;
      local_8d0 = fVar21;
      fStack_8cc = fVar21;
      fStack_8c8 = fVar21;
      fStack_8c4 = fVar21;
      local_8c0 = uVar26;
      uStack_8bc = uVar26;
      uStack_8b8 = uVar26;
      uStack_8b4 = uVar26;
      local_8b0 = fVar21;
      fStack_8ac = fVar21;
      fStack_8a8 = fVar21;
      fStack_8a4 = fVar21;
      HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
      find(local_800,(PrimInfoExtRange *)param_1[9],(ulong)(local_740 + uVar16 * 0xe));
      HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
      split((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
             *)param_1[9],(Split2 *)local_800,(PrimInfoExtRange *)(local_740 + uVar16 * 0xe),
            (PrimInfoExtRange *)&local_950,(PrimInfoExtRange *)&local_8e0);
      *(MutexSys **)(local_748 + uVar16 * 0x70 + -8) = local_960;
      local_748[uVar16 * 0x70] = local_958;
      local_740[uVar16 * 0xe] = CONCAT44(uStack_94c,local_950);
      local_740[uVar16 * 0xe + 1] = CONCAT44(uStack_944,uStack_948);
      local_740[uVar16 * 0xe + 10] = local_900;
      local_740[uVar16 * 0xe + 2] = CONCAT44(fStack_93c,local_940);
      local_740[uVar16 * 0xe + 3] = CONCAT44(fStack_934,fStack_938);
      local_740[uVar16 * 0xe + 4] = CONCAT44(uStack_92c,local_930);
      local_740[uVar16 * 0xe + 5] = CONCAT44(uStack_924,uStack_928);
      local_740[uVar16 * 0xe + 6] = CONCAT44(fStack_91c,local_920);
      local_740[uVar16 * 0xe + 7] = CONCAT44(fStack_914,fStack_918);
      local_740[uVar16 * 0xe + 8] = local_910;
      local_740[uVar16 * 0xe + 9] = lStack_908;
      *plVar10 = (long)local_8f0;
      plVar10[2] = (long)local_8e0;
      plVar10[3] = CONCAT44(uStack_8d4,uStack_8d8);
      *(undefined1 *)(plVar10 + 1) = local_8e8._0_1_;
      plVar10[4] = CONCAT44(fStack_8cc,local_8d0);
      plVar10[5] = CONCAT44(fStack_8c4,fStack_8c8);
      plVar10[10] = local_8a0;
      plVar10[0xb] = lStack_898;
      plVar10[6] = CONCAT44(uStack_8bc,local_8c0);
      plVar10[7] = CONCAT44(uStack_8b4,uStack_8b8);
      plVar10[8] = CONCAT44(fStack_8ac,local_8b0);
      plVar10[9] = CONCAT44(fStack_8a4,fStack_8a8);
      plVar10[0xc] = local_890;
      plVar10 = plVar10 + 0xe;
    } while (uVar18 < *param_1);
    lVar19 = uVar18 * 0x70;
LAB_0012539f:
    uVar16 = param_1[7];
    if (uVar16 < (ulong)(param_2[0xb] - param_2[10])) {
LAB_00125bc9:
      local_a98 = &local_750;
      plVar10 = local_a98 + uVar18 * 0xe;
      do {
        *(bool *)(local_a98 + 1) = (ulong)(local_a98[0xb] - local_a98[10]) <= uVar16;
        local_a98 = local_a98 + 0xe;
      } while (plVar10 != local_a98);
    }
    plVar10 = (long *)(local_748 + lVar19 + -8);
    if (lVar19 != 0) goto LAB_001253c7;
  }
LAB_001254a3:
  local_a38 = (MutexSys *)local_800;
  local_a98 = &local_750;
  local_960 = (MutexSys *)0x80;
  pMVar1 = *(MutexSys **)local_a80;
  if (local_a78 != *(FastAllocator **)(pMVar1 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(pMVar1 + 8) != 0) {
      LOCK();
      *(long *)(*(long *)(pMVar1 + 8) + 0x118) =
           *(long *)(*(long *)(pMVar1 + 8) + 0x118) +
           *(long *)(pMVar1 + 0xa8) + *(long *)(pMVar1 + 0x68);
      UNLOCK();
      LOCK();
      *(long *)(*(long *)(pMVar1 + 8) + 0x120) =
           *(long *)(*(long *)(pMVar1 + 8) + 0x120) +
           (((*(long *)(pMVar1 + 0x98) + *(long *)(pMVar1 + 0x58)) - *(long *)(pMVar1 + 0x50)) -
           *(long *)(pMVar1 + 0x90));
      UNLOCK();
      LOCK();
      *(long *)(*(long *)(pMVar1 + 8) + 0x128) =
           *(long *)(*(long *)(pMVar1 + 8) + 0x128) +
           *(long *)(pMVar1 + 0xb0) + *(long *)(pMVar1 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(pMVar1 + 0x48) = 0;
    *(undefined8 *)(pMVar1 + 0x58) = 0;
    *(undefined8 *)(pMVar1 + 0x50) = 0;
    *(undefined8 *)(pMVar1 + 0x68) = 0;
    *(undefined8 *)(pMVar1 + 0x70) = 0;
    *(undefined8 *)(pMVar1 + 0x60) = 0;
    if (local_a78 == (FastAllocator *)0x0) {
      *(undefined8 *)(pMVar1 + 0x88) = 0;
      uVar12 = 0;
      *(undefined8 *)(pMVar1 + 0x98) = 0;
      *(undefined8 *)(pMVar1 + 0x90) = 0;
      *(undefined8 *)(pMVar1 + 0xa8) = 0;
      *(undefined8 *)(pMVar1 + 0xb0) = 0;
    }
    else {
      uVar12 = *(undefined8 *)(local_a78 + 0x10);
      *(undefined8 *)(pMVar1 + 0x88) = 0;
      *(undefined8 *)(pMVar1 + 0x98) = 0;
      *(undefined8 *)(pMVar1 + 0x60) = uVar12;
      *(undefined8 *)(pMVar1 + 0x90) = 0;
      *(undefined8 *)(pMVar1 + 0xa8) = 0;
      *(undefined8 *)(pMVar1 + 0xb0) = 0;
      *(undefined8 *)(pMVar1 + 0xa0) = 0;
      uVar12 = *(undefined8 *)(local_a78 + 0x10);
    }
    *(undefined8 *)(pMVar1 + 0xa0) = uVar12;
    LOCK();
    *(FastAllocator **)(pMVar1 + 8) = local_a78;
    UNLOCK();
    local_8f0 = pMVar1;
    embree::MutexSys::lock();
    plVar10 = *(long **)(local_a78 + 0x138);
    if (plVar10 == *(long **)(local_a78 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(local_a78 + 0x130),plVar10,&local_8f0);
    }
    else {
      *plVar10 = (long)pMVar1;
      *(long *)(local_a78 + 0x138) = *(long *)(local_a78 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  lVar19 = *(long *)(local_a80 + 0x10);
  *(long *)(local_a80 + 0x28) = *(long *)(local_a80 + 0x28) + 0x80;
  uVar13 = (ulong)(-(int)lVar19 & 0xf);
  uVar16 = lVar19 + 0x80 + uVar13;
  *(ulong *)(local_a80 + 0x10) = uVar16;
  if (*(ulong *)(local_a80 + 0x18) < uVar16) {
    *(long *)(local_a80 + 0x10) = lVar19;
    if (*(MutexSys **)(local_a80 + 0x20) < (MutexSys *)0x200) {
      puVar8 = (undefined8 *)FastAllocator::malloc(local_a78,(ulong *)&local_960,0x40,false);
    }
    else {
      local_8f0 = *(MutexSys **)(local_a80 + 0x20);
      puVar8 = (undefined8 *)FastAllocator::malloc(local_a78,(ulong *)&local_8f0,0x40,true);
      *(undefined8 **)(local_a80 + 8) = puVar8;
      lVar19 = *(long *)(local_a80 + 0x10);
      *(long *)(local_a80 + 0x10) = 0x80;
      *(long *)(local_a80 + 0x30) =
           (*(long *)(local_a80 + 0x18) + *(long *)(local_a80 + 0x30)) - lVar19;
      *(MutexSys **)(local_a80 + 0x18) = local_8f0;
      if (local_8f0 < (MutexSys *)0x80) {
        local_8f0 = *(MutexSys **)(local_a80 + 0x20);
        *(long *)(local_a80 + 0x10) = 0;
        puVar8 = (undefined8 *)FastAllocator::malloc(local_a78,(ulong *)&local_8f0,0x40,false);
        *(undefined8 **)(local_a80 + 8) = puVar8;
        lVar19 = *(long *)(local_a80 + 0x10);
        *(long *)(local_a80 + 0x10) = 0x80;
        *(long *)(local_a80 + 0x30) =
             (*(long *)(local_a80 + 0x18) + *(long *)(local_a80 + 0x30)) - lVar19;
        *(MutexSys **)(local_a80 + 0x18) = local_8f0;
        if (local_8f0 < (MutexSys *)0x80) {
          puVar8 = (undefined8 *)0x0;
          *(long *)(local_a80 + 0x10) = 0;
        }
      }
    }
  }
  else {
    *(ulong *)(local_a80 + 0x30) = *(long *)(local_a80 + 0x30) + uVar13;
    puVar8 = (undefined8 *)(*(long *)(local_a80 + 8) + -0x80 + uVar16);
  }
  *puVar8 = 8;
  puVar8[1] = 8;
  puVar8[2] = 8;
  puVar8[3] = 8;
  *(undefined4 *)(puVar8 + 0xc) = uVar26;
  *(undefined4 *)((long)puVar8 + 100) = uVar27;
  *(undefined4 *)(puVar8 + 0xd) = uVar28;
  *(undefined4 *)((long)puVar8 + 0x6c) = uVar29;
  *(undefined4 *)(puVar8 + 8) = uVar26;
  *(undefined4 *)((long)puVar8 + 0x44) = uVar27;
  *(undefined4 *)(puVar8 + 9) = uVar28;
  *(undefined4 *)((long)puVar8 + 0x4c) = uVar29;
  *(undefined4 *)(puVar8 + 4) = uVar26;
  *(undefined4 *)((long)puVar8 + 0x24) = uVar27;
  *(undefined4 *)(puVar8 + 5) = uVar28;
  *(undefined4 *)((long)puVar8 + 0x2c) = uVar29;
  *(float *)(puVar8 + 0xe) = fVar21;
  *(float *)((long)puVar8 + 0x74) = fVar23;
  *(float *)(puVar8 + 0xf) = fVar24;
  *(float *)((long)puVar8 + 0x7c) = fVar25;
  *(float *)(puVar8 + 10) = fVar21;
  *(float *)((long)puVar8 + 0x54) = fVar23;
  *(float *)(puVar8 + 0xb) = fVar24;
  *(float *)((long)puVar8 + 0x5c) = fVar25;
  *(float *)(puVar8 + 6) = fVar21;
  *(float *)((long)puVar8 + 0x34) = fVar23;
  *(float *)(puVar8 + 7) = fVar24;
  *(float *)((long)puVar8 + 0x3c) = fVar25;
  puVar17 = puVar8 + 4;
  plVar10 = local_a98;
  do {
    lVar19 = plVar10[3];
    puVar11 = (undefined8 *)((long)puVar17 + 4);
    lVar14 = plVar10[2];
    lVar6 = plVar10[5];
    uVar26 = *(undefined4 *)((long)plVar10 + 0x24);
    lVar7 = plVar10[4];
    *(undefined4 *)(puVar17 + 4) = *(undefined4 *)((long)plVar10 + 0x14);
    *(int *)puVar17 = (int)lVar14;
    *(int *)(puVar17 + 8) = (int)lVar19;
    *(int *)(puVar17 + 2) = (int)lVar7;
    *(undefined4 *)(puVar17 + 6) = uVar26;
    *(int *)(puVar17 + 10) = (int)lVar6;
    puVar17 = puVar11;
    plVar10 = plVar10 + 0xe;
  } while ((undefined8 *)((long)puVar8 + uVar18 * 4 + 0x20) != puVar11);
  uVar16 = 0;
  if (param_1[6] < (ulong)(param_2[0xb] - param_2[10])) {
    local_8f0 = local_a38;
    pMStack_a28 = (MutexSys *)0x0;
    local_8e8 = local_a98;
    local_8e0 = param_1;
    TaskScheduler::
    spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
              (0,uVar18,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_8f0,
               (TaskGroupContext *)&pMStack_a28);
    embree::TaskScheduler::wait();
    if (pMStack_a28 != (MutexSys *)0x0) {
      local_960 = pMStack_a28;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_960);
    }
    uVar16 = 0;
    do {
      puVar8[uVar16] = *(undefined8 *)(local_a38 + uVar16 * 8);
      uVar16 = uVar16 + 1;
    } while (uVar16 != uVar18);
  }
  else {
    do {
      uVar12 = recurse(param_1,local_a98,0);
      *(undefined8 *)(local_800 + uVar16 * 8) = uVar12;
      uVar16 = uVar16 + 1;
      local_a98 = local_a98 + 0xe;
    } while (uVar16 != uVar18);
    uVar16 = 0;
    do {
      puVar8[uVar16] = *(undefined8 *)(local_a38 + uVar16 * 8);
      uVar16 = uVar16 + 1;
    } while (uVar16 != uVar18);
  }
LAB_00124dd2:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return puVar8;
}



/* embree::NodeRefPtr<4> embree::sse2::GeneralBVHBuilder::build<embree::NodeRefPtr<4>,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::Scene::BuildProgressMonitorInterface>(embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>&, embree::PrimRef*, embree::sse2::PrimInfoExtRange const&,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > > const&,
   embree::Scene::BuildProgressMonitorInterface const&, embree::sse2::GeneralBVHBuilder::Settings
   const&) */

void embree::sse2::GeneralBVHBuilder::
     build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::Scene::BuildProgressMonitorInterface>
               (undefined8 param_1,undefined8 param_2,undefined4 *param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,ulong *param_7)

{
  long in_FS_OFFSET;
  undefined1 local_132;
  undefined1 local_131;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 uStack_120;
  undefined8 local_118;
  undefined8 local_108;
  undefined1 local_100;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  ulong local_98;
  ulong uStack_90;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  ulong uStack_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 *local_48;
  undefined1 *local_40;
  undefined1 *local_38;
  undefined8 local_30;
  undefined8 *local_28;
  undefined8 *local_20;
  undefined8 local_18;
  long local_10;
  
  local_98 = *param_7;
  uStack_90 = param_7[1];
  local_88 = param_7[2];
  uStack_80 = param_7[3];
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = param_7[4];
  uStack_70 = param_7[5];
  local_68 = param_7[6];
  uStack_60 = param_7[7];
  local_48 = &local_130;
  local_40 = &local_131;
  local_38 = &local_132;
  local_20 = &local_108;
  local_28 = &local_128;
  local_130 = param_4;
  local_58 = param_2;
  local_50 = param_1;
  local_30 = param_5;
  local_18 = param_6;
  if (0x10 < *param_7) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  local_b8 = *(undefined8 *)(param_3 + 0x10);
  local_f8 = *param_3;
  uStack_f4 = param_3[1];
  uStack_f0 = param_3[2];
  uStack_ec = param_3[3];
  local_100 = 0;
  local_e8 = param_3[4];
  uStack_e4 = param_3[5];
  uStack_e0 = param_3[6];
  uStack_dc = param_3[7];
  local_d8 = param_3[8];
  uStack_d4 = param_3[9];
  uStack_d0 = param_3[10];
  uStack_cc = param_3[0xb];
  local_108 = 1;
  local_c8 = param_3[0xc];
  uStack_c4 = param_3[0xd];
  uStack_c0 = param_3[0xe];
  uStack_bc = param_3[0xf];
  local_b0 = *(undefined8 *)(param_3 + 0x12);
  local_a8 = *(undefined8 *)(param_3 + 0x14);
  local_128 = 0;
  uStack_120 = 0;
  local_118 = 0;
  BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
  ::recurse(&local_98,local_20,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::build() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::build(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  char cVar1;
  undefined8 *puVar2;
  Geometry *pGVar3;
  ulong *puVar4;
  void *pvVar5;
  string *psVar6;
  long lVar7;
  uint uVar8;
  ulong uVar9;
  long lVar10;
  undefined8 *puVar11;
  ulong uVar12;
  undefined8 uVar13;
  long lVar14;
  long *plVar15;
  size_t sVar16;
  long *plVar17;
  ulong uVar18;
  byte bVar19;
  uint uVar20;
  long *plVar21;
  ulong *puVar22;
  vector_t *pvVar23;
  undefined **ppuVar24;
  uint uVar25;
  undefined8 *puVar26;
  long *plVar27;
  ulong *puVar28;
  vector_t *pvVar29;
  ulong uVar30;
  char *__s;
  vector_t *pvVar31;
  long in_FS_OFFSET;
  bool bVar32;
  float fVar33;
  double dVar34;
  double dVar35;
  double local_1e0;
  undefined4 local_1b0;
  float local_1ac;
  undefined8 local_1a8;
  undefined **local_1a0;
  undefined ***local_198;
  undefined **local_190;
  undefined **local_188;
  undefined8 local_180;
  undefined **local_178;
  undefined8 *local_170;
  undefined ****local_168;
  undefined ***local_158;
  undefined8 uStack_150;
  undefined8 local_148;
  undefined8 uStack_140;
  undefined ***local_138;
  undefined8 uStack_130;
  undefined8 local_128;
  undefined8 uStack_120;
  long local_118;
  long local_110;
  undefined ***local_108;
  float *pfStack_100;
  TaskGroupContext *local_f8;
  float *pfStack_f0;
  undefined ***local_e8;
  undefined8 uStack_e0;
  undefined8 local_d8;
  undefined8 uStack_d0;
  long local_c8;
  long local_c0;
  vector_t *local_b8;
  long *local_a8 [2];
  long local_98 [2];
  long *local_88;
  long local_80;
  long local_78 [2];
  ulong *local_68;
  long local_60;
  ulong local_58 [5];
  
  local_58[3] = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(this + 0x20) == 0) {
LAB_0012665f:
    lVar10 = *(long *)(this + 0x18);
    pvVar23 = *(vector_t **)(lVar10 + 0x288);
    *(int *)(this + 0x98) = (int)pvVar23;
    if (pvVar23 == (vector_t *)0x0) goto LAB_0012667c;
    psVar6 = *(string **)(this + 0x10);
    bVar19 = *(byte *)(*(long *)(lVar10 + 0x188) + 0x464);
    if (*(long *)(lVar10 + 0x1d0) == 0) {
      uVar25 = 0;
      uVar20 = 0;
      if (bVar19 != 0) goto LAB_00126d6b;
LAB_001275a0:
      bVar19 = 0;
      __s = "BuilderFastSpatialSAH";
    }
    else {
      uVar20 = 0;
      uVar25 = 0;
      lVar14 = 0;
      do {
        lVar7 = *(long *)(*(long *)(lVar10 + 0x1e0) + lVar14 * 8);
        if ((((lVar7 != 0) && ((*(byte *)(lVar7 + 0x3e) & 0x20) != 0)) &&
            (*(char *)(lVar7 + 0x3c) == '\x14')) &&
           ((*(int *)(lVar7 + 0x24) == 1 &&
            (uVar8 = (uint)lVar14, bVar32 = uVar25 < uVar8, uVar25 = uVar20, bVar32)))) {
          uVar25 = uVar8;
          uVar20 = uVar8;
        }
        lVar14 = lVar14 + 1;
      } while (*(long *)(lVar10 + 0x1d0) != lVar14);
      bVar19 = bVar19 | 0x7ffffff < uVar25;
      uVar20 = uVar25;
      if (bVar19 == 0) goto LAB_001275a0;
LAB_00126d6b:
      uVar25 = uVar20;
      __s = "BuilderFastSpatialPresplitSAH";
    }
    local_a8[0] = local_98;
    std::__cxx11::string::_M_construct((ulong)local_a8,'\x01');
    *(undefined1 *)local_a8[0] = 0x34;
    plVar15 = (long *)std::__cxx11::string::_M_replace((ulong)local_a8,0,(char *)0x0,0x1232cc);
    plVar17 = plVar15 + 2;
    if ((long *)*plVar15 == plVar17) {
      uVar9 = plVar15[1] + 1;
      plVar21 = plVar17;
      plVar27 = local_78;
      if (7 < (uint)uVar9) {
        uVar30 = 0;
        do {
          uVar20 = (int)uVar30 + 8;
          uVar18 = (ulong)uVar20;
          *(undefined8 *)((long)local_78 + uVar30) = *(undefined8 *)((long)plVar17 + uVar30);
          uVar30 = uVar18;
        } while (uVar20 < ((uint)uVar9 & 0xfffffff8));
        plVar27 = (long *)((long)local_78 + uVar18);
        plVar21 = (long *)(uVar18 + (long)plVar17);
      }
      lVar10 = 0;
      if ((uVar9 & 4) != 0) {
        *(int *)plVar27 = (int)*plVar21;
        lVar10 = 4;
      }
      if ((uVar9 & 2) != 0) {
        *(undefined2 *)((long)plVar27 + lVar10) = *(undefined2 *)((long)plVar21 + lVar10);
        lVar10 = lVar10 + 2;
      }
      local_88 = local_78;
      if ((uVar9 & 1) != 0) {
        *(undefined1 *)((long)plVar27 + lVar10) = *(undefined1 *)((long)plVar21 + lVar10);
      }
    }
    else {
      local_78[0] = plVar15[2];
      local_88 = (long *)*plVar15;
    }
    local_80 = plVar15[1];
    *plVar15 = (long)plVar17;
    plVar15[1] = 0;
    *(undefined1 *)(plVar15 + 2) = 0;
    sVar16 = strlen(__s);
    if (0x3fffffffffffffffU - local_80 < sVar16) {
      std::__throw_length_error("basic_string::append");
      goto LAB_001276c6;
    }
    plVar17 = (long *)std::__cxx11::string::_M_append((char *)&local_88,(ulong)__s);
    puVar4 = (ulong *)(plVar17 + 2);
    if ((ulong *)*plVar17 == puVar4) {
      uVar9 = plVar17[1] + 1;
      puVar22 = puVar4;
      puVar28 = local_58;
      if (7 < (uint)uVar9) {
        uVar30 = 0;
        do {
          uVar20 = (int)uVar30 + 8;
          uVar18 = (ulong)uVar20;
          *(undefined8 *)((long)local_58 + uVar30) = *(undefined8 *)((long)puVar4 + uVar30);
          uVar30 = uVar18;
        } while (uVar20 < ((uint)uVar9 & 0xfffffff8));
        puVar28 = (ulong *)((long)local_58 + uVar18);
        puVar22 = (ulong *)(uVar18 + (long)puVar4);
      }
      lVar10 = 0;
      if ((uVar9 & 4) != 0) {
        *(int *)puVar28 = (int)*puVar22;
        lVar10 = 4;
      }
      if ((uVar9 & 2) != 0) {
        *(undefined2 *)((long)puVar28 + lVar10) = *(undefined2 *)((long)puVar22 + lVar10);
        lVar10 = lVar10 + 2;
      }
      local_68 = local_58;
      if ((uVar9 & 1) != 0) {
        *(undefined1 *)((long)puVar28 + lVar10) = *(undefined1 *)((long)puVar22 + lVar10);
      }
    }
    else {
      local_58[0] = plVar17[2];
      local_68 = (ulong *)*plVar17;
    }
    local_60 = plVar17[1];
    *plVar17 = (long)puVar4;
    plVar17[1] = 0;
    *(undefined1 *)(plVar17 + 2) = 0;
    local_1e0 = (double)embree::BVHN<4>::preBuild(psVar6);
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
    if (local_88 != local_78) {
      operator_delete(local_88,local_78[0] + 1);
    }
    if (local_a8[0] != local_98) {
      operator_delete(local_a8[0],local_98[0] + 1);
    }
  }
  else {
    uVar25 = *(uint *)(this + 0x98);
    if (*(uint *)(*(long *)(this + 0x20) + 0x20) == uVar25) {
      *(uint *)(this + 0x98) = uVar25;
    }
    else {
      lVar10 = *(long *)(this + 0x10);
      plVar17 = (long *)(lVar10 + 0x170);
      plVar15 = (long *)(lVar10 + 0x130);
      do {
        while (*plVar15 != 0) {
          lVar14 = *(long *)(*plVar15 + 0x18);
          *(long *)(*plVar15 + 0x18) = *plVar17;
          LOCK();
          *plVar17 = *plVar15;
          UNLOCK();
          LOCK();
          *plVar15 = lVar14;
          UNLOCK();
        }
        LOCK();
        *plVar15 = 0;
        UNLOCK();
        plVar15 = plVar15 + 1;
      } while (plVar17 != plVar15);
      plVar15 = *(long **)(lVar10 + 0x1a8);
      plVar27 = *(long **)(lVar10 + 0x1b0);
      if (plVar27 != plVar15) {
        do {
          while( true ) {
            lVar14 = *plVar15;
            if (lVar10 + 0x78 != *(long *)(lVar14 + 8)) break;
            embree::MutexSys::lock();
            if (lVar10 + 0x78 == *(long *)(lVar14 + 8)) {
              LOCK();
              plVar21 = (long *)(*(long *)(lVar14 + 8) + 0x118);
              *plVar21 = *plVar21 + *(long *)(lVar14 + 0xa8) + *(long *)(lVar14 + 0x68);
              UNLOCK();
              LOCK();
              plVar21 = (long *)(*(long *)(lVar14 + 8) + 0x120);
              *plVar21 = *plVar21 +
                         (((*(long *)(lVar14 + 0x98) + *(long *)(lVar14 + 0x58)) -
                          *(long *)(lVar14 + 0x50)) - *(long *)(lVar14 + 0x90));
              UNLOCK();
              LOCK();
              plVar21 = (long *)(*(long *)(lVar14 + 8) + 0x128);
              *plVar21 = *plVar21 + *(long *)(lVar14 + 0xb0) + *(long *)(lVar14 + 0x70);
              UNLOCK();
              *(undefined8 *)(lVar14 + 0x48) = 0;
              *(undefined8 *)(lVar14 + 0x58) = 0;
              *(undefined8 *)(lVar14 + 0x50) = 0;
              *(undefined8 *)(lVar14 + 0x68) = 0;
              *(undefined8 *)(lVar14 + 0x70) = 0;
              *(undefined8 *)(lVar14 + 0x60) = 0;
              *(undefined8 *)(lVar14 + 0x88) = 0;
              *(undefined8 *)(lVar14 + 0x98) = 0;
              *(undefined8 *)(lVar14 + 0x90) = 0;
              *(undefined8 *)(lVar14 + 0xa8) = 0;
              *(undefined8 *)(lVar14 + 0xb0) = 0;
              *(undefined8 *)(lVar14 + 0xa0) = 0;
              LOCK();
              *(undefined8 *)(lVar14 + 8) = 0;
              UNLOCK();
            }
            plVar15 = plVar15 + 1;
            embree::MutexSys::unlock();
            if (plVar27 == plVar15) goto LAB_00126558;
          }
          plVar15 = plVar15 + 1;
        } while (plVar27 != plVar15);
LAB_00126558:
        if (*(long *)(lVar10 + 0x1b0) != *(long *)(lVar10 + 0x1a8)) {
          *(long *)(lVar10 + 0x1b0) = *(long *)(lVar10 + 0x1a8);
        }
      }
      LOCK();
      *(undefined8 *)(lVar10 + 400) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar10 + 0x198) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar10 + 0x1a0) = 0;
      UNLOCK();
      if (*(long *)(lVar10 + 0x170) != 0) {
        cVar1 = *(char *)(lVar10 + 0x180);
        plVar15 = *(long **)(lVar10 + 0x78);
        puVar4 = *(ulong **)(lVar10 + 0x170);
joined_r0x001265c3:
        puVar28 = puVar4;
        if (puVar28 != (ulong *)0x0) {
          puVar4 = (ulong *)puVar28[3];
          uVar9 = puVar28[4];
          uVar30 = *puVar28;
          if (*puVar28 < puVar28[1]) {
            uVar30 = puVar28[1];
          }
          if (puVar28[2] < uVar30) {
            uVar30 = puVar28[2];
          }
          if ((int)puVar28[5] != 0) goto code_r0x00126647;
          if (cVar1 == '\0') {
            embree::alignedFree(puVar28);
          }
          else {
            (**(code **)(*plVar15 + 0x40))(plVar15,puVar28);
          }
          goto LAB_001265f5;
        }
      }
      LOCK();
      *plVar17 = 0;
      UNLOCK();
      if (*(long *)(lVar10 + 0x178) != 0) {
        cVar1 = *(char *)(lVar10 + 0x180);
        plVar17 = *(long **)(lVar10 + 0x78);
        puVar4 = *(ulong **)(lVar10 + 0x178);
joined_r0x00126742:
        puVar28 = puVar4;
        if (puVar28 != (ulong *)0x0) {
          puVar4 = (ulong *)puVar28[3];
          uVar9 = puVar28[4];
          uVar30 = *puVar28;
          if (*puVar28 < puVar28[1]) {
            uVar30 = puVar28[1];
          }
          if (puVar28[2] < uVar30) {
            uVar30 = puVar28[2];
          }
          if ((int)puVar28[5] != 0) goto code_r0x001267c3;
          if (cVar1 == '\0') {
            embree::alignedFree(puVar28);
          }
          else {
            (**(code **)(*plVar17 + 0x40))(plVar17,puVar28);
          }
          goto LAB_00126775;
        }
      }
      LOCK();
      *(undefined8 *)(lVar10 + 0x178) = 0;
      UNLOCK();
      plVar17 = (long *)(lVar10 + 0xf0);
      do {
        LOCK();
        *plVar17 = 0;
        UNLOCK();
        LOCK();
        plVar17[8] = 0;
        UNLOCK();
        plVar17 = plVar17 + 1;
      } while ((long *)(lVar10 + 0x130) != plVar17);
      pvVar5 = *(void **)(lVar10 + 0x1e8);
      lVar14 = *(long *)(lVar10 + 0x1e0);
      if (pvVar5 != (void *)0x0) {
        if ((ulong)(lVar14 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar5);
        }
        else {
          embree::os_free(pvVar5,lVar14 << 5,*(bool *)(lVar10 + 0x1d0));
        }
      }
      if (lVar14 != 0) {
        (**(code **)**(undefined8 **)(lVar10 + 0x1c8))
                  (*(undefined8 **)(lVar10 + 0x1c8),lVar14 * -0x20,1);
      }
      *(undefined8 *)(lVar10 + 0x1e8) = 0;
      *(undefined8 *)(lVar10 + 0x1e0) = 0;
      *(undefined8 *)(lVar10 + 0x1d8) = 0;
      if (*(long *)(this + 0x20) == 0) goto LAB_0012665f;
      uVar25 = *(uint *)(*(long *)(this + 0x20) + 0x20);
      *(uint *)(this + 0x98) = uVar25;
    }
    pvVar23 = (vector_t *)(ulong)uVar25;
    if (pvVar23 == (vector_t *)0x0) {
LAB_0012667c:
      pvVar5 = *(void **)(this + 0x48);
      lVar10 = *(long *)(this + 0x40);
      if (pvVar5 != (void *)0x0) {
        if ((ulong)(lVar10 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar5);
        }
        else {
          embree::os_free(pvVar5,lVar10 << 5,(bool)this[0x30]);
        }
      }
      if (lVar10 != 0) {
        (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar10 * -0x20,1);
      }
      *(undefined8 *)(this + 0x48) = 0;
      *(undefined8 *)(this + 0x40) = 0;
      *(undefined8 *)(this + 0x38) = 0;
      if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Could not recover jumptable at 0x00126702. Too many branches */
                    /* WARNING: Treating indirect jump as call */
        (**(code **)(**(long **)(this + 0x10) + 0x28))();
        return;
      }
      goto LAB_001276c6;
    }
    uVar25 = *(uint *)(this + 0x94);
    local_60 = 0;
    local_58[0] = local_58[0] & 0xffffffffffffff00;
    bVar19 = 0x7ffffff < uVar25 | *(byte *)(*(long *)(*(long *)(this + 0x18) + 0x188) + 0x464);
    local_68 = local_58;
    local_1e0 = (double)embree::BVHN<4>::preBuild(*(string **)(this + 0x10));
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
  }
  fVar33 = (float)pvVar23 * *(float *)(this + 0x90);
  if (__LC7 <= fVar33) {
    pvVar29 = (vector_t *)((long)(fVar33 - __LC7) ^ 0x8000000000000000);
  }
  else {
    pvVar29 = (vector_t *)(long)fVar33;
  }
  pvVar31 = *(vector_t **)(this + 0x40);
  if (pvVar29 < pvVar23) {
    pvVar29 = pvVar23;
  }
  if (pvVar31 < pvVar29) {
    if (pvVar31 == (vector_t *)0x0) {
      pvVar31 = pvVar29;
      if (pvVar29 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar29;
      }
    }
    else {
      do {
        pvVar31 = (vector_t *)((long)pvVar31 * 2);
        if (pvVar31 == (vector_t *)0x0) {
          pvVar31 = (vector_t *)0x1;
        }
      } while (pvVar31 < pvVar29);
      if (pvVar29 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar29;
      }
    }
    puVar2 = *(undefined8 **)(this + 0x48);
    uVar9 = (long)pvVar31 << 5;
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),uVar9,0);
    if (uVar9 < 0x1c00000) {
      lVar10 = embree::alignedMalloc(uVar9,0x20);
    }
    else {
      lVar10 = embree::os_malloc(uVar9,(bool *)(this + 0x30));
    }
    *(long *)(this + 0x48) = lVar10;
    if (*(long *)(this + 0x38) != 0) {
      uVar9 = 0;
      puVar26 = puVar2;
      while( true ) {
        uVar13 = puVar26[1];
        puVar11 = (undefined8 *)(lVar10 + uVar9 * 0x20);
        *puVar11 = *puVar26;
        puVar11[1] = uVar13;
        uVar13 = puVar26[3];
        puVar11[2] = puVar26[2];
        puVar11[3] = uVar13;
        if (*(ulong *)(this + 0x38) <= uVar9 + 1) break;
        lVar10 = *(long *)(this + 0x48);
        uVar9 = uVar9 + 1;
        puVar26 = puVar26 + 4;
      }
    }
    lVar10 = *(long *)(this + 0x40);
    if (puVar2 != (undefined8 *)0x0) {
      if ((ulong)(lVar10 << 5) < 0x1c00000) {
        embree::alignedFree(puVar2);
      }
      else {
        embree::os_free(puVar2,lVar10 << 5,(bool)this[0x30]);
      }
    }
    if (lVar10 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar10 * -0x20,1);
    }
    lVar10 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar29;
    *(vector_t **)(this + 0x40) = pvVar31;
    if (*(long *)(this + 0x20) == 0) goto LAB_001268f6;
LAB_001261ab:
    *(undefined4 *)(lVar10 + 0x1c0) = 1;
    pGVar3 = *(Geometry **)(this + 0x20);
    lVar10 = *(long *)(*(long *)(this + 0x10) + 0x68);
    if (bVar19 == 0) {
      if (pGVar3 == (Geometry *)0x0) goto LAB_001275b0;
      embree::sse2::createPrimRefArray
                ((Geometry *)&local_108,(uint)pGVar3,(ulong)*(uint *)(this + 0x94),pvVar29,
                 (BuildProgressMonitor *)(this + 0x28));
      goto LAB_00127188;
    }
    if (pGVar3 == (Geometry *)0x0) goto LAB_00126904;
    createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
              ((sse2 *)&local_108,pGVar3,uVar25,(ulong)pvVar23,(vector_t *)(this + 0x28),
               (BuildProgressMonitor *)(lVar10 + 600));
LAB_001261f7:
    dVar35 = _LC61;
    local_110 = local_c0;
    local_118 = local_c8;
    local_158 = local_108;
    uStack_150 = pfStack_100;
    dVar34 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC59 * __LC68;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC61 <= dVar34) {
      uVar9 = (long)(dVar34 - _LC61) ^ 0x8000000000000000;
    }
    else {
      uVar9 = (ulong)dVar34;
    }
    uVar9 = uVar9 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar9);
    local_170 = *(undefined8 **)(this + 0x10);
    uVar30 = local_110 - local_118;
    if ((uVar30 == 0) || (uVar9 == 0)) {
      uVar9 = 0x400;
    }
    else {
      bVar19 = *(byte *)((long)local_170 + 0x182);
      uVar12 = embree::TaskScheduler::threadCount();
      lVar10 = (2 - (ulong)bVar19) * local_170[0x11];
      uVar18 = lVar10 * 0x14;
      if (((uVar9 - 1) + uVar18) / uVar18 < uVar12) {
        uVar18 = lVar10 * 0x50;
        if ((long)uVar18 < 0) {
          dVar34 = (double)(uVar18 >> 1) + (double)(uVar18 >> 1);
        }
        else {
          dVar34 = (double)(long)uVar18;
        }
        dVar34 = dVar34 / ((double)uVar9 / (double)uVar30);
        if ((double)((ulong)dVar34 & _LC67) < _LC62) {
          dVar34 = (double)((ulong)((double)(long)dVar34 +
                                   (double)(-(ulong)((double)(long)dVar34 < dVar34) & _LC64)) |
                           ~_LC67 & (ulong)dVar34);
        }
        if (dVar35 <= dVar34) {
          uVar9 = (long)(dVar34 - dVar35) ^ 0x8000000000000000;
        }
        else {
          uVar9 = (ulong)dVar34;
        }
        local_170 = *(undefined8 **)(this + 0x10);
      }
      else {
        local_170 = *(undefined8 **)(this + 0x10);
        uVar9 = 0x400;
      }
    }
    local_f8 = *(TaskGroupContext **)(this + 0x60);
    pfStack_f0 = *(float **)(this + 0x68);
    *(ulong *)(this + 0x80) = uVar9;
    *(undefined8 *)(this + 0x50) = 4;
    local_e8 = *(undefined ****)(this + 0x70);
    uStack_e0 = *(undefined8 *)(this + 0x78);
    *(undefined8 *)(this + 0x58) = 0x28;
    local_108 = *(undefined ****)(this + 0x50);
    pfStack_100 = *(float **)(this + 0x58);
    local_d8 = *(undefined8 *)(this + 0x80);
    uStack_d0 = *(undefined8 *)(this + 0x88);
    local_178 = &PTR_createLeaf_0012f448;
    uVar13 = embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderV::build
                       (&local_178,local_170 + 0xf,local_170[0xd] + 600,*(undefined8 *)(this + 0x48)
                        ,&local_158);
  }
  else {
    lVar10 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar29;
    if (*(long *)(this + 0x20) != 0) goto LAB_001261ab;
LAB_001268f6:
    lVar10 = *(long *)(lVar10 + 0x68);
    if (bVar19 != 0) {
LAB_00126904:
      createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
                ((sse2 *)&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar23,this + 0x28,
                 lVar10 + 600);
      goto LAB_001261f7;
    }
LAB_001275b0:
    embree::sse2::createPrimRefArray
              (&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar29,this + 0x28,lVar10 + 600);
LAB_00127188:
    dVar35 = _LC61;
    local_110 = local_c0;
    uVar13 = *(undefined8 *)(this + 0x18);
    local_118 = local_c8;
    local_158 = local_108;
    uStack_150 = pfStack_100;
    dVar34 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC59 * __LC68;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC61 <= dVar34) {
      uVar9 = (long)(dVar34 - _LC61) ^ 0x8000000000000000;
    }
    else {
      uVar9 = (ulong)dVar34;
    }
    uVar9 = uVar9 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar9);
    ppuVar24 = *(undefined ***)(this + 0x10);
    uVar30 = local_110 - local_118;
    if ((uVar30 == 0) || (uVar9 == 0)) {
      uVar9 = 0x400;
    }
    else {
      bVar19 = *(byte *)((long)ppuVar24 + 0x182);
      uVar12 = embree::TaskScheduler::threadCount();
      lVar10 = (2 - (ulong)bVar19) * (long)ppuVar24[0x11];
      uVar18 = lVar10 * 0x14;
      if (((uVar9 - 1) + uVar18) / uVar18 < uVar12) {
        uVar18 = lVar10 * 0x50;
        if ((long)uVar18 < 0) {
          dVar34 = (double)(uVar18 >> 1) + (double)(uVar18 >> 1);
        }
        else {
          dVar34 = (double)(long)uVar18;
        }
        dVar34 = dVar34 / ((double)uVar9 / (double)uVar30);
        if ((double)((ulong)dVar34 & _LC67) < _LC62) {
          dVar34 = (double)((ulong)((double)(long)dVar34 +
                                   (double)(-(ulong)((double)(long)dVar34 < dVar34) & _LC64)) |
                           ~_LC67 & (ulong)dVar34);
        }
        if (dVar35 <= dVar34) {
          uVar9 = (long)(dVar34 - dVar35) ^ 0x8000000000000000;
        }
        else {
          uVar9 = (ulong)dVar34;
        }
        ppuVar24 = *(undefined ***)(this + 0x10);
        uVar30 = local_110 - local_118;
      }
      else {
        ppuVar24 = *(undefined ***)(this + 0x10);
        uVar9 = 0x400;
        uVar30 = local_110 - local_118;
      }
    }
    local_1a0 = *(undefined ***)(this + 0x48);
    *(ulong *)(this + 0x80) = uVar9;
    *(undefined8 *)(this + 0x50) = 4;
    local_188 = &PTR_operator___0012fa80;
    *(undefined8 *)(this + 0x58) = 0x28;
    local_180 = *(undefined8 *)(ppuVar24[0xd] + 0x260);
    local_170 = &local_1a8;
    local_190 = (undefined **)0x0;
    local_1a8 = uVar13;
    local_178 = local_1a0;
    local_168 = &local_158;
    if (uVar30 == 1) {
      fVar33 = *(float *)((long)local_1a0 + 0x14) - *(float *)((long)local_1a0 + 4);
      fVar33 = (fVar33 + (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1))) *
               (*(float *)(local_1a0 + 2) - *(float *)local_1a0) +
               fVar33 * (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1));
      dVar35 = (double)(fVar33 + fVar33) + 0.0;
      uVar9 = 1;
    }
    else {
      local_198 = &local_1a0;
      local_108 = &local_190;
      pfStack_100 = &local_1ac;
      local_f8 = (TaskGroupContext *)&local_198;
      dVar35 = (double)_ZN6embree24parallel_reduce_internalImdZNS_15parallel_reduceImdZNS_4sse230BVHBuilderBinnedFastSpatialSAH5buildINS_10NodeRefPtrILi4EEENS_4BVHNILi4EE11CreateAllocENS_10AABBNode_tIS6_Li4EE7Create2ENSB_4Set2ENS2_17CreateLeafSpatialILi4ENS_10TriangleMiILi4EEEEENS2_23TriangleSplitterFactoryENS_5Scene29BuildProgressMonitorInterfaceEEET_T0_T1_T2_RKT3_T4_T5_PNS_7PrimRefEmRKNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEERKNS2_17GeneralBVHBuilder8SettingsEEUlRKNS_5rangeImEEE_St4plusIdEEESM_SL_SL_RKSM_RKSN_RKSO_EUlS18_E_S1D_EESM_SL_SL_SL_SL_S1F_S1H_S1J__isra_0
                                 (uVar30,0,uVar30,&local_190,
                                  (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108);
      uVar9 = local_110 - local_118;
    }
    pfStack_100 = (float *)&local_1b0;
    local_1ac = _LC30 / (float)dVar35;
    local_1b0 = 0x41200000;
    local_198 = (undefined ***)0x0;
    local_108 = &local_1a0;
    local_f8 = (TaskGroupContext *)&local_158;
    pfStack_f0 = &local_1ac;
    TaskScheduler::
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (0,uVar9,1,(_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,
               (TaskGroupContext *)&local_198);
    embree::TaskScheduler::wait();
    if (local_198 != (undefined ***)0x0) {
      local_190 = (undefined **)local_198;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_190);
    }
    local_c8 = 0;
    local_c0 = local_110 - local_118;
    local_108 = local_158;
    pfStack_100 = (float *)uStack_150;
    local_f8 = (TaskGroupContext *)local_148;
    pfStack_f0 = (float *)uStack_140;
    local_e8 = local_138;
    uStack_e0 = uStack_130;
    local_d8 = local_128;
    uStack_d0 = uStack_120;
    local_190 = ppuVar24;
    local_b8 = pvVar29;
    uVar13 = GeneralBVHBuilder::
             build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::Scene::BuildProgressMonitorInterface>
                       (&local_178,local_1a0,
                        (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,ppuVar24 + 0xf
                        ,&local_190,&local_188,this + 0x50);
  }
  local_108 = local_158;
  pfStack_100 = (float *)uStack_150;
  local_f8 = (TaskGroupContext *)local_148;
  pfStack_f0 = (float *)uStack_140;
  local_e8 = local_158;
  uStack_e0 = uStack_150;
  local_d8 = local_148;
  uStack_d0 = uStack_140;
  embree::BVHN<4>::set(*(undefined8 *)(this + 0x10),uVar13,&local_108,local_110 - local_118);
  embree::BVHN<4>::layoutLargeNodes(*(ulong *)(this + 0x10));
  if ((*(long *)(this + 0x18) != 0) && ((*(byte *)(*(long *)(this + 0x18) + 0x230) & 1) == 0)) {
    pvVar5 = *(void **)(this + 0x48);
    lVar10 = *(long *)(this + 0x40);
    if (pvVar5 != (void *)0x0) {
      if ((ulong)(lVar10 << 5) < 0x1c00000) {
        embree::alignedFree(pvVar5);
      }
      else {
        embree::os_free(pvVar5,lVar10 << 5,(bool)this[0x30]);
      }
    }
    if (lVar10 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar10 * -0x20,1);
    }
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x38) = 0;
  }
  lVar10 = *(long *)(this + 0x10);
  plVar17 = (long *)(lVar10 + 0x130);
  plVar15 = (long *)(lVar10 + 0x170);
  do {
    while (*plVar17 != 0) {
      lVar14 = *(long *)(*plVar17 + 0x18);
      *(long *)(*plVar17 + 0x18) = *plVar15;
      LOCK();
      *plVar15 = *plVar17;
      UNLOCK();
      LOCK();
      *plVar17 = lVar14;
      UNLOCK();
    }
    LOCK();
    *plVar17 = 0;
    UNLOCK();
    plVar17 = plVar17 + 1;
  } while (plVar15 != plVar17);
  plVar17 = *(long **)(lVar10 + 0x1a8);
  plVar15 = *(long **)(lVar10 + 0x1b0);
  if (plVar17 != plVar15) {
    do {
      while( true ) {
        lVar14 = *plVar17;
        if (lVar10 + 0x78 != *(long *)(lVar14 + 8)) break;
        embree::MutexSys::lock();
        if (lVar10 + 0x78 == *(long *)(lVar14 + 8)) {
          LOCK();
          plVar27 = (long *)(*(long *)(lVar14 + 8) + 0x118);
          *plVar27 = *plVar27 + *(long *)(lVar14 + 0xa8) + *(long *)(lVar14 + 0x68);
          UNLOCK();
          LOCK();
          plVar27 = (long *)(*(long *)(lVar14 + 8) + 0x120);
          *plVar27 = *plVar27 +
                     (((*(long *)(lVar14 + 0x98) + *(long *)(lVar14 + 0x58)) -
                      *(long *)(lVar14 + 0x50)) - *(long *)(lVar14 + 0x90));
          UNLOCK();
          LOCK();
          plVar27 = (long *)(*(long *)(lVar14 + 8) + 0x128);
          *plVar27 = *plVar27 + *(long *)(lVar14 + 0xb0) + *(long *)(lVar14 + 0x70);
          UNLOCK();
          *(undefined8 *)(lVar14 + 0x48) = 0;
          *(undefined8 *)(lVar14 + 0x58) = 0;
          *(undefined8 *)(lVar14 + 0x50) = 0;
          *(undefined8 *)(lVar14 + 0x68) = 0;
          *(undefined8 *)(lVar14 + 0x70) = 0;
          *(undefined8 *)(lVar14 + 0x60) = 0;
          *(undefined8 *)(lVar14 + 0x88) = 0;
          *(undefined8 *)(lVar14 + 0x98) = 0;
          *(undefined8 *)(lVar14 + 0x90) = 0;
          *(undefined8 *)(lVar14 + 0xa8) = 0;
          *(undefined8 *)(lVar14 + 0xb0) = 0;
          *(undefined8 *)(lVar14 + 0xa0) = 0;
          LOCK();
          *(undefined8 *)(lVar14 + 8) = 0;
          UNLOCK();
        }
        plVar17 = plVar17 + 1;
        embree::MutexSys::unlock();
        if (plVar15 == plVar17) goto LAB_00126c67;
      }
      plVar17 = plVar17 + 1;
    } while (plVar15 != plVar17);
LAB_00126c67:
    if (*(long *)(lVar10 + 0x1a8) != *(long *)(lVar10 + 0x1b0)) {
      *(long *)(lVar10 + 0x1b0) = *(long *)(lVar10 + 0x1a8);
    }
  }
  embree::BVHN<4>::postBuild(local_1e0);
  if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
LAB_001276c6:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
code_r0x00126647:
  if ((int)puVar28[5] == 1) {
    embree::os_free(puVar28,puVar28[2] + 0x40,*(bool *)((long)puVar28 + 0x2c));
LAB_001265f5:
    if (plVar15 != (long *)0x0) {
      (**(code **)(*plVar15 + 0x20))(plVar15,-(uVar9 + 0x40 + uVar30),1);
    }
  }
  goto joined_r0x001265c3;
code_r0x001267c3:
  if ((int)puVar28[5] == 1) {
    embree::os_free(puVar28,puVar28[2] + 0x40,*(bool *)((long)puVar28 + 0x2c));
LAB_00126775:
    if (plVar17 != (long *)0x0) {
      (**(code **)(*plVar17 + 0x20))(plVar17,-(uVar9 + 0x40 + uVar30),1);
    }
  }
  goto joined_r0x00126742;
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressM...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  long lVar1;
  undefined8 uVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  
  uVar6 = *(ulong *)(this + 8);
  uVar3 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < uVar6 - uVar3) {
    uVar6 = uVar6 + uVar3 >> 1;
    spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar3,uVar6,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x38));
    spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar6,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x38));
    embree::TaskScheduler::wait();
    return;
  }
  if (uVar3 < uVar6) {
    lVar5 = uVar3 * 0x70;
    do {
      lVar1 = *(long *)(this + 0x20);
      lVar4 = *(long *)(this + 0x28) + lVar5;
      lVar5 = lVar5 + 0x70;
      uVar2 = sse2::GeneralBVHBuilder::
              BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
              ::recurse(*(undefined8 *)(this + 0x30),lVar4,1);
      *(undefined8 *)(lVar1 + uVar3 * 8) = uVar2;
      uVar3 = uVar3 + 1;
    } while (uVar3 < uVar6);
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::recurse(ulong *param_1,long *param_2,char param_3)

{
  MutexSys *pMVar1;
  undefined8 *puVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  long lVar6;
  long lVar7;
  undefined8 *puVar8;
  float *pfVar9;
  long *plVar10;
  undefined8 *puVar11;
  undefined8 uVar12;
  ulong uVar13;
  long lVar14;
  long *plVar15;
  ulong uVar16;
  undefined8 *puVar17;
  ulong uVar18;
  long lVar19;
  long in_FS_OFFSET;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  float fVar25;
  undefined4 uVar26;
  undefined4 uVar27;
  undefined4 uVar28;
  undefined4 uVar29;
  FastAllocator *in_stack_00000008;
  MutexSys *in_stack_00000010;
  long *local_a98;
  MutexSys *local_a80;
  FastAllocator *local_a78;
  MutexSys *local_a38;
  MutexSys *pMStack_a28;
  long local_a20;
  undefined8 uStack_a18;
  undefined8 local_a10;
  undefined8 uStack_a08;
  undefined8 local_a00;
  undefined8 uStack_9f8;
  undefined8 local_9f0;
  undefined8 uStack_9e8;
  long local_9e0;
  long local_9d8;
  undefined8 local_9d0;
  undefined8 local_9c0;
  undefined8 uStack_9b8;
  undefined8 local_9b0;
  undefined8 uStack_9a8;
  undefined8 local_9a0;
  undefined8 uStack_998;
  undefined8 local_990;
  undefined8 uStack_988;
  undefined8 local_980;
  undefined8 local_978;
  undefined8 local_970;
  MutexSys *local_960;
  undefined1 local_958;
  undefined4 local_950;
  undefined4 uStack_94c;
  undefined4 uStack_948;
  undefined4 uStack_944;
  float local_940;
  float fStack_93c;
  float fStack_938;
  float fStack_934;
  undefined4 local_930;
  undefined4 uStack_92c;
  undefined4 uStack_928;
  undefined4 uStack_924;
  float local_920;
  float fStack_91c;
  float fStack_918;
  float fStack_914;
  long local_910;
  long lStack_908;
  long local_900;
  MutexSys *local_8f0;
  long *local_8e8;
  undefined8 local_8e0;
  undefined4 uStack_8d8;
  undefined4 uStack_8d4;
  float local_8d0;
  float fStack_8cc;
  float fStack_8c8;
  float fStack_8c4;
  undefined4 local_8c0;
  undefined4 uStack_8bc;
  undefined4 uStack_8b8;
  undefined4 uStack_8b4;
  float local_8b0;
  float fStack_8ac;
  float fStack_8a8;
  float fStack_8a4;
  long local_8a0;
  long lStack_898;
  long local_890;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
  local_880 [84];
  float local_82c;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
  local_800 [176];
  long local_750;
  undefined1 local_748 [8];
  long local_740 [4];
  undefined8 local_720;
  undefined8 uStack_718;
  undefined8 local_710;
  undefined8 uStack_708;
  long local_700;
  long local_6f8;
  undefined8 local_6f0;
  long local_6e0;
  undefined1 local_6d8;
  undefined8 local_6d0;
  undefined8 uStack_6c8;
  undefined8 local_6c0;
  undefined8 uStack_6b8;
  undefined8 local_6b0;
  undefined8 uStack_6a8;
  undefined8 local_6a0;
  undefined8 uStack_698;
  undefined8 local_690;
  undefined8 local_688;
  undefined8 local_680;
  long local_670 [196];
  long lStack_50;
  long local_48;
  
  lVar19 = lRam0000000000127f1b;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_a80 = in_stack_00000010;
  local_a78 = in_stack_00000008;
  if (in_stack_00000008 == (FastAllocator *)0x0) {
    local_a78 = *(FastAllocator **)param_1[10];
    local_a80 = *(MutexSys **)(in_FS_OFFSET + lRam0000000000127f1b);
    if (local_a80 == (MutexSys *)0x0) {
      local_a80 = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
      embree::MutexSys::MutexSys(local_a80);
      *(MutexSys **)(local_a80 + 0x40) = local_a80;
      *(undefined8 *)(local_a80 + 8) = 0;
      *(undefined8 *)(local_a80 + 0x48) = 0;
      *(undefined8 *)(local_a80 + 0x50) = 0;
      *(undefined8 *)(local_a80 + 0x58) = 0;
      *(undefined8 *)(local_a80 + 0x60) = 0;
      *(undefined8 *)(local_a80 + 0x68) = 0;
      *(undefined8 *)(local_a80 + 0x70) = 0;
      *(MutexSys **)(local_a80 + 0x80) = local_a80;
      *(undefined8 *)(local_a80 + 0x88) = 0;
      *(undefined8 *)(local_a80 + 0x90) = 0;
      *(undefined8 *)(local_a80 + 0x98) = 0;
      *(undefined8 *)(local_a80 + 0xa0) = 0;
      *(undefined8 *)(local_a80 + 0xa8) = 0;
      *(undefined8 *)(local_a80 + 0xb0) = 0;
      *(MutexSys **)(in_FS_OFFSET + lVar19) = local_a80;
      embree::MutexSys::lock();
      local_8f0 = local_a80;
      if (__MutexSys == _preBuild) {
        std::
        vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
        ::
        _M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>
                  ((vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
                    *)&FastAllocator::s_thread_local_allocators,__MutexSys,&local_8f0);
        pMVar1 = local_8f0;
        if (local_8f0 != (MutexSys *)0x0) {
          embree::MutexSys::~MutexSys(local_8f0);
          embree::alignedFree(pMVar1);
        }
      }
      else {
        *__MutexSys = local_a80;
        __MutexSys = __MutexSys + 1;
      }
      embree::MutexSys::unlock();
    }
    local_a80 = local_a80 + 0x40;
  }
  if ((param_3 != '\0') && ((ulong)(param_2[0xb] - param_2[10]) <= param_1[6])) {
    if ((code *)**(undefined8 **)param_1[0x10] == Scene::BuildProgressMonitorInterface::operator())
    {
      embree::Scene::progressMonitor((double)(ulong)(param_2[0xb] - param_2[10]));
    }
    else {
      (*(code *)**(undefined8 **)param_1[0x10])();
    }
  }
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::find
            (local_880,(PrimInfoExtRange *)param_1[9],(ulong)(param_2 + 2));
  lVar19 = param_2[10];
  uVar16 = param_2[0xb] - lVar19;
  if (((uVar16 <= param_1[3]) || (param_1[1] <= *param_2 + 8U)) ||
     ((uVar16 <= param_1[4] &&
      (fVar21 = *(float *)((long)param_2 + 0x24) - *(float *)((long)param_2 + 0x14),
      fVar21 = (*(float *)(param_2 + 4) - *(float *)(param_2 + 2)) *
               (fVar21 + (*(float *)(param_2 + 5) - *(float *)(param_2 + 3))) +
               fVar21 * (*(float *)(param_2 + 5) - *(float *)(param_2 + 3)),
      (float)((uVar16 - 1) + (1L << ((byte)param_1[2] & 0x3f)) >> ((byte)param_1[2] & 0x3f)) *
      fVar21 * *(float *)((long)param_1 + 0x2c) <=
      fVar21 * *(float *)(param_1 + 5) + *(float *)((long)param_1 + 0x2c) * local_82c)))) {
    lVar14 = param_2[0xb] * 0x20;
    puVar8 = (undefined8 *)(*(long *)param_1[9] + lVar14);
    puVar17 = (undefined8 *)(*(long *)param_1[9] + lVar19 * 0x20);
    if (puVar8 != puVar17) {
      lVar14 = lVar14 + lVar19 * -0x20;
      uVar16 = lVar14 >> 5;
      if (uVar16 == 0) {
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar8,0xfffffffffffffffe);
      }
      else {
        lVar19 = 0x3f;
        if (uVar16 != 0) {
          for (; uVar16 >> lVar19 == 0; lVar19 = lVar19 + -1) {
          }
        }
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar8,(long)(int)lVar19 * 2);
        if (0x200 < lVar14) {
          puVar11 = puVar17 + 0x40;
          std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar11)
          ;
          for (; puVar8 != puVar11; puVar11 = puVar11 + 4) {
            while( true ) {
              uVar12 = puVar11[2];
              uVar3 = puVar11[3];
              uVar4 = *puVar11;
              uVar5 = puVar11[1];
              uVar16 = CONCAT44(*(undefined4 *)((long)puVar11 + 0x1c),
                                *(undefined4 *)((long)puVar11 + 0xc));
              puVar17 = puVar11;
              if (CONCAT44(*(undefined4 *)((long)puVar11 + -4),
                           *(undefined4 *)((long)puVar11 + -0x14)) <= uVar16) break;
              do {
                puVar2 = puVar17;
                puVar17 = puVar2 + -4;
                *puVar2 = *puVar17;
                puVar2[1] = puVar2[-3];
                *(undefined4 *)(puVar2 + 2) = *(undefined4 *)(puVar2 + -2);
                *(undefined4 *)((long)puVar2 + 0x14) = *(undefined4 *)((long)puVar2 + -0xc);
                *(undefined4 *)(puVar2 + 3) = *(undefined4 *)(puVar2 + -1);
                *(undefined4 *)((long)puVar2 + 0x1c) = *(undefined4 *)((long)puVar2 + -4);
              } while (uVar16 < CONCAT44(*(undefined4 *)((long)puVar2 + -0x24),
                                         *(undefined4 *)((long)puVar2 + -0x34)));
              puVar11 = puVar11 + 4;
              *puVar17 = uVar4;
              puVar2[-3] = uVar5;
              puVar2[-2] = uVar12;
              puVar2[-1] = uVar3;
              if (puVar8 == puVar11) goto LAB_00127a18;
            }
            *puVar11 = uVar4;
            puVar11[1] = uVar5;
            puVar11[2] = uVar12;
            puVar11[3] = uVar3;
          }
          goto LAB_00127a18;
        }
      }
      std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar8);
    }
LAB_00127a18:
    puVar8 = (undefined8 *)createLargeLeaf(param_1,param_2);
    goto LAB_00127a52;
  }
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::split
            ((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
              *)param_1[9],(Split2 *)local_880,(PrimInfoExtRange *)(param_2 + 2),
             (PrimInfoExtRange *)&local_a20,(PrimInfoExtRange *)&local_9c0);
  uVar26 = _LC3;
  fVar21 = _LC1;
  local_748[0] = 0;
  local_6d8 = 0;
  local_750 = *param_2 + 1;
  local_740[0] = local_a20;
  local_740[1] = uStack_a18;
  local_740[2] = local_a10;
  local_740[3] = uStack_a08;
  local_690 = local_980;
  local_720 = local_a00;
  uStack_718 = uStack_9f8;
  local_688 = local_978;
  local_710 = local_9f0;
  uStack_708 = uStack_9e8;
  local_6d0 = local_9c0;
  uStack_6c8 = uStack_9b8;
  local_700 = local_9e0;
  local_6f8 = local_9d8;
  local_6f0 = local_9d0;
  local_6c0 = local_9b0;
  uStack_6b8 = uStack_9a8;
  local_6b0 = local_9a0;
  uStack_6a8 = uStack_998;
  local_6a0 = local_990;
  uStack_698 = uStack_988;
  local_680 = local_970;
  fVar23 = fVar21;
  fVar24 = fVar21;
  fVar25 = fVar21;
  uVar27 = uVar26;
  uVar28 = uVar26;
  uVar29 = uVar26;
  local_6e0 = local_750;
  if (*param_1 < 3) {
    uVar16 = param_1[7];
    if (uVar16 < (ulong)(param_2[0xb] - param_2[10])) {
      lVar19 = 0xe0;
      uVar18 = 2;
      goto LAB_00128849;
    }
    uVar18 = 2;
    plVar10 = local_670;
LAB_00128047:
    local_a98 = &local_750;
    uVar16 = ((long)plVar10 - (long)local_a98 >> 4) * 0x6db6db6db6db6db7;
    if (uVar16 == 0) {
      std::
      __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (local_a98,plVar10,0xfffffffffffffffe);
    }
    else {
      lVar19 = 0x3f;
      if (uVar16 != 0) {
        for (; uVar16 >> lVar19 == 0; lVar19 = lVar19 + -1) {
        }
      }
      std::
      __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (local_a98,plVar10,(long)(int)lVar19 * 2);
      if (0x700 < (long)plVar10 - (long)local_a98) {
        plVar15 = &lStack_50;
        std::
        __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (local_a98,plVar15);
        for (; plVar10 != plVar15; plVar15 = plVar15 + 0xe) {
          std::
          __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                    (plVar15);
        }
        goto LAB_00128123;
      }
    }
    std::
    __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
              (local_a98,plVar10);
  }
  else {
    uVar18 = 2;
    plVar10 = local_670;
    do {
      uVar13 = 0;
      uVar16 = 0xffffffffffffffff;
      pfVar9 = (float *)local_740;
      lVar19 = local_6f8;
      lVar14 = local_700;
      fVar22 = _LC1;
      while( true ) {
        if ((param_1[3] < (ulong)(lVar19 - lVar14)) &&
           (fVar20 = (pfVar9[4] - *pfVar9) * ((pfVar9[5] - pfVar9[1]) + (pfVar9[6] - pfVar9[2])) +
                     (pfVar9[5] - pfVar9[1]) * (pfVar9[6] - pfVar9[2]), fVar22 < fVar20)) {
          uVar16 = uVar13;
          fVar22 = fVar20;
        }
        uVar13 = uVar13 + 1;
        if (uVar13 == uVar18) break;
        lVar19 = *(long *)(pfVar9 + 0x2e);
        lVar14 = *(long *)(pfVar9 + 0x2c);
        pfVar9 = pfVar9 + 0x1c;
      }
      if (uVar16 == 0xffffffffffffffff) {
        lVar19 = (long)plVar10 - (long)&local_750;
        goto LAB_0012801f;
      }
      uVar18 = uVar18 + 1;
      local_960 = (MutexSys *)(*param_2 + 1);
      local_8e0 = (ulong *)CONCAT44(uVar26,uVar26);
      local_958 = 0;
      local_910 = 0;
      lStack_908 = 0;
      local_900 = 0;
      local_8e8 = (long *)((ulong)local_8e8 & 0xffffffffffffff00);
      local_8a0 = 0;
      lStack_898 = 0;
      local_890 = 0;
      local_950 = uVar26;
      uStack_94c = uVar26;
      uStack_948 = uVar26;
      uStack_944 = uVar26;
      local_940 = fVar21;
      fStack_93c = fVar21;
      fStack_938 = fVar21;
      fStack_934 = fVar21;
      local_930 = uVar26;
      uStack_92c = uVar26;
      uStack_928 = uVar26;
      uStack_924 = uVar26;
      local_920 = fVar21;
      fStack_91c = fVar21;
      fStack_918 = fVar21;
      fStack_914 = fVar21;
      local_8f0 = local_960;
      uStack_8d8 = uVar26;
      uStack_8d4 = uVar26;
      local_8d0 = fVar21;
      fStack_8cc = fVar21;
      fStack_8c8 = fVar21;
      fStack_8c4 = fVar21;
      local_8c0 = uVar26;
      uStack_8bc = uVar26;
      uStack_8b8 = uVar26;
      uStack_8b4 = uVar26;
      local_8b0 = fVar21;
      fStack_8ac = fVar21;
      fStack_8a8 = fVar21;
      fStack_8a4 = fVar21;
      HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
      find(local_800,(PrimInfoExtRange *)param_1[9],(ulong)(local_740 + uVar16 * 0xe));
      HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
      split((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
             *)param_1[9],(Split2 *)local_800,(PrimInfoExtRange *)(local_740 + uVar16 * 0xe),
            (PrimInfoExtRange *)&local_950,(PrimInfoExtRange *)&local_8e0);
      *(MutexSys **)(local_748 + uVar16 * 0x70 + -8) = local_960;
      local_748[uVar16 * 0x70] = local_958;
      local_740[uVar16 * 0xe] = CONCAT44(uStack_94c,local_950);
      local_740[uVar16 * 0xe + 1] = CONCAT44(uStack_944,uStack_948);
      local_740[uVar16 * 0xe + 10] = local_900;
      local_740[uVar16 * 0xe + 2] = CONCAT44(fStack_93c,local_940);
      local_740[uVar16 * 0xe + 3] = CONCAT44(fStack_934,fStack_938);
      local_740[uVar16 * 0xe + 4] = CONCAT44(uStack_92c,local_930);
      local_740[uVar16 * 0xe + 5] = CONCAT44(uStack_924,uStack_928);
      local_740[uVar16 * 0xe + 6] = CONCAT44(fStack_91c,local_920);
      local_740[uVar16 * 0xe + 7] = CONCAT44(fStack_914,fStack_918);
      local_740[uVar16 * 0xe + 8] = local_910;
      local_740[uVar16 * 0xe + 9] = lStack_908;
      *plVar10 = (long)local_8f0;
      plVar10[2] = (long)local_8e0;
      plVar10[3] = CONCAT44(uStack_8d4,uStack_8d8);
      *(undefined1 *)(plVar10 + 1) = local_8e8._0_1_;
      plVar10[4] = CONCAT44(fStack_8cc,local_8d0);
      plVar10[5] = CONCAT44(fStack_8c4,fStack_8c8);
      plVar10[10] = local_8a0;
      plVar10[0xb] = lStack_898;
      plVar10[6] = CONCAT44(uStack_8bc,local_8c0);
      plVar10[7] = CONCAT44(uStack_8b4,uStack_8b8);
      plVar10[8] = CONCAT44(fStack_8ac,local_8b0);
      plVar10[9] = CONCAT44(fStack_8a4,fStack_8a8);
      plVar10[0xc] = local_890;
      plVar10 = plVar10 + 0xe;
    } while (uVar18 < *param_1);
    lVar19 = uVar18 * 0x70;
LAB_0012801f:
    uVar16 = param_1[7];
    if (uVar16 < (ulong)(param_2[0xb] - param_2[10])) {
LAB_00128849:
      local_a98 = &local_750;
      plVar10 = local_a98 + uVar18 * 0xe;
      do {
        *(bool *)(local_a98 + 1) = (ulong)(local_a98[0xb] - local_a98[10]) <= uVar16;
        local_a98 = local_a98 + 0xe;
      } while (plVar10 != local_a98);
    }
    plVar10 = (long *)(local_748 + lVar19 + -8);
    if (lVar19 != 0) goto LAB_00128047;
  }
LAB_00128123:
  local_a38 = (MutexSys *)local_800;
  local_a98 = &local_750;
  local_960 = (MutexSys *)0x80;
  pMVar1 = *(MutexSys **)local_a80;
  if (local_a78 != *(FastAllocator **)(pMVar1 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(pMVar1 + 8) != 0) {
      LOCK();
      *(long *)(*(long *)(pMVar1 + 8) + 0x118) =
           *(long *)(*(long *)(pMVar1 + 8) + 0x118) +
           *(long *)(pMVar1 + 0xa8) + *(long *)(pMVar1 + 0x68);
      UNLOCK();
      LOCK();
      *(long *)(*(long *)(pMVar1 + 8) + 0x120) =
           *(long *)(*(long *)(pMVar1 + 8) + 0x120) +
           (((*(long *)(pMVar1 + 0x98) + *(long *)(pMVar1 + 0x58)) - *(long *)(pMVar1 + 0x50)) -
           *(long *)(pMVar1 + 0x90));
      UNLOCK();
      LOCK();
      *(long *)(*(long *)(pMVar1 + 8) + 0x128) =
           *(long *)(*(long *)(pMVar1 + 8) + 0x128) +
           *(long *)(pMVar1 + 0xb0) + *(long *)(pMVar1 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(pMVar1 + 0x48) = 0;
    *(undefined8 *)(pMVar1 + 0x58) = 0;
    *(undefined8 *)(pMVar1 + 0x50) = 0;
    *(undefined8 *)(pMVar1 + 0x68) = 0;
    *(undefined8 *)(pMVar1 + 0x70) = 0;
    *(undefined8 *)(pMVar1 + 0x60) = 0;
    if (local_a78 == (FastAllocator *)0x0) {
      *(undefined8 *)(pMVar1 + 0x88) = 0;
      uVar12 = 0;
      *(undefined8 *)(pMVar1 + 0x98) = 0;
      *(undefined8 *)(pMVar1 + 0x90) = 0;
      *(undefined8 *)(pMVar1 + 0xa8) = 0;
      *(undefined8 *)(pMVar1 + 0xb0) = 0;
    }
    else {
      uVar12 = *(undefined8 *)(local_a78 + 0x10);
      *(undefined8 *)(pMVar1 + 0x88) = 0;
      *(undefined8 *)(pMVar1 + 0x98) = 0;
      *(undefined8 *)(pMVar1 + 0x60) = uVar12;
      *(undefined8 *)(pMVar1 + 0x90) = 0;
      *(undefined8 *)(pMVar1 + 0xa8) = 0;
      *(undefined8 *)(pMVar1 + 0xb0) = 0;
      *(undefined8 *)(pMVar1 + 0xa0) = 0;
      uVar12 = *(undefined8 *)(local_a78 + 0x10);
    }
    *(undefined8 *)(pMVar1 + 0xa0) = uVar12;
    LOCK();
    *(FastAllocator **)(pMVar1 + 8) = local_a78;
    UNLOCK();
    local_8f0 = pMVar1;
    embree::MutexSys::lock();
    plVar10 = *(long **)(local_a78 + 0x138);
    if (plVar10 == *(long **)(local_a78 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(local_a78 + 0x130),plVar10,&local_8f0);
    }
    else {
      *plVar10 = (long)pMVar1;
      *(long *)(local_a78 + 0x138) = *(long *)(local_a78 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  lVar19 = *(long *)(local_a80 + 0x10);
  *(long *)(local_a80 + 0x28) = *(long *)(local_a80 + 0x28) + 0x80;
  uVar13 = (ulong)(-(int)lVar19 & 0xf);
  uVar16 = lVar19 + 0x80 + uVar13;
  *(ulong *)(local_a80 + 0x10) = uVar16;
  if (*(ulong *)(local_a80 + 0x18) < uVar16) {
    *(long *)(local_a80 + 0x10) = lVar19;
    if (*(MutexSys **)(local_a80 + 0x20) < (MutexSys *)0x200) {
      puVar8 = (undefined8 *)FastAllocator::malloc(local_a78,(ulong *)&local_960,0x40,false);
    }
    else {
      local_8f0 = *(MutexSys **)(local_a80 + 0x20);
      puVar8 = (undefined8 *)FastAllocator::malloc(local_a78,(ulong *)&local_8f0,0x40,true);
      *(undefined8 **)(local_a80 + 8) = puVar8;
      lVar19 = *(long *)(local_a80 + 0x10);
      *(long *)(local_a80 + 0x10) = 0x80;
      *(long *)(local_a80 + 0x30) =
           (*(long *)(local_a80 + 0x18) + *(long *)(local_a80 + 0x30)) - lVar19;
      *(MutexSys **)(local_a80 + 0x18) = local_8f0;
      if (local_8f0 < (MutexSys *)0x80) {
        local_8f0 = *(MutexSys **)(local_a80 + 0x20);
        *(long *)(local_a80 + 0x10) = 0;
        puVar8 = (undefined8 *)FastAllocator::malloc(local_a78,(ulong *)&local_8f0,0x40,false);
        *(undefined8 **)(local_a80 + 8) = puVar8;
        lVar19 = *(long *)(local_a80 + 0x10);
        *(long *)(local_a80 + 0x10) = 0x80;
        *(long *)(local_a80 + 0x30) =
             (*(long *)(local_a80 + 0x18) + *(long *)(local_a80 + 0x30)) - lVar19;
        *(MutexSys **)(local_a80 + 0x18) = local_8f0;
        if (local_8f0 < (MutexSys *)0x80) {
          puVar8 = (undefined8 *)0x0;
          *(long *)(local_a80 + 0x10) = 0;
        }
      }
    }
  }
  else {
    *(ulong *)(local_a80 + 0x30) = *(long *)(local_a80 + 0x30) + uVar13;
    puVar8 = (undefined8 *)(*(long *)(local_a80 + 8) + -0x80 + uVar16);
  }
  *puVar8 = 8;
  puVar8[1] = 8;
  puVar8[2] = 8;
  puVar8[3] = 8;
  *(undefined4 *)(puVar8 + 0xc) = uVar26;
  *(undefined4 *)((long)puVar8 + 100) = uVar27;
  *(undefined4 *)(puVar8 + 0xd) = uVar28;
  *(undefined4 *)((long)puVar8 + 0x6c) = uVar29;
  *(undefined4 *)(puVar8 + 8) = uVar26;
  *(undefined4 *)((long)puVar8 + 0x44) = uVar27;
  *(undefined4 *)(puVar8 + 9) = uVar28;
  *(undefined4 *)((long)puVar8 + 0x4c) = uVar29;
  *(undefined4 *)(puVar8 + 4) = uVar26;
  *(undefined4 *)((long)puVar8 + 0x24) = uVar27;
  *(undefined4 *)(puVar8 + 5) = uVar28;
  *(undefined4 *)((long)puVar8 + 0x2c) = uVar29;
  *(float *)(puVar8 + 0xe) = fVar21;
  *(float *)((long)puVar8 + 0x74) = fVar23;
  *(float *)(puVar8 + 0xf) = fVar24;
  *(float *)((long)puVar8 + 0x7c) = fVar25;
  *(float *)(puVar8 + 10) = fVar21;
  *(float *)((long)puVar8 + 0x54) = fVar23;
  *(float *)(puVar8 + 0xb) = fVar24;
  *(float *)((long)puVar8 + 0x5c) = fVar25;
  *(float *)(puVar8 + 6) = fVar21;
  *(float *)((long)puVar8 + 0x34) = fVar23;
  *(float *)(puVar8 + 7) = fVar24;
  *(float *)((long)puVar8 + 0x3c) = fVar25;
  puVar17 = puVar8 + 4;
  plVar10 = local_a98;
  do {
    lVar19 = plVar10[3];
    puVar11 = (undefined8 *)((long)puVar17 + 4);
    lVar14 = plVar10[2];
    lVar6 = plVar10[5];
    uVar26 = *(undefined4 *)((long)plVar10 + 0x24);
    lVar7 = plVar10[4];
    *(undefined4 *)(puVar17 + 4) = *(undefined4 *)((long)plVar10 + 0x14);
    *(int *)puVar17 = (int)lVar14;
    *(int *)(puVar17 + 8) = (int)lVar19;
    *(int *)(puVar17 + 2) = (int)lVar7;
    *(undefined4 *)(puVar17 + 6) = uVar26;
    *(int *)(puVar17 + 10) = (int)lVar6;
    puVar17 = puVar11;
    plVar10 = plVar10 + 0xe;
  } while ((undefined8 *)((long)puVar8 + uVar18 * 4 + 0x20) != puVar11);
  uVar16 = 0;
  if (param_1[6] < (ulong)(param_2[0xb] - param_2[10])) {
    local_8f0 = local_a38;
    pMStack_a28 = (MutexSys *)0x0;
    local_8e8 = local_a98;
    local_8e0 = param_1;
    TaskScheduler::
    spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
              (0,uVar18,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_8f0,
               (TaskGroupContext *)&pMStack_a28);
    embree::TaskScheduler::wait();
    if (pMStack_a28 != (MutexSys *)0x0) {
      local_960 = pMStack_a28;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_960);
    }
    uVar16 = 0;
    do {
      puVar8[uVar16] = *(undefined8 *)(local_a38 + uVar16 * 8);
      uVar16 = uVar16 + 1;
    } while (uVar16 != uVar18);
  }
  else {
    do {
      uVar12 = recurse(param_1,local_a98,0);
      *(undefined8 *)(local_800 + uVar16 * 8) = uVar12;
      uVar16 = uVar16 + 1;
      local_a98 = local_a98 + 0xe;
    } while (uVar16 != uVar18);
    uVar16 = 0;
    do {
      puVar8[uVar16] = *(undefined8 *)(local_a38 + uVar16 * 8);
      uVar16 = uVar16 + 1;
    } while (uVar16 != uVar18);
  }
LAB_00127a52:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return puVar8;
}



/* embree::NodeRefPtr<4> embree::sse2::GeneralBVHBuilder::build<embree::NodeRefPtr<4>,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::Scene::BuildProgressMonitorInterface>(embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>&, embree::PrimRef*, embree::sse2::PrimInfoExtRange const&,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > > const&,
   embree::Scene::BuildProgressMonitorInterface const&, embree::sse2::GeneralBVHBuilder::Settings
   const&) */

void embree::sse2::GeneralBVHBuilder::
     build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::Scene::BuildProgressMonitorInterface>
               (undefined8 param_1,undefined8 param_2,undefined4 *param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,ulong *param_7)

{
  long in_FS_OFFSET;
  undefined1 local_132;
  undefined1 local_131;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 uStack_120;
  undefined8 local_118;
  undefined8 local_108;
  undefined1 local_100;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  ulong local_98;
  ulong uStack_90;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  ulong uStack_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 *local_48;
  undefined1 *local_40;
  undefined1 *local_38;
  undefined8 local_30;
  undefined8 *local_28;
  undefined8 *local_20;
  undefined8 local_18;
  long local_10;
  
  local_98 = *param_7;
  uStack_90 = param_7[1];
  local_88 = param_7[2];
  uStack_80 = param_7[3];
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = param_7[4];
  uStack_70 = param_7[5];
  local_68 = param_7[6];
  uStack_60 = param_7[7];
  local_48 = &local_130;
  local_40 = &local_131;
  local_38 = &local_132;
  local_20 = &local_108;
  local_28 = &local_128;
  local_130 = param_4;
  local_58 = param_2;
  local_50 = param_1;
  local_30 = param_5;
  local_18 = param_6;
  if (0x10 < *param_7) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  local_b8 = *(undefined8 *)(param_3 + 0x10);
  local_f8 = *param_3;
  uStack_f4 = param_3[1];
  uStack_f0 = param_3[2];
  uStack_ec = param_3[3];
  local_100 = 0;
  local_e8 = param_3[4];
  uStack_e4 = param_3[5];
  uStack_e0 = param_3[6];
  uStack_dc = param_3[7];
  local_d8 = param_3[8];
  uStack_d4 = param_3[9];
  uStack_d0 = param_3[10];
  uStack_cc = param_3[0xb];
  local_108 = 1;
  local_c8 = param_3[0xc];
  uStack_c4 = param_3[0xd];
  uStack_c0 = param_3[0xe];
  uStack_bc = param_3[0xf];
  local_b0 = *(undefined8 *)(param_3 + 0x12);
  local_a8 = *(undefined8 *)(param_3 + 0x14);
  local_128 = 0;
  uStack_120 = 0;
  local_118 = 0;
  BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
  ::recurse(&local_98,local_20,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::build() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::build(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  char cVar1;
  undefined8 *puVar2;
  Geometry *pGVar3;
  ulong *puVar4;
  void *pvVar5;
  string *psVar6;
  long lVar7;
  uint uVar8;
  ulong uVar9;
  long lVar10;
  undefined8 *puVar11;
  ulong uVar12;
  undefined8 uVar13;
  long lVar14;
  long *plVar15;
  size_t sVar16;
  long *plVar17;
  ulong uVar18;
  byte bVar19;
  uint uVar20;
  long *plVar21;
  ulong *puVar22;
  vector_t *pvVar23;
  undefined **ppuVar24;
  uint uVar25;
  undefined8 *puVar26;
  long *plVar27;
  ulong *puVar28;
  vector_t *pvVar29;
  ulong uVar30;
  char *__s;
  vector_t *pvVar31;
  long in_FS_OFFSET;
  bool bVar32;
  float fVar33;
  double dVar34;
  double dVar35;
  double local_1e0;
  undefined4 local_1b0;
  float local_1ac;
  undefined8 local_1a8;
  undefined **local_1a0;
  undefined ***local_198;
  undefined **local_190;
  undefined **local_188;
  undefined8 local_180;
  undefined **local_178;
  undefined8 *local_170;
  undefined ****local_168;
  undefined ***local_158;
  undefined8 uStack_150;
  undefined8 local_148;
  undefined8 uStack_140;
  undefined ***local_138;
  undefined8 uStack_130;
  undefined8 local_128;
  undefined8 uStack_120;
  long local_118;
  long local_110;
  undefined ***local_108;
  float *pfStack_100;
  TaskGroupContext *local_f8;
  float *pfStack_f0;
  undefined ***local_e8;
  undefined8 uStack_e0;
  undefined8 local_d8;
  undefined8 uStack_d0;
  long local_c8;
  long local_c0;
  vector_t *local_b8;
  long *local_a8 [2];
  long local_98 [2];
  long *local_88;
  long local_80;
  long local_78 [2];
  ulong *local_68;
  long local_60;
  ulong local_58 [5];
  
  local_58[3] = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(this + 0x20) == 0) {
LAB_001292df:
    lVar10 = *(long *)(this + 0x18);
    pvVar23 = *(vector_t **)(lVar10 + 0x288);
    *(int *)(this + 0x98) = (int)pvVar23;
    if (pvVar23 == (vector_t *)0x0) goto LAB_001292fc;
    psVar6 = *(string **)(this + 0x10);
    bVar19 = *(byte *)(*(long *)(lVar10 + 0x188) + 0x464);
    if (*(long *)(lVar10 + 0x1d0) == 0) {
      uVar25 = 0;
      uVar20 = 0;
      if (bVar19 != 0) goto LAB_001299eb;
LAB_0012a220:
      bVar19 = 0;
      __s = "BuilderFastSpatialSAH";
    }
    else {
      uVar20 = 0;
      uVar25 = 0;
      lVar14 = 0;
      do {
        lVar7 = *(long *)(*(long *)(lVar10 + 0x1e0) + lVar14 * 8);
        if ((((lVar7 != 0) && ((*(byte *)(lVar7 + 0x3e) & 0x20) != 0)) &&
            (*(char *)(lVar7 + 0x3c) == '\x14')) &&
           ((*(int *)(lVar7 + 0x24) == 1 &&
            (uVar8 = (uint)lVar14, bVar32 = uVar25 < uVar8, uVar25 = uVar20, bVar32)))) {
          uVar25 = uVar8;
          uVar20 = uVar8;
        }
        lVar14 = lVar14 + 1;
      } while (*(long *)(lVar10 + 0x1d0) != lVar14);
      bVar19 = bVar19 | 0x7ffffff < uVar25;
      uVar20 = uVar25;
      if (bVar19 == 0) goto LAB_0012a220;
LAB_001299eb:
      uVar25 = uVar20;
      __s = "BuilderFastSpatialPresplitSAH";
    }
    local_a8[0] = local_98;
    std::__cxx11::string::_M_construct((ulong)local_a8,'\x01');
    *(undefined1 *)local_a8[0] = 0x34;
    plVar15 = (long *)std::__cxx11::string::_M_replace((ulong)local_a8,0,(char *)0x0,0x1232cc);
    plVar17 = plVar15 + 2;
    if ((long *)*plVar15 == plVar17) {
      uVar9 = plVar15[1] + 1;
      plVar21 = plVar17;
      plVar27 = local_78;
      if (7 < (uint)uVar9) {
        uVar30 = 0;
        do {
          uVar20 = (int)uVar30 + 8;
          uVar18 = (ulong)uVar20;
          *(undefined8 *)((long)local_78 + uVar30) = *(undefined8 *)((long)plVar17 + uVar30);
          uVar30 = uVar18;
        } while (uVar20 < ((uint)uVar9 & 0xfffffff8));
        plVar27 = (long *)((long)local_78 + uVar18);
        plVar21 = (long *)(uVar18 + (long)plVar17);
      }
      lVar10 = 0;
      if ((uVar9 & 4) != 0) {
        *(int *)plVar27 = (int)*plVar21;
        lVar10 = 4;
      }
      if ((uVar9 & 2) != 0) {
        *(undefined2 *)((long)plVar27 + lVar10) = *(undefined2 *)((long)plVar21 + lVar10);
        lVar10 = lVar10 + 2;
      }
      local_88 = local_78;
      if ((uVar9 & 1) != 0) {
        *(undefined1 *)((long)plVar27 + lVar10) = *(undefined1 *)((long)plVar21 + lVar10);
      }
    }
    else {
      local_78[0] = plVar15[2];
      local_88 = (long *)*plVar15;
    }
    local_80 = plVar15[1];
    *plVar15 = (long)plVar17;
    plVar15[1] = 0;
    *(undefined1 *)(plVar15 + 2) = 0;
    sVar16 = strlen(__s);
    if (0x3fffffffffffffffU - local_80 < sVar16) {
      std::__throw_length_error("basic_string::append");
      goto LAB_0012a346;
    }
    plVar17 = (long *)std::__cxx11::string::_M_append((char *)&local_88,(ulong)__s);
    puVar4 = (ulong *)(plVar17 + 2);
    if ((ulong *)*plVar17 == puVar4) {
      uVar9 = plVar17[1] + 1;
      puVar22 = puVar4;
      puVar28 = local_58;
      if (7 < (uint)uVar9) {
        uVar30 = 0;
        do {
          uVar20 = (int)uVar30 + 8;
          uVar18 = (ulong)uVar20;
          *(undefined8 *)((long)local_58 + uVar30) = *(undefined8 *)((long)puVar4 + uVar30);
          uVar30 = uVar18;
        } while (uVar20 < ((uint)uVar9 & 0xfffffff8));
        puVar28 = (ulong *)((long)local_58 + uVar18);
        puVar22 = (ulong *)(uVar18 + (long)puVar4);
      }
      lVar10 = 0;
      if ((uVar9 & 4) != 0) {
        *(int *)puVar28 = (int)*puVar22;
        lVar10 = 4;
      }
      if ((uVar9 & 2) != 0) {
        *(undefined2 *)((long)puVar28 + lVar10) = *(undefined2 *)((long)puVar22 + lVar10);
        lVar10 = lVar10 + 2;
      }
      local_68 = local_58;
      if ((uVar9 & 1) != 0) {
        *(undefined1 *)((long)puVar28 + lVar10) = *(undefined1 *)((long)puVar22 + lVar10);
      }
    }
    else {
      local_58[0] = plVar17[2];
      local_68 = (ulong *)*plVar17;
    }
    local_60 = plVar17[1];
    *plVar17 = (long)puVar4;
    plVar17[1] = 0;
    *(undefined1 *)(plVar17 + 2) = 0;
    local_1e0 = (double)embree::BVHN<4>::preBuild(psVar6);
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
    if (local_88 != local_78) {
      operator_delete(local_88,local_78[0] + 1);
    }
    if (local_a8[0] != local_98) {
      operator_delete(local_a8[0],local_98[0] + 1);
    }
  }
  else {
    uVar25 = *(uint *)(this + 0x98);
    if (*(uint *)(*(long *)(this + 0x20) + 0x20) == uVar25) {
      *(uint *)(this + 0x98) = uVar25;
    }
    else {
      lVar10 = *(long *)(this + 0x10);
      plVar17 = (long *)(lVar10 + 0x170);
      plVar15 = (long *)(lVar10 + 0x130);
      do {
        while (*plVar15 != 0) {
          lVar14 = *(long *)(*plVar15 + 0x18);
          *(long *)(*plVar15 + 0x18) = *plVar17;
          LOCK();
          *plVar17 = *plVar15;
          UNLOCK();
          LOCK();
          *plVar15 = lVar14;
          UNLOCK();
        }
        LOCK();
        *plVar15 = 0;
        UNLOCK();
        plVar15 = plVar15 + 1;
      } while (plVar17 != plVar15);
      plVar15 = *(long **)(lVar10 + 0x1a8);
      plVar27 = *(long **)(lVar10 + 0x1b0);
      if (plVar27 != plVar15) {
        do {
          while( true ) {
            lVar14 = *plVar15;
            if (lVar10 + 0x78 != *(long *)(lVar14 + 8)) break;
            embree::MutexSys::lock();
            if (lVar10 + 0x78 == *(long *)(lVar14 + 8)) {
              LOCK();
              plVar21 = (long *)(*(long *)(lVar14 + 8) + 0x118);
              *plVar21 = *plVar21 + *(long *)(lVar14 + 0xa8) + *(long *)(lVar14 + 0x68);
              UNLOCK();
              LOCK();
              plVar21 = (long *)(*(long *)(lVar14 + 8) + 0x120);
              *plVar21 = *plVar21 +
                         (((*(long *)(lVar14 + 0x98) + *(long *)(lVar14 + 0x58)) -
                          *(long *)(lVar14 + 0x50)) - *(long *)(lVar14 + 0x90));
              UNLOCK();
              LOCK();
              plVar21 = (long *)(*(long *)(lVar14 + 8) + 0x128);
              *plVar21 = *plVar21 + *(long *)(lVar14 + 0xb0) + *(long *)(lVar14 + 0x70);
              UNLOCK();
              *(undefined8 *)(lVar14 + 0x48) = 0;
              *(undefined8 *)(lVar14 + 0x58) = 0;
              *(undefined8 *)(lVar14 + 0x50) = 0;
              *(undefined8 *)(lVar14 + 0x68) = 0;
              *(undefined8 *)(lVar14 + 0x70) = 0;
              *(undefined8 *)(lVar14 + 0x60) = 0;
              *(undefined8 *)(lVar14 + 0x88) = 0;
              *(undefined8 *)(lVar14 + 0x98) = 0;
              *(undefined8 *)(lVar14 + 0x90) = 0;
              *(undefined8 *)(lVar14 + 0xa8) = 0;
              *(undefined8 *)(lVar14 + 0xb0) = 0;
              *(undefined8 *)(lVar14 + 0xa0) = 0;
              LOCK();
              *(undefined8 *)(lVar14 + 8) = 0;
              UNLOCK();
            }
            plVar15 = plVar15 + 1;
            embree::MutexSys::unlock();
            if (plVar27 == plVar15) goto LAB_001291d8;
          }
          plVar15 = plVar15 + 1;
        } while (plVar27 != plVar15);
LAB_001291d8:
        if (*(long *)(lVar10 + 0x1b0) != *(long *)(lVar10 + 0x1a8)) {
          *(long *)(lVar10 + 0x1b0) = *(long *)(lVar10 + 0x1a8);
        }
      }
      LOCK();
      *(undefined8 *)(lVar10 + 400) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar10 + 0x198) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar10 + 0x1a0) = 0;
      UNLOCK();
      if (*(long *)(lVar10 + 0x170) != 0) {
        cVar1 = *(char *)(lVar10 + 0x180);
        plVar15 = *(long **)(lVar10 + 0x78);
        puVar4 = *(ulong **)(lVar10 + 0x170);
joined_r0x00129243:
        puVar28 = puVar4;
        if (puVar28 != (ulong *)0x0) {
          puVar4 = (ulong *)puVar28[3];
          uVar9 = puVar28[4];
          uVar30 = *puVar28;
          if (*puVar28 < puVar28[1]) {
            uVar30 = puVar28[1];
          }
          if (puVar28[2] < uVar30) {
            uVar30 = puVar28[2];
          }
          if ((int)puVar28[5] != 0) goto code_r0x001292c7;
          if (cVar1 == '\0') {
            embree::alignedFree(puVar28);
          }
          else {
            (**(code **)(*plVar15 + 0x40))(plVar15,puVar28);
          }
          goto LAB_00129275;
        }
      }
      LOCK();
      *plVar17 = 0;
      UNLOCK();
      if (*(long *)(lVar10 + 0x178) != 0) {
        cVar1 = *(char *)(lVar10 + 0x180);
        plVar17 = *(long **)(lVar10 + 0x78);
        puVar4 = *(ulong **)(lVar10 + 0x178);
joined_r0x001293c2:
        puVar28 = puVar4;
        if (puVar28 != (ulong *)0x0) {
          puVar4 = (ulong *)puVar28[3];
          uVar9 = puVar28[4];
          uVar30 = *puVar28;
          if (*puVar28 < puVar28[1]) {
            uVar30 = puVar28[1];
          }
          if (puVar28[2] < uVar30) {
            uVar30 = puVar28[2];
          }
          if ((int)puVar28[5] != 0) goto code_r0x00129443;
          if (cVar1 == '\0') {
            embree::alignedFree(puVar28);
          }
          else {
            (**(code **)(*plVar17 + 0x40))(plVar17,puVar28);
          }
          goto LAB_001293f5;
        }
      }
      LOCK();
      *(undefined8 *)(lVar10 + 0x178) = 0;
      UNLOCK();
      plVar17 = (long *)(lVar10 + 0xf0);
      do {
        LOCK();
        *plVar17 = 0;
        UNLOCK();
        LOCK();
        plVar17[8] = 0;
        UNLOCK();
        plVar17 = plVar17 + 1;
      } while ((long *)(lVar10 + 0x130) != plVar17);
      pvVar5 = *(void **)(lVar10 + 0x1e8);
      lVar14 = *(long *)(lVar10 + 0x1e0);
      if (pvVar5 != (void *)0x0) {
        if ((ulong)(lVar14 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar5);
        }
        else {
          embree::os_free(pvVar5,lVar14 << 5,*(bool *)(lVar10 + 0x1d0));
        }
      }
      if (lVar14 != 0) {
        (**(code **)**(undefined8 **)(lVar10 + 0x1c8))
                  (*(undefined8 **)(lVar10 + 0x1c8),lVar14 * -0x20,1);
      }
      *(undefined8 *)(lVar10 + 0x1e8) = 0;
      *(undefined8 *)(lVar10 + 0x1e0) = 0;
      *(undefined8 *)(lVar10 + 0x1d8) = 0;
      if (*(long *)(this + 0x20) == 0) goto LAB_001292df;
      uVar25 = *(uint *)(*(long *)(this + 0x20) + 0x20);
      *(uint *)(this + 0x98) = uVar25;
    }
    pvVar23 = (vector_t *)(ulong)uVar25;
    if (pvVar23 == (vector_t *)0x0) {
LAB_001292fc:
      pvVar5 = *(void **)(this + 0x48);
      lVar10 = *(long *)(this + 0x40);
      if (pvVar5 != (void *)0x0) {
        if ((ulong)(lVar10 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar5);
        }
        else {
          embree::os_free(pvVar5,lVar10 << 5,(bool)this[0x30]);
        }
      }
      if (lVar10 != 0) {
        (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar10 * -0x20,1);
      }
      *(undefined8 *)(this + 0x48) = 0;
      *(undefined8 *)(this + 0x40) = 0;
      *(undefined8 *)(this + 0x38) = 0;
      if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Could not recover jumptable at 0x00129382. Too many branches */
                    /* WARNING: Treating indirect jump as call */
        (**(code **)(**(long **)(this + 0x10) + 0x28))();
        return;
      }
      goto LAB_0012a346;
    }
    uVar25 = *(uint *)(this + 0x94);
    local_60 = 0;
    local_58[0] = local_58[0] & 0xffffffffffffff00;
    bVar19 = 0x7ffffff < uVar25 | *(byte *)(*(long *)(*(long *)(this + 0x18) + 0x188) + 0x464);
    local_68 = local_58;
    local_1e0 = (double)embree::BVHN<4>::preBuild(*(string **)(this + 0x10));
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
  }
  fVar33 = (float)pvVar23 * *(float *)(this + 0x90);
  if (__LC7 <= fVar33) {
    pvVar29 = (vector_t *)((long)(fVar33 - __LC7) ^ 0x8000000000000000);
  }
  else {
    pvVar29 = (vector_t *)(long)fVar33;
  }
  pvVar31 = *(vector_t **)(this + 0x40);
  if (pvVar29 < pvVar23) {
    pvVar29 = pvVar23;
  }
  if (pvVar31 < pvVar29) {
    if (pvVar31 == (vector_t *)0x0) {
      pvVar31 = pvVar29;
      if (pvVar29 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar29;
      }
    }
    else {
      do {
        pvVar31 = (vector_t *)((long)pvVar31 * 2);
        if (pvVar31 == (vector_t *)0x0) {
          pvVar31 = (vector_t *)0x1;
        }
      } while (pvVar31 < pvVar29);
      if (pvVar29 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar29;
      }
    }
    puVar2 = *(undefined8 **)(this + 0x48);
    uVar9 = (long)pvVar31 << 5;
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),uVar9,0);
    if (uVar9 < 0x1c00000) {
      lVar10 = embree::alignedMalloc(uVar9,0x20);
    }
    else {
      lVar10 = embree::os_malloc(uVar9,(bool *)(this + 0x30));
    }
    *(long *)(this + 0x48) = lVar10;
    if (*(long *)(this + 0x38) != 0) {
      uVar9 = 0;
      puVar26 = puVar2;
      while( true ) {
        uVar13 = puVar26[1];
        puVar11 = (undefined8 *)(lVar10 + uVar9 * 0x20);
        *puVar11 = *puVar26;
        puVar11[1] = uVar13;
        uVar13 = puVar26[3];
        puVar11[2] = puVar26[2];
        puVar11[3] = uVar13;
        if (*(ulong *)(this + 0x38) <= uVar9 + 1) break;
        lVar10 = *(long *)(this + 0x48);
        uVar9 = uVar9 + 1;
        puVar26 = puVar26 + 4;
      }
    }
    lVar10 = *(long *)(this + 0x40);
    if (puVar2 != (undefined8 *)0x0) {
      if ((ulong)(lVar10 << 5) < 0x1c00000) {
        embree::alignedFree(puVar2);
      }
      else {
        embree::os_free(puVar2,lVar10 << 5,(bool)this[0x30]);
      }
    }
    if (lVar10 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar10 * -0x20,1);
    }
    lVar10 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar29;
    *(vector_t **)(this + 0x40) = pvVar31;
    if (*(long *)(this + 0x20) == 0) goto LAB_00129576;
LAB_00128e2b:
    *(undefined4 *)(lVar10 + 0x1c0) = 1;
    pGVar3 = *(Geometry **)(this + 0x20);
    lVar10 = *(long *)(*(long *)(this + 0x10) + 0x68);
    if (bVar19 == 0) {
      if (pGVar3 == (Geometry *)0x0) goto LAB_0012a230;
      embree::sse2::createPrimRefArray
                ((Geometry *)&local_108,(uint)pGVar3,(ulong)*(uint *)(this + 0x94),pvVar29,
                 (BuildProgressMonitor *)(this + 0x28));
      goto LAB_00129e08;
    }
    if (pGVar3 == (Geometry *)0x0) goto LAB_00129584;
    createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
              ((sse2 *)&local_108,pGVar3,uVar25,(ulong)pvVar23,(vector_t *)(this + 0x28),
               (BuildProgressMonitor *)(lVar10 + 600));
LAB_00128e77:
    dVar35 = _LC61;
    local_110 = local_c0;
    local_118 = local_c8;
    local_158 = local_108;
    uStack_150 = pfStack_100;
    dVar34 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC59 * __LC60;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC61 <= dVar34) {
      uVar9 = (long)(dVar34 - _LC61) ^ 0x8000000000000000;
    }
    else {
      uVar9 = (ulong)dVar34;
    }
    uVar9 = uVar9 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar9);
    local_170 = *(undefined8 **)(this + 0x10);
    uVar30 = local_110 - local_118;
    if ((uVar30 == 0) || (uVar9 == 0)) {
      uVar9 = 0x400;
    }
    else {
      bVar19 = *(byte *)((long)local_170 + 0x182);
      uVar12 = embree::TaskScheduler::threadCount();
      lVar10 = (2 - (ulong)bVar19) * local_170[0x11];
      uVar18 = lVar10 * 0x14;
      if (((uVar9 - 1) + uVar18) / uVar18 < uVar12) {
        uVar18 = lVar10 * 0x50;
        if ((long)uVar18 < 0) {
          dVar34 = (double)(uVar18 >> 1) + (double)(uVar18 >> 1);
        }
        else {
          dVar34 = (double)(long)uVar18;
        }
        dVar34 = dVar34 / ((double)uVar9 / (double)uVar30);
        if ((double)((ulong)dVar34 & _LC67) < _LC62) {
          dVar34 = (double)((ulong)((double)(long)dVar34 +
                                   (double)(-(ulong)((double)(long)dVar34 < dVar34) & _LC64)) |
                           ~_LC67 & (ulong)dVar34);
        }
        if (dVar35 <= dVar34) {
          uVar9 = (long)(dVar34 - dVar35) ^ 0x8000000000000000;
        }
        else {
          uVar9 = (ulong)dVar34;
        }
        local_170 = *(undefined8 **)(this + 0x10);
      }
      else {
        local_170 = *(undefined8 **)(this + 0x10);
        uVar9 = 0x400;
      }
    }
    local_f8 = *(TaskGroupContext **)(this + 0x60);
    pfStack_f0 = *(float **)(this + 0x68);
    *(ulong *)(this + 0x80) = uVar9;
    *(undefined8 *)(this + 0x50) = 4;
    local_e8 = *(undefined ****)(this + 0x70);
    uStack_e0 = *(undefined8 *)(this + 0x78);
    *(undefined8 *)(this + 0x58) = 0x28;
    local_108 = *(undefined ****)(this + 0x50);
    pfStack_100 = *(float **)(this + 0x58);
    local_d8 = *(undefined8 *)(this + 0x80);
    uStack_d0 = *(undefined8 *)(this + 0x88);
    local_178 = &PTR_createLeaf_0012f460;
    uVar13 = embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderV::build
                       (&local_178,local_170 + 0xf,local_170[0xd] + 600,*(undefined8 *)(this + 0x48)
                        ,&local_158);
  }
  else {
    lVar10 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar29;
    if (*(long *)(this + 0x20) != 0) goto LAB_00128e2b;
LAB_00129576:
    lVar10 = *(long *)(lVar10 + 0x68);
    if (bVar19 != 0) {
LAB_00129584:
      createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
                ((sse2 *)&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar23,this + 0x28,
                 lVar10 + 600);
      goto LAB_00128e77;
    }
LAB_0012a230:
    embree::sse2::createPrimRefArray
              (&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar29,this + 0x28,lVar10 + 600);
LAB_00129e08:
    dVar35 = _LC61;
    local_110 = local_c0;
    uVar13 = *(undefined8 *)(this + 0x18);
    local_118 = local_c8;
    local_158 = local_108;
    uStack_150 = pfStack_100;
    dVar34 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC59 * __LC60;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC61 <= dVar34) {
      uVar9 = (long)(dVar34 - _LC61) ^ 0x8000000000000000;
    }
    else {
      uVar9 = (ulong)dVar34;
    }
    uVar9 = uVar9 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar9);
    ppuVar24 = *(undefined ***)(this + 0x10);
    uVar30 = local_110 - local_118;
    if ((uVar30 == 0) || (uVar9 == 0)) {
      uVar9 = 0x400;
    }
    else {
      bVar19 = *(byte *)((long)ppuVar24 + 0x182);
      uVar12 = embree::TaskScheduler::threadCount();
      lVar10 = (2 - (ulong)bVar19) * (long)ppuVar24[0x11];
      uVar18 = lVar10 * 0x14;
      if (((uVar9 - 1) + uVar18) / uVar18 < uVar12) {
        uVar18 = lVar10 * 0x50;
        if ((long)uVar18 < 0) {
          dVar34 = (double)(uVar18 >> 1) + (double)(uVar18 >> 1);
        }
        else {
          dVar34 = (double)(long)uVar18;
        }
        dVar34 = dVar34 / ((double)uVar9 / (double)uVar30);
        if ((double)((ulong)dVar34 & _LC67) < _LC62) {
          dVar34 = (double)((ulong)((double)(long)dVar34 +
                                   (double)(-(ulong)((double)(long)dVar34 < dVar34) & _LC64)) |
                           ~_LC67 & (ulong)dVar34);
        }
        if (dVar35 <= dVar34) {
          uVar9 = (long)(dVar34 - dVar35) ^ 0x8000000000000000;
        }
        else {
          uVar9 = (ulong)dVar34;
        }
        ppuVar24 = *(undefined ***)(this + 0x10);
        uVar30 = local_110 - local_118;
      }
      else {
        ppuVar24 = *(undefined ***)(this + 0x10);
        uVar9 = 0x400;
        uVar30 = local_110 - local_118;
      }
    }
    local_1a0 = *(undefined ***)(this + 0x48);
    *(ulong *)(this + 0x80) = uVar9;
    *(undefined8 *)(this + 0x50) = 4;
    local_188 = &PTR_operator___0012fa80;
    *(undefined8 *)(this + 0x58) = 0x28;
    local_180 = *(undefined8 *)(ppuVar24[0xd] + 0x260);
    local_170 = &local_1a8;
    local_190 = (undefined **)0x0;
    local_1a8 = uVar13;
    local_178 = local_1a0;
    local_168 = &local_158;
    if (uVar30 == 1) {
      fVar33 = *(float *)((long)local_1a0 + 0x14) - *(float *)((long)local_1a0 + 4);
      fVar33 = (fVar33 + (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1))) *
               (*(float *)(local_1a0 + 2) - *(float *)local_1a0) +
               fVar33 * (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1));
      dVar35 = (double)(fVar33 + fVar33) + 0.0;
      uVar9 = 1;
    }
    else {
      local_198 = &local_1a0;
      local_108 = &local_190;
      pfStack_100 = &local_1ac;
      local_f8 = (TaskGroupContext *)&local_198;
      dVar35 = (double)_ZN6embree24parallel_reduce_internalImdZNS_15parallel_reduceImdZNS_4sse230BVHBuilderBinnedFastSpatialSAH5buildINS_10NodeRefPtrILi4EEENS_4BVHNILi4EE11CreateAllocENS_10AABBNode_tIS6_Li4EE7Create2ENSB_4Set2ENS2_17CreateLeafSpatialILi4ENS_10TriangleMvILi4EEEEENS2_23TriangleSplitterFactoryENS_5Scene29BuildProgressMonitorInterfaceEEET_T0_T1_T2_RKT3_T4_T5_PNS_7PrimRefEmRKNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEERKNS2_17GeneralBVHBuilder8SettingsEEUlRKNS_5rangeImEEE_St4plusIdEEESM_SL_SL_RKSM_RKSN_RKSO_EUlS18_E_S1D_EESM_SL_SL_SL_SL_S1F_S1H_S1J__isra_0
                                 (uVar30,0,uVar30,&local_190,
                                  (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108);
      uVar9 = local_110 - local_118;
    }
    pfStack_100 = (float *)&local_1b0;
    local_1ac = _LC30 / (float)dVar35;
    local_1b0 = 0x41200000;
    local_198 = (undefined ***)0x0;
    local_108 = &local_1a0;
    local_f8 = (TaskGroupContext *)&local_158;
    pfStack_f0 = &local_1ac;
    TaskScheduler::
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (0,uVar9,1,(_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,
               (TaskGroupContext *)&local_198);
    embree::TaskScheduler::wait();
    if (local_198 != (undefined ***)0x0) {
      local_190 = (undefined **)local_198;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_190);
    }
    local_c8 = 0;
    local_c0 = local_110 - local_118;
    local_108 = local_158;
    pfStack_100 = (float *)uStack_150;
    local_f8 = (TaskGroupContext *)local_148;
    pfStack_f0 = (float *)uStack_140;
    local_e8 = local_138;
    uStack_e0 = uStack_130;
    local_d8 = local_128;
    uStack_d0 = uStack_120;
    local_190 = ppuVar24;
    local_b8 = pvVar29;
    uVar13 = GeneralBVHBuilder::
             build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::Scene::BuildProgressMonitorInterface>
                       (&local_178,local_1a0,
                        (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,ppuVar24 + 0xf
                        ,&local_190,&local_188,this + 0x50);
  }
  local_108 = local_158;
  pfStack_100 = (float *)uStack_150;
  local_f8 = (TaskGroupContext *)local_148;
  pfStack_f0 = (float *)uStack_140;
  local_e8 = local_158;
  uStack_e0 = uStack_150;
  local_d8 = local_148;
  uStack_d0 = uStack_140;
  embree::BVHN<4>::set(*(undefined8 *)(this + 0x10),uVar13,&local_108,local_110 - local_118);
  embree::BVHN<4>::layoutLargeNodes(*(ulong *)(this + 0x10));
  if ((*(long *)(this + 0x18) != 0) && ((*(byte *)(*(long *)(this + 0x18) + 0x230) & 1) == 0)) {
    pvVar5 = *(void **)(this + 0x48);
    lVar10 = *(long *)(this + 0x40);
    if (pvVar5 != (void *)0x0) {
      if ((ulong)(lVar10 << 5) < 0x1c00000) {
        embree::alignedFree(pvVar5);
      }
      else {
        embree::os_free(pvVar5,lVar10 << 5,(bool)this[0x30]);
      }
    }
    if (lVar10 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar10 * -0x20,1);
    }
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x38) = 0;
  }
  lVar10 = *(long *)(this + 0x10);
  plVar17 = (long *)(lVar10 + 0x130);
  plVar15 = (long *)(lVar10 + 0x170);
  do {
    while (*plVar17 != 0) {
      lVar14 = *(long *)(*plVar17 + 0x18);
      *(long *)(*plVar17 + 0x18) = *plVar15;
      LOCK();
      *plVar15 = *plVar17;
      UNLOCK();
      LOCK();
      *plVar17 = lVar14;
      UNLOCK();
    }
    LOCK();
    *plVar17 = 0;
    UNLOCK();
    plVar17 = plVar17 + 1;
  } while (plVar15 != plVar17);
  plVar17 = *(long **)(lVar10 + 0x1a8);
  plVar15 = *(long **)(lVar10 + 0x1b0);
  if (plVar17 != plVar15) {
    do {
      while( true ) {
        lVar14 = *plVar17;
        if (lVar10 + 0x78 != *(long *)(lVar14 + 8)) break;
        embree::MutexSys::lock();
        if (lVar10 + 0x78 == *(long *)(lVar14 + 8)) {
          LOCK();
          plVar27 = (long *)(*(long *)(lVar14 + 8) + 0x118);
          *plVar27 = *plVar27 + *(long *)(lVar14 + 0xa8) + *(long *)(lVar14 + 0x68);
          UNLOCK();
          LOCK();
          plVar27 = (long *)(*(long *)(lVar14 + 8) + 0x120);
          *plVar27 = *plVar27 +
                     (((*(long *)(lVar14 + 0x98) + *(long *)(lVar14 + 0x58)) -
                      *(long *)(lVar14 + 0x50)) - *(long *)(lVar14 + 0x90));
          UNLOCK();
          LOCK();
          plVar27 = (long *)(*(long *)(lVar14 + 8) + 0x128);
          *plVar27 = *plVar27 + *(long *)(lVar14 + 0xb0) + *(long *)(lVar14 + 0x70);
          UNLOCK();
          *(undefined8 *)(lVar14 + 0x48) = 0;
          *(undefined8 *)(lVar14 + 0x58) = 0;
          *(undefined8 *)(lVar14 + 0x50) = 0;
          *(undefined8 *)(lVar14 + 0x68) = 0;
          *(undefined8 *)(lVar14 + 0x70) = 0;
          *(undefined8 *)(lVar14 + 0x60) = 0;
          *(undefined8 *)(lVar14 + 0x88) = 0;
          *(undefined8 *)(lVar14 + 0x98) = 0;
          *(undefined8 *)(lVar14 + 0x90) = 0;
          *(undefined8 *)(lVar14 + 0xa8) = 0;
          *(undefined8 *)(lVar14 + 0xb0) = 0;
          *(undefined8 *)(lVar14 + 0xa0) = 0;
          LOCK();
          *(undefined8 *)(lVar14 + 8) = 0;
          UNLOCK();
        }
        plVar17 = plVar17 + 1;
        embree::MutexSys::unlock();
        if (plVar15 == plVar17) goto LAB_001298e7;
      }
      plVar17 = plVar17 + 1;
    } while (plVar15 != plVar17);
LAB_001298e7:
    if (*(long *)(lVar10 + 0x1a8) != *(long *)(lVar10 + 0x1b0)) {
      *(long *)(lVar10 + 0x1b0) = *(long *)(lVar10 + 0x1a8);
    }
  }
  embree::BVHN<4>::postBuild(local_1e0);
  if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
LAB_0012a346:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
code_r0x001292c7:
  if ((int)puVar28[5] == 1) {
    embree::os_free(puVar28,puVar28[2] + 0x40,*(bool *)((long)puVar28 + 0x2c));
LAB_00129275:
    if (plVar15 != (long *)0x0) {
      (**(code **)(*plVar15 + 0x20))(plVar15,-(uVar9 + 0x40 + uVar30),1);
    }
  }
  goto joined_r0x00129243;
code_r0x00129443:
  if ((int)puVar28[5] == 1) {
    embree::os_free(puVar28,puVar28[2] + 0x40,*(bool *)((long)puVar28 + 0x2c));
LAB_001293f5:
    if (plVar17 != (long *)0x0) {
      (**(code **)(*plVar17 + 0x20))(plVar17,-(uVar9 + 0x40 + uVar30),1);
    }
  }
  goto joined_r0x001293c2;
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressM...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  long lVar1;
  undefined8 uVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  
  uVar6 = *(ulong *)(this + 8);
  uVar3 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < uVar6 - uVar3) {
    uVar6 = uVar6 + uVar3 >> 1;
    spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar3,uVar6,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x38));
    spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar6,*(ulong *)(this + 8),*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x38));
    embree::TaskScheduler::wait();
    return;
  }
  if (uVar3 < uVar6) {
    lVar5 = uVar3 * 0x70;
    do {
      lVar1 = *(long *)(this + 0x20);
      lVar4 = *(long *)(this + 0x28) + lVar5;
      lVar5 = lVar5 + 0x70;
      uVar2 = sse2::GeneralBVHBuilder::
              BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
              ::recurse(*(undefined8 *)(this + 0x30),lVar4,1);
      *(undefined8 *)(lVar1 + uVar3 * 8) = uVar2;
      uVar3 = uVar3 + 1;
    } while (uVar3 < uVar6);
  }
  return;
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}


