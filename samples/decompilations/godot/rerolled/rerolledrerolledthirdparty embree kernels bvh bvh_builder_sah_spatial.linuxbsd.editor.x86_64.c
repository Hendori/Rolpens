/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__adjust_heap<embree::PrimRef*, long, embree::PrimRef,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::PrimRef*, long, long, embree::PrimRef,
   __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::__adjust_heap<embree::PrimRef*,long,embree::PrimRef,__gnu_cxx::__ops::_Iter_less_iter>
               (long param_1,long param_2,ulong param_3,undefined4 *param_4)

{
  undefined8 uVar1;
  long lVar2;
  undefined8 *puVar3;
  long lVar4;
  undefined8 *puVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  
  lVar8 = (long)(param_3 - 1) / 2;
  lVar4 = param_2;
  if (param_2 < lVar8) {
    do {
      lVar6 = (lVar4 + 1) * 2;
      lVar2 = (lVar4 + 1) * 0x40;
      lVar7 = param_1 + -0x20 + lVar2;
      puVar3 = (undefined8 *)(lVar2 + param_1);
      if (CONCAT44(*(undefined4 *)((long)puVar3 + 0x1c),*(undefined4 *)((long)puVar3 + 0xc)) <
          CONCAT44(*(undefined4 *)(lVar7 + 0x1c),*(undefined4 *)(lVar7 + 0xc))) {
        lVar6 = lVar6 + -1;
        puVar5 = (undefined8 *)(lVar4 * 0x20 + param_1);
        puVar3 = (undefined8 *)(lVar6 * 0x20 + param_1);
        uVar1 = puVar3[1];
        *puVar5 = *puVar3;
        puVar5[1] = uVar1;
        uVar1 = puVar3[3];
        puVar5[2] = puVar3[2];
        puVar5[3] = uVar1;
        lVar4 = lVar6;
      }
      else {
        uVar1 = puVar3[1];
        puVar5 = (undefined8 *)(lVar4 * 0x20 + param_1);
        *puVar5 = *puVar3;
        puVar5[1] = uVar1;
        uVar1 = puVar3[3];
        puVar5[2] = puVar3[2];
        puVar5[3] = uVar1;
        lVar4 = lVar6;
      }
    } while (lVar4 < lVar8);
    if ((param_3 & 1) == 0) goto LAB_00100178;
  }
  else {
    puVar3 = (undefined8 *)(param_2 * 0x20 + param_1);
    if ((param_3 & 1) != 0) {
      uVar13 = *param_4;
      uVar14 = param_4[1];
      uVar15 = param_4[2];
      uVar16 = param_4[3];
      uVar9 = param_4[4];
      uVar10 = param_4[5];
      uVar11 = param_4[6];
      uVar12 = param_4[7];
      goto LAB_00100153;
    }
LAB_00100178:
    if ((long)(param_3 - 2) / 2 == lVar4) {
      lVar8 = lVar4 + 1;
      lVar4 = lVar4 + lVar8;
      puVar5 = (undefined8 *)(param_1 + -0x20 + lVar8 * 0x40);
      uVar1 = puVar5[1];
      *puVar3 = *puVar5;
      puVar3[1] = uVar1;
      uVar1 = puVar5[3];
      puVar3[2] = puVar5[2];
      puVar3[3] = uVar1;
      puVar3 = (undefined8 *)(lVar4 * 0x20 + param_1);
    }
  }
  uVar13 = *param_4;
  uVar14 = param_4[1];
  uVar15 = param_4[2];
  uVar16 = param_4[3];
  uVar9 = param_4[4];
  uVar10 = param_4[5];
  uVar11 = param_4[6];
  uVar12 = param_4[7];
  lVar8 = (lVar4 + -1) - (lVar4 + -1 >> 0x3f);
  if (param_2 < lVar4) {
    while( true ) {
      lVar7 = lVar8 >> 1;
      puVar3 = (undefined8 *)(param_1 + lVar4 * 0x20);
      puVar5 = (undefined8 *)(lVar7 * 0x20 + param_1);
      if (CONCAT44(uVar12,uVar16) <=
          CONCAT44(*(undefined4 *)((long)puVar5 + 0x1c),*(undefined4 *)((long)puVar5 + 0xc))) break;
      uVar1 = puVar5[1];
      *puVar3 = *puVar5;
      puVar3[1] = uVar1;
      uVar1 = puVar5[3];
      puVar3[2] = puVar5[2];
      puVar3[3] = uVar1;
      lVar8 = (lVar7 + -1) - (lVar7 + -1 >> 0x3f);
      lVar4 = lVar7;
      if (lVar7 <= param_2) {
        *(undefined4 *)puVar5 = uVar13;
        *(undefined4 *)((long)puVar5 + 4) = uVar14;
        *(undefined4 *)(puVar5 + 1) = uVar15;
        *(undefined4 *)((long)puVar5 + 0xc) = uVar16;
        *(undefined4 *)(puVar5 + 2) = uVar9;
        *(undefined4 *)((long)puVar5 + 0x14) = uVar10;
        *(undefined4 *)(puVar5 + 3) = uVar11;
        *(undefined4 *)((long)puVar5 + 0x1c) = uVar12;
        return;
      }
    }
  }
LAB_00100153:
  *(undefined4 *)puVar3 = uVar13;
  *(undefined4 *)((long)puVar3 + 4) = uVar14;
  *(undefined4 *)(puVar3 + 1) = uVar15;
  *(undefined4 *)((long)puVar3 + 0xc) = uVar16;
  *(undefined4 *)(puVar3 + 2) = uVar9;
  *(undefined4 *)((long)puVar3 + 0x14) = uVar10;
  *(undefined4 *)(puVar3 + 3) = uVar11;
  *(undefined4 *)((long)puVar3 + 0x1c) = uVar12;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   long, embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   long, long, embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >)
   [clone .isra.0] */

void std::
     __adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (long param_1,long param_2,ulong param_3,undefined8 *param_4)

{
  undefined1 uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 *puVar13;
  long lVar14;
  long lVar15;
  undefined8 *puVar16;
  long lVar17;
  long lVar18;
  long lVar19;
  
  lVar18 = (long)(param_3 - 1) / 2;
  lVar19 = param_2;
  if (param_2 < lVar18) {
    do {
      lVar14 = (lVar19 + 1) * 2;
      lVar15 = (lVar19 + 1) * 0xe0;
      puVar13 = (undefined8 *)(param_1 + lVar15);
      if ((ulong)(*(long *)(param_1 + -0x18 + lVar15) - *(long *)(param_1 + -0x20 + lVar15)) <
          (ulong)(puVar13[0xb] - puVar13[10])) {
        lVar14 = lVar14 + -1;
        puVar13 = (undefined8 *)(lVar14 * 0x70 + param_1);
      }
      puVar16 = (undefined8 *)(lVar19 * 0x70 + param_1);
      *puVar16 = *puVar13;
      *(undefined1 *)(puVar16 + 1) = *(undefined1 *)(puVar13 + 1);
      uVar2 = puVar13[3];
      puVar16[2] = puVar13[2];
      puVar16[3] = uVar2;
      uVar2 = puVar13[5];
      puVar16[4] = puVar13[4];
      puVar16[5] = uVar2;
      uVar2 = puVar13[7];
      puVar16[6] = puVar13[6];
      puVar16[7] = uVar2;
      uVar2 = puVar13[9];
      puVar16[8] = puVar13[8];
      puVar16[9] = uVar2;
      uVar2 = puVar13[0xb];
      puVar16[10] = puVar13[10];
      puVar16[0xb] = uVar2;
      puVar16[0xc] = puVar13[0xc];
      lVar19 = lVar14;
    } while (lVar14 < lVar18);
  }
  else {
    puVar13 = (undefined8 *)(param_2 * 0x70 + param_1);
    lVar14 = param_2;
  }
  if (((param_3 & 1) == 0) && ((long)(param_3 - 2) / 2 == lVar14)) {
    puVar16 = (undefined8 *)(param_1 + -0x70 + (lVar14 + 1) * 0xe0);
    *puVar13 = *puVar16;
    *(undefined1 *)(puVar13 + 1) = *(undefined1 *)(puVar16 + 1);
    uVar2 = puVar16[3];
    lVar14 = (lVar14 + 1) * 2 + -1;
    puVar13[2] = puVar16[2];
    puVar13[3] = uVar2;
    uVar2 = puVar16[5];
    puVar13[4] = puVar16[4];
    puVar13[5] = uVar2;
    uVar2 = puVar16[7];
    puVar13[6] = puVar16[6];
    puVar13[7] = uVar2;
    uVar2 = puVar16[9];
    puVar13[8] = puVar16[8];
    puVar13[9] = uVar2;
    uVar2 = puVar16[0xb];
    puVar13[10] = puVar16[10];
    puVar13[0xb] = uVar2;
    puVar13[0xc] = puVar16[0xc];
    puVar13 = (undefined8 *)(lVar14 * 0x70 + param_1);
  }
  uVar2 = *param_4;
  uVar1 = *(undefined1 *)(param_4 + 1);
  uVar4 = param_4[2];
  uVar5 = param_4[3];
  uVar6 = param_4[4];
  uVar7 = param_4[5];
  uVar8 = param_4[6];
  uVar9 = param_4[7];
  uVar10 = param_4[8];
  uVar11 = param_4[9];
  lVar19 = param_4[10];
  lVar18 = param_4[0xb];
  uVar3 = param_4[0xc];
  lVar15 = (lVar14 + -1) - (lVar14 + -1 >> 0x3f);
  if (param_2 < lVar14) {
    do {
      lVar17 = lVar15 >> 1;
      puVar16 = (undefined8 *)(lVar17 * 0x70 + param_1);
      puVar13 = (undefined8 *)(lVar14 * 0x70 + param_1);
      if ((ulong)(puVar16[0xb] - puVar16[10]) <= (ulong)(lVar18 - lVar19)) break;
      *puVar13 = *puVar16;
      *(undefined1 *)(puVar13 + 1) = *(undefined1 *)(puVar16 + 1);
      uVar12 = puVar16[3];
      puVar13[2] = puVar16[2];
      puVar13[3] = uVar12;
      uVar12 = puVar16[5];
      puVar13[4] = puVar16[4];
      puVar13[5] = uVar12;
      uVar12 = puVar16[7];
      puVar13[6] = puVar16[6];
      puVar13[7] = uVar12;
      uVar12 = puVar16[9];
      puVar13[8] = puVar16[8];
      puVar13[9] = uVar12;
      uVar12 = puVar16[0xb];
      puVar13[10] = puVar16[10];
      puVar13[0xb] = uVar12;
      puVar13[0xc] = puVar16[0xc];
      lVar15 = (lVar17 + -1) - (lVar17 + -1 >> 0x3f);
      puVar13 = puVar16;
      lVar14 = lVar17;
    } while (param_2 < lVar17);
  }
  *puVar13 = uVar2;
  *(undefined1 *)(puVar13 + 1) = uVar1;
  puVar13[10] = lVar19;
  puVar13[0xb] = lVar18;
  puVar13[0xc] = uVar3;
  puVar13[2] = uVar4;
  puVar13[3] = uVar5;
  puVar13[4] = uVar6;
  puVar13[5] = uVar7;
  puVar13[6] = uVar8;
  puVar13[7] = uVar9;
  puVar13[8] = uVar10;
  puVar13[9] = uVar11;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >)
   [clone .isra.0] */

void std::
     __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (undefined8 *param_1)

{
  undefined1 uVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 *puVar14;
  undefined8 *puVar15;
  ulong uVar16;
  
  lVar2 = param_1[0xb];
  lVar3 = param_1[10];
  uVar4 = *param_1;
  uVar1 = *(undefined1 *)(param_1 + 1);
  uVar6 = param_1[2];
  uVar7 = param_1[3];
  uVar8 = param_1[4];
  uVar9 = param_1[5];
  uVar10 = param_1[6];
  uVar11 = param_1[7];
  uVar12 = param_1[8];
  uVar13 = param_1[9];
  uVar5 = param_1[0xc];
  uVar16 = param_1[-3] - param_1[-4];
  puVar15 = param_1 + -0xe;
  while (puVar14 = puVar15, uVar16 < (ulong)(lVar2 - lVar3)) {
    puVar14[0xe] = *puVar14;
    puVar14[0x10] = puVar14[2];
    puVar14[0x11] = puVar14[3];
    *(undefined1 *)(puVar14 + 0xf) = *(undefined1 *)(puVar14 + 1);
    puVar14[0x12] = puVar14[4];
    puVar14[0x13] = puVar14[5];
    puVar14[0x14] = puVar14[6];
    puVar14[0x15] = puVar14[7];
    puVar14[0x16] = puVar14[8];
    puVar14[0x17] = puVar14[9];
    puVar14[0x18] = puVar14[10];
    puVar14[0x19] = puVar14[0xb];
    puVar14[0x1a] = puVar14[0xc];
    puVar15 = puVar14 + -0xe;
    param_1 = puVar14;
    uVar16 = puVar14[-3] - puVar14[-4];
  }
  *param_1 = uVar4;
  *(undefined1 *)(param_1 + 1) = uVar1;
  param_1[10] = lVar3;
  param_1[0xb] = lVar2;
  param_1[0xc] = uVar5;
  param_1[2] = uVar6;
  param_1[3] = uVar7;
  param_1[4] = uVar8;
  param_1[5] = uVar9;
  param_1[6] = uVar10;
  param_1[7] = uVar11;
  param_1[8] = uVar12;
  param_1[9] = uVar13;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__insertion_sort<embree::PrimRef*, __gnu_cxx::__ops::_Iter_less_iter>(embree::PrimRef*,
   embree::PrimRef*, __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined8 *param_1,undefined8 *param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  ulong uVar9;
  undefined8 *puVar10;
  undefined8 *puVar11;
  undefined8 *puVar12;
  undefined8 *puVar13;
  
  if (param_1 != param_2) {
    puVar12 = param_1 + 4;
    while (puVar13 = puVar12, param_2 != puVar12) {
      while( true ) {
        puVar12 = puVar13 + 4;
        uVar1 = *(undefined4 *)puVar13;
        uVar2 = *(undefined4 *)((long)puVar13 + 4);
        uVar3 = *(undefined4 *)(puVar13 + 1);
        uVar4 = *(undefined4 *)((long)puVar13 + 0xc);
        uVar5 = *(undefined4 *)(puVar13 + 2);
        uVar6 = *(undefined4 *)((long)puVar13 + 0x14);
        uVar7 = *(undefined4 *)(puVar13 + 3);
        uVar8 = *(undefined4 *)((long)puVar13 + 0x1c);
        if (CONCAT44(*(undefined4 *)((long)param_1 + 0x1c),*(undefined4 *)((long)param_1 + 0xc)) <=
            CONCAT44(*(undefined4 *)((long)puVar13 + 0x1c),*(undefined4 *)((long)puVar13 + 0xc)))
        break;
        puVar10 = puVar13;
        if (0 < (long)puVar13 - (long)param_1) {
          do {
            puVar11 = puVar10 + -4;
            *puVar10 = puVar10[-4];
            puVar10[1] = puVar10[-3];
            puVar10[2] = puVar10[-2];
            puVar10[3] = puVar10[-1];
            puVar10 = puVar11;
          } while (puVar11 !=
                   (undefined8 *)
                   ((long)puVar13 - ((long)puVar13 - (long)param_1 & 0xffffffffffffffe0U)));
        }
        *(undefined4 *)param_1 = uVar1;
        *(undefined4 *)((long)param_1 + 4) = uVar2;
        *(undefined4 *)(param_1 + 1) = uVar3;
        *(undefined4 *)((long)param_1 + 0xc) = uVar4;
        *(undefined4 *)(param_1 + 2) = uVar5;
        *(undefined4 *)((long)param_1 + 0x14) = uVar6;
        *(undefined4 *)(param_1 + 3) = uVar7;
        *(undefined4 *)((long)param_1 + 0x1c) = uVar8;
        puVar13 = puVar12;
        if (param_2 == puVar12) {
          return;
        }
      }
      uVar9 = CONCAT44(*(undefined4 *)((long)puVar13 + -4),*(undefined4 *)((long)puVar13 + -0x14));
      while (CONCAT44(uVar8,uVar4) < uVar9) {
        *puVar13 = puVar13[-4];
        puVar13[1] = puVar13[-3];
        puVar13[2] = puVar13[-2];
        puVar13[3] = puVar13[-1];
        uVar9 = CONCAT44(*(undefined4 *)((long)puVar13 + -0x24),
                         *(undefined4 *)((long)puVar13 + -0x34));
        puVar13 = puVar13 + -4;
      }
      *(undefined4 *)puVar13 = uVar1;
      *(undefined4 *)((long)puVar13 + 4) = uVar2;
      *(undefined4 *)(puVar13 + 1) = uVar3;
      *(undefined4 *)((long)puVar13 + 0xc) = uVar4;
      *(undefined4 *)(puVar13 + 2) = uVar5;
      *(undefined4 *)((long)puVar13 + 0x14) = uVar6;
      *(undefined4 *)(puVar13 + 3) = uVar7;
      *(undefined4 *)((long)puVar13 + 0x1c) = uVar8;
    }
  }
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >)
   [clone .isra.0] */

void std::
     __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (undefined8 *param_1,undefined8 *param_2)

{
  undefined1 uVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 *puVar14;
  undefined8 *puVar15;
  undefined8 *puVar16;
  
  if (param_1 == param_2) {
    return;
  }
  puVar14 = param_1 + 0xe;
  while (param_2 != puVar14) {
    lVar2 = puVar14[0xb];
    lVar3 = puVar14[10];
    if ((ulong)(param_1[0xb] - param_1[10]) < (ulong)(lVar2 - lVar3)) {
      uVar4 = *puVar14;
      uVar1 = *(undefined1 *)(puVar14 + 1);
      uVar6 = puVar14[2];
      uVar7 = puVar14[3];
      uVar8 = puVar14[4];
      uVar9 = puVar14[5];
      uVar10 = puVar14[6];
      uVar11 = puVar14[7];
      uVar12 = puVar14[8];
      uVar13 = puVar14[9];
      uVar5 = puVar14[0xc];
      if (0 < (long)puVar14 - (long)param_1) {
        puVar15 = puVar14;
        do {
          puVar16 = puVar15 + -0xe;
          *puVar15 = puVar15[-0xe];
          puVar15[2] = puVar15[-0xc];
          puVar15[3] = puVar15[-0xb];
          *(undefined1 *)(puVar15 + 1) = *(undefined1 *)(puVar15 + -0xd);
          puVar15[4] = puVar15[-10];
          puVar15[5] = puVar15[-9];
          puVar15[0xc] = puVar15[-2];
          puVar15[6] = puVar15[-8];
          puVar15[7] = puVar15[-7];
          puVar15[8] = puVar15[-6];
          puVar15[9] = puVar15[-5];
          puVar15[10] = puVar15[-4];
          puVar15[0xb] = puVar15[-3];
          puVar15 = puVar16;
        } while (puVar16 != puVar14 + ((long)puVar14 - (long)param_1 >> 4) * -2);
      }
      *param_1 = uVar4;
      *(undefined1 *)(param_1 + 1) = uVar1;
      param_1[10] = lVar3;
      param_1[0xb] = lVar2;
      param_1[0xc] = uVar5;
      param_1[2] = uVar6;
      param_1[3] = uVar7;
      param_1[4] = uVar8;
      param_1[5] = uVar9;
      param_1[6] = uVar10;
      param_1[7] = uVar11;
      param_1[8] = uVar12;
      param_1[9] = uVar13;
      puVar14 = puVar14 + 0xe;
    }
    else {
      __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                ();
      puVar14 = puVar14 + 0xe;
    }
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::sequential_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned long) [clone
   .isra.0] */

PrimInfoExtRange *
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
sequential_spatial_find(PrimInfoExtRange *param_1,ulong param_2)

{
  float fVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  long lVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  undefined1 auVar12 [16];
  undefined8 uVar13;
  undefined1 auVar14 [16];
  long lVar15;
  long lVar16;
  ulong uVar17;
  undefined1 (*in_RCX) [16];
  ulong uVar18;
  float *pfVar19;
  long *in_RDX;
  long lVar20;
  undefined1 (*pauVar21) [16];
  ulong uVar22;
  ulong in_R8;
  float *pfVar23;
  ulong uVar24;
  ulong uVar25;
  undefined1 (*pauVar26) [16];
  uint *puVar27;
  undefined1 (*pauVar28) [16];
  ulong uVar29;
  long in_FS_OFFSET;
  float fVar30;
  int iVar31;
  float fVar32;
  float fVar33;
  float fVar42;
  float fVar44;
  undefined1 auVar34 [16];
  int iVar43;
  int iVar45;
  float fVar46;
  int iVar47;
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  undefined1 auVar48 [16];
  undefined1 auVar49 [16];
  undefined1 auVar50 [16];
  undefined1 auVar51 [16];
  undefined1 auVar52 [16];
  undefined1 auVar53 [16];
  uint uVar54;
  uint uVar62;
  uint uVar63;
  uint uVar64;
  undefined1 auVar56 [16];
  undefined1 auVar57 [16];
  undefined1 auVar58 [16];
  uint uVar55;
  undefined1 auVar59 [16];
  undefined1 auVar60 [16];
  undefined1 auVar61 [16];
  uint uVar65;
  uint uVar71;
  uint uVar72;
  uint uVar73;
  undefined1 auVar66 [16];
  undefined1 auVar67 [16];
  undefined1 auVar68 [16];
  undefined1 auVar69 [16];
  undefined1 auVar70 [16];
  float fVar74;
  float fVar78;
  float fVar79;
  undefined1 auVar75 [16];
  undefined1 auVar76 [16];
  undefined1 auVar77 [16];
  undefined1 auVar80 [16];
  undefined1 auVar81 [16];
  undefined1 auVar82 [16];
  undefined1 auVar83 [16];
  undefined1 auVar84 [16];
  float fVar86;
  undefined1 auVar85 [16];
  float fVar87;
  undefined1 auVar88 [16];
  float fVar89;
  float fVar90;
  uint uVar91;
  float fVar92;
  uint uVar93;
  float fVar94;
  undefined1 auVar95 [16];
  undefined1 auVar96 [16];
  undefined8 local_ba0;
  undefined8 uStack_b98;
  undefined8 uStack_b88;
  undefined8 local_b60;
  undefined8 uStack_b58;
  undefined1 local_b50 [16];
  undefined1 local_b40 [16];
  undefined1 local_b30 [16];
  undefined1 local_b20 [16];
  undefined1 local_b10 [16];
  undefined1 local_b00 [16];
  undefined1 local_af0 [8];
  float fStack_ae8;
  float fStack_ae4;
  undefined1 local_ae0 [16];
  undefined1 local_ad0 [16];
  float local_ac0;
  uint uStack_abc;
  uint uStack_ab8;
  uint uStack_ab4;
  float local_ab0 [4];
  undefined1 local_aa0 [16];
  undefined1 local_a90 [16];
  undefined1 local_a80 [8];
  float afStack_a78 [58];
  float local_990 [4];
  undefined1 local_980 [16];
  undefined1 local_970 [16];
  undefined1 local_960 [16];
  undefined1 local_950 [16];
  undefined1 local_940 [16];
  undefined1 local_930 [16];
  undefined1 local_920 [16];
  undefined1 local_880 [16];
  undefined1 local_870 [16];
  undefined1 local_860 [16];
  undefined1 local_850 [16];
  undefined1 local_840 [16];
  undefined1 local_830 [16];
  undefined1 local_820 [16];
  undefined1 local_810 [16];
  undefined1 local_800 [16];
  undefined1 local_7f0 [16];
  undefined1 local_7e0 [16];
  undefined1 local_7d0 [16];
  undefined1 local_7c0 [16];
  undefined1 local_7b0 [16];
  undefined1 local_7a0 [16];
  undefined1 local_790 [16];
  undefined1 local_780 [16];
  undefined1 local_770 [16];
  undefined1 local_760 [16];
  undefined1 local_750 [16];
  undefined1 local_740 [16];
  undefined1 local_730 [16];
  undefined1 local_720 [16];
  undefined1 local_710 [16];
  undefined1 local_700 [16];
  undefined1 local_6f0 [16];
  undefined1 local_6e0 [16];
  undefined1 local_6d0 [16];
  undefined1 local_6c0 [16];
  undefined1 local_6b0 [16];
  undefined1 local_6a0 [16];
  undefined1 local_690 [16];
  undefined1 local_680 [16];
  undefined1 local_670 [16];
  undefined1 local_660 [16];
  undefined1 local_650 [16];
  undefined1 local_640 [16];
  undefined1 local_630 [16];
  undefined1 local_620 [16];
  undefined1 local_610 [16];
  undefined1 local_600 [16];
  undefined1 local_5f0 [16];
  undefined1 local_5e0 [16];
  undefined1 local_5d0 [16];
  undefined1 local_5c0 [16];
  undefined1 local_5b0 [16];
  undefined1 local_5a0 [16];
  undefined1 local_590 [16];
  undefined1 local_580 [16];
  undefined1 local_570 [16];
  undefined1 local_560 [16];
  undefined1 local_550 [16];
  undefined1 local_540 [16];
  undefined1 local_530 [16];
  undefined1 local_520 [16];
  undefined1 local_510 [16];
  undefined1 local_500 [16];
  undefined1 local_4f0 [16];
  undefined1 local_4e0 [16];
  undefined1 local_4d0 [16];
  undefined1 local_4c0 [16];
  undefined1 local_4b0 [16];
  undefined1 local_4a0 [16];
  undefined1 local_490 [16];
  undefined1 local_480 [16];
  undefined1 local_470 [16];
  undefined1 local_460 [16];
  undefined1 local_450 [16];
  undefined1 local_440 [16];
  undefined1 local_430 [16];
  undefined1 local_420 [16];
  undefined1 local_410 [16];
  undefined1 local_400 [16];
  undefined1 local_3f0 [16];
  undefined1 local_3e0 [16];
  undefined1 local_3d0 [16];
  undefined1 local_3c0 [16];
  undefined1 local_3b0 [16];
  undefined1 local_3a0 [16];
  undefined1 local_390 [16];
  undefined1 local_380 [16];
  undefined1 local_370 [16];
  undefined1 local_360 [16];
  undefined1 local_350 [16];
  undefined1 local_340 [16];
  undefined1 local_330 [16];
  undefined1 local_320 [16];
  undefined1 local_310 [16];
  undefined1 local_300 [16];
  undefined1 local_2f0 [16];
  undefined1 local_2e0 [16];
  undefined1 local_2d0 [16];
  undefined1 local_2c0 [16];
  undefined1 local_2b0 [16];
  undefined1 local_2a0 [16];
  undefined1 local_290 [16];
  undefined1 local_280 [16];
  undefined1 local_270 [16];
  undefined1 local_260 [16];
  undefined1 local_250 [16];
  undefined1 local_240 [16];
  undefined1 local_230 [16];
  undefined1 local_220 [16];
  undefined1 local_210 [16];
  undefined1 local_200 [16];
  undefined1 local_1f0 [16];
  undefined1 local_1e0 [16];
  undefined1 local_1d0 [16];
  undefined1 local_1c0 [16];
  undefined1 local_1b0 [16];
  undefined1 local_1a0 [16];
  undefined1 local_190 [16];
  undefined1 local_180 [16];
  undefined1 local_170 [16];
  undefined1 local_160 [16];
  undefined1 local_150 [16];
  undefined1 local_140 [16];
  undefined1 local_130 [16];
  undefined1 local_120 [16];
  undefined1 local_110 [16];
  undefined1 local_100 [16];
  undefined1 local_f0 [16];
  undefined1 local_e0 [16];
  undefined1 local_d0 [16];
  undefined1 local_c0 [16];
  undefined1 local_b0 [16];
  undefined1 local_a0 [16];
  undefined1 local_90 [16];
  long local_48;
  
  local_b50._0_8_ = CONCAT44(_LC3,_LC3);
  local_b50._8_4_ = _LC3;
  local_b50._12_4_ = _LC3;
  auVar96._0_8_ = CONCAT44(_LC1,_LC1);
  auVar96._8_4_ = _LC1;
  auVar96._12_4_ = _LC1;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_180 = (undefined1  [16])0x0;
  local_280 = (undefined1  [16])0x0;
  local_840 = local_b50;
  local_830 = auVar96;
  local_860 = local_b50;
  local_850 = auVar96;
  local_880 = local_b50;
  local_870 = auVar96;
  local_7e0 = local_b50;
  local_7d0 = auVar96;
  local_800 = local_b50;
  local_7f0 = auVar96;
  local_820 = local_b50;
  local_170 = (undefined1  [16])0x0;
  local_270 = (undefined1  [16])0x0;
  local_160 = (undefined1  [16])0x0;
  local_260 = (undefined1  [16])0x0;
  local_150 = (undefined1  [16])0x0;
  local_250 = (undefined1  [16])0x0;
  local_140 = (undefined1  [16])0x0;
  local_240 = (undefined1  [16])0x0;
  local_810 = auVar96;
  local_780 = local_b50;
  local_770 = auVar96;
  local_7a0 = local_b50;
  local_790 = auVar96;
  local_7c0 = local_b50;
  local_7b0 = auVar96;
  local_720 = local_b50;
  local_710 = auVar96;
  local_740 = local_b50;
  local_730 = auVar96;
  local_760 = local_b50;
  local_750 = auVar96;
  local_6c0 = local_b50;
  local_6b0 = auVar96;
  local_6e0 = local_b50;
  local_6d0 = auVar96;
  local_700 = local_b50;
  local_6f0 = auVar96;
  local_660 = local_b50;
  local_650 = auVar96;
  local_680 = local_b50;
  local_670 = auVar96;
  local_6a0 = local_b50;
  local_690 = auVar96;
  local_130 = (undefined1  [16])0x0;
  local_230 = (undefined1  [16])0x0;
  local_120 = (undefined1  [16])0x0;
  local_220 = (undefined1  [16])0x0;
  local_110 = (undefined1  [16])0x0;
  local_210 = (undefined1  [16])0x0;
  local_100 = (undefined1  [16])0x0;
  local_200 = (undefined1  [16])0x0;
  local_600 = local_b50;
  local_5f0 = auVar96;
  local_620 = local_b50;
  local_610 = auVar96;
  local_640 = local_b50;
  local_630 = auVar96;
  local_5a0 = local_b50;
  local_590 = auVar96;
  local_5c0 = local_b50;
  local_5b0 = auVar96;
  local_5e0 = local_b50;
  local_5d0 = auVar96;
  local_540 = local_b50;
  local_530 = auVar96;
  local_560 = local_b50;
  local_550 = auVar96;
  local_580 = local_b50;
  local_570 = auVar96;
  local_4e0 = local_b50;
  local_4d0 = auVar96;
  local_500 = local_b50;
  local_4f0 = auVar96;
  local_520 = local_b50;
  local_510 = auVar96;
  local_f0 = (undefined1  [16])0x0;
  local_1f0 = (undefined1  [16])0x0;
  local_e0 = (undefined1  [16])0x0;
  local_1e0 = (undefined1  [16])0x0;
  local_d0 = (undefined1  [16])0x0;
  local_1d0 = (undefined1  [16])0x0;
  local_c0 = (undefined1  [16])0x0;
  local_1c0 = (undefined1  [16])0x0;
  local_b0 = (undefined1  [16])0x0;
  local_480 = local_b50;
  local_470 = auVar96;
  local_4a0 = local_b50;
  local_490 = auVar96;
  local_4c0 = local_b50;
  local_4b0 = auVar96;
  local_420 = local_b50;
  local_410 = auVar96;
  local_440 = local_b50;
  local_430 = auVar96;
  local_460 = local_b50;
  local_450 = auVar96;
  local_3c0 = local_b50;
  local_3b0 = auVar96;
  local_3e0 = local_b50;
  local_3d0 = auVar96;
  local_400 = local_b50;
  local_3f0 = auVar96;
  local_360 = local_b50;
  local_350 = auVar96;
  local_380 = local_b50;
  local_370 = auVar96;
  local_3a0 = local_b50;
  local_390 = auVar96;
  local_1b0 = (undefined1  [16])0x0;
  local_ab0[0] = *(float *)*in_RCX;
  local_ab0[1] = *(float *)(*in_RCX + 4);
  uVar13 = *(undefined8 *)*in_RCX;
  local_ab0[2] = *(float *)(*in_RCX + 8);
  local_ab0[3] = *(float *)(*in_RCX + 0xc);
  auVar14 = *in_RCX;
  local_a0 = (undefined1  [16])0x0;
  uVar24 = *(ulong *)(in_RCX[4] + 8);
  local_1a0 = (undefined1  [16])0x0;
  local_90 = (undefined1  [16])0x0;
  local_190 = (undefined1  [16])0x0;
  auVar49._4_4_ = _LC12;
  auVar49._0_4_ = _LC12;
  auVar49._8_4_ = _LC12;
  auVar49._12_4_ = _LC12;
  local_300 = local_b50;
  auVar57._0_4_ = *(uint *)in_RCX[1] & _LC6;
  auVar57._4_4_ = *(uint *)(in_RCX[1] + 4) & _LC6;
  auVar57._8_4_ = *(uint *)(in_RCX[1] + 8) & _LC6;
  auVar57._12_4_ = *(uint *)(in_RCX[1] + 0xc) & _LC6;
  auVar34._0_4_ = _LC6 & (uint)local_ab0[0];
  auVar34._4_4_ = _LC6 & (uint)local_ab0[1];
  auVar34._8_4_ = _LC6 & (uint)local_ab0[2];
  auVar34._12_4_ = _LC6 & (uint)local_ab0[3];
  local_2f0 = auVar96;
  auVar34 = maxps(auVar34,auVar57);
  local_320 = local_b50;
  local_310 = auVar96;
  local_340 = local_b50;
  fVar30 = auVar34._0_4_ * _LC8;
  fVar42 = auVar34._4_4_ * _LC8;
  auVar52._4_4_ = fVar42;
  auVar52._0_4_ = fVar30;
  fVar44 = auVar34._8_4_ * _LC8;
  fVar46 = auVar34._12_4_ * _LC8;
  local_330 = auVar96;
  local_2a0 = local_b50;
  auVar58._0_4_ = *(float *)in_RCX[1] - local_ab0[0];
  auVar58._4_4_ = *(float *)(in_RCX[1] + 4) - local_ab0[1];
  auVar58._8_4_ = *(float *)(in_RCX[1] + 8) - local_ab0[2];
  auVar58._12_4_ = *(float *)(in_RCX[1] + 0xc) - local_ab0[3];
  local_290 = auVar96;
  local_2c0 = local_b50;
  local_2b0 = auVar96;
  auVar52._8_4_ = fVar44;
  auVar52._12_4_ = fVar46;
  local_2e0 = local_b50;
  auVar34 = maxps(auVar52,auVar58);
  local_2d0 = auVar96;
  auVar61._4_4_ = _LC10;
  auVar61._0_4_ = _LC10;
  auVar61._8_4_ = _LC10;
  auVar61._12_4_ = _LC10;
  auVar34 = divps(auVar61,auVar34);
  local_aa0._0_4_ = (float)(~-(uint)(auVar58._0_4_ <= fVar30) & auVar34._0_4_);
  local_aa0._4_4_ = (float)(~-(uint)(auVar58._4_4_ <= fVar42) & auVar34._4_4_);
  local_aa0._8_4_ = (float)(~-(uint)(auVar58._8_4_ <= fVar44) & auVar34._8_4_);
  local_aa0._12_4_ = (float)(~-(uint)(auVar58._12_4_ <= fVar46) & auVar34._12_4_);
  local_a90 = divps(auVar49,local_aa0);
  if (*(ulong *)in_RCX[4] < uVar24) {
    pauVar26 = (undefined1 (*) [16])(*(ulong *)in_RCX[4] * 0x20 + param_2);
    do {
      uVar55 = *(uint *)(*pauVar26 + 0xc);
      auVar34 = pauVar26[1];
      auVar61 = *pauVar26;
      if (uVar55 < 0x10000000) {
        uVar55 = (uint)(((auVar34._0_4_ + auVar61._0_4_) * _LC14 - local_ab0[0]) * local_aa0._0_4_ +
                       _LC16);
        uVar54 = (uint)(((auVar34._4_4_ + auVar61._4_4_) * _LC14 - local_ab0[1]) * local_aa0._4_4_ +
                       _UNK_0013f674);
        uVar62 = (uint)(((auVar34._8_4_ + auVar61._8_4_) * _LC14 - local_ab0[2]) * local_aa0._8_4_ +
                       _UNK_0013f678);
        uVar63 = -(uint)((int)uVar55 < (int)__LC18);
        uVar64 = -(uint)((int)uVar54 < (int)_UNK_0013f684);
        uVar65 = -(uint)((int)uVar62 < (int)_UNK_0013f688);
        uVar55 = uVar63 & uVar55 | ~uVar63 & __LC18;
        uVar54 = uVar64 & uVar54 | ~uVar64 & _UNK_0013f684;
        uVar62 = uVar65 & uVar62 | ~uVar65 & _UNK_0013f688;
        lVar20 = (long)(int)(~-(uint)((int)uVar55 < 0) & uVar55);
        *(int *)(local_880 + (lVar20 + 0x60) * 0x10) =
             *(int *)(local_880 + (lVar20 + 0x60) * 0x10) + 1;
        lVar16 = lVar20 * 0x60;
        *(int *)(local_880 + (lVar20 + 0x70) * 0x10) =
             *(int *)(local_880 + (lVar20 + 0x70) * 0x10) + 1;
        auVar57 = minps(*(undefined1 (*) [16])(local_880 + lVar16),auVar61);
        *(undefined1 (*) [16])(local_880 + lVar16) = auVar57;
        auVar57 = maxps(*(undefined1 (*) [16])(local_870 + lVar16),auVar34);
        *(undefined1 (*) [16])(local_870 + lVar16) = auVar57;
        lVar20 = (long)(int)(~-(uint)((int)uVar54 < 0) & uVar54);
        lVar16 = lVar20 * 0x60;
        lVar20 = lVar20 * 0x10;
        *(int *)(local_280 + lVar20 + 4) = *(int *)(local_280 + lVar20 + 4) + 1;
        *(int *)(local_180 + lVar20 + 4) = *(int *)(local_180 + lVar20 + 4) + 1;
        auVar57 = minps(*(undefined1 (*) [16])(local_860 + lVar16),auVar61);
        *(undefined1 (*) [16])(local_860 + lVar16) = auVar57;
        auVar57 = maxps(*(undefined1 (*) [16])(local_850 + lVar16),auVar34);
        *(undefined1 (*) [16])(local_850 + lVar16) = auVar57;
        lVar20 = (long)(int)(~-(uint)((int)uVar62 < 0) & uVar62);
        lVar16 = lVar20 * 0x60;
        lVar20 = lVar20 * 0x10;
        *(int *)(local_280 + lVar20 + 8) = *(int *)(local_280 + lVar20 + 8) + 1;
        *(int *)(local_180 + lVar20 + 8) = *(int *)(local_180 + lVar20 + 8) + 1;
        auVar61 = minps(*(undefined1 (*) [16])(local_840 + lVar16),auVar61);
        auVar34 = maxps(*(undefined1 (*) [16])(local_830 + lVar16),auVar34);
        *(undefined1 (*) [16])(local_840 + lVar16) = auVar61;
        *(undefined1 (*) [16])(local_830 + lVar16) = auVar34;
      }
      else {
        pfVar19 = local_ab0;
        lVar20 = 0;
        uVar54 = (uint)((auVar61._0_4_ - local_ab0[0]) * local_aa0._0_4_ + _LC16);
        uVar62 = (uint)((auVar61._4_4_ - local_ab0[1]) * local_aa0._4_4_ + _UNK_0013f674);
        uVar63 = (uint)((auVar61._8_4_ - local_ab0[2]) * local_aa0._8_4_ + _UNK_0013f678);
        uVar64 = (uint)((auVar61._12_4_ - local_ab0[3]) * local_aa0._12_4_ + _UNK_0013f67c);
        uVar65 = -(uint)((int)uVar54 < (int)__LC18);
        uVar71 = -(uint)((int)uVar62 < (int)_UNK_0013f684);
        uVar72 = -(uint)((int)uVar63 < (int)_UNK_0013f688);
        uVar73 = -(uint)((int)uVar64 < (int)_UNK_0013f68c);
        uVar54 = uVar54 & uVar65 | ~uVar65 & __LC18;
        uVar62 = uVar62 & uVar71 | ~uVar71 & _UNK_0013f684;
        uVar63 = uVar63 & uVar72 | ~uVar72 & _UNK_0013f688;
        uStack_ab4 = uVar64 & uVar73 | ~uVar73 & _UNK_0013f68c;
        uStack_ab4 = ~-(uint)((int)uStack_ab4 < 0) & uStack_ab4;
        local_ac0 = (float)(~-(uint)((int)uVar54 < 0) & uVar54);
        uStack_abc = ~-(uint)((int)uVar62 < 0) & uVar62;
        uStack_ab8 = ~-(uint)((int)uVar63 < 0) & uVar63;
        auVar56._0_4_ = (int)((auVar34._0_4_ - local_ab0[0]) * local_aa0._0_4_ + _LC16);
        auVar56._4_4_ = (int)((auVar34._4_4_ - local_ab0[1]) * local_aa0._4_4_ + _UNK_0013f674);
        auVar56._8_4_ = (int)((auVar34._8_4_ - local_ab0[2]) * local_aa0._8_4_ + _UNK_0013f678);
        auVar56._12_4_ = (int)((auVar34._12_4_ - local_ab0[3]) * local_aa0._12_4_ + _UNK_0013f67c);
        auVar66._0_4_ = -(uint)(auVar56._0_4_ < (int)__LC18);
        auVar66._4_4_ = -(uint)(auVar56._4_4_ < (int)_UNK_0013f684);
        auVar66._8_4_ = -(uint)(auVar56._8_4_ < (int)_UNK_0013f688);
        auVar66._12_4_ = -(uint)(auVar56._12_4_ < (int)_UNK_0013f68c);
        auVar12._4_4_ = _UNK_0013f684;
        auVar12._0_4_ = __LC18;
        auVar12._8_4_ = _UNK_0013f688;
        auVar12._12_4_ = _UNK_0013f68c;
        auVar57 = auVar56 & auVar66 | ~auVar66 & auVar12;
        auVar67._0_4_ = -(uint)(auVar57._0_4_ < 0);
        auVar67._4_4_ = -(uint)(auVar57._4_4_ < 0);
        auVar67._8_4_ = -(uint)(auVar57._8_4_ < 0);
        auVar67._12_4_ = -(uint)(auVar57._12_4_ < 0);
        _local_a80 = ~auVar67 & auVar57;
        pfVar23 = (float *)local_980;
        do {
          if (pfVar19[4] != 0.0) {
            uVar18 = (ulong)(int)(&local_ac0)[lVar20];
            uVar25 = (ulong)(int)afStack_a78[lVar20 + -2];
            if (uVar18 == uVar25) {
              lVar16 = lVar20 + uVar18 * 4;
              *(int *)(local_280 + lVar16 * 4) = *(int *)(local_280 + lVar16 * 4) + 1;
              *(int *)(local_180 + lVar16 * 4) = *(int *)(local_180 + lVar16 * 4) + 1;
              lVar16 = (uVar18 * 3 + lVar20) * 0x20;
              auVar57 = minps(*(undefined1 (*) [16])(local_880 + lVar16),auVar61);
              *(undefined1 (*) [16])(local_880 + lVar16) = auVar57;
              auVar57 = maxps(*(undefined1 (*) [16])(local_870 + lVar16),auVar34);
              *(undefined1 (*) [16])(local_870 + lVar16) = auVar57;
            }
            else {
              local_ae0 = auVar61;
              local_ad0 = auVar34;
              uVar29 = uVar18;
              do {
                uVar17 = uVar29;
                uVar22 = uVar25;
                if (uVar25 <= uVar17) goto LAB_00101546;
                uVar29 = uVar17 + 1;
              } while ((float)(uVar17 + 1) * pfVar19[8] + *pfVar19 <=
                       *(float *)(local_ae0 + lVar20 * 4));
              do {
                if ((float)uVar22 * pfVar19[8] + *pfVar19 < (&local_ac0)[lVar20 + -4]) break;
                uVar22 = uVar22 - 1;
              } while (uVar17 < uVar22);
LAB_00101546:
              auVar36._4_4_ = _LC12;
              auVar36._0_4_ = _LC12;
              auVar36._8_4_ = _LC12;
              auVar36._12_4_ = _LC12;
              auVar37._4_4_ = _LC12;
              auVar37._0_4_ = _LC12;
              lVar16 = *(long *)(*(long *)(*in_RDX + 0x1e0) + (ulong)(uVar55 & 0x7ffffff) * 8);
              puVar27 = (uint *)((ulong)*(uint *)(pauVar26[1] + 0xc) * *(long *)(lVar16 + 0x60) +
                                *(long *)(lVar16 + 0x58));
              lVar7 = *(long *)(lVar16 + 0x88);
              uVar29 = *(ulong *)(lVar16 + 0x90);
              local_980 = *(undefined1 (*) [16])(lVar7 + *puVar27 * uVar29);
              fVar89 = local_980._0_4_;
              fVar90 = local_980._4_4_;
              fVar92 = local_980._8_4_;
              fVar94 = local_980._12_4_;
              local_950 = local_980;
              local_970 = *(undefined1 (*) [16])(lVar7 + puVar27[1] * uVar29);
              fVar78 = local_970._0_4_;
              fVar79 = local_970._4_4_;
              fVar86 = local_970._8_4_;
              fVar87 = local_970._12_4_;
              local_960 = *(undefined1 (*) [16])(lVar7 + puVar27[2] * uVar29);
              fVar30 = local_960._0_4_;
              fVar42 = local_960._4_4_;
              fVar44 = local_960._8_4_;
              fVar46 = local_960._12_4_;
              auVar80._0_4_ = fVar78 - fVar89;
              auVar80._4_4_ = fVar79 - fVar90;
              auVar80._8_4_ = fVar86 - fVar92;
              auVar80._12_4_ = fVar87 - fVar94;
              local_940 = divps(auVar36,auVar80);
              auVar81._0_4_ = fVar30 - fVar78;
              auVar81._4_4_ = fVar42 - fVar79;
              auVar81._8_4_ = fVar44 - fVar86;
              auVar81._12_4_ = fVar46 - fVar87;
              auVar37._8_4_ = _LC12;
              auVar37._12_4_ = _LC12;
              local_930 = divps(auVar37,auVar81);
              auVar82._0_4_ = fVar89 - fVar30;
              auVar82._4_4_ = fVar90 - fVar42;
              auVar82._8_4_ = fVar92 - fVar44;
              auVar82._12_4_ = fVar94 - fVar46;
              auVar38._4_4_ = _LC12;
              auVar38._0_4_ = _LC12;
              auVar38._8_4_ = _LC12;
              auVar38._12_4_ = _LC12;
              local_920 = divps(auVar38,auVar82);
              auVar57 = auVar34;
              auVar58 = auVar61;
              if (uVar17 < uVar22) {
                fVar1 = *pfVar19;
                fVar2 = *pfVar23;
                fVar3 = pfVar23[0xc];
                fVar4 = pfVar23[4];
                fVar5 = pfVar19[8];
                fVar6 = pfVar23[8];
                pauVar28 = (undefined1 (*) [16])(local_880 + (uVar17 * 3 + lVar20) * 0x20);
                do {
                  uVar54 = (uint)uVar29;
                  uVar17 = uVar17 + 1;
                  if ((long)uVar17 < 0) {
                    uVar54 = (uint)(uVar17 >> 1) | (uint)uVar17 & 1;
                  }
                  fVar33 = (float)uVar17 * fVar5 + fVar1;
                  fVar32 = fVar3;
                  if (fVar2 <= fVar33) {
                    auVar51._8_4_ = _LC3;
                    auVar51._0_8_ = local_b50._0_8_;
                    auVar51._12_4_ = _LC3;
                    auVar48._8_4_ = _LC1;
                    auVar48._0_8_ = auVar96._0_8_;
                    auVar48._12_4_ = _LC1;
                    auVar53 = minps(auVar51,local_980);
                    auVar50 = maxps(auVar48,local_980);
                    if (fVar33 != fVar2) {
                      if (fVar4 <= fVar33) goto LAB_00101998;
                      auVar70._8_4_ = _LC1;
                      auVar70._0_8_ = auVar96._0_8_;
                      auVar70._12_4_ = _LC1;
                      auVar60._8_4_ = _LC3;
                      auVar60._0_8_ = local_b50._0_8_;
                      auVar60._12_4_ = _LC3;
                      goto LAB_001018e1;
                    }
                    auVar60 = auVar53;
                    auVar70 = auVar50;
                    if (fVar33 <= fVar4) goto LAB_0010183a;
LAB_001016ff:
                    auVar53 = minps(auVar53,local_970);
                    auVar50 = maxps(auVar50,local_970);
LAB_00101707:
                    if (fVar33 < fVar6) {
LAB_0010170c:
                      fVar74 = (fVar33 - fVar4) * pfVar23[0x14];
                      auVar76._0_4_ = fVar74 * auVar81._0_4_ + fVar78;
                      auVar76._4_4_ = fVar74 * auVar81._4_4_ + fVar79;
                      auVar76._8_4_ = fVar74 * auVar81._8_4_ + fVar86;
                      auVar76._12_4_ = fVar74 * auVar81._12_4_ + fVar87;
                      auVar53 = minps(auVar53,auVar76);
                      auVar50 = maxps(auVar50,auVar76);
                      auVar60 = minps(auVar60,auVar76);
                      auVar70 = maxps(auVar70,auVar76);
                    }
                    if (fVar33 < fVar6) {
LAB_00101870:
                      if (fVar33 <= fVar6) goto LAB_001018bf;
                      if (fVar6 < fVar33) goto joined_r0x0010188f;
                    }
                    else {
                      auVar53 = minps(auVar53,local_960);
                      auVar50 = maxps(auVar50,local_960);
                      if (fVar33 != fVar6) goto joined_r0x0010188f;
LAB_001018bf:
                      auVar60 = minps(auVar60,local_960);
                      auVar70 = maxps(auVar70,local_960);
                    }
                    fVar32 = fVar6;
                    if (fVar3 < fVar33) goto joined_r0x0010188f;
                  }
                  else {
                    if (fVar33 <= fVar2) {
                      auVar59._8_4_ = _LC3;
                      auVar59._0_8_ = local_b50._0_8_;
                      auVar59._12_4_ = _LC3;
                      auVar69._8_4_ = _LC1;
                      auVar69._0_8_ = auVar96._0_8_;
                      auVar69._12_4_ = _LC1;
                      auVar60 = minps(auVar59,local_980);
                      auVar70 = maxps(auVar69,local_980);
                      auVar50._8_4_ = _LC1;
                      auVar50._0_8_ = auVar96._0_8_;
                      auVar50._12_4_ = _LC1;
                      auVar53._8_4_ = _LC3;
                      auVar53._0_8_ = local_b50._0_8_;
                      auVar53._12_4_ = _LC3;
                      if (fVar4 < fVar33) goto LAB_001018e1;
LAB_0010183a:
                      if (fVar33 < fVar4) goto LAB_0010183f;
                      auVar53 = minps(auVar53,local_970);
                      auVar50 = maxps(auVar50,local_970);
LAB_001018a8:
                      auVar60 = minps(auVar60,local_970);
                      auVar70 = maxps(auVar70,local_970);
LAB_001018b0:
                      if (fVar6 < fVar33) goto LAB_00101858;
LAB_001018b5:
                      if (fVar6 <= fVar33) {
                        auVar53 = minps(auVar53,local_960);
                        auVar50 = maxps(auVar50,local_960);
                        goto LAB_001018bf;
                      }
                      goto LAB_00101870;
                    }
                    if (fVar33 <= fVar2) {
                      auVar50._8_4_ = _LC1;
                      auVar50._0_8_ = auVar96._0_8_;
                      auVar50._12_4_ = _LC1;
                      auVar53._8_4_ = _LC3;
                      auVar53._0_8_ = local_b50._0_8_;
                      auVar53._12_4_ = _LC3;
LAB_00101998:
                      auVar70._8_4_ = _LC1;
                      auVar70._0_8_ = auVar96._0_8_;
                      auVar70._12_4_ = _LC1;
                      auVar60._8_4_ = _LC3;
                      auVar60._0_8_ = local_b50._0_8_;
                      auVar60._12_4_ = _LC3;
                      if (fVar33 <= fVar4) goto LAB_0010183a;
                      if (fVar2 <= fVar33) goto LAB_001016ff;
LAB_001018e1:
                      fVar74 = (fVar33 - fVar2) * pfVar23[0x10];
                      auVar77._0_4_ = fVar74 * auVar80._0_4_ + fVar89;
                      auVar77._4_4_ = fVar74 * auVar80._4_4_ + fVar90;
                      auVar77._8_4_ = fVar74 * auVar80._8_4_ + fVar92;
                      auVar77._12_4_ = fVar74 * auVar80._12_4_ + fVar94;
                      auVar53 = minps(auVar53,auVar77);
                      auVar50 = maxps(auVar50,auVar77);
                      auVar60 = minps(auVar60,auVar77);
                      auVar70 = maxps(auVar70,auVar77);
                    }
                    else {
                      auVar70._8_4_ = _LC1;
                      auVar70._0_8_ = auVar96._0_8_;
                      auVar70._12_4_ = _LC1;
                      auVar60._8_4_ = _LC3;
                      auVar60._0_8_ = local_b50._0_8_;
                      auVar60._12_4_ = _LC3;
                      auVar50._8_4_ = _LC1;
                      auVar50._0_8_ = auVar96._0_8_;
                      auVar50._12_4_ = _LC1;
                      auVar53._8_4_ = _LC3;
                      auVar53._0_8_ = local_b50._0_8_;
                      auVar53._12_4_ = _LC3;
                      if (fVar33 < fVar4) goto LAB_001018e1;
                    }
                    if (fVar4 <= fVar33) {
                      auVar53 = minps(auVar53,local_970);
                      auVar50 = maxps(auVar50,local_970);
                      if (fVar33 != fVar4) goto LAB_00101707;
                      auVar60 = minps(auVar60,local_970);
                      auVar70 = maxps(auVar70,local_970);
                      goto LAB_001018b0;
                    }
LAB_0010183f:
                    if (fVar33 <= fVar4) goto LAB_001018a8;
                    if (fVar4 < fVar33) goto LAB_00101707;
                    if (fVar33 <= fVar6) goto LAB_001018b5;
LAB_00101858:
                    if (fVar33 < fVar4) goto LAB_0010170c;
                    auVar53 = minps(auVar53,local_960);
                    auVar50 = maxps(auVar50,local_960);
joined_r0x0010188f:
                    if (fVar33 < fVar32) {
                      fVar32 = (fVar33 - fVar6) * pfVar23[0x18];
                      auVar39._0_4_ = fVar32 * auVar82._0_4_ + fVar30;
                      auVar39._4_4_ = fVar32 * auVar82._4_4_ + fVar42;
                      auVar39._8_4_ = fVar32 * auVar82._8_4_ + fVar44;
                      auVar39._12_4_ = fVar32 * auVar82._12_4_ + fVar46;
                      auVar53 = minps(auVar53,auVar39);
                      auVar50 = maxps(auVar50,auVar39);
                      auVar60 = minps(auVar60,auVar39);
                      auVar70 = maxps(auVar70,auVar39);
                    }
                  }
                  auVar52 = maxps(auVar53,auVar58);
                  auVar49 = minps(auVar50,auVar57);
                  auVar57 = minps(auVar70,auVar57);
                  auVar58 = maxps(auVar60,auVar58);
                  auVar40._4_4_ = -(uint)(auVar52._4_4_ <= auVar49._4_4_);
                  auVar40._0_4_ = -(uint)(auVar52._0_4_ <= auVar49._0_4_);
                  auVar40._8_4_ = -(uint)(auVar52._8_4_ <= auVar49._8_4_);
                  auVar40._12_4_ = -(uint)(auVar52._12_4_ <= auVar49._12_4_);
                  uVar54 = movmskps(uVar54,auVar40);
                  auVar52 = minps(*pauVar28,auVar52);
                  uVar29 = (ulong)((~uVar54 & 7) != 0);
                  *pauVar28 = auVar52;
                  uVar18 = uVar18 + uVar29;
                  auVar52 = maxps(pauVar28[1],auVar49);
                  pauVar28[1] = auVar52;
                  pauVar28 = pauVar28 + 6;
                } while (uVar22 != uVar17);
              }
              auVar41._4_4_ = -(uint)(auVar58._4_4_ <= auVar57._4_4_);
              auVar41._0_4_ = -(uint)(auVar58._0_4_ <= auVar57._0_4_);
              auVar41._8_4_ = -(uint)(auVar58._8_4_ <= auVar57._8_4_);
              auVar41._12_4_ = -(uint)(auVar58._12_4_ <= auVar57._12_4_);
              uVar54 = movmskps((int)uVar22,auVar41);
              *(int *)(local_880 + (lVar20 + 0x180 + uVar18 * 4) * 4) =
                   *(int *)(local_880 + (lVar20 + 0x180 + uVar18 * 4) * 4) + 1;
              lVar16 = (uVar17 * 3 + lVar20) * 0x20;
              *(int *)(local_880 + (lVar20 + 0x1c0 + (uVar25 - ((~uVar54 & 7) != 0)) * 4) * 4) =
                   *(int *)(local_880 + (lVar20 + 0x1c0 + (uVar25 - ((~uVar54 & 7) != 0)) * 4) * 4)
                   + 1;
              auVar58 = minps(*(undefined1 (*) [16])(local_880 + lVar16),auVar58);
              *(undefined1 (*) [16])(local_880 + lVar16) = auVar58;
              auVar57 = maxps(*(undefined1 (*) [16])(local_870 + lVar16),auVar57);
              *(undefined1 (*) [16])(local_870 + lVar16) = auVar57;
            }
          }
          lVar20 = lVar20 + 1;
          pfVar19 = pfVar19 + 1;
          pfVar23 = pfVar23 + 1;
        } while (lVar20 != 3);
      }
      pauVar26 = pauVar26 + 2;
    } while ((undefined1 (*) [16])(param_2 + uVar24 * 0x20) != pauVar26);
  }
  lVar20 = 0xf0;
  auVar88._8_4_ = _LC1;
  auVar88._0_8_ = auVar96._0_8_;
  auVar88._12_4_ = _LC1;
  auVar85._8_4_ = _LC3;
  auVar85._0_8_ = local_b50._0_8_;
  auVar85._12_4_ = _LC3;
  auVar84._8_4_ = _LC1;
  auVar84._0_8_ = auVar96._0_8_;
  auVar84._12_4_ = _LC1;
  auVar83._8_4_ = _LC3;
  auVar83._0_8_ = local_b50._0_8_;
  auVar83._12_4_ = _LC3;
  auVar75._8_4_ = _LC1;
  auVar75._0_8_ = auVar96._0_8_;
  auVar75._12_4_ = _LC1;
  auVar68._8_4_ = _LC3;
  auVar68._0_8_ = local_b50._0_8_;
  auVar68._12_4_ = _LC3;
  iVar31 = 0;
  iVar43 = 0;
  iVar45 = 0;
  iVar47 = 0;
  pfVar19 = local_990;
  pauVar26 = &local_2e0;
  do {
    pauVar28 = pauVar26;
    auVar75 = maxps(auVar75,pauVar28[1]);
    auVar68 = minps(auVar68,*pauVar28);
    iVar8 = *(int *)(local_180 + lVar20);
    iVar9 = *(int *)(local_180 + lVar20 + 4);
    iVar10 = *(int *)(local_180 + lVar20 + 8);
    iVar11 = *(int *)(local_180 + lVar20 + 0xc);
    auVar84 = maxps(auVar84,pauVar28[3]);
    pfVar19[3] = 0.0;
    auVar83 = minps(auVar83,pauVar28[2]);
    auVar88 = maxps(auVar88,pauVar28[5]);
    iVar31 = iVar8 + iVar31;
    iVar43 = iVar9 + iVar43;
    iVar45 = iVar10 + iVar45;
    iVar47 = iVar11 + iVar47;
    auVar85 = minps(auVar85,pauVar28[4]);
    *(int *)(local_980 + lVar20) = iVar31;
    *(int *)(local_980 + lVar20 + 4) = iVar43;
    *(int *)(local_980 + lVar20 + 8) = iVar45;
    *(int *)(local_980 + lVar20 + 0xc) = iVar47;
    lVar20 = lVar20 + -0x10;
    fVar30 = auVar75._4_4_ - auVar68._4_4_;
    fVar44 = auVar75._8_4_ - auVar68._8_4_;
    fVar42 = auVar84._4_4_ - auVar83._4_4_;
    fVar46 = auVar84._8_4_ - auVar83._8_4_;
    *pfVar19 = (fVar30 + fVar44) * (auVar75._0_4_ - auVar68._0_4_) + fVar30 * fVar44;
    fVar30 = auVar88._4_4_ - auVar85._4_4_;
    fVar44 = auVar88._8_4_ - auVar85._8_4_;
    pfVar19[1] = (fVar42 + fVar46) * (auVar84._0_4_ - auVar83._0_4_) + fVar42 * fVar46;
    pfVar19[2] = (fVar30 + fVar44) * (auVar88._0_4_ - auVar85._0_4_) + fVar30 * fVar44;
    pfVar19 = pfVar19 + -4;
    pauVar26 = pauVar28 + -6;
  } while (pauVar28 + -6 != &local_880);
  local_b20._8_4_ = _LC3;
  local_b20._0_8_ = local_b50._0_8_;
  local_b20._12_4_ = _LC3;
  iVar31 = (1 << ((byte)in_R8 & 0x1f)) + -1;
  uVar24 = in_R8 & 0xffffffff;
  auVar35._8_4_ = _LC1;
  auVar35._0_8_ = auVar96._0_8_;
  auVar35._12_4_ = _LC1;
  lVar20 = 0x10;
  uVar55 = 0;
  uVar54 = 0;
  uVar62 = 0;
  local_b10 = (undefined1  [16])0x0;
  local_b00 = (undefined1  [16])0x0;
  local_b60._4_4_ = _UNK_0013f644;
  local_b60._0_4_ = __LC22;
  uStack_b58._4_4_ = _UNK_0013f64c;
  uStack_b58._0_4_ = _UNK_0013f648;
  auVar95._8_4_ = _LC1;
  auVar95._0_8_ = auVar96._0_8_;
  auVar95._12_4_ = _LC1;
  local_b40 = (undefined1  [16])0x0;
  pauVar26 = &local_880;
  local_b30 = local_b50;
  _local_af0 = local_b20;
  do {
    auVar35 = maxps(auVar35,pauVar26[5]);
    auVar95 = maxps(auVar95,pauVar26[1]);
    pauVar21 = pauVar26 + 6;
    local_b30 = minps(local_b30,pauVar26[4]);
    local_b40._0_4_ = local_b40._0_4_ + *(int *)(local_290 + lVar20);
    local_b40._4_4_ = local_b40._4_4_ + *(int *)(local_290 + lVar20 + 4);
    local_b40._8_4_ = local_b40._8_4_ + *(int *)(local_290 + lVar20 + 8);
    local_b40._12_4_ = local_b40._12_4_ + *(int *)(local_290 + lVar20 + 0xc);
    local_b20 = minps(local_b20,*pauVar26);
    fVar30 = auVar35._4_4_ - local_b30._4_4_;
    fVar42 = auVar35._8_4_ - local_b30._8_4_;
    auVar96 = maxps(auVar96,pauVar26[3]);
    local_b50 = minps(local_b50,pauVar26[2]);
    fVar78 = auVar95._4_4_ - local_b20._4_4_;
    fVar79 = auVar95._8_4_ - local_b20._8_4_;
    fVar44 = auVar96._4_4_ - local_b50._4_4_;
    fVar46 = auVar96._8_4_ - local_b50._8_4_;
    fVar30 = (fVar30 + fVar42) * (auVar35._0_4_ - local_b30._0_4_) + fVar30 * fVar42;
    uVar63 = (uint)(iVar31 + local_b40._0_4_) >> uVar24;
    uVar64 = (uint)(iVar31 + local_b40._4_4_) >> uVar24;
    uVar65 = (uint)(iVar31 + local_b40._8_4_) >> uVar24;
    uVar71 = (uint)(iVar31 + local_b40._12_4_) >> uVar24;
    uVar72 = (uint)(iVar31 + *(int *)(local_980 + lVar20)) >> uVar24;
    uVar73 = (uint)(iVar31 + *(int *)(local_980 + lVar20 + 4)) >> uVar24;
    uVar91 = (uint)(iVar31 + *(int *)(local_980 + lVar20 + 8)) >> uVar24;
    uVar93 = (uint)(iVar31 + *(int *)(local_980 + lVar20 + 0xc)) >> uVar24;
    fVar42 = ((float)(int)(uVar63 & _LC6) + (float)((int)uVar63 >> 0x1f & __LC21)) *
             ((fVar78 + fVar79) * (auVar95._0_4_ - local_b20._0_4_) + fVar78 * fVar79) +
             ((float)(int)(uVar72 & _LC6) + (float)((int)uVar72 >> 0x1f & __LC21)) *
             *(float *)(local_a80 + lVar20);
    fVar44 = ((float)(int)(uVar64 & _UNK_0013f694) + (float)((int)uVar64 >> 0x1f & _UNK_0013f6a4)) *
             ((fVar44 + fVar46) * (auVar96._0_4_ - local_b50._0_4_) + fVar44 * fVar46) +
             ((float)(int)(uVar73 & _UNK_0013f694) + (float)((int)uVar73 >> 0x1f & _UNK_0013f6a4)) *
             *(float *)(local_a80 + lVar20 + 4);
    fVar46 = ((float)(int)(uVar65 & _UNK_0013f698) + (float)((int)uVar65 >> 0x1f & _UNK_0013f6a8)) *
             fVar30 + ((float)(int)(uVar91 & _UNK_0013f698) +
                      (float)((int)uVar91 >> 0x1f & _UNK_0013f6a8)) *
                      *(float *)(local_a80 + lVar20 + 8);
    fVar30 = ((float)(int)(uVar71 & _UNK_0013f69c) + (float)((int)uVar71 >> 0x1f & _UNK_0013f6ac)) *
             fVar30 + ((float)(int)(uVar93 & _UNK_0013f69c) +
                      (float)((int)uVar93 >> 0x1f & _UNK_0013f6ac)) *
                      *(float *)(local_a80 + lVar20 + 0xc);
    uVar63 = -(uint)(fVar42 < (float)local_af0._0_4_);
    uVar64 = -(uint)(fVar44 < (float)local_af0._4_4_);
    uVar65 = -(uint)(fVar46 < fStack_ae8);
    uVar71 = -(uint)(fVar30 < fStack_ae4);
    local_af0._0_4_ = (uint)fVar42 & uVar63 | ~uVar63 & local_af0._0_4_;
    local_af0._4_4_ = (uint)fVar44 & uVar64 | ~uVar64 & local_af0._4_4_;
    fStack_ae8 = (float)((uint)fVar46 & uVar65 | ~uVar65 & (uint)fStack_ae8);
    uVar55 = (uint)local_b60 & uVar63 | ~uVar63 & uVar55;
    uVar54 = local_b60._4_4_ & uVar64 | ~uVar64 & uVar54;
    uVar62 = (uint)uStack_b58 & uVar65 | ~uVar65 & uVar62;
    fStack_ae4 = (float)((uint)fVar30 & uVar71 | ~uVar71 & (uint)fStack_ae4);
    puVar27 = (uint *)(local_980 + lVar20);
    lVar16 = lVar20 + 4;
    lVar7 = lVar20 + 8;
    lVar15 = lVar20 + 0xc;
    lVar20 = lVar20 + 0x10;
    local_b00._0_4_ = local_b40._0_4_ & uVar63 | ~uVar63 & local_b00._0_4_;
    local_b00._4_4_ = local_b40._4_4_ & uVar64 | ~uVar64 & local_b00._4_4_;
    local_b00._8_4_ = local_b40._8_4_ & uVar65 | ~uVar65 & local_b00._8_4_;
    local_b00._12_4_ = local_b40._12_4_ & uVar71 | ~uVar71 & local_b00._12_4_;
    local_b10._0_4_ = *puVar27 & uVar63 | ~uVar63 & local_b10._0_4_;
    local_b10._4_4_ = *(uint *)(local_980 + lVar16) & uVar64 | ~uVar64 & local_b10._4_4_;
    local_b10._8_4_ = *(uint *)(local_980 + lVar7) & uVar65 | ~uVar65 & local_b10._8_4_;
    local_b10._12_4_ = *(uint *)(local_980 + lVar15) & uVar71 | ~uVar71 & local_b10._12_4_;
    local_b60._4_4_ = local_b60._4_4_ + _UNK_0013f644;
    local_b60._0_4_ = (uint)local_b60 + __LC22;
    uStack_b58._0_4_ = (uint)uStack_b58 + _UNK_0013f648;
    uStack_b58._4_4_ = uStack_b58._4_4_ + _UNK_0013f64c;
    pauVar26 = pauVar21;
  } while (pauVar21 != pauVar28 + 0x54);
  uStack_b88 = auVar14._8_8_;
  local_ba0 = local_a90._0_8_;
  uStack_b98 = local_a90._8_8_;
  if ((local_aa0._0_4_ == 0.0) || (_LC23 < (float)local_af0._0_4_)) {
    local_b10._0_4_ = 0;
    local_b00._0_4_ = 0;
    uVar55 = 0;
    iVar31 = -1;
    local_af0._0_4_ = _LC3;
  }
  else if (uVar55 == 0) {
    local_b10._0_4_ = 0;
    uVar55 = 0;
    iVar31 = -1;
    local_b00._0_4_ = 0;
    local_af0._0_4_ = _LC3;
  }
  else {
    iVar31 = 0;
  }
  if (((local_aa0._4_4_ == 0.0) || ((float)local_af0._0_4_ <= (float)local_af0._4_4_)) ||
     (uVar54 == 0)) {
    iVar43 = iVar31;
    if (local_aa0._8_4_ != 0.0) goto LAB_001013c9;
LAB_00101420:
    if (iVar31 == -1) {
      *(undefined8 *)(param_1 + 0x20) = uVar13;
      *(undefined8 *)(param_1 + 0x28) = uStack_b88;
      *(undefined8 *)param_1 = 0xffffffff7f800000;
      *(undefined8 *)(param_1 + 8) = 0xffffffff00000000;
      *(undefined8 *)(param_1 + 0x10) = 0x3f800000ffffffff;
      *(float *)(param_1 + 0x30) = local_aa0._0_4_;
      *(float *)(param_1 + 0x34) = local_aa0._4_4_;
      *(float *)(param_1 + 0x38) = local_aa0._8_4_;
      *(float *)(param_1 + 0x3c) = local_aa0._12_4_;
      *(undefined8 *)(param_1 + 0x40) = local_ba0;
      *(undefined8 *)(param_1 + 0x48) = uStack_b98;
      goto LAB_00101388;
    }
  }
  else {
    iVar31 = 1;
    local_af0._0_4_ = local_af0._4_4_;
    local_b10._0_4_ = local_b10._4_4_;
    local_b00._0_4_ = local_b00._4_4_;
    uVar55 = uVar54;
    iVar43 = 1;
    if (local_aa0._8_4_ != 0.0) {
LAB_001013c9:
      iVar31 = iVar43;
      if (((float)local_af0._0_4_ <= fStack_ae8) || (uVar62 == 0)) goto LAB_00101420;
      iVar31 = 2;
      local_af0._0_4_ = fStack_ae8;
      local_b10._0_4_ = local_b10._8_4_;
      local_b00._0_4_ = local_b00._8_4_;
      uVar55 = uVar62;
    }
  }
  *(int *)(param_1 + 4) = iVar31;
  *(uint *)(param_1 + 8) = uVar55;
  *(undefined4 *)(param_1 + 0xc) = local_b00._0_4_;
  *(undefined4 *)(param_1 + 0x14) = 0x3f800000;
  *(undefined4 *)param_1 = local_af0._0_4_;
  *(undefined4 *)(param_1 + 0x10) = local_b10._0_4_;
  *(undefined8 *)(param_1 + 0x20) = uVar13;
  *(undefined8 *)(param_1 + 0x28) = uStack_b88;
  *(float *)(param_1 + 0x30) = local_aa0._0_4_;
  *(float *)(param_1 + 0x34) = local_aa0._4_4_;
  *(float *)(param_1 + 0x38) = local_aa0._8_4_;
  *(float *)(param_1 + 0x3c) = local_aa0._12_4_;
  *(undefined8 *)(param_1 + 0x40) = local_ba0;
  *(undefined8 *)(param_1 + 0x48) = uStack_b98;
LAB_00101388:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::sequential_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&) [clone .isra.0] */

PrimInfoExtRange *
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
sequential_object_find(PrimInfoExtRange *param_1,ulong param_2,SplitInfoT *param_3)

{
  ulong uVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  long lVar9;
  undefined4 uVar10;
  float fVar11;
  uint uVar12;
  undefined1 (*pauVar13) [16];
  ulong uVar14;
  undefined1 (*pauVar15) [16];
  int in_ECX;
  undefined1 (*pauVar16) [16];
  float *pfVar17;
  undefined1 *puVar18;
  uint *puVar20;
  ulong uVar21;
  ulong uVar22;
  long lVar23;
  long lVar24;
  long *in_R8;
  ulong uVar25;
  long lVar26;
  ulong uVar27;
  long in_FS_OFFSET;
  float fVar28;
  uint uVar29;
  int iVar30;
  uint uVar33;
  uint uVar36;
  undefined1 auVar31 [16];
  int iVar34;
  float fVar35;
  int iVar37;
  float fVar38;
  int iVar39;
  undefined1 auVar32 [16];
  uint uVar40;
  uint uVar45;
  uint uVar46;
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  undefined1 auVar47 [12];
  undefined1 auVar48 [16];
  undefined1 auVar49 [16];
  undefined1 auVar50 [16];
  undefined1 auVar51 [16];
  undefined1 auVar52 [16];
  undefined1 auVar53 [16];
  float fVar55;
  float fVar56;
  undefined1 auVar54 [16];
  float fVar58;
  undefined1 auVar57 [16];
  undefined1 auVar59 [16];
  float fVar60;
  undefined1 auVar61 [16];
  float fVar62;
  float fVar64;
  float fVar65;
  uint uVar66;
  undefined1 auVar63 [16];
  uint uVar68;
  uint uVar69;
  undefined1 auVar67 [16];
  byte local_1320;
  uint local_1310;
  uint uStack_130c;
  uint uStack_1308;
  uint uStack_1304;
  undefined1 local_1300 [16];
  undefined1 local_12f0 [16];
  undefined1 local_12e0 [16];
  undefined1 local_12d0 [16];
  undefined1 local_12c0 [16];
  undefined1 local_12b0 [16];
  undefined1 local_12a0 [8];
  float fStack_1298;
  undefined1 local_1290 [16];
  float local_1280 [124];
  int aiStack_1090 [108];
  undefined1 auStack_ee0 [96];
  uint local_e80 [4];
  undefined1 local_e70 [16];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2976];
  int local_290 [4];
  uint local_280 [142];
  long local_48;
  undefined1 *puVar19;
  
  fVar11 = _LC3;
  uVar10 = _LC1;
  auVar47._0_8_ = CONCAT44(_LC3,_LC3);
  auVar47._8_4_ = _LC3;
  auVar48._12_4_ = _LC3;
  auVar48._0_12_ = auVar47;
  auVar49._0_8_ = CONCAT44(_LC1,_LC1);
  auVar49._8_4_ = _LC1;
  auVar49._12_4_ = _LC1;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pauVar15 = (undefined1 (*) [16])local_e80;
  pauVar16 = (undefined1 (*) [16])local_280;
  do {
    pauVar15[4] = auVar48;
    pauVar13 = pauVar15 + 6;
    pauVar15[5] = auVar49;
    pauVar15[2] = auVar48;
    pauVar15[3] = auVar49;
    *pauVar15 = auVar48;
    pauVar15[1] = auVar49;
    *pauVar16 = (undefined1  [16])0x0;
    pauVar15 = pauVar13;
    pauVar16 = pauVar16 + 1;
  } while ((undefined1 (*) [16])local_280 != pauVar13);
  uVar27 = *(long *)(param_3 + 0x48) - *(long *)(param_3 + 0x40);
  fVar28 = (float)uVar27 * __LC25 + __LC26;
  if (__LC27 <= fVar28) {
    uVar21 = (long)(fVar28 - __LC27) ^ 0x8000000000000000;
  }
  else {
    uVar21 = (ulong)fVar28;
  }
  fVar28 = *(float *)(param_3 + 0x20);
  fVar2 = *(float *)(param_3 + 0x24);
  fVar3 = *(float *)(param_3 + 0x28);
  fVar4 = *(float *)(param_3 + 0x2c);
  auVar31._0_4_ = *(float *)(param_3 + 0x30) - fVar28;
  auVar31._4_4_ = *(float *)(param_3 + 0x34) - fVar2;
  auVar31._8_4_ = *(float *)(param_3 + 0x38) - fVar3;
  auVar31._12_4_ = *(float *)(param_3 + 0x3c) - fVar4;
  uVar25 = 0x20;
  if (uVar21 < 0x21) {
    uVar25 = uVar21;
  }
  auVar41._4_4_ = _LC29;
  auVar41._0_4_ = _LC29;
  auVar41._8_4_ = _LC29;
  auVar41._12_4_ = _LC29;
  pauVar15 = (undefined1 (*) [16])(param_2 + *(long *)(param_3 + 0x40) * 0x20);
  auVar41 = maxps(auVar41,auVar31);
  auVar42._0_4_ = (float)(long)uVar25 * _LC30;
  auVar42._4_4_ = auVar42._0_4_;
  auVar42._8_4_ = auVar42._0_4_;
  auVar42._12_4_ = auVar42._0_4_;
  auVar31 = divps(auVar42,auVar41);
  fVar62 = (float)(-(uint)(_LC29 < auVar41._0_4_) & auVar31._0_4_);
  fVar64 = (float)(-(uint)(_LC29 < auVar41._4_4_) & auVar31._4_4_);
  fVar65 = (float)(-(uint)(_LC29 < auVar41._8_4_) & auVar31._8_4_);
  uVar66 = -(uint)(_LC29 < auVar41._12_4_) & auVar31._12_4_;
  if (uVar27 != 0) {
    uVar12 = (int)uVar25 - 1;
    if (uVar27 != 1) {
      pauVar16 = pauVar15;
      do {
        auVar31 = pauVar16[1];
        auVar42 = *pauVar16;
        pauVar13 = pauVar16 + 4;
        auVar41 = pauVar16[2];
        uVar29 = (uint)(((auVar31._0_4_ + auVar42._0_4_) - fVar28) * fVar62 + _LC16);
        uVar33 = (uint)(((auVar31._4_4_ + auVar42._4_4_) - fVar2) * fVar64 + _LC16);
        uVar36 = (uint)(((auVar31._8_4_ + auVar42._8_4_) - fVar3) * fVar65 + _LC16);
        uVar40 = -(uint)((int)uVar29 < (int)uVar12);
        uVar45 = -(uint)((int)uVar33 < (int)uVar12);
        uVar46 = -(uint)((int)uVar36 < (int)uVar12);
        uVar29 = uVar29 & uVar40 | ~uVar40 & uVar12;
        uVar33 = uVar33 & uVar45 | ~uVar45 & uVar12;
        uVar40 = uVar36 & uVar46 | ~uVar46 & uVar12;
        auVar43 = pauVar16[3];
        uVar22 = (ulong)(~-(uint)((int)uVar29 < 0) & uVar29);
        pauVar16 = (undefined1 (*) [16])local_e80 + uVar22 * 6;
        uVar29 = (uint)(((auVar43._0_4_ + auVar41._0_4_) - fVar28) * fVar62 + _LC16);
        uVar36 = (uint)(((auVar43._4_4_ + auVar41._4_4_) - fVar2) * fVar64 + _LC16);
        uVar45 = (uint)(((auVar43._8_4_ + auVar41._8_4_) - fVar3) * fVar65 + _LC16);
        uVar46 = -(uint)((int)uVar29 < (int)uVar12);
        uVar68 = -(uint)((int)uVar36 < (int)uVar12);
        uVar69 = -(uint)((int)uVar45 < (int)uVar12);
        uVar29 = uVar46 & uVar29 | ~uVar46 & uVar12;
        uVar36 = uVar68 & uVar36 | ~uVar68 & uVar12;
        uVar45 = uVar69 & uVar45 | ~uVar69 & uVar12;
        auVar67 = minps(*pauVar16,auVar42);
        *pauVar16 = auVar67;
        auVar67 = maxps(*(undefined1 (*) [16])(local_e70 + uVar22 * 0x60),auVar31);
        *(undefined1 (*) [16])(local_e70 + uVar22 * 0x60) = auVar67;
        uVar14 = (ulong)(~-(uint)((int)uVar33 < 0) & uVar33);
        lVar26 = uVar14 * 0x60;
        auVar67 = minps(*(undefined1 (*) [16])(local_e60 + lVar26),auVar42);
        *(undefined1 (*) [16])(local_e60 + lVar26) = auVar67;
        auVar67 = maxps(*(undefined1 (*) [16])(local_e50 + lVar26),auVar31);
        *(undefined1 (*) [16])(local_e50 + lVar26) = auVar67;
        uVar1 = (ulong)(~-(uint)((int)uVar40 < 0) & uVar40);
        lVar26 = uVar1 * 0x60;
        auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar26),auVar42);
        *(undefined1 (*) [16])(local_e40 + lVar26) = auVar42;
        auVar31 = maxps(*(undefined1 (*) [16])(local_e30 + lVar26),auVar31);
        *(undefined1 (*) [16])(local_e30 + lVar26) = auVar31;
        local_e80[(uVar22 + 0xc0) * 4] = local_e80[(uVar22 + 0xc0) * 4] + 1;
        uVar22 = (ulong)(~-(uint)((int)uVar29 < 0) & uVar29);
        local_280[uVar1 * 4 + 2] = local_280[uVar1 * 4 + 2] + 1;
        local_280[uVar14 * 4 + 1] = local_280[uVar14 * 4 + 1] + 1;
        pauVar16 = (undefined1 (*) [16])local_e80 + uVar22 * 6;
        auVar31 = minps(*pauVar16,auVar41);
        *pauVar16 = auVar31;
        auVar31 = maxps(*(undefined1 (*) [16])(local_e70 + uVar22 * 0x60),auVar43);
        *(undefined1 (*) [16])(local_e70 + uVar22 * 0x60) = auVar31;
        uVar14 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        lVar26 = uVar14 * 0x60;
        auVar31 = minps(*(undefined1 (*) [16])(local_e60 + lVar26),auVar41);
        *(undefined1 (*) [16])(local_e60 + lVar26) = auVar31;
        auVar31 = maxps(*(undefined1 (*) [16])(local_e50 + lVar26),auVar43);
        *(undefined1 (*) [16])(local_e50 + lVar26) = auVar31;
        uVar1 = (ulong)(~-(uint)((int)uVar45 < 0) & uVar45);
        lVar26 = uVar1 * 0x60;
        auVar31 = minps(*(undefined1 (*) [16])(local_e40 + lVar26),auVar41);
        *(undefined1 (*) [16])(local_e40 + lVar26) = auVar31;
        auVar31 = maxps(*(undefined1 (*) [16])(local_e30 + lVar26),auVar43);
        *(undefined1 (*) [16])(local_e30 + lVar26) = auVar31;
        local_e80[(uVar22 + 0xc0) * 4] = local_e80[(uVar22 + 0xc0) * 4] + 1;
        local_280[uVar14 * 4 + 1] = local_280[uVar14 * 4 + 1] + 1;
        local_280[uVar1 * 4 + 2] = local_280[uVar1 * 4 + 2] + 1;
        pauVar16 = pauVar13;
      } while (pauVar15 + (uVar27 - 2 >> 1) * 4 + 4 != pauVar13);
      uVar14 = (uVar27 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar27 <= uVar14) goto LAB_00101fb9;
      pauVar15 = pauVar15 + uVar14 * 2;
    }
    auVar31 = pauVar15[1];
    auVar42 = *pauVar15;
    uVar29 = (uint)(((auVar31._0_4_ + auVar42._0_4_) - fVar28) * fVar62 + _LC16);
    uVar33 = (uint)(((auVar31._4_4_ + auVar42._4_4_) - fVar2) * fVar64 + _LC16);
    uVar36 = (uint)(((auVar31._8_4_ + auVar42._8_4_) - fVar3) * fVar65 + _LC16);
    uVar40 = -(uint)((int)uVar29 < (int)uVar12);
    uVar45 = -(uint)((int)uVar33 < (int)uVar12);
    uVar46 = -(uint)((int)uVar36 < (int)uVar12);
    uVar29 = uVar40 & uVar29 | ~uVar40 & uVar12;
    uVar33 = uVar45 & uVar33 | ~uVar45 & uVar12;
    uVar12 = uVar46 & uVar36 | ~uVar46 & uVar12;
    lVar26 = (long)(int)(~-(uint)((int)uVar29 < 0) & uVar29);
    pauVar15 = (undefined1 (*) [16])local_e80 + lVar26 * 6;
    local_e80[(lVar26 + 0xc0) * 4] = local_e80[(lVar26 + 0xc0) * 4] + 1;
    auVar41 = minps(*pauVar15,auVar42);
    *pauVar15 = auVar41;
    auVar41 = maxps(*(undefined1 (*) [16])(local_e70 + lVar26 * 0x60),auVar31);
    *(undefined1 (*) [16])(local_e70 + lVar26 * 0x60) = auVar41;
    lVar26 = (long)(int)(~-(uint)((int)uVar33 < 0) & uVar33);
    lVar24 = lVar26 * 0x60;
    local_280[lVar26 * 4 + 1] = local_280[lVar26 * 4 + 1] + 1;
    auVar41 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar42);
    *(undefined1 (*) [16])(local_e60 + lVar24) = auVar41;
    auVar41 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar31);
    *(undefined1 (*) [16])(local_e50 + lVar24) = auVar41;
    lVar26 = (long)(int)(~-(uint)((int)uVar12 < 0) & uVar12);
    lVar24 = lVar26 * 0x60;
    local_280[lVar26 * 4 + 2] = local_280[lVar26 * 4 + 2] + 1;
    auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar42);
    *(undefined1 (*) [16])(local_e40 + lVar24) = auVar42;
    auVar31 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar31);
    *(undefined1 (*) [16])(local_e30 + lVar24) = auVar31;
  }
LAB_00101fb9:
  if (uVar21 != 1) {
    auVar59._8_4_ = _LC1;
    auVar59._0_8_ = auVar49._0_8_;
    auVar59._12_4_ = _LC1;
    auVar57._8_4_ = _LC3;
    auVar57._0_8_ = auVar47._0_8_;
    auVar57._12_4_ = _LC3;
    auVar54._8_4_ = _LC1;
    auVar54._0_8_ = auVar49._0_8_;
    auVar54._12_4_ = _LC1;
    auVar51._8_4_ = _LC3;
    auVar51._0_8_ = auVar47._0_8_;
    auVar51._12_4_ = _LC3;
    auVar67._8_4_ = _LC1;
    auVar67._0_8_ = auVar49._0_8_;
    auVar67._12_4_ = _LC1;
    auVar43._8_4_ = _LC3;
    auVar43._0_8_ = auVar47._0_8_;
    auVar43._12_4_ = _LC3;
    iVar30 = 0;
    iVar34 = 0;
    iVar37 = 0;
    iVar39 = 0;
    pauVar15 = (undefined1 (*) [16])(auStack_ee0 + uVar25 * 0x60);
    pfVar17 = (float *)(local_1290 + uVar25 * 0x10);
    lVar26 = uVar25 * 0x10;
    do {
      auVar67 = maxps(auVar67,pauVar15[1]);
      auVar43 = minps(auVar43,*pauVar15);
      pauVar16 = pauVar15 + -6;
      iVar5 = *(int *)(((undefined1 (*) [16])local_280)[-1] + lVar26);
      iVar6 = *(int *)((long)local_290 + lVar26 + 4);
      iVar7 = *(int *)((long)local_290 + lVar26 + 8);
      iVar8 = *(int *)((long)local_290 + lVar26 + 0xc);
      auVar54 = maxps(auVar54,pauVar15[3]);
      pfVar17[3] = 0.0;
      auVar51 = minps(auVar51,pauVar15[2]);
      auVar59 = maxps(auVar59,pauVar15[5]);
      iVar30 = iVar5 + iVar30;
      iVar34 = iVar6 + iVar34;
      iVar37 = iVar7 + iVar37;
      iVar39 = iVar8 + iVar39;
      auVar57 = minps(auVar57,pauVar15[4]);
      *(int *)((long)aiStack_1090 + lVar26) = iVar30;
      *(int *)((long)aiStack_1090 + lVar26 + 4) = iVar34;
      *(int *)((long)aiStack_1090 + lVar26 + 8) = iVar37;
      *(int *)((long)aiStack_1090 + lVar26 + 0xc) = iVar39;
      fVar35 = auVar67._4_4_ - auVar43._4_4_;
      fVar38 = auVar67._8_4_ - auVar43._8_4_;
      *pfVar17 = (auVar67._0_4_ - auVar43._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar54._4_4_ - auVar51._4_4_;
      fVar38 = auVar54._8_4_ - auVar51._8_4_;
      pfVar17[1] = (auVar54._0_4_ - auVar51._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar59._4_4_ - auVar57._4_4_;
      fVar38 = auVar59._8_4_ - auVar57._8_4_;
      pfVar17[2] = (auVar59._0_4_ - auVar57._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      pauVar15 = pauVar16;
      pfVar17 = pfVar17 + -4;
      lVar26 = lVar26 + -0x10;
    } while ((undefined1 (*) [16])local_e80 != pauVar16);
  }
  local_1320 = (byte)in_ECX;
  local_1290 = (undefined1  [16])0x0;
  iVar30 = (1 << (local_1320 & 0x1f)) + -1;
  _local_12a0 = auVar47;
  if (1 < uVar21) {
    auVar61._8_4_ = _LC1;
    auVar61._0_8_ = auVar49._0_8_;
    auVar61._12_4_ = _LC1;
    lVar26 = 0x10;
    uVar27 = 1;
    local_12b0 = (undefined1  [16])0x0;
    auVar63._8_4_ = _LC1;
    auVar63._0_8_ = auVar49._0_8_;
    auVar63._12_4_ = _LC1;
    auVar53._8_4_ = _LC3;
    auVar53._0_8_ = auVar47._0_8_;
    auVar53._12_4_ = _LC3;
    local_12c0 = (undefined1  [16])0x0;
    pauVar15 = (undefined1 (*) [16])local_e80;
    local_1300 = auVar49;
    local_12f0 = auVar48;
    local_12e0 = auVar48;
    local_12d0 = auVar48;
    local_1310 = __LC22;
    uStack_130c = _UNK_0013f644;
    uStack_1308 = _UNK_0013f648;
    uStack_1304 = _UNK_0013f64c;
    do {
      auVar61 = maxps(auVar61,pauVar15[1]);
      auVar63 = maxps(auVar63,pauVar15[3]);
      uVar27 = uVar27 + 1;
      local_12d0 = minps(local_12d0,*pauVar15);
      local_1300 = maxps(local_1300,pauVar15[5]);
      local_12c0._0_4_ = local_12c0._0_4_ + *(int *)((long)local_290 + lVar26);
      local_12c0._4_4_ = local_12c0._4_4_ + *(int *)((long)local_290 + lVar26 + 4);
      local_12c0._8_4_ = local_12c0._8_4_ + *(int *)((long)local_290 + lVar26 + 8);
      local_12c0._12_4_ = local_12c0._12_4_ + *(int *)((long)local_290 + lVar26 + 0xc);
      fVar38 = auVar61._4_4_ - local_12d0._4_4_;
      fVar58 = auVar61._8_4_ - local_12d0._8_4_;
      local_12e0 = minps(local_12e0,pauVar15[2]);
      fVar55 = auVar63._4_4_ - local_12e0._4_4_;
      fVar56 = auVar63._8_4_ - local_12e0._8_4_;
      local_12f0 = minps(local_12f0,pauVar15[4]);
      fVar35 = local_1300._4_4_ - local_12f0._4_4_;
      fVar60 = local_1300._8_4_ - local_12f0._8_4_;
      fVar35 = fVar35 * fVar60 + (fVar35 + fVar60) * (local_1300._0_4_ - local_12f0._0_4_);
      uVar12 = (uint)(local_12c0._0_4_ + iVar30) >> in_ECX;
      uVar29 = (uint)(local_12c0._4_4_ + iVar30) >> in_ECX;
      uVar33 = (uint)(local_12c0._8_4_ + iVar30) >> in_ECX;
      uVar36 = (uint)(local_12c0._12_4_ + iVar30) >> in_ECX;
      uVar40 = (uint)(iVar30 + *(int *)((long)aiStack_1090 + lVar26 + 0x10)) >> in_ECX;
      uVar45 = (uint)(iVar30 + *(int *)((long)aiStack_1090 + lVar26 + 0x14)) >> in_ECX;
      uVar46 = (uint)(iVar30 + *(int *)((long)aiStack_1090 + lVar26 + 0x18)) >> in_ECX;
      uVar68 = (uint)(iVar30 + *(int *)((long)aiStack_1090 + lVar26 + 0x1c)) >> in_ECX;
      pfVar17 = (float *)((long)local_1280 + lVar26);
      lVar24 = lVar26 + 4;
      lVar23 = lVar26 + 8;
      lVar9 = lVar26 + 0xc;
      lVar26 = lVar26 + 0x10;
      fVar38 = ((float)(int)(uVar12 & _LC6) + (float)((int)uVar12 >> 0x1f & __LC21)) *
               (fVar38 * fVar58 + (fVar38 + fVar58) * (auVar61._0_4_ - local_12d0._0_4_)) +
               ((float)(int)(uVar40 & _LC6) + (float)((int)uVar40 >> 0x1f & __LC21)) * *pfVar17;
      fVar55 = ((float)(int)(uVar29 & _UNK_0013f694) + (float)((int)uVar29 >> 0x1f & _UNK_0013f6a4))
               * ((fVar55 + fVar56) * (auVar63._0_4_ - local_12e0._0_4_) + fVar56 * fVar55) +
               ((float)(int)(uVar45 & _UNK_0013f694) + (float)((int)uVar45 >> 0x1f & _UNK_0013f6a4))
               * *(float *)((long)local_1280 + lVar24);
      fVar56 = ((float)(int)(uVar33 & _UNK_0013f698) + (float)((int)uVar33 >> 0x1f & _UNK_0013f6a8))
               * fVar35 +
               ((float)(int)(uVar46 & _UNK_0013f698) + (float)((int)uVar46 >> 0x1f & _UNK_0013f6a8))
               * *(float *)((long)local_1280 + lVar23);
      fVar35 = ((float)(int)(uVar36 & _UNK_0013f69c) + (float)((int)uVar36 >> 0x1f & _UNK_0013f6ac))
               * fVar35 +
               ((float)(int)(uVar68 & _UNK_0013f69c) + (float)((int)uVar68 >> 0x1f & _UNK_0013f6ac))
               * *(float *)((long)local_1280 + lVar9);
      uVar12 = -(uint)(fVar38 < auVar53._0_4_);
      uVar29 = -(uint)(fVar55 < auVar53._4_4_);
      uVar33 = -(uint)(fVar56 < auVar53._8_4_);
      uVar36 = -(uint)(fVar35 < auVar53._12_4_);
      local_12b0._0_4_ = local_1310 & uVar12 | ~uVar12 & local_12b0._0_4_;
      local_12b0._4_4_ = uStack_130c & uVar29 | ~uVar29 & local_12b0._4_4_;
      local_12b0._8_4_ = uStack_1308 & uVar33 | ~uVar33 & local_12b0._8_4_;
      local_12b0._12_4_ = uStack_1304 & uVar36 | ~uVar36 & local_12b0._12_4_;
      auVar52._4_4_ = uVar29 & (uint)fVar55;
      auVar52._0_4_ = uVar12 & (uint)fVar38;
      auVar50._0_4_ = ~uVar12 & (uint)auVar53._0_4_;
      auVar50._4_4_ = ~uVar29 & (uint)auVar53._4_4_;
      auVar50._8_4_ = ~uVar33 & (uint)auVar53._8_4_;
      auVar50._12_4_ = ~uVar36 & (uint)auVar53._12_4_;
      auVar52._8_4_ = uVar33 & (uint)fVar56;
      auVar52._12_4_ = uVar36 & (uint)fVar35;
      auVar53 = auVar52 | auVar50;
      _local_12a0 = auVar53._0_12_;
      pauVar15 = pauVar15 + 6;
      local_1310 = local_1310 + __LC22;
      uStack_130c = uStack_130c + _UNK_0013f644;
      uStack_1308 = uStack_1308 + _UNK_0013f648;
      uStack_1304 = uStack_1304 + _UNK_0013f64c;
    } while (uVar27 < uVar25);
    local_1290._4_4_ = local_12b0._4_4_;
    local_1290._0_4_ = local_12b0._0_4_;
    local_1290._8_4_ = local_12b0._8_4_;
    local_1290._12_4_ = local_12b0._12_4_;
  }
  if ((fVar62 == 0.0) || (_LC23 < (float)local_12a0._0_4_)) {
LAB_001023f1:
    uVar27 = 0;
    lVar26 = -1;
    fVar35 = _LC3;
  }
  else {
    uVar27 = (ulong)(int)local_1290._0_4_;
    lVar26 = 0;
    fVar35 = (float)local_12a0._0_4_;
    if (local_1290._0_4_ == 0) goto LAB_001023f1;
  }
  if (((fVar64 != 0.0) && ((float)local_12a0._4_4_ < fVar35)) && (local_1290._4_4_ != 0)) {
    uVar27 = (ulong)(int)local_1290._4_4_;
    lVar26 = 1;
    fVar35 = (float)local_12a0._4_4_;
  }
  if (((fVar65 == 0.0) || (fVar35 <= fStack_1298)) || (local_1290._8_4_ == 0)) {
    *(int *)(param_1 + 4) = (int)lVar26;
    *(int *)(param_1 + 8) = (int)uVar27;
    *(undefined4 *)(param_1 + 0xc) = 0;
    *(ulong *)(param_1 + 0x10) = uVar25;
    *(float *)param_1 = fVar35;
    *(float *)(param_1 + 0x20) = fVar28;
    *(float *)(param_1 + 0x24) = fVar2;
    *(float *)(param_1 + 0x28) = fVar3;
    *(float *)(param_1 + 0x2c) = fVar4;
    *(float *)(param_1 + 0x30) = fVar62;
    *(float *)(param_1 + 0x34) = fVar64;
    *(float *)(param_1 + 0x38) = fVar65;
    *(uint *)(param_1 + 0x3c) = uVar66;
    if ((int)lVar26 == -1) {
      *in_R8 = 0;
      in_R8[1] = 0;
      *(undefined1 (*) [16])(in_R8 + 2) = auVar48;
      *(undefined1 (*) [16])(in_R8 + 4) = auVar49;
      *(undefined1 (*) [16])(in_R8 + 6) = auVar48;
      *(undefined1 (*) [16])(in_R8 + 8) = auVar49;
      goto LAB_00102536;
    }
    if (uVar27 != 0) goto LAB_00102484;
    lVar24 = 0;
    auVar32._8_4_ = uVar10;
    auVar32._0_8_ = auVar49._0_8_;
    auVar32._12_4_ = uVar10;
    auVar44._8_4_ = fVar11;
    auVar44._0_8_ = auVar47._0_8_;
    auVar44._12_4_ = fVar11;
  }
  else {
    *(undefined4 *)(param_1 + 8) = local_1290._8_4_;
    uVar27 = (ulong)(int)local_1290._8_4_;
    lVar26 = 2;
    *(undefined4 *)(param_1 + 4) = 2;
    *(undefined4 *)(param_1 + 0xc) = 0;
    *(ulong *)(param_1 + 0x10) = uVar25;
    *(float *)param_1 = fStack_1298;
    *(float *)(param_1 + 0x20) = fVar28;
    *(float *)(param_1 + 0x24) = fVar2;
    *(float *)(param_1 + 0x28) = fVar3;
    *(float *)(param_1 + 0x2c) = fVar4;
    *(float *)(param_1 + 0x30) = fVar62;
    *(float *)(param_1 + 0x34) = fVar64;
    *(float *)(param_1 + 0x38) = fVar65;
    *(uint *)(param_1 + 0x3c) = uVar66;
LAB_00102484:
    lVar23 = (long)(int)lVar26;
    auVar32._8_4_ = uVar10;
    auVar32._0_8_ = auVar49._0_8_;
    auVar32._12_4_ = uVar10;
    auVar44._8_4_ = fVar11;
    auVar44._0_8_ = auVar47._0_8_;
    auVar44._12_4_ = fVar11;
    lVar24 = 0;
    pauVar15 = (undefined1 (*) [16])(local_e70 + lVar23 * 0x20);
    puVar19 = *(undefined1 (*) [16])local_e80 + lVar23 * 4;
    do {
      puVar18 = puVar19 + 0x10;
      auVar44 = minps(auVar44,pauVar15[-1]);
      auVar32 = maxps(auVar32,*pauVar15);
      pauVar15 = pauVar15 + 6;
      lVar24 = lVar24 + (ulong)*(uint *)(puVar19 + 0xc00);
      puVar19 = puVar18;
    } while (((undefined1 (*) [16])local_e80)[uVar27] + lVar23 * 4 != puVar18);
  }
  if (uVar27 < uVar25) {
    puVar20 = (uint *)(((undefined1 (*) [16])local_e80)[uVar27 + 0xc0] + lVar26 * 4);
    lVar23 = 0;
    pauVar15 = (undefined1 (*) [16])(local_e70 + (uVar27 * 3 + lVar26) * 0x20);
    do {
      uVar66 = *puVar20;
      puVar20 = puVar20 + 4;
      auVar48 = minps(auVar48,pauVar15[-1]);
      auVar49 = maxps(auVar49,*pauVar15);
      lVar23 = lVar23 + (ulong)uVar66;
      pauVar15 = pauVar15 + 6;
    } while (puVar20 != (uint *)(((undefined1 (*) [16])local_280)[uVar25] + lVar26 * 4));
  }
  else {
    lVar23 = 0;
  }
  *in_R8 = lVar24;
  in_R8[1] = lVar23;
  *(undefined1 (*) [16])(in_R8 + 2) = auVar44;
  *(undefined1 (*) [16])(in_R8 + 4) = auVar32;
  *(undefined1 (*) [16])(in_R8 + 6) = auVar48;
  *(undefined1 (*) [16])(in_R8 + 8) = auVar49;
LAB_00102536:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::setExtentedRanges(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&, embree::sse2::PrimInfoExtRange&, unsigned long, unsigned long)
   [clone .isra.0] */

void embree::sse2::
     HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
     setExtentedRanges(PrimInfoExtRange *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3
                      ,ulong param_4,ulong param_5)

{
  ulong uVar1;
  ulong uVar2;
  float fVar3;
  
  uVar1 = *(long *)(param_1 + 0x50) - *(long *)(param_1 + 0x48);
  if ((long)(param_4 + param_5) < 0) {
    fVar3 = (float)(param_4 + param_5);
  }
  else {
    fVar3 = (float)(long)(param_4 + param_5);
  }
  fVar3 = ((float)param_4 / fVar3) * (float)uVar1;
  if ((float)((uint)fVar3 & _LC6) < _LC31) {
    fVar3 = (float)((uint)(float)(int)fVar3 | ~_LC6 & (uint)fVar3);
  }
  if (__LC27 <= fVar3) {
    uVar2 = (long)(fVar3 - __LC27) ^ 0x8000000000000000;
  }
  else {
    uVar2 = (ulong)fVar3;
  }
  if (uVar1 < uVar2) {
    uVar2 = uVar1;
  }
  *(ulong *)(param_2 + 0x50) = *(long *)(param_2 + 0x48) + uVar2;
  *(ulong *)(param_3 + 0x50) = (uVar1 + *(long *)(param_3 + 0x48)) - uVar2;
  return;
}



/* embree::sse2::BVH4Triangle4SceneBuilderFastSpatialSAH(void*, embree::Scene*, unsigned long) */

void embree::sse2::BVH4Triangle4SceneBuilderFastSpatialSAH
               (void *param_1,Scene *param_2,ulong param_3)

{
  undefined4 uVar1;
  long lVar2;
  undefined8 *puVar3;
  long lVar4;
  
  puVar3 = (undefined8 *)operator_new(0xa0);
  *puVar3 = &PTR__BVHNBuilderFastSpatialSAH_0013f558;
  lVar2 = *(long *)(param_2 + 0x188);
  puVar3[3] = param_2;
  *(undefined1 *)(puVar3 + 6) = 0;
  lVar4 = lVar2 + 0x548;
  if (lVar2 == 0) {
    lVar4 = 0;
  }
  puVar3[1] = 0;
  puVar3[7] = 0;
  puVar3[5] = lVar4;
  puVar3[8] = 0;
  puVar3[9] = 0;
  puVar3[10] = 2;
  puVar3[0xb] = 0x20;
  puVar3[0xd] = 4;
  puVar3[0xe] = 0x1c;
  puVar3[0xf] = 0x3f8000003f800000;
  puVar3[0x10] = 0x400;
  puVar3[0x11] = 0xffffffffffffffff;
  for (lVar4 = 0x3f; 4UL >> lVar4 == 0; lVar4 = lVar4 + -1) {
  }
  puVar3[0xc] = lVar4;
  uVar1 = *(undefined4 *)(lVar2 + 0x460);
  puVar3[2] = param_1;
  puVar3[4] = 0;
  *(undefined8 *)((long)puVar3 + 0x94) = 0xffffffff;
  *(undefined4 *)(puVar3 + 0x12) = uVar1;
  return;
}



/* embree::sse2::BVH4Triangle4vSceneBuilderFastSpatialSAH(void*, embree::Scene*, unsigned long) */

void embree::sse2::BVH4Triangle4vSceneBuilderFastSpatialSAH
               (void *param_1,Scene *param_2,ulong param_3)

{
  undefined4 uVar1;
  long lVar2;
  undefined8 *puVar3;
  long lVar4;
  
  puVar3 = (undefined8 *)operator_new(0xa0);
  *puVar3 = &PTR__BVHNBuilderFastSpatialSAH_0013f5a0;
  lVar2 = *(long *)(param_2 + 0x188);
  puVar3[3] = param_2;
  *(undefined1 *)(puVar3 + 6) = 0;
  lVar4 = lVar2 + 0x548;
  if (lVar2 == 0) {
    lVar4 = 0;
  }
  puVar3[1] = 0;
  puVar3[7] = 0;
  puVar3[5] = lVar4;
  puVar3[8] = 0;
  puVar3[9] = 0;
  puVar3[10] = 2;
  puVar3[0xb] = 0x20;
  puVar3[0xd] = 4;
  puVar3[0xe] = 0x1c;
  puVar3[0xf] = 0x3f8000003f800000;
  puVar3[0x10] = 0x400;
  puVar3[0x11] = 0xffffffffffffffff;
  for (lVar4 = 0x3f; 4UL >> lVar4 == 0; lVar4 = lVar4 + -1) {
  }
  puVar3[0xc] = lVar4;
  uVar1 = *(undefined4 *)(lVar2 + 0x460);
  puVar3[2] = param_1;
  puVar3[4] = 0;
  *(undefined8 *)((long)puVar3 + 0x94) = 0xffffffff;
  *(undefined4 *)(puVar3 + 0x12) = uVar1;
  return;
}



/* embree::sse2::BVH4Triangle4iSceneBuilderFastSpatialSAH(void*, embree::Scene*, unsigned long) */

void embree::sse2::BVH4Triangle4iSceneBuilderFastSpatialSAH
               (void *param_1,Scene *param_2,ulong param_3)

{
  undefined4 uVar1;
  long lVar2;
  undefined8 *puVar3;
  long lVar4;
  
  puVar3 = (undefined8 *)operator_new(0xa0);
  *puVar3 = &PTR__BVHNBuilderFastSpatialSAH_0013f5e8;
  lVar2 = *(long *)(param_2 + 0x188);
  puVar3[3] = param_2;
  *(undefined1 *)(puVar3 + 6) = 0;
  lVar4 = lVar2 + 0x548;
  if (lVar2 == 0) {
    lVar4 = 0;
  }
  puVar3[1] = 0;
  puVar3[7] = 0;
  puVar3[5] = lVar4;
  puVar3[8] = 0;
  puVar3[9] = 0;
  puVar3[10] = 2;
  puVar3[0xb] = 0x20;
  puVar3[0xd] = 4;
  puVar3[0xe] = 0x1c;
  puVar3[0xf] = 0x3f8000003f800000;
  puVar3[0x10] = 0x400;
  puVar3[0x11] = 0xffffffffffffffff;
  for (lVar4 = 0x3f; 4UL >> lVar4 == 0; lVar4 = lVar4 + -1) {
  }
  puVar3[0xc] = lVar4;
  uVar1 = *(undefined4 *)(lVar2 + 0x460);
  puVar3[2] = param_1;
  puVar3[4] = 0;
  *(undefined8 *)((long)puVar3 + 0x94) = 0xffffffff;
  *(undefined4 *)(puVar3 + 0x12) = uVar1;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__introsort_loop<embree::PrimRef*, long,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::PrimRef*, embree::PrimRef*, long,
   __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined8 *param_2,long param_3)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined8 uVar17;
  undefined8 *puVar18;
  long lVar19;
  undefined4 *puVar20;
  ulong uVar21;
  ulong uVar22;
  undefined8 *puVar23;
  ulong uVar24;
  undefined8 *puVar25;
  undefined8 *puVar26;
  long in_FS_OFFSET;
  undefined4 local_80;
  undefined4 uStack_7c;
  undefined4 uStack_78;
  undefined4 uStack_74;
  undefined4 local_70;
  undefined4 uStack_6c;
  undefined4 uStack_68;
  undefined4 uStack_64;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar19 = (long)param_2 - (long)param_1;
  if (0x200 < lVar19) {
    puVar26 = (undefined8 *)(param_1 + 8);
    puVar23 = param_2;
    if (param_3 != 0) {
      do {
        param_3 = param_3 + -1;
        uVar1 = *param_1;
        uVar2 = param_1[1];
        uVar3 = param_1[2];
        uVar4 = param_1[3];
        puVar20 = param_1 + (lVar19 >> 6) * 8;
        uVar5 = param_1[4];
        uVar6 = param_1[5];
        uVar7 = param_1[6];
        uVar8 = param_1[7];
        uVar21 = CONCAT44(param_1[0xf],param_1[0xb]);
        uVar22 = CONCAT44(puVar20[7],puVar20[3]);
        uVar24 = CONCAT44(*(undefined4 *)((long)puVar23 + -4),*(undefined4 *)((long)puVar23 + -0x14)
                         );
        puVar25 = puVar23;
        param_2 = puVar26;
        if (uVar21 < uVar22) {
          if (uVar22 < uVar24) {
LAB_00102d5a:
            uVar9 = puVar20[1];
            uVar10 = puVar20[2];
            uVar11 = puVar20[3];
            *param_1 = *puVar20;
            param_1[1] = uVar9;
            param_1[2] = uVar10;
            param_1[3] = uVar11;
            uVar9 = puVar20[5];
            uVar10 = puVar20[6];
            uVar11 = puVar20[7];
            param_1[4] = puVar20[4];
            param_1[5] = uVar9;
            param_1[6] = uVar10;
            param_1[7] = uVar11;
            *puVar20 = uVar1;
            puVar20[1] = uVar2;
            puVar20[2] = uVar3;
            puVar20[3] = uVar4;
            puVar20[4] = uVar5;
            puVar20[5] = uVar6;
            puVar20[6] = uVar7;
            puVar20[7] = uVar8;
          }
          else {
            if (uVar24 <= uVar21) goto LAB_00102c3e;
LAB_00102d0a:
            uVar9 = *(undefined4 *)((long)puVar23 + -0x1c);
            uVar10 = *(undefined4 *)(puVar23 + -3);
            uVar11 = *(undefined4 *)((long)puVar23 + -0x14);
            *param_1 = *(undefined4 *)(puVar23 + -4);
            param_1[1] = uVar9;
            param_1[2] = uVar10;
            param_1[3] = uVar11;
            uVar9 = *(undefined4 *)((long)puVar23 + -0xc);
            uVar10 = *(undefined4 *)(puVar23 + -1);
            uVar11 = *(undefined4 *)((long)puVar23 + -4);
            param_1[4] = *(undefined4 *)(puVar23 + -2);
            param_1[5] = uVar9;
            param_1[6] = uVar10;
            param_1[7] = uVar11;
            *(undefined4 *)(puVar23 + -4) = uVar1;
            *(undefined4 *)((long)puVar23 + -0x1c) = uVar2;
            *(undefined4 *)(puVar23 + -3) = uVar3;
            *(undefined4 *)((long)puVar23 + -0x14) = uVar4;
            *(undefined4 *)(puVar23 + -2) = uVar5;
            *(undefined4 *)((long)puVar23 + -0xc) = uVar6;
            *(undefined4 *)(puVar23 + -1) = uVar7;
            *(undefined4 *)((long)puVar23 + -4) = uVar8;
          }
        }
        else {
          if (uVar24 <= uVar21) {
            if (uVar22 < uVar24) goto LAB_00102d0a;
            goto LAB_00102d5a;
          }
LAB_00102c3e:
          uVar9 = param_1[8];
          uVar10 = param_1[9];
          uVar11 = param_1[10];
          uVar12 = param_1[0xb];
          uVar13 = param_1[0xc];
          uVar14 = param_1[0xd];
          uVar15 = param_1[0xe];
          uVar16 = param_1[0xf];
          param_1[8] = uVar1;
          param_1[9] = uVar2;
          param_1[10] = uVar3;
          param_1[0xb] = uVar4;
          param_1[0xc] = uVar5;
          param_1[0xd] = uVar6;
          param_1[0xe] = uVar7;
          param_1[0xf] = uVar8;
          *param_1 = uVar9;
          param_1[1] = uVar10;
          param_1[2] = uVar11;
          param_1[3] = uVar12;
          param_1[4] = uVar13;
          param_1[5] = uVar14;
          param_1[6] = uVar15;
          param_1[7] = uVar16;
        }
        while( true ) {
          for (; CONCAT44(*(undefined4 *)((long)param_2 + 0x1c),*(undefined4 *)((long)param_2 + 0xc)
                         ) < CONCAT44(param_1[7],param_1[3]); param_2 = param_2 + 4) {
          }
          uVar21 = CONCAT44(*(undefined4 *)((long)puVar25 + -4),
                            *(undefined4 *)((long)puVar25 + -0x14));
          while (puVar18 = puVar25 + -4, CONCAT44(param_1[7],param_1[3]) < uVar21) {
            uVar21 = CONCAT44(*(undefined4 *)((long)puVar25 + -0x24),
                              *(undefined4 *)((long)puVar25 + -0x34));
            puVar25 = puVar18;
          }
          if (puVar18 <= param_2) break;
          uVar17 = puVar25[-3];
          uVar1 = *(undefined4 *)param_2;
          uVar2 = *(undefined4 *)((long)param_2 + 4);
          uVar3 = *(undefined4 *)(param_2 + 1);
          uVar4 = *(undefined4 *)((long)param_2 + 0xc);
          uVar5 = *(undefined4 *)(param_2 + 2);
          uVar6 = *(undefined4 *)((long)param_2 + 0x14);
          uVar7 = *(undefined4 *)(param_2 + 3);
          uVar8 = *(undefined4 *)((long)param_2 + 0x1c);
          *param_2 = *puVar18;
          param_2[1] = uVar17;
          uVar17 = puVar25[-1];
          param_2[2] = puVar25[-2];
          param_2[3] = uVar17;
          *(undefined4 *)puVar18 = uVar1;
          *(undefined4 *)((long)puVar25 + -0x1c) = uVar2;
          *(undefined4 *)(puVar25 + -3) = uVar3;
          *(undefined4 *)((long)puVar25 + -0x14) = uVar4;
          *(undefined4 *)(puVar25 + -2) = uVar5;
          *(undefined4 *)((long)puVar25 + -0xc) = uVar6;
          *(undefined4 *)(puVar25 + -1) = uVar7;
          *(undefined4 *)((long)puVar25 + -4) = uVar8;
          puVar25 = puVar18;
          param_2 = param_2 + 4;
        }
        __introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (param_2,puVar23,param_3);
        lVar19 = (long)param_2 - (long)param_1;
        if (lVar19 < 0x201) goto LAB_00102ddc;
        puVar23 = param_2;
      } while (param_3 != 0);
    }
    __heap_select<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(param_1,param_2,param_2);
    do {
      puVar26 = param_2 + -4;
      uVar1 = param_1[1];
      uVar2 = param_1[2];
      uVar3 = param_1[3];
      local_80 = *(undefined4 *)puVar26;
      uStack_7c = *(undefined4 *)((long)param_2 + -0x1c);
      uStack_78 = *(undefined4 *)(param_2 + -3);
      uStack_74 = *(undefined4 *)((long)param_2 + -0x14);
      local_70 = *(undefined4 *)(param_2 + -2);
      uStack_6c = *(undefined4 *)((long)param_2 + -0xc);
      uStack_68 = *(undefined4 *)(param_2 + -1);
      uStack_64 = *(undefined4 *)((long)param_2 + -4);
      *(undefined4 *)puVar26 = *param_1;
      *(undefined4 *)((long)param_2 + -0x1c) = uVar1;
      *(undefined4 *)(param_2 + -3) = uVar2;
      *(undefined4 *)((long)param_2 + -0x14) = uVar3;
      uVar1 = param_1[5];
      uVar2 = param_1[6];
      uVar3 = param_1[7];
      *(undefined4 *)(param_2 + -2) = param_1[4];
      *(undefined4 *)((long)param_2 + -0xc) = uVar1;
      *(undefined4 *)(param_2 + -1) = uVar2;
      *(undefined4 *)((long)param_2 + -4) = uVar3;
      __adjust_heap<embree::PrimRef*,long,embree::PrimRef,__gnu_cxx::__ops::_Iter_less_iter>
                (param_1,0,(long)puVar26 - (long)param_1 >> 5,&local_80);
      param_2 = puVar26;
    } while (0x20 < (long)puVar26 - (long)param_1);
  }
LAB_00102ddc:
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&) [clone .isra.0] */

void embree::sse2::
     HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
     moveExtentedRange(PrimInfoExtRange *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3
                      )

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  TaskScheduler *pTVar7;
  ulong uVar8;
  ulong uVar9;
  long in_FS_OFFSET;
  ulong local_a8;
  ulong local_a0;
  long local_98;
  long local_90;
  long local_88;
  long lStack_80;
  undefined8 local_78;
  PrimInfoExtRange *pPStack_70;
  ulong *local_68;
  TaskGroupContext *pTStack_60;
  long local_58;
  long lStack_50;
  undefined8 local_48;
  PrimInfoExtRange *pPStack_40;
  undefined1 *local_38;
  TaskGroupContext *pTStack_30;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  lVar5 = *(long *)(param_3 + 0x40);
  uVar8 = *(long *)(param_2 + 0x50) - *(long *)(param_2 + 0x48);
  uVar9 = *(long *)(param_3 + 0x48) - lVar5;
  local_a8 = uVar8;
  local_a0 = uVar9;
  if (uVar8 != 0) {
    if (uVar8 < uVar9) {
      local_88 = uVar8 + lVar5;
      local_68 = &local_a0;
      local_98 = 0;
      local_78 = 0x40;
      lStack_80 = lVar5;
      pPStack_70 = param_1;
      pTStack_60 = (TaskGroupContext *)&local_98;
      lVar5 = embree::TaskScheduler::thread();
      if (lVar5 == 0) {
        pTVar7 = (TaskScheduler *)embree::TaskScheduler::instance();
        TaskScheduler::
        spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                  (pTVar7,(_lambda___1_ *)&local_88,(TaskGroupContext *)&local_98,uVar8,true);
      }
      else {
        if (0xfff < *(ulong *)(lVar5 + 0x40080)) {

          embree_sse2_HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>_moveExtentedRange
          :
                    /* WARNING: Subroutine does not return */
          abort();
        }
        lVar3 = *(long *)(lVar5 + 0xc00c0);
        uVar9 = lVar3 + 0x38 + (ulong)(-(int)lVar3 & 0x3f);
        if (0x80000 < uVar9)
        goto 
        embree_sse2_HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>_moveExtentedRange
        ;
        *(ulong *)(lVar5 + 0xc00c0) = uVar9;
        puVar2 = (undefined8 *)(lVar5 + 0x40088 + uVar9);
        *puVar2 = &PTR_execute_0013f178;
        puVar2[1] = local_88;
        puVar2[2] = lStack_80;
        puVar2[3] = local_78;
        puVar2[4] = pPStack_70;
        puVar2[5] = local_68;
        puVar2[6] = pTStack_60;
        lVar6 = *(long *)(lVar5 + 0x40080) * 0x40;
        piVar1 = (int *)(lVar5 + 0x40 + lVar6);
        lVar4 = *(long *)(lVar5 + 0xc0100);
        *(undefined4 *)(lVar5 + 0x44 + lVar6) = 1;
        *(undefined1 *)(lVar5 + 0x48 + lVar6) = 1;
        lVar6 = lVar6 + lVar5;
        *(undefined8 **)(lVar6 + 0x50) = puVar2;
        *(long *)(lVar6 + 0x58) = lVar4;
        *(TaskGroupContext **)(lVar6 + 0x60) = (TaskGroupContext *)&local_98;
        *(long *)(lVar6 + 0x68) = lVar3;
        *(ulong *)(lVar6 + 0x70) = uVar8;
        if (lVar4 != 0) {
          LOCK();
          *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
          UNLOCK();
        }
        LOCK();
        if (*piVar1 == 0) {
          *piVar1 = 1;
        }
        UNLOCK();
        LOCK();
        *(long *)(lVar5 + 0x40080) = *(long *)(lVar5 + 0x40080) + 1;
        UNLOCK();
        if (*(long *)(lVar5 + 0x40080) - 1U <= *(ulong *)(lVar5 + 0x40040)) {
          LOCK();
          *(long *)(lVar5 + 0x40040) = *(long *)(lVar5 + 0x40080) + -1;
          UNLOCK();
        }
      }
      embree::TaskScheduler::wait();
      if (local_98 != 0) {
        local_58 = local_98;
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception(&local_58);
      }
    }
    else {
      local_90 = 0;
      local_48 = 0x40;
      local_58 = *(long *)(param_3 + 0x48);
      lStack_50 = lVar5;
      pPStack_40 = param_1;
      local_38 = (undefined1 *)&local_a8;
      pTStack_30 = (TaskGroupContext *)&local_90;
      lVar5 = embree::TaskScheduler::thread();
      if (lVar5 == 0) {
        pTVar7 = (TaskScheduler *)embree::TaskScheduler::instance();
        TaskScheduler::
        spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                  (pTVar7,(_lambda___1_ *)&local_58,(TaskGroupContext *)&local_90,uVar9,true);
      }
      else {
        if (0xfff < *(ulong *)(lVar5 + 0x40080))
        goto 
        embree_sse2_HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>_moveExtentedRange
        ;
        lVar3 = *(long *)(lVar5 + 0xc00c0);
        uVar8 = lVar3 + 0x38 + (ulong)(-(int)lVar3 & 0x3f);
        if (0x80000 < uVar8)
        goto 
        embree_sse2_HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>_moveExtentedRange
        ;
        *(ulong *)(lVar5 + 0xc00c0) = uVar8;
        puVar2 = (undefined8 *)(lVar5 + 0x40088 + uVar8);
        *puVar2 = &PTR_execute_0013f190;
        puVar2[1] = local_58;
        puVar2[2] = lStack_50;
        puVar2[3] = local_48;
        puVar2[4] = pPStack_40;
        puVar2[5] = local_38;
        puVar2[6] = pTStack_30;
        lVar6 = *(long *)(lVar5 + 0x40080) * 0x40;
        piVar1 = (int *)(lVar5 + 0x40 + lVar6);
        lVar4 = *(long *)(lVar5 + 0xc0100);
        *(undefined4 *)(lVar5 + 0x44 + lVar6) = 1;
        *(undefined1 *)(lVar5 + 0x48 + lVar6) = 1;
        lVar6 = lVar6 + lVar5;
        *(undefined8 **)(lVar6 + 0x50) = puVar2;
        *(long *)(lVar6 + 0x58) = lVar4;
        *(TaskGroupContext **)(lVar6 + 0x60) = (TaskGroupContext *)&local_90;
        *(long *)(lVar6 + 0x68) = lVar3;
        *(ulong *)(lVar6 + 0x70) = uVar9;
        if (lVar4 != 0) {
          LOCK();
          *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
          UNLOCK();
        }
        LOCK();
        if (*piVar1 == 0) {
          *piVar1 = 1;
        }
        UNLOCK();
        LOCK();
        *(long *)(lVar5 + 0x40080) = *(long *)(lVar5 + 0x40080) + 1;
        UNLOCK();
        if (*(long *)(lVar5 + 0x40080) - 1U <= *(ulong *)(lVar5 + 0x40040)) {
          LOCK();
          *(long *)(lVar5 + 0x40040) = *(long *)(lVar5 + 0x40080) + -1;
          UNLOCK();
        }
      }
      embree::TaskScheduler::wait();
      if (local_90 != 0) {
        local_58 = local_90;
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception(&local_58);
      }
    }
    *(ulong *)(param_3 + 0x40) = *(long *)(param_3 + 0x40) + local_a8;
    *(ulong *)(param_3 + 0x48) = *(long *)(param_3 + 0x48) + local_a8;
    *(ulong *)(param_3 + 0x50) = *(long *)(param_3 + 0x50) + local_a8;
  }
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* embree::Builder::deleteGeometry(unsigned long) */

void embree::Builder::deleteGeometry(ulong param_1)

{
  return;
}



/* bool embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned
   int>::compare<embree::sse2::PresplitItem>(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&) */

bool embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
     compare<embree::sse2::PresplitItem>(PresplitItem *param_1,PresplitItem *param_2)

{
  return *(uint *)param_1 < *(uint *)param_2;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::clear() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::clear(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  long lVar1;
  void *pvVar2;
  
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  *(undefined8 *)(this + 0x48) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x38) = 0;
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::clear() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::clear(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  long lVar1;
  void *pvVar2;
  
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  *(undefined8 *)(this + 0x48) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x38) = 0;
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0013f5e8;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 == 0) {
    return;
  }
                    /* WARNING: Could not recover jumptable at 0x00103361. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0013f5a0;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 == 0) {
    return;
  }
                    /* WARNING: Could not recover jumptable at 0x001033e1. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0013f558;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 == 0) {
    return;
  }
                    /* WARNING: Could not recover jumptable at 0x00103461. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::clear() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::clear(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  long lVar1;
  void *pvVar2;
  
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  *(undefined8 *)(this + 0x48) = 0;
  *(undefined8 *)(this + 0x40) = 0;
  *(undefined8 *)(this + 0x38) = 0;
  return;
}



/* embree::Scene::BuildProgressMonitorInterface::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::Scene::BuildProgressMonitorInterface::operator()
          (BuildProgressMonitorInterface *this,ulong param_1)

{
  if (-1 < (long)param_1) {
    embree::Scene::progressMonitor((double)(long)param_1);
    return;
  }
  embree::Scene::progressMonitor((double)param_1);
  return;
}



/* embree::RefCount::refInc() */

RefCount * __thiscall embree::RefCount::refInc(RefCount *this)

{
  LOCK();
  *(long *)(this + 8) = *(long *)(this + 8) + 1;
  UNLOCK();
  return this;
}



/* embree::RefCount::refDec() */

void __thiscall embree::RefCount::refDec(RefCount *this)

{
  RefCount *pRVar1;
  
  LOCK();
  pRVar1 = this + 8;
  *(long *)pRVar1 = *(long *)pRVar1 + -1;
  UNLOCK();
  if ((this != (RefCount *)0x0) && (*(long *)pRVar1 == 0)) {
                    /* WARNING: Could not recover jumptable at 0x00103579. Too many branches */
                    /* WARNING: Treating indirect jump as call */
    (**(code **)(*(long *)this + 8))();
    return;
  }
  return;
}



/* embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration1(unsigned
   int, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned long, unsigned
   long) [clone .isra.0] */

void embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration1
               (uint param_1,PresplitItem *param_2,PresplitItem *param_3,ulong param_4,ulong param_5
               )

{
  undefined8 uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  ulong uVar8;
  long lVar9;
  uint *puVar10;
  uint *puVar11;
  uint *puVar12;
  long lVar13;
  uint uVar14;
  undefined4 in_register_0000003c;
  long lVar15;
  ulong uVar16;
  ulong in_R9;
  long lVar17;
  int *piVar18;
  int *piVar19;
  long in_FS_OFFSET;
  ulong in_stack_00000008;
  undefined8 local_888;
  uint local_880 [526];
  long local_48;
  
  lVar15 = CONCAT44(in_register_0000003c,param_1);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  uVar8 = (in_R9 * (long)param_2) / in_stack_00000008;
  puVar10 = local_880;
  for (lVar13 = 0x80; lVar13 != 0; lVar13 = lVar13 + -1) {
    puVar10[0] = 0;
    puVar10[1] = 0;
    puVar10 = puVar10 + 2;
  }
  if (in_stack_00000008 != 0) {
    uVar16 = 0;
    if (2 < in_stack_00000008) {
      lVar17 = 0x400;
      uVar16 = 0;
      local_888 = (in_stack_00000008 - 3 >> 1) * 0x800 + 0xc00;
      lVar13 = lVar15;
      do {
        lVar9 = 0;
        puVar10 = local_880;
        do {
          piVar19 = (int *)(lVar13 + lVar9 * 4);
          iVar2 = piVar19[1];
          iVar3 = piVar19[2];
          iVar4 = piVar19[3];
          piVar18 = (int *)(lVar13 + 0x400 + lVar9 * 4);
          iVar5 = piVar18[1];
          iVar6 = piVar18[2];
          iVar7 = piVar18[3];
          lVar9 = lVar9 + 4;
          *puVar10 = *puVar10 + *piVar19 + *piVar18;
          puVar10[1] = puVar10[1] + iVar2 + iVar5;
          puVar10[2] = puVar10[2] + iVar3 + iVar6;
          puVar10[3] = puVar10[3] + iVar4 + iVar7;
          puVar10 = puVar10 + 4;
        } while (lVar9 != 0x100);
        lVar17 = lVar17 + 0x800;
        uVar16 = uVar16 + 2;
        lVar13 = lVar13 + 0x800;
      } while (lVar17 != local_888);
    }
    piVar18 = (int *)(uVar16 * 0x400 + lVar15);
    puVar10 = local_880;
    piVar19 = piVar18;
    do {
      do {
        iVar2 = *piVar18;
        iVar3 = piVar18[1];
        iVar4 = piVar18[2];
        iVar5 = piVar18[3];
        puVar11 = puVar10 + 4;
        piVar18 = piVar18 + 4;
        *puVar10 = iVar2 + *puVar10;
        puVar10[1] = iVar3 + puVar10[1];
        puVar10[2] = iVar4 + puVar10[2];
        puVar10[3] = iVar5 + puVar10[3];
        puVar10 = puVar11;
      } while (puVar11 != local_880 + 0x100);
      uVar16 = uVar16 + 1;
      piVar18 = piVar19 + 0x100;
      puVar10 = local_880;
      piVar19 = piVar18;
    } while (uVar16 < in_stack_00000008);
  }
  puVar10 = local_880 + 0x100;
  local_880[0x100] = 0;
  uVar14 = 0;
  lVar13 = 1;
  do {
    uVar14 = uVar14 + *(int *)((long)&local_888 + lVar13 * 4 + 4);
    puVar10[lVar13] = uVar14;
    lVar13 = lVar13 + 1;
  } while (lVar13 != 0x100);
  if (in_R9 != 0) {
    uVar16 = 0;
    if (2 < in_R9) {
      lVar17 = 0x400;
      uVar16 = 0;
      lVar13 = lVar15;
      do {
        lVar9 = 0;
        puVar11 = puVar10;
        do {
          piVar19 = (int *)(lVar13 + lVar9 * 4);
          iVar2 = piVar19[1];
          iVar3 = piVar19[2];
          iVar4 = piVar19[3];
          piVar18 = (int *)(lVar13 + 0x400 + lVar9 * 4);
          iVar5 = piVar18[1];
          iVar6 = piVar18[2];
          iVar7 = piVar18[3];
          lVar9 = lVar9 + 4;
          *puVar11 = *puVar11 + *piVar19 + *piVar18;
          puVar11[1] = puVar11[1] + iVar2 + iVar5;
          puVar11[2] = puVar11[2] + iVar3 + iVar6;
          puVar11[3] = puVar11[3] + iVar4 + iVar7;
          puVar11 = puVar11 + 4;
        } while (lVar9 != 0x100);
        lVar17 = lVar17 + 0x800;
        uVar16 = uVar16 + 2;
        lVar13 = lVar13 + 0x800;
      } while (lVar17 != (in_R9 - 3 >> 1) * 0x800 + 0xc00);
    }
    piVar18 = (int *)(lVar15 + uVar16 * 0x400);
    puVar11 = puVar10;
    piVar19 = piVar18;
    do {
      do {
        iVar2 = *piVar18;
        iVar3 = piVar18[1];
        iVar4 = piVar18[2];
        iVar5 = piVar18[3];
        puVar12 = puVar11 + 4;
        piVar18 = piVar18 + 4;
        *puVar11 = iVar2 + *puVar11;
        puVar11[1] = iVar3 + puVar11[1];
        puVar11[2] = iVar4 + puVar11[2];
        puVar11[3] = iVar5 + puVar11[3];
        puVar11 = puVar12;
      } while (puVar12 != local_880 + 0x200);
      uVar16 = uVar16 + 1;
      piVar18 = piVar19 + 0x100;
      puVar11 = puVar10;
      piVar19 = piVar18;
    } while (uVar16 < in_R9);
  }
  if (uVar8 < (ulong)(param_2 + in_R9 * (long)param_2) / in_stack_00000008) {
    puVar10 = (uint *)(param_4 + uVar8 * 8);
    do {
      uVar14 = *puVar10;
      uVar1 = *(undefined8 *)puVar10;
      puVar10 = puVar10 + 2;
      uVar8 = (ulong)(byte)(uVar14 >> ((byte)param_3 & 0x3f));
      uVar14 = local_880[uVar8 + 0x100];
      *(undefined8 *)(param_5 + (ulong)uVar14 * 8) = uVar1;
      local_880[uVar8 + 0x100] = uVar14 + 1;
    } while ((uint *)(param_4 + ((ulong)(param_2 + in_R9 * (long)param_2) / in_stack_00000008) * 8)
             != puVar10);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::sequential_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&) [clone .isra.0] */

undefined1  [16] __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
sequential_spatial_split
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,SpatialBinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  undefined1 auVar1 [16];
  undefined1 auVar2 [16];
  int iVar3;
  long lVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  long lVar8;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar9;
  long lVar10;
  int iVar11;
  ulong uVar12;
  ulong uVar13;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar14
  ;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar15
  ;
  long lVar16;
  int unaff_R12D;
  undefined1 auVar17 [16];
  undefined1 auVar18 [16];
  uint uVar19;
  undefined4 uVar20;
  uint uVar22;
  undefined4 uVar23;
  uint uVar24;
  undefined4 uVar25;
  uint uVar26;
  undefined1 auVar21 [16];
  undefined4 uVar27;
  undefined1 auVar28 [16];
  undefined1 auVar29 [16];
  uint uVar30;
  uint uVar32;
  uint uVar33;
  uint uVar34;
  undefined1 auVar31 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  uint local_88;
  uint uStack_84;
  uint uStack_80;
  uint uStack_7c;
  
  uVar12 = (ulong)*(uint *)(param_1 + 4);
  auVar37._0_8_ = CONCAT44(_LC1,_LC1);
  auVar37._8_4_ = _LC1;
  auVar37._12_4_ = _LC1;
  iVar3 = *(int *)(param_1 + 8);
  lVar4 = *(long *)(param_2 + 0x48);
  auVar36._0_8_ = CONCAT44(_LC3,_LC3);
  auVar36._8_4_ = _LC3;
  auVar36._12_4_ = _LC3;
  lVar16 = 0;
  lVar10 = *(long *)(param_2 + 0x40);
  auVar39._8_4_ = _LC3;
  auVar39._0_8_ = auVar36._0_8_;
  auVar39._12_4_ = _LC3;
  auVar17._8_4_ = _LC1;
  auVar17._0_8_ = auVar37._0_8_;
  auVar17._12_4_ = _LC1;
  auVar40._8_4_ = _LC3;
  auVar40._0_8_ = auVar36._0_8_;
  auVar40._12_4_ = _LC3;
  auVar38._8_4_ = _LC3;
  auVar38._0_8_ = auVar36._0_8_;
  auVar38._12_4_ = _LC3;
  lVar8 = (long)(1 << ((byte)*(uint *)(param_1 + 4) & 0x1f));
  uVar5 = (&mm_lookupmask_ps)[lVar8 * 2];
  uVar6 = *(undefined8 *)(operator_delete + lVar8 * 0x10);
  pHVar15 = this + lVar4 * 0x20 + -0x20;
  auVar18._8_4_ = _LC1;
  auVar18._0_8_ = auVar37._0_8_;
  auVar18._12_4_ = _LC1;
  pHVar9 = this + lVar10 * 0x20;
  lVar8 = 0;
  uVar20 = _LC1;
  uVar23 = _LC1;
  uVar25 = _LC1;
  uVar27 = _LC1;
  do {
    if (pHVar15 < pHVar9) {
LAB_0010397a:
      *(long *)(param_3 + 0x40) = lVar10;
      lVar10 = (long)pHVar9 - (long)this >> 5;
      *(int *)param_3 = auVar39._0_4_;
      *(int *)(param_3 + 4) = auVar39._4_4_;
      *(int *)(param_3 + 8) = auVar39._8_4_;
      *(int *)(param_3 + 0xc) = auVar39._12_4_;
      *(long *)(param_3 + 0x48) = lVar10;
      *(long *)(param_3 + 0x50) = lVar10;
      *(undefined1 (*) [16])(param_3 + 0x10) = auVar18;
      *(undefined1 (*) [16])(param_3 + 0x20) = auVar40;
      *(undefined1 (*) [16])(param_3 + 0x30) = auVar17;
      *(long *)(param_4 + 0x40) = lVar10;
      *(long *)(param_4 + 0x48) = lVar4;
      *(long *)(param_4 + 0x50) = lVar4;
      *(undefined1 (*) [16])param_4 = auVar38;
      *(undefined4 *)(param_4 + 0x10) = uVar20;
      *(undefined4 *)(param_4 + 0x14) = uVar23;
      *(undefined4 *)(param_4 + 0x18) = uVar25;
      *(undefined4 *)(param_4 + 0x1c) = uVar27;
      *(undefined1 (*) [16])(param_4 + 0x20) = auVar36;
      *(undefined1 (*) [16])(param_4 + 0x30) = auVar37;
      auVar41._8_8_ = lVar16;
      auVar41._0_8_ = lVar8;
      return auVar41;
    }
    auVar41 = *(undefined1 (*) [16])(pHVar9 + 0x10);
    auVar1 = *(undefined1 (*) [16])pHVar9;
    auVar28._0_4_ = auVar41._0_4_ + auVar1._0_4_;
    auVar28._4_4_ = auVar41._4_4_ + auVar1._4_4_;
    auVar28._8_4_ = auVar41._8_4_ + auVar1._8_4_;
    auVar28._12_4_ = auVar41._12_4_ + auVar1._12_4_;
    uVar19 = (uint)((_LC14 * auVar28._0_4_ - *(float *)(param_1 + 0x20)) *
                    *(float *)(param_1 + 0x30) + _LC16);
    uVar22 = (uint)((_UNK_0013f664 * auVar28._4_4_ - *(float *)(param_1 + 0x24)) *
                    *(float *)(param_1 + 0x34) + _UNK_0013f674);
    uVar24 = (uint)((_UNK_0013f668 * auVar28._8_4_ - *(float *)(param_1 + 0x28)) *
                    *(float *)(param_1 + 0x38) + _UNK_0013f678);
    uVar26 = (uint)((_UNK_0013f66c * auVar28._12_4_ - *(float *)(param_1 + 0x2c)) *
                    *(float *)(param_1 + 0x3c) + _UNK_0013f67c);
    uVar30 = -(uint)((int)uVar19 < (int)__LC18);
    uVar32 = -(uint)((int)uVar22 < (int)_UNK_0013f684);
    uVar33 = -(uint)((int)uVar24 < (int)_UNK_0013f688);
    uVar34 = -(uint)((int)uVar26 < (int)_UNK_0013f68c);
    uVar19 = uVar30 & uVar19 | ~uVar30 & __LC18;
    uVar22 = uVar32 & uVar22 | ~uVar32 & _UNK_0013f684;
    uVar24 = uVar33 & uVar24 | ~uVar33 & _UNK_0013f688;
    uVar26 = uVar34 & uVar26 | ~uVar34 & _UNK_0013f68c;
    local_88 = (uint)uVar5;
    uStack_84 = (uint)((ulong)uVar5 >> 0x20);
    uStack_80 = (uint)uVar6;
    uStack_7c = (uint)((ulong)uVar6 >> 0x20);
    auVar21._0_4_ = -(uint)((int)(~-(uint)((int)uVar19 < 0) & uVar19) < iVar3) & local_88;
    auVar21._4_4_ = -(uint)((int)(~-(uint)((int)uVar22 < 0) & uVar22) < iVar3) & uStack_84;
    auVar21._8_4_ = -(uint)((int)(~-(uint)((int)uVar24 < 0) & uVar24) < iVar3) & uStack_80;
    auVar21._12_4_ = -(uint)((int)(~-(uint)((int)uVar26 < 0) & uVar26) < iVar3) & uStack_7c;
    iVar11 = movmskps((int)uVar12,auVar21);
    if (iVar11 == 0) {
      auVar35._4_4_ = uVar23;
      auVar35._0_4_ = uVar20;
      auVar35._8_4_ = uVar25;
      auVar35._12_4_ = uVar27;
      pHVar14 = pHVar15;
      while( true ) {
        auVar21 = *(undefined1 (*) [16])(pHVar14 + 0x10);
        auVar2 = *(undefined1 (*) [16])pHVar14;
        pHVar15 = pHVar14 + -0x20;
        auVar31._0_4_ = auVar21._0_4_ + auVar2._0_4_;
        auVar31._4_4_ = auVar21._4_4_ + auVar2._4_4_;
        auVar31._8_4_ = auVar21._8_4_ + auVar2._8_4_;
        auVar31._12_4_ = auVar21._12_4_ + auVar2._12_4_;
        uVar13 = (ulong)(*(uint *)(pHVar14 + 0xc) >> 0x1b);
        uVar19 = (uint)((_LC14 * auVar31._0_4_ - *(float *)(param_1 + 0x20)) *
                        *(float *)(param_1 + 0x30) + _LC16);
        uVar22 = (uint)((_UNK_0013f664 * auVar31._4_4_ - *(float *)(param_1 + 0x24)) *
                        *(float *)(param_1 + 0x34) + _UNK_0013f674);
        uVar24 = (uint)((_UNK_0013f668 * auVar31._8_4_ - *(float *)(param_1 + 0x28)) *
                        *(float *)(param_1 + 0x38) + _UNK_0013f678);
        uVar26 = (uint)((_UNK_0013f66c * auVar31._12_4_ - *(float *)(param_1 + 0x2c)) *
                        *(float *)(param_1 + 0x3c) + _UNK_0013f67c);
        uVar30 = -(uint)((int)uVar19 < (int)__LC18);
        uVar32 = -(uint)((int)uVar22 < (int)_UNK_0013f684);
        uVar33 = -(uint)((int)uVar24 < (int)_UNK_0013f688);
        uVar34 = -(uint)((int)uVar26 < (int)_UNK_0013f68c);
        uVar19 = uVar30 & uVar19 | ~uVar30 & __LC18;
        uVar22 = uVar32 & uVar22 | ~uVar32 & _UNK_0013f684;
        uVar24 = uVar33 & uVar24 | ~uVar33 & _UNK_0013f688;
        uVar26 = uVar34 & uVar26 | ~uVar34 & _UNK_0013f68c;
        auVar29._0_4_ = -(uint)((int)(~-(uint)((int)uVar19 < 0) & uVar19) < iVar3) & local_88;
        auVar29._4_4_ = -(uint)((int)(~-(uint)((int)uVar22 < 0) & uVar22) < iVar3) & uStack_84;
        auVar29._8_4_ = -(uint)((int)(~-(uint)((int)uVar24 < 0) & uVar24) < iVar3) & uStack_80;
        auVar29._12_4_ = -(uint)((int)(~-(uint)((int)uVar26 < 0) & uVar26) < iVar3) & uStack_7c;
        unaff_R12D = movmskps(unaff_R12D,auVar29);
        if (unaff_R12D != 0) break;
        auVar38 = minps(auVar38,auVar2);
        auVar35 = maxps(auVar35,auVar21);
        lVar16 = lVar16 + uVar13;
        auVar36 = minps(auVar36,auVar31);
        auVar37 = maxps(auVar37,auVar31);
        pHVar14 = pHVar15;
        if (pHVar15 < pHVar9) {
          uVar20 = auVar35._0_4_;
          uVar23 = auVar35._4_4_;
          uVar25 = auVar35._8_4_;
          uVar27 = auVar35._12_4_;
          goto LAB_0010397a;
        }
      }
      *(undefined1 (*) [16])pHVar9 = auVar2;
      auVar18 = maxps(auVar18,auVar21);
      auVar40 = minps(auVar40,auVar31);
      auVar21 = maxps(auVar35,auVar41);
      uVar12 = (ulong)(*(uint *)(pHVar9 + 0xc) >> 0x1b);
      auVar38 = minps(auVar38,auVar1);
      lVar16 = lVar16 + uVar12;
      auVar17 = maxps(auVar17,auVar31);
      auVar36 = minps(auVar36,auVar28);
      auVar39 = minps(auVar39,auVar2);
      uVar7 = *(undefined8 *)(pHVar14 + 0x18);
      auVar37 = maxps(auVar37,auVar28);
      uVar20 = auVar21._0_4_;
      uVar23 = auVar21._4_4_;
      uVar25 = auVar21._8_4_;
      uVar27 = auVar21._12_4_;
      *(undefined8 *)(pHVar9 + 0x10) = *(undefined8 *)(pHVar14 + 0x10);
      *(undefined8 *)(pHVar9 + 0x18) = uVar7;
      *(undefined1 (*) [16])pHVar14 = auVar1;
      *(undefined1 (*) [16])(pHVar14 + 0x10) = auVar41;
    }
    else {
      auVar39 = minps(auVar39,auVar1);
      auVar18 = maxps(auVar18,auVar41);
      auVar40 = minps(auVar40,auVar28);
      auVar17 = maxps(auVar17,auVar28);
      uVar12 = (ulong)(*(uint *)(pHVar9 + 0xc) >> 0x1b);
      uVar13 = uVar12;
    }
    lVar8 = lVar8 + uVar13;
    pHVar9 = pHVar9 + 0x20;
  } while( true );
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0013f5e8;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  operator_delete(this,0xa0);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0013f5a0;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  operator_delete(this,0xa0);
  return;
}



/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
  long lVar1;
  void *pvVar2;
  
  *(undefined ***)this = &PTR__BVHNBuilderFastSpatialSAH_0013f558;
  lVar1 = *(long *)(this + 0x40);
  pvVar2 = *(void **)(this + 0x48);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x30]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar1 * -0x20,1);
  }
  operator_delete(this,0xa0);
  return;
}



/* embree::FastAllocator::internal_fix_used_blocks() */

void __thiscall embree::FastAllocator::internal_fix_used_blocks(FastAllocator *this)

{
  FastAllocator *pFVar1;
  long lVar2;
  FastAllocator *pFVar3;
  
  pFVar3 = this + 0xb8;
  pFVar1 = this + 0xf8;
  do {
    while (*(long *)pFVar3 != 0) {
      lVar2 = *(long *)(*(long *)pFVar3 + 0x18);
      *(long *)(*(long *)pFVar3 + 0x18) = *(long *)pFVar1;
      LOCK();
      *(long *)pFVar1 = *(long *)pFVar3;
      UNLOCK();
      LOCK();
      *(long *)pFVar3 = lVar2;
      UNLOCK();
    }
    LOCK();
    *(long *)pFVar3 = 0;
    UNLOCK();
    pFVar3 = pFVar3 + 8;
  } while (pFVar3 != pFVar1);
  return;
}



/* embree::FastAllocator::fixSingleThreadThreshold(unsigned long, unsigned long, unsigned long,
   unsigned long) */

ulong __thiscall
embree::FastAllocator::fixSingleThreadThreshold
          (FastAllocator *this,ulong param_1,ulong param_2,ulong param_3,ulong param_4)

{
  FastAllocator FVar1;
  ulong uVar2;
  ulong uVar3;
  double dVar4;
  
  if ((param_3 != 0) && (param_4 != 0)) {
    FVar1 = this[0x10a];
    uVar2 = embree::TaskScheduler::threadCount();
    uVar3 = *(long *)(this + 0x10) * (2 - (ulong)(byte)FVar1) * 0x14;
    if (((param_4 - 1) + uVar3) / uVar3 < uVar2) {
      uVar3 = uVar3 * param_1;
      if ((long)uVar3 < 0) {
        dVar4 = (double)(uVar3 >> 1) + (double)(uVar3 >> 1);
      }
      else {
        dVar4 = (double)(long)uVar3;
      }
      dVar4 = dVar4 / ((double)param_4 / (double)param_3);
      if ((double)((ulong)dVar4 & _LC37) < _LC33) {
        dVar4 = (double)((ulong)((double)(long)dVar4 +
                                (double)(-(ulong)((double)(long)dVar4 < dVar4) & _LC35)) |
                        ~_LC37 & (ulong)dVar4);
      }
      if (dVar4 < _LC36) {
        return (long)dVar4;
      }
      return (long)(dVar4 - _LC36) ^ 0x8000000000000000;
    }
  }
  return param_2;
}



/* embree::FastAllocator::init_estimate(unsigned long) */

void __thiscall embree::FastAllocator::init_estimate(FastAllocator *this,ulong param_1)

{
  FastAllocator *pFVar1;
  long *plVar2;
  ulong *puVar3;
  long *plVar4;
  FastAllocator *pFVar5;
  ulong uVar6;
  long lVar7;
  FastAllocator *pFVar8;
  ulong uVar9;
  ulong uVar10;
  long *plVar11;
  long in_FS_OFFSET;
  long local_48;
  long local_40;
  
  pFVar1 = this + 0xb8;
  pFVar8 = this + 0xf8;
  plVar11 = &local_48;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pFVar5 = pFVar1;
  do {
    while (*(long *)pFVar5 != 0) {
      lVar7 = *(long *)(*(long *)pFVar5 + 0x18);
      *(long *)(*(long *)pFVar5 + 0x18) = *(long *)pFVar8;
      LOCK();
      *(long *)pFVar8 = *(long *)pFVar5;
      UNLOCK();
      LOCK();
      *(long *)pFVar5 = lVar7;
      UNLOCK();
    }
    LOCK();
    *(long *)pFVar5 = 0;
    UNLOCK();
    pFVar5 = pFVar5 + 8;
  } while (pFVar5 != pFVar8);
  pFVar5 = pFVar1;
  if ((*(long *)(this + 0xf8) != 0) || (*(long *)(this + 0x100) != 0)) {
    do {
      while (*(long *)pFVar5 != 0) {
        lVar7 = *(long *)(*(long *)pFVar5 + 0x18);
        *(long *)(*(long *)pFVar5 + 0x18) = *(long *)pFVar8;
        LOCK();
        *(long *)pFVar8 = *(long *)pFVar5;
        UNLOCK();
        LOCK();
        *(long *)pFVar5 = lVar7;
        UNLOCK();
      }
      LOCK();
      *(long *)pFVar5 = 0;
      UNLOCK();
      pFVar5 = pFVar5 + 8;
    } while (pFVar5 != pFVar8);
    LOCK();
    *(undefined8 *)(this + 0x118) = 0;
    UNLOCK();
    LOCK();
    *(undefined8 *)(this + 0x120) = 0;
    UNLOCK();
    LOCK();
    *(undefined8 *)(this + 0x128) = 0;
    UNLOCK();
    pFVar5 = this + 0x100;
    while (*(long *)pFVar8 != 0) {
      puVar3 = *(ulong **)pFVar8;
      uVar6 = *puVar3;
      if (*puVar3 < puVar3[1]) {
        uVar6 = puVar3[1];
      }
      LOCK();
      puVar3[1] = uVar6;
      UNLOCK();
      LOCK();
      *puVar3 = 0;
      UNLOCK();
      lVar7 = *(long *)(*(long *)pFVar8 + 0x18);
      *(long *)(*(long *)pFVar8 + 0x18) = *(long *)pFVar5;
      LOCK();
      *(long *)pFVar5 = *(long *)pFVar8;
      UNLOCK();
      LOCK();
      *(long *)pFVar8 = lVar7;
      UNLOCK();
    }
    lVar7 = *(long *)(this + 0x100);
    local_48 = lVar7;
    for (; lVar7 != 0; lVar7 = *(long *)(lVar7 + 0x18)) {
      while (*(int *)(lVar7 + 0x28) == 2) {
        lVar7 = *(long *)(lVar7 + 0x18);
        *plVar11 = lVar7;
        if (lVar7 == 0) goto LAB_0010416b;
      }
      plVar11 = (long *)(lVar7 + 0x18);
    }
LAB_0010416b:
    LOCK();
    *(long *)pFVar5 = local_48;
    UNLOCK();
    pFVar8 = this + 0x78;
    do {
      LOCK();
      *(long *)pFVar8 = 0;
      UNLOCK();
      LOCK();
      *(long *)(pFVar8 + 0x40) = 0;
      UNLOCK();
      pFVar8 = pFVar8 + 8;
    } while (pFVar8 != pFVar1);
    plVar11 = *(long **)(this + 0x130);
    plVar4 = *(long **)(this + 0x138);
    if (plVar11 != plVar4) {
      do {
        while( true ) {
          lVar7 = *plVar11;
          if (this != *(FastAllocator **)(lVar7 + 8)) break;
          embree::MutexSys::lock();
          if (this == *(FastAllocator **)(lVar7 + 8)) {
            LOCK();
            plVar2 = (long *)(*(long *)(lVar7 + 8) + 0x118);
            *plVar2 = *plVar2 + *(long *)(lVar7 + 0xa8) + *(long *)(lVar7 + 0x68);
            UNLOCK();
            LOCK();
            plVar2 = (long *)(*(long *)(lVar7 + 8) + 0x120);
            *plVar2 = *plVar2 + (((*(long *)(lVar7 + 0x98) + *(long *)(lVar7 + 0x58)) -
                                 *(long *)(lVar7 + 0x50)) - *(long *)(lVar7 + 0x90));
            UNLOCK();
            LOCK();
            plVar2 = (long *)(*(long *)(lVar7 + 8) + 0x128);
            *plVar2 = *plVar2 + *(long *)(lVar7 + 0xb0) + *(long *)(lVar7 + 0x70);
            UNLOCK();
            *(undefined8 *)(lVar7 + 0x48) = 0;
            *(undefined8 *)(lVar7 + 0x58) = 0;
            *(undefined8 *)(lVar7 + 0x50) = 0;
            *(undefined8 *)(lVar7 + 0x68) = 0;
            *(undefined8 *)(lVar7 + 0x70) = 0;
            *(undefined8 *)(lVar7 + 0x60) = 0;
            *(undefined8 *)(lVar7 + 0x88) = 0;
            *(undefined8 *)(lVar7 + 0x98) = 0;
            *(undefined8 *)(lVar7 + 0x90) = 0;
            *(undefined8 *)(lVar7 + 0xa8) = 0;
            *(undefined8 *)(lVar7 + 0xb0) = 0;
            *(undefined8 *)(lVar7 + 0xa0) = 0;
            LOCK();
            *(undefined8 *)(lVar7 + 8) = 0;
            UNLOCK();
          }
          plVar11 = plVar11 + 1;
          embree::MutexSys::unlock();
          if (plVar4 == plVar11) goto LAB_001042c0;
        }
        plVar11 = plVar11 + 1;
      } while (plVar4 != plVar11);
LAB_001042c0:
      if (*(long *)(this + 0x130) != *(long *)(this + 0x138)) {
        *(long *)(this + 0x138) = *(long *)(this + 0x130);
      }
    }
    goto LAB_00104065;
  }
  *(ulong *)(this + 0x18) = param_1;
  uVar10 = 3;
  this[0x10a] = (FastAllocator)0x0;
  uVar9 = param_1 / 0x14 + 0x7f & 0xffffffffffffff80;
  uVar6 = 0x1fffc0;
  if (uVar9 < 0x1fffc1) {
    uVar6 = uVar9;
  }
  if (uVar6 < 0x400) {
    uVar6 = 0x400;
  }
  *(ulong *)(this + 0x28) = uVar6;
  *(ulong *)(this + 0x20) = uVar6;
  if (param_1 <= uVar6 * 0x50) {
    uVar10 = (ulong)(uVar6 * 0x28 < param_1);
  }
  *(ulong *)(this + 8) = uVar10;
  if (uVar6 * 0xa0 < param_1) {
    *(undefined8 *)(this + 8) = 7;
    if (uVar6 * 0x140 < param_1) {
LAB_001042fa:
      *(undefined8 *)(this + 0x10) = 0x1040;
      *(ulong *)(this + 0x20) = uVar6 * 2;
    }
    else {
LAB_00103fd8:
      *(undefined8 *)(this + 0x10) = 0x1040;
    }
  }
  else {
    if (uVar6 * 0x140 < param_1) goto LAB_001042fa;
    if (0x1040 < uVar9) {
      uVar9 = 0x1040;
    }
    if (uVar9 < 0x400) {
      uVar9 = 0x400;
    }
    *(ulong *)(this + 0x10) = uVar9;
    if (param_1 == 0) {
      *(undefined8 *)(this + 0x28) = 0x1fffc0;
      goto LAB_00103fd8;
    }
  }
  LOCK();
  *(undefined8 *)(this + 0x110) = 0;
  UNLOCK();
  lVar7 = *(long *)this;
  if (*(long *)(lVar7 + 0x4e0) != 0) {
    *(long *)(this + 0x20) = *(long *)(lVar7 + 0x4e0);
  }
  if ((((0 < *(int *)(lVar7 + 0x4e8)) &&
       (*(undefined8 *)(this + 8) = 0, 1 < *(int *)(lVar7 + 0x4e8))) &&
      (*(undefined8 *)(this + 8) = 1, 3 < *(int *)(lVar7 + 0x4e8))) &&
     (*(undefined8 *)(this + 8) = 3, 7 < *(int *)(lVar7 + 0x4e8))) {
    *(undefined8 *)(this + 8) = 7;
  }
  if (*(long *)(lVar7 + 0x4f0) != 0) {
    *(long *)(this + 0x10) = *(long *)(lVar7 + 0x4f0);
  }
  if (*(int *)(lVar7 + 0x4f8) != -1) {
    this[0x10a] = (FastAllocator)(*(int *)(lVar7 + 0x4f8) != 0);
  }
LAB_00104065:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::FastAllocator::Block::create(embree::Device*, bool, unsigned long, unsigned long,
   embree::FastAllocator::Block*, embree::FastAllocator::AllocationType) */

undefined8 *
embree::FastAllocator::Block::create
          (long *param_1,char param_2,ulong param_3,long param_4,undefined8 param_5,int param_6)

{
  undefined8 *puVar1;
  ulong uVar2;
  void *pvVar3;
  ulong uVar4;
  long in_FS_OFFSET;
  bool local_31;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_6 == 1) {
    if (0x1fffbf < param_3) {
      uVar2 = param_3 + 0x103f & 0xfffffffffffff000;
      if (param_1 != (long *)0x0) {
        (**(code **)(*param_1 + 0x20))(param_1,uVar2,0);
      }
      uVar4 = param_4 + 0x103fU & 0xfffffffffffff000;
      puVar1 = (undefined8 *)embree::os_malloc(uVar4,&local_31);
      *puVar1 = 0;
      puVar1[1] = uVar2 - 0x40;
      puVar1[2] = uVar4 - 0x40;
      puVar1[3] = param_5;
      puVar1[4] = 0;
      *(undefined4 *)(puVar1 + 5) = 1;
      *(bool *)((long)puVar1 + 0x2c) = local_31;
      goto LAB_001043f0;
    }
  }
  else {
    puVar1 = (undefined8 *)0x0;
    if (param_6 != 0) goto LAB_001043f0;
    if (param_3 == 0x3fffc0) {
      if (param_1 != (long *)0x0) {
        (**(code **)(*param_1 + 0x20))(param_1,0x400040,0);
      }
      if (param_2 == '\0') {
        puVar1 = (undefined8 *)embree::alignedMalloc(0x400000,0x40);
      }
      else {
        puVar1 = (undefined8 *)(**(code **)(*param_1 + 0x38))(param_1,0x400000,0x40);
      }
      pvVar3 = (void *)((ulong)puVar1 & 0xffffffffffe00000);
      embree::os_advise(pvVar3,0x200000);
      embree::os_advise((void *)((long)pvVar3 + 0x200000),0x200000);
      embree::os_advise((void *)((long)pvVar3 + 0x400000),0x200000);
      *puVar1 = 0;
      puVar1[1] = 0x3fffc0;
      puVar1[2] = 0x3fffc0;
      puVar1[3] = param_5;
      puVar1[4] = 0x40;
      *(undefined4 *)(puVar1 + 5) = 0;
      *(undefined1 *)((long)puVar1 + 0x2c) = 0;
      goto LAB_001043f0;
    }
  }
  if (param_1 != (long *)0x0) {
    (**(code **)(*param_1 + 0x20))(param_1,param_3 + 0x80,0);
  }
  if (param_2 == '\0') {
    puVar1 = (undefined8 *)embree::alignedMalloc(param_3 + 0x40,0x40);
  }
  else {
    puVar1 = (undefined8 *)(**(code **)(*param_1 + 0x38))(param_1,param_3 + 0x40,0x40);
  }
  *puVar1 = 0;
  puVar1[1] = param_3;
  puVar1[2] = param_3;
  puVar1[3] = param_5;
  puVar1[4] = 0x40;
  *(undefined4 *)(puVar1 + 5) = 0;
  *(undefined1 *)((long)puVar1 + 0x2c) = 0;
LAB_001043f0:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return puVar1;
}



/* embree::FastAllocator::malloc(unsigned long&, unsigned long, bool) */

void __thiscall
embree::FastAllocator::malloc(FastAllocator *this,ulong *param_1,ulong param_2,bool param_3)

{
  FastAllocator *pFVar1;
  long lVar2;
  FastAllocator *pFVar3;
  FastAllocator FVar4;
  ulong *puVar5;
  long *plVar6;
  long lVar7;
  ulong uVar8;
  ulong uVar9;
  undefined8 *puVar10;
  undefined8 uVar11;
  ulong uVar12;
  ulong uVar13;
  void *pvVar14;
  long in_FS_OFFSET;
  bool local_41;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar7 = param_2 - 1;
  if (param_3) {
LAB_001045d8:
    uVar9 = embree::TaskScheduler::threadID();
    lVar2 = (uVar9 & *(ulong *)(this + 8)) * 8;
    pFVar3 = this + lVar2 + 0x78;
    puVar5 = *(ulong **)pFVar3;
    if (puVar5 != (ulong *)0x0) {
      puVar10 = *(undefined8 **)this;
      if (puVar10 != (undefined8 *)0x0) {
        puVar10 = puVar10 + 0xa9;
      }
      uVar8 = -param_2 & lVar7 + *param_1;
      uVar13 = puVar5[2];
      LOCK();
      uVar9 = *puVar5;
      *puVar5 = *puVar5 + uVar8;
      UNLOCK();
      if (uVar9 <= puVar5[2]) {
        uVar12 = puVar5[2] - uVar9;
        if (uVar8 < puVar5[2] - uVar9) {
          uVar12 = uVar8;
        }
        *param_1 = uVar12;
        if ((puVar5[1] < uVar12 + uVar9) && (puVar10 != (undefined8 *)0x0)) {
          uVar8 = puVar5[1];
          if (puVar5[1] <= uVar9) {
            uVar8 = uVar9;
          }
          (**(code **)*puVar10)(puVar10,(uVar12 + uVar9) - uVar8,1,uVar13);
        }
        if ((long)puVar5 + uVar9 + 0x40 != 0) goto LAB_00104920;
      }
      if (this[0x109] == (FastAllocator)0x0) goto LAB_00104e7a;
    }
    if (0x1fffc0 < *param_1) goto LAB_00104e7a;
    if (*(long *)(this + 0x100) == 0) {
      embree::MutexSys::lock();
      if (puVar5 == *(ulong **)pFVar3) {
        uVar13 = lVar7 + *param_1 & -param_2;
        uVar9 = *(ulong *)(this + 0x28);
        if (*(ulong *)(this + 0x20) < *(ulong *)(this + 0x28)) {
          uVar9 = *(ulong *)(this + 0x20);
        }
        if (uVar13 < uVar9) {
          uVar13 = uVar9;
        }
        uVar11 = *(undefined8 *)(this + lVar2 + 0xb8);
        FVar4 = this[0x108];
        plVar6 = *(long **)this;
        if (*(int *)(this + 0x148) == 1) {
          if (uVar13 < 0x1fffc0) {
LAB_00104746:
            if (plVar6 != (long *)0x0) {
              (**(code **)(*plVar6 + 0x20))(plVar6,uVar13 + 0x80,0);
            }
            if (FVar4 == (FastAllocator)0x0) {
              puVar10 = (undefined8 *)embree::alignedMalloc(uVar13 + 0x40,0x40);
            }
            else {
              puVar10 = (undefined8 *)(**(code **)(*plVar6 + 0x38))(plVar6,uVar13 + 0x40,0x40);
            }
            *puVar10 = 0;
            puVar10[1] = uVar13;
            puVar10[2] = uVar13;
LAB_0010479c:
            puVar10[4] = 0x40;
            *(undefined4 *)(puVar10 + 5) = 0;
            puVar10[3] = uVar11;
            *(undefined1 *)((long)puVar10 + 0x2c) = 0;
          }
          else {
            uVar9 = uVar13 + 0x103f & 0xfffffffffffff000;
            if (plVar6 != (long *)0x0) {
              (**(code **)(*plVar6 + 0x20))(plVar6,uVar9,0);
            }
            puVar10 = (undefined8 *)embree::os_malloc(uVar9,&local_41);
            *puVar10 = 0;
            puVar10[1] = uVar9 - 0x40;
            puVar10[2] = uVar9 - 0x40;
            puVar10[3] = uVar11;
            puVar10[4] = 0;
            *(undefined4 *)(puVar10 + 5) = 1;
            *(bool *)((long)puVar10 + 0x2c) = local_41;
          }
        }
        else {
          puVar10 = (undefined8 *)0x0;
          if (*(int *)(this + 0x148) == 0) {
            if (uVar13 != 0x3fffc0) goto LAB_00104746;
            if (plVar6 != (long *)0x0) {
              (**(code **)(*plVar6 + 0x20))(plVar6,0x400040);
            }
            if (FVar4 == (FastAllocator)0x0) {
              puVar10 = (undefined8 *)embree::alignedMalloc(0x400000,0x40);
            }
            else {
              puVar10 = (undefined8 *)(**(code **)(*plVar6 + 0x38))(plVar6,0x400000,0x40);
            }
            pvVar14 = (void *)((ulong)puVar10 & 0xffffffffffe00000);
            embree::os_advise(pvVar14,0x200000);
            embree::os_advise((void *)((long)pvVar14 + 0x200000),0x200000);
            embree::os_advise((void *)((long)pvVar14 + 0x400000),0x200000);
            *puVar10 = 0;
            puVar10[1] = 0x3fffc0;
            puVar10[2] = 0x3fffc0;
            goto LAB_0010479c;
          }
        }
        LOCK();
        *(undefined8 **)pFVar3 = puVar10;
        UNLOCK();
        LOCK();
        *(undefined8 **)(this + lVar2 + 0xb8) = puVar10;
        UNLOCK();
      }
      embree::MutexSys::unlock();
    }
    else {
      embree::MutexSys::lock();
      if (puVar5 == *(ulong **)pFVar3) {
        if (*(long *)(this + 0x100) == 0) {
          LOCK();
          pFVar1 = this + 0x110;
          lVar2 = *(long *)pFVar1;
          *(long *)pFVar1 = *(long *)pFVar1 + 1;
          UNLOCK();
          uVar9 = 0x10;
          if (lVar2 + 1U < 0x11) {
            uVar9 = lVar2 + 1U;
          }
          uVar9 = *(long *)(this + 0x20) << ((byte)uVar9 & 0x3f);
          if (*(ulong *)(this + 0x28) < uVar9) {
            uVar9 = *(ulong *)(this + 0x28);
          }
          uVar11 = Block::create(*(undefined8 *)this,this[0x108],uVar9,uVar9,
                                 *(undefined8 *)(this + 0xf8),*(undefined4 *)(this + 0x148));
          LOCK();
          *(undefined8 *)pFVar3 = uVar11;
          UNLOCK();
          LOCK();
          *(undefined8 *)(this + 0xf8) = uVar11;
          UNLOCK();
        }
        else {
          uVar11 = *(undefined8 *)(*(long *)(this + 0x100) + 0x18);
          *(undefined8 *)(*(long *)(this + 0x100) + 0x18) = *(undefined8 *)(this + 0xf8);
          LOCK();
          *(undefined8 *)(this + 0xf8) = *(undefined8 *)(this + 0x100);
          UNLOCK();
          LOCK();
          *(undefined8 *)pFVar3 = *(undefined8 *)(this + 0x100);
          UNLOCK();
          LOCK();
          *(undefined8 *)(this + 0x100) = uVar11;
          UNLOCK();
        }
      }
      embree::MutexSys::unlock();
    }
    goto LAB_001045d8;
  }
  do {
    uVar9 = embree::TaskScheduler::threadID();
    lVar2 = (uVar9 & *(ulong *)(this + 8)) * 8;
    pFVar3 = this + lVar2 + 0x78;
    puVar5 = *(ulong **)pFVar3;
    if (puVar5 != (ulong *)0x0) {
      puVar10 = *(undefined8 **)this;
      if (puVar10 != (undefined8 *)0x0) {
        puVar10 = puVar10 + 0xa9;
      }
      uVar9 = -param_2 & lVar7 + *param_1;
      if (*puVar5 + uVar9 <= puVar5[2]) {
        LOCK();
        uVar13 = *puVar5;
        *puVar5 = *puVar5 + uVar9;
        UNLOCK();
        if ((uVar9 + uVar13 <= puVar5[2]) && (uVar13 <= puVar5[2])) {
          uVar8 = puVar5[2] - uVar13;
          if (uVar9 < puVar5[2] - uVar13) {
            uVar8 = uVar9;
          }
          *param_1 = uVar8;
          if (puVar10 != (undefined8 *)0x0) {
            if (uVar8 + uVar13 <= puVar5[1]) {
              if ((long)puVar5 + uVar13 + 0x40 == 0) goto LAB_001047fd;
              goto LAB_00104920;
            }
            uVar9 = puVar5[1];
            if (puVar5[1] < uVar13) {
              uVar9 = uVar13;
            }
            (**(code **)*puVar10)(puVar10,(uVar8 + uVar13) - uVar9,1);
          }
          if ((long)puVar5 + uVar13 + 0x40 != 0) {
LAB_00104920:
            if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
              return;
            }
                    /* WARNING: Subroutine does not return */
            __stack_chk_fail();
          }
        }
      }
LAB_001047fd:
      if (this[0x109] == (FastAllocator)0x0) {
LAB_00104e7a:
                    /* WARNING: Subroutine does not return */
        abort();
      }
    }
    if (0x1fffc0 < *param_1) goto LAB_00104e7a;
    if (*(long *)(this + 0x100) == 0) {
      embree::MutexSys::lock();
      if (puVar5 == *(ulong **)pFVar3) {
        uVar13 = lVar7 + *param_1 & -param_2;
        uVar9 = *(ulong *)(this + 0x28);
        if (*(ulong *)(this + 0x20) < *(ulong *)(this + 0x28)) {
          uVar9 = *(ulong *)(this + 0x20);
        }
        if (uVar13 < uVar9) {
          uVar13 = uVar9;
        }
        uVar11 = *(undefined8 *)(this + lVar2 + 0xb8);
        FVar4 = this[0x108];
        plVar6 = *(long **)this;
        if (*(int *)(this + 0x148) == 1) {
          if (uVar13 < 0x1fffc0) {
LAB_00104b50:
            if (plVar6 != (long *)0x0) {
              (**(code **)(*plVar6 + 0x20))(plVar6,uVar13 + 0x80,0);
            }
            if (FVar4 == (FastAllocator)0x0) {
              puVar10 = (undefined8 *)embree::alignedMalloc(uVar13 + 0x40,0x40);
            }
            else {
              puVar10 = (undefined8 *)(**(code **)(*plVar6 + 0x38))(plVar6,uVar13 + 0x40,0x40);
            }
            *puVar10 = 0;
            puVar10[1] = uVar13;
            puVar10[2] = uVar13;
LAB_00104ba6:
            puVar10[4] = 0x40;
            *(undefined4 *)(puVar10 + 5) = 0;
            puVar10[3] = uVar11;
            *(undefined1 *)((long)puVar10 + 0x2c) = 0;
          }
          else {
            uVar9 = uVar13 + 0x103f & 0xfffffffffffff000;
            if (plVar6 != (long *)0x0) {
              (**(code **)(*plVar6 + 0x20))(plVar6,uVar9,0);
            }
            puVar10 = (undefined8 *)embree::os_malloc(uVar9,&local_41);
            *puVar10 = 0;
            puVar10[1] = uVar9 - 0x40;
            puVar10[2] = uVar9 - 0x40;
            puVar10[3] = uVar11;
            puVar10[4] = 0;
            *(undefined4 *)(puVar10 + 5) = 1;
            *(bool *)((long)puVar10 + 0x2c) = local_41;
          }
        }
        else {
          puVar10 = (undefined8 *)0x0;
          if (*(int *)(this + 0x148) == 0) {
            if (uVar13 != 0x3fffc0) goto LAB_00104b50;
            if (plVar6 != (long *)0x0) {
              (**(code **)(*plVar6 + 0x20))(plVar6,0x400040,0);
            }
            if (FVar4 == (FastAllocator)0x0) {
              puVar10 = (undefined8 *)embree::alignedMalloc(0x400000,0x40);
            }
            else {
              puVar10 = (undefined8 *)(**(code **)(*plVar6 + 0x38))(plVar6,0x400000,0x40);
            }
            pvVar14 = (void *)((ulong)puVar10 & 0xffffffffffe00000);
            embree::os_advise(pvVar14,0x200000);
            embree::os_advise((void *)((long)pvVar14 + 0x200000),0x200000);
            embree::os_advise((void *)((long)pvVar14 + 0x400000),0x200000);
            *puVar10 = 0;
            puVar10[1] = 0x3fffc0;
            puVar10[2] = 0x3fffc0;
            goto LAB_00104ba6;
          }
        }
        LOCK();
        *(undefined8 **)pFVar3 = puVar10;
        UNLOCK();
        LOCK();
        *(undefined8 **)(this + lVar2 + 0xb8) = puVar10;
        UNLOCK();
      }
      embree::MutexSys::unlock();
    }
    else {
      embree::MutexSys::lock();
      if (puVar5 == *(ulong **)pFVar3) {
        if (*(long *)(this + 0x100) == 0) {
          LOCK();
          pFVar1 = this + 0x110;
          lVar2 = *(long *)pFVar1;
          *(long *)pFVar1 = *(long *)pFVar1 + 1;
          UNLOCK();
          uVar9 = 0x10;
          if (lVar2 + 1U < 0x11) {
            uVar9 = lVar2 + 1U;
          }
          uVar9 = *(long *)(this + 0x20) << ((byte)uVar9 & 0x3f);
          if (*(ulong *)(this + 0x28) < uVar9) {
            uVar9 = *(ulong *)(this + 0x28);
          }
          uVar11 = Block::create(*(undefined8 *)this,this[0x108],uVar9,uVar9,
                                 *(undefined8 *)(this + 0xf8),*(undefined4 *)(this + 0x148));
          LOCK();
          *(undefined8 *)pFVar3 = uVar11;
          UNLOCK();
          LOCK();
          *(undefined8 *)(this + 0xf8) = uVar11;
          UNLOCK();
        }
        else {
          uVar11 = *(undefined8 *)(*(long *)(this + 0x100) + 0x18);
          *(undefined8 *)(*(long *)(this + 0x100) + 0x18) = *(undefined8 *)(this + 0xf8);
          LOCK();
          *(undefined8 *)(this + 0xf8) = *(undefined8 *)(this + 0x100);
          UNLOCK();
          LOCK();
          *(undefined8 *)pFVar3 = *(undefined8 *)(this + 0x100);
          UNLOCK();
          LOCK();
          *(undefined8 *)(this + 0x100) = uVar11;
          UNLOCK();
        }
      }
      embree::MutexSys::unlock();
    }
  } while( true );
}



/* embree::FastAllocator::Block::clear_block(embree::Device*, bool) */

void __thiscall embree::FastAllocator::Block::clear_block(Block *this,Device *param_1,bool param_2)

{
  long lVar1;
  ulong uVar2;
  
  lVar1 = *(long *)(this + 0x20);
  uVar2 = *(ulong *)this;
  if (*(ulong *)this < *(ulong *)(this + 8)) {
    uVar2 = *(ulong *)(this + 8);
  }
  if (*(ulong *)(this + 0x10) < uVar2) {
    uVar2 = *(ulong *)(this + 0x10);
  }
  if (*(int *)(this + 0x28) == 0) {
    if (param_2) {
      (**(code **)(*(long *)param_1 + 0x40))(param_1,this);
    }
    else {
      embree::alignedFree(this);
    }
  }
  else {
    if (*(int *)(this + 0x28) != 1) {
      return;
    }
    embree::os_free(this,*(long *)(this + 0x10) + 0x40,(bool)this[0x2c]);
  }
  if (param_1 == (Device *)0x0) {
    return;
  }
                    /* WARNING: Could not recover jumptable at 0x00104ee6. Too many branches */
                    /* WARNING: Treating indirect jump as call */
  (**(code **)(*(long *)param_1 + 0x20))(param_1,-(lVar1 + 0x40 + uVar2),1);
  return;
}



/* void std::vector<embree::FastAllocator::ThreadLocal2*,
   std::allocator<embree::FastAllocator::ThreadLocal2*>
   >::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*
   const&>(__gnu_cxx::__normal_iterator<embree::FastAllocator::ThreadLocal2**,
   std::vector<embree::FastAllocator::ThreadLocal2*,
   std::allocator<embree::FastAllocator::ThreadLocal2*> > >, embree::FastAllocator::ThreadLocal2*
   const&) */

void __thiscall
std::
vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>::
_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
          (vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
           *this,void *param_2,undefined8 *param_3)

{
  void *__src;
  ulong uVar1;
  void *pvVar2;
  void *__dest;
  size_t __n;
  long lVar3;
  ulong uVar4;
  size_t __n_00;
  
  pvVar2 = *(void **)(this + 8);
  __src = *(void **)this;
  uVar1 = (long)pvVar2 - (long)__src >> 3;
  if (uVar1 == 0xfffffffffffffff) {
                    /* WARNING: Subroutine does not return */
    std::__throw_length_error("vector::_M_realloc_insert");
  }
  __n = (long)param_2 - (long)__src;
  if (__src == pvVar2) {
    if (0xfffffffffffffffe < uVar1) goto LAB_00105020;
    uVar4 = 0xfffffffffffffff;
    if (uVar1 + 1 < 0x1000000000000000) {
      uVar4 = uVar1 + 1;
    }
    uVar4 = uVar4 << 3;
  }
  else {
    uVar4 = uVar1 * 2;
    if (uVar4 < uVar1) {
LAB_00105020:
      uVar4 = 0x7ffffffffffffff8;
    }
    else {
      if (uVar4 == 0) {
        lVar3 = 0;
        __dest = (void *)0x0;
        goto LAB_00104fa9;
      }
      if (0xfffffffffffffff < uVar4) {
        uVar4 = 0xfffffffffffffff;
      }
      uVar4 = uVar4 * 8;
    }
  }
  __dest = operator_new(uVar4);
  lVar3 = uVar4 + (long)__dest;
LAB_00104fa9:
  *(undefined8 *)((long)__dest + __n) = *param_3;
  if (0 < (long)__n) {
    memmove(__dest,__src,__n);
  }
  __n_00 = (long)pvVar2 - (long)param_2;
  pvVar2 = (void *)((long)__dest + __n + 8);
  if (0 < (long)__n_00) {
    pvVar2 = memmove(pvVar2,param_2,__n_00);
  }
  if (__src != (void *)0x0) {
    operator_delete(__src,*(long *)(this + 0x10) - (long)__src);
  }
  *(void **)this = __dest;
  *(size_t *)(this + 8) = __n_00 + (long)pvVar2;
  *(long *)(this + 0x10) = lVar3;
  return;
}



/* embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> > >::createLeaf(embree::PrimRef const*, embree::range<unsigned long>
   const&, embree::FastAllocator::CachedAllocator const&) */

ulong __thiscall
embree::sse2::BVHNBuilderVirtual<4>::
BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>::createLeaf
          (BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>> *this,
          PrimRef *param_1,range *param_2,CachedAllocator *param_3)

{
  long *plVar1;
  long lVar2;
  long lVar3;
  ulong *puVar4;
  FastAllocator *this_00;
  ulong *puVar5;
  ulong uVar6;
  long lVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  undefined8 *puVar10;
  uint uVar11;
  ulong uVar12;
  undefined8 uVar13;
  ulong uVar14;
  ulong uVar15;
  ulong uVar16;
  ulong uVar17;
  ulong uVar18;
  long lVar19;
  int *piVar20;
  long in_FS_OFFSET;
  ulong local_a8;
  ulong local_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  uint local_68;
  uint uStack_64;
  uint uStack_60;
  uint uStack_5c;
  uint local_58;
  uint uStack_54;
  uint uStack_50;
  uint uStack_4c;
  long local_40;
  
  uVar14 = *(ulong *)param_2;
  puVar4 = *(ulong **)(param_3 + 0x10);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  this_00 = *(FastAllocator **)param_3;
  uVar16 = *puVar4;
  uVar17 = (*(long *)(param_2 + 8) + 3) - uVar14;
  uVar18 = uVar17 & 0xfffffffffffffffc;
  uVar17 = uVar17 >> 2;
  lVar3 = uVar18 + uVar17;
  uVar15 = lVar3 * 0x10;
  local_a8 = uVar15;
  if (this_00 != *(FastAllocator **)(uVar16 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar16 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar16 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar16 + 0xa8) + *(long *)(uVar16 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar16 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar16 + 0x98) + *(long *)(uVar16 + 0x58)) -
                           *(long *)(uVar16 + 0x50)) - *(long *)(uVar16 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar16 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar16 + 0xb0) + *(long *)(uVar16 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar16 + 0x48) = 0;
    *(undefined8 *)(uVar16 + 0x58) = 0;
    *(undefined8 *)(uVar16 + 0x50) = 0;
    *(undefined8 *)(uVar16 + 0x68) = 0;
    *(undefined8 *)(uVar16 + 0x70) = 0;
    *(undefined8 *)(uVar16 + 0x60) = 0;
    if (this_00 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar16 + 0x88) = 0;
      uVar13 = 0;
      *(undefined8 *)(uVar16 + 0x98) = 0;
      *(undefined8 *)(uVar16 + 0x90) = 0;
      *(undefined8 *)(uVar16 + 0xa8) = 0;
      *(undefined8 *)(uVar16 + 0xb0) = 0;
    }
    else {
      uVar13 = *(undefined8 *)(this_00 + 0x10);
      *(undefined8 *)(uVar16 + 0x88) = 0;
      *(undefined8 *)(uVar16 + 0x98) = 0;
      *(undefined8 *)(uVar16 + 0x60) = uVar13;
      *(undefined8 *)(uVar16 + 0x90) = 0;
      *(undefined8 *)(uVar16 + 0xa8) = 0;
      *(undefined8 *)(uVar16 + 0xb0) = 0;
      *(undefined8 *)(uVar16 + 0xa0) = 0;
      uVar13 = *(undefined8 *)(this_00 + 0x10);
    }
    *(undefined8 *)(uVar16 + 0xa0) = uVar13;
    LOCK();
    *(FastAllocator **)(uVar16 + 8) = this_00;
    UNLOCK();
    local_a0 = uVar16;
    embree::MutexSys::lock();
    puVar5 = *(ulong **)(this_00 + 0x138);
    if (puVar5 == *(ulong **)(this_00 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(this_00 + 0x130),puVar5,&local_a0);
    }
    else {
      *puVar5 = uVar16;
      *(long *)(this_00 + 0x138) = *(long *)(this_00 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar6 = puVar4[2];
  puVar4[5] = puVar4[5] + uVar15;
  uVar12 = (ulong)(-(int)uVar6 & 0xf);
  lVar2 = uVar6 + uVar12;
  uVar16 = uVar15 + lVar2;
  puVar4[2] = uVar16;
  if (puVar4[3] < uVar16) {
    puVar4[2] = uVar6;
    if (puVar4[4] < (uVar18 + uVar17) * 0x40) {
      puVar8 = (undefined8 *)FastAllocator::malloc(this_00,&local_a8,0x40,false);
    }
    else {
      local_a0 = puVar4[4];
      puVar8 = (undefined8 *)FastAllocator::malloc(this_00,&local_a0,0x40,true);
      puVar4[1] = (ulong)puVar8;
      puVar4[6] = (puVar4[3] + puVar4[6]) - puVar4[2];
      puVar4[2] = uVar15;
      puVar4[3] = local_a0;
      if (local_a0 < uVar15) {
        local_a0 = puVar4[4];
        puVar4[2] = 0;
        puVar8 = (undefined8 *)FastAllocator::malloc(this_00,&local_a0,0x40,false);
        puVar4[1] = (ulong)puVar8;
        puVar4[6] = (puVar4[3] + puVar4[6]) - puVar4[2];
        puVar4[2] = uVar15;
        puVar4[3] = local_a0;
        if (local_a0 < uVar15) {
          puVar4[2] = 0;
          puVar8 = (undefined8 *)0x0;
        }
      }
    }
  }
  else {
    puVar4[6] = puVar4[6] + uVar12;
    puVar8 = (undefined8 *)(lVar2 + puVar4[1]);
  }
  uVar16 = 7;
  if (uVar17 < 8) {
    uVar16 = uVar17;
  }
  puVar10 = puVar8;
  if (uVar17 != 0) {
    do {
      uVar17 = *(ulong *)(param_2 + 8);
      local_98._0_4_ = 0;
      local_88._0_4_ = 0;
      local_78._0_4_ = 0;
      local_68 = 0xffffffff;
      local_58 = 0xffffffff;
      uStack_54 = 0xffffffff;
      uStack_50 = 0xffffffff;
      uStack_4c = 0xffffffff;
      uVar15 = uVar14;
      if (uVar14 < uVar17) {
        lVar2 = *(long *)(*(long *)(*(long *)(this + 8) + 0x68) + 0x1e0);
        lVar19 = uVar14 * 0x20;
        local_68 = *(uint *)(param_1 + lVar19 + 0xc);
        local_58 = *(uint *)(param_1 + lVar19 + 0x1c);
        lVar7 = *(long *)(lVar2 + (ulong)local_68 * 8);
        piVar20 = (int *)((ulong)local_58 * *(long *)(lVar7 + 0x60) + *(long *)(lVar7 + 0x58));
        uVar11 = (uint)(*(ulong *)(lVar7 + 0x90) >> 2) & 0x3fffffff;
        uStack_90._4_4_ = *piVar20 * uVar11;
        local_88._0_4_ = piVar20[1] * uVar11;
        local_78._0_4_ = uVar11 * piVar20[2];
        uVar15 = uVar14 + 1;
        local_98._0_4_ = uStack_90._4_4_;
        if (uVar17 <= uVar14 + 1) goto LAB_00105515;
        uStack_64 = *(uint *)(param_1 + lVar19 + 0x2c);
        uStack_54 = *(uint *)(param_1 + lVar19 + 0x3c);
        lVar7 = *(long *)(lVar2 + (ulong)uStack_64 * 8);
        piVar20 = (int *)((ulong)uStack_54 * *(long *)(lVar7 + 0x60) + *(long *)(lVar7 + 0x58));
        uVar11 = (uint)(*(ulong *)(lVar7 + 0x90) >> 2) & 0x3fffffff;
        local_98 = CONCAT44(*piVar20 * uVar11,uStack_90._4_4_);
        uVar15 = uVar14 + 2;
        local_88 = CONCAT44(piVar20[1] * uVar11,(int)local_88);
        local_78 = CONCAT44(uVar11 * piVar20[2],(int)local_78);
        if (uVar17 <= uVar15) goto LAB_00105526;
        uStack_60 = *(uint *)(param_1 + lVar19 + 0x4c);
        uStack_50 = *(uint *)(param_1 + lVar19 + 0x5c);
        lVar7 = *(long *)(lVar2 + (ulong)uStack_60 * 8);
        piVar20 = (int *)((ulong)uStack_50 * *(long *)(lVar7 + 0x60) + *(long *)(lVar7 + 0x58));
        uVar11 = (uint)(*(ulong *)(lVar7 + 0x90) >> 2) & 0x3fffffff;
        uStack_90._0_4_ = *piVar20 * uVar11;
        uVar15 = uVar14 + 3;
        uStack_80._0_4_ = piVar20[1] * uVar11;
        uStack_70._0_4_ = uVar11 * piVar20[2];
        if (uVar17 <= uVar15) goto LAB_00105537;
        uVar15 = uVar14 + 4;
        uStack_5c = *(uint *)(param_1 + lVar19 + 0x6c);
        uStack_4c = *(uint *)(param_1 + lVar19 + 0x7c);
        lVar2 = *(long *)(lVar2 + (ulong)uStack_5c * 8);
        piVar20 = (int *)((ulong)uStack_4c * *(long *)(lVar2 + 0x60) + *(long *)(lVar2 + 0x58));
        uVar11 = (uint)(*(ulong *)(lVar2 + 0x90) >> 2) & 0x3fffffff;
        uStack_90._4_4_ = *piVar20 * uVar11;
        uStack_80._4_4_ = piVar20[1] * uVar11;
        uStack_70._4_4_ = uVar11 * piVar20[2];
      }
      else {
LAB_00105515:
        local_98 = CONCAT44((int)local_98,(int)local_98);
        local_88 = CONCAT44((int)local_98,(int)local_88);
        local_78 = CONCAT44((int)local_98,(int)local_78);
        uStack_64 = local_68;
        uStack_90._4_4_ = (int)local_98;
LAB_00105526:
        uStack_90._0_4_ = uStack_90._4_4_;
        uStack_80._0_4_ = uStack_90._4_4_;
        uStack_70._0_4_ = uStack_90._4_4_;
        uStack_60 = local_68;
LAB_00105537:
        uStack_80._4_4_ = uStack_90._4_4_;
        uStack_70._4_4_ = uStack_90._4_4_;
        uStack_5c = local_68;
      }
      *(uint *)(puVar10 + 8) = local_58;
      *(uint *)((long)puVar10 + 0x44) = uStack_54;
      *(uint *)(puVar10 + 9) = uStack_50;
      *(uint *)((long)puVar10 + 0x4c) = uStack_4c;
      puVar9 = puVar10 + 10;
      *puVar10 = local_98;
      puVar10[1] = uStack_90;
      puVar10[2] = local_88;
      puVar10[3] = uStack_80;
      puVar10[4] = local_78;
      puVar10[5] = uStack_70;
      puVar10[6] = CONCAT44(uStack_64,local_68);
      puVar10[7] = CONCAT44(uStack_5c,uStack_60);
      puVar10 = puVar9;
      uVar14 = uVar15;
    } while (puVar8 + lVar3 * 2 != puVar9);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar16 + 8 | (ulong)puVar8;
}



/* embree::NodeRefPtr<4>
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> >
   >::TEMPNAMEPLACEHOLDERVALUE(embree::PrimRef*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator) const [clone .isra.0] */

ulong embree::sse2::BVHBuilderBinnedFastSpatialSAH::
      CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>
      ::operator()(long *param_1,long param_2,ulong *param_3,FastAllocator *param_4,ulong *param_5)

{
  long *plVar1;
  ulong *puVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  undefined8 *puVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  uint uVar10;
  ulong uVar11;
  undefined8 uVar12;
  ulong uVar13;
  ulong uVar14;
  ulong uVar15;
  long lVar16;
  ulong uVar17;
  ulong uVar18;
  int *piVar19;
  long in_FS_OFFSET;
  ulong local_a8;
  ulong local_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  uint local_68;
  uint uStack_64;
  uint uStack_60;
  uint uStack_5c;
  uint local_58;
  uint uStack_54;
  uint uStack_50;
  uint uStack_4c;
  long local_40;
  
  uVar13 = *param_3;
  uVar14 = param_3[1];
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar13 < uVar14) {
    lVar6 = uVar13 * 0x20 + param_2;
    do {
      *(uint *)(lVar6 + 0xc) = *(uint *)(lVar6 + 0xc) & 0x7ffffff;
      uVar14 = param_3[1];
      uVar13 = uVar13 + 1;
      lVar6 = lVar6 + 0x20;
    } while (uVar13 < uVar14);
    uVar13 = *param_3;
  }
  uVar18 = *param_5;
  uVar14 = (uVar14 + 3) - uVar13;
  uVar15 = uVar14 & 0xfffffffffffffffc;
  uVar14 = uVar14 >> 2;
  lVar6 = uVar15 + uVar14;
  uVar17 = lVar6 * 0x10;
  local_a8 = uVar17;
  if (param_4 != *(FastAllocator **)(uVar18 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar18 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar18 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar18 + 0xa8) + *(long *)(uVar18 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar18 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar18 + 0x98) + *(long *)(uVar18 + 0x58)) -
                           *(long *)(uVar18 + 0x50)) - *(long *)(uVar18 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar18 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar18 + 0xb0) + *(long *)(uVar18 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar18 + 0x48) = 0;
    *(undefined8 *)(uVar18 + 0x58) = 0;
    *(undefined8 *)(uVar18 + 0x50) = 0;
    *(undefined8 *)(uVar18 + 0x68) = 0;
    *(undefined8 *)(uVar18 + 0x70) = 0;
    *(undefined8 *)(uVar18 + 0x60) = 0;
    if (param_4 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar18 + 0x88) = 0;
      uVar12 = 0;
      *(undefined8 *)(uVar18 + 0x98) = 0;
      *(undefined8 *)(uVar18 + 0x90) = 0;
      *(undefined8 *)(uVar18 + 0xa8) = 0;
      *(undefined8 *)(uVar18 + 0xb0) = 0;
    }
    else {
      uVar12 = *(undefined8 *)(param_4 + 0x10);
      *(undefined8 *)(uVar18 + 0x88) = 0;
      *(undefined8 *)(uVar18 + 0x98) = 0;
      *(undefined8 *)(uVar18 + 0x60) = uVar12;
      *(undefined8 *)(uVar18 + 0x90) = 0;
      *(undefined8 *)(uVar18 + 0xa8) = 0;
      *(undefined8 *)(uVar18 + 0xb0) = 0;
      *(undefined8 *)(uVar18 + 0xa0) = 0;
      uVar12 = *(undefined8 *)(param_4 + 0x10);
    }
    *(undefined8 *)(uVar18 + 0xa0) = uVar12;
    LOCK();
    *(FastAllocator **)(uVar18 + 8) = param_4;
    UNLOCK();
    local_a0 = uVar18;
    embree::MutexSys::lock();
    puVar2 = *(ulong **)(param_4 + 0x138);
    if (puVar2 == *(ulong **)(param_4 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(param_4 + 0x130),puVar2,&local_a0);
    }
    else {
      *puVar2 = uVar18;
      *(long *)(param_4 + 0x138) = *(long *)(param_4 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar3 = param_5[2];
  param_5[5] = param_5[5] + uVar17;
  uVar11 = (ulong)(-(int)uVar3 & 0xf);
  lVar16 = uVar3 + uVar11;
  uVar18 = uVar17 + lVar16;
  param_5[2] = uVar18;
  if (param_5[3] < uVar18) {
    param_5[2] = uVar3;
    if (param_5[4] < (uVar15 + uVar14) * 0x40) {
      puVar7 = (undefined8 *)FastAllocator::malloc(param_4,&local_a8,0x40,false);
    }
    else {
      local_a0 = param_5[4];
      puVar7 = (undefined8 *)FastAllocator::malloc(param_4,&local_a0,0x40,true);
      param_5[1] = (ulong)puVar7;
      param_5[6] = (param_5[3] + param_5[6]) - param_5[2];
      param_5[2] = uVar17;
      param_5[3] = local_a0;
      if (local_a0 < uVar17) {
        local_a0 = param_5[4];
        param_5[2] = 0;
        puVar7 = (undefined8 *)FastAllocator::malloc(param_4,&local_a0,0x40,false);
        param_5[1] = (ulong)puVar7;
        param_5[6] = (param_5[3] + param_5[6]) - param_5[2];
        param_5[2] = uVar17;
        param_5[3] = local_a0;
        if (local_a0 < uVar17) {
          param_5[2] = 0;
          puVar7 = (undefined8 *)0x0;
        }
      }
    }
  }
  else {
    param_5[6] = param_5[6] + uVar11;
    puVar7 = (undefined8 *)(lVar16 + param_5[1]);
  }
  uVar18 = 7;
  if (uVar14 < 8) {
    uVar18 = uVar14;
  }
  puVar9 = puVar7;
  if (uVar14 != 0) {
    do {
      uVar15 = param_3[1];
      local_98._0_4_ = 0;
      local_88._0_4_ = 0;
      local_78._0_4_ = 0;
      local_68 = 0xffffffff;
      local_58 = 0xffffffff;
      uStack_54 = 0xffffffff;
      uStack_50 = 0xffffffff;
      uStack_4c = 0xffffffff;
      uVar14 = uVar13;
      if (uVar13 < uVar15) {
        lVar4 = *(long *)(*(long *)(*param_1 + 0x68) + 0x1e0);
        lVar16 = uVar13 * 0x20;
        local_68 = *(uint *)(param_2 + lVar16 + 0xc);
        local_58 = *(uint *)(param_2 + lVar16 + 0x1c);
        lVar5 = *(long *)(lVar4 + (ulong)local_68 * 8);
        piVar19 = (int *)((ulong)local_58 * *(long *)(lVar5 + 0x60) + *(long *)(lVar5 + 0x58));
        uVar10 = (uint)(*(ulong *)(lVar5 + 0x90) >> 2) & 0x3fffffff;
        uStack_90._4_4_ = *piVar19 * uVar10;
        local_88._0_4_ = piVar19[1] * uVar10;
        local_78._0_4_ = uVar10 * piVar19[2];
        uVar14 = uVar13 + 1;
        local_98._0_4_ = uStack_90._4_4_;
        if (uVar15 <= uVar13 + 1) goto LAB_00105bd4;
        lVar5 = param_2 + 0x20 + lVar16;
        uStack_64 = *(uint *)(lVar5 + 0xc);
        uStack_54 = *(uint *)(lVar5 + 0x1c);
        lVar5 = *(long *)(lVar4 + (ulong)uStack_64 * 8);
        piVar19 = (int *)((ulong)uStack_54 * *(long *)(lVar5 + 0x60) + *(long *)(lVar5 + 0x58));
        uVar10 = (uint)(*(ulong *)(lVar5 + 0x90) >> 2) & 0x3fffffff;
        local_98 = CONCAT44(*piVar19 * uVar10,uStack_90._4_4_);
        uVar14 = uVar13 + 2;
        local_88 = CONCAT44(piVar19[1] * uVar10,(int)local_88);
        local_78 = CONCAT44(uVar10 * piVar19[2],(int)local_78);
        if (uVar15 <= uVar14) goto LAB_00105be5;
        lVar5 = param_2 + 0x40 + lVar16;
        uStack_60 = *(uint *)(lVar5 + 0xc);
        uStack_50 = *(uint *)(lVar5 + 0x1c);
        lVar5 = *(long *)(lVar4 + (ulong)uStack_60 * 8);
        piVar19 = (int *)((ulong)uStack_50 * *(long *)(lVar5 + 0x60) + *(long *)(lVar5 + 0x58));
        uVar10 = (uint)(*(ulong *)(lVar5 + 0x90) >> 2) & 0x3fffffff;
        uStack_90._0_4_ = *piVar19 * uVar10;
        uVar14 = uVar13 + 3;
        uStack_80._0_4_ = piVar19[1] * uVar10;
        uStack_70._0_4_ = uVar10 * piVar19[2];
        if (uVar15 <= uVar14) goto LAB_00105bf6;
        lVar16 = param_2 + 0x60 + lVar16;
        uVar14 = uVar13 + 4;
        uStack_5c = *(uint *)(lVar16 + 0xc);
        uStack_4c = *(uint *)(lVar16 + 0x1c);
        lVar16 = *(long *)(lVar4 + (ulong)uStack_5c * 8);
        piVar19 = (int *)((ulong)uStack_4c * *(long *)(lVar16 + 0x60) + *(long *)(lVar16 + 0x58));
        uVar10 = (uint)(*(ulong *)(lVar16 + 0x90) >> 2) & 0x3fffffff;
        uStack_90._4_4_ = *piVar19 * uVar10;
        uStack_80._4_4_ = piVar19[1] * uVar10;
        uStack_70._4_4_ = uVar10 * piVar19[2];
      }
      else {
LAB_00105bd4:
        local_98 = CONCAT44((int)local_98,(int)local_98);
        local_88 = CONCAT44((int)local_98,(int)local_88);
        local_78 = CONCAT44((int)local_98,(int)local_78);
        uStack_64 = local_68;
        uStack_90._4_4_ = (int)local_98;
LAB_00105be5:
        uStack_90._0_4_ = uStack_90._4_4_;
        uStack_80._0_4_ = uStack_90._4_4_;
        uStack_70._0_4_ = uStack_90._4_4_;
        uStack_60 = local_68;
LAB_00105bf6:
        uStack_80._4_4_ = uStack_90._4_4_;
        uStack_70._4_4_ = uStack_90._4_4_;
        uStack_5c = local_68;
      }
      *(uint *)(puVar9 + 8) = local_58;
      *(uint *)((long)puVar9 + 0x44) = uStack_54;
      *(uint *)(puVar9 + 9) = uStack_50;
      *(uint *)((long)puVar9 + 0x4c) = uStack_4c;
      puVar8 = puVar9 + 10;
      *puVar9 = local_98;
      puVar9[1] = uStack_90;
      puVar9[2] = local_88;
      puVar9[3] = uStack_80;
      puVar9[4] = local_78;
      puVar9[5] = uStack_70;
      puVar9[6] = CONCAT44(uStack_64,local_68);
      puVar9[7] = CONCAT44(uStack_5c,uStack_60);
      puVar9 = puVar8;
      uVar13 = uVar14;
    } while (puVar7 + lVar6 * 2 != puVar8);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar18 + 8 | (ulong)puVar7;
}



/* embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> > >::createLeaf(embree::PrimRef const*, embree::range<unsigned long>
   const&, embree::FastAllocator::CachedAllocator const&) */

ulong __thiscall
embree::sse2::BVHNBuilderVirtual<4>::
BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>::createLeaf
          (BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>> *this,
          PrimRef *param_1,range *param_2,CachedAllocator *param_3)

{
  long *plVar1;
  long lVar2;
  long lVar3;
  ulong *puVar4;
  FastAllocator *this_00;
  ulong *puVar5;
  ulong uVar6;
  long lVar7;
  undefined4 *puVar8;
  undefined8 uVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  undefined4 *puVar12;
  ulong uVar13;
  ulong uVar14;
  uint *puVar15;
  undefined4 *puVar16;
  undefined4 *puVar17;
  undefined4 *puVar18;
  undefined4 *puVar19;
  undefined4 *puVar20;
  undefined4 *puVar21;
  ulong uVar22;
  long lVar23;
  ulong uVar24;
  ulong uVar25;
  ulong uVar26;
  undefined4 *puVar27;
  long in_FS_OFFSET;
  undefined4 uVar28;
  undefined4 uVar29;
  undefined1 auVar30 [8];
  undefined4 uVar31;
  undefined4 uVar32;
  undefined4 uVar33;
  undefined4 uVar34;
  undefined4 uVar35;
  undefined4 uVar36;
  undefined4 uVar37;
  undefined4 uVar38;
  undefined4 uVar39;
  undefined4 uVar40;
  undefined4 uVar41;
  undefined4 uVar42;
  undefined4 uVar43;
  undefined4 uVar44;
  undefined4 uVar45;
  undefined4 uVar46;
  undefined4 uVar47;
  undefined4 uVar48;
  undefined4 uVar49;
  undefined4 uVar50;
  undefined4 uVar51;
  undefined4 uVar52;
  undefined4 uVar53;
  undefined4 uVar54;
  undefined4 uVar55;
  undefined4 uVar56;
  undefined4 uVar57;
  undefined4 uVar58;
  undefined4 uVar59;
  undefined4 uVar60;
  ulong local_108;
  ulong local_100;
  uint local_f8;
  uint uStack_f4;
  uint uStack_f0;
  uint uStack_ec;
  uint local_e8;
  uint uStack_e4;
  uint uStack_e0;
  uint uStack_dc;
  undefined1 local_d8 [8];
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined1 local_c8 [8];
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined1 local_b8 [8];
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined1 local_a8 [8];
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined1 local_98 [8];
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined1 local_88 [8];
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined1 local_78 [8];
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined1 local_68 [8];
  undefined4 uStack_60;
  undefined4 uStack_5c;
  undefined1 local_58 [8];
  undefined8 uStack_50;
  long local_40;
  
  uVar22 = *(ulong *)param_2;
  puVar4 = *(ulong **)(param_3 + 0x10);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  this_00 = *(FastAllocator **)param_3;
  uVar14 = *puVar4;
  uVar24 = (*(long *)(param_2 + 8) + 3) - uVar22;
  uVar25 = uVar24 & 0xfffffffffffffffc;
  uVar24 = uVar24 >> 2;
  lVar2 = uVar25 * 2 + uVar24 * 3;
  uVar26 = lVar2 * 0x10;
  local_108 = uVar26;
  if (this_00 != *(FastAllocator **)(uVar14 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar14 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar14 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar14 + 0xa8) + *(long *)(uVar14 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar14 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar14 + 0x98) + *(long *)(uVar14 + 0x58)) -
                           *(long *)(uVar14 + 0x50)) - *(long *)(uVar14 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar14 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar14 + 0xb0) + *(long *)(uVar14 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar14 + 0x48) = 0;
    *(undefined8 *)(uVar14 + 0x58) = 0;
    *(undefined8 *)(uVar14 + 0x50) = 0;
    *(undefined8 *)(uVar14 + 0x68) = 0;
    *(undefined8 *)(uVar14 + 0x70) = 0;
    *(undefined8 *)(uVar14 + 0x60) = 0;
    if (this_00 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar14 + 0x88) = 0;
      uVar9 = 0;
      *(undefined8 *)(uVar14 + 0x98) = 0;
      *(undefined8 *)(uVar14 + 0x90) = 0;
      *(undefined8 *)(uVar14 + 0xa8) = 0;
      *(undefined8 *)(uVar14 + 0xb0) = 0;
    }
    else {
      uVar9 = *(undefined8 *)(this_00 + 0x10);
      *(undefined8 *)(uVar14 + 0x88) = 0;
      *(undefined8 *)(uVar14 + 0x98) = 0;
      *(undefined8 *)(uVar14 + 0x60) = uVar9;
      *(undefined8 *)(uVar14 + 0x90) = 0;
      *(undefined8 *)(uVar14 + 0xa8) = 0;
      *(undefined8 *)(uVar14 + 0xb0) = 0;
      *(undefined8 *)(uVar14 + 0xa0) = 0;
      uVar9 = *(undefined8 *)(this_00 + 0x10);
    }
    *(undefined8 *)(uVar14 + 0xa0) = uVar9;
    LOCK();
    *(FastAllocator **)(uVar14 + 8) = this_00;
    UNLOCK();
    local_100 = uVar14;
    embree::MutexSys::lock();
    puVar5 = *(ulong **)(this_00 + 0x138);
    if (puVar5 == *(ulong **)(this_00 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(this_00 + 0x130),puVar5,&local_100);
    }
    else {
      *puVar5 = uVar14;
      *(long *)(this_00 + 0x138) = *(long *)(this_00 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar6 = puVar4[2];
  puVar4[5] = puVar4[5] + uVar26;
  uVar13 = (ulong)(-(int)uVar6 & 0xf);
  lVar3 = uVar6 + uVar13;
  uVar14 = uVar26 + lVar3;
  puVar4[2] = uVar14;
  if (puVar4[3] < uVar14) {
    puVar4[2] = uVar6;
    if (puVar4[4] < (uVar25 * 2 + uVar24 * 3) * 0x40) {
      puVar8 = (undefined4 *)FastAllocator::malloc(this_00,&local_108,0x40,false);
    }
    else {
      local_100 = puVar4[4];
      puVar8 = (undefined4 *)FastAllocator::malloc(this_00,&local_100,0x40,true);
      puVar4[1] = (ulong)puVar8;
      uVar14 = puVar4[2];
      puVar4[2] = uVar26;
      puVar4[6] = (puVar4[3] + puVar4[6]) - uVar14;
      puVar4[3] = local_100;
      if (local_100 < uVar26) {
        puVar4[2] = 0;
        local_100 = puVar4[4];
        puVar8 = (undefined4 *)FastAllocator::malloc(this_00,&local_100,0x40,false);
        puVar4[1] = (ulong)puVar8;
        uVar14 = puVar4[2];
        puVar4[2] = uVar26;
        puVar4[6] = (puVar4[3] + puVar4[6]) - uVar14;
        puVar4[3] = local_100;
        if (local_100 < uVar26) {
          puVar4[2] = 0;
          puVar8 = (undefined4 *)0x0;
        }
      }
    }
  }
  else {
    puVar4[6] = puVar4[6] + uVar13;
    puVar8 = (undefined4 *)(lVar3 + puVar4[1]);
  }
  uVar14 = 7;
  if (uVar24 < 8) {
    uVar14 = uVar24;
  }
  puVar27 = puVar8 + lVar2 * 4;
  uVar14 = uVar14 + 8 | (ulong)puVar8;
  if (uVar24 != 0) {
    do {
      uVar24 = *(ulong *)(param_2 + 8);
      local_f8 = 0xffffffff;
      uStack_f4 = 0xffffffff;
      uStack_f0 = 0xffffffff;
      uStack_ec = 0xffffffff;
      local_e8 = 0xffffffff;
      uStack_e4 = 0xffffffff;
      uStack_e0 = 0xffffffff;
      uStack_dc = 0xffffffff;
      _local_d8 = (undefined1  [16])0x0;
      _local_c8 = (undefined1  [16])0x0;
      _local_b8 = (undefined1  [16])0x0;
      _local_a8 = (undefined1  [16])0x0;
      _local_98 = (undefined1  [16])0x0;
      _local_88 = (undefined1  [16])0x0;
      _local_78 = (undefined1  [16])0x0;
      _local_68 = (undefined1  [16])0x0;
      _local_58 = (undefined1  [16])0x0;
      if (uVar22 < uVar24) {
        lVar2 = *(long *)(*(long *)(*(long *)(this + 8) + 0x68) + 0x1e0);
        lVar23 = uVar22 * 0x20;
        local_f8 = *(uint *)(param_1 + lVar23 + 0xc);
        local_e8 = *(uint *)(param_1 + lVar23 + 0x1c);
        lVar3 = *(long *)(lVar2 + (ulong)local_f8 * 8);
        puVar15 = (uint *)((ulong)local_e8 * *(long *)(lVar3 + 0x60) + *(long *)(lVar3 + 0x58));
        lVar7 = *(long *)(lVar3 + 0x88);
        lVar3 = *(long *)(lVar3 + 0x90);
        puVar10 = (undefined4 *)((ulong)*puVar15 * lVar3 + lVar7);
        local_b8._0_4_ = puVar10[2];
        local_c8._0_4_ = puVar10[1];
        local_d8._0_4_ = *puVar10;
        stack0xffffffffffffff3c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff2c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff4c = SUB1612((undefined1  [16])0x0,4);
        puVar10 = (undefined4 *)((ulong)puVar15[1] * lVar3 + lVar7);
        puVar16 = (undefined4 *)((ulong)puVar15[2] * lVar3 + lVar7);
        local_88._0_4_ = puVar10[2];
        local_98._0_4_ = puVar10[1];
        local_68._0_4_ = puVar16[1];
        local_78._0_4_ = *puVar16;
        local_a8._0_4_ = *puVar10;
        uVar25 = uVar22 + 1;
        stack0xffffffffffffff6c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff7c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff5c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff8c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff9c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffffac = SUB1612((undefined1  [16])0x0,4);
        local_58._0_4_ = puVar16[2];
        if (uVar25 < uVar24) {
          uStack_f4 = *(uint *)(param_1 + lVar23 + 0x2c);
          uStack_e4 = *(uint *)(param_1 + lVar23 + 0x3c);
          lVar3 = *(long *)(lVar2 + (ulong)uStack_f4 * 8);
          puVar15 = (uint *)((ulong)uStack_e4 * *(long *)(lVar3 + 0x60) + *(long *)(lVar3 + 0x58));
          lVar7 = *(long *)(lVar3 + 0x88);
          lVar3 = *(long *)(lVar3 + 0x90);
          puVar10 = (undefined4 *)((ulong)*puVar15 * lVar3 + lVar7);
          local_c8._4_4_ = puVar10[1];
          _uStack_c0 = 0;
          local_d8._4_4_ = *puVar10;
          _uStack_d0 = 0;
          local_b8._4_4_ = puVar10[2];
          _uStack_b0 = 0;
          puVar11 = (undefined4 *)((ulong)puVar15[1] * lVar3 + lVar7);
          puVar17 = (undefined4 *)((ulong)puVar15[2] * lVar3 + lVar7);
          uVar25 = uVar22 + 2;
          local_98._4_4_ = puVar11[1];
          _uStack_90 = 0;
          local_88._4_4_ = puVar11[2];
          _uStack_80 = 0;
          local_a8._4_4_ = *puVar11;
          _uStack_a0 = 0;
          local_78._4_4_ = *puVar17;
          _uStack_70 = 0;
          local_68._4_4_ = puVar17[1];
          _uStack_60 = 0;
          local_58._4_4_ = puVar17[2];
          uStack_50 = 0;
          if (uVar25 < uVar24) {
            uStack_f0 = *(uint *)(param_1 + lVar23 + 0x4c);
            uStack_e0 = *(uint *)(param_1 + lVar23 + 0x5c);
            lVar3 = *(long *)(lVar2 + (ulong)uStack_f0 * 8);
            puVar15 = (uint *)((ulong)uStack_e0 * *(long *)(lVar3 + 0x60) + *(long *)(lVar3 + 0x58))
            ;
            lVar7 = *(long *)(lVar3 + 0x88);
            lVar3 = *(long *)(lVar3 + 0x90);
            puVar16 = (undefined4 *)((ulong)*puVar15 * lVar3 + lVar7);
            uStack_c0 = puVar16[1];
            uStack_bc = 0;
            uStack_d0 = *puVar16;
            uStack_cc = 0;
            uStack_b0 = puVar16[2];
            uStack_ac = 0;
            puVar12 = (undefined4 *)((ulong)puVar15[1] * lVar3 + lVar7);
            puVar18 = (undefined4 *)((ulong)puVar15[2] * lVar3 + lVar7);
            uVar25 = uVar22 + 3;
            uStack_90 = puVar12[1];
            uStack_8c = 0;
            uStack_80 = puVar12[2];
            uStack_7c = 0;
            uStack_a0 = *puVar12;
            uStack_9c = 0;
            uStack_70 = *puVar18;
            uStack_6c = 0;
            uStack_60 = puVar18[1];
            uStack_5c = 0;
            uStack_50._0_4_ = puVar18[2];
            uStack_50._4_4_ = 0;
            if (uVar25 < uVar24) {
              uStack_ec = *(uint *)(param_1 + lVar23 + 0x6c);
              uStack_dc = *(uint *)(param_1 + lVar23 + 0x7c);
              lVar2 = *(long *)(lVar2 + (ulong)uStack_ec * 8);
              puVar15 = (uint *)((ulong)uStack_dc * *(long *)(lVar2 + 0x60) +
                                *(long *)(lVar2 + 0x58));
              lVar3 = *(long *)(lVar2 + 0x88);
              lVar2 = *(long *)(lVar2 + 0x90);
              puVar19 = (undefined4 *)((ulong)*puVar15 * lVar2 + lVar3);
              uStack_bc = puVar19[1];
              uStack_cc = *puVar19;
              uStack_ac = puVar19[2];
              puVar20 = (undefined4 *)((ulong)puVar15[1] * lVar2 + lVar3);
              uStack_8c = puVar20[1];
              uStack_9c = *puVar20;
              uStack_7c = puVar20[2];
              puVar21 = (undefined4 *)((ulong)puVar15[2] * lVar2 + lVar3);
              uStack_5c = puVar21[1];
              uStack_6c = *puVar21;
              uStack_50._4_4_ = puVar21[2];
              uVar22 = uVar22 + 4;
              uVar28 = local_68._0_4_;
              uVar31 = puVar17[1];
              uVar33 = puVar18[1];
              uVar34 = puVar21[1];
              uVar35 = local_78._0_4_;
              uVar36 = *puVar17;
              uVar37 = *puVar18;
              uVar38 = *puVar21;
              uVar29 = local_88._0_4_;
              uVar39 = puVar11[2];
              uVar40 = puVar12[2];
              uVar41 = puVar20[2];
              uVar42 = local_98._0_4_;
              uVar43 = puVar11[1];
              uVar44 = puVar12[1];
              uVar45 = puVar20[1];
              uVar46 = local_a8._0_4_;
              uVar32 = *puVar11;
              uVar47 = *puVar12;
              uVar48 = *puVar20;
              uVar49 = local_b8._0_4_;
              uVar50 = puVar10[2];
              uVar51 = puVar16[2];
              uVar52 = puVar19[2];
              uVar53 = local_c8._0_4_;
              uVar54 = puVar10[1];
              uVar55 = puVar16[1];
              uVar56 = puVar19[1];
              uVar57 = local_d8._0_4_;
              uVar58 = *puVar10;
              uVar59 = *puVar16;
              uVar60 = *puVar19;
              auVar30 = local_58;
              goto LAB_0010649d;
            }
          }
        }
        uVar22 = uVar25;
        uVar28 = local_68._0_4_;
        uVar31 = local_68._4_4_;
        uVar33 = uStack_60;
        uVar34 = uStack_5c;
        uVar35 = local_78._0_4_;
        uVar36 = local_78._4_4_;
        uVar37 = uStack_70;
        uVar38 = uStack_6c;
        uVar29 = local_88._0_4_;
        uVar39 = local_88._4_4_;
        uVar40 = uStack_80;
        uVar41 = uStack_7c;
        uVar42 = local_98._0_4_;
        uVar43 = local_98._4_4_;
        uVar44 = uStack_90;
        uVar45 = uStack_8c;
        uVar46 = local_a8._0_4_;
        uVar32 = local_a8._4_4_;
        uVar47 = uStack_a0;
        uVar48 = uStack_9c;
        uVar49 = local_b8._0_4_;
        uVar50 = local_b8._4_4_;
        uVar51 = uStack_b0;
        uVar52 = uStack_ac;
        uVar53 = local_c8._0_4_;
        uVar54 = local_c8._4_4_;
        uVar55 = uStack_c0;
        uVar56 = uStack_bc;
        uVar57 = local_d8._0_4_;
        uVar58 = local_d8._4_4_;
        uVar59 = uStack_d0;
        uVar60 = uStack_cc;
        auVar30 = local_58;
      }
      else {
        auVar30 = (undefined1  [8])0x0;
        uStack_50 = 0;
        uVar28 = 0;
        uVar31 = 0;
        uVar33 = 0;
        uVar34 = 0;
        uVar29 = 0;
        uVar32 = 0;
        uVar35 = uVar28;
        uVar36 = uVar31;
        uVar37 = uVar33;
        uVar38 = uVar34;
        uVar39 = uVar31;
        uVar40 = uVar33;
        uVar41 = uVar34;
        uVar42 = uVar29;
        uVar43 = uVar31;
        uVar44 = uVar33;
        uVar45 = uVar34;
        uVar46 = uVar29;
        uVar47 = uVar33;
        uVar48 = uVar34;
        uVar49 = uVar29;
        uVar50 = uVar32;
        uVar51 = uVar33;
        uVar52 = uVar34;
        uVar53 = uVar29;
        uVar54 = uVar32;
        uVar55 = uVar33;
        uVar56 = uVar34;
        uVar57 = uVar29;
        uVar58 = uVar32;
        uVar59 = uVar33;
        uVar60 = uVar34;
      }
LAB_0010649d:
      *puVar8 = uVar57;
      puVar8[1] = uVar58;
      puVar8[2] = uVar59;
      puVar8[3] = uVar60;
      puVar10 = puVar8 + 0x2c;
      puVar8[4] = uVar53;
      puVar8[5] = uVar54;
      puVar8[6] = uVar55;
      puVar8[7] = uVar56;
      puVar8[8] = uVar49;
      puVar8[9] = uVar50;
      puVar8[10] = uVar51;
      puVar8[0xb] = uVar52;
      puVar8[0xc] = uVar46;
      puVar8[0xd] = uVar32;
      puVar8[0xe] = uVar47;
      puVar8[0xf] = uVar48;
      puVar8[0x10] = uVar42;
      puVar8[0x11] = uVar43;
      puVar8[0x12] = uVar44;
      puVar8[0x13] = uVar45;
      puVar8[0x14] = uVar29;
      puVar8[0x15] = uVar39;
      puVar8[0x16] = uVar40;
      puVar8[0x17] = uVar41;
      puVar8[0x18] = uVar35;
      puVar8[0x19] = uVar36;
      puVar8[0x1a] = uVar37;
      puVar8[0x1b] = uVar38;
      puVar8[0x1c] = uVar28;
      puVar8[0x1d] = uVar31;
      puVar8[0x1e] = uVar33;
      puVar8[0x1f] = uVar34;
      *(undefined1 (*) [8])(puVar8 + 0x20) = auVar30;
      *(undefined8 *)(puVar8 + 0x22) = uStack_50;
      puVar8[0x24] = local_f8;
      puVar8[0x25] = uStack_f4;
      puVar8[0x26] = uStack_f0;
      puVar8[0x27] = uStack_ec;
      puVar8[0x28] = local_e8;
      puVar8[0x29] = uStack_e4;
      puVar8[0x2a] = uStack_e0;
      puVar8[0x2b] = uStack_dc;
      puVar8 = puVar10;
    } while (puVar27 != puVar10);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar14;
}



/* embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> > >::createLeaf(embree::PrimRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&) */

ulong __thiscall
embree::sse2::BVHNBuilderVirtual<4>::
BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>::createLeaf
          (BVHNBuilderT<embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>> *this,
          PrimRef *param_1,range *param_2,CachedAllocator *param_3)

{
  long *plVar1;
  long lVar2;
  long lVar3;
  ulong *puVar4;
  FastAllocator *this_00;
  ulong *puVar5;
  ulong uVar6;
  long lVar7;
  float *pfVar8;
  undefined8 uVar9;
  float *pfVar10;
  float *pfVar11;
  ulong uVar12;
  ulong uVar13;
  uint *puVar14;
  float *pfVar15;
  float *pfVar16;
  float *pfVar17;
  float *pfVar18;
  ulong uVar19;
  long lVar20;
  ulong uVar21;
  ulong uVar22;
  ulong uVar23;
  float *pfVar24;
  long in_FS_OFFSET;
  float fVar25;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar29;
  float fVar30;
  float fVar31;
  float fVar32;
  float fVar33;
  undefined1 auVar34 [4];
  float fVar35;
  float fVar36;
  float fVar37;
  float fVar38;
  float fVar39;
  float fVar40;
  undefined1 auVar41 [4];
  float fVar42;
  float fVar43;
  float fVar44;
  undefined1 auVar45 [4];
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  float fVar56;
  float fVar57;
  float fVar58;
  float fVar59;
  float fVar60;
  ulong local_108;
  ulong local_100;
  float local_f8;
  float fStack_f4;
  float fStack_f0;
  float fStack_ec;
  float local_e8;
  float fStack_e4;
  float fStack_e0;
  float fStack_dc;
  undefined1 local_d8 [4];
  undefined1 auStack_d4 [8];
  float fStack_cc;
  undefined1 local_c8 [4];
  undefined1 auStack_c4 [8];
  float fStack_bc;
  undefined1 local_b8 [4];
  undefined1 auStack_b4 [8];
  float fStack_ac;
  undefined1 local_a8 [4];
  undefined1 auStack_a4 [8];
  float fStack_9c;
  undefined1 local_98 [4];
  undefined1 auStack_94 [8];
  float fStack_8c;
  undefined1 local_88 [4];
  undefined1 auStack_84 [8];
  float fStack_7c;
  undefined1 local_78 [4];
  undefined1 auStack_74 [8];
  float fStack_6c;
  undefined1 local_68 [4];
  undefined1 auStack_64 [8];
  float fStack_5c;
  undefined1 local_58 [4];
  undefined1 auStack_54 [8];
  float fStack_4c;
  long local_40;
  
  uVar19 = *(ulong *)param_2;
  puVar4 = *(ulong **)(param_3 + 0x10);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  this_00 = *(FastAllocator **)param_3;
  uVar13 = *puVar4;
  uVar21 = (*(long *)(param_2 + 8) + 3) - uVar19;
  uVar22 = uVar21 & 0xfffffffffffffffc;
  uVar21 = uVar21 >> 2;
  lVar2 = uVar22 * 2 + uVar21 * 3;
  uVar23 = lVar2 * 0x10;
  local_108 = uVar23;
  if (this_00 != *(FastAllocator **)(uVar13 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar13 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xa8) + *(long *)(uVar13 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar13 + 0x98) + *(long *)(uVar13 + 0x58)) -
                           *(long *)(uVar13 + 0x50)) - *(long *)(uVar13 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xb0) + *(long *)(uVar13 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar13 + 0x48) = 0;
    *(undefined8 *)(uVar13 + 0x58) = 0;
    *(undefined8 *)(uVar13 + 0x50) = 0;
    *(undefined8 *)(uVar13 + 0x68) = 0;
    *(undefined8 *)(uVar13 + 0x70) = 0;
    *(undefined8 *)(uVar13 + 0x60) = 0;
    if (this_00 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar13 + 0x88) = 0;
      uVar9 = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
    }
    else {
      uVar9 = *(undefined8 *)(this_00 + 0x10);
      *(undefined8 *)(uVar13 + 0x88) = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x60) = uVar9;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
      *(undefined8 *)(uVar13 + 0xa0) = 0;
      uVar9 = *(undefined8 *)(this_00 + 0x10);
    }
    *(undefined8 *)(uVar13 + 0xa0) = uVar9;
    LOCK();
    *(FastAllocator **)(uVar13 + 8) = this_00;
    UNLOCK();
    local_100 = uVar13;
    embree::MutexSys::lock();
    puVar5 = *(ulong **)(this_00 + 0x138);
    if (puVar5 == *(ulong **)(this_00 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(this_00 + 0x130),puVar5,&local_100);
    }
    else {
      *puVar5 = uVar13;
      *(long *)(this_00 + 0x138) = *(long *)(this_00 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar6 = puVar4[2];
  puVar4[5] = puVar4[5] + uVar23;
  uVar12 = (ulong)(-(int)uVar6 & 0xf);
  lVar3 = uVar6 + uVar12;
  uVar13 = uVar23 + lVar3;
  puVar4[2] = uVar13;
  if (puVar4[3] < uVar13) {
    puVar4[2] = uVar6;
    if (puVar4[4] < (uVar22 * 2 + uVar21 * 3) * 0x40) {
      pfVar8 = (float *)FastAllocator::malloc(this_00,&local_108,0x40,false);
    }
    else {
      local_100 = puVar4[4];
      pfVar8 = (float *)FastAllocator::malloc(this_00,&local_100,0x40,true);
      puVar4[1] = (ulong)pfVar8;
      uVar13 = puVar4[2];
      puVar4[2] = uVar23;
      puVar4[6] = (puVar4[3] + puVar4[6]) - uVar13;
      puVar4[3] = local_100;
      if (local_100 < uVar23) {
        puVar4[2] = 0;
        local_100 = puVar4[4];
        pfVar8 = (float *)FastAllocator::malloc(this_00,&local_100,0x40,false);
        puVar4[1] = (ulong)pfVar8;
        uVar13 = puVar4[2];
        puVar4[2] = uVar23;
        puVar4[6] = (puVar4[3] + puVar4[6]) - uVar13;
        puVar4[3] = local_100;
        if (local_100 < uVar23) {
          puVar4[2] = 0;
          pfVar8 = (float *)0x0;
        }
      }
    }
  }
  else {
    puVar4[6] = puVar4[6] + uVar12;
    pfVar8 = (float *)(lVar3 + puVar4[1]);
  }
  uVar13 = 7;
  if (uVar21 < 8) {
    uVar13 = uVar21;
  }
  pfVar24 = pfVar8 + lVar2 * 4;
  uVar13 = uVar13 + 8 | (ulong)pfVar8;
  if (uVar21 != 0) {
    do {
      uVar21 = *(ulong *)(param_2 + 8);
      local_f8 = -NAN;
      fStack_f4 = -NAN;
      fStack_f0 = -NAN;
      fStack_ec = -NAN;
      local_e8 = -NAN;
      fStack_e4 = -NAN;
      fStack_e0 = -NAN;
      fStack_dc = -NAN;
      _local_d8 = (undefined1  [16])0x0;
      _local_c8 = (undefined1  [16])0x0;
      _local_b8 = (undefined1  [16])0x0;
      _local_a8 = (undefined1  [16])0x0;
      _local_98 = (undefined1  [16])0x0;
      _local_88 = (undefined1  [16])0x0;
      _local_78 = (undefined1  [16])0x0;
      _local_68 = (undefined1  [16])0x0;
      _local_58 = (undefined1  [16])0x0;
      if (uVar19 < uVar21) {
        lVar2 = *(long *)(*(long *)(*(long *)(this + 8) + 0x68) + 0x1e0);
        lVar20 = uVar19 * 0x20;
        local_f8 = *(float *)(param_1 + lVar20 + 0xc);
        local_e8 = *(float *)(param_1 + lVar20 + 0x1c);
        lVar3 = *(long *)(lVar2 + (ulong)(uint)local_f8 * 8);
        puVar14 = (uint *)((ulong)(uint)local_e8 * *(long *)(lVar3 + 0x60) + *(long *)(lVar3 + 0x58)
                          );
        lVar7 = *(long *)(lVar3 + 0x88);
        lVar3 = *(long *)(lVar3 + 0x90);
        pfVar10 = (float *)((ulong)*puVar14 * lVar3 + lVar7);
        local_b8 = (undefined1  [4])pfVar10[2];
        local_c8 = (undefined1  [4])pfVar10[1];
        local_d8 = (undefined1  [4])*pfVar10;
        _auStack_c4 = SUB1612((undefined1  [16])0x0,4);
        _auStack_d4 = SUB1612((undefined1  [16])0x0,4);
        _auStack_b4 = SUB1612((undefined1  [16])0x0,4);
        pfVar10 = (float *)((ulong)puVar14[1] * lVar3 + lVar7);
        pfVar15 = (float *)((ulong)puVar14[2] * lVar3 + lVar7);
        local_88 = (undefined1  [4])pfVar10[2];
        local_98 = (undefined1  [4])pfVar10[1];
        local_58 = (undefined1  [4])pfVar15[2];
        local_68 = (undefined1  [4])pfVar15[1];
        local_78 = (undefined1  [4])*pfVar15;
        local_a8 = (undefined1  [4])*pfVar10;
        uVar22 = uVar19 + 1;
        _auStack_94 = SUB1612((undefined1  [16])0x0,4);
        _auStack_84 = SUB1612((undefined1  [16])0x0,4);
        _auStack_a4 = SUB1612((undefined1  [16])0x0,4);
        _auStack_74 = SUB1612((undefined1  [16])0x0,4);
        _auStack_64 = SUB1612((undefined1  [16])0x0,4);
        _auStack_54 = SUB1612((undefined1  [16])0x0,4);
        if (uVar22 < uVar21) {
          fStack_f4 = *(float *)(param_1 + lVar20 + 0x2c);
          fStack_e4 = *(float *)(param_1 + lVar20 + 0x3c);
          lVar3 = *(long *)(lVar2 + (ulong)(uint)fStack_f4 * 8);
          puVar14 = (uint *)((ulong)(uint)fStack_e4 * *(long *)(lVar3 + 0x60) +
                            *(long *)(lVar3 + 0x58));
          lVar7 = *(long *)(lVar3 + 0x88);
          lVar3 = *(long *)(lVar3 + 0x90);
          pfVar10 = (float *)((ulong)*puVar14 * lVar3 + lVar7);
          fVar36 = pfVar10[2];
          fVar42 = pfVar10[1];
          fVar46 = *pfVar10;
          _local_c8 = CONCAT44(fVar42,local_c8);
          stack0xffffffffffffff40 = 0;
          _local_d8 = CONCAT44(fVar46,local_d8);
          stack0xffffffffffffff30 = 0;
          _local_b8 = CONCAT44(fVar36,local_b8);
          stack0xffffffffffffff50 = 0;
          pfVar10 = (float *)((ulong)puVar14[1] * lVar3 + lVar7);
          pfVar15 = (float *)((ulong)puVar14[2] * lVar3 + lVar7);
          uVar22 = uVar19 + 2;
          _local_98 = CONCAT44(pfVar10[1],local_98);
          stack0xffffffffffffff70 = 0;
          _local_88 = CONCAT44(pfVar10[2],local_88);
          stack0xffffffffffffff80 = 0;
          _local_a8 = CONCAT44(*pfVar10,local_a8);
          stack0xffffffffffffff60 = 0;
          _local_78 = CONCAT44(*pfVar15,local_78);
          stack0xffffffffffffff90 = 0;
          _local_68 = CONCAT44(pfVar15[1],local_68);
          stack0xffffffffffffffa0 = 0;
          _local_58 = CONCAT44(pfVar15[2],local_58);
          stack0xffffffffffffffb0 = 0;
          if (uVar22 < uVar21) {
            fStack_f0 = *(float *)(param_1 + lVar20 + 0x4c);
            fStack_e0 = *(float *)(param_1 + lVar20 + 0x5c);
            lVar3 = *(long *)(lVar2 + (ulong)(uint)fStack_f0 * 8);
            puVar14 = (uint *)((ulong)(uint)fStack_e0 * *(long *)(lVar3 + 0x60) +
                              *(long *)(lVar3 + 0x58));
            lVar7 = *(long *)(lVar3 + 0x88);
            lVar3 = *(long *)(lVar3 + 0x90);
            pfVar11 = (float *)((ulong)*puVar14 * lVar3 + lVar7);
            auStack_b4._4_4_ = pfVar11[2];
            auStack_c4._4_4_ = pfVar11[1];
            auStack_d4._4_4_ = *pfVar11;
            fStack_bc = 0.0;
            fStack_cc = 0.0;
            fStack_ac = 0.0;
            pfVar11 = (float *)((ulong)puVar14[1] * lVar3 + lVar7);
            pfVar16 = (float *)((ulong)puVar14[2] * lVar3 + lVar7);
            uVar22 = uVar19 + 3;
            auStack_94._4_4_ = pfVar11[1];
            fStack_8c = 0.0;
            auStack_84._4_4_ = pfVar11[2];
            fStack_7c = 0.0;
            auStack_a4._4_4_ = *pfVar11;
            fStack_9c = 0.0;
            auStack_74._4_4_ = *pfVar16;
            fStack_6c = 0.0;
            auStack_64._4_4_ = pfVar16[1];
            fStack_5c = 0.0;
            auStack_54._4_4_ = pfVar16[2];
            fStack_4c = 0.0;
            if (uVar22 < uVar21) {
              fStack_ec = *(float *)(param_1 + lVar20 + 0x6c);
              fStack_dc = *(float *)(param_1 + lVar20 + 0x7c);
              lVar2 = *(long *)(lVar2 + (ulong)(uint)fStack_ec * 8);
              puVar14 = (uint *)((ulong)(uint)fStack_dc * *(long *)(lVar2 + 0x60) +
                                *(long *)(lVar2 + 0x58));
              lVar3 = *(long *)(lVar2 + 0x88);
              lVar2 = *(long *)(lVar2 + 0x90);
              pfVar17 = (float *)((ulong)*puVar14 * lVar2 + lVar3);
              fStack_ac = pfVar17[2];
              fStack_bc = pfVar17[1];
              fStack_cc = *pfVar17;
              pfVar17 = (float *)((ulong)puVar14[1] * lVar2 + lVar3);
              fStack_9c = *pfVar17;
              fStack_8c = pfVar17[1];
              fStack_7c = pfVar17[2];
              pfVar18 = (float *)((ulong)puVar14[2] * lVar2 + lVar3);
              fStack_5c = pfVar18[1];
              fStack_6c = *pfVar18;
              fStack_4c = pfVar18[2];
              fVar25 = (float)local_58 - (float)local_b8;
              fVar26 = pfVar15[2] - fVar36;
              fVar27 = pfVar16[2] - (float)auStack_b4._4_4_;
              fVar28 = pfVar18[2] - fStack_ac;
              fVar33 = (float)local_78 - (float)local_d8;
              fVar35 = *pfVar15 - fVar46;
              fVar37 = *pfVar16 - (float)auStack_d4._4_4_;
              fVar38 = *pfVar18 - fStack_cc;
              uVar19 = uVar19 + 4;
              fVar29 = (float)local_68 - (float)local_c8;
              fVar30 = pfVar15[1] - fVar42;
              fVar31 = pfVar16[1] - (float)auStack_c4._4_4_;
              fVar32 = pfVar18[1] - fStack_bc;
              auVar34 = local_b8;
              fVar39 = (float)auStack_b4._4_4_;
              fVar40 = fStack_ac;
              auVar41 = local_c8;
              fVar43 = (float)auStack_c4._4_4_;
              fVar44 = fStack_bc;
              auVar45 = local_d8;
              fVar47 = (float)auStack_d4._4_4_;
              fVar48 = fStack_cc;
              fVar49 = (float)local_b8 - (float)local_88;
              fVar50 = fVar36 - pfVar10[2];
              fVar51 = (float)auStack_b4._4_4_ - pfVar11[2];
              fVar52 = fStack_ac - pfVar17[2];
              fVar53 = (float)local_c8 - (float)local_98;
              fVar54 = fVar42 - pfVar10[1];
              fVar55 = (float)auStack_c4._4_4_ - pfVar11[1];
              fVar56 = fStack_bc - pfVar17[1];
              fVar57 = (float)local_d8 - (float)local_a8;
              fVar58 = fVar46 - *pfVar10;
              fVar59 = (float)auStack_d4._4_4_ - *pfVar11;
              fVar60 = fStack_cc - *pfVar17;
              goto LAB_00106e02;
            }
          }
        }
        fVar25 = (float)local_58 - (float)local_b8;
        fVar26 = (float)auStack_54._0_4_ - (float)auStack_b4._0_4_;
        fVar27 = (float)auStack_54._4_4_ - (float)auStack_b4._4_4_;
        fVar28 = fStack_4c - fStack_ac;
        fVar33 = (float)local_78 - (float)local_d8;
        fVar35 = (float)auStack_74._0_4_ - (float)auStack_d4._0_4_;
        fVar37 = (float)auStack_74._4_4_ - (float)auStack_d4._4_4_;
        fVar38 = fStack_6c - fStack_cc;
        uVar19 = uVar22;
        fVar29 = (float)local_68 - (float)local_c8;
        fVar30 = (float)auStack_64._0_4_ - (float)auStack_c4._0_4_;
        fVar31 = (float)auStack_64._4_4_ - (float)auStack_c4._4_4_;
        fVar32 = fStack_5c - fStack_bc;
        auVar34 = local_b8;
        fVar36 = (float)auStack_b4._0_4_;
        fVar39 = (float)auStack_b4._4_4_;
        fVar40 = fStack_ac;
        auVar41 = local_c8;
        fVar42 = (float)auStack_c4._0_4_;
        fVar43 = (float)auStack_c4._4_4_;
        fVar44 = fStack_bc;
        auVar45 = local_d8;
        fVar46 = (float)auStack_d4._0_4_;
        fVar47 = (float)auStack_d4._4_4_;
        fVar48 = fStack_cc;
        fVar49 = (float)local_b8 - (float)local_88;
        fVar50 = (float)auStack_b4._0_4_ - (float)auStack_84._0_4_;
        fVar51 = (float)auStack_b4._4_4_ - (float)auStack_84._4_4_;
        fVar52 = fStack_ac - fStack_7c;
        fVar53 = (float)local_c8 - (float)local_98;
        fVar54 = (float)auStack_c4._0_4_ - (float)auStack_94._0_4_;
        fVar55 = (float)auStack_c4._4_4_ - (float)auStack_94._4_4_;
        fVar56 = fStack_bc - fStack_8c;
        fVar57 = (float)local_d8 - (float)local_a8;
        fVar58 = (float)auStack_d4._0_4_ - (float)auStack_a4._0_4_;
        fVar59 = (float)auStack_d4._4_4_ - (float)auStack_a4._4_4_;
        fVar60 = fStack_cc - fStack_9c;
      }
      else {
        fVar33 = 0.0;
        fVar35 = 0.0;
        fVar37 = 0.0;
        fVar38 = 0.0;
        fVar25 = 0.0;
        fVar26 = 0.0;
        fVar27 = 0.0;
        fVar28 = 0.0;
        auVar34 = (undefined1  [4])0x0;
        fVar36 = 0.0;
        fVar29 = fVar25;
        fVar30 = fVar26;
        fVar31 = fVar27;
        fVar32 = fVar28;
        fVar39 = fVar27;
        fVar40 = fVar28;
        auVar41 = auVar34;
        fVar42 = fVar36;
        fVar43 = fVar27;
        fVar44 = fVar28;
        auVar45 = auVar34;
        fVar46 = fVar36;
        fVar47 = fVar27;
        fVar48 = fVar28;
        fVar49 = (float)auVar34;
        fVar50 = fVar36;
        fVar51 = fVar27;
        fVar52 = fVar28;
        fVar53 = (float)auVar34;
        fVar54 = fVar26;
        fVar55 = fVar27;
        fVar56 = fVar28;
        fVar57 = (float)auVar34;
        fVar58 = fVar26;
        fVar59 = fVar27;
        fVar60 = fVar28;
      }
LAB_00106e02:
      *pfVar8 = (float)auVar45;
      pfVar8[1] = fVar46;
      pfVar8[2] = fVar47;
      pfVar8[3] = fVar48;
      pfVar10 = pfVar8 + 0x2c;
      pfVar8[4] = (float)auVar41;
      pfVar8[5] = fVar42;
      pfVar8[6] = fVar43;
      pfVar8[7] = fVar44;
      pfVar8[8] = (float)auVar34;
      pfVar8[9] = fVar36;
      pfVar8[10] = fVar39;
      pfVar8[0xb] = fVar40;
      pfVar8[0xc] = fVar57;
      pfVar8[0xd] = fVar58;
      pfVar8[0xe] = fVar59;
      pfVar8[0xf] = fVar60;
      pfVar8[0x10] = fVar53;
      pfVar8[0x11] = fVar54;
      pfVar8[0x12] = fVar55;
      pfVar8[0x13] = fVar56;
      pfVar8[0x14] = fVar49;
      pfVar8[0x15] = fVar50;
      pfVar8[0x16] = fVar51;
      pfVar8[0x17] = fVar52;
      pfVar8[0x18] = fVar33;
      pfVar8[0x19] = fVar35;
      pfVar8[0x1a] = fVar37;
      pfVar8[0x1b] = fVar38;
      pfVar8[0x1c] = fVar29;
      pfVar8[0x1d] = fVar30;
      pfVar8[0x1e] = fVar31;
      pfVar8[0x1f] = fVar32;
      pfVar8[0x20] = fVar25;
      pfVar8[0x21] = fVar26;
      pfVar8[0x22] = fVar27;
      pfVar8[0x23] = fVar28;
      pfVar8[0x24] = local_f8;
      pfVar8[0x25] = fStack_f4;
      pfVar8[0x26] = fStack_f0;
      pfVar8[0x27] = fStack_ec;
      pfVar8[0x28] = local_e8;
      pfVar8[0x29] = fStack_e4;
      pfVar8[0x2a] = fStack_e0;
      pfVar8[0x2b] = fStack_dc;
      pfVar8 = pfVar10;
    } while (pfVar24 != pfVar10);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar13;
}



/* embree::NodeRefPtr<4>
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> >
   >::TEMPNAMEPLACEHOLDERVALUE(embree::PrimRef*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator) const [clone .isra.0] */

ulong embree::sse2::BVHBuilderBinnedFastSpatialSAH::
      CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>
      ::operator()(long *param_1,long param_2,ulong *param_3,FastAllocator *param_4,ulong *param_5)

{
  long *plVar1;
  long lVar2;
  undefined4 *puVar3;
  ulong *puVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  undefined4 *puVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  undefined4 *puVar12;
  ulong uVar13;
  ulong uVar14;
  uint *puVar15;
  undefined4 *puVar16;
  undefined4 *puVar17;
  undefined4 *puVar18;
  undefined4 *puVar19;
  undefined4 *puVar20;
  undefined4 *puVar21;
  undefined8 uVar22;
  ulong uVar23;
  ulong uVar24;
  ulong uVar25;
  ulong uVar26;
  long in_FS_OFFSET;
  undefined4 uVar27;
  undefined4 uVar28;
  undefined1 auVar29 [8];
  undefined4 uVar30;
  undefined4 uVar31;
  undefined4 uVar32;
  undefined4 uVar33;
  undefined4 uVar34;
  undefined4 uVar35;
  undefined4 uVar36;
  undefined4 uVar37;
  undefined4 uVar38;
  undefined4 uVar39;
  undefined4 uVar40;
  undefined4 uVar41;
  undefined4 uVar42;
  undefined4 uVar43;
  undefined4 uVar44;
  undefined4 uVar45;
  undefined4 uVar46;
  undefined4 uVar47;
  undefined4 uVar48;
  undefined4 uVar49;
  undefined4 uVar50;
  undefined4 uVar51;
  undefined4 uVar52;
  undefined4 uVar53;
  undefined4 uVar54;
  undefined4 uVar55;
  undefined4 uVar56;
  undefined4 uVar57;
  undefined4 uVar58;
  undefined4 uVar59;
  ulong local_108;
  ulong local_100;
  uint local_f8;
  uint uStack_f4;
  uint uStack_f0;
  uint uStack_ec;
  uint local_e8;
  uint uStack_e4;
  uint uStack_e0;
  uint uStack_dc;
  undefined1 local_d8 [8];
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined1 local_c8 [8];
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined1 local_b8 [8];
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined1 local_a8 [8];
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined1 local_98 [8];
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined1 local_88 [8];
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined1 local_78 [8];
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined1 local_68 [8];
  undefined4 uStack_60;
  undefined4 uStack_5c;
  undefined1 local_58 [8];
  undefined8 uStack_50;
  long local_40;
  
  uVar23 = *param_3;
  uVar14 = param_3[1];
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar23 < uVar14) {
    lVar8 = uVar23 * 0x20 + param_2;
    do {
      *(uint *)(lVar8 + 0xc) = *(uint *)(lVar8 + 0xc) & 0x7ffffff;
      uVar14 = param_3[1];
      uVar23 = uVar23 + 1;
      lVar8 = lVar8 + 0x20;
    } while (uVar23 < uVar14);
    uVar23 = *param_3;
  }
  uVar24 = (uVar14 + 3) - uVar23;
  uVar25 = uVar24 & 0xfffffffffffffffc;
  uVar24 = uVar24 >> 2;
  lVar8 = uVar25 * 2 + uVar24 * 3;
  uVar14 = *param_5;
  uVar26 = lVar8 * 0x10;
  local_108 = uVar26;
  if (param_4 != *(FastAllocator **)(uVar14 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar14 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar14 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar14 + 0xa8) + *(long *)(uVar14 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar14 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar14 + 0x98) + *(long *)(uVar14 + 0x58)) -
                           *(long *)(uVar14 + 0x50)) - *(long *)(uVar14 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar14 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar14 + 0xb0) + *(long *)(uVar14 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar14 + 0x48) = 0;
    *(undefined8 *)(uVar14 + 0x58) = 0;
    *(undefined8 *)(uVar14 + 0x50) = 0;
    *(undefined8 *)(uVar14 + 0x68) = 0;
    *(undefined8 *)(uVar14 + 0x70) = 0;
    *(undefined8 *)(uVar14 + 0x60) = 0;
    if (param_4 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar14 + 0x88) = 0;
      uVar22 = 0;
      *(undefined8 *)(uVar14 + 0x98) = 0;
      *(undefined8 *)(uVar14 + 0x90) = 0;
      *(undefined8 *)(uVar14 + 0xa8) = 0;
      *(undefined8 *)(uVar14 + 0xb0) = 0;
    }
    else {
      uVar22 = *(undefined8 *)(param_4 + 0x10);
      *(undefined8 *)(uVar14 + 0x88) = 0;
      *(undefined8 *)(uVar14 + 0x98) = 0;
      *(undefined8 *)(uVar14 + 0x60) = uVar22;
      *(undefined8 *)(uVar14 + 0x90) = 0;
      *(undefined8 *)(uVar14 + 0xa8) = 0;
      *(undefined8 *)(uVar14 + 0xb0) = 0;
      *(undefined8 *)(uVar14 + 0xa0) = 0;
      uVar22 = *(undefined8 *)(param_4 + 0x10);
    }
    *(undefined8 *)(uVar14 + 0xa0) = uVar22;
    LOCK();
    *(FastAllocator **)(uVar14 + 8) = param_4;
    UNLOCK();
    local_100 = uVar14;
    embree::MutexSys::lock();
    puVar4 = *(ulong **)(param_4 + 0x138);
    if (puVar4 == *(ulong **)(param_4 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(param_4 + 0x130),puVar4,&local_100,
                 &FastAllocator::s_thread_local_allocators_lock);
    }
    else {
      *puVar4 = uVar14;
      *(long *)(param_4 + 0x138) = *(long *)(param_4 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar5 = param_5[2];
  param_5[5] = param_5[5] + uVar26;
  uVar13 = (ulong)(-(int)uVar5 & 0xf);
  lVar2 = uVar5 + uVar13;
  uVar14 = uVar26 + lVar2;
  param_5[2] = uVar14;
  if (param_5[3] < uVar14) {
    param_5[2] = uVar5;
    if (param_5[4] < (uVar25 * 2 + uVar24 * 3) * 0x40) {
      puVar9 = (undefined4 *)FastAllocator::malloc(param_4,&local_108,0x40,false);
    }
    else {
      local_100 = param_5[4];
      puVar9 = (undefined4 *)FastAllocator::malloc(param_4,&local_100,0x40,true);
      param_5[1] = (ulong)puVar9;
      uVar14 = param_5[2];
      param_5[2] = uVar26;
      param_5[6] = (param_5[3] + param_5[6]) - uVar14;
      param_5[3] = local_100;
      if (local_100 < uVar26) {
        local_100 = param_5[4];
        param_5[2] = 0;
        puVar9 = (undefined4 *)FastAllocator::malloc(param_4,&local_100,0x40,false);
        param_5[1] = (ulong)puVar9;
        uVar14 = param_5[2];
        param_5[2] = uVar26;
        param_5[6] = (param_5[3] + param_5[6]) - uVar14;
        param_5[3] = local_100;
        if (local_100 < uVar26) {
          param_5[2] = 0;
          puVar9 = (undefined4 *)0x0;
        }
      }
    }
  }
  else {
    param_5[6] = param_5[6] + uVar13;
    puVar9 = (undefined4 *)(lVar2 + param_5[1]);
  }
  puVar3 = puVar9 + lVar8 * 4;
  uVar14 = 7;
  if (uVar24 < 8) {
    uVar14 = uVar24;
  }
  uVar14 = uVar14 + 8 | (ulong)puVar9;
  if (uVar24 != 0) {
    do {
      uVar24 = param_3[1];
      local_f8 = 0xffffffff;
      uStack_f4 = 0xffffffff;
      uStack_f0 = 0xffffffff;
      uStack_ec = 0xffffffff;
      local_e8 = 0xffffffff;
      uStack_e4 = 0xffffffff;
      uStack_e0 = 0xffffffff;
      uStack_dc = 0xffffffff;
      _local_d8 = (undefined1  [16])0x0;
      _local_c8 = (undefined1  [16])0x0;
      _local_b8 = (undefined1  [16])0x0;
      _local_a8 = (undefined1  [16])0x0;
      _local_98 = (undefined1  [16])0x0;
      _local_88 = (undefined1  [16])0x0;
      _local_78 = (undefined1  [16])0x0;
      _local_68 = (undefined1  [16])0x0;
      _local_58 = (undefined1  [16])0x0;
      if (uVar23 < uVar24) {
        lVar2 = *(long *)(*(long *)(*param_1 + 0x68) + 0x1e0);
        lVar8 = uVar23 * 0x20;
        local_f8 = *(uint *)(param_2 + lVar8 + 0xc);
        local_e8 = *(uint *)(param_2 + lVar8 + 0x1c);
        lVar6 = *(long *)(lVar2 + (ulong)local_f8 * 8);
        puVar15 = (uint *)((ulong)local_e8 * *(long *)(lVar6 + 0x60) + *(long *)(lVar6 + 0x58));
        lVar7 = *(long *)(lVar6 + 0x88);
        lVar6 = *(long *)(lVar6 + 0x90);
        puVar10 = (undefined4 *)((ulong)*puVar15 * lVar6 + lVar7);
        local_b8._0_4_ = puVar10[2];
        local_c8._0_4_ = puVar10[1];
        local_d8._0_4_ = *puVar10;
        stack0xffffffffffffff3c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff2c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff4c = SUB1612((undefined1  [16])0x0,4);
        puVar10 = (undefined4 *)((ulong)puVar15[1] * lVar6 + lVar7);
        puVar16 = (undefined4 *)((ulong)puVar15[2] * lVar6 + lVar7);
        local_88._0_4_ = puVar10[2];
        local_98._0_4_ = puVar10[1];
        local_68._0_4_ = puVar16[1];
        local_78._0_4_ = *puVar16;
        local_a8._0_4_ = *puVar10;
        uVar25 = uVar23 + 1;
        stack0xffffffffffffff6c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff7c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff5c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff8c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff9c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffffac = SUB1612((undefined1  [16])0x0,4);
        local_58._0_4_ = puVar16[2];
        if (uVar25 < uVar24) {
          lVar6 = param_2 + 0x20 + lVar8;
          uStack_f4 = *(uint *)(lVar6 + 0xc);
          uStack_e4 = *(uint *)(lVar6 + 0x1c);
          lVar6 = *(long *)(lVar2 + (ulong)uStack_f4 * 8);
          puVar15 = (uint *)((ulong)uStack_e4 * *(long *)(lVar6 + 0x60) + *(long *)(lVar6 + 0x58));
          lVar7 = *(long *)(lVar6 + 0x88);
          lVar6 = *(long *)(lVar6 + 0x90);
          puVar10 = (undefined4 *)((ulong)*puVar15 * lVar6 + lVar7);
          local_c8._4_4_ = puVar10[1];
          _uStack_c0 = 0;
          local_d8._4_4_ = *puVar10;
          _uStack_d0 = 0;
          local_b8._4_4_ = puVar10[2];
          _uStack_b0 = 0;
          puVar11 = (undefined4 *)((ulong)puVar15[1] * lVar6 + lVar7);
          puVar17 = (undefined4 *)((ulong)puVar15[2] * lVar6 + lVar7);
          uVar25 = uVar23 + 2;
          local_98._4_4_ = puVar11[1];
          _uStack_90 = 0;
          local_88._4_4_ = puVar11[2];
          _uStack_80 = 0;
          local_a8._4_4_ = *puVar11;
          _uStack_a0 = 0;
          local_78._4_4_ = *puVar17;
          _uStack_70 = 0;
          local_68._4_4_ = puVar17[1];
          _uStack_60 = 0;
          local_58._4_4_ = puVar17[2];
          uStack_50 = 0;
          if (uVar25 < uVar24) {
            lVar6 = param_2 + 0x40 + lVar8;
            uStack_f0 = *(uint *)(lVar6 + 0xc);
            uStack_e0 = *(uint *)(lVar6 + 0x1c);
            lVar6 = *(long *)(lVar2 + (ulong)uStack_f0 * 8);
            puVar15 = (uint *)((ulong)uStack_e0 * *(long *)(lVar6 + 0x60) + *(long *)(lVar6 + 0x58))
            ;
            lVar7 = *(long *)(lVar6 + 0x88);
            lVar6 = *(long *)(lVar6 + 0x90);
            puVar16 = (undefined4 *)((ulong)*puVar15 * lVar6 + lVar7);
            uStack_c0 = puVar16[1];
            uStack_bc = 0;
            uStack_d0 = *puVar16;
            uStack_cc = 0;
            uStack_b0 = puVar16[2];
            uStack_ac = 0;
            puVar12 = (undefined4 *)((ulong)puVar15[1] * lVar6 + lVar7);
            puVar18 = (undefined4 *)((ulong)puVar15[2] * lVar6 + lVar7);
            uVar25 = uVar23 + 3;
            uStack_90 = puVar12[1];
            uStack_8c = 0;
            uStack_80 = puVar12[2];
            uStack_7c = 0;
            uStack_a0 = *puVar12;
            uStack_9c = 0;
            uStack_70 = *puVar18;
            uStack_6c = 0;
            uStack_60 = puVar18[1];
            uStack_5c = 0;
            uStack_50._0_4_ = puVar18[2];
            uStack_50._4_4_ = 0;
            if (uVar25 < uVar24) {
              lVar8 = param_2 + 0x60 + lVar8;
              uStack_ec = *(uint *)(lVar8 + 0xc);
              uStack_dc = *(uint *)(lVar8 + 0x1c);
              lVar8 = *(long *)(lVar2 + (ulong)uStack_ec * 8);
              puVar15 = (uint *)((ulong)uStack_dc * *(long *)(lVar8 + 0x60) +
                                *(long *)(lVar8 + 0x58));
              lVar2 = *(long *)(lVar8 + 0x88);
              lVar8 = *(long *)(lVar8 + 0x90);
              puVar19 = (undefined4 *)((ulong)*puVar15 * lVar8 + lVar2);
              uStack_bc = puVar19[1];
              uStack_cc = *puVar19;
              uStack_ac = puVar19[2];
              puVar20 = (undefined4 *)((ulong)puVar15[1] * lVar8 + lVar2);
              uStack_8c = puVar20[1];
              uStack_9c = *puVar20;
              uStack_7c = puVar20[2];
              puVar21 = (undefined4 *)((ulong)puVar15[2] * lVar8 + lVar2);
              uStack_5c = puVar21[1];
              uStack_6c = *puVar21;
              uStack_50._4_4_ = puVar21[2];
              uVar23 = uVar23 + 4;
              uVar27 = local_68._0_4_;
              uVar30 = puVar17[1];
              uVar32 = puVar18[1];
              uVar33 = puVar21[1];
              uVar34 = local_78._0_4_;
              uVar35 = *puVar17;
              uVar36 = *puVar18;
              uVar37 = *puVar21;
              uVar28 = local_88._0_4_;
              uVar38 = puVar11[2];
              uVar39 = puVar12[2];
              uVar40 = puVar20[2];
              uVar41 = local_98._0_4_;
              uVar42 = puVar11[1];
              uVar43 = puVar12[1];
              uVar44 = puVar20[1];
              uVar45 = local_a8._0_4_;
              uVar31 = *puVar11;
              uVar46 = *puVar12;
              uVar47 = *puVar20;
              uVar48 = local_b8._0_4_;
              uVar49 = puVar10[2];
              uVar50 = puVar16[2];
              uVar51 = puVar19[2];
              uVar52 = local_c8._0_4_;
              uVar53 = puVar10[1];
              uVar54 = puVar16[1];
              uVar55 = puVar19[1];
              uVar56 = local_d8._0_4_;
              uVar57 = *puVar10;
              uVar58 = *puVar16;
              uVar59 = *puVar19;
              auVar29 = local_58;
              goto LAB_0010778d;
            }
          }
        }
        uVar23 = uVar25;
        uVar27 = local_68._0_4_;
        uVar30 = local_68._4_4_;
        uVar32 = uStack_60;
        uVar33 = uStack_5c;
        uVar34 = local_78._0_4_;
        uVar35 = local_78._4_4_;
        uVar36 = uStack_70;
        uVar37 = uStack_6c;
        uVar28 = local_88._0_4_;
        uVar38 = local_88._4_4_;
        uVar39 = uStack_80;
        uVar40 = uStack_7c;
        uVar41 = local_98._0_4_;
        uVar42 = local_98._4_4_;
        uVar43 = uStack_90;
        uVar44 = uStack_8c;
        uVar45 = local_a8._0_4_;
        uVar31 = local_a8._4_4_;
        uVar46 = uStack_a0;
        uVar47 = uStack_9c;
        uVar48 = local_b8._0_4_;
        uVar49 = local_b8._4_4_;
        uVar50 = uStack_b0;
        uVar51 = uStack_ac;
        uVar52 = local_c8._0_4_;
        uVar53 = local_c8._4_4_;
        uVar54 = uStack_c0;
        uVar55 = uStack_bc;
        uVar56 = local_d8._0_4_;
        uVar57 = local_d8._4_4_;
        uVar58 = uStack_d0;
        uVar59 = uStack_cc;
        auVar29 = local_58;
      }
      else {
        auVar29 = (undefined1  [8])0x0;
        uStack_50 = 0;
        uVar27 = 0;
        uVar30 = 0;
        uVar32 = 0;
        uVar33 = 0;
        uVar28 = 0;
        uVar31 = 0;
        uVar34 = uVar27;
        uVar35 = uVar30;
        uVar36 = uVar32;
        uVar37 = uVar33;
        uVar38 = uVar30;
        uVar39 = uVar32;
        uVar40 = uVar33;
        uVar41 = uVar28;
        uVar42 = uVar30;
        uVar43 = uVar32;
        uVar44 = uVar33;
        uVar45 = uVar28;
        uVar46 = uVar32;
        uVar47 = uVar33;
        uVar48 = uVar28;
        uVar49 = uVar31;
        uVar50 = uVar32;
        uVar51 = uVar33;
        uVar52 = uVar28;
        uVar53 = uVar31;
        uVar54 = uVar32;
        uVar55 = uVar33;
        uVar56 = uVar28;
        uVar57 = uVar31;
        uVar58 = uVar32;
        uVar59 = uVar33;
      }
LAB_0010778d:
      *puVar9 = uVar56;
      puVar9[1] = uVar57;
      puVar9[2] = uVar58;
      puVar9[3] = uVar59;
      puVar10 = puVar9 + 0x2c;
      puVar9[4] = uVar52;
      puVar9[5] = uVar53;
      puVar9[6] = uVar54;
      puVar9[7] = uVar55;
      puVar9[8] = uVar48;
      puVar9[9] = uVar49;
      puVar9[10] = uVar50;
      puVar9[0xb] = uVar51;
      puVar9[0xc] = uVar45;
      puVar9[0xd] = uVar31;
      puVar9[0xe] = uVar46;
      puVar9[0xf] = uVar47;
      puVar9[0x10] = uVar41;
      puVar9[0x11] = uVar42;
      puVar9[0x12] = uVar43;
      puVar9[0x13] = uVar44;
      puVar9[0x14] = uVar28;
      puVar9[0x15] = uVar38;
      puVar9[0x16] = uVar39;
      puVar9[0x17] = uVar40;
      puVar9[0x18] = uVar34;
      puVar9[0x19] = uVar35;
      puVar9[0x1a] = uVar36;
      puVar9[0x1b] = uVar37;
      puVar9[0x1c] = uVar27;
      puVar9[0x1d] = uVar30;
      puVar9[0x1e] = uVar32;
      puVar9[0x1f] = uVar33;
      *(undefined1 (*) [8])(puVar9 + 0x20) = auVar29;
      *(undefined8 *)(puVar9 + 0x22) = uStack_50;
      puVar9[0x24] = local_f8;
      puVar9[0x25] = uStack_f4;
      puVar9[0x26] = uStack_f0;
      puVar9[0x27] = uStack_ec;
      puVar9[0x28] = local_e8;
      puVar9[0x29] = uStack_e4;
      puVar9[0x2a] = uStack_e0;
      puVar9[0x2b] = uStack_dc;
      puVar9 = puVar10;
    } while (puVar3 != puVar10);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar14;
}



/* embree::NodeRefPtr<4>
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> >
   >::TEMPNAMEPLACEHOLDERVALUE(embree::PrimRef*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator) const [clone .isra.0] */

ulong embree::sse2::BVHBuilderBinnedFastSpatialSAH::
      CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>::
      operator()(long *param_1,long param_2,ulong *param_3,FastAllocator *param_4,ulong *param_5)

{
  long *plVar1;
  long lVar2;
  float *pfVar3;
  ulong *puVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  float *pfVar9;
  float *pfVar10;
  float *pfVar11;
  ulong uVar12;
  ulong uVar13;
  uint *puVar14;
  float *pfVar15;
  float *pfVar16;
  float *pfVar17;
  float *pfVar18;
  undefined8 uVar19;
  ulong uVar20;
  ulong uVar21;
  ulong uVar22;
  ulong uVar23;
  long in_FS_OFFSET;
  float fVar24;
  float fVar25;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar29;
  float fVar30;
  float fVar31;
  float fVar32;
  undefined1 auVar33 [4];
  float fVar34;
  float fVar35;
  float fVar36;
  float fVar37;
  float fVar38;
  float fVar39;
  undefined1 auVar40 [4];
  float fVar41;
  float fVar42;
  float fVar43;
  undefined1 auVar44 [4];
  float fVar45;
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  float fVar56;
  float fVar57;
  float fVar58;
  float fVar59;
  ulong local_108;
  ulong local_100;
  float local_f8;
  float fStack_f4;
  float fStack_f0;
  float fStack_ec;
  float local_e8;
  float fStack_e4;
  float fStack_e0;
  float fStack_dc;
  undefined1 local_d8 [4];
  undefined1 auStack_d4 [8];
  float fStack_cc;
  undefined1 local_c8 [4];
  undefined1 auStack_c4 [8];
  float fStack_bc;
  undefined1 local_b8 [4];
  undefined1 auStack_b4 [8];
  float fStack_ac;
  undefined1 local_a8 [4];
  undefined1 auStack_a4 [8];
  float fStack_9c;
  undefined1 local_98 [4];
  undefined1 auStack_94 [8];
  float fStack_8c;
  undefined1 local_88 [4];
  undefined1 auStack_84 [8];
  float fStack_7c;
  undefined1 local_78 [4];
  undefined1 auStack_74 [8];
  float fStack_6c;
  undefined1 local_68 [4];
  undefined1 auStack_64 [8];
  float fStack_5c;
  undefined1 local_58 [4];
  undefined1 auStack_54 [8];
  float fStack_4c;
  long local_40;
  
  uVar20 = *param_3;
  uVar13 = param_3[1];
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar20 < uVar13) {
    lVar8 = uVar20 * 0x20 + param_2;
    do {
      *(uint *)(lVar8 + 0xc) = *(uint *)(lVar8 + 0xc) & 0x7ffffff;
      uVar13 = param_3[1];
      uVar20 = uVar20 + 1;
      lVar8 = lVar8 + 0x20;
    } while (uVar20 < uVar13);
    uVar20 = *param_3;
  }
  uVar21 = (uVar13 + 3) - uVar20;
  uVar22 = uVar21 & 0xfffffffffffffffc;
  uVar21 = uVar21 >> 2;
  lVar8 = uVar22 * 2 + uVar21 * 3;
  uVar13 = *param_5;
  uVar23 = lVar8 * 0x10;
  local_108 = uVar23;
  if (param_4 != *(FastAllocator **)(uVar13 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar13 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xa8) + *(long *)(uVar13 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar13 + 0x98) + *(long *)(uVar13 + 0x58)) -
                           *(long *)(uVar13 + 0x50)) - *(long *)(uVar13 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xb0) + *(long *)(uVar13 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar13 + 0x48) = 0;
    *(undefined8 *)(uVar13 + 0x58) = 0;
    *(undefined8 *)(uVar13 + 0x50) = 0;
    *(undefined8 *)(uVar13 + 0x68) = 0;
    *(undefined8 *)(uVar13 + 0x70) = 0;
    *(undefined8 *)(uVar13 + 0x60) = 0;
    if (param_4 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar13 + 0x88) = 0;
      uVar19 = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
    }
    else {
      uVar19 = *(undefined8 *)(param_4 + 0x10);
      *(undefined8 *)(uVar13 + 0x88) = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x60) = uVar19;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
      *(undefined8 *)(uVar13 + 0xa0) = 0;
      uVar19 = *(undefined8 *)(param_4 + 0x10);
    }
    *(undefined8 *)(uVar13 + 0xa0) = uVar19;
    LOCK();
    *(FastAllocator **)(uVar13 + 8) = param_4;
    UNLOCK();
    local_100 = uVar13;
    embree::MutexSys::lock();
    puVar4 = *(ulong **)(param_4 + 0x138);
    if (puVar4 == *(ulong **)(param_4 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(param_4 + 0x130),puVar4,&local_100,
                 &FastAllocator::s_thread_local_allocators_lock);
    }
    else {
      *puVar4 = uVar13;
      *(long *)(param_4 + 0x138) = *(long *)(param_4 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar5 = param_5[2];
  param_5[5] = param_5[5] + uVar23;
  uVar12 = (ulong)(-(int)uVar5 & 0xf);
  lVar2 = uVar5 + uVar12;
  uVar13 = uVar23 + lVar2;
  param_5[2] = uVar13;
  if (param_5[3] < uVar13) {
    param_5[2] = uVar5;
    if (param_5[4] < (uVar22 * 2 + uVar21 * 3) * 0x40) {
      pfVar9 = (float *)FastAllocator::malloc(param_4,&local_108,0x40,false);
    }
    else {
      local_100 = param_5[4];
      pfVar9 = (float *)FastAllocator::malloc(param_4,&local_100,0x40,true);
      param_5[1] = (ulong)pfVar9;
      uVar13 = param_5[2];
      param_5[2] = uVar23;
      param_5[6] = (param_5[3] + param_5[6]) - uVar13;
      param_5[3] = local_100;
      if (local_100 < uVar23) {
        local_100 = param_5[4];
        param_5[2] = 0;
        pfVar9 = (float *)FastAllocator::malloc(param_4,&local_100,0x40,false);
        param_5[1] = (ulong)pfVar9;
        uVar13 = param_5[2];
        param_5[2] = uVar23;
        param_5[6] = (param_5[3] + param_5[6]) - uVar13;
        param_5[3] = local_100;
        if (local_100 < uVar23) {
          param_5[2] = 0;
          pfVar9 = (float *)0x0;
        }
      }
    }
  }
  else {
    param_5[6] = param_5[6] + uVar12;
    pfVar9 = (float *)(lVar2 + param_5[1]);
  }
  pfVar3 = pfVar9 + lVar8 * 4;
  uVar13 = 7;
  if (uVar21 < 8) {
    uVar13 = uVar21;
  }
  uVar13 = uVar13 + 8 | (ulong)pfVar9;
  if (uVar21 != 0) {
    do {
      uVar21 = param_3[1];
      local_f8 = -NAN;
      fStack_f4 = -NAN;
      fStack_f0 = -NAN;
      fStack_ec = -NAN;
      local_e8 = -NAN;
      fStack_e4 = -NAN;
      fStack_e0 = -NAN;
      fStack_dc = -NAN;
      _local_d8 = (undefined1  [16])0x0;
      _local_c8 = (undefined1  [16])0x0;
      _local_b8 = (undefined1  [16])0x0;
      _local_a8 = (undefined1  [16])0x0;
      _local_98 = (undefined1  [16])0x0;
      _local_88 = (undefined1  [16])0x0;
      _local_78 = (undefined1  [16])0x0;
      _local_68 = (undefined1  [16])0x0;
      _local_58 = (undefined1  [16])0x0;
      if (uVar20 < uVar21) {
        lVar2 = *(long *)(*(long *)(*param_1 + 0x68) + 0x1e0);
        lVar8 = uVar20 * 0x20;
        local_f8 = *(float *)(param_2 + lVar8 + 0xc);
        local_e8 = *(float *)(param_2 + lVar8 + 0x1c);
        lVar6 = *(long *)(lVar2 + (ulong)(uint)local_f8 * 8);
        puVar14 = (uint *)((ulong)(uint)local_e8 * *(long *)(lVar6 + 0x60) + *(long *)(lVar6 + 0x58)
                          );
        lVar7 = *(long *)(lVar6 + 0x88);
        lVar6 = *(long *)(lVar6 + 0x90);
        pfVar10 = (float *)((ulong)*puVar14 * lVar6 + lVar7);
        local_b8 = (undefined1  [4])pfVar10[2];
        local_c8 = (undefined1  [4])pfVar10[1];
        local_d8 = (undefined1  [4])*pfVar10;
        _auStack_c4 = SUB1612((undefined1  [16])0x0,4);
        _auStack_d4 = SUB1612((undefined1  [16])0x0,4);
        _auStack_b4 = SUB1612((undefined1  [16])0x0,4);
        pfVar10 = (float *)((ulong)puVar14[1] * lVar6 + lVar7);
        pfVar15 = (float *)((ulong)puVar14[2] * lVar6 + lVar7);
        local_88 = (undefined1  [4])pfVar10[2];
        local_98 = (undefined1  [4])pfVar10[1];
        local_58 = (undefined1  [4])pfVar15[2];
        local_68 = (undefined1  [4])pfVar15[1];
        local_78 = (undefined1  [4])*pfVar15;
        local_a8 = (undefined1  [4])*pfVar10;
        uVar22 = uVar20 + 1;
        _auStack_94 = SUB1612((undefined1  [16])0x0,4);
        _auStack_84 = SUB1612((undefined1  [16])0x0,4);
        _auStack_a4 = SUB1612((undefined1  [16])0x0,4);
        _auStack_74 = SUB1612((undefined1  [16])0x0,4);
        _auStack_64 = SUB1612((undefined1  [16])0x0,4);
        _auStack_54 = SUB1612((undefined1  [16])0x0,4);
        if (uVar22 < uVar21) {
          lVar6 = param_2 + 0x20 + lVar8;
          fStack_f4 = *(float *)(lVar6 + 0xc);
          fStack_e4 = *(float *)(lVar6 + 0x1c);
          lVar6 = *(long *)(lVar2 + (ulong)(uint)fStack_f4 * 8);
          puVar14 = (uint *)((ulong)(uint)fStack_e4 * *(long *)(lVar6 + 0x60) +
                            *(long *)(lVar6 + 0x58));
          lVar7 = *(long *)(lVar6 + 0x88);
          lVar6 = *(long *)(lVar6 + 0x90);
          pfVar10 = (float *)((ulong)*puVar14 * lVar6 + lVar7);
          fVar35 = pfVar10[2];
          fVar41 = pfVar10[1];
          fVar45 = *pfVar10;
          _local_c8 = CONCAT44(fVar41,local_c8);
          stack0xffffffffffffff40 = 0;
          _local_d8 = CONCAT44(fVar45,local_d8);
          stack0xffffffffffffff30 = 0;
          _local_b8 = CONCAT44(fVar35,local_b8);
          stack0xffffffffffffff50 = 0;
          pfVar10 = (float *)((ulong)puVar14[1] * lVar6 + lVar7);
          pfVar15 = (float *)((ulong)puVar14[2] * lVar6 + lVar7);
          uVar22 = uVar20 + 2;
          _local_98 = CONCAT44(pfVar10[1],local_98);
          stack0xffffffffffffff70 = 0;
          _local_88 = CONCAT44(pfVar10[2],local_88);
          stack0xffffffffffffff80 = 0;
          _local_a8 = CONCAT44(*pfVar10,local_a8);
          stack0xffffffffffffff60 = 0;
          _local_78 = CONCAT44(*pfVar15,local_78);
          stack0xffffffffffffff90 = 0;
          _local_68 = CONCAT44(pfVar15[1],local_68);
          stack0xffffffffffffffa0 = 0;
          _local_58 = CONCAT44(pfVar15[2],local_58);
          stack0xffffffffffffffb0 = 0;
          if (uVar22 < uVar21) {
            lVar6 = param_2 + 0x40 + lVar8;
            fStack_f0 = *(float *)(lVar6 + 0xc);
            fStack_e0 = *(float *)(lVar6 + 0x1c);
            lVar6 = *(long *)(lVar2 + (ulong)(uint)fStack_f0 * 8);
            puVar14 = (uint *)((ulong)(uint)fStack_e0 * *(long *)(lVar6 + 0x60) +
                              *(long *)(lVar6 + 0x58));
            lVar7 = *(long *)(lVar6 + 0x88);
            lVar6 = *(long *)(lVar6 + 0x90);
            pfVar11 = (float *)((ulong)*puVar14 * lVar6 + lVar7);
            auStack_b4._4_4_ = pfVar11[2];
            auStack_c4._4_4_ = pfVar11[1];
            auStack_d4._4_4_ = *pfVar11;
            fStack_bc = 0.0;
            fStack_cc = 0.0;
            fStack_ac = 0.0;
            pfVar11 = (float *)((ulong)puVar14[1] * lVar6 + lVar7);
            pfVar16 = (float *)((ulong)puVar14[2] * lVar6 + lVar7);
            uVar22 = uVar20 + 3;
            auStack_94._4_4_ = pfVar11[1];
            fStack_8c = 0.0;
            auStack_84._4_4_ = pfVar11[2];
            fStack_7c = 0.0;
            auStack_a4._4_4_ = *pfVar11;
            fStack_9c = 0.0;
            auStack_74._4_4_ = *pfVar16;
            fStack_6c = 0.0;
            auStack_64._4_4_ = pfVar16[1];
            fStack_5c = 0.0;
            auStack_54._4_4_ = pfVar16[2];
            fStack_4c = 0.0;
            if (uVar22 < uVar21) {
              lVar8 = param_2 + 0x60 + lVar8;
              fStack_ec = *(float *)(lVar8 + 0xc);
              fStack_dc = *(float *)(lVar8 + 0x1c);
              lVar8 = *(long *)(lVar2 + (ulong)(uint)fStack_ec * 8);
              puVar14 = (uint *)((ulong)(uint)fStack_dc * *(long *)(lVar8 + 0x60) +
                                *(long *)(lVar8 + 0x58));
              lVar2 = *(long *)(lVar8 + 0x88);
              lVar8 = *(long *)(lVar8 + 0x90);
              pfVar17 = (float *)((ulong)*puVar14 * lVar8 + lVar2);
              fStack_ac = pfVar17[2];
              fStack_bc = pfVar17[1];
              fStack_cc = *pfVar17;
              pfVar17 = (float *)((ulong)puVar14[1] * lVar8 + lVar2);
              fStack_9c = *pfVar17;
              fStack_8c = pfVar17[1];
              fStack_7c = pfVar17[2];
              pfVar18 = (float *)((ulong)puVar14[2] * lVar8 + lVar2);
              fStack_5c = pfVar18[1];
              fStack_6c = *pfVar18;
              fStack_4c = pfVar18[2];
              fVar24 = (float)local_58 - (float)local_b8;
              fVar25 = pfVar15[2] - fVar35;
              fVar26 = pfVar16[2] - (float)auStack_b4._4_4_;
              fVar27 = pfVar18[2] - fStack_ac;
              fVar32 = (float)local_78 - (float)local_d8;
              fVar34 = *pfVar15 - fVar45;
              fVar36 = *pfVar16 - (float)auStack_d4._4_4_;
              fVar37 = *pfVar18 - fStack_cc;
              uVar20 = uVar20 + 4;
              fVar28 = (float)local_68 - (float)local_c8;
              fVar29 = pfVar15[1] - fVar41;
              fVar30 = pfVar16[1] - (float)auStack_c4._4_4_;
              fVar31 = pfVar18[1] - fStack_bc;
              auVar33 = local_b8;
              fVar38 = (float)auStack_b4._4_4_;
              fVar39 = fStack_ac;
              auVar40 = local_c8;
              fVar42 = (float)auStack_c4._4_4_;
              fVar43 = fStack_bc;
              auVar44 = local_d8;
              fVar46 = (float)auStack_d4._4_4_;
              fVar47 = fStack_cc;
              fVar48 = (float)local_b8 - (float)local_88;
              fVar49 = fVar35 - pfVar10[2];
              fVar50 = (float)auStack_b4._4_4_ - pfVar11[2];
              fVar51 = fStack_ac - pfVar17[2];
              fVar52 = (float)local_c8 - (float)local_98;
              fVar53 = fVar41 - pfVar10[1];
              fVar54 = (float)auStack_c4._4_4_ - pfVar11[1];
              fVar55 = fStack_bc - pfVar17[1];
              fVar56 = (float)local_d8 - (float)local_a8;
              fVar57 = fVar45 - *pfVar10;
              fVar58 = (float)auStack_d4._4_4_ - *pfVar11;
              fVar59 = fStack_cc - *pfVar17;
              goto LAB_00108112;
            }
          }
        }
        fVar24 = (float)local_58 - (float)local_b8;
        fVar25 = (float)auStack_54._0_4_ - (float)auStack_b4._0_4_;
        fVar26 = (float)auStack_54._4_4_ - (float)auStack_b4._4_4_;
        fVar27 = fStack_4c - fStack_ac;
        fVar32 = (float)local_78 - (float)local_d8;
        fVar34 = (float)auStack_74._0_4_ - (float)auStack_d4._0_4_;
        fVar36 = (float)auStack_74._4_4_ - (float)auStack_d4._4_4_;
        fVar37 = fStack_6c - fStack_cc;
        uVar20 = uVar22;
        fVar28 = (float)local_68 - (float)local_c8;
        fVar29 = (float)auStack_64._0_4_ - (float)auStack_c4._0_4_;
        fVar30 = (float)auStack_64._4_4_ - (float)auStack_c4._4_4_;
        fVar31 = fStack_5c - fStack_bc;
        auVar33 = local_b8;
        fVar35 = (float)auStack_b4._0_4_;
        fVar38 = (float)auStack_b4._4_4_;
        fVar39 = fStack_ac;
        auVar40 = local_c8;
        fVar41 = (float)auStack_c4._0_4_;
        fVar42 = (float)auStack_c4._4_4_;
        fVar43 = fStack_bc;
        auVar44 = local_d8;
        fVar45 = (float)auStack_d4._0_4_;
        fVar46 = (float)auStack_d4._4_4_;
        fVar47 = fStack_cc;
        fVar48 = (float)local_b8 - (float)local_88;
        fVar49 = (float)auStack_b4._0_4_ - (float)auStack_84._0_4_;
        fVar50 = (float)auStack_b4._4_4_ - (float)auStack_84._4_4_;
        fVar51 = fStack_ac - fStack_7c;
        fVar52 = (float)local_c8 - (float)local_98;
        fVar53 = (float)auStack_c4._0_4_ - (float)auStack_94._0_4_;
        fVar54 = (float)auStack_c4._4_4_ - (float)auStack_94._4_4_;
        fVar55 = fStack_bc - fStack_8c;
        fVar56 = (float)local_d8 - (float)local_a8;
        fVar57 = (float)auStack_d4._0_4_ - (float)auStack_a4._0_4_;
        fVar58 = (float)auStack_d4._4_4_ - (float)auStack_a4._4_4_;
        fVar59 = fStack_cc - fStack_9c;
      }
      else {
        fVar32 = 0.0;
        fVar34 = 0.0;
        fVar36 = 0.0;
        fVar37 = 0.0;
        fVar24 = 0.0;
        fVar25 = 0.0;
        fVar26 = 0.0;
        fVar27 = 0.0;
        auVar33 = (undefined1  [4])0x0;
        fVar35 = 0.0;
        fVar28 = fVar24;
        fVar29 = fVar25;
        fVar30 = fVar26;
        fVar31 = fVar27;
        fVar38 = fVar26;
        fVar39 = fVar27;
        auVar40 = auVar33;
        fVar41 = fVar35;
        fVar42 = fVar26;
        fVar43 = fVar27;
        auVar44 = auVar33;
        fVar45 = fVar35;
        fVar46 = fVar26;
        fVar47 = fVar27;
        fVar48 = (float)auVar33;
        fVar49 = fVar35;
        fVar50 = fVar26;
        fVar51 = fVar27;
        fVar52 = (float)auVar33;
        fVar53 = fVar25;
        fVar54 = fVar26;
        fVar55 = fVar27;
        fVar56 = (float)auVar33;
        fVar57 = fVar25;
        fVar58 = fVar26;
        fVar59 = fVar27;
      }
LAB_00108112:
      *pfVar9 = (float)auVar44;
      pfVar9[1] = fVar45;
      pfVar9[2] = fVar46;
      pfVar9[3] = fVar47;
      pfVar10 = pfVar9 + 0x2c;
      pfVar9[4] = (float)auVar40;
      pfVar9[5] = fVar41;
      pfVar9[6] = fVar42;
      pfVar9[7] = fVar43;
      pfVar9[8] = (float)auVar33;
      pfVar9[9] = fVar35;
      pfVar9[10] = fVar38;
      pfVar9[0xb] = fVar39;
      pfVar9[0xc] = fVar56;
      pfVar9[0xd] = fVar57;
      pfVar9[0xe] = fVar58;
      pfVar9[0xf] = fVar59;
      pfVar9[0x10] = fVar52;
      pfVar9[0x11] = fVar53;
      pfVar9[0x12] = fVar54;
      pfVar9[0x13] = fVar55;
      pfVar9[0x14] = fVar48;
      pfVar9[0x15] = fVar49;
      pfVar9[0x16] = fVar50;
      pfVar9[0x17] = fVar51;
      pfVar9[0x18] = fVar32;
      pfVar9[0x19] = fVar34;
      pfVar9[0x1a] = fVar36;
      pfVar9[0x1b] = fVar37;
      pfVar9[0x1c] = fVar28;
      pfVar9[0x1d] = fVar29;
      pfVar9[0x1e] = fVar30;
      pfVar9[0x1f] = fVar31;
      pfVar9[0x20] = fVar24;
      pfVar9[0x21] = fVar25;
      pfVar9[0x22] = fVar26;
      pfVar9[0x23] = fVar27;
      pfVar9[0x24] = local_f8;
      pfVar9[0x25] = fStack_f4;
      pfVar9[0x26] = fStack_f0;
      pfVar9[0x27] = fStack_ec;
      pfVar9[0x28] = local_e8;
      pfVar9[0x29] = fStack_e4;
      pfVar9[0x2a] = fStack_e0;
      pfVar9[0x2b] = fStack_dc;
      pfVar9 = pfVar10;
    } while (pfVar3 != pfVar10);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar13;
}



/* void std::vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >,
   std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> > >
   >::_M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >
   >(__gnu_cxx::__normal_iterator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >*,
   std::vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >,
   std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> > > > >,
   std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >&&) */

void __thiscall
std::
vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
::
_M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>
          (vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
           *this,undefined8 *param_2,undefined8 *param_3)

{
  undefined8 *puVar1;
  undefined8 uVar2;
  ulong uVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  ulong uVar8;
  undefined8 *puVar9;
  long lVar10;
  
  puVar5 = *(undefined8 **)(this + 8);
  puVar1 = *(undefined8 **)this;
  uVar3 = (long)puVar5 - (long)puVar1 >> 3;
  if (uVar3 == 0xfffffffffffffff) {
                    /* WARNING: Subroutine does not return */
    std::__throw_length_error("vector::_M_realloc_insert");
  }
  if (puVar1 == puVar5) {
    if (0xfffffffffffffffe < uVar3) goto LAB_001084d0;
    uVar8 = 0xfffffffffffffff;
    if (uVar3 + 1 < 0x1000000000000000) {
      uVar8 = uVar3 + 1;
    }
    uVar8 = uVar8 << 3;
LAB_001084da:
    puVar7 = (undefined8 *)operator_new(uVar8);
    lVar10 = uVar8 + (long)puVar7;
    *(undefined8 *)((long)puVar7 + ((long)param_2 - (long)puVar1)) = *param_3;
    puVar4 = puVar7 + 1;
    *param_3 = 0;
    if (param_2 != puVar1) {
LAB_00108441:
      puVar4 = puVar1;
      puVar9 = puVar7;
      do {
        uVar2 = *puVar4;
        puVar4 = puVar4 + 1;
        *puVar9 = uVar2;
        puVar9 = puVar9 + 1;
      } while (puVar4 != param_2);
      puVar4 = (undefined8 *)((long)puVar7 + (long)param_2 + (8 - (long)puVar1));
    }
    if (param_2 == puVar5) goto LAB_00108494;
  }
  else {
    uVar8 = uVar3 * 2;
    if (uVar8 < uVar3) {
LAB_001084d0:
      uVar8 = 0x7ffffffffffffff8;
      goto LAB_001084da;
    }
    if (uVar8 != 0) {
      if (0xfffffffffffffff < uVar8) {
        uVar8 = 0xfffffffffffffff;
      }
      uVar8 = uVar8 * 8;
      goto LAB_001084da;
    }
    lVar10 = 0;
    puVar7 = (undefined8 *)0x0;
    *(undefined8 *)((long)param_2 - (long)puVar1) = *param_3;
    puVar4 = (undefined8 *)&DAT_00000008;
    *param_3 = 0;
    if (param_2 != puVar1) goto LAB_00108441;
  }
  puVar9 = (undefined8 *)(((long)puVar5 - (long)param_2) + (long)puVar4);
  puVar5 = puVar4;
  do {
    uVar2 = *param_2;
    puVar6 = puVar5 + 1;
    param_2 = param_2 + 1;
    *puVar5 = uVar2;
    puVar5 = puVar6;
    puVar4 = puVar9;
  } while (puVar9 != puVar6);
LAB_00108494:
  if (puVar1 != (undefined8 *)0x0) {
    operator_delete(puVar1,*(long *)(this + 0x10) - (long)puVar1);
  }
  *(undefined8 **)this = puVar7;
  *(undefined8 **)(this + 8) = puVar4;
  *(long *)(this + 0x10) = lVar10;
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* void embree::sse2::splitPrimitive<embree::sse2::TriangleSplitter>(embree::sse2::TriangleSplitter
   const&, embree::PrimRef const&, unsigned int, embree::sse2::SplittingGrid const&,
   embree::PrimRef*, unsigned int&) */

void embree::sse2::splitPrimitive<embree::sse2::TriangleSplitter>
               (TriangleSplitter *param_1,PrimRef *param_2,uint param_3,SplittingGrid *param_4,
               PrimRef *param_5,uint *param_6)

{
  long lVar1;
  undefined1 auVar2 [16];
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  undefined1 auVar8 [16];
  undefined1 auVar9 [16];
  undefined8 uVar10;
  undefined8 uVar11;
  PrimRef *pPVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  float fVar14;
  uint uVar15;
  float fVar17;
  uint uVar18;
  float fVar19;
  uint uVar20;
  undefined1 auVar16 [16];
  uint uVar21;
  uint uVar23;
  uint uVar24;
  undefined1 auVar22 [16];
  float fVar25;
  float fVar27;
  float fVar28;
  undefined1 auVar26 [16];
  float fVar29;
  float fVar30;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  float fVar35;
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined4 uVar38;
  undefined4 uVar39;
  undefined4 uVar40;
  undefined4 uVar41;
  undefined1 auStack_b0 [12];
  undefined4 uStack_a4;
  undefined8 uStack_a0;
  undefined8 uStack_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  undefined1 local_80 [16];
  undefined8 uStack_70;
  undefined8 uStack_68;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_3 != 1) {
    auVar2 = *(undefined1 (*) [16])param_2;
    fVar35 = *(float *)(param_4 + 0x10);
    auVar3 = *(undefined1 (*) [16])(param_2 + 0x10);
    fVar25 = (auVar2._0_4_ - *(float *)param_4) * fVar35 + _LC40;
    fVar27 = (auVar2._4_4_ - *(float *)(param_4 + 4)) * fVar35 + _LC40;
    fVar28 = (auVar2._8_4_ - *(float *)(param_4 + 8)) * fVar35 + _LC40;
    fVar14 = (auVar3._0_4_ - *(float *)param_4) * fVar35 + _LC42;
    fVar17 = (auVar3._4_4_ - *(float *)(param_4 + 4)) * fVar35 + _LC42;
    fVar19 = (auVar3._8_4_ - *(float *)(param_4 + 8)) * fVar35 + _LC42;
    fVar35 = fVar28;
    if ((float)((uint)fVar28 & _LC32) < _LC31) {
      fVar35 = (float)((uint)((float)(int)fVar28 -
                             (float)(-(uint)(fVar28 < (float)(int)fVar28) & (uint)_LC12)) |
                      ~_LC32 & (uint)fVar28);
    }
    fVar30 = fVar27;
    if ((float)((uint)fVar27 & _LC32) < _LC31) {
      fVar30 = (float)((uint)((float)(int)fVar27 -
                             (float)(-(uint)(fVar27 < (float)(int)fVar27) & (uint)_LC12)) |
                      ~_LC32 & (uint)fVar27);
    }
    fVar29 = fVar25;
    if ((float)((uint)fVar25 & _LC32) < _LC31) {
      fVar29 = (float)((uint)((float)(int)fVar25 -
                             (float)(-(uint)(fVar25 < (float)(int)fVar25) & (uint)_LC12)) |
                      ~_LC32 & (uint)fVar25);
    }
    uVar21 = (uint)fVar29;
    uVar23 = (uint)fVar30;
    uVar24 = (uint)fVar35;
    fVar35 = fVar19;
    if ((float)((uint)fVar19 & _LC32) < _LC31) {
      fVar35 = (float)((uint)((float)(int)fVar19 -
                             (float)(-(uint)(fVar19 < (float)(int)fVar19) & (uint)_LC12)) |
                      ~_LC32 & (uint)fVar19);
    }
    fVar30 = fVar17;
    if ((float)((uint)fVar17 & _LC32) < _LC31) {
      fVar30 = (float)((uint)((float)(int)fVar17 -
                             (float)(-(uint)(fVar17 < (float)(int)fVar17) & (uint)_LC12)) |
                      ~_LC32 & (uint)fVar17);
    }
    fVar29 = fVar14;
    if ((float)((uint)fVar14 & _LC32) < _LC31) {
      fVar29 = (float)((uint)((float)(int)fVar14 -
                             (float)(-(uint)(fVar14 < (float)(int)fVar14) & (uint)_LC12)) |
                      ~_LC32 & (uint)fVar14);
    }
    uVar15 = -(uint)((int)fVar25 < (int)fVar14) ^ 0xffffffff;
    uVar18 = -(uint)((int)fVar27 < (int)fVar17) ^ 0xffffffff;
    uVar20 = -(uint)((int)fVar28 < (int)fVar19) ^ 0xffffffff;
    local_80._0_4_ = uVar15 & uVar21 | ~uVar15 & (int)fVar29;
    local_80._4_4_ = uVar18 & uVar23 | ~uVar18 & (int)fVar30;
    local_80._8_4_ = uVar20 & uVar24 | ~uVar20 & (int)fVar35;
    local_80._12_4_ = 0;
    uVar23 = ((((uVar23 << 0x10 | uVar23) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 10
             & 0x12492492 |
             (((((uVar24 | uVar24 << 0x10) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249) << 2 |
             ((((uVar21 << 0x10 | uVar21) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249;
    uVar21 = ((((local_80._4_4_ << 0x10 | local_80._4_4_) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 &
             0x30c30c3) * 10 & 0x12492492 |
             (((((local_80._8_4_ << 0x10 | local_80._8_4_) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11
              & 0x30c30c3) * 5 & 0x9249249) << 2 |
             ((((local_80._0_4_ << 0x10 | local_80._0_4_) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 &
             0x30c30c3) * 5 & 0x9249249;
    if (uVar23 != uVar21) {
      uVar23 = uVar23 ^ uVar21;
      uVar21 = 0x1f;
      if (uVar23 != 0) {
        for (; uVar23 >> uVar21 == 0; uVar21 = uVar21 - 1) {
        }
      }
      uVar13 = (ulong)(uVar21 % 3);
      fVar35 = *(float *)(param_1 + uVar13 * 4);
      lVar1 = uVar13 * 4;
      fVar14 = *(float *)(param_1 + lVar1 + 0x10);
      fVar17 = (float)(-1 << ((byte)(uVar21 / 3) & 0x1f) & *(uint *)(local_80 + uVar13 * 4)) *
               __LC43 * *(float *)(param_4 + 0x14) + *(float *)(param_4 + uVar13 * 4);
      if (fVar17 < fVar35) {
        if (fVar17 <= fVar35) {
          uVar38 = *(undefined4 *)param_1;
          uVar39 = *(undefined4 *)(param_1 + 4);
          uVar40 = *(undefined4 *)(param_1 + 8);
          uVar41 = *(undefined4 *)(param_1 + 0xc);
          auVar26._0_8_ = CONCAT44(_LC1,_LC1);
          auVar26._8_4_ = _LC1;
          auVar26._12_4_ = _LC1;
          auVar22._0_8_ = CONCAT44(_LC3,_LC3);
          auVar22._8_4_ = _LC3;
          auVar22._12_4_ = _LC3;
          auVar34._8_4_ = _LC1;
          auVar34._0_8_ = auVar26._0_8_;
          auVar34._12_4_ = _LC1;
          auVar31._8_4_ = _LC3;
          auVar31._0_8_ = auVar22._0_8_;
          auVar31._12_4_ = _LC3;
          goto LAB_00108922;
        }
        auVar26._0_8_ = CONCAT44(_LC1,_LC1);
        auVar26._8_4_ = _LC1;
        auVar26._12_4_ = _LC1;
        if (fVar35 < fVar17) {
          auVar34._8_4_ = _LC1;
          auVar34._0_8_ = auVar26._0_8_;
          auVar34._12_4_ = _LC1;
          auVar22._0_8_ = CONCAT44(_LC3,_LC3);
          auVar22._8_4_ = _LC3;
          auVar22._12_4_ = _LC3;
          auVar31._8_4_ = _LC3;
          auVar31._0_8_ = auVar22._0_8_;
          auVar31._12_4_ = _LC3;
          goto LAB_00108baa;
        }
        auVar34._8_4_ = _LC1;
        auVar34._0_8_ = auVar26._0_8_;
        auVar34._12_4_ = _LC1;
        auVar22._0_8_ = CONCAT44(_LC3,_LC3);
        auVar22._8_4_ = _LC3;
        auVar22._12_4_ = _LC3;
        auVar31._8_4_ = _LC3;
        auVar31._0_8_ = auVar22._0_8_;
        auVar31._12_4_ = _LC3;
LAB_0010892a:
        if (fVar14 < fVar17) {
          if (fVar17 < fVar35) goto LAB_00108d3a;
          fVar35 = *(float *)(param_1 + lVar1 + 0x20);
          goto LAB_00108bc3;
        }
        fVar35 = *(float *)(param_1 + lVar1 + 0x20);
        if (fVar17 < fVar14) goto LAB_00108d95;
        auVar32 = *(undefined1 (*) [16])(param_1 + 0x10);
        uVar38 = auVar32._0_4_;
        uVar39 = auVar32._4_4_;
        uVar40 = auVar32._8_4_;
        uVar41 = auVar32._12_4_;
        auVar31 = minps(auVar31,auVar32);
        auVar34 = maxps(auVar34,auVar32);
LAB_0010894d:
        auVar6._4_4_ = uVar39;
        auVar6._0_4_ = uVar38;
        auVar6._8_4_ = uVar40;
        auVar6._12_4_ = uVar41;
        auVar22 = minps(auVar22,auVar6);
        auVar7._4_4_ = uVar39;
        auVar7._0_4_ = uVar38;
        auVar7._8_4_ = uVar40;
        auVar7._12_4_ = uVar41;
        auVar26 = maxps(auVar26,auVar7);
LAB_00108955:
        if (fVar35 < fVar17) {
          if (fVar17 < fVar14) {
LAB_00108be1:
            fVar14 = (_LC12 / (fVar35 - fVar14)) * (fVar17 - fVar14);
            auVar36._0_4_ =
                 (*(float *)(param_1 + 0x20) - *(float *)(param_1 + 0x10)) * fVar14 +
                 *(float *)(param_1 + 0x10);
            auVar36._4_4_ =
                 (*(float *)(param_1 + 0x24) - *(float *)(param_1 + 0x14)) * fVar14 +
                 *(float *)(param_1 + 0x14);
            auVar36._8_4_ =
                 (*(float *)(param_1 + 0x28) - *(float *)(param_1 + 0x18)) * fVar14 +
                 *(float *)(param_1 + 0x18);
            auVar36._12_4_ =
                 (*(float *)(param_1 + 0x2c) - *(float *)(param_1 + 0x1c)) * fVar14 +
                 *(float *)(param_1 + 0x1c);
            auVar31 = minps(auVar31,auVar36);
            auVar34 = maxps(auVar34,auVar36);
            auVar22 = minps(auVar22,auVar36);
            auVar26 = maxps(auVar26,auVar36);
            goto LAB_00108c27;
          }
          fVar14 = *(float *)(param_1 + lVar1 + 0x30);
          goto LAB_00108c38;
        }
        fVar14 = *(float *)(param_1 + lVar1 + 0x30);
        if (fVar17 < fVar35) goto LAB_00108da8;
        auVar32 = *(undefined1 (*) [16])(param_1 + 0x20);
        uVar38 = auVar32._0_4_;
        uVar39 = auVar32._4_4_;
        uVar40 = auVar32._8_4_;
        uVar41 = auVar32._12_4_;
        auVar31 = minps(auVar31,auVar32);
        auVar34 = maxps(auVar34,auVar32);
LAB_00108979:
        auVar8._4_4_ = uVar39;
        auVar8._0_4_ = uVar38;
        auVar8._8_4_ = uVar40;
        auVar8._12_4_ = uVar41;
        auVar22 = minps(auVar22,auVar8);
        auVar9._4_4_ = uVar39;
        auVar9._0_4_ = uVar38;
        auVar9._8_4_ = uVar40;
        auVar9._12_4_ = uVar41;
        auVar26 = maxps(auVar26,auVar9);
LAB_00108981:
        fVar19 = fVar35;
        if (fVar14 < fVar17) goto joined_r0x0010898e;
      }
      else {
        auVar34 = *(undefined1 (*) [16])param_1;
        uVar38 = auVar34._0_4_;
        uVar39 = auVar34._4_4_;
        uVar40 = auVar34._8_4_;
        uVar41 = auVar34._12_4_;
        auVar22._0_8_ = CONCAT44(_LC3,_LC3);
        auVar22._8_4_ = _LC3;
        auVar22._12_4_ = _LC3;
        auVar26._0_8_ = CONCAT44(_LC1,_LC1);
        auVar26._8_4_ = _LC1;
        auVar26._12_4_ = _LC1;
        auVar32._8_4_ = _LC3;
        auVar32._0_8_ = auVar22._0_8_;
        auVar32._12_4_ = _LC3;
        auVar33._8_4_ = _LC1;
        auVar33._0_8_ = auVar26._0_8_;
        auVar33._12_4_ = _LC1;
        auVar31 = minps(auVar32,auVar34);
        auVar34 = maxps(auVar33,auVar34);
        if (fVar17 == fVar35) {
LAB_00108922:
          auVar4._4_4_ = uVar39;
          auVar4._0_4_ = uVar38;
          auVar4._8_4_ = uVar40;
          auVar4._12_4_ = uVar41;
          auVar22 = minps(auVar22,auVar4);
          auVar5._4_4_ = uVar39;
          auVar5._0_4_ = uVar38;
          auVar5._8_4_ = uVar40;
          auVar5._12_4_ = uVar41;
          auVar26 = maxps(auVar26,auVar5);
          goto LAB_0010892a;
        }
LAB_00108baa:
        if (fVar17 < fVar14) {
LAB_00108d3a:
          fVar35 = (_LC12 / (fVar14 - fVar35)) * (fVar17 - fVar35);
          auVar37._0_4_ =
               (*(float *)(param_1 + 0x10) - *(float *)param_1) * fVar35 + *(float *)param_1;
          auVar37._4_4_ =
               (*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4)) * fVar35 +
               *(float *)(param_1 + 4);
          auVar37._8_4_ =
               (*(float *)(param_1 + 0x18) - *(float *)(param_1 + 8)) * fVar35 +
               *(float *)(param_1 + 8);
          auVar37._12_4_ =
               (*(float *)(param_1 + 0x1c) - *(float *)(param_1 + 0xc)) * fVar35 +
               *(float *)(param_1 + 0xc);
          auVar31 = minps(auVar31,auVar37);
          auVar34 = maxps(auVar34,auVar37);
          auVar22 = minps(auVar22,auVar37);
          auVar26 = maxps(auVar26,auVar37);
          fVar35 = *(float *)(param_1 + lVar1 + 0x20);
        }
        else {
          fVar35 = *(float *)(param_1 + lVar1 + 0x20);
        }
        if (fVar17 < fVar14) {
LAB_00108d95:
          if (fVar17 <= fVar14) {
            uVar38 = *(undefined4 *)(param_1 + 0x10);
            uVar39 = *(undefined4 *)(param_1 + 0x14);
            uVar40 = *(undefined4 *)(param_1 + 0x18);
            uVar41 = *(undefined4 *)(param_1 + 0x1c);
            goto LAB_0010894d;
          }
          if (fVar14 < fVar17) goto LAB_00108bdb;
          goto LAB_00108955;
        }
LAB_00108bc3:
        auVar32 = *(undefined1 (*) [16])(param_1 + 0x10);
        uVar38 = auVar32._0_4_;
        uVar39 = auVar32._4_4_;
        uVar40 = auVar32._8_4_;
        uVar41 = auVar32._12_4_;
        auVar31 = minps(auVar31,auVar32);
        auVar34 = maxps(auVar34,auVar32);
        if (fVar17 == fVar14) goto LAB_0010894d;
LAB_00108bdb:
        if (fVar17 < fVar35) goto LAB_00108be1;
LAB_00108c27:
        fVar14 = *(float *)(param_1 + lVar1 + 0x30);
        if (fVar17 < fVar35) {
LAB_00108da8:
          if (fVar17 <= fVar35) {
            uVar38 = *(undefined4 *)(param_1 + 0x20);
            uVar39 = *(undefined4 *)(param_1 + 0x24);
            uVar40 = *(undefined4 *)(param_1 + 0x28);
            uVar41 = *(undefined4 *)(param_1 + 0x2c);
            goto LAB_00108979;
          }
          fVar19 = fVar14;
          if (fVar35 < fVar17) goto joined_r0x0010898e;
          goto LAB_00108981;
        }
LAB_00108c38:
        auVar32 = *(undefined1 (*) [16])(param_1 + 0x20);
        uVar38 = auVar32._0_4_;
        uVar39 = auVar32._4_4_;
        uVar40 = auVar32._8_4_;
        uVar41 = auVar32._12_4_;
        auVar31 = minps(auVar31,auVar32);
        auVar34 = maxps(auVar34,auVar32);
        fVar19 = fVar14;
        if (fVar17 == fVar35) goto LAB_00108979;
joined_r0x0010898e:
        if (fVar17 < fVar19) {
          fVar35 = (_LC12 / (fVar14 - fVar35)) * (fVar17 - fVar35);
          auVar16._0_4_ =
               (*(float *)(param_1 + 0x30) - *(float *)(param_1 + 0x20)) * fVar35 +
               *(float *)(param_1 + 0x20);
          auVar16._4_4_ =
               (*(float *)(param_1 + 0x34) - *(float *)(param_1 + 0x24)) * fVar35 +
               *(float *)(param_1 + 0x24);
          auVar16._8_4_ =
               (*(float *)(param_1 + 0x38) - *(float *)(param_1 + 0x28)) * fVar35 +
               *(float *)(param_1 + 0x28);
          auVar16._12_4_ =
               (*(float *)(param_1 + 0x3c) - *(float *)(param_1 + 0x2c)) * fVar35 +
               *(float *)(param_1 + 0x2c);
          auVar31 = minps(auVar31,auVar16);
          auVar34 = maxps(auVar34,auVar16);
          auVar22 = minps(auVar22,auVar16);
          auVar26 = maxps(auVar26,auVar16);
        }
      }
      auVar32 = maxps(auVar31,auVar2);
      auVar31 = maxps(auVar22,auVar2);
      auVar22 = minps(auVar34,auVar3);
      auVar34 = minps(auVar26,auVar3);
      local_80._0_12_ = auVar32._0_12_;
      local_80._12_4_ = *(undefined4 *)(param_2 + 0xc);
      auVar2 = local_80;
      local_80._0_8_ = auVar32._0_8_;
      uStack_a0 = local_80._0_8_;
      local_80._8_8_ = auVar2._8_8_;
      uStack_98 = local_80._8_8_;
      auStack_b0 = auVar31._0_12_;
      uStack_a4 = *(undefined4 *)(param_2 + 0xc);
      auVar2 = _auStack_b0;
      auStack_b0._0_8_ = auVar31._0_8_;
      uVar10 = auStack_b0._0_8_;
      stack0xffffffffffffff58 = auVar2._8_8_;
      uVar11 = stack0xffffffffffffff58;
      local_80._0_12_ = auVar22._0_12_;
      local_80._12_4_ = *(undefined4 *)(param_2 + 0x1c);
      auVar3 = local_80;
      auStack_b0 = auVar34._0_12_;
      uStack_a4 = *(undefined4 *)(param_2 + 0x1c);
      auVar2 = _auStack_b0;
      auStack_b0._0_8_ = auVar34._0_8_;
      stack0xffffffffffffff58 = auVar2._8_8_;
      local_80._0_8_ = auVar22._0_8_;
      uStack_90 = local_80._0_8_;
      local_80._8_8_ = auVar3._8_8_;
      uStack_88 = local_80._8_8_;
      uStack_70 = auStack_b0._0_8_;
      uStack_68 = stack0xffffffffffffff58;
      local_80._8_8_ = uVar11;
      local_80._0_8_ = uVar10;
      splitPrimitive<embree::sse2::TriangleSplitter>
                (param_1,(PrimRef *)&uStack_a0,param_3 >> 1,param_4,param_5,param_6);
      splitPrimitive<embree::sse2::TriangleSplitter>
                (param_1,(PrimRef *)local_80,param_3 - (param_3 >> 1),param_4,param_5,param_6);
      goto LAB_001089c0;
    }
  }
  uVar21 = *param_6;
  *param_6 = uVar21 + 1;
  uVar10 = *(undefined8 *)(param_2 + 8);
  pPVar12 = param_5 + (ulong)uVar21 * 0x20;
  *(undefined8 *)pPVar12 = *(undefined8 *)param_2;
  *(undefined8 *)(pPVar12 + 8) = uVar10;
  uVar10 = *(undefined8 *)(param_2 + 0x18);
  *(undefined8 *)(pPVar12 + 0x10) = *(undefined8 *)(param_2 + 0x10);
  *(undefined8 *)(pPVar12 + 0x18) = uVar10;
LAB_001089c0:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long>
   const&)#1}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

void __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
::{lambda(embree::range<unsigned_long>const&)#1}::operator()
          (_lambda_embree__range<unsigned_long>const___1_ *this,range *param_1)

{
  float *pfVar1;
  float *pfVar2;
  long lVar3;
  float *pfVar4;
  long lVar5;
  float fVar6;
  long lVar7;
  float *pfVar8;
  uint *puVar9;
  ulong uVar10;
  float fVar11;
  uint uVar12;
  float fVar13;
  uint uVar14;
  float fVar15;
  uint uVar16;
  float fVar17;
  uint uVar18;
  uint uVar19;
  uint uVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  float fVar25;
  float fVar26;
  uint uVar27;
  uint uVar28;
  
  fVar6 = _LC40;
  uVar10 = *(ulong *)param_1;
  if (*(ulong *)(param_1 + 8) <= uVar10) {
    return;
  }
  lVar7 = *(long *)(*(long *)this + 0x18);
  fVar25 = _LC31;
  uVar27 = _LC32;
  uVar28 = _LC32;
  do {
    lVar3 = uVar10 * 8;
    *(int *)(lVar7 + 4 + lVar3) = (int)uVar10;
    pfVar4 = *(float **)(this + 8);
    pfVar8 = (float *)(uVar10 * 0x20 + *(long *)(*(long *)(this + 0x10) + 0x20));
    fVar26 = pfVar4[4];
    fVar21 = (*pfVar8 - *pfVar4) * fVar26 + fVar6;
    fVar22 = (pfVar8[1] - pfVar4[1]) * fVar26 + fVar6;
    fVar23 = (pfVar8[2] - pfVar4[2]) * fVar26 + fVar6;
    fVar11 = (pfVar8[4] - *pfVar4) * fVar26 + _LC42;
    fVar13 = (pfVar8[5] - pfVar4[1]) * fVar26 + _UNK_0013f6d4;
    fVar15 = (pfVar8[6] - pfVar4[2]) * fVar26 + _UNK_0013f6d8;
    fVar26 = fVar23;
    if ((float)((uint)fVar23 & uVar28) < fVar25) {
      fVar26 = (float)((uint)((float)(int)fVar23 -
                             (float)(-(uint)(fVar23 < (float)(int)fVar23) & _LC12)) |
                      ~uVar28 & (uint)fVar23);
    }
    fVar24 = fVar22;
    if ((float)((uint)fVar22 & uVar28) < fVar25) {
      fVar24 = (float)((uint)((float)(int)fVar22 -
                             (float)(-(uint)(fVar22 < (float)(int)fVar22) & _LC12)) |
                      ~uVar28 & (uint)fVar22);
    }
    fVar17 = fVar21;
    if ((float)((uint)fVar21 & uVar28) < fVar25) {
      fVar17 = (float)((uint)((float)(int)fVar21 -
                             (float)(-(uint)(fVar21 < (float)(int)fVar21) & _LC12)) |
                      ~uVar28 & (uint)fVar21);
    }
    uVar18 = (uint)fVar17;
    uVar19 = (uint)fVar24;
    uVar20 = (uint)fVar26;
    fVar26 = fVar15;
    if ((float)((uint)fVar15 & uVar28) < fVar25) {
      fVar26 = (float)((uint)((float)(int)fVar15 -
                             (float)(-(uint)(fVar15 < (float)(int)fVar15) & _LC12)) |
                      ~uVar28 & (uint)fVar15);
    }
    fVar24 = fVar13;
    if ((float)((uint)fVar13 & uVar28) < fVar25) {
      fVar24 = (float)((uint)((float)(int)fVar13 -
                             (float)(-(uint)(fVar13 < (float)(int)fVar13) & _LC12)) |
                      ~uVar28 & (uint)fVar13);
    }
    fVar17 = fVar11;
    if ((float)((uint)fVar11 & uVar28) < fVar25) {
      fVar17 = (float)((uint)((float)(int)fVar11 -
                             (float)(-(uint)(fVar11 < (float)(int)fVar11) & _LC12)) |
                      ~uVar28 & (uint)fVar11);
    }
    uVar12 = -(uint)((int)fVar21 < (int)fVar11) ^ 0xffffffff;
    uVar14 = -(uint)((int)fVar22 < (int)fVar13) ^ 0xffffffff;
    uVar16 = -(uint)((int)fVar23 < (int)fVar15) ^ 0xffffffff;
    uVar12 = uVar12 & uVar18 | ~uVar12 & (int)fVar17;
    uVar14 = uVar14 & uVar19 | ~uVar14 & (int)fVar24;
    uVar16 = uVar16 & uVar20 | ~uVar16 & (int)fVar26;
    fVar26 = 0.0;
    uVar18 = ((((uVar19 << 0x10 | uVar19) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 10
             & 0x12492492 |
             (((((uVar20 << 0x10 | uVar20) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249) << 2 |
             ((((uVar18 << 0x10 | uVar18) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249;
    uVar19 = ((((uVar14 << 0x10 | uVar14) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 10
             & 0x12492492 |
             (((((uVar16 << 0x10 | uVar16) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249) << 2 |
             ((((uVar12 << 0x10 | uVar12) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) * 5
             & 0x9249249;
    if (uVar18 != uVar19) {
      lVar7 = *(long *)(*(long *)(*(long *)**(undefined8 **)(this + 0x18) + 0x1e0) +
                       (ulong)(uint)pfVar8[3] * 8);
      puVar9 = (uint *)((ulong)(uint)pfVar8[7] * *(long *)(lVar7 + 0x60) + *(long *)(lVar7 + 0x58));
      lVar5 = *(long *)(lVar7 + 0x88);
      lVar7 = *(long *)(lVar7 + 0x90);
      pfVar4 = (float *)(lVar5 + (ulong)*puVar9 * lVar7);
      pfVar1 = (float *)(lVar5 + (ulong)puVar9[1] * lVar7);
      pfVar2 = (float *)(lVar5 + (ulong)puVar9[2] * lVar7);
      fVar11 = *pfVar1 - *pfVar4;
      fVar13 = pfVar1[1] - pfVar4[1];
      fVar15 = pfVar1[2] - pfVar4[2];
      fVar21 = *pfVar2 - *pfVar4;
      fVar22 = pfVar2[1] - pfVar4[1];
      fVar23 = pfVar2[2] - pfVar4[2];
      fVar11 = (float)((uint)(fVar11 * fVar22 - fVar21 * fVar13) & uVar27) +
               (float)((uint)(fVar13 * fVar23 - fVar22 * fVar15) & uVar27) +
               (float)((uint)(fVar15 * fVar21 - fVar23 * fVar11) & uVar27);
      if (fVar11 != 0.0) {
        fVar25 = pfVar8[5] - pfVar8[1];
        fVar26 = pfVar8[6] - pfVar8[2];
        uVar19 = uVar19 ^ uVar18;
        uVar27 = 0x1f;
        if (uVar19 != 0) {
          for (; uVar19 >> uVar27 == 0; uVar27 = uVar27 - 1) {
          }
        }
        fVar25 = (fVar25 + fVar26) * (pfVar8[4] - *pfVar8) + fVar25 * fVar26;
        fVar11 = (fVar25 + fVar25) - fVar11;
        if (fVar11 <= 0.0) {
          fVar11 = 0.0;
        }
        fVar25 = powf(_LC44,(float)uVar27);
        fVar26 = SQRT(SQRT(fVar25 * fVar11));
        fVar25 = _LC31;
        uVar27 = _LC32;
        uVar28 = _LC6;
      }
    }
    uVar10 = uVar10 + 1;
    *(float *)(*(long *)(*(long *)this + 0x18) + lVar3) = fVar26;
    lVar7 = *(long *)(*(long *)this + 0x18);
  } while (uVar10 < *(ulong *)(param_1 + 8));
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long>
   const&)#5}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

long __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
::{lambda(embree::range<unsigned_long>const&)#5}::operator()
          (_lambda_embree__range<unsigned_long>const___5_ *this,range *param_1)

{
  float *pfVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  uint *puVar8;
  long lVar9;
  PrimRef *pPVar10;
  ulong uVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined4 uVar15;
  undefined4 uVar16;
  undefined4 uVar17;
  undefined4 uVar18;
  undefined1 auVar19 [16];
  undefined1 auVar20 [16];
  uint local_4d4;
  float local_4d0;
  float fStack_4cc;
  float fStack_4c8;
  float fStack_4c4;
  float local_4c0;
  float fStack_4bc;
  float fStack_4b8;
  float fStack_4b4;
  float local_4b0;
  float fStack_4ac;
  float fStack_4a8;
  float fStack_4a4;
  float local_4a0;
  float fStack_49c;
  float fStack_498;
  float fStack_494;
  undefined1 local_490 [16];
  undefined1 local_480 [16];
  undefined1 local_470 [16];
  PrimRef local_460 [1048];
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)param_1 < *(ulong *)(param_1 + 8)) {
    lVar9 = 0;
    uVar11 = *(ulong *)param_1;
    uVar15 = _LC12;
    uVar16 = _LC12;
    uVar17 = _LC12;
    uVar18 = _LC12;
    do {
      lVar3 = *(long *)this;
      auVar19._4_4_ = uVar16;
      auVar19._0_4_ = uVar15;
      auVar19._8_4_ = uVar17;
      auVar19._12_4_ = uVar18;
      puVar8 = (uint *)(*(long *)(lVar3 + 0x18) + uVar11 * 8);
      uVar2 = *puVar8;
      local_4d4 = 0;
      pPVar10 = (PrimRef *)((ulong)puVar8[1] * 0x20 + *(long *)(*(long *)(this + 0x10) + 0x20));
      lVar4 = *(long *)(*(long *)(*(long *)**(undefined8 **)(this + 8) + 0x1e0) +
                       (ulong)(*(uint *)(pPVar10 + 0xc) & 0x7ffffff) * 8);
      puVar8 = (uint *)((ulong)*(uint *)(pPVar10 + 0x1c) * *(long *)(lVar4 + 0x60) +
                       *(long *)(lVar4 + 0x58));
      lVar5 = *(long *)(lVar4 + 0x88);
      lVar4 = *(long *)(lVar4 + 0x90);
      pfVar1 = (float *)(lVar5 + (ulong)*puVar8 * lVar4);
      local_4d0 = *pfVar1;
      fStack_4cc = pfVar1[1];
      fStack_4c8 = pfVar1[2];
      fStack_4c4 = pfVar1[3];
      pfVar1 = (float *)(lVar5 + (ulong)puVar8[1] * lVar4);
      local_4c0 = *pfVar1;
      fStack_4bc = pfVar1[1];
      fStack_4b8 = pfVar1[2];
      fStack_4b4 = pfVar1[3];
      pfVar1 = (float *)(lVar5 + (ulong)puVar8[2] * lVar4);
      local_4b0 = *pfVar1;
      fStack_4ac = pfVar1[1];
      fStack_4a8 = pfVar1[2];
      fStack_4a4 = pfVar1[3];
      auVar7._4_4_ = fStack_4bc - fStack_4cc;
      auVar7._0_4_ = local_4c0 - local_4d0;
      auVar7._8_4_ = fStack_4b8 - fStack_4c8;
      auVar7._12_4_ = fStack_4b4 - fStack_4c4;
      local_490 = divps(auVar19,auVar7);
      auVar13._4_4_ = uVar16;
      auVar13._0_4_ = uVar15;
      auVar13._8_4_ = uVar17;
      auVar13._12_4_ = uVar18;
      auVar20._0_4_ = local_4b0 - local_4c0;
      auVar20._4_4_ = fStack_4ac - fStack_4bc;
      auVar20._8_4_ = fStack_4a8 - fStack_4b8;
      auVar20._12_4_ = fStack_4a4 - fStack_4b4;
      auVar6._4_4_ = fStack_4cc - fStack_4ac;
      auVar6._0_4_ = local_4d0 - local_4b0;
      auVar6._8_4_ = fStack_4c8 - fStack_4a8;
      auVar6._12_4_ = fStack_4c4 - fStack_4a4;
      local_470 = divps(auVar13,auVar6);
      auVar14._4_4_ = uVar16;
      auVar14._0_4_ = uVar15;
      auVar14._8_4_ = uVar17;
      auVar14._12_4_ = uVar18;
      local_480 = divps(auVar14,auVar20);
      local_4a0 = local_4d0;
      fStack_49c = fStack_4cc;
      fStack_498 = fStack_4c8;
      fStack_494 = fStack_4c4;
      splitPrimitive<embree::sse2::TriangleSplitter>
                ((TriangleSplitter *)&local_4d0,pPVar10,uVar2,*(SplittingGrid **)(this + 0x18),
                 local_460,&local_4d4);
      uVar18 = _UNK_0013f65c;
      uVar17 = _UNK_0013f658;
      uVar16 = _UNK_0013f654;
      uVar15 = _LC12;
      local_4d4 = local_4d4 - 1;
      lVar9 = lVar9 + (ulong)local_4d4;
      *(uint *)(*(long *)(lVar3 + 0x18) + uVar11 * 8) = local_4d4 * 0x10000 | uVar2;
      uVar12 = uVar11 + 1;
      *(uint *)(**(long **)(this + 0x20) + (uVar11 - **(long **)(this + 0x28)) * 4) = local_4d4;
      uVar11 = uVar12;
    } while (uVar12 < *(ulong *)(param_1 + 8));
  }
  else {
    lVar9 = 0;
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar9;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long>
   const&)#7}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

void __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
::{lambda(embree::range<unsigned_long>const&)#7}::operator()
          (_lambda_embree__range<unsigned_long>const___7_ *this,range *param_1)

{
  ushort *puVar1;
  float *pfVar2;
  long lVar3;
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  undefined8 uVar6;
  long lVar7;
  undefined8 *puVar8;
  long lVar9;
  long lVar10;
  uint *puVar11;
  PrimRef *pPVar12;
  undefined8 *puVar13;
  ulong uVar14;
  long in_FS_OFFSET;
  undefined1 auVar15 [16];
  undefined1 auVar16 [16];
  undefined4 uVar17;
  undefined4 uVar18;
  undefined4 uVar19;
  undefined4 uVar20;
  undefined1 auVar21 [16];
  undefined1 auVar22 [16];
  uint local_4d4;
  float local_4d0;
  float fStack_4cc;
  float fStack_4c8;
  float fStack_4c4;
  float local_4c0;
  float fStack_4bc;
  float fStack_4b8;
  float fStack_4b4;
  float local_4b0;
  float fStack_4ac;
  float fStack_4a8;
  float fStack_4a4;
  float local_4a0;
  float fStack_49c;
  float fStack_498;
  float fStack_494;
  undefined1 local_490 [16];
  undefined1 local_480 [16];
  undefined1 local_470 [16];
  undefined8 local_460;
  undefined8 uStack_458;
  undefined8 local_450;
  undefined8 uStack_448;
  undefined8 auStack_440 [127];
  long local_48;
  
  uVar14 = *(ulong *)param_1;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar14 < *(ulong *)(param_1 + 8)) {
    uVar17 = _LC12;
    uVar18 = _LC12;
    uVar19 = _LC12;
    uVar20 = _LC12;
    do {
      lVar9 = *(long *)(this + 0x10);
      auVar21._4_4_ = uVar18;
      auVar21._0_4_ = uVar17;
      auVar21._8_4_ = uVar19;
      auVar21._12_4_ = uVar20;
      puVar1 = (ushort *)(*(long *)(*(long *)this + 0x18) + uVar14 * 8);
      local_4d4 = 0;
      lVar7 = (ulong)*(uint *)(puVar1 + 2) * 0x20;
      pPVar12 = (PrimRef *)(*(long *)(lVar9 + 0x20) + lVar7);
      lVar10 = *(long *)(*(long *)(*(long *)**(undefined8 **)(this + 8) + 0x1e0) +
                        (ulong)(*(uint *)(pPVar12 + 0xc) & 0x7ffffff) * 8);
      puVar11 = (uint *)((ulong)*(uint *)(pPVar12 + 0x1c) * *(long *)(lVar10 + 0x60) +
                        *(long *)(lVar10 + 0x58));
      lVar3 = *(long *)(lVar10 + 0x88);
      lVar10 = *(long *)(lVar10 + 0x90);
      pfVar2 = (float *)(lVar3 + (ulong)*puVar11 * lVar10);
      local_4d0 = *pfVar2;
      fStack_4cc = pfVar2[1];
      fStack_4c8 = pfVar2[2];
      fStack_4c4 = pfVar2[3];
      pfVar2 = (float *)(lVar3 + (ulong)puVar11[1] * lVar10);
      local_4c0 = *pfVar2;
      fStack_4bc = pfVar2[1];
      fStack_4b8 = pfVar2[2];
      fStack_4b4 = pfVar2[3];
      pfVar2 = (float *)(lVar3 + (ulong)puVar11[2] * lVar10);
      local_4b0 = *pfVar2;
      fStack_4ac = pfVar2[1];
      fStack_4a8 = pfVar2[2];
      fStack_4a4 = pfVar2[3];
      auVar5._4_4_ = fStack_4bc - fStack_4cc;
      auVar5._0_4_ = local_4c0 - local_4d0;
      auVar5._8_4_ = fStack_4b8 - fStack_4c8;
      auVar5._12_4_ = fStack_4b4 - fStack_4c4;
      local_490 = divps(auVar21,auVar5);
      auVar15._4_4_ = uVar18;
      auVar15._0_4_ = uVar17;
      auVar15._8_4_ = uVar19;
      auVar15._12_4_ = uVar20;
      auVar22._0_4_ = local_4b0 - local_4c0;
      auVar22._4_4_ = fStack_4ac - fStack_4bc;
      auVar22._8_4_ = fStack_4a8 - fStack_4b8;
      auVar22._12_4_ = fStack_4a4 - fStack_4b4;
      auVar4._4_4_ = fStack_4cc - fStack_4ac;
      auVar4._0_4_ = local_4d0 - local_4b0;
      auVar4._8_4_ = fStack_4c8 - fStack_4a8;
      auVar4._12_4_ = fStack_4c4 - fStack_4a4;
      local_470 = divps(auVar15,auVar4);
      auVar16._4_4_ = uVar18;
      auVar16._0_4_ = uVar17;
      auVar16._8_4_ = uVar19;
      auVar16._12_4_ = uVar20;
      local_480 = divps(auVar16,auVar22);
      local_4a0 = local_4d0;
      fStack_49c = fStack_4cc;
      fStack_498 = fStack_4c8;
      fStack_494 = fStack_4c4;
      splitPrimitive<embree::sse2::TriangleSplitter>
                ((TriangleSplitter *)&local_4d0,pPVar12,(uint)*puVar1,
                 *(SplittingGrid **)(this + 0x18),(PrimRef *)&local_460,&local_4d4);
      lVar10 = (ulong)*(uint *)(**(long **)(this + 0x28) + (uVar14 - **(long **)(this + 0x30)) * 4)
               + **(long **)(this + 0x20);
      puVar8 = (undefined8 *)(*(long *)(lVar9 + 0x20) + lVar7);
      *puVar8 = local_460;
      puVar8[1] = uStack_458;
      puVar8[2] = local_450;
      puVar8[3] = uStack_448;
      uVar20 = _UNK_0013f65c;
      uVar19 = _UNK_0013f658;
      uVar18 = _UNK_0013f654;
      uVar17 = _LC12;
      if (1 < local_4d4) {
        lVar9 = lVar10 * 0x20;
        do {
          puVar8 = (undefined8 *)((long)auStack_440 + lVar9 + lVar10 * -0x20);
          uVar6 = puVar8[1];
          puVar13 = (undefined8 *)(*(long *)(*(long *)(this + 0x10) + 0x20) + lVar9);
          *puVar13 = *puVar8;
          puVar13[1] = uVar6;
          puVar8 = (undefined8 *)((long)auStack_440 + lVar9 + lVar10 * -0x20 + 0x10);
          uVar6 = puVar8[1];
          lVar9 = lVar9 + 0x20;
          puVar13[2] = *puVar8;
          puVar13[3] = uVar6;
        } while ((lVar10 + (ulong)local_4d4) * 0x20 + -0x20 != lVar9);
      }
      uVar14 = uVar14 + 1;
    } while (uVar14 < *(ulong *)(param_1 + 8));
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Geometry*, unsigned int, unsigned long,
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&) */

sse2 * __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
          (sse2 *this,Geometry *param_1,uint param_2,ulong param_3,vector_t *param_4,
          BuildProgressMonitor *param_5)

{
  ulong uVar1;
  ulong uVar2;
  undefined1 (*pauVar3) [16];
  undefined1 (*pauVar4) [16];
  long lVar5;
  long lVar6;
  long in_FS_OFFSET;
  undefined1 auVar7 [16];
  undefined1 auVar8 [16];
  undefined1 auVar9 [16];
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined4 uVar15;
  undefined4 uVar16;
  uint local_28d4;
  Geometry *local_28d0 [2];
  long local_28c0;
  ulong local_28b8;
  ulong local_28b0;
  undefined8 **local_28a8;
  long **local_28a0;
  Geometry **local_2898;
  vector_t *local_2890;
  uint *local_2888;
  long *local_2878;
  ulong *local_2870;
  ulong *local_2868;
  undefined1 (*local_2860) [16];
  Geometry ***local_2858;
  undefined1 local_2848 [10248];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_28d4 = param_2;
  local_28d0[0] = param_1;
  if ((code *)**(undefined8 **)param_5 == Scene::BuildProgressMonitorInterface::operator()) {
    embree::Scene::progressMonitor(0.0);
  }
  else {
    (*(code *)**(undefined8 **)param_5)(param_5,0);
  }
  local_28b8 = (ulong)*(uint *)(local_28d0[0] + 0x20);
  local_28c0 = 0;
  local_2898 = local_28d0;
  local_2890 = param_4;
  local_2888 = &local_28d4;
  uVar1 = embree::TaskScheduler::threadCount();
  uVar16 = _LC3;
  uVar15 = _LC1;
  uVar2 = (local_28b8 + 0x3ff) - local_28c0 >> 10;
  if (uVar1 < uVar2) {
    uVar2 = uVar1;
  }
  local_28b0 = 0x40;
  if (uVar2 < 0x41) {
    local_28b0 = uVar2;
  }
  local_2878 = &local_28c0;
  local_2870 = &local_28b8;
  local_2868 = &local_28b0;
  local_2860 = (undefined1 (*) [16])local_2848;
  local_2858 = &local_2898;
  if (uVar2 == 0) {
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined4 *)this = uVar16;
    *(undefined4 *)(this + 4) = uVar16;
    *(undefined4 *)(this + 8) = uVar16;
    *(undefined4 *)(this + 0xc) = uVar16;
    *(undefined4 *)(this + 0x10) = uVar15;
    *(undefined4 *)(this + 0x14) = uVar15;
    *(undefined4 *)(this + 0x18) = uVar15;
    *(undefined4 *)(this + 0x1c) = uVar15;
    *(undefined4 *)(this + 0x20) = uVar16;
    *(undefined4 *)(this + 0x24) = uVar16;
    *(undefined4 *)(this + 0x28) = uVar16;
    *(undefined4 *)(this + 0x2c) = uVar16;
    *(undefined4 *)(this + 0x30) = uVar15;
    *(undefined4 *)(this + 0x34) = uVar15;
    *(undefined4 *)(this + 0x38) = uVar15;
    *(undefined4 *)(this + 0x3c) = uVar15;
LAB_0010ab4f:
    uVar2 = 0;
  }
  else {
    local_28a0 = &local_2878;
    local_28a8 = (long **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_19parallel_prefix_sumImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitINS_12TriangleMeshENS9_23TriangleSplitterFactoryEEES8_PNS_8GeometryEjmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISG_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKNS_5rangeImEERKS8_E_ZNSA_ISB_SC_EES8_SE_jmSK_SM_EUlSS_SS_E0_EET0_RNS_22ParallelPrefixSumStateISV_EET_SZ_SZ_RKSV_RKT1_RKT2_EUlmE_EEvSZ_S11_EUlSQ_E_EEvSZ_SZ_SZ_S11_PNS0_16TaskGroupContextE
              (0,local_28b0,1,&local_28a0,&local_28a8);
    embree::TaskScheduler::wait();
    uVar16 = _LC3;
    uVar15 = _LC1;
    if (local_28a8 != (long **)0x0) {
      local_28a0 = local_28a8;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_28a0);
    }
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined4 *)this = uVar16;
    *(undefined4 *)(this + 4) = uVar16;
    *(undefined4 *)(this + 8) = uVar16;
    *(undefined4 *)(this + 0xc) = uVar16;
    *(undefined4 *)(this + 0x10) = uVar15;
    *(undefined4 *)(this + 0x14) = uVar15;
    *(undefined4 *)(this + 0x18) = uVar15;
    *(undefined4 *)(this + 0x1c) = uVar15;
    *(undefined4 *)(this + 0x20) = uVar16;
    *(undefined4 *)(this + 0x24) = uVar16;
    *(undefined4 *)(this + 0x28) = uVar16;
    *(undefined4 *)(this + 0x2c) = uVar16;
    *(undefined4 *)(this + 0x30) = uVar15;
    *(undefined4 *)(this + 0x34) = uVar15;
    *(undefined4 *)(this + 0x38) = uVar15;
    *(undefined4 *)(this + 0x3c) = uVar15;
    if (local_28b0 == 0) goto LAB_0010ab4f;
    lVar6 = 0;
    lVar5 = 0;
    auVar7._4_4_ = uVar15;
    auVar7._0_4_ = uVar15;
    auVar7._8_4_ = uVar15;
    auVar7._12_4_ = uVar15;
    auVar9._4_4_ = uVar16;
    auVar9._0_4_ = uVar16;
    auVar9._8_4_ = uVar16;
    auVar9._12_4_ = uVar16;
    auVar11._4_4_ = uVar15;
    auVar11._0_4_ = uVar15;
    auVar11._8_4_ = uVar15;
    auVar11._12_4_ = uVar15;
    auVar13._4_4_ = uVar16;
    auVar13._0_4_ = uVar16;
    auVar13._8_4_ = uVar16;
    auVar13._12_4_ = uVar16;
    pauVar3 = (undefined1 (*) [16])local_2848;
    do {
      *(long *)pauVar3[0x144] = lVar5;
      lVar5 = lVar5 + *(long *)pauVar3[4];
      pauVar4 = pauVar3 + 5;
      pauVar3[0x140] = auVar13;
      auVar13 = minps(auVar13,*pauVar3);
      pauVar3[0x141] = auVar11;
      auVar11 = maxps(auVar11,pauVar3[1]);
      pauVar3[0x142] = auVar9;
      auVar9 = minps(auVar9,pauVar3[2]);
      pauVar3[0x143] = auVar7;
      auVar7 = maxps(auVar7,pauVar3[3]);
      *(long *)(pauVar3[0x144] + 8) = lVar6;
      lVar6 = lVar6 + *(long *)(pauVar3[4] + 8);
      pauVar3 = pauVar4;
    } while ((undefined1 (*) [16])local_2848 + local_28b0 * 5 != pauVar4);
    *(long *)(this + 0x40) = lVar5;
    *(long *)(this + 0x48) = lVar6;
    uVar2 = lVar6 - lVar5;
    *(undefined1 (*) [16])this = auVar13;
    *(undefined1 (*) [16])(this + 0x10) = auVar11;
    *(undefined1 (*) [16])(this + 0x20) = auVar9;
    *(undefined1 (*) [16])(this + 0x30) = auVar7;
  }
  if (param_3 == uVar2) goto LAB_0010adb3;
  if ((code *)**(undefined8 **)param_5 == Scene::BuildProgressMonitorInterface::operator()) {
    embree::Scene::progressMonitor(0.0);
  }
  else {
    (*(code *)**(undefined8 **)param_5)(param_5,0);
  }
  local_28b8 = (ulong)*(uint *)(local_28d0[0] + 0x20);
  local_28c0 = 0;
  local_2898 = local_28d0;
  local_2890 = param_4;
  local_2888 = &local_28d4;
  uVar1 = embree::TaskScheduler::threadCount();
  uVar2 = (local_28b8 + 0x3ff) - local_28c0 >> 10;
  if (uVar1 < uVar2) {
    uVar2 = uVar1;
  }
  local_28b0 = 0x40;
  if (uVar2 < 0x41) {
    local_28b0 = uVar2;
  }
  local_2878 = &local_28c0;
  local_2870 = &local_28b8;
  local_2868 = &local_28b0;
  local_2860 = (undefined1 (*) [16])local_2848;
  local_2858 = &local_2898;
  if (uVar2 == 0) {
LAB_0010ad81:
    lVar5 = 0;
    auVar8._4_4_ = uVar15;
    auVar8._0_4_ = uVar15;
    auVar8._8_4_ = uVar15;
    auVar8._12_4_ = uVar15;
    auVar10._4_4_ = uVar16;
    auVar10._0_4_ = uVar16;
    auVar10._8_4_ = uVar16;
    auVar10._12_4_ = uVar16;
    lVar6 = 0;
    auVar12._4_4_ = uVar15;
    auVar12._0_4_ = uVar15;
    auVar12._8_4_ = uVar15;
    auVar12._12_4_ = uVar15;
    auVar14._4_4_ = uVar16;
    auVar14._0_4_ = uVar16;
    auVar14._8_4_ = uVar16;
    auVar14._12_4_ = uVar16;
  }
  else {
    local_28a0 = &local_2878;
    local_28a8 = (long **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_19parallel_prefix_sumImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitINS_12TriangleMeshENS9_23TriangleSplitterFactoryEEES8_PNS_8GeometryEjmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISG_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKNS_5rangeImEERKS8_E1_ZNSA_ISB_SC_EES8_SE_jmSK_SM_EUlSS_SS_E2_EET0_RNS_22ParallelPrefixSumStateISV_EET_SZ_SZ_RKSV_RKT1_RKT2_EUlmE_EEvSZ_S11_EUlSQ_E_EEvSZ_SZ_SZ_S11_PNS0_16TaskGroupContextE
              (0,local_28b0,1,&local_28a0,&local_28a8);
    embree::TaskScheduler::wait();
    auVar8._4_4_ = uVar15;
    auVar8._0_4_ = uVar15;
    auVar8._8_4_ = uVar15;
    auVar8._12_4_ = uVar15;
    auVar10._4_4_ = uVar16;
    auVar10._0_4_ = uVar16;
    auVar10._8_4_ = uVar16;
    auVar10._12_4_ = uVar16;
    if (local_28a8 != (long **)0x0) {
      local_28a0 = local_28a8;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_28a0);
    }
    if (local_28b0 == 0) goto LAB_0010ad81;
    lVar5 = 0;
    lVar6 = 0;
    pauVar3 = (undefined1 (*) [16])local_2848;
    auVar12 = auVar8;
    auVar14 = auVar10;
    do {
      *(long *)pauVar3[0x144] = lVar6;
      lVar6 = lVar6 + *(long *)pauVar3[4];
      pauVar4 = pauVar3 + 5;
      pauVar3[0x140] = auVar14;
      auVar14 = minps(auVar14,*pauVar3);
      pauVar3[0x141] = auVar12;
      auVar12 = maxps(auVar12,pauVar3[1]);
      pauVar3[0x142] = auVar10;
      auVar10 = minps(auVar10,pauVar3[2]);
      pauVar3[0x143] = auVar8;
      auVar8 = maxps(auVar8,pauVar3[3]);
      *(long *)(pauVar3[0x144] + 8) = lVar5;
      lVar5 = lVar5 + *(long *)(pauVar3[4] + 8);
      pauVar3 = pauVar4;
    } while ((undefined1 (*) [16])local_2848 + local_28b0 * 5 != pauVar4);
  }
  *(long *)(this + 0x40) = lVar6;
  *(long *)(this + 0x48) = lVar5;
  *(undefined1 (*) [16])this = auVar14;
  *(undefined1 (*) [16])(this + 0x10) = auVar12;
  *(undefined1 (*) [16])(this + 0x20) = auVar10;
  *(undefined1 (*) [16])(this + 0x30) = auVar8;
LAB_0010adb3:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* WARNING: Removing unreachable block (ram,0x0010b755) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  char cVar14;
  long lVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar15 = embree::TaskScheduler::allocThreadIndex();
  pTVar16 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar16 = lVar15;
  pTVar20 = pTVar16 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar17 = pTVar18 + 0x80;
    *(undefined4 *)(pTVar18 + 0x40) = 0;
    pTVar18 = pTVar17;
  } while (pTVar16 + 0x40040 != pTVar17);
  *(undefined8 *)(pTVar16 + 0x40040) = 0;
  *(undefined8 *)(pTVar16 + 0x40080) = 0;
  *(undefined8 *)(pTVar16 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar16 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar16 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar15 * 8) = pTVar16;
  UNLOCK();
  local_48 = pTVar16;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar16);
  if (*(ulong *)(pTVar16 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar16 + 0xc00c0);
    uVar3 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar16 + 0xc00c0) = uVar3;
      pTVar17 = pTVar16 + uVar3 + 0x40080;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar17 = &PTR_execute_0013ef80;
      uVar5 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar17 + 8) = uVar8;
      *(undefined8 *)(pTVar17 + 0x10) = uVar9;
      *(undefined8 *)(pTVar17 + 0x18) = uVar10;
      *(undefined8 *)(pTVar17 + 0x20) = uVar11;
      *(undefined8 *)(pTVar17 + 0x38) = uVar5;
      *(undefined8 *)(pTVar17 + 0x28) = uVar12;
      *(undefined8 *)(pTVar17 + 0x30) = uVar13;
      lVar19 = *(long *)(pTVar16 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar16 + 0xc0100);
      pTVar16[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar16 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar16 + lVar19 + 0x50) = pTVar17;
      *(long *)(pTVar16 + lVar19 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar16 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar16 + lVar19 + 0x68) = lVar4;
      *(ulong *)(pTVar16 + lVar19 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar16 + 0x40080) = *(long *)(pTVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar16 + 0x40080) - 1U <= *(ulong *)(pTVar16 + 0x40040)) {
        LOCK();
        *(long *)(pTVar16 + 0x40040) = *(long *)(pTVar16 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar17 = local_48 + 8;
            *(long *)pTVar17 = *(long *)pTVar17 + -1;
            UNLOCK();
            if (*(long *)pTVar17 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar14 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar16);
      } while (cVar14 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar15 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar16 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar16 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar16);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar20;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_3_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___3_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_40 = *(undefined8 *)param_4;
  uStack_38 = *(undefined8 *)(param_4 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)(param_4 + 0x10);
  local_58 = param_2;
  uStack_50 = param_1;
  local_48 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_58,param_5,param_2 - param_1,true);
LAB_0010ba07:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0013ef80;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[7] = local_28;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = uStack_38;
      puVar3[6] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010ba07;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_al...mbree::range<unsigned_long>const&)#3}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_al___mbree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  ulong uVar1;
  undefined8 *puVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  float fVar6;
  long lVar7;
  long lVar8;
  ulong uVar9;
  TaskScheduler *pTVar10;
  ulong uVar11;
  int *piVar12;
  float *pfVar13;
  long in_FS_OFFSET;
  float fVar14;
  float fVar15;
  long local_a8;
  ulong uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar11 = *(ulong *)(this + 8);
  uVar9 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar11 - uVar9) {
    pTVar3 = *(TaskGroupContext **)(this + 0x38);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uStack_40 = *(undefined8 *)(this + 0x30);
    uVar11 = uVar11 + uVar9 >> 1;
    local_68 = uVar11;
    uStack_60 = uVar9;
    local_58 = *(ulong *)(this + 0x18);
    local_38 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_68,pTVar3,uVar11 - uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_0010bf1e;
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar1 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar1) goto LAB_0010bf1e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar1;
      puVar2 = (undefined8 *)(lVar7 + 0x40080 + uVar1);
      *puVar2 = &PTR_execute_0013ef80;
      puVar2[1] = local_68;
      puVar2[2] = uStack_60;
      puVar2[7] = local_38;
      puVar2[3] = local_58;
      puVar2[4] = uStack_50;
      puVar2[5] = uStack_48;
      puVar2[6] = uStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar12 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar2;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar11 - uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar12 == 0) {
        *piVar12 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(undefined8 *)(this + 0x18);
    local_a8 = *(long *)(this + 8);
    pTVar3 = *(TaskGroupContext **)(this + 0x38);
    uStack_90 = *(undefined8 *)(this + 0x20);
    uStack_88 = *(undefined8 *)(this + 0x28);
    uStack_80 = *(undefined8 *)(this + 0x30);
    uVar9 = local_a8 - uVar11;
    uStack_a0 = uVar11;
    local_78 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_a8,pTVar3,uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_0010bf1e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar11 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar11) goto LAB_0010bf1e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar11;
      puVar2 = (undefined8 *)(lVar7 + 0x40080 + uVar11);
      *puVar2 = &PTR_execute_0013ef80;
      puVar2[1] = local_a8;
      puVar2[2] = uStack_a0;
      puVar2[7] = local_78;
      puVar2[3] = local_98;
      puVar2[4] = uStack_90;
      puVar2[5] = uStack_88;
      puVar2[6] = uStack_80;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar12 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar2;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar12 == 0) {
        *piVar12 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    fVar15 = _LC12;
    if (uVar9 < uVar11) {
      do {
        while( true ) {
          lVar7 = uVar9 * 8;
          pfVar13 = (float *)(*(long *)(*(long *)(this + 0x20) + 0x18) + lVar7);
          if ((0.0 < *pfVar13) &&
             (fVar14 = (float)**(ulong **)(this + 0x28) * *pfVar13 * **(float **)(this + 0x30),
             fVar15 <= fVar14)) break;
          uVar9 = uVar9 + 1;
          *pfVar13 = 1.4013e-45;
          if (uVar11 == uVar9) goto LAB_0010be78;
        }
        fVar14 = logf(fVar14);
        fVar15 = _LC12;
        fVar14 = fVar14 / __LC46;
        if ((float)((uint)fVar14 & _LC32) < _LC31) {
          fVar14 = (float)((uint)((float)(int)fVar14 +
                                 (float)(-(uint)((float)(int)fVar14 < fVar14) & (uint)_LC12)) |
                          ~_LC32 & (uint)fVar14);
        }
        fVar6 = 7.00649e-45;
        if ((fVar14 < _LC47) && (fVar6 = 1.4013e-45, _LC12 <= fVar14)) {
          fVar6 = (float)(long)fVar14;
        }
        *pfVar13 = fVar6;
        uVar9 = uVar9 + 1;
        piVar12 = (int *)(lVar7 + *(long *)(*(long *)(this + 0x20) + 0x18));
        *piVar12 = 1 << ((byte)*piVar12 & 0x1f);
      } while (uVar11 != uVar9);
    }
LAB_0010be78:
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0010c325) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_7_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  char cVar16;
  long lVar17;
  Thread *pTVar18;
  Thread *pTVar19;
  Thread *pTVar20;
  long lVar21;
  Thread *pTVar22;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar17 = embree::TaskScheduler::allocThreadIndex();
  pTVar18 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar18 = lVar17;
  pTVar22 = pTVar18 + 0x40;
  pTVar20 = pTVar22;
  do {
    *(undefined4 *)pTVar20 = 0;
    pTVar19 = pTVar20 + 0x80;
    *(undefined4 *)(pTVar20 + 0x40) = 0;
    pTVar20 = pTVar19;
  } while (pTVar18 + 0x40040 != pTVar19);
  *(undefined8 *)(pTVar18 + 0x40040) = 0;
  *(undefined8 *)(pTVar18 + 0x40080) = 0;
  *(undefined8 *)(pTVar18 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar18 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar18 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar17 * 8) = pTVar18;
  UNLOCK();
  local_48 = pTVar18;
  pTVar20 = (Thread *)embree::TaskScheduler::swapThread(pTVar18);
  if (*(ulong *)(pTVar18 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar18 + 0xc00c0);
    uVar3 = lVar4 + 0x60 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar18 + 0xc00c0) = uVar3;
      pTVar19 = pTVar18 + uVar3 + 0x40060;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar19 = &PTR_execute_0013ef98;
      uVar5 = *(undefined8 *)(param_1 + 0x50);
      uVar14 = *(undefined8 *)(param_1 + 0x30);
      uVar15 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(pTVar19 + 8) = uVar8;
      *(undefined8 *)(pTVar19 + 0x10) = uVar9;
      uVar8 = *(undefined8 *)(param_1 + 0x40);
      uVar9 = *(undefined8 *)(param_1 + 0x48);
      *(undefined8 *)(pTVar19 + 0x18) = uVar10;
      *(undefined8 *)(pTVar19 + 0x20) = uVar11;
      *(undefined8 *)(pTVar19 + 0x58) = uVar5;
      *(undefined8 *)(pTVar19 + 0x28) = uVar12;
      *(undefined8 *)(pTVar19 + 0x30) = uVar13;
      *(undefined8 *)(pTVar19 + 0x38) = uVar14;
      *(undefined8 *)(pTVar19 + 0x40) = uVar15;
      *(undefined8 *)(pTVar19 + 0x48) = uVar8;
      *(undefined8 *)(pTVar19 + 0x50) = uVar9;
      lVar21 = *(long *)(pTVar18 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar18 + 0xc0100);
      pTVar18[lVar21 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar18 + lVar21 + 0x44) = 1;
      *(Thread **)(pTVar18 + lVar21 + 0x50) = pTVar19;
      *(long *)(pTVar18 + lVar21 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar18 + lVar21 + 0x60) = param_2;
      *(long *)(pTVar18 + lVar21 + 0x68) = lVar4;
      *(ulong *)(pTVar18 + lVar21 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar22 + lVar21) == 0) {
        *(undefined4 *)(pTVar22 + lVar21) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar18 + 0x40080) = *(long *)(pTVar18 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar18 + 0x40080) - 1U <= *(ulong *)(pTVar18 + 0x40040)) {
        LOCK();
        *(long *)(pTVar18 + 0x40040) = *(long *)(pTVar18 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar19 = local_48 + 8;
            *(long *)pTVar19 = *(long *)pTVar19 + -1;
            UNLOCK();
            if (*(long *)pTVar19 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar16 = embree::TaskScheduler::TaskQueue::execute_local(pTVar22,(Task *)pTVar18);
      } while (cVar16 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar17 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar20);
      pTVar22 = *(Thread **)param_2;
      if (pTVar22 != (Thread *)0x0) {
        local_48 = pTVar22;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar22 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar22 == (Thread *)0x0) {
        if (pTVar18 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar18 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar18);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar22;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_7_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___7_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  undefined8 uStack_60;
  undefined8 uStack_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 local_40;
  undefined8 uStack_38;
  undefined8 local_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_60 = *(undefined8 *)param_4;
  uStack_58 = *(undefined8 *)(param_4 + 8);
  uStack_50 = *(undefined8 *)(param_4 + 0x10);
  uStack_48 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_40 = *(undefined8 *)(param_4 + 0x20);
  uStack_38 = *(undefined8 *)(param_4 + 0x28);
  local_30 = *(undefined8 *)(param_4 + 0x30);
  local_78 = param_2;
  uStack_70 = param_1;
  local_68 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_7_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_78,param_5,param_2 - param_1,true);
LAB_0010c5ff:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x60 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40060 + uVar2);
      *puVar3 = &PTR_execute_0013ef98;
      puVar3[1] = local_78;
      puVar3[2] = uStack_70;
      puVar3[3] = local_68;
      puVar3[4] = uStack_60;
      puVar3[0xb] = local_28;
      puVar3[5] = uStack_58;
      puVar3[6] = uStack_50;
      puVar3[7] = uStack_48;
      puVar3[8] = local_40;
      puVar3[9] = uStack_38;
      puVar3[10] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010c5ff;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#7} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_al...mbree::range<unsigned_long>const&)#7}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_al___mbree::range<unsigned_long>const&)_7_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  TaskScheduler *pTVar9;
  ulong uVar10;
  ulong uVar11;
  long in_FS_OFFSET;
  long local_e8;
  ulong uStack_e0;
  undefined8 local_d8;
  undefined8 uStack_d0;
  undefined8 uStack_c8;
  undefined8 uStack_c0;
  undefined8 uStack_b8;
  undefined8 local_b0;
  undefined8 uStack_a8;
  undefined8 local_a0;
  TaskGroupContext *local_98;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  undefined8 uStack_70;
  undefined8 uStack_68;
  undefined8 uStack_60;
  undefined8 uStack_58;
  undefined8 local_50;
  undefined8 uStack_48;
  undefined8 local_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uStack_80 = *(ulong *)(this + 8);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_88 = *(ulong *)(this + 0x10);
  if (*(ulong *)(this + 0x18) < uStack_80 - local_88) {
    pTVar4 = *(TaskGroupContext **)(this + 0x58);
    local_40 = *(undefined8 *)(this + 0x50);
    uStack_70 = *(undefined8 *)(this + 0x20);
    uStack_68 = *(undefined8 *)(this + 0x28);
    uVar11 = uStack_80 + local_88 >> 1;
    uStack_60 = *(undefined8 *)(this + 0x30);
    uStack_58 = *(undefined8 *)(this + 0x38);
    local_50 = *(undefined8 *)(this + 0x40);
    uStack_48 = *(undefined8 *)(this + 0x48);
    uVar10 = uVar11 - local_88;
    uStack_80 = local_88;
    local_88 = uVar11;
    local_78 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_7_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_88,pTVar4,uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_0010ca6e;
      lVar5 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar5 + 0x60 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010ca6e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar7 + 0x40060 + uVar2);
      *puVar3 = &PTR_execute_0013ef98;
      puVar3[1] = local_88;
      puVar3[2] = uStack_80;
      puVar3[3] = local_78;
      puVar3[4] = uStack_70;
      puVar3[0xb] = local_38;
      puVar3[5] = uStack_68;
      puVar3[6] = uStack_60;
      puVar3[7] = uStack_58;
      puVar3[8] = local_50;
      puVar3[9] = uStack_48;
      puVar3[10] = local_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar6 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar3;
      *(long *)(lVar8 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar4;
      *(long *)(lVar8 + 0x68) = lVar5;
      *(ulong *)(lVar8 + 0x70) = uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_d8 = *(undefined8 *)(this + 0x18);
    local_e8 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x58);
    uStack_d0 = *(undefined8 *)(this + 0x20);
    uStack_c8 = *(undefined8 *)(this + 0x28);
    uStack_c0 = *(undefined8 *)(this + 0x30);
    uStack_b8 = *(undefined8 *)(this + 0x38);
    local_b0 = *(undefined8 *)(this + 0x40);
    uStack_a8 = *(undefined8 *)(this + 0x48);
    local_a0 = *(undefined8 *)(this + 0x50);
    uVar10 = local_e8 - uVar11;
    uStack_e0 = uVar11;
    local_98 = pTVar4;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<e___mbree::range<unsigned_long>const&)_7_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_e8,pTVar4,uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_0010ca6e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar7 + 0xc00c0);
      uVar11 = lVar5 + 0x60 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar11) goto LAB_0010ca6e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar11;
      puVar3 = (undefined8 *)(lVar7 + 0x40060 + uVar11);
      *puVar3 = &PTR_execute_0013ef98;
      puVar3[1] = local_e8;
      puVar3[2] = uStack_e0;
      puVar3[3] = local_d8;
      puVar3[4] = uStack_d0;
      puVar3[0xb] = local_98;
      puVar3[5] = uStack_c8;
      puVar3[6] = uStack_c0;
      puVar3[7] = uStack_b8;
      puVar3[8] = local_b0;
      puVar3[9] = uStack_a8;
      puVar3[10] = local_a0;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar6 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar3;
      *(long *)(lVar8 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar4;
      *(long *)(lVar8 + 0x68) = lVar5;
      *(ulong *)(lVar8 + 0x70) = uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    sse2::
    createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5},embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6},embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)#5}const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::{lambda(embree::PrimRef_const&)#6}const&)
    ::{lambda(embree::range<unsigned_long>const&)#7}::operator()
              ((_lambda_embree__range<unsigned_long>const___7_ *)(this + 0x20),(range *)&local_88);
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0010ce65) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  char cVar15;
  long lVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  Thread *pTVar19;
  long lVar20;
  Thread *pTVar21;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar16 = embree::TaskScheduler::allocThreadIndex();
  pTVar17 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar17 = lVar16;
  pTVar21 = pTVar17 + 0x40;
  pTVar19 = pTVar21;
  do {
    *(undefined4 *)pTVar19 = 0;
    pTVar18 = pTVar19 + 0x80;
    *(undefined4 *)(pTVar19 + 0x40) = 0;
    pTVar19 = pTVar18;
  } while (pTVar17 + 0x40040 != pTVar18);
  *(undefined8 *)(pTVar17 + 0x40040) = 0;
  *(undefined8 *)(pTVar17 + 0x40080) = 0;
  *(undefined8 *)(pTVar17 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar17 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar17 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar16 * 8) = pTVar17;
  UNLOCK();
  local_48 = pTVar17;
  pTVar19 = (Thread *)embree::TaskScheduler::swapThread(pTVar17);
  if (*(ulong *)(pTVar17 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar17 + 0xc00c0);
    uVar3 = lVar4 + 0x48 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar17 + 0xc00c0) = uVar3;
      pTVar18 = pTVar17 + uVar3 + 0x40078;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar18 = &PTR_execute_0013efb0;
      uVar13 = *(undefined8 *)(param_1 + 0x30);
      uVar14 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(pTVar18 + 8) = uVar7;
      *(undefined8 *)(pTVar18 + 0x10) = uVar8;
      *(undefined8 *)(pTVar18 + 0x18) = uVar9;
      *(undefined8 *)(pTVar18 + 0x20) = uVar10;
      *(undefined8 *)(pTVar18 + 0x28) = uVar11;
      *(undefined8 *)(pTVar18 + 0x30) = uVar12;
      *(undefined8 *)(pTVar18 + 0x38) = uVar13;
      *(undefined8 *)(pTVar18 + 0x40) = uVar14;
      lVar20 = *(long *)(pTVar17 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar17 + 0xc0100);
      pTVar17[lVar20 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar17 + lVar20 + 0x44) = 1;
      *(Thread **)(pTVar17 + lVar20 + 0x50) = pTVar18;
      *(long *)(pTVar17 + lVar20 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar17 + lVar20 + 0x60) = param_2;
      *(long *)(pTVar17 + lVar20 + 0x68) = lVar4;
      *(ulong *)(pTVar17 + lVar20 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar21 + lVar20) == 0) {
        *(undefined4 *)(pTVar21 + lVar20) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar17 + 0x40080) = *(long *)(pTVar17 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar17 + 0x40080) - 1U <= *(ulong *)(pTVar17 + 0x40040)) {
        LOCK();
        *(long *)(pTVar17 + 0x40040) = *(long *)(pTVar17 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar18 = local_48 + 8;
            *(long *)pTVar18 = *(long *)pTVar18 + -1;
            UNLOCK();
            if (*(long *)pTVar18 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar15 = embree::TaskScheduler::TaskQueue::execute_local(pTVar21,(Task *)pTVar17);
      } while (cVar15 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar16 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar19);
      pTVar21 = *(Thread **)param_2;
      if (pTVar21 != (Thread *)0x0) {
        local_48 = pTVar21;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar21 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar21 == (Thread *)0x0) {
        if (pTVar17 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar17 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar17);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar21;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___2_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  TaskGroupContext *local_30;
  long local_20;
  
  uStack_50 = *(undefined8 *)param_4;
  uStack_48 = *(undefined8 *)(param_4 + 8);
  uStack_40 = *(undefined8 *)(param_4 + 0x10);
  uStack_38 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_68 = param_2;
  uStack_60 = param_1;
  local_58 = param_3;
  local_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_68,param_5,param_2 - param_1,true);
LAB_0010d119:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x48 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40078 + uVar2);
      *puVar3 = &PTR_execute_0013efb0;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      puVar3[7] = uStack_38;
      puVar3[8] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010d119;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMi<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  uint uVar8;
  float fVar9;
  int iVar10;
  long lVar11;
  long lVar12;
  ulong uVar13;
  TaskScheduler *pTVar14;
  float *pfVar15;
  ulong uVar16;
  long in_FS_OFFSET;
  float fVar17;
  long local_b8;
  ulong uStack_b0;
  undefined8 local_a8;
  undefined8 uStack_a0;
  undefined8 uStack_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  TaskGroupContext *local_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  undefined8 uStack_60;
  undefined8 uStack_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  TaskGroupContext *local_40;
  long local_30;
  
  fVar9 = _LC31;
  uVar8 = _LC6;
  uVar7 = _LC12;
  uVar16 = *(ulong *)(this + 8);
  uVar13 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar16 - uVar13) {
    uStack_60 = *(undefined8 *)(this + 0x20);
    uStack_58 = *(undefined8 *)(this + 0x28);
    pTVar4 = *(TaskGroupContext **)(this + 0x40);
    uVar16 = uVar16 + uVar13 >> 1;
    uStack_50 = *(undefined8 *)(this + 0x30);
    uStack_48 = *(undefined8 *)(this + 0x38);
    local_78 = uVar16;
    uStack_70 = uVar13;
    local_68 = *(ulong *)(this + 0x18);
    local_40 = pTVar4;
    lVar11 = embree::TaskScheduler::thread();
    if (lVar11 == 0) {
      pTVar14 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar14,(_lambda___1_ *)&local_78,pTVar4,uVar16 - uVar13,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar11 + 0x40080)) goto LAB_0010d61e;
      lVar5 = *(long *)(lVar11 + 0xc00c0);
      uVar2 = lVar5 + 0x48 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010d61e;
      *(ulong *)(lVar11 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar11 + 0x40078 + uVar2);
      puVar3[1] = local_78;
      puVar3[2] = uStack_70;
      puVar3[3] = local_68;
      puVar3[4] = uStack_60;
      *puVar3 = &PTR_execute_0013efb0;
      puVar3[5] = uStack_58;
      puVar3[6] = uStack_50;
      puVar3[7] = uStack_48;
      puVar3[8] = local_40;
      lVar12 = *(long *)(lVar11 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar11 + 0x40 + lVar12);
      lVar6 = *(long *)(lVar11 + 0xc0100);
      *(undefined4 *)(lVar11 + 0x44 + lVar12) = 1;
      *(undefined1 *)(lVar11 + 0x48 + lVar12) = 1;
      lVar12 = lVar12 + lVar11;
      *(undefined8 **)(lVar12 + 0x50) = puVar3;
      *(long *)(lVar12 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar12 + 0x60) = pTVar4;
      *(long *)(lVar12 + 0x68) = lVar5;
      *(ulong *)(lVar12 + 0x70) = uVar16 - uVar13;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar11 + 0x40080) = *(long *)(lVar11 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar11 + 0x40080) - 1U <= *(ulong *)(lVar11 + 0x40040)) {
        LOCK();
        *(long *)(lVar11 + 0x40040) = *(long *)(lVar11 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_b8 = *(long *)(this + 8);
    local_a8 = *(undefined8 *)(this + 0x18);
    pTVar4 = *(TaskGroupContext **)(this + 0x40);
    uStack_a0 = *(undefined8 *)(this + 0x20);
    uStack_98 = *(undefined8 *)(this + 0x28);
    uStack_90 = *(undefined8 *)(this + 0x30);
    uStack_88 = *(undefined8 *)(this + 0x38);
    uVar13 = local_b8 - uVar16;
    uStack_b0 = uVar16;
    local_80 = pTVar4;
    lVar11 = embree::TaskScheduler::thread();
    if (lVar11 == 0) {
      pTVar14 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar14,(_lambda___1_ *)&local_b8,pTVar4,uVar13,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar11 + 0x40080)) {
LAB_0010d61e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar11 + 0xc00c0);
      uVar16 = lVar5 + 0x48 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar16) goto LAB_0010d61e;
      *(ulong *)(lVar11 + 0xc00c0) = uVar16;
      puVar3 = (undefined8 *)(lVar11 + 0x40078 + uVar16);
      puVar3[1] = local_b8;
      puVar3[2] = uStack_b0;
      *puVar3 = &PTR_execute_0013efb0;
      puVar3[3] = local_a8;
      puVar3[4] = uStack_a0;
      puVar3[5] = uStack_98;
      puVar3[6] = uStack_90;
      puVar3[7] = uStack_88;
      puVar3[8] = local_80;
      lVar12 = *(long *)(lVar11 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar11 + 0x40 + lVar12);
      lVar6 = *(long *)(lVar11 + 0xc0100);
      *(undefined4 *)(lVar11 + 0x44 + lVar12) = 1;
      *(undefined1 *)(lVar11 + 0x48 + lVar12) = 1;
      lVar12 = lVar12 + lVar11;
      *(undefined8 **)(lVar12 + 0x50) = puVar3;
      *(long *)(lVar12 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar12 + 0x60) = pTVar4;
      *(long *)(lVar12 + 0x68) = lVar5;
      *(ulong *)(lVar12 + 0x70) = uVar13;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar11 + 0x40080) = *(long *)(lVar11 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar11 + 0x40080) - 1U <= *(ulong *)(lVar11 + 0x40040)) {
        LOCK();
        *(long *)(lVar11 + 0x40040) = *(long *)(lVar11 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar13 < uVar16) {
      do {
        pfVar15 = (float *)(uVar13 * 0x20 + **(long **)(this + 0x20));
        fVar17 = (pfVar15[4] - *pfVar15) * ((pfVar15[5] - pfVar15[1]) + (pfVar15[6] - pfVar15[2])) +
                 (pfVar15[5] - pfVar15[1]) * (pfVar15[6] - pfVar15[2]);
        fVar17 = (float)(ulong)(*(long *)(*(long *)(this + 0x30) + 0x48) -
                               *(long *)(*(long *)(this + 0x30) + 0x40)) * **(float **)(this + 0x28)
                 * (fVar17 + fVar17) * **(float **)(this + 0x38);
        if ((float)((uint)fVar17 & uVar8) < fVar9) {
          fVar17 = (float)((uint)((float)(int)fVar17 +
                                 (float)(-(uint)((float)(int)fVar17 < fVar17) & uVar7)) |
                          ~uVar8 & (uint)fVar17);
        }
        iVar10 = (int)fVar17;
        if (iVar10 < 1) {
          iVar10 = 1;
        }
        if (0x1b < iVar10) {
          iVar10 = 0x1b;
        }
        uVar13 = uVar13 + 1;
        pfVar15[3] = (float)((uint)pfVar15[3] | (iVar10 + 4) * 0x8000000);
      } while (uVar16 != uVar13);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long>
   const&)#1}::TEMPNAMEPLACEHOLDERVALUE(embree::range<unsigned long> const&) const */

_lambda_embree__range<unsigned_long>const___1_ * __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::
{lambda(embree::range<unsigned_long>const&)#1}::operator()
          (_lambda_embree__range<unsigned_long>const___1_ *this,range *param_1)

{
  long lVar1;
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  undefined1 (*pauVar6) [16];
  long *plVar7;
  long lVar8;
  undefined1 auVar9 [16];
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  undefined1 auVar16 [16];
  undefined4 uVar17;
  undefined4 uVar18;
  ulong *in_RDX;
  _lambda_embree__range<unsigned_long>const___1_ *p_Var19;
  ulong uVar20;
  float *pfVar21;
  ulong uVar22;
  ulong uVar23;
  long lVar24;
  undefined1 (*pauVar25) [16];
  undefined1 (*pauVar26) [16];
  undefined1 (*pauVar27) [16];
  ulong uVar28;
  ulong uVar29;
  uint *puVar30;
  uint uVar31;
  ulong uVar32;
  long in_FS_OFFSET;
  float fVar33;
  float fVar34;
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  undefined1 auVar45 [16];
  undefined1 auVar46 [16];
  undefined1 auVar47 [16];
  uint uVar53;
  uint uVar54;
  undefined1 auVar48 [16];
  undefined1 auVar49 [16];
  undefined1 auVar50 [16];
  undefined1 auVar51 [16];
  undefined1 auVar52 [16];
  uint uVar55;
  uint uVar61;
  uint uVar62;
  undefined1 auVar56 [16];
  undefined1 auVar57 [16];
  undefined1 auVar58 [16];
  undefined1 auVar59 [16];
  undefined1 auVar60 [16];
  undefined1 auVar63 [16];
  undefined1 auVar64 [16];
  float fVar65;
  float fVar66;
  float fVar67;
  float fVar68;
  float fVar69;
  float fVar70;
  float fVar71;
  float fVar72;
  float fVar73;
  float fVar74;
  float fVar75;
  float fVar76;
  float fVar77;
  float fVar78;
  float fVar79;
  float fVar80;
  undefined1 local_f8 [16];
  undefined1 local_e8 [16];
  undefined1 local_d8 [16];
  undefined1 local_c8 [16];
  undefined1 local_b8 [16];
  undefined1 local_a8 [16];
  undefined1 local_98 [16];
  undefined1 local_88 [16];
  undefined1 local_78 [16];
  undefined1 local_68 [16];
  undefined1 local_58 [16];
  long local_40;
  
  uVar18 = _LC3;
  uVar17 = _LC1;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  *(undefined1 (*) [16])(this + 0x700) = (undefined1  [16])0x0;
  *(undefined4 *)this = uVar18;
  *(undefined4 *)(this + 4) = uVar18;
  *(undefined4 *)(this + 8) = uVar18;
  *(undefined4 *)(this + 0xc) = uVar18;
  *(undefined4 *)(this + 0x40) = uVar18;
  *(undefined4 *)(this + 0x44) = uVar18;
  *(undefined4 *)(this + 0x48) = uVar18;
  *(undefined4 *)(this + 0x4c) = uVar18;
  *(undefined4 *)(this + 0x50) = uVar17;
  *(undefined4 *)(this + 0x54) = uVar17;
  *(undefined4 *)(this + 0x58) = uVar17;
  *(undefined4 *)(this + 0x5c) = uVar17;
  *(undefined4 *)(this + 0x20) = uVar18;
  *(undefined4 *)(this + 0x24) = uVar18;
  *(undefined4 *)(this + 0x28) = uVar18;
  *(undefined4 *)(this + 0x2c) = uVar18;
  *(undefined4 *)(this + 0x30) = uVar17;
  *(undefined4 *)(this + 0x34) = uVar17;
  *(undefined4 *)(this + 0x38) = uVar17;
  *(undefined4 *)(this + 0x3c) = uVar17;
  *(undefined4 *)(this + 0x10) = uVar17;
  *(undefined4 *)(this + 0x14) = uVar17;
  *(undefined4 *)(this + 0x18) = uVar17;
  *(undefined4 *)(this + 0x1c) = uVar17;
  *(undefined1 (*) [16])(this + 0x600) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0xa0) = uVar18;
  *(undefined4 *)(this + 0xa4) = uVar18;
  *(undefined4 *)(this + 0xa8) = uVar18;
  *(undefined4 *)(this + 0xac) = uVar18;
  *(undefined4 *)(this + 0xb0) = uVar17;
  *(undefined4 *)(this + 0xb4) = uVar17;
  *(undefined4 *)(this + 0xb8) = uVar17;
  *(undefined4 *)(this + 0xbc) = uVar17;
  *(undefined4 *)(this + 0x80) = uVar18;
  *(undefined4 *)(this + 0x84) = uVar18;
  *(undefined4 *)(this + 0x88) = uVar18;
  *(undefined4 *)(this + 0x8c) = uVar18;
  *(undefined4 *)(this + 0x90) = uVar17;
  *(undefined4 *)(this + 0x94) = uVar17;
  *(undefined4 *)(this + 0x98) = uVar17;
  *(undefined4 *)(this + 0x9c) = uVar17;
  *(undefined4 *)(this + 0x60) = uVar18;
  *(undefined4 *)(this + 100) = uVar18;
  *(undefined4 *)(this + 0x68) = uVar18;
  *(undefined4 *)(this + 0x6c) = uVar18;
  *(undefined4 *)(this + 0x70) = uVar17;
  *(undefined4 *)(this + 0x74) = uVar17;
  *(undefined4 *)(this + 0x78) = uVar17;
  *(undefined4 *)(this + 0x7c) = uVar17;
  *(undefined1 (*) [16])(this + 0x710) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x610) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x100) = uVar18;
  *(undefined4 *)(this + 0x104) = uVar18;
  *(undefined4 *)(this + 0x108) = uVar18;
  *(undefined4 *)(this + 0x10c) = uVar18;
  *(undefined4 *)(this + 0x110) = uVar17;
  *(undefined4 *)(this + 0x114) = uVar17;
  *(undefined4 *)(this + 0x118) = uVar17;
  *(undefined4 *)(this + 0x11c) = uVar17;
  *(undefined4 *)(this + 0xe0) = uVar18;
  *(undefined4 *)(this + 0xe4) = uVar18;
  *(undefined4 *)(this + 0xe8) = uVar18;
  *(undefined4 *)(this + 0xec) = uVar18;
  *(undefined4 *)(this + 0xf0) = uVar17;
  *(undefined4 *)(this + 0xf4) = uVar17;
  *(undefined4 *)(this + 0xf8) = uVar17;
  *(undefined4 *)(this + 0xfc) = uVar17;
  *(undefined4 *)(this + 0xc0) = uVar18;
  *(undefined4 *)(this + 0xc4) = uVar18;
  *(undefined4 *)(this + 200) = uVar18;
  *(undefined4 *)(this + 0xcc) = uVar18;
  *(undefined4 *)(this + 0xd0) = uVar17;
  *(undefined4 *)(this + 0xd4) = uVar17;
  *(undefined4 *)(this + 0xd8) = uVar17;
  *(undefined4 *)(this + 0xdc) = uVar17;
  *(undefined1 (*) [16])(this + 0x720) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x620) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x160) = uVar18;
  *(undefined4 *)(this + 0x164) = uVar18;
  *(undefined4 *)(this + 0x168) = uVar18;
  *(undefined4 *)(this + 0x16c) = uVar18;
  *(undefined4 *)(this + 0x170) = uVar17;
  *(undefined4 *)(this + 0x174) = uVar17;
  *(undefined4 *)(this + 0x178) = uVar17;
  *(undefined4 *)(this + 0x17c) = uVar17;
  *(undefined4 *)(this + 0x140) = uVar18;
  *(undefined4 *)(this + 0x144) = uVar18;
  *(undefined4 *)(this + 0x148) = uVar18;
  *(undefined4 *)(this + 0x14c) = uVar18;
  *(undefined4 *)(this + 0x150) = uVar17;
  *(undefined4 *)(this + 0x154) = uVar17;
  *(undefined4 *)(this + 0x158) = uVar17;
  *(undefined4 *)(this + 0x15c) = uVar17;
  *(undefined4 *)(this + 0x120) = uVar18;
  *(undefined4 *)(this + 0x124) = uVar18;
  *(undefined4 *)(this + 0x128) = uVar18;
  *(undefined4 *)(this + 300) = uVar18;
  *(undefined4 *)(this + 0x130) = uVar17;
  *(undefined4 *)(this + 0x134) = uVar17;
  *(undefined4 *)(this + 0x138) = uVar17;
  *(undefined4 *)(this + 0x13c) = uVar17;
  *(undefined1 (*) [16])(this + 0x730) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x630) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x1c0) = uVar18;
  *(undefined4 *)(this + 0x1c4) = uVar18;
  *(undefined4 *)(this + 0x1c8) = uVar18;
  *(undefined4 *)(this + 0x1cc) = uVar18;
  *(undefined4 *)(this + 0x1d0) = uVar17;
  *(undefined4 *)(this + 0x1d4) = uVar17;
  *(undefined4 *)(this + 0x1d8) = uVar17;
  *(undefined4 *)(this + 0x1dc) = uVar17;
  *(undefined4 *)(this + 0x1a0) = uVar18;
  *(undefined4 *)(this + 0x1a4) = uVar18;
  *(undefined4 *)(this + 0x1a8) = uVar18;
  *(undefined4 *)(this + 0x1ac) = uVar18;
  *(undefined4 *)(this + 0x1b0) = uVar17;
  *(undefined4 *)(this + 0x1b4) = uVar17;
  *(undefined4 *)(this + 0x1b8) = uVar17;
  *(undefined4 *)(this + 0x1bc) = uVar17;
  *(undefined4 *)(this + 0x180) = uVar18;
  *(undefined4 *)(this + 0x184) = uVar18;
  *(undefined4 *)(this + 0x188) = uVar18;
  *(undefined4 *)(this + 0x18c) = uVar18;
  *(undefined4 *)(this + 400) = uVar17;
  *(undefined4 *)(this + 0x194) = uVar17;
  *(undefined4 *)(this + 0x198) = uVar17;
  *(undefined4 *)(this + 0x19c) = uVar17;
  *(undefined1 (*) [16])(this + 0x740) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x640) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x220) = uVar18;
  *(undefined4 *)(this + 0x224) = uVar18;
  *(undefined4 *)(this + 0x228) = uVar18;
  *(undefined4 *)(this + 0x22c) = uVar18;
  *(undefined4 *)(this + 0x230) = uVar17;
  *(undefined4 *)(this + 0x234) = uVar17;
  *(undefined4 *)(this + 0x238) = uVar17;
  *(undefined4 *)(this + 0x23c) = uVar17;
  *(undefined4 *)(this + 0x200) = uVar18;
  *(undefined4 *)(this + 0x204) = uVar18;
  *(undefined4 *)(this + 0x208) = uVar18;
  *(undefined4 *)(this + 0x20c) = uVar18;
  *(undefined4 *)(this + 0x210) = uVar17;
  *(undefined4 *)(this + 0x214) = uVar17;
  *(undefined4 *)(this + 0x218) = uVar17;
  *(undefined4 *)(this + 0x21c) = uVar17;
  *(undefined4 *)(this + 0x1e0) = uVar18;
  *(undefined4 *)(this + 0x1e4) = uVar18;
  *(undefined4 *)(this + 0x1e8) = uVar18;
  *(undefined4 *)(this + 0x1ec) = uVar18;
  *(undefined4 *)(this + 0x1f0) = uVar17;
  *(undefined4 *)(this + 500) = uVar17;
  *(undefined4 *)(this + 0x1f8) = uVar17;
  *(undefined4 *)(this + 0x1fc) = uVar17;
  *(undefined1 (*) [16])(this + 0x750) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x650) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x280) = uVar18;
  *(undefined4 *)(this + 0x284) = uVar18;
  *(undefined4 *)(this + 0x288) = uVar18;
  *(undefined4 *)(this + 0x28c) = uVar18;
  *(undefined4 *)(this + 0x290) = uVar17;
  *(undefined4 *)(this + 0x294) = uVar17;
  *(undefined4 *)(this + 0x298) = uVar17;
  *(undefined4 *)(this + 0x29c) = uVar17;
  *(undefined4 *)(this + 0x260) = uVar18;
  *(undefined4 *)(this + 0x264) = uVar18;
  *(undefined4 *)(this + 0x268) = uVar18;
  *(undefined4 *)(this + 0x26c) = uVar18;
  *(undefined4 *)(this + 0x270) = uVar17;
  *(undefined4 *)(this + 0x274) = uVar17;
  *(undefined4 *)(this + 0x278) = uVar17;
  *(undefined4 *)(this + 0x27c) = uVar17;
  *(undefined4 *)(this + 0x240) = uVar18;
  *(undefined4 *)(this + 0x244) = uVar18;
  *(undefined4 *)(this + 0x248) = uVar18;
  *(undefined4 *)(this + 0x24c) = uVar18;
  *(undefined4 *)(this + 0x250) = uVar17;
  *(undefined4 *)(this + 0x254) = uVar17;
  *(undefined4 *)(this + 600) = uVar17;
  *(undefined4 *)(this + 0x25c) = uVar17;
  *(undefined1 (*) [16])(this + 0x760) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x660) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x2e0) = uVar18;
  *(undefined4 *)(this + 0x2e4) = uVar18;
  *(undefined4 *)(this + 0x2e8) = uVar18;
  *(undefined4 *)(this + 0x2ec) = uVar18;
  *(undefined4 *)(this + 0x2f0) = uVar17;
  *(undefined4 *)(this + 0x2f4) = uVar17;
  *(undefined4 *)(this + 0x2f8) = uVar17;
  *(undefined4 *)(this + 0x2fc) = uVar17;
  *(undefined4 *)(this + 0x2c0) = uVar18;
  *(undefined4 *)(this + 0x2c4) = uVar18;
  *(undefined4 *)(this + 0x2c8) = uVar18;
  *(undefined4 *)(this + 0x2cc) = uVar18;
  *(undefined4 *)(this + 0x2d0) = uVar17;
  *(undefined4 *)(this + 0x2d4) = uVar17;
  *(undefined4 *)(this + 0x2d8) = uVar17;
  *(undefined4 *)(this + 0x2dc) = uVar17;
  *(undefined4 *)(this + 0x2a0) = uVar18;
  *(undefined4 *)(this + 0x2a4) = uVar18;
  *(undefined4 *)(this + 0x2a8) = uVar18;
  *(undefined4 *)(this + 0x2ac) = uVar18;
  *(undefined4 *)(this + 0x2b0) = uVar17;
  *(undefined4 *)(this + 0x2b4) = uVar17;
  *(undefined4 *)(this + 0x2b8) = uVar17;
  *(undefined4 *)(this + 700) = uVar17;
  *(undefined1 (*) [16])(this + 0x770) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x670) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x340) = uVar18;
  *(undefined4 *)(this + 0x344) = uVar18;
  *(undefined4 *)(this + 0x348) = uVar18;
  *(undefined4 *)(this + 0x34c) = uVar18;
  *(undefined4 *)(this + 0x350) = uVar17;
  *(undefined4 *)(this + 0x354) = uVar17;
  *(undefined4 *)(this + 0x358) = uVar17;
  *(undefined4 *)(this + 0x35c) = uVar17;
  *(undefined4 *)(this + 800) = uVar18;
  *(undefined4 *)(this + 0x324) = uVar18;
  *(undefined4 *)(this + 0x328) = uVar18;
  *(undefined4 *)(this + 0x32c) = uVar18;
  *(undefined4 *)(this + 0x330) = uVar17;
  *(undefined4 *)(this + 0x334) = uVar17;
  *(undefined4 *)(this + 0x338) = uVar17;
  *(undefined4 *)(this + 0x33c) = uVar17;
  *(undefined4 *)(this + 0x300) = uVar18;
  *(undefined4 *)(this + 0x304) = uVar18;
  *(undefined4 *)(this + 0x308) = uVar18;
  *(undefined4 *)(this + 0x30c) = uVar18;
  *(undefined4 *)(this + 0x310) = uVar17;
  *(undefined4 *)(this + 0x314) = uVar17;
  *(undefined4 *)(this + 0x318) = uVar17;
  *(undefined4 *)(this + 0x31c) = uVar17;
  *(undefined1 (*) [16])(this + 0x780) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x680) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x3a0) = uVar18;
  *(undefined4 *)(this + 0x3a4) = uVar18;
  *(undefined4 *)(this + 0x3a8) = uVar18;
  *(undefined4 *)(this + 0x3ac) = uVar18;
  *(undefined4 *)(this + 0x3b0) = uVar17;
  *(undefined4 *)(this + 0x3b4) = uVar17;
  *(undefined4 *)(this + 0x3b8) = uVar17;
  *(undefined4 *)(this + 0x3bc) = uVar17;
  *(undefined4 *)(this + 0x380) = uVar18;
  *(undefined4 *)(this + 900) = uVar18;
  *(undefined4 *)(this + 0x388) = uVar18;
  *(undefined4 *)(this + 0x38c) = uVar18;
  *(undefined4 *)(this + 0x390) = uVar17;
  *(undefined4 *)(this + 0x394) = uVar17;
  *(undefined4 *)(this + 0x398) = uVar17;
  *(undefined4 *)(this + 0x39c) = uVar17;
  *(undefined4 *)(this + 0x360) = uVar18;
  *(undefined4 *)(this + 0x364) = uVar18;
  *(undefined4 *)(this + 0x368) = uVar18;
  *(undefined4 *)(this + 0x36c) = uVar18;
  *(undefined4 *)(this + 0x370) = uVar17;
  *(undefined4 *)(this + 0x374) = uVar17;
  *(undefined4 *)(this + 0x378) = uVar17;
  *(undefined4 *)(this + 0x37c) = uVar17;
  *(undefined1 (*) [16])(this + 0x790) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x690) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x400) = uVar18;
  *(undefined4 *)(this + 0x404) = uVar18;
  *(undefined4 *)(this + 0x408) = uVar18;
  *(undefined4 *)(this + 0x40c) = uVar18;
  *(undefined4 *)(this + 0x410) = uVar17;
  *(undefined4 *)(this + 0x414) = uVar17;
  *(undefined4 *)(this + 0x418) = uVar17;
  *(undefined4 *)(this + 0x41c) = uVar17;
  *(undefined4 *)(this + 0x3e0) = uVar18;
  *(undefined4 *)(this + 0x3e4) = uVar18;
  *(undefined4 *)(this + 1000) = uVar18;
  *(undefined4 *)(this + 0x3ec) = uVar18;
  *(undefined4 *)(this + 0x3f0) = uVar17;
  *(undefined4 *)(this + 0x3f4) = uVar17;
  *(undefined4 *)(this + 0x3f8) = uVar17;
  *(undefined4 *)(this + 0x3fc) = uVar17;
  *(undefined4 *)(this + 0x3c0) = uVar18;
  *(undefined4 *)(this + 0x3c4) = uVar18;
  *(undefined4 *)(this + 0x3c8) = uVar18;
  *(undefined4 *)(this + 0x3cc) = uVar18;
  *(undefined4 *)(this + 0x3d0) = uVar17;
  *(undefined4 *)(this + 0x3d4) = uVar17;
  *(undefined4 *)(this + 0x3d8) = uVar17;
  *(undefined4 *)(this + 0x3dc) = uVar17;
  *(undefined1 (*) [16])(this + 0x7a0) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x6a0) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x460) = uVar18;
  *(undefined4 *)(this + 0x464) = uVar18;
  *(undefined4 *)(this + 0x468) = uVar18;
  *(undefined4 *)(this + 0x46c) = uVar18;
  *(undefined4 *)(this + 0x470) = uVar17;
  *(undefined4 *)(this + 0x474) = uVar17;
  *(undefined4 *)(this + 0x478) = uVar17;
  *(undefined4 *)(this + 0x47c) = uVar17;
  *(undefined4 *)(this + 0x440) = uVar18;
  *(undefined4 *)(this + 0x444) = uVar18;
  *(undefined4 *)(this + 0x448) = uVar18;
  *(undefined4 *)(this + 0x44c) = uVar18;
  *(undefined4 *)(this + 0x450) = uVar17;
  *(undefined4 *)(this + 0x454) = uVar17;
  *(undefined4 *)(this + 0x458) = uVar17;
  *(undefined4 *)(this + 0x45c) = uVar17;
  *(undefined4 *)(this + 0x420) = uVar18;
  *(undefined4 *)(this + 0x424) = uVar18;
  *(undefined4 *)(this + 0x428) = uVar18;
  *(undefined4 *)(this + 0x42c) = uVar18;
  *(undefined4 *)(this + 0x430) = uVar17;
  *(undefined4 *)(this + 0x434) = uVar17;
  *(undefined4 *)(this + 0x438) = uVar17;
  *(undefined4 *)(this + 0x43c) = uVar17;
  *(undefined1 (*) [16])(this + 0x7b0) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x6b0) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x4c0) = uVar18;
  *(undefined4 *)(this + 0x4c4) = uVar18;
  *(undefined4 *)(this + 0x4c8) = uVar18;
  *(undefined4 *)(this + 0x4cc) = uVar18;
  *(undefined4 *)(this + 0x4d0) = uVar17;
  *(undefined4 *)(this + 0x4d4) = uVar17;
  *(undefined4 *)(this + 0x4d8) = uVar17;
  *(undefined4 *)(this + 0x4dc) = uVar17;
  *(undefined4 *)(this + 0x4a0) = uVar18;
  *(undefined4 *)(this + 0x4a4) = uVar18;
  *(undefined4 *)(this + 0x4a8) = uVar18;
  *(undefined4 *)(this + 0x4ac) = uVar18;
  *(undefined4 *)(this + 0x4b0) = uVar17;
  *(undefined4 *)(this + 0x4b4) = uVar17;
  *(undefined4 *)(this + 0x4b8) = uVar17;
  *(undefined4 *)(this + 0x4bc) = uVar17;
  *(undefined4 *)(this + 0x480) = uVar18;
  *(undefined4 *)(this + 0x484) = uVar18;
  *(undefined4 *)(this + 0x488) = uVar18;
  *(undefined4 *)(this + 0x48c) = uVar18;
  *(undefined4 *)(this + 0x490) = uVar17;
  *(undefined4 *)(this + 0x494) = uVar17;
  *(undefined4 *)(this + 0x498) = uVar17;
  *(undefined4 *)(this + 0x49c) = uVar17;
  *(undefined1 (*) [16])(this + 0x7c0) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x6c0) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x520) = uVar18;
  *(undefined4 *)(this + 0x524) = uVar18;
  *(undefined4 *)(this + 0x528) = uVar18;
  *(undefined4 *)(this + 0x52c) = uVar18;
  *(undefined4 *)(this + 0x530) = uVar17;
  *(undefined4 *)(this + 0x534) = uVar17;
  *(undefined4 *)(this + 0x538) = uVar17;
  *(undefined4 *)(this + 0x53c) = uVar17;
  *(undefined4 *)(this + 0x500) = uVar18;
  *(undefined4 *)(this + 0x504) = uVar18;
  *(undefined4 *)(this + 0x508) = uVar18;
  *(undefined4 *)(this + 0x50c) = uVar18;
  *(undefined4 *)(this + 0x510) = uVar17;
  *(undefined4 *)(this + 0x514) = uVar17;
  *(undefined4 *)(this + 0x518) = uVar17;
  *(undefined4 *)(this + 0x51c) = uVar17;
  *(undefined4 *)(this + 0x4e0) = uVar18;
  *(undefined4 *)(this + 0x4e4) = uVar18;
  *(undefined4 *)(this + 0x4e8) = uVar18;
  *(undefined4 *)(this + 0x4ec) = uVar18;
  *(undefined4 *)(this + 0x4f0) = uVar17;
  *(undefined4 *)(this + 0x4f4) = uVar17;
  *(undefined4 *)(this + 0x4f8) = uVar17;
  *(undefined4 *)(this + 0x4fc) = uVar17;
  *(undefined1 (*) [16])(this + 2000) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x6d0) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x580) = uVar18;
  *(undefined4 *)(this + 0x584) = uVar18;
  *(undefined4 *)(this + 0x588) = uVar18;
  *(undefined4 *)(this + 0x58c) = uVar18;
  *(undefined4 *)(this + 0x590) = uVar17;
  *(undefined4 *)(this + 0x594) = uVar17;
  *(undefined4 *)(this + 0x598) = uVar17;
  *(undefined4 *)(this + 0x59c) = uVar17;
  *(undefined4 *)(this + 0x560) = uVar18;
  *(undefined4 *)(this + 0x564) = uVar18;
  *(undefined4 *)(this + 0x568) = uVar18;
  *(undefined4 *)(this + 0x56c) = uVar18;
  *(undefined4 *)(this + 0x570) = uVar17;
  *(undefined4 *)(this + 0x574) = uVar17;
  *(undefined4 *)(this + 0x578) = uVar17;
  *(undefined4 *)(this + 0x57c) = uVar17;
  *(undefined4 *)(this + 0x540) = uVar18;
  *(undefined4 *)(this + 0x544) = uVar18;
  *(undefined4 *)(this + 0x548) = uVar18;
  *(undefined4 *)(this + 0x54c) = uVar18;
  *(undefined4 *)(this + 0x550) = uVar17;
  *(undefined4 *)(this + 0x554) = uVar17;
  *(undefined4 *)(this + 0x558) = uVar17;
  *(undefined4 *)(this + 0x55c) = uVar17;
  *(undefined1 (*) [16])(this + 0x7e0) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x6e0) = (undefined1  [16])0x0;
  *(undefined4 *)(this + 0x5e0) = uVar18;
  *(undefined4 *)(this + 0x5e4) = uVar18;
  *(undefined4 *)(this + 0x5e8) = uVar18;
  *(undefined4 *)(this + 0x5ec) = uVar18;
  *(undefined4 *)(this + 0x5f0) = uVar17;
  *(undefined4 *)(this + 0x5f4) = uVar17;
  *(undefined4 *)(this + 0x5f8) = uVar17;
  *(undefined4 *)(this + 0x5fc) = uVar17;
  *(undefined4 *)(this + 0x5c0) = uVar18;
  *(undefined4 *)(this + 0x5c4) = uVar18;
  *(undefined4 *)(this + 0x5c8) = uVar18;
  *(undefined4 *)(this + 0x5cc) = uVar18;
  *(undefined4 *)(this + 0x5d0) = uVar17;
  *(undefined4 *)(this + 0x5d4) = uVar17;
  *(undefined4 *)(this + 0x5d8) = uVar17;
  *(undefined4 *)(this + 0x5dc) = uVar17;
  *(undefined4 *)(this + 0x5a0) = uVar18;
  *(undefined4 *)(this + 0x5a4) = uVar18;
  *(undefined4 *)(this + 0x5a8) = uVar18;
  *(undefined4 *)(this + 0x5ac) = uVar18;
  *(undefined4 *)(this + 0x5b0) = uVar17;
  *(undefined4 *)(this + 0x5b4) = uVar17;
  *(undefined4 *)(this + 0x5b8) = uVar17;
  *(undefined4 *)(this + 0x5bc) = uVar17;
  *(undefined1 (*) [16])(this + 0x7f0) = (undefined1  [16])0x0;
  *(undefined1 (*) [16])(this + 0x6f0) = (undefined1  [16])0x0;
  pauVar6 = *(undefined1 (**) [16])(param_1 + 8);
  plVar7 = (long *)(*(long **)param_1)[1];
  lVar24 = **(long **)param_1;
  if (*in_RDX < in_RDX[1]) {
    pauVar25 = (undefined1 (*) [16])(in_RDX[1] * 0x20 + lVar24);
    pauVar27 = (undefined1 (*) [16])(*in_RDX * 0x20 + lVar24);
    do {
      while( true ) {
        auVar38 = pauVar27[1];
        auVar36 = *pauVar27;
        auVar51 = *pauVar6;
        auVar46 = pauVar6[1];
        fVar72 = auVar51._0_4_;
        fVar73 = auVar51._4_4_;
        fVar74 = auVar51._8_4_;
        fVar69 = auVar46._0_4_;
        fVar70 = auVar46._4_4_;
        fVar71 = auVar46._8_4_;
        if (0xfffffff < *(uint *)(*pauVar27 + 0xc)) break;
        pauVar26 = pauVar27 + 2;
        uVar31 = (uint)(((auVar38._0_4_ + auVar36._0_4_) * _LC14 - fVar72) * fVar69 + _LC16);
        uVar53 = (uint)(((auVar38._4_4_ + auVar36._4_4_) * _LC14 - fVar73) * fVar70 + _UNK_0013f674)
        ;
        uVar54 = (uint)(((auVar38._8_4_ + auVar36._8_4_) * _LC14 - fVar74) * fVar71 + _UNK_0013f678)
        ;
        uVar55 = -(uint)((int)uVar31 < (int)__LC18);
        uVar61 = -(uint)((int)uVar53 < (int)_UNK_0013f684);
        uVar62 = -(uint)((int)uVar54 < (int)_UNK_0013f688);
        uVar31 = uVar55 & uVar31 | ~uVar55 & __LC18;
        uVar53 = uVar61 & uVar53 | ~uVar61 & _UNK_0013f684;
        uVar54 = uVar62 & uVar54 | ~uVar62 & _UNK_0013f688;
        lVar24 = (long)(int)(~-(uint)((int)uVar31 < 0) & uVar31);
        *(int *)(this + lVar24 * 0x10 + 0x600) = *(int *)(this + lVar24 * 0x10 + 0x600) + 1;
        *(int *)(this + lVar24 * 0x10 + 0x700) = *(int *)(this + lVar24 * 0x10 + 0x700) + 1;
        p_Var19 = this + lVar24 * 0x60;
        auVar36 = minps(*(undefined1 (*) [16])p_Var19,auVar36);
        auVar38 = maxps(*(undefined1 (*) [16])(p_Var19 + 0x10),auVar38);
        *(undefined1 (*) [16])p_Var19 = auVar36;
        *(undefined1 (*) [16])(p_Var19 + 0x10) = auVar38;
        auVar38 = pauVar27[1];
        auVar36 = *pauVar27;
        lVar24 = (long)(int)(~-(uint)((int)uVar53 < 0) & uVar53);
        p_Var19 = this + lVar24 * 0x60 + 0x20;
        *(int *)(this + lVar24 * 0x10 + 0x604) = *(int *)(this + lVar24 * 0x10 + 0x604) + 1;
        *(int *)(this + lVar24 * 0x10 + 0x704) = *(int *)(this + lVar24 * 0x10 + 0x704) + 1;
        auVar36 = minps(*(undefined1 (*) [16])p_Var19,auVar36);
        *(undefined1 (*) [16])p_Var19 = auVar36;
        auVar38 = maxps(*(undefined1 (*) [16])(p_Var19 + 0x10),auVar38);
        *(undefined1 (*) [16])(p_Var19 + 0x10) = auVar38;
        auVar38 = pauVar27[1];
        auVar36 = *pauVar27;
        lVar24 = (long)(int)(~-(uint)((int)uVar54 < 0) & uVar54);
        p_Var19 = this + lVar24 * 0x60 + 0x40;
        *(int *)(this + lVar24 * 0x10 + 0x608) = *(int *)(this + lVar24 * 0x10 + 0x608) + 1;
        *(int *)(this + lVar24 * 0x10 + 0x708) = *(int *)(this + lVar24 * 0x10 + 0x708) + 1;
        auVar36 = minps(*(undefined1 (*) [16])p_Var19,auVar36);
        *(undefined1 (*) [16])p_Var19 = auVar36;
        auVar38 = maxps(*(undefined1 (*) [16])(p_Var19 + 0x10),auVar38);
        *(undefined1 (*) [16])(p_Var19 + 0x10) = auVar38;
        pauVar27 = pauVar26;
        if (pauVar25 == pauVar26) goto LAB_0010dbaa;
      }
      lVar24 = 0;
      pfVar21 = (float *)local_b8;
      auVar35._0_4_ = (int)((auVar36._0_4_ - fVar72) * fVar69 + _LC16);
      auVar35._4_4_ = (int)((auVar36._4_4_ - fVar73) * fVar70 + _UNK_0013f674);
      auVar35._8_4_ = (int)((auVar36._8_4_ - fVar74) * fVar71 + _UNK_0013f678);
      auVar35._12_4_ = (int)((auVar36._12_4_ - auVar51._12_4_) * auVar46._12_4_ + _UNK_0013f67c);
      auVar48._0_4_ = -(uint)(auVar35._0_4_ < (int)__LC18);
      auVar48._4_4_ = -(uint)(auVar35._4_4_ < (int)_UNK_0013f684);
      auVar48._8_4_ = -(uint)(auVar35._8_4_ < (int)_UNK_0013f688);
      auVar48._12_4_ = -(uint)(auVar35._12_4_ < _UNK_0013f68c);
      auVar36._4_4_ = _UNK_0013f684;
      auVar36._0_4_ = __LC18;
      auVar36._8_4_ = _UNK_0013f688;
      auVar36._12_4_ = _UNK_0013f68c;
      auVar36 = auVar35 & auVar48 | ~auVar48 & auVar36;
      auVar49._0_4_ = -(uint)(auVar36._0_4_ < 0);
      auVar49._4_4_ = -(uint)(auVar36._4_4_ < 0);
      auVar49._8_4_ = -(uint)(auVar36._8_4_ < 0);
      auVar49._12_4_ = -(uint)(auVar36._12_4_ < 0);
      local_d8 = ~auVar49 & auVar36;
      auVar37._0_4_ = (int)((auVar38._0_4_ - fVar72) * fVar69 + _LC16);
      auVar37._4_4_ = (int)((auVar38._4_4_ - fVar73) * fVar70 + _UNK_0013f674);
      auVar37._8_4_ = (int)((auVar38._8_4_ - fVar74) * fVar71 + _UNK_0013f678);
      auVar37._12_4_ = (int)((auVar38._12_4_ - auVar51._12_4_) * auVar46._12_4_ + _UNK_0013f67c);
      auVar51._0_4_ = -(uint)(auVar37._0_4_ < (int)__LC18);
      auVar51._4_4_ = -(uint)(auVar37._4_4_ < (int)_UNK_0013f684);
      auVar51._8_4_ = -(uint)(auVar37._8_4_ < (int)_UNK_0013f688);
      auVar51._12_4_ = -(uint)(auVar37._12_4_ < _UNK_0013f68c);
      auVar38._4_4_ = _UNK_0013f684;
      auVar38._0_4_ = __LC18;
      auVar38._8_4_ = _UNK_0013f688;
      auVar38._12_4_ = _UNK_0013f68c;
      auVar38 = auVar37 & auVar51 | ~auVar51 & auVar38;
      auVar46._0_4_ = -(uint)(auVar38._0_4_ < 0);
      auVar46._4_4_ = -(uint)(auVar38._4_4_ < 0);
      auVar46._8_4_ = -(uint)(auVar38._8_4_ < 0);
      auVar46._12_4_ = -(uint)(auVar38._12_4_ < 0);
      local_c8 = ~auVar46 & auVar38;
      pauVar26 = pauVar6;
      do {
        if (*(float *)pauVar26[1] != 0.0) {
          uVar28 = (ulong)*(int *)(local_d8 + lVar24 * 4);
          uVar29 = (ulong)*(int *)(local_c8 + lVar24 * 4);
          auVar38 = pauVar27[1];
          auVar36 = *pauVar27;
          if (uVar28 == uVar29) {
            lVar1 = lVar24 + uVar28 * 4;
            *(int *)(this + lVar1 * 4 + 0x600) = *(int *)(this + lVar1 * 4 + 0x600) + 1;
            *(int *)(this + lVar1 * 4 + 0x700) = *(int *)(this + lVar1 * 4 + 0x700) + 1;
            uVar23 = uVar28;
          }
          else {
            local_f8 = auVar36;
            local_e8 = auVar38;
            uVar32 = uVar28;
            do {
              uVar20 = uVar32;
              uVar22 = uVar29;
              if (uVar29 <= uVar20) goto LAB_0010dcb0;
              uVar32 = uVar20 + 1;
            } while ((float)(uVar20 + 1) * *(float *)pauVar26[2] + *(float *)*pauVar26 <=
                     *(float *)(local_f8 + lVar24 * 4));
            do {
              if ((float)uVar22 * *(float *)pauVar26[2] + *(float *)*pauVar26 <
                  *(float *)(local_e8 + lVar24 * 4)) break;
              uVar22 = uVar22 - 1;
            } while (uVar20 < uVar22);
LAB_0010dcb0:
            auVar39._4_4_ = _LC12;
            auVar39._0_4_ = _LC12;
            auVar39._8_4_ = _LC12;
            auVar39._12_4_ = _LC12;
            auVar40._4_4_ = _LC12;
            auVar40._0_4_ = _LC12;
            lVar1 = *(long *)(*(long *)(*plVar7 + 0x1e0) +
                             (ulong)(*(uint *)(*pauVar27 + 0xc) & 0x7ffffff) * 8);
            puVar30 = (uint *)((ulong)*(uint *)(pauVar27[1] + 0xc) * *(long *)(lVar1 + 0x60) +
                              *(long *)(lVar1 + 0x58));
            lVar8 = *(long *)(lVar1 + 0x88);
            uVar32 = *(ulong *)(lVar1 + 0x90);
            local_b8 = *(undefined1 (*) [16])(lVar8 + *puVar30 * uVar32);
            fVar77 = local_b8._0_4_;
            fVar78 = local_b8._4_4_;
            fVar79 = local_b8._8_4_;
            fVar80 = local_b8._12_4_;
            local_88 = local_b8;
            local_a8 = *(undefined1 (*) [16])(lVar8 + puVar30[1] * uVar32);
            fVar73 = local_a8._0_4_;
            fVar74 = local_a8._4_4_;
            fVar75 = local_a8._8_4_;
            fVar76 = local_a8._12_4_;
            local_98 = *(undefined1 (*) [16])(lVar8 + puVar30[2] * uVar32);
            fVar69 = local_98._0_4_;
            fVar70 = local_98._4_4_;
            fVar71 = local_98._8_4_;
            fVar72 = local_98._12_4_;
            auVar56._0_4_ = fVar73 - fVar77;
            auVar56._4_4_ = fVar74 - fVar78;
            auVar56._8_4_ = fVar75 - fVar79;
            auVar56._12_4_ = fVar76 - fVar80;
            local_78 = divps(auVar39,auVar56);
            auVar57._0_4_ = fVar69 - fVar73;
            auVar57._4_4_ = fVar70 - fVar74;
            auVar57._8_4_ = fVar71 - fVar75;
            auVar57._12_4_ = fVar72 - fVar76;
            auVar40._8_4_ = _LC12;
            auVar40._12_4_ = _LC12;
            local_68 = divps(auVar40,auVar57);
            auVar58._0_4_ = fVar77 - fVar69;
            auVar58._4_4_ = fVar78 - fVar70;
            auVar58._8_4_ = fVar79 - fVar71;
            auVar58._12_4_ = fVar80 - fVar72;
            auVar41._4_4_ = _LC12;
            auVar41._0_4_ = _LC12;
            auVar41._8_4_ = _LC12;
            auVar41._12_4_ = _LC12;
            local_58 = divps(auVar41,auVar58);
            uVar23 = uVar20;
            if (uVar20 < uVar22) {
              fVar2 = pfVar21[0xc];
              fVar3 = *pfVar21;
              fVar4 = pfVar21[4];
              fVar5 = pfVar21[8];
              p_Var19 = this + (uVar20 * 3 + lVar24) * 0x20;
              do {
                uVar31 = (uint)uVar32;
                uVar20 = uVar20 + 1;
                if ((long)uVar20 < 0) {
                  uVar31 = (uint)(uVar20 >> 1) | (uint)uVar20 & 1;
                }
                fVar34 = (float)uVar20 * *(float *)pauVar26[2] + *(float *)*pauVar26;
                fVar33 = fVar2;
                if (fVar3 <= fVar34) {
                  auVar50._4_4_ = uVar18;
                  auVar50._0_4_ = uVar18;
                  auVar50._8_4_ = uVar18;
                  auVar50._12_4_ = uVar18;
                  auVar45._4_4_ = uVar17;
                  auVar45._0_4_ = uVar17;
                  auVar45._8_4_ = uVar17;
                  auVar45._12_4_ = uVar17;
                  auVar52 = minps(auVar50,local_b8);
                  auVar47 = maxps(auVar45,local_b8);
                  if (fVar34 != fVar3) {
                    if (fVar4 <= fVar34) goto LAB_0010e0a8;
                    auVar64._4_4_ = uVar17;
                    auVar64._0_4_ = uVar17;
                    auVar64._8_4_ = uVar17;
                    auVar64._12_4_ = uVar17;
                    auVar60._4_4_ = uVar18;
                    auVar60._0_4_ = uVar18;
                    auVar60._8_4_ = uVar18;
                    auVar60._12_4_ = uVar18;
                    goto LAB_0010dff2;
                  }
                  auVar60 = auVar52;
                  auVar64 = auVar47;
                  if (fVar34 <= fVar4) goto LAB_0010df45;
LAB_0010de18:
                  auVar52 = minps(auVar52,local_a8);
                  auVar47 = maxps(auVar47,local_a8);
LAB_0010de20:
                  if (fVar34 < fVar5) {
LAB_0010de26:
                    fVar65 = (fVar34 - fVar4) * pfVar21[0x14];
                    fVar66 = fVar65 * auVar57._0_4_ + fVar73;
                    fVar67 = fVar65 * auVar57._4_4_ + fVar74;
                    fVar68 = fVar65 * auVar57._8_4_ + fVar75;
                    fVar65 = fVar65 * auVar57._12_4_ + fVar76;
                    auVar9._4_4_ = fVar67;
                    auVar9._0_4_ = fVar66;
                    auVar9._8_4_ = fVar68;
                    auVar9._12_4_ = fVar65;
                    auVar52 = minps(auVar52,auVar9);
                    auVar10._4_4_ = fVar67;
                    auVar10._0_4_ = fVar66;
                    auVar10._8_4_ = fVar68;
                    auVar10._12_4_ = fVar65;
                    auVar47 = maxps(auVar47,auVar10);
                    auVar11._4_4_ = fVar67;
                    auVar11._0_4_ = fVar66;
                    auVar11._8_4_ = fVar68;
                    auVar11._12_4_ = fVar65;
                    auVar60 = minps(auVar60,auVar11);
                    auVar12._4_4_ = fVar67;
                    auVar12._0_4_ = fVar66;
                    auVar12._8_4_ = fVar68;
                    auVar12._12_4_ = fVar65;
                    auVar64 = maxps(auVar64,auVar12);
                  }
                  if (fVar34 < fVar5) {
LAB_0010df80:
                    if (fVar34 <= fVar5) goto LAB_0010dfba;
                    if (fVar5 < fVar34) goto joined_r0x0010df9f;
                  }
                  else {
                    auVar52 = minps(auVar52,local_98);
                    auVar47 = maxps(auVar47,local_98);
                    if (fVar34 != fVar5) goto joined_r0x0010df9f;
LAB_0010dfba:
                    auVar60 = minps(auVar60,local_98);
                    auVar64 = maxps(auVar64,local_98);
                  }
                  fVar33 = fVar5;
                  if (fVar2 < fVar34) goto joined_r0x0010df9f;
                }
                else {
                  if (fVar3 < fVar34) {
                    if (fVar34 <= fVar3) {
                      auVar47._4_4_ = uVar17;
                      auVar47._0_4_ = uVar17;
                      auVar47._8_4_ = uVar17;
                      auVar47._12_4_ = uVar17;
                      auVar52._4_4_ = uVar18;
                      auVar52._0_4_ = uVar18;
                      auVar52._8_4_ = uVar18;
                      auVar52._12_4_ = uVar18;
LAB_0010e0a8:
                      auVar64._4_4_ = uVar17;
                      auVar64._0_4_ = uVar17;
                      auVar64._8_4_ = uVar17;
                      auVar64._12_4_ = uVar17;
                      auVar60._4_4_ = uVar18;
                      auVar60._0_4_ = uVar18;
                      auVar60._8_4_ = uVar18;
                      auVar60._12_4_ = uVar18;
                      if (fVar34 <= fVar4) goto LAB_0010df45;
                      if (fVar3 <= fVar34) goto LAB_0010de18;
LAB_0010dff2:
                      fVar65 = (fVar34 - fVar3) * pfVar21[0x10];
                      fVar66 = fVar65 * auVar56._0_4_ + fVar77;
                      fVar67 = fVar65 * auVar56._4_4_ + fVar78;
                      fVar68 = fVar65 * auVar56._8_4_ + fVar79;
                      fVar65 = fVar65 * auVar56._12_4_ + fVar80;
                      auVar13._4_4_ = fVar67;
                      auVar13._0_4_ = fVar66;
                      auVar13._8_4_ = fVar68;
                      auVar13._12_4_ = fVar65;
                      auVar52 = minps(auVar52,auVar13);
                      auVar14._4_4_ = fVar67;
                      auVar14._0_4_ = fVar66;
                      auVar14._8_4_ = fVar68;
                      auVar14._12_4_ = fVar65;
                      auVar47 = maxps(auVar47,auVar14);
                      auVar15._4_4_ = fVar67;
                      auVar15._0_4_ = fVar66;
                      auVar15._8_4_ = fVar68;
                      auVar15._12_4_ = fVar65;
                      auVar60 = minps(auVar60,auVar15);
                      auVar16._4_4_ = fVar67;
                      auVar16._0_4_ = fVar66;
                      auVar16._8_4_ = fVar68;
                      auVar16._12_4_ = fVar65;
                      auVar64 = maxps(auVar64,auVar16);
                    }
                    else {
                      auVar64._4_4_ = uVar17;
                      auVar64._0_4_ = uVar17;
                      auVar64._8_4_ = uVar17;
                      auVar64._12_4_ = uVar17;
                      auVar60._4_4_ = uVar18;
                      auVar60._0_4_ = uVar18;
                      auVar60._8_4_ = uVar18;
                      auVar60._12_4_ = uVar18;
                      auVar47._4_4_ = uVar17;
                      auVar47._0_4_ = uVar17;
                      auVar47._8_4_ = uVar17;
                      auVar47._12_4_ = uVar17;
                      auVar52._4_4_ = uVar18;
                      auVar52._0_4_ = uVar18;
                      auVar52._8_4_ = uVar18;
                      auVar52._12_4_ = uVar18;
                      if (fVar34 < fVar4) goto LAB_0010dff2;
                    }
                    if (fVar34 < fVar4) {
LAB_0010df4b:
                      if (fVar34 <= fVar4) goto LAB_0010dfd0;
                      if (fVar4 < fVar34) goto LAB_0010de20;
                    }
                    else {
                      auVar52 = minps(auVar52,local_a8);
                      auVar47 = maxps(auVar47,local_a8);
                      if (fVar34 != fVar4) goto LAB_0010de20;
                      auVar60 = minps(auVar60,local_a8);
                      auVar64 = maxps(auVar64,local_a8);
                    }
                  }
                  else {
                    auVar59._4_4_ = uVar18;
                    auVar59._0_4_ = uVar18;
                    auVar59._8_4_ = uVar18;
                    auVar59._12_4_ = uVar18;
                    auVar63._4_4_ = uVar17;
                    auVar63._0_4_ = uVar17;
                    auVar63._8_4_ = uVar17;
                    auVar63._12_4_ = uVar17;
                    auVar60 = minps(auVar59,local_b8);
                    auVar64 = maxps(auVar63,local_b8);
                    auVar47._4_4_ = uVar17;
                    auVar47._0_4_ = uVar17;
                    auVar47._8_4_ = uVar17;
                    auVar47._12_4_ = uVar17;
                    auVar52._4_4_ = uVar18;
                    auVar52._0_4_ = uVar18;
                    auVar52._8_4_ = uVar18;
                    auVar52._12_4_ = uVar18;
                    if (fVar4 < fVar34) goto LAB_0010dff2;
LAB_0010df45:
                    if (fVar34 < fVar4) goto LAB_0010df4b;
                    auVar52 = minps(auVar52,local_a8);
                    auVar47 = maxps(auVar47,local_a8);
LAB_0010dfd0:
                    auVar60 = minps(auVar60,local_a8);
                    auVar64 = maxps(auVar64,local_a8);
                  }
                  if (fVar34 <= fVar5) {
                    if (fVar5 <= fVar34) {
                      auVar52 = minps(auVar52,local_98);
                      auVar47 = maxps(auVar47,local_98);
                      goto LAB_0010dfba;
                    }
                    goto LAB_0010df80;
                  }
                  if (fVar34 < fVar4) goto LAB_0010de26;
                  auVar52 = minps(auVar52,local_98);
                  auVar47 = maxps(auVar47,local_98);
joined_r0x0010df9f:
                  if (fVar34 < fVar33) {
                    fVar33 = (fVar34 - fVar5) * pfVar21[0x18];
                    auVar42._0_4_ = fVar33 * auVar58._0_4_ + fVar69;
                    auVar42._4_4_ = fVar33 * auVar58._4_4_ + fVar70;
                    auVar42._8_4_ = fVar33 * auVar58._8_4_ + fVar71;
                    auVar42._12_4_ = fVar33 * auVar58._12_4_ + fVar72;
                    auVar52 = minps(auVar52,auVar42);
                    auVar47 = maxps(auVar47,auVar42);
                    auVar60 = minps(auVar60,auVar42);
                    auVar64 = maxps(auVar64,auVar42);
                  }
                }
                auVar51 = maxps(auVar52,auVar36);
                auVar46 = minps(auVar47,auVar38);
                auVar38 = minps(auVar64,auVar38);
                auVar36 = maxps(auVar60,auVar36);
                auVar43._4_4_ = -(uint)(auVar51._4_4_ <= auVar46._4_4_);
                auVar43._0_4_ = -(uint)(auVar51._0_4_ <= auVar46._0_4_);
                auVar43._8_4_ = -(uint)(auVar51._8_4_ <= auVar46._8_4_);
                auVar43._12_4_ = -(uint)(auVar51._12_4_ <= auVar46._12_4_);
                uVar31 = movmskps(uVar31,auVar43);
                auVar51 = minps(*(undefined1 (*) [16])p_Var19,auVar51);
                uVar32 = (ulong)((~uVar31 & 7) != 0);
                *(undefined1 (*) [16])p_Var19 = auVar51;
                uVar28 = uVar28 + uVar32;
                auVar51 = maxps(*(undefined1 (*) [16])(p_Var19 + 0x10),auVar46);
                *(undefined1 (*) [16])(p_Var19 + 0x10) = auVar51;
                uVar23 = uVar22;
                p_Var19 = p_Var19 + 0x60;
              } while (uVar20 != uVar22);
            }
            auVar44._4_4_ = -(uint)(auVar36._4_4_ <= auVar38._4_4_);
            auVar44._0_4_ = -(uint)(auVar36._0_4_ <= auVar38._0_4_);
            auVar44._8_4_ = -(uint)(auVar36._8_4_ <= auVar38._8_4_);
            auVar44._12_4_ = -(uint)(auVar36._12_4_ <= auVar38._12_4_);
            uVar31 = movmskps((int)uVar20,auVar44);
            *(int *)(this + (lVar24 + 0x180 + uVar28 * 4) * 4) =
                 *(int *)(this + (lVar24 + 0x180 + uVar28 * 4) * 4) + 1;
            *(int *)(this + (lVar24 + 0x1c0 + (uVar29 - ((~uVar31 & 7) != 0)) * 4) * 4) =
                 *(int *)(this + (lVar24 + 0x1c0 + (uVar29 - ((~uVar31 & 7) != 0)) * 4) * 4) + 1;
          }
          p_Var19 = this + (uVar23 * 3 + lVar24) * 0x20;
          auVar36 = minps(*(undefined1 (*) [16])p_Var19,auVar36);
          *(undefined1 (*) [16])p_Var19 = auVar36;
          auVar38 = maxps(*(undefined1 (*) [16])(p_Var19 + 0x10),auVar38);
          *(undefined1 (*) [16])(p_Var19 + 0x10) = auVar38;
        }
        lVar24 = lVar24 + 1;
        pauVar26 = (undefined1 (*) [16])(*pauVar26 + 4);
        pfVar21 = pfVar21 + 1;
      } while (lVar24 != 3);
      pauVar27 = pauVar27 + 2;
    } while (pauVar25 != pauVar27);
  }
LAB_0010dbaa:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* WARNING: Removing unreachable block (ram,0x0010e655) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  char cVar15;
  long lVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  Thread *pTVar19;
  long lVar20;
  Thread *pTVar21;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar16 = embree::TaskScheduler::allocThreadIndex();
  pTVar17 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar17 = lVar16;
  pTVar21 = pTVar17 + 0x40;
  pTVar19 = pTVar21;
  do {
    *(undefined4 *)pTVar19 = 0;
    pTVar18 = pTVar19 + 0x80;
    *(undefined4 *)(pTVar19 + 0x40) = 0;
    pTVar19 = pTVar18;
  } while (pTVar17 + 0x40040 != pTVar18);
  *(undefined8 *)(pTVar17 + 0x40040) = 0;
  *(undefined8 *)(pTVar17 + 0x40080) = 0;
  *(undefined8 *)(pTVar17 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar17 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar17 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar16 * 8) = pTVar17;
  UNLOCK();
  local_48 = pTVar17;
  pTVar19 = (Thread *)embree::TaskScheduler::swapThread(pTVar17);
  if (*(ulong *)(pTVar17 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar17 + 0xc00c0);
    uVar3 = lVar4 + 0x48 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar17 + 0xc00c0) = uVar3;
      pTVar18 = pTVar17 + uVar3 + 0x40078;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar18 = &PTR_execute_0013efc8;
      uVar13 = *(undefined8 *)(param_1 + 0x30);
      uVar14 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(pTVar18 + 8) = uVar7;
      *(undefined8 *)(pTVar18 + 0x10) = uVar8;
      *(undefined8 *)(pTVar18 + 0x18) = uVar9;
      *(undefined8 *)(pTVar18 + 0x20) = uVar10;
      *(undefined8 *)(pTVar18 + 0x28) = uVar11;
      *(undefined8 *)(pTVar18 + 0x30) = uVar12;
      *(undefined8 *)(pTVar18 + 0x38) = uVar13;
      *(undefined8 *)(pTVar18 + 0x40) = uVar14;
      lVar20 = *(long *)(pTVar17 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar17 + 0xc0100);
      pTVar17[lVar20 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar17 + lVar20 + 0x44) = 1;
      *(Thread **)(pTVar17 + lVar20 + 0x50) = pTVar18;
      *(long *)(pTVar17 + lVar20 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar17 + lVar20 + 0x60) = param_2;
      *(long *)(pTVar17 + lVar20 + 0x68) = lVar4;
      *(ulong *)(pTVar17 + lVar20 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar21 + lVar20) == 0) {
        *(undefined4 *)(pTVar21 + lVar20) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar17 + 0x40080) = *(long *)(pTVar17 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar17 + 0x40080) - 1U <= *(ulong *)(pTVar17 + 0x40040)) {
        LOCK();
        *(long *)(pTVar17 + 0x40040) = *(long *)(pTVar17 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar18 = local_48 + 8;
            *(long *)pTVar18 = *(long *)pTVar18 + -1;
            UNLOCK();
            if (*(long *)pTVar18 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar15 = embree::TaskScheduler::TaskQueue::execute_local(pTVar21,(Task *)pTVar17);
      } while (cVar15 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar16 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar19);
      pTVar21 = *(Thread **)param_2;
      if (pTVar21 != (Thread *)0x0) {
        local_48 = pTVar21;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar21 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar21 == (Thread *)0x0) {
        if (pTVar17 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar17 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar17);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar21;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___2_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  TaskGroupContext *local_30;
  long local_20;
  
  uStack_50 = *(undefined8 *)param_4;
  uStack_48 = *(undefined8 *)(param_4 + 8);
  uStack_40 = *(undefined8 *)(param_4 + 0x10);
  uStack_38 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_68 = param_2;
  uStack_60 = param_1;
  local_58 = param_3;
  local_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_68,param_5,param_2 - param_1,true);
LAB_0010e909:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x48 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40078 + uVar2);
      *puVar3 = &PTR_execute_0013efc8;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      puVar3[7] = uStack_38;
      puVar3[8] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010e909;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleMv<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  uint uVar8;
  float fVar9;
  int iVar10;
  long lVar11;
  long lVar12;
  ulong uVar13;
  TaskScheduler *pTVar14;
  float *pfVar15;
  ulong uVar16;
  long in_FS_OFFSET;
  float fVar17;
  long local_b8;
  ulong uStack_b0;
  undefined8 local_a8;
  undefined8 uStack_a0;
  undefined8 uStack_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  TaskGroupContext *local_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  undefined8 uStack_60;
  undefined8 uStack_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  TaskGroupContext *local_40;
  long local_30;
  
  fVar9 = _LC31;
  uVar8 = _LC6;
  uVar7 = _LC12;
  uVar16 = *(ulong *)(this + 8);
  uVar13 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar16 - uVar13) {
    uStack_60 = *(undefined8 *)(this + 0x20);
    uStack_58 = *(undefined8 *)(this + 0x28);
    pTVar4 = *(TaskGroupContext **)(this + 0x40);
    uVar16 = uVar16 + uVar13 >> 1;
    uStack_50 = *(undefined8 *)(this + 0x30);
    uStack_48 = *(undefined8 *)(this + 0x38);
    local_78 = uVar16;
    uStack_70 = uVar13;
    local_68 = *(ulong *)(this + 0x18);
    local_40 = pTVar4;
    lVar11 = embree::TaskScheduler::thread();
    if (lVar11 == 0) {
      pTVar14 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar14,(_lambda___1_ *)&local_78,pTVar4,uVar16 - uVar13,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar11 + 0x40080)) goto LAB_0010ee0e;
      lVar5 = *(long *)(lVar11 + 0xc00c0);
      uVar2 = lVar5 + 0x48 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010ee0e;
      *(ulong *)(lVar11 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar11 + 0x40078 + uVar2);
      puVar3[1] = local_78;
      puVar3[2] = uStack_70;
      puVar3[3] = local_68;
      puVar3[4] = uStack_60;
      *puVar3 = &PTR_execute_0013efc8;
      puVar3[5] = uStack_58;
      puVar3[6] = uStack_50;
      puVar3[7] = uStack_48;
      puVar3[8] = local_40;
      lVar12 = *(long *)(lVar11 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar11 + 0x40 + lVar12);
      lVar6 = *(long *)(lVar11 + 0xc0100);
      *(undefined4 *)(lVar11 + 0x44 + lVar12) = 1;
      *(undefined1 *)(lVar11 + 0x48 + lVar12) = 1;
      lVar12 = lVar12 + lVar11;
      *(undefined8 **)(lVar12 + 0x50) = puVar3;
      *(long *)(lVar12 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar12 + 0x60) = pTVar4;
      *(long *)(lVar12 + 0x68) = lVar5;
      *(ulong *)(lVar12 + 0x70) = uVar16 - uVar13;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar11 + 0x40080) = *(long *)(lVar11 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar11 + 0x40080) - 1U <= *(ulong *)(lVar11 + 0x40040)) {
        LOCK();
        *(long *)(lVar11 + 0x40040) = *(long *)(lVar11 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_b8 = *(long *)(this + 8);
    local_a8 = *(undefined8 *)(this + 0x18);
    pTVar4 = *(TaskGroupContext **)(this + 0x40);
    uStack_a0 = *(undefined8 *)(this + 0x20);
    uStack_98 = *(undefined8 *)(this + 0x28);
    uStack_90 = *(undefined8 *)(this + 0x30);
    uStack_88 = *(undefined8 *)(this + 0x38);
    uVar13 = local_b8 - uVar16;
    uStack_b0 = uVar16;
    local_80 = pTVar4;
    lVar11 = embree::TaskScheduler::thread();
    if (lVar11 == 0) {
      pTVar14 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar14,(_lambda___1_ *)&local_b8,pTVar4,uVar13,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar11 + 0x40080)) {
LAB_0010ee0e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar11 + 0xc00c0);
      uVar16 = lVar5 + 0x48 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar16) goto LAB_0010ee0e;
      *(ulong *)(lVar11 + 0xc00c0) = uVar16;
      puVar3 = (undefined8 *)(lVar11 + 0x40078 + uVar16);
      puVar3[1] = local_b8;
      puVar3[2] = uStack_b0;
      *puVar3 = &PTR_execute_0013efc8;
      puVar3[3] = local_a8;
      puVar3[4] = uStack_a0;
      puVar3[5] = uStack_98;
      puVar3[6] = uStack_90;
      puVar3[7] = uStack_88;
      puVar3[8] = local_80;
      lVar12 = *(long *)(lVar11 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar11 + 0x40 + lVar12);
      lVar6 = *(long *)(lVar11 + 0xc0100);
      *(undefined4 *)(lVar11 + 0x44 + lVar12) = 1;
      *(undefined1 *)(lVar11 + 0x48 + lVar12) = 1;
      lVar12 = lVar12 + lVar11;
      *(undefined8 **)(lVar12 + 0x50) = puVar3;
      *(long *)(lVar12 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar12 + 0x60) = pTVar4;
      *(long *)(lVar12 + 0x68) = lVar5;
      *(ulong *)(lVar12 + 0x70) = uVar13;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar11 + 0x40080) = *(long *)(lVar11 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar11 + 0x40080) - 1U <= *(ulong *)(lVar11 + 0x40040)) {
        LOCK();
        *(long *)(lVar11 + 0x40040) = *(long *)(lVar11 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar13 < uVar16) {
      do {
        pfVar15 = (float *)(uVar13 * 0x20 + **(long **)(this + 0x20));
        fVar17 = (pfVar15[4] - *pfVar15) * ((pfVar15[5] - pfVar15[1]) + (pfVar15[6] - pfVar15[2])) +
                 (pfVar15[5] - pfVar15[1]) * (pfVar15[6] - pfVar15[2]);
        fVar17 = (float)(ulong)(*(long *)(*(long *)(this + 0x30) + 0x48) -
                               *(long *)(*(long *)(this + 0x30) + 0x40)) * **(float **)(this + 0x28)
                 * (fVar17 + fVar17) * **(float **)(this + 0x38);
        if ((float)((uint)fVar17 & uVar8) < fVar9) {
          fVar17 = (float)((uint)((float)(int)fVar17 +
                                 (float)(-(uint)((float)(int)fVar17 < fVar17) & uVar7)) |
                          ~uVar8 & (uint)fVar17);
        }
        iVar10 = (int)fVar17;
        if (iVar10 < 1) {
          iVar10 = 1;
        }
        if (0x1b < iVar10) {
          iVar10 = 0x1b;
        }
        uVar13 = uVar13 + 1;
        pfVar15[3] = (float)((uint)pfVar15[3] | (iVar10 + 4) * 0x8000000);
      } while (uVar16 != uVar13);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0010f205) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  char cVar15;
  long lVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  Thread *pTVar19;
  long lVar20;
  Thread *pTVar21;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar16 = embree::TaskScheduler::allocThreadIndex();
  pTVar17 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar17 = lVar16;
  pTVar21 = pTVar17 + 0x40;
  pTVar19 = pTVar21;
  do {
    *(undefined4 *)pTVar19 = 0;
    pTVar18 = pTVar19 + 0x80;
    *(undefined4 *)(pTVar19 + 0x40) = 0;
    pTVar19 = pTVar18;
  } while (pTVar17 + 0x40040 != pTVar18);
  *(undefined8 *)(pTVar17 + 0x40040) = 0;
  *(undefined8 *)(pTVar17 + 0x40080) = 0;
  *(undefined8 *)(pTVar17 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar17 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar17 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar16 * 8) = pTVar17;
  UNLOCK();
  local_48 = pTVar17;
  pTVar19 = (Thread *)embree::TaskScheduler::swapThread(pTVar17);
  if (*(ulong *)(pTVar17 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar17 + 0xc00c0);
    uVar3 = lVar4 + 0x48 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar17 + 0xc00c0) = uVar3;
      pTVar18 = pTVar17 + uVar3 + 0x40078;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar18 = &PTR_execute_0013efe0;
      uVar13 = *(undefined8 *)(param_1 + 0x30);
      uVar14 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(pTVar18 + 8) = uVar7;
      *(undefined8 *)(pTVar18 + 0x10) = uVar8;
      *(undefined8 *)(pTVar18 + 0x18) = uVar9;
      *(undefined8 *)(pTVar18 + 0x20) = uVar10;
      *(undefined8 *)(pTVar18 + 0x28) = uVar11;
      *(undefined8 *)(pTVar18 + 0x30) = uVar12;
      *(undefined8 *)(pTVar18 + 0x38) = uVar13;
      *(undefined8 *)(pTVar18 + 0x40) = uVar14;
      lVar20 = *(long *)(pTVar17 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar17 + 0xc0100);
      pTVar17[lVar20 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar17 + lVar20 + 0x44) = 1;
      *(Thread **)(pTVar17 + lVar20 + 0x50) = pTVar18;
      *(long *)(pTVar17 + lVar20 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar17 + lVar20 + 0x60) = param_2;
      *(long *)(pTVar17 + lVar20 + 0x68) = lVar4;
      *(ulong *)(pTVar17 + lVar20 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar21 + lVar20) == 0) {
        *(undefined4 *)(pTVar21 + lVar20) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar17 + 0x40080) = *(long *)(pTVar17 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar17 + 0x40080) - 1U <= *(ulong *)(pTVar17 + 0x40040)) {
        LOCK();
        *(long *)(pTVar17 + 0x40040) = *(long *)(pTVar17 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar18 = local_48 + 8;
            *(long *)pTVar18 = *(long *)pTVar18 + -1;
            UNLOCK();
            if (*(long *)pTVar18 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar15 = embree::TaskScheduler::TaskQueue::execute_local(pTVar21,(Task *)pTVar17);
      } while (cVar15 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar16 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar19);
      pTVar21 = *(Thread **)param_2;
      if (pTVar21 != (Thread *)0x0) {
        local_48 = pTVar21;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar21 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar21 == (Thread *)0x0) {
        if (pTVar17 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar17 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar17);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar21;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___2_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  TaskGroupContext *local_30;
  long local_20;
  
  uStack_50 = *(undefined8 *)param_4;
  uStack_48 = *(undefined8 *)(param_4 + 8);
  uStack_40 = *(undefined8 *)(param_4 + 0x10);
  uStack_38 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_68 = param_2;
  uStack_60 = param_1;
  local_58 = param_3;
  local_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_68,param_5,param_2 - param_1,true);
LAB_0010f4b9:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x48 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40078 + uVar2);
      *puVar3 = &PTR_execute_0013efe0;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      puVar3[7] = uStack_38;
      puVar3[8] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010f4b9;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::CreateLeafSpatial<4,
   embree::TriangleM<4> >, embree::sse2::TriangleSplitterFactory,
   embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > const&,
   embree::sse2::TriangleSplitterFactory, embree::Scene::BuildProgressMonitorInterface,
   embree::PrimRef*, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::GeneralBVHBuilder::Settings const&)::{lambda(embree::range<unsigned long>
   const&)#2} const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  uint uVar7;
  uint uVar8;
  float fVar9;
  int iVar10;
  long lVar11;
  long lVar12;
  ulong uVar13;
  TaskScheduler *pTVar14;
  float *pfVar15;
  ulong uVar16;
  long in_FS_OFFSET;
  float fVar17;
  long local_b8;
  ulong uStack_b0;
  undefined8 local_a8;
  undefined8 uStack_a0;
  undefined8 uStack_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  TaskGroupContext *local_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  undefined8 uStack_60;
  undefined8 uStack_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  TaskGroupContext *local_40;
  long local_30;
  
  fVar9 = _LC31;
  uVar8 = _LC6;
  uVar7 = _LC12;
  uVar16 = *(ulong *)(this + 8);
  uVar13 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar16 - uVar13) {
    uStack_60 = *(undefined8 *)(this + 0x20);
    uStack_58 = *(undefined8 *)(this + 0x28);
    pTVar4 = *(TaskGroupContext **)(this + 0x40);
    uVar16 = uVar16 + uVar13 >> 1;
    uStack_50 = *(undefined8 *)(this + 0x30);
    uStack_48 = *(undefined8 *)(this + 0x38);
    local_78 = uVar16;
    uStack_70 = uVar13;
    local_68 = *(ulong *)(this + 0x18);
    local_40 = pTVar4;
    lVar11 = embree::TaskScheduler::thread();
    if (lVar11 == 0) {
      pTVar14 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar14,(_lambda___1_ *)&local_78,pTVar4,uVar16 - uVar13,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar11 + 0x40080)) goto LAB_0010f9be;
      lVar5 = *(long *)(lVar11 + 0xc00c0);
      uVar2 = lVar5 + 0x48 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010f9be;
      *(ulong *)(lVar11 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar11 + 0x40078 + uVar2);
      puVar3[1] = local_78;
      puVar3[2] = uStack_70;
      puVar3[3] = local_68;
      puVar3[4] = uStack_60;
      *puVar3 = &PTR_execute_0013efe0;
      puVar3[5] = uStack_58;
      puVar3[6] = uStack_50;
      puVar3[7] = uStack_48;
      puVar3[8] = local_40;
      lVar12 = *(long *)(lVar11 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar11 + 0x40 + lVar12);
      lVar6 = *(long *)(lVar11 + 0xc0100);
      *(undefined4 *)(lVar11 + 0x44 + lVar12) = 1;
      *(undefined1 *)(lVar11 + 0x48 + lVar12) = 1;
      lVar12 = lVar12 + lVar11;
      *(undefined8 **)(lVar12 + 0x50) = puVar3;
      *(long *)(lVar12 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar12 + 0x60) = pTVar4;
      *(long *)(lVar12 + 0x68) = lVar5;
      *(ulong *)(lVar12 + 0x70) = uVar16 - uVar13;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar11 + 0x40080) = *(long *)(lVar11 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar11 + 0x40080) - 1U <= *(ulong *)(lVar11 + 0x40040)) {
        LOCK();
        *(long *)(lVar11 + 0x40040) = *(long *)(lVar11 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_b8 = *(long *)(this + 8);
    local_a8 = *(undefined8 *)(this + 0x18);
    pTVar4 = *(TaskGroupContext **)(this + 0x40);
    uStack_a0 = *(undefined8 *)(this + 0x20);
    uStack_98 = *(undefined8 *)(this + 0x28);
    uStack_90 = *(undefined8 *)(this + 0x30);
    uStack_88 = *(undefined8 *)(this + 0x38);
    uVar13 = local_b8 - uVar16;
    uStack_b0 = uVar16;
    local_80 = pTVar4;
    lVar11 = embree::TaskScheduler::thread();
    if (lVar11 == 0) {
      pTVar14 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar14,(_lambda___1_ *)&local_b8,pTVar4,uVar13,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar11 + 0x40080)) {
LAB_0010f9be:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar11 + 0xc00c0);
      uVar16 = lVar5 + 0x48 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar16) goto LAB_0010f9be;
      *(ulong *)(lVar11 + 0xc00c0) = uVar16;
      puVar3 = (undefined8 *)(lVar11 + 0x40078 + uVar16);
      puVar3[1] = local_b8;
      puVar3[2] = uStack_b0;
      *puVar3 = &PTR_execute_0013efe0;
      puVar3[3] = local_a8;
      puVar3[4] = uStack_a0;
      puVar3[5] = uStack_98;
      puVar3[6] = uStack_90;
      puVar3[7] = uStack_88;
      puVar3[8] = local_80;
      lVar12 = *(long *)(lVar11 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar11 + 0x40 + lVar12);
      lVar6 = *(long *)(lVar11 + 0xc0100);
      *(undefined4 *)(lVar11 + 0x44 + lVar12) = 1;
      *(undefined1 *)(lVar11 + 0x48 + lVar12) = 1;
      lVar12 = lVar12 + lVar11;
      *(undefined8 **)(lVar12 + 0x50) = puVar3;
      *(long *)(lVar12 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar12 + 0x60) = pTVar4;
      *(long *)(lVar12 + 0x68) = lVar5;
      *(ulong *)(lVar12 + 0x70) = uVar13;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar11 + 0x40080) = *(long *)(lVar11 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar11 + 0x40080) - 1U <= *(ulong *)(lVar11 + 0x40040)) {
        LOCK();
        *(long *)(lVar11 + 0x40040) = *(long *)(lVar11 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar13 < uVar16) {
      do {
        pfVar15 = (float *)(uVar13 * 0x20 + **(long **)(this + 0x20));
        fVar17 = (pfVar15[4] - *pfVar15) * ((pfVar15[5] - pfVar15[1]) + (pfVar15[6] - pfVar15[2])) +
                 (pfVar15[5] - pfVar15[1]) * (pfVar15[6] - pfVar15[2]);
        fVar17 = (float)(ulong)(*(long *)(*(long *)(this + 0x30) + 0x48) -
                               *(long *)(*(long *)(this + 0x30) + 0x40)) * **(float **)(this + 0x28)
                 * (fVar17 + fVar17) * **(float **)(this + 0x38);
        if ((float)((uint)fVar17 & uVar8) < fVar9) {
          fVar17 = (float)((uint)((float)(int)fVar17 +
                                 (float)(-(uint)((float)(int)fVar17 < fVar17) & uVar7)) |
                          ~uVar8 & (uint)fVar17);
        }
        iVar10 = (int)fVar17;
        if (iVar10 < 1) {
          iVar10 = 1;
        }
        if (0x1b < iVar10) {
          iVar10 = 0x1b;
        }
        uVar13 = uVar13 + 1;
        pfVar15[3] = (float)((uint)pfVar15[3] | (iVar10 + 4) * 0x8000000);
      } while (uVar16 != uVar13);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* float embree::parallel_reduce_internal<unsigned long, float,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&)::{lambda(float const&,
   float const&)#2}>(unsigned long, unsigned long, unsigned long, unsigned long, float const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&)::{lambda(float const&,
   float const&)#2} const&) */

float embree::
      parallel_reduce_internal<unsigned_long,float,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::Pr___ProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(float_const&,float_const&)_2_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,float *param_5,
                _lambda_embree__range<unsigned_long>_const___1_ *param_6,
                _lambda_float_const__float_const___2_ *param_7)

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  float *pfVar8;
  float *pfVar9;
  undefined8 uVar10;
  ulong uVar11;
  long in_FS_OFFSET;
  float fVar12;
  ulong local_2148;
  ulong local_2140;
  ulong local_2138 [2];
  ulong local_2128;
  ulong *local_2120;
  ulong *local_2118;
  ulong *local_2110;
  float *local_2108;
  _lambda_embree__range<unsigned_long>_const___1_ *local_2100;
  ulong local_20f0;
  undefined8 uStack_20e8;
  undefined8 local_20e0;
  ulong **ppuStack_20d8;
  ulong *local_20d0;
  float local_20c0 [2048];
  float *local_c0;
  ulong local_b8;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2148 = param_3;
  local_2140 = param_2;
  local_2138[0] = param_1;
  uVar5 = embree::TaskScheduler::threadCount();
  if (local_2138[0] < uVar5) {
    uVar5 = local_2138[0];
  }
  local_2120 = &local_2140;
  local_2118 = &local_2148;
  local_2110 = local_2138;
  uVar11 = 0x200;
  if (uVar5 < 0x201) {
    uVar11 = uVar5;
  }
  local_2138[0] = uVar11;
  local_2108 = local_20c0;
  local_2100 = param_6;
  local_c0 = local_20c0;
  local_b8 = uVar11;
  if (uVar5 == 0) {
    fVar12 = *param_5;
  }
  else {
    ppuStack_20d8 = &local_2120;
    uStack_20e8 = 0;
    local_20e0 = 1;
    local_2128 = 0;
    local_20f0 = uVar11;
    local_20d0 = &local_2128;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar10 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImfZNS_4sse227createPrimRefArray_presplitIZNS5_27createPrimRefArray_presplitINS_12TriangleMeshENS5_23TriangleSplitterFactoryEEENS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEPNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSK_jRKNS5_13SplittingGridEPSK_RjE3_ZNS7_IS8_S9_EESE_SG_SI_bmSO_SQ_EUlSS_E4_SN_EESE_mRT1_RKSE_RKT_RKT0_EUlRKNS_5rangeImEEE_ZNS6_ISY_SZ_SN_EESE_mS11_S13_S16_S19_EUlRKfS1G_E0_EES17_S14_S14_S14_S14_S19_RKS10_RKT2_EUlmE_EEvS14_S19_EUlS1D_E_EEvS14_S14_S14_S19_PNS0_16TaskGroupContextEEUlvE_EEvS16_S1Q_mb
                (uVar10,&local_20f0,&local_2128,uVar11,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_00111a3b:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar6 + 0xc00c0);
      uVar5 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar5) goto LAB_00111a3b;
      *(ulong *)(lVar6 + 0xc00c0) = uVar5;
      puVar2 = (undefined8 *)(lVar6 + 0x40090 + uVar5);
      *puVar2 = 0x13f028;
      puVar2[1] = local_20f0;
      puVar2[2] = uStack_20e8;
      puVar2[3] = local_20e0;
      puVar2[4] = ppuStack_20d8;
      puVar2[5] = local_20d0;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar2;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_2128;
      *(long *)(lVar7 + 0x68) = lVar3;
      *(ulong *)(lVar7 + 0x70) = uVar11;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2128 != 0) {
      local_20f0 = local_2128;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_20f0);
    }
    fVar12 = *param_5;
    if (local_2138[0] != 0) {
      pfVar8 = local_c0;
      if ((local_2138[0] & 1) != 0) {
        fVar12 = fVar12 + *local_c0;
        pfVar8 = local_c0 + 1;
        if (local_c0 + local_2138[0] == local_c0 + 1) goto LAB_001117f0;
      }
      do {
        pfVar9 = pfVar8 + 2;
        fVar12 = fVar12 + *pfVar8 + pfVar8[1];
        pfVar8 = pfVar9;
      } while (local_c0 + local_2138[0] != pfVar9);
    }
  }
LAB_001117f0:
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return fVar12;
}



/* unsigned long embree::parallel_reduce_internal<unsigned long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&)::{lambda(unsigned long
   const&, unsigned long const&)#6}>(unsigned long, unsigned long, unsigned long, unsigned long,
   unsigned long const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&)::{lambda(unsigned long
   const&, unsigned long const&)#6} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<em___)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(unsigned_long_const&,unsigned_long_const&)_6_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,ulong *param_5,
                _lambda_embree__range<unsigned_long>_const___5_ *param_6,
                _lambda_unsigned_long_const__unsigned_long_const___6_ *param_7)

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  ulong uVar10;
  long in_FS_OFFSET;
  ulong local_2148;
  ulong local_2140;
  ulong local_2138 [2];
  ulong local_2128;
  ulong *local_2120;
  ulong *local_2118;
  ulong *local_2110;
  long *local_2108;
  _lambda_embree__range<unsigned_long>_const___5_ *local_2100;
  ulong local_20f0;
  undefined8 uStack_20e8;
  undefined8 local_20e0;
  ulong **ppuStack_20d8;
  ulong *local_20d0;
  long local_20c0 [1024];
  long *local_c0;
  ulong local_b8;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2148 = param_3;
  local_2140 = param_2;
  local_2138[0] = param_1;
  uVar5 = embree::TaskScheduler::threadCount();
  if (local_2138[0] < uVar5) {
    uVar5 = local_2138[0];
  }
  local_2120 = &local_2140;
  local_2118 = &local_2148;
  local_2110 = local_2138;
  uVar10 = 0x200;
  if (uVar5 < 0x201) {
    uVar10 = uVar5;
  }
  local_2138[0] = uVar10;
  local_2108 = local_20c0;
  local_2100 = param_6;
  local_c0 = local_20c0;
  local_b8 = uVar10;
  if (uVar5 == 0) {
    uVar5 = *param_5;
  }
  else {
    ppuStack_20d8 = &local_2120;
    uStack_20e8 = 0;
    local_20e0 = 1;
    local_2128 = 0;
    local_20f0 = uVar10;
    local_20d0 = &local_2128;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar9 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImmZNS_4sse227createPrimRefArray_presplitIZNS5_27createPrimRefArray_presplitINS_12TriangleMeshENS5_23TriangleSplitterFactoryEEENS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEPNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSK_jRKNS5_13SplittingGridEPSK_RjE3_ZNS7_IS8_S9_EESE_SG_SI_bmSO_SQ_EUlSS_E4_SN_EESE_mRT1_RKSE_RKT_RKT0_EUlRKNS_5rangeImEEE3_ZNS6_ISY_SZ_SN_EESE_mS11_S13_S16_S19_EUlRKmS1G_E4_EES17_S14_S14_S14_S14_S19_RKS10_RKT2_EUlmE_EEvS14_S19_EUlS1D_E_EEvS14_S14_S14_S19_PNS0_16TaskGroupContextEEUlvE_EEvS16_S1Q_mb
                (uVar9,&local_20f0,&local_2128,uVar10,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_00112643:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar6 + 0xc00c0);
      uVar5 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar5) goto LAB_00112643;
      *(ulong *)(lVar6 + 0xc00c0) = uVar5;
      puVar2 = (undefined8 *)(lVar6 + 0x40090 + uVar5);
      *puVar2 = 0x13f040;
      puVar2[1] = local_20f0;
      puVar2[2] = uStack_20e8;
      puVar2[3] = local_20e0;
      puVar2[4] = ppuStack_20d8;
      puVar2[5] = local_20d0;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar2;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_2128;
      *(long *)(lVar7 + 0x68) = lVar3;
      *(ulong *)(lVar7 + 0x70) = uVar10;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2128 != 0) {
      local_20f0 = local_2128;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_20f0);
    }
    uVar5 = *param_5;
    if (local_2138[0] != 0) {
      plVar8 = local_c0;
      do {
        uVar5 = uVar5 + *plVar8;
        plVar8 = plVar8 + 1;
      } while (local_c0 + local_2138[0] != plVar8);
    }
  }
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar5;
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> > embree::parallel_reduce_internal<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#8},
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#9}>(unsigned long, unsigned long,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::range<unsigned long> const&)#8} const&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#9} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embr___InfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_9_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,PrimInfoT *param_5,
                _lambda_embree__range<unsigned_long>_const___8_ *param_6,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___9_
                *param_7)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  undefined1 (*pauVar8) [16];
  undefined1 (*pauVar9) [16];
  undefined8 uVar10;
  long lVar11;
  long in_FS_OFFSET;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  ulong local_2108;
  ulong local_2100;
  ulong local_20f8 [2];
  ulong local_20e8;
  ulong *local_20e0;
  ulong *local_20d8;
  ulong *local_20d0;
  undefined1 (*local_20c8) [16];
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___9_
  *local_20c0;
  ulong local_20b0;
  undefined8 uStack_20a8;
  undefined8 local_20a0;
  ulong **ppuStack_2098;
  ulong *local_2090;
  undefined1 local_2080 [8160];
  undefined1 (*local_a0) [16];
  ulong local_98;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2108 = param_4;
  local_2100 = param_3;
  local_20f8[0] = param_2;
  uVar5 = embree::TaskScheduler::threadCount();
  if (0x200 < local_20f8[0]) {
    local_20f8[0] = 0x200;
  }
  if (uVar5 < local_20f8[0]) {
    local_20f8[0] = uVar5;
  }
  local_98 = local_20f8[0];
  if (local_20f8[0] * 0x50 < 0x2001) {
    local_a0 = (undefined1 (*) [16])local_2080;
  }
  else {
    local_a0 = (undefined1 (*) [16])embree::alignedMalloc(local_20f8[0] * 0x50,0x40);
  }
  uVar5 = local_20f8[0];
  local_20e0 = &local_2100;
  local_20d8 = &local_2108;
  local_20d0 = local_20f8;
  local_20c0 = param_7;
  local_20c8 = (undefined1 (*) [16])local_2080;
  if (local_20f8[0] == 0) {
    uVar10 = *(undefined8 *)(param_6 + 8);
    *(undefined8 *)param_1 = *(undefined8 *)param_6;
    *(undefined8 *)(param_1 + 8) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x18);
    *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_6 + 0x10);
    *(undefined8 *)(param_1 + 0x18) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x28);
    *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_6 + 0x20);
    *(undefined8 *)(param_1 + 0x28) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x38);
    *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_6 + 0x30);
    *(undefined8 *)(param_1 + 0x38) = uVar10;
    *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_6 + 0x40);
    *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_6 + 0x48);
  }
  else {
    ppuStack_2098 = &local_20e0;
    uStack_20a8 = 0;
    local_20a0 = 1;
    local_20e8 = 0;
    local_20b0 = local_20f8[0];
    local_2090 = &local_20e8;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar10 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitIZNSA_27createPrimRefArray_presplitINS_12TriangleMeshENSA_23TriangleSplitterFactoryEEES9_PNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSK_jRKNSA_13SplittingGridEPSK_RjE3_ZNSC_ISD_SE_EES9_SG_SI_bmSO_SQ_EUlSS_E4_SN_EES9_mRT1_RKS9_RKT_RKT0_EUlRKNS_5rangeImEEE6_ZNSB_ISY_SZ_SN_EES9_mS11_S13_S16_S19_EUlS13_S13_E7_EES17_S14_S14_S14_S14_S19_RKS10_RKT2_EUlmE_EEvS14_S19_EUlS1D_E_EEvS14_S14_S14_S19_PNS0_16TaskGroupContextEEUlvE_EEvS16_S1O_mb
                (uVar10,&local_20b0,&local_20e8,uVar5,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_0011455e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar11 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar11 + 0x30 + (ulong)(-(int)lVar11 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0011455e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = 0x13f088;
      puVar3[1] = local_20b0;
      puVar3[2] = uStack_20a8;
      puVar3[3] = local_20a0;
      puVar3[4] = ppuStack_2098;
      puVar3[5] = local_2090;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_20e8;
      *(long *)(lVar7 + 0x68) = lVar11;
      *(ulong *)(lVar7 + 0x70) = uVar5;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_20e8 != 0) {
      local_20b0 = local_20e8;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_20b0);
    }
    auVar12 = *(undefined1 (*) [16])param_6;
    *(undefined1 (*) [16])param_1 = auVar12;
    auVar13 = *(undefined1 (*) [16])(param_6 + 0x10);
    *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
    auVar14 = *(undefined1 (*) [16])(param_6 + 0x20);
    *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
    auVar15 = *(undefined1 (*) [16])(param_6 + 0x30);
    *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
    lVar6 = *(long *)(param_6 + 0x40);
    lVar11 = *(long *)(param_6 + 0x48);
    *(long *)(param_1 + 0x40) = lVar6;
    *(long *)(param_1 + 0x48) = lVar11;
    if (local_20f8[0] != 0) {
      pauVar8 = local_a0;
      do {
        auVar12 = minps(auVar12,*pauVar8);
        auVar13 = maxps(auVar13,pauVar8[1]);
        pauVar9 = pauVar8 + 5;
        auVar14 = minps(auVar14,pauVar8[2]);
        auVar15 = maxps(auVar15,pauVar8[3]);
        lVar6 = lVar6 + *(long *)pauVar8[4];
        lVar11 = lVar11 + *(long *)(pauVar8[4] + 8);
        *(long *)(param_1 + 0x48) = lVar11;
        *(long *)(param_1 + 0x40) = lVar6;
        *(undefined1 (*) [16])param_1 = auVar12;
        *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
        *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
        *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
        pauVar8 = pauVar9;
      } while (local_a0 + local_20f8[0] * 5 != pauVar9);
    }
  }
  if (local_a0 != (undefined1 (*) [16])local_2080) {
    embree::alignedFree(local_a0);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul, embree::PrimRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(embree::range<unsigned long>
   const&)#1}, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long, embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>
   >&)::{lambda(embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned
   long, unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul, embree::PrimRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(embree::range<unsigned long>
   const&)#1} const&, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long, embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>
   >&)::{lambda(embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&)#2}
   const&)::{lambda(unsigned long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::{lambda(embree::range<unsigned_long>const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::{lambda(embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,unsigned_long,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::{lambda(embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&)#2}const&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined1 auVar1 [16];
  float fVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined8 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  undefined8 uVar21;
  ulong uVar22;
  undefined8 *puVar23;
  long lVar24;
  undefined1 (*pauVar25) [16];
  ulong uVar26;
  uint uVar27;
  undefined1 (*pauVar28) [16];
  ulong uVar29;
  ulong uVar30;
  long lVar31;
  undefined8 *puVar32;
  undefined1 (*pauVar33) [16];
  long in_FS_OFFSET;
  bool bVar34;
  uint uVar35;
  uint uVar36;
  uint uVar37;
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  uint uVar40;
  uint uVar42;
  uint uVar43;
  undefined1 auVar41 [16];
  uint uVar45;
  uint uVar46;
  undefined1 auVar44 [16];
  int local_e80 [4];
  undefined1 local_e70 [16];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2992];
  undefined1 local_280 [4];
  int aiStack_27c [125];
  undefined8 local_88;
  long local_48;
  
  puVar23 = *(undefined8 **)(this + 0x20);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar31 = **(long **)this;
  lVar24 = **(long **)(this + 8) - lVar31;
  uVar30 = lVar24 * param_1;
  uVar26 = **(ulong **)(this + 0x10);
  uVar22 = uVar30 / uVar26;
  pauVar33 = (undefined1 (*) [16])local_280;
  pauVar25 = (undefined1 (*) [16])local_e80;
  do {
    *(undefined4 *)pauVar25[4] = _LC3;
    *(undefined4 *)(pauVar25[4] + 4) = _LC3;
    *(undefined4 *)(pauVar25[4] + 8) = _LC3;
    *(undefined4 *)(pauVar25[4] + 0xc) = _LC3;
    pauVar28 = pauVar25 + 6;
    *(undefined4 *)pauVar25[5] = _LC1;
    *(undefined4 *)(pauVar25[5] + 4) = _LC1;
    *(undefined4 *)(pauVar25[5] + 8) = _LC1;
    *(undefined4 *)(pauVar25[5] + 0xc) = _LC1;
    *(undefined4 *)pauVar25[2] = _LC3;
    *(undefined4 *)(pauVar25[2] + 4) = _LC3;
    *(undefined4 *)(pauVar25[2] + 8) = _LC3;
    *(undefined4 *)(pauVar25[2] + 0xc) = _LC3;
    *(undefined4 *)pauVar25[3] = _LC1;
    *(undefined4 *)(pauVar25[3] + 4) = _LC1;
    *(undefined4 *)(pauVar25[3] + 8) = _LC1;
    *(undefined4 *)(pauVar25[3] + 0xc) = _LC1;
    *(undefined4 *)*pauVar25 = _LC3;
    *(undefined4 *)(*pauVar25 + 4) = _LC3;
    *(undefined4 *)(*pauVar25 + 8) = _LC3;
    *(undefined4 *)(*pauVar25 + 0xc) = _LC3;
    *(undefined4 *)pauVar25[1] = _LC1;
    *(undefined4 *)(pauVar25[1] + 4) = _LC1;
    *(undefined4 *)(pauVar25[1] + 8) = _LC1;
    *(undefined4 *)(pauVar25[1] + 0xc) = _LC1;
    *pauVar33 = (undefined1  [16])0x0;
    pauVar33 = pauVar33 + 1;
    pauVar25 = pauVar28;
  } while ((undefined1 (*) [16])local_280 != pauVar28);
  puVar32 = (undefined8 *)puVar23[1];
  pauVar33 = (undefined1 (*) [16])((lVar31 + uVar22) * 0x20 + *(long *)*puVar23);
  uVar22 = (lVar24 + uVar30) / uVar26 - uVar22;
  if (uVar22 != 0) {
    fVar2 = *(float *)(puVar32 + 2);
    fVar3 = *(float *)((long)puVar32 + 0x14);
    fVar4 = *(float *)(puVar32 + 3);
    fVar5 = *(float *)(puVar32 + 4);
    fVar6 = *(float *)((long)puVar32 + 0x24);
    fVar7 = *(float *)(puVar32 + 5);
    uVar27 = (int)*puVar32 - 1;
    if (uVar22 != 1) {
      pauVar25 = pauVar33;
      do {
        auVar39 = pauVar25[1];
        auVar41 = *pauVar25;
        auVar38 = pauVar25[2];
        uVar35 = (uint)(((auVar39._0_4_ + auVar41._0_4_) - fVar2) * fVar5 + _LC16);
        uVar36 = (uint)(((auVar39._4_4_ + auVar41._4_4_) - fVar3) * fVar6 + _LC16);
        uVar37 = (uint)(((auVar39._8_4_ + auVar41._8_4_) - fVar4) * fVar7 + _LC16);
        uVar40 = -(uint)((int)uVar35 < (int)uVar27);
        uVar42 = -(uint)((int)uVar36 < (int)uVar27);
        uVar43 = -(uint)((int)uVar37 < (int)uVar27);
        uVar35 = uVar35 & uVar40 | ~uVar40 & uVar27;
        uVar36 = uVar36 & uVar42 | ~uVar42 & uVar27;
        uVar40 = uVar37 & uVar43 | ~uVar43 & uVar27;
        auVar1 = pauVar25[3];
        uVar29 = (ulong)(~-(uint)((int)uVar35 < 0) & uVar35);
        uVar35 = (uint)(((auVar1._0_4_ + auVar38._0_4_) - fVar2) * fVar5 + _LC16);
        uVar37 = (uint)(((auVar1._4_4_ + auVar38._4_4_) - fVar3) * fVar6 + _LC16);
        uVar42 = (uint)(((auVar1._8_4_ + auVar38._8_4_) - fVar4) * fVar7 + _LC16);
        uVar43 = -(uint)((int)uVar35 < (int)uVar27);
        uVar45 = -(uint)((int)uVar37 < (int)uVar27);
        uVar46 = -(uint)((int)uVar42 < (int)uVar27);
        uVar35 = uVar43 & uVar35 | ~uVar43 & uVar27;
        uVar37 = uVar45 & uVar37 | ~uVar45 & uVar27;
        uVar42 = uVar46 & uVar42 | ~uVar46 & uVar27;
        auVar44 = minps(*(undefined1 (*) [16])(local_e80 + uVar29 * 0x18),auVar41);
        *(undefined1 (*) [16])(local_e80 + uVar29 * 0x18) = auVar44;
        auVar44 = maxps(*(undefined1 (*) [16])(local_e70 + uVar29 * 0x60),auVar39);
        *(undefined1 (*) [16])(local_e70 + uVar29 * 0x60) = auVar44;
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        lVar31 = uVar26 * 0x60;
        auVar44 = minps(*(undefined1 (*) [16])(local_e60 + lVar31),auVar41);
        *(undefined1 (*) [16])(local_e60 + lVar31) = auVar44;
        auVar44 = maxps(*(undefined1 (*) [16])(local_e50 + lVar31),auVar39);
        *(undefined1 (*) [16])(local_e50 + lVar31) = auVar44;
        uVar30 = (ulong)(~-(uint)((int)uVar40 < 0) & uVar40);
        lVar31 = uVar30 * 0x60;
        auVar41 = minps(*(undefined1 (*) [16])(local_e40 + lVar31),auVar41);
        auVar39 = maxps(*(undefined1 (*) [16])(local_e30 + lVar31),auVar39);
        *(undefined1 (*) [16])(local_e40 + lVar31) = auVar41;
        *(undefined1 (*) [16])(local_e30 + lVar31) = auVar39;
        local_e80[(uVar29 + 0xc0) * 4] = local_e80[(uVar29 + 0xc0) * 4] + 1;
        uVar29 = (ulong)(~-(uint)((int)uVar35 < 0) & uVar35);
        aiStack_27c[uVar30 * 4 + 1] = aiStack_27c[uVar30 * 4 + 1] + 1;
        aiStack_27c[uVar26 * 4] = aiStack_27c[uVar26 * 4] + 1;
        auVar39 = minps(*(undefined1 (*) [16])(local_e80 + uVar29 * 0x18),auVar38);
        *(undefined1 (*) [16])(local_e80 + uVar29 * 0x18) = auVar39;
        auVar39 = maxps(*(undefined1 (*) [16])(local_e70 + uVar29 * 0x60),auVar1);
        *(undefined1 (*) [16])(local_e70 + uVar29 * 0x60) = auVar39;
        uVar26 = (ulong)(~-(uint)((int)uVar37 < 0) & uVar37);
        lVar31 = uVar26 * 0x60;
        auVar39 = minps(*(undefined1 (*) [16])(local_e60 + lVar31),auVar38);
        *(undefined1 (*) [16])(local_e60 + lVar31) = auVar39;
        auVar39 = maxps(*(undefined1 (*) [16])(local_e50 + lVar31),auVar1);
        *(undefined1 (*) [16])(local_e50 + lVar31) = auVar39;
        uVar30 = (ulong)(~-(uint)((int)uVar42 < 0) & uVar42);
        lVar31 = uVar30 * 0x60;
        auVar39 = minps(*(undefined1 (*) [16])(local_e40 + lVar31),auVar38);
        *(undefined1 (*) [16])(local_e40 + lVar31) = auVar39;
        auVar39 = maxps(*(undefined1 (*) [16])(local_e30 + lVar31),auVar1);
        *(undefined1 (*) [16])(local_e30 + lVar31) = auVar39;
        local_e80[(uVar29 + 0xc0) * 4] = local_e80[(uVar29 + 0xc0) * 4] + 1;
        aiStack_27c[uVar26 * 4] = aiStack_27c[uVar26 * 4] + 1;
        aiStack_27c[uVar30 * 4 + 1] = aiStack_27c[uVar30 * 4 + 1] + 1;
        bVar34 = pauVar25 != pauVar33 + (uVar22 - 2 >> 1) * 4;
        pauVar25 = pauVar25 + 4;
      } while (bVar34);
      uVar26 = (uVar22 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar22 <= uVar26) goto LAB_00115971;
      pauVar33 = pauVar33 + uVar26 * 2;
    }
    auVar39 = pauVar33[1];
    auVar41 = *pauVar33;
    uVar35 = (uint)(((auVar39._0_4_ + auVar41._0_4_) - fVar2) * fVar5 + _LC16);
    uVar36 = (uint)(((auVar39._4_4_ + auVar41._4_4_) - fVar3) * fVar6 + _LC16);
    uVar37 = (uint)(((auVar39._8_4_ + auVar41._8_4_) - fVar4) * fVar7 + _LC16);
    uVar40 = -(uint)((int)uVar35 < (int)uVar27);
    uVar42 = -(uint)((int)uVar36 < (int)uVar27);
    uVar43 = -(uint)((int)uVar37 < (int)uVar27);
    uVar35 = uVar40 & uVar35 | ~uVar40 & uVar27;
    uVar36 = uVar42 & uVar36 | ~uVar42 & uVar27;
    uVar27 = uVar43 & uVar37 | ~uVar43 & uVar27;
    lVar31 = (long)(int)(~-(uint)((int)uVar35 < 0) & uVar35);
    local_e80[(lVar31 + 0xc0) * 4] = local_e80[(lVar31 + 0xc0) * 4] + 1;
    auVar38 = minps(*(undefined1 (*) [16])(local_e80 + lVar31 * 0x18),auVar41);
    *(undefined1 (*) [16])(local_e80 + lVar31 * 0x18) = auVar38;
    auVar38 = maxps(*(undefined1 (*) [16])(local_e70 + lVar31 * 0x60),auVar39);
    *(undefined1 (*) [16])(local_e70 + lVar31 * 0x60) = auVar38;
    lVar31 = (long)(int)(~-(uint)((int)uVar36 < 0) & uVar36);
    lVar24 = lVar31 * 0x60;
    aiStack_27c[lVar31 * 4] = aiStack_27c[lVar31 * 4] + 1;
    auVar38 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar41);
    *(undefined1 (*) [16])(local_e60 + lVar24) = auVar38;
    auVar38 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar39);
    *(undefined1 (*) [16])(local_e50 + lVar24) = auVar38;
    lVar31 = (long)(int)(~-(uint)((int)uVar27 < 0) & uVar27);
    lVar24 = lVar31 * 0x60;
    aiStack_27c[lVar31 * 4 + 1] = aiStack_27c[lVar31 * 4 + 1] + 1;
    auVar41 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar41);
    *(undefined1 (*) [16])(local_e40 + lVar24) = auVar41;
    auVar39 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar39);
    *(undefined1 (*) [16])(local_e30 + lVar24) = auVar39;
  }
LAB_00115971:
  puVar32 = (undefined8 *)(param_1 * 0xe00 + *(long *)(*(long *)(this + 0x18) + 0x1c00));
  puVar23 = puVar32;
  pauVar33 = (undefined1 (*) [16])local_e80;
  do {
    uVar16 = *(undefined8 *)(*pauVar33 + 8);
    uVar8 = *(undefined4 *)pauVar33[1];
    uVar9 = *(undefined4 *)(pauVar33[1] + 4);
    uVar10 = *(undefined4 *)(pauVar33[1] + 8);
    uVar11 = *(undefined4 *)(pauVar33[1] + 0xc);
    pauVar25 = pauVar33 + 6;
    uVar17 = *(undefined8 *)pauVar33[2];
    uVar18 = *(undefined8 *)(pauVar33[2] + 8);
    uVar19 = *(undefined8 *)pauVar33[3];
    uVar20 = *(undefined8 *)(pauVar33[3] + 8);
    *puVar23 = *(undefined8 *)*pauVar33;
    puVar23[1] = uVar16;
    uVar16 = *(undefined8 *)pauVar33[4];
    uVar21 = *(undefined8 *)(pauVar33[4] + 8);
    uVar12 = *(undefined4 *)pauVar33[5];
    uVar13 = *(undefined4 *)(pauVar33[5] + 4);
    uVar14 = *(undefined4 *)(pauVar33[5] + 8);
    uVar15 = *(undefined4 *)(pauVar33[5] + 0xc);
    *(undefined4 *)(puVar23 + 2) = uVar8;
    *(undefined4 *)((long)puVar23 + 0x14) = uVar9;
    *(undefined4 *)(puVar23 + 3) = uVar10;
    *(undefined4 *)((long)puVar23 + 0x1c) = uVar11;
    puVar23[4] = uVar17;
    puVar23[5] = uVar18;
    puVar23[6] = uVar19;
    puVar23[7] = uVar20;
    puVar23[8] = uVar16;
    puVar23[9] = uVar21;
    *(undefined4 *)(puVar23 + 10) = uVar12;
    *(undefined4 *)((long)puVar23 + 0x54) = uVar13;
    *(undefined4 *)(puVar23 + 0xb) = uVar14;
    *(undefined4 *)((long)puVar23 + 0x5c) = uVar15;
    puVar23 = puVar23 + 0xc;
    pauVar33 = pauVar25;
  } while (pauVar25 != (undefined1 (*) [16])local_280);
  puVar32[0x180] = *(undefined8 *)*pauVar25;
  puVar32[0x1bf] = local_88;
  lVar31 = (long)puVar32 + (0xc00 - (long)((ulong)(puVar32 + 0x181) & 0xfffffffffffffff8));
  puVar23 = (undefined8 *)((long)pauVar25 - lVar31);
  puVar32 = (undefined8 *)((ulong)(puVar32 + 0x181) & 0xfffffffffffffff8);
  for (uVar26 = (ulong)((int)lVar31 + 0x200U >> 3); uVar26 != 0; uVar26 = uVar26 - 1) {
    *puVar32 = *puVar23;
    puVar23 = puVar23 + 1;
    puVar32 = puVar32 + 1;
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::parallel_reduce_internal<unsigned long, embree::sse2::SpatialBinInfo<16ul,
   embree::PrimRef>, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&)#2}>(unsigned long, unsigned long,
   unsigned long, unsigned long, embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&)#2} const&)::{lambda(unsigned
   long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::range<unsigned_long>const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,unsigned_long,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&)#2}const&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined8 *puVar1;
  long in_FS_OFFSET;
  undefined8 local_880;
  undefined8 uStack_878;
  undefined8 local_870;
  undefined8 uStack_868;
  undefined8 local_860;
  undefined8 uStack_858;
  undefined8 local_850;
  undefined8 uStack_848;
  undefined8 local_840;
  undefined8 uStack_838;
  undefined8 local_830;
  undefined8 uStack_828;
  undefined8 local_820;
  undefined8 uStack_818;
  undefined8 local_810;
  undefined8 uStack_808;
  undefined8 local_800;
  undefined8 uStack_7f8;
  undefined8 local_7f0;
  undefined8 uStack_7e8;
  undefined8 local_7e0;
  undefined8 uStack_7d8;
  undefined8 local_7d0;
  undefined8 uStack_7c8;
  undefined8 local_7c0;
  undefined8 uStack_7b8;
  undefined8 local_7b0;
  undefined8 uStack_7a8;
  undefined8 local_7a0;
  undefined8 uStack_798;
  undefined8 local_790;
  undefined8 uStack_788;
  undefined8 local_780;
  undefined8 uStack_778;
  undefined8 local_770;
  undefined8 uStack_768;
  undefined8 local_760;
  undefined8 uStack_758;
  undefined8 local_750;
  undefined8 uStack_748;
  undefined8 local_740;
  undefined8 uStack_738;
  undefined8 local_730;
  undefined8 uStack_728;
  undefined8 local_720;
  undefined8 uStack_718;
  undefined8 local_710;
  undefined8 uStack_708;
  undefined8 local_700;
  undefined8 uStack_6f8;
  undefined8 local_6f0;
  undefined8 uStack_6e8;
  undefined8 local_6e0;
  undefined8 uStack_6d8;
  undefined8 local_6d0;
  undefined8 uStack_6c8;
  undefined8 local_6c0;
  undefined8 uStack_6b8;
  undefined8 local_6b0;
  undefined8 uStack_6a8;
  undefined8 local_6a0;
  undefined8 uStack_698;
  undefined8 local_690;
  undefined8 uStack_688;
  undefined8 local_680;
  undefined8 uStack_678;
  undefined8 local_670;
  undefined8 uStack_668;
  undefined8 local_660;
  undefined8 uStack_658;
  undefined8 local_650;
  undefined8 uStack_648;
  undefined8 local_640;
  undefined8 uStack_638;
  undefined8 local_630;
  undefined8 uStack_628;
  undefined8 local_620;
  undefined8 uStack_618;
  undefined8 local_610;
  undefined8 uStack_608;
  undefined8 local_600;
  undefined8 uStack_5f8;
  undefined8 local_5f0;
  undefined8 uStack_5e8;
  undefined8 local_5e0;
  undefined8 uStack_5d8;
  undefined8 local_5d0;
  undefined8 uStack_5c8;
  undefined8 local_5c0;
  undefined8 uStack_5b8;
  undefined8 local_5b0;
  undefined8 uStack_5a8;
  undefined8 local_5a0;
  undefined8 uStack_598;
  undefined8 local_590;
  undefined8 uStack_588;
  undefined8 local_580;
  undefined8 uStack_578;
  undefined8 local_570;
  undefined8 uStack_568;
  undefined8 local_560;
  undefined8 uStack_558;
  undefined8 local_550;
  undefined8 uStack_548;
  undefined8 local_540;
  undefined8 uStack_538;
  undefined8 local_530;
  undefined8 uStack_528;
  undefined8 local_520;
  undefined8 uStack_518;
  undefined8 local_510;
  undefined8 uStack_508;
  undefined8 local_500;
  undefined8 uStack_4f8;
  undefined8 local_4f0;
  undefined8 uStack_4e8;
  undefined8 local_4e0;
  undefined8 uStack_4d8;
  undefined8 local_4d0;
  undefined8 uStack_4c8;
  undefined8 local_4c0;
  undefined8 uStack_4b8;
  undefined8 local_4b0;
  undefined8 uStack_4a8;
  undefined8 local_4a0;
  undefined8 uStack_498;
  undefined8 local_490;
  undefined8 uStack_488;
  undefined8 local_480;
  undefined8 uStack_478;
  undefined8 local_470;
  undefined8 uStack_468;
  undefined8 local_460;
  undefined8 uStack_458;
  undefined8 local_450;
  undefined8 uStack_448;
  undefined8 local_440;
  undefined8 uStack_438;
  undefined8 local_430;
  undefined8 uStack_428;
  undefined8 local_420;
  undefined8 uStack_418;
  undefined8 local_410;
  undefined8 uStack_408;
  undefined8 local_400;
  undefined8 uStack_3f8;
  undefined8 local_3f0;
  undefined8 uStack_3e8;
  undefined8 local_3e0;
  undefined8 uStack_3d8;
  undefined8 local_3d0;
  undefined8 uStack_3c8;
  undefined8 local_3c0;
  undefined8 uStack_3b8;
  undefined8 local_3b0;
  undefined8 uStack_3a8;
  undefined8 local_3a0;
  undefined8 uStack_398;
  undefined8 local_390;
  undefined8 uStack_388;
  undefined8 local_380;
  undefined8 uStack_378;
  undefined8 local_370;
  undefined8 uStack_368;
  undefined8 local_360;
  undefined8 uStack_358;
  undefined8 local_350;
  undefined8 uStack_348;
  undefined8 local_340;
  undefined8 uStack_338;
  undefined8 local_330;
  undefined8 uStack_328;
  undefined8 local_320;
  undefined8 uStack_318;
  undefined8 local_310;
  undefined8 uStack_308;
  undefined8 local_300;
  undefined8 uStack_2f8;
  undefined8 local_2f0;
  undefined8 uStack_2e8;
  undefined8 local_2e0;
  undefined8 uStack_2d8;
  undefined8 local_2d0;
  undefined8 uStack_2c8;
  undefined8 local_2c0;
  undefined8 uStack_2b8;
  undefined8 local_2b0;
  undefined8 uStack_2a8;
  undefined8 local_2a0;
  undefined8 uStack_298;
  undefined8 local_290;
  undefined8 uStack_288;
  undefined8 local_280;
  undefined8 uStack_278;
  undefined8 local_270;
  undefined8 uStack_268;
  undefined8 local_260;
  undefined8 uStack_258;
  undefined8 local_250;
  undefined8 uStack_248;
  undefined8 local_240;
  undefined8 uStack_238;
  undefined8 local_230;
  undefined8 uStack_228;
  undefined8 local_220;
  undefined8 uStack_218;
  undefined8 local_210;
  undefined8 uStack_208;
  undefined8 local_200;
  undefined8 uStack_1f8;
  undefined8 local_1f0;
  undefined8 uStack_1e8;
  undefined8 local_1e0;
  undefined8 uStack_1d8;
  undefined8 local_1d0;
  undefined8 uStack_1c8;
  undefined8 local_1c0;
  undefined8 uStack_1b8;
  undefined8 local_1b0;
  undefined8 uStack_1a8;
  undefined8 local_1a0;
  undefined8 uStack_198;
  undefined8 local_190;
  undefined8 uStack_188;
  undefined8 local_180;
  undefined8 uStack_178;
  undefined8 local_170;
  undefined8 uStack_168;
  undefined8 local_160;
  undefined8 uStack_158;
  undefined8 local_150;
  undefined8 uStack_148;
  undefined8 local_140;
  undefined8 uStack_138;
  undefined8 local_130;
  undefined8 uStack_128;
  undefined8 local_120;
  undefined8 uStack_118;
  undefined8 local_110;
  undefined8 uStack_108;
  undefined8 local_100;
  undefined8 uStack_f8;
  undefined8 local_f0;
  undefined8 uStack_e8;
  undefined8 local_e0;
  undefined8 uStack_d8;
  undefined8 local_d0;
  undefined8 uStack_c8;
  undefined8 local_c0;
  undefined8 uStack_b8;
  undefined8 local_b0;
  undefined8 uStack_a8;
  undefined8 local_a0;
  undefined8 uStack_98;
  undefined8 local_90;
  undefined8 uStack_88;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
  parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::
  {lambda(embree::range<unsigned_long>const&)#1}::operator()
            ((_lambda_embree__range<unsigned_long>const___1_ *)&local_880,*(range **)(this + 0x20));
  puVar1 = (undefined8 *)(param_1 * 0x800 + *(long *)(*(long *)(this + 0x18) + 0x2000));
  *puVar1 = local_880;
  puVar1[1] = uStack_878;
  puVar1[2] = local_870;
  puVar1[3] = uStack_868;
  puVar1[4] = local_860;
  puVar1[5] = uStack_858;
  puVar1[6] = local_850;
  puVar1[7] = uStack_848;
  puVar1[8] = local_840;
  puVar1[9] = uStack_838;
  puVar1[10] = local_830;
  puVar1[0xb] = uStack_828;
  puVar1[0xc] = local_820;
  puVar1[0xd] = uStack_818;
  puVar1[0x10] = local_800;
  puVar1[0x11] = uStack_7f8;
  puVar1[0x12] = local_7f0;
  puVar1[0x13] = uStack_7e8;
  puVar1[0x14] = local_7e0;
  puVar1[0x15] = uStack_7d8;
  puVar1[0x16] = local_7d0;
  puVar1[0x17] = uStack_7c8;
  puVar1[0x18] = local_7c0;
  puVar1[0x19] = uStack_7b8;
  puVar1[0x1a] = local_7b0;
  puVar1[0x1b] = uStack_7a8;
  puVar1[0x1c] = local_7a0;
  puVar1[0x1d] = uStack_798;
  puVar1[0xe] = local_810;
  puVar1[0xf] = uStack_808;
  puVar1[0x1e] = local_790;
  puVar1[0x1f] = uStack_788;
  puVar1[0x20] = local_780;
  puVar1[0x21] = uStack_778;
  puVar1[0x22] = local_770;
  puVar1[0x23] = uStack_768;
  puVar1[0x24] = local_760;
  puVar1[0x25] = uStack_758;
  puVar1[0x26] = local_750;
  puVar1[0x27] = uStack_748;
  puVar1[0x28] = local_740;
  puVar1[0x29] = uStack_738;
  puVar1[0x2a] = local_730;
  puVar1[0x2b] = uStack_728;
  puVar1[0x2c] = local_720;
  puVar1[0x2d] = uStack_718;
  puVar1[0x30] = local_700;
  puVar1[0x31] = uStack_6f8;
  puVar1[0x32] = local_6f0;
  puVar1[0x33] = uStack_6e8;
  puVar1[0x34] = local_6e0;
  puVar1[0x35] = uStack_6d8;
  puVar1[0x36] = local_6d0;
  puVar1[0x37] = uStack_6c8;
  puVar1[0x38] = local_6c0;
  puVar1[0x39] = uStack_6b8;
  puVar1[0x3a] = local_6b0;
  puVar1[0x3b] = uStack_6a8;
  puVar1[0x3c] = local_6a0;
  puVar1[0x3d] = uStack_698;
  puVar1[0x2e] = local_710;
  puVar1[0x2f] = uStack_708;
  puVar1[0x3e] = local_690;
  puVar1[0x3f] = uStack_688;
  puVar1[0x40] = local_680;
  puVar1[0x41] = uStack_678;
  puVar1[0x42] = local_670;
  puVar1[0x43] = uStack_668;
  puVar1[0x44] = local_660;
  puVar1[0x45] = uStack_658;
  puVar1[0x46] = local_650;
  puVar1[0x47] = uStack_648;
  puVar1[0x48] = local_640;
  puVar1[0x49] = uStack_638;
  puVar1[0x4a] = local_630;
  puVar1[0x4b] = uStack_628;
  puVar1[0x4c] = local_620;
  puVar1[0x4d] = uStack_618;
  puVar1[0x50] = local_600;
  puVar1[0x51] = uStack_5f8;
  puVar1[0x52] = local_5f0;
  puVar1[0x53] = uStack_5e8;
  puVar1[0x54] = local_5e0;
  puVar1[0x55] = uStack_5d8;
  puVar1[0x56] = local_5d0;
  puVar1[0x57] = uStack_5c8;
  puVar1[0x58] = local_5c0;
  puVar1[0x59] = uStack_5b8;
  puVar1[0x5a] = local_5b0;
  puVar1[0x5b] = uStack_5a8;
  puVar1[0x5c] = local_5a0;
  puVar1[0x5d] = uStack_598;
  puVar1[0x4e] = local_610;
  puVar1[0x4f] = uStack_608;
  puVar1[0x5e] = local_590;
  puVar1[0x5f] = uStack_588;
  puVar1[0x60] = local_580;
  puVar1[0x61] = uStack_578;
  puVar1[0x62] = local_570;
  puVar1[99] = uStack_568;
  puVar1[100] = local_560;
  puVar1[0x65] = uStack_558;
  puVar1[0x66] = local_550;
  puVar1[0x67] = uStack_548;
  puVar1[0x68] = local_540;
  puVar1[0x69] = uStack_538;
  puVar1[0x6a] = local_530;
  puVar1[0x6b] = uStack_528;
  puVar1[0x6c] = local_520;
  puVar1[0x6d] = uStack_518;
  puVar1[0x70] = local_500;
  puVar1[0x71] = uStack_4f8;
  puVar1[0x72] = local_4f0;
  puVar1[0x73] = uStack_4e8;
  puVar1[0x74] = local_4e0;
  puVar1[0x75] = uStack_4d8;
  puVar1[0x76] = local_4d0;
  puVar1[0x77] = uStack_4c8;
  puVar1[0x78] = local_4c0;
  puVar1[0x79] = uStack_4b8;
  puVar1[0x7a] = local_4b0;
  puVar1[0x7b] = uStack_4a8;
  puVar1[0x7c] = local_4a0;
  puVar1[0x7d] = uStack_498;
  puVar1[0x6e] = local_510;
  puVar1[0x6f] = uStack_508;
  puVar1[0x7e] = local_490;
  puVar1[0x7f] = uStack_488;
  puVar1[0x80] = local_480;
  puVar1[0x81] = uStack_478;
  puVar1[0x82] = local_470;
  puVar1[0x83] = uStack_468;
  puVar1[0x84] = local_460;
  puVar1[0x85] = uStack_458;
  puVar1[0x86] = local_450;
  puVar1[0x87] = uStack_448;
  puVar1[0x88] = local_440;
  puVar1[0x89] = uStack_438;
  puVar1[0x8a] = local_430;
  puVar1[0x8b] = uStack_428;
  puVar1[0x8c] = local_420;
  puVar1[0x8d] = uStack_418;
  puVar1[0x90] = local_400;
  puVar1[0x91] = uStack_3f8;
  puVar1[0x92] = local_3f0;
  puVar1[0x93] = uStack_3e8;
  puVar1[0x94] = local_3e0;
  puVar1[0x95] = uStack_3d8;
  puVar1[0x96] = local_3d0;
  puVar1[0x97] = uStack_3c8;
  puVar1[0x98] = local_3c0;
  puVar1[0x99] = uStack_3b8;
  puVar1[0x9a] = local_3b0;
  puVar1[0x9b] = uStack_3a8;
  puVar1[0x9c] = local_3a0;
  puVar1[0x9d] = uStack_398;
  puVar1[0x8e] = local_410;
  puVar1[0x8f] = uStack_408;
  puVar1[0x9e] = local_390;
  puVar1[0x9f] = uStack_388;
  puVar1[0xa0] = local_380;
  puVar1[0xa1] = uStack_378;
  puVar1[0xa2] = local_370;
  puVar1[0xa3] = uStack_368;
  puVar1[0xa4] = local_360;
  puVar1[0xa5] = uStack_358;
  puVar1[0xa6] = local_350;
  puVar1[0xa7] = uStack_348;
  puVar1[0xa8] = local_340;
  puVar1[0xa9] = uStack_338;
  puVar1[0xaa] = local_330;
  puVar1[0xab] = uStack_328;
  puVar1[0xac] = local_320;
  puVar1[0xad] = uStack_318;
  puVar1[0xb0] = local_300;
  puVar1[0xb1] = uStack_2f8;
  puVar1[0xb2] = local_2f0;
  puVar1[0xb3] = uStack_2e8;
  puVar1[0xb4] = local_2e0;
  puVar1[0xb5] = uStack_2d8;
  puVar1[0xb6] = local_2d0;
  puVar1[0xb7] = uStack_2c8;
  puVar1[0xb8] = local_2c0;
  puVar1[0xb9] = uStack_2b8;
  puVar1[0xba] = local_2b0;
  puVar1[0xbb] = uStack_2a8;
  puVar1[0xbc] = local_2a0;
  puVar1[0xbd] = uStack_298;
  puVar1[0xae] = local_310;
  puVar1[0xaf] = uStack_308;
  puVar1[0xbe] = local_290;
  puVar1[0xbf] = uStack_288;
  puVar1[0xc0] = local_280;
  puVar1[0xc1] = uStack_278;
  puVar1[0xc2] = local_270;
  puVar1[0xc3] = uStack_268;
  puVar1[0xc4] = local_260;
  puVar1[0xc5] = uStack_258;
  puVar1[0xc6] = local_250;
  puVar1[199] = uStack_248;
  puVar1[200] = local_240;
  puVar1[0xc9] = uStack_238;
  puVar1[0xca] = local_230;
  puVar1[0xcb] = uStack_228;
  puVar1[0xcc] = local_220;
  puVar1[0xcd] = uStack_218;
  puVar1[0xd0] = local_200;
  puVar1[0xd1] = uStack_1f8;
  puVar1[0xd2] = local_1f0;
  puVar1[0xd3] = uStack_1e8;
  puVar1[0xd4] = local_1e0;
  puVar1[0xd5] = uStack_1d8;
  puVar1[0xd6] = local_1d0;
  puVar1[0xd7] = uStack_1c8;
  puVar1[0xd8] = local_1c0;
  puVar1[0xd9] = uStack_1b8;
  puVar1[0xda] = local_1b0;
  puVar1[0xdb] = uStack_1a8;
  puVar1[0xdc] = local_1a0;
  puVar1[0xdd] = uStack_198;
  puVar1[0xce] = local_210;
  puVar1[0xcf] = uStack_208;
  puVar1[0xde] = local_190;
  puVar1[0xdf] = uStack_188;
  puVar1[0xe0] = local_180;
  puVar1[0xe1] = uStack_178;
  puVar1[0xe2] = local_170;
  puVar1[0xe3] = uStack_168;
  puVar1[0xe4] = local_160;
  puVar1[0xe5] = uStack_158;
  puVar1[0xe6] = local_150;
  puVar1[0xe7] = uStack_148;
  puVar1[0xe8] = local_140;
  puVar1[0xe9] = uStack_138;
  puVar1[0xea] = local_130;
  puVar1[0xeb] = uStack_128;
  puVar1[0xec] = local_120;
  puVar1[0xed] = uStack_118;
  puVar1[0xee] = local_110;
  puVar1[0xef] = uStack_108;
  puVar1[0xf0] = local_100;
  puVar1[0xf1] = uStack_f8;
  puVar1[0xf2] = local_f0;
  puVar1[0xf3] = uStack_e8;
  puVar1[0xf4] = local_e0;
  puVar1[0xf5] = uStack_d8;
  puVar1[0xf6] = local_d0;
  puVar1[0xf7] = uStack_c8;
  puVar1[0xf8] = local_c0;
  puVar1[0xf9] = uStack_b8;
  puVar1[0xfa] = local_b0;
  puVar1[0xfb] = uStack_a8;
  puVar1[0xfc] = local_a0;
  puVar1[0xfd] = uStack_98;
  puVar1[0xfe] = local_90;
  puVar1[0xff] = uStack_88;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00116745) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  char cVar14;
  long lVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar15 = embree::TaskScheduler::allocThreadIndex();
  pTVar16 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar16 = lVar15;
  pTVar20 = pTVar16 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar17 = pTVar18 + 0x80;
    *(undefined4 *)(pTVar18 + 0x40) = 0;
    pTVar18 = pTVar17;
  } while (pTVar16 + 0x40040 != pTVar17);
  *(undefined8 *)(pTVar16 + 0x40040) = 0;
  *(undefined8 *)(pTVar16 + 0x40080) = 0;
  *(undefined8 *)(pTVar16 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar16 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar16 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar15 * 8) = pTVar16;
  UNLOCK();
  local_48 = pTVar16;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar16);
  if (*(ulong *)(pTVar16 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar16 + 0xc00c0);
    uVar3 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar16 + 0xc00c0) = uVar3;
      pTVar17 = pTVar16 + uVar3 + 0x40080;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar17 = &PTR_execute_0013f0b8;
      uVar5 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar17 + 8) = uVar8;
      *(undefined8 *)(pTVar17 + 0x10) = uVar9;
      *(undefined8 *)(pTVar17 + 0x18) = uVar10;
      *(undefined8 *)(pTVar17 + 0x20) = uVar11;
      *(undefined8 *)(pTVar17 + 0x38) = uVar5;
      *(undefined8 *)(pTVar17 + 0x28) = uVar12;
      *(undefined8 *)(pTVar17 + 0x30) = uVar13;
      lVar19 = *(long *)(pTVar16 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar16 + 0xc0100);
      pTVar16[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar16 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar16 + lVar19 + 0x50) = pTVar17;
      *(long *)(pTVar16 + lVar19 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar16 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar16 + lVar19 + 0x68) = lVar4;
      *(ulong *)(pTVar16 + lVar19 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar16 + 0x40080) = *(long *)(pTVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar16 + 0x40080) - 1U <= *(ulong *)(pTVar16 + 0x40040)) {
        LOCK();
        *(long *)(pTVar16 + 0x40040) = *(long *)(pTVar16 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar17 = local_48 + 8;
            *(long *)pTVar17 = *(long *)pTVar17 + -1;
            UNLOCK();
            if (*(long *)pTVar17 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar14 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar16);
      } while (cVar14 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar15 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar16 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar16 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar16);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar20;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_40 = *(undefined8 *)param_4;
  uStack_38 = *(undefined8 *)(param_4 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)(param_4 + 0x10);
  local_58 = param_2;
  uStack_50 = param_1;
  local_48 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_58,param_5,param_2 - param_1,true);
LAB_001169f7:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0013f0b8;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[7] = local_28;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = uStack_38;
      puVar3[6] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_001169f7;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Removing unreachable block (ram,0x00117a95) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  char cVar14;
  long lVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar15 = embree::TaskScheduler::allocThreadIndex();
  pTVar16 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar16 = lVar15;
  pTVar20 = pTVar16 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar17 = pTVar18 + 0x80;
    *(undefined4 *)(pTVar18 + 0x40) = 0;
    pTVar18 = pTVar17;
  } while (pTVar16 + 0x40040 != pTVar17);
  *(undefined8 *)(pTVar16 + 0x40040) = 0;
  *(undefined8 *)(pTVar16 + 0x40080) = 0;
  *(undefined8 *)(pTVar16 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar16 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar16 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar15 * 8) = pTVar16;
  UNLOCK();
  local_48 = pTVar16;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar16);
  if (*(ulong *)(pTVar16 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar16 + 0xc00c0);
    uVar3 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar16 + 0xc00c0) = uVar3;
      pTVar17 = pTVar16 + uVar3 + 0x40080;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar17 = &PTR_execute_0013f0e8;
      uVar5 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar17 + 8) = uVar8;
      *(undefined8 *)(pTVar17 + 0x10) = uVar9;
      *(undefined8 *)(pTVar17 + 0x18) = uVar10;
      *(undefined8 *)(pTVar17 + 0x20) = uVar11;
      *(undefined8 *)(pTVar17 + 0x38) = uVar5;
      *(undefined8 *)(pTVar17 + 0x28) = uVar12;
      *(undefined8 *)(pTVar17 + 0x30) = uVar13;
      lVar19 = *(long *)(pTVar16 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar16 + 0xc0100);
      pTVar16[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar16 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar16 + lVar19 + 0x50) = pTVar17;
      *(long *)(pTVar16 + lVar19 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar16 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar16 + lVar19 + 0x68) = lVar4;
      *(ulong *)(pTVar16 + lVar19 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar16 + 0x40080) = *(long *)(pTVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar16 + 0x40080) - 1U <= *(ulong *)(pTVar16 + 0x40040)) {
        LOCK();
        *(long *)(pTVar16 + 0x40040) = *(long *)(pTVar16 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar17 = local_48 + 8;
            *(long *)pTVar17 = *(long *)pTVar17 + -1;
            UNLOCK();
            if (*(long *)pTVar17 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar14 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar16);
      } while (cVar14 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar15 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar16 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar16 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar16);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar20;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_40 = *(undefined8 *)param_4;
  uStack_38 = *(undefined8 *)(param_4 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)(param_4 + 0x10);
  local_58 = param_2;
  uStack_50 = param_1;
  local_48 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_58,param_5,param_2 - param_1,true);
LAB_00117d47:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0013f0e8;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[7] = local_28;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = uStack_38;
      puVar3[6] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00117d47;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Removing unreachable block (ram,0x00118de5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInte___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  char cVar14;
  long lVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar15 = embree::TaskScheduler::allocThreadIndex();
  pTVar16 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar16 = lVar15;
  pTVar20 = pTVar16 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar17 = pTVar18 + 0x80;
    *(undefined4 *)(pTVar18 + 0x40) = 0;
    pTVar18 = pTVar17;
  } while (pTVar16 + 0x40040 != pTVar17);
  *(undefined8 *)(pTVar16 + 0x40040) = 0;
  *(undefined8 *)(pTVar16 + 0x40080) = 0;
  *(undefined8 *)(pTVar16 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar16 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar16 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar15 * 8) = pTVar16;
  UNLOCK();
  local_48 = pTVar16;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar16);
  if (*(ulong *)(pTVar16 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar16 + 0xc00c0);
    uVar3 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar16 + 0xc00c0) = uVar3;
      pTVar17 = pTVar16 + uVar3 + 0x40080;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar17 = &PTR_execute_0013f118;
      uVar5 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar17 + 8) = uVar8;
      *(undefined8 *)(pTVar17 + 0x10) = uVar9;
      *(undefined8 *)(pTVar17 + 0x18) = uVar10;
      *(undefined8 *)(pTVar17 + 0x20) = uVar11;
      *(undefined8 *)(pTVar17 + 0x38) = uVar5;
      *(undefined8 *)(pTVar17 + 0x28) = uVar12;
      *(undefined8 *)(pTVar17 + 0x30) = uVar13;
      lVar19 = *(long *)(pTVar16 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar16 + 0xc0100);
      pTVar16[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar16 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar16 + lVar19 + 0x50) = pTVar17;
      *(long *)(pTVar16 + lVar19 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar16 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar16 + lVar19 + 0x68) = lVar4;
      *(ulong *)(pTVar16 + lVar19 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar16 + 0x40080) = *(long *)(pTVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar16 + 0x40080) - 1U <= *(ulong *)(pTVar16 + 0x40040)) {
        LOCK();
        *(long *)(pTVar16 + 0x40040) = *(long *)(pTVar16 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar17 = local_48 + 8;
            *(long *)pTVar17 = *(long *)pTVar17 + -1;
            UNLOCK();
            if (*(long *)pTVar17 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar14 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar16);
      } while (cVar14 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar15 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar16 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar16 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar16);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar20;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  undefined8 uStack_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  uStack_40 = *(undefined8 *)param_4;
  uStack_38 = *(undefined8 *)(param_4 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)(param_4 + 0x10);
  local_58 = param_2;
  uStack_50 = param_1;
  local_48 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInte___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_58,param_5,param_2 - param_1,true);
LAB_00119097:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0013f118;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[7] = local_28;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      puVar3[5] = uStack_38;
      puVar3[6] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00119097;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* unsigned long embree::parallel_partitioning<embree::sse2::PresplitItem, unsigned long, int,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4},
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, embree::sse2::PresplitItem const&)#1},
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, unsigned long&)#2}>(embree::sse2::PresplitItem*, unsigned long, unsigned long, int const&,
   unsigned long&, unsigned long&,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&,
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, embree::sse2::PresplitItem const&)#1} const&,
   embree::parallel_partitioning<embree::sse2::PresplitItem,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4}>(embree::sse2::PresplitItem*, unsigned
   long, unsigned long,
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6}
   const&)::{lambda(embree::sse2::PresplitItem const&)#4} const&, unsigned long)::{lambda(unsigned
   long&, unsigned long&)#2} const&, unsigned long) */

ulong embree::
      parallel_partitioning<embree::sse2::PresplitItem,unsigned_long,int,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitore___bree::sse2::PresplitItem_const&)_4_const&,unsigned_long)::_lambda(unsigned_long&,unsigned_long&)_2_>
                (PresplitItem *param_1,ulong param_2,ulong param_3,int *param_4,ulong *param_5,
                ulong *param_6,_lambda_embree__sse2__PresplitItem_const___4_ *param_7,
                _lambda_unsigned_long__embree__sse2__PresplitItem_const___1_ *param_8,
                _lambda_unsigned_long__unsigned_long___2_ *param_9,ulong param_10)

{
  long ****pppplVar1;
  long **pplVar2;
  bool bVar3;
  bool bVar4;
  long ****pppplVar5;
  long ***ppplVar6;
  ulong uVar7;
  PresplitItem *pPVar8;
  long ****pppplVar9;
  long ****pppplVar10;
  PresplitItem *pPVar11;
  PresplitItem *pPVar12;
  long ****pppplVar13;
  long lVar14;
  long lVar15;
  long ****pppplVar16;
  long lVar17;
  long ***ppplVar18;
  long in_FS_OFFSET;
  long local_98;
  long local_90;
  long **local_88;
  long **local_80;
  long ***local_78;
  long ***ppplStack_70;
  long ***local_68;
  long ***ppplStack_60;
  long *local_58;
  long *local_50;
  long local_40;
  
  ppplVar18 = (long ***)(param_3 - param_2);
  pPVar8 = param_1 + param_2 * 8;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (ppplVar18 < param_10) {
    pPVar12 = param_1 + param_3 * 8 + -8;
    for (; pPVar8 <= pPVar12; pPVar8 = pPVar8 + 8) {
      pPVar11 = pPVar12;
      if (1 < *(uint *)pPVar8) {
        while (pPVar12 = pPVar11 + -8, 1 < *(uint *)pPVar11) {
          pPVar11 = pPVar12;
          if (pPVar12 < pPVar8) goto LAB_0011a636;
        }
        pplVar2 = *(long ***)pPVar8;
        *(long ***)pPVar8 = *(long ***)pPVar11;
        *(long ***)pPVar11 = pplVar2;
      }
    }
LAB_0011a636:
    uVar7 = (long)pPVar8 - (long)param_1 >> 3;
    goto LAB_0011a38b;
  }
  pppplVar5 = (long ****)embree::alignedMalloc(0x10c0,0x40);
  *pppplVar5 = (long ***)pPVar8;
  pppplVar5[1] = ppplVar18;
  pppplVar5[2] = (long ***)param_7;
  pppplVar5[3] = (long ***)param_8;
  pppplVar5[4] = (long ***)param_9;
  pppplVar5[5] = (long ***)param_4;
  ppplVar6 = (long ***)embree::TaskScheduler::threadCount();
  ppplVar18 = (long ***)(((long)ppplVar18 + (param_10 - 1)) / param_10);
  if ((long ***)0x40 < ppplVar18) {
    ppplVar18 = (long ***)0x40;
  }
  if (ppplVar18 <= ppplVar6) {
    ppplVar6 = ppplVar18;
  }
  pppplVar5[6] = ppplVar6;
  local_68 = (long ***)pppplVar5;
  if (ppplVar6 == (long ***)0x0) {
    pppplVar5[0x50] = (long ***)0x0;
    pppplVar5[8] = pppplVar5[1];
    pppplVar10 = (long ****)0x0;
  }
  else {
    local_80 = (long **)0x0;
    local_78 = (long ***)&local_68;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_23parallel_partition_taskINS_4sse212PresplitItemEmiZNS4_27createPrimRefArray_presplitIZNS4_27createPrimRefArray_presplitINS_12TriangleMeshENS4_23TriangleSplitterFactoryEEENS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEPNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSK_jRKNS4_13SplittingGridEPSK_RjE3_ZNS7_IS8_S9_EESE_SG_SI_bmSO_SQ_EUlSS_E4_SN_EESE_mRT1_RKSE_RKT_RKT0_EUlRKS5_E2_ZNS_21parallel_partitioningIS5_S1C_EEmPS14_mmS19_mEUlRmS1B_E_ZNS1D_IS5_S1C_EEmS1E_mmS19_mEUlS1F_S1F_E0_E9partitionES1F_S1F_EUlmE_EEvS14_S19_EUlRKNS_5rangeImEEE_EEvS14_S14_S14_S19_PNS0_16TaskGroupContextE
              (0,ppplVar6,1);
    embree::TaskScheduler::wait();
    if ((long ***)local_80 != (long ***)0x0) goto LAB_0011a5d8;
    ppplVar18 = pppplVar5[6];
    pppplVar1 = (long ****)pppplVar5[1];
    pppplVar5[(long)(ppplVar18 + 10)] = (long ***)0x0;
    pppplVar5[(long)(ppplVar18 + 1)] = (long ***)pppplVar1;
    pppplVar10 = (long ****)pppplVar5[0x50];
    pppplVar13 = pppplVar10;
    if ((long ***)0x1 < ppplVar18) {
      lVar17 = (long)ppplVar18 * 8;
      pppplVar9 = pppplVar5 + 0x51;
      do {
        pppplVar13 = (long ****)((long)pppplVar13 + (long)*pppplVar9);
        pppplVar9 = pppplVar9 + 1;
      } while (pppplVar5 + (long)(ppplVar18 + 10) != pppplVar9);
LAB_0011a47a:
      local_88 = (long **)0x0;
      local_90 = 0;
      local_98 = 0;
      bVar3 = false;
      pppplVar16 = (long ****)(lVar17 + (long)(pppplVar5 + 8));
      bVar4 = false;
      ppplVar6 = (long ***)0x0;
      pppplVar9 = pppplVar5 + 8;
      lVar17 = 0;
      lVar14 = 0;
      do {
        local_68 = *pppplVar9;
        ppplStack_60 = (long ***)((long)pppplVar10 + (long)local_68);
        ppplStack_70 = pppplVar9[1];
        if ((long)pppplVar13 <= (long)pppplVar9[1]) {
          ppplStack_70 = (long ***)pppplVar13;
        }
        local_78 = (long ***)(long ****)0x0;
        if (-1 < (long)ppplStack_60) {
          local_78 = ppplStack_60;
        }
        if ((long)pppplVar1 < (long)ppplStack_60) {
          ppplStack_60 = (long ***)pppplVar1;
        }
        if ((long)local_68 < (long)pppplVar13) {
          local_68 = (long ***)pppplVar13;
        }
        lVar15 = lVar14;
        if ((long)local_78 < (long)ppplStack_70) {
          bVar4 = true;
          ppplVar6 = (long ***)((long)ppplStack_70 + ((long)ppplVar6 - (long)local_78));
          lVar15 = lVar14 + 1;
          pppplVar5[lVar14 * 2 + 0x98] = local_78;
          (pppplVar5 + lVar14 * 2 + 0x98)[1] = ppplStack_70;
        }
        if ((long)local_68 < (long)ppplStack_60) {
          lVar14 = lVar17 + 1;
          pppplVar5[lVar17 * 2 + 0x118] = local_68;
          (pppplVar5 + lVar17 * 2 + 0x118)[1] = ppplStack_60;
          lVar17 = lVar14;
          if (pppplVar16 == pppplVar9 + 1) goto LAB_0011a5fd;
          bVar3 = true;
        }
        else {
          lVar14 = lVar17;
          if (pppplVar16 == pppplVar9 + 1) goto code_r0x0011a54c;
        }
        pppplVar10 = (long ****)pppplVar9[0x49];
        pppplVar9 = pppplVar9 + 1;
        lVar17 = lVar14;
        lVar14 = lVar15;
      } while( true );
    }
    local_98 = 0;
    local_90 = 0;
    local_88 = (long **)0x0;
    if (ppplVar18 != (long ***)0x0) {
      ppplVar18 = (long ***)0x1;
      lVar17 = 8;
      goto LAB_0011a47a;
    }
  }
  goto LAB_0011a376;
code_r0x0011a54c:
  if (bVar3) {
LAB_0011a5fd:
    local_90 = lVar17;
  }
  pppplVar10 = pppplVar13;
  if ((bVar4) && (local_98 = lVar15, local_88 = (long **)ppplVar6, ppplVar6 != (long ***)0x0)) {
    local_68 = &local_88;
    local_58 = &local_98;
    local_50 = &local_90;
    local_80 = (long **)0x0;
    local_78 = (long ***)&local_68;
    ppplStack_60 = (long ***)pppplVar5;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_23parallel_partition_taskINS_4sse212PresplitItemEmiZNS4_27createPrimRefArray_presplitIZNS4_27createPrimRefArray_presplitINS_12TriangleMeshENS4_23TriangleSplitterFactoryEEENS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEPNS_5SceneENS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlRKSK_jRKNS4_13SplittingGridEPSK_RjE3_ZNS7_IS8_S9_EESE_SG_SI_bmSO_SQ_EUlSS_E4_SN_EESE_mRT1_RKSE_RKT_RKT0_EUlRKS5_E2_ZNS_21parallel_partitioningIS5_S1C_EEmPS14_mmS19_mEUlRmS1B_E_ZNS1D_IS5_S1C_EEmS1E_mmS19_mEUlS1F_S1F_E0_E9partitionES1F_S1F_EUlmE0_EEvS14_S19_EUlRKNS_5rangeImEEE_EEvS14_S14_S14_S19_PNS0_16TaskGroupContextE
              (0,ppplVar18,1,&local_78,&local_80);
    embree::TaskScheduler::wait();
    if ((long ***)local_80 != (long ***)0x0) {
LAB_0011a5d8:
      local_78 = (long ***)local_80;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_78);
    }
  }
LAB_0011a376:
  if (pppplVar5 != (long ****)0x0) {
    embree::alignedFree(pppplVar5);
  }
  uVar7 = param_2 + (long)pppplVar10;
LAB_0011a38b:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar7;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__insertion_sort<embree::sse2::PresplitItem*, __gnu_cxx::__ops::_Iter_comp_iter<bool
   (*)(embree::sse2::PresplitItem const&, embree::sse2::PresplitItem const&)>
   >(embree::sse2::PresplitItem*, embree::sse2::PresplitItem*,
   __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&)>) */

void std::
     __insertion_sort<embree::sse2::PresplitItem*,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
               (undefined8 *param_1,undefined8 *param_2,code *param_3)

{
  undefined8 uVar1;
  char cVar2;
  size_t __n;
  undefined8 *puVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  long in_FS_OFFSET;
  undefined8 local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1 != param_2) {
    puVar4 = param_1 + 1;
    while (param_2 != puVar4) {
      while( true ) {
        cVar2 = (*param_3)(puVar4,param_1);
        puVar5 = puVar4 + 1;
        if (cVar2 != '\0') break;
        local_48 = *puVar4;
        while( true ) {
          puVar3 = puVar4 + -1;
          cVar2 = (*param_3)(&local_48,puVar3);
          if (cVar2 == '\0') break;
          *puVar4 = *puVar3;
          puVar4 = puVar3;
        }
        *puVar4 = local_48;
        puVar4 = puVar5;
        if (param_2 == puVar5) goto LAB_0011ac45;
      }
      uVar1 = *puVar4;
      __n = (long)puVar4 - (long)param_1;
      if ((long)__n < 9) {
        if (__n == 8) {
          *puVar4 = *param_1;
        }
      }
      else {
        memmove((void *)((long)puVar4 + (8 - __n)),param_1,__n);
      }
      *param_1 = uVar1;
      puVar4 = puVar5;
    }
  }
LAB_0011ac45:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__heap_select<embree::PrimRef*, __gnu_cxx::__ops::_Iter_less_iter>(embree::PrimRef*,
   embree::PrimRef*, embree::PrimRef*, __gnu_cxx::__ops::_Iter_less_iter) */

void std::__heap_select<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined4 *param_2,undefined4 *param_3)

{
  long lVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  long lVar5;
  undefined4 *puVar6;
  long in_FS_OFFSET;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (0x20 < (long)param_2 - (long)param_1) {
    for (lVar5 = (((long)param_2 - (long)param_1 >> 5) + -2) / 2;
        __adjust_heap<embree::PrimRef*,long,embree::PrimRef,__gnu_cxx::__ops::_Iter_less_iter>(),
        lVar5 != 0; lVar5 = lVar5 + -1) {
    }
  }
  if (param_2 < param_3) {
    do {
      while (CONCAT44(param_1[7],param_1[3]) <= CONCAT44(param_2[7],param_2[3])) {
        param_2 = param_2 + 8;
        if (param_3 <= param_2) goto LAB_0011ad9e;
      }
      uVar2 = param_1[1];
      uVar3 = param_1[2];
      uVar4 = param_1[3];
      puVar6 = param_2 + 8;
      *param_2 = *param_1;
      param_2[1] = uVar2;
      param_2[2] = uVar3;
      param_2[3] = uVar4;
      uVar2 = param_1[5];
      uVar3 = param_1[6];
      uVar4 = param_1[7];
      param_2[4] = param_1[4];
      param_2[5] = uVar2;
      param_2[6] = uVar3;
      param_2[7] = uVar4;
      __adjust_heap<embree::PrimRef*,long,embree::PrimRef,__gnu_cxx::__ops::_Iter_less_iter>();
      param_2 = puVar6;
    } while (puVar6 < param_3);
  }
LAB_0011ad9e:
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x0011b1bd) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  char cVar17;
  long lVar18;
  Thread *pTVar19;
  Thread *pTVar20;
  Thread *pTVar21;
  long lVar22;
  Thread *pTVar23;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar18 = embree::TaskScheduler::allocThreadIndex();
  pTVar19 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar19 = lVar18;
  pTVar23 = pTVar19 + 0x40;
  pTVar21 = pTVar23;
  do {
    *(undefined4 *)pTVar21 = 0;
    pTVar20 = pTVar21 + 0x80;
    *(undefined4 *)(pTVar21 + 0x40) = 0;
    pTVar21 = pTVar20;
  } while (pTVar19 + 0x40040 != pTVar20);
  *(undefined8 *)(pTVar19 + 0x40040) = 0;
  *(undefined8 *)(pTVar19 + 0x40080) = 0;
  *(undefined8 *)(pTVar19 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar19 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar19 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar18 * 8) = pTVar19;
  UNLOCK();
  local_48 = pTVar19;
  pTVar21 = (Thread *)embree::TaskScheduler::swapThread(pTVar19);
  if (*(ulong *)(pTVar19 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar19 + 0xc00c0);
    uVar3 = lVar4 + 0x58 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar19 + 0xc00c0) = uVar3;
      pTVar20 = pTVar19 + uVar3 + 0x40068;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar20 = &PTR_execute_0013f160;
      uVar13 = *(undefined8 *)(param_1 + 0x30);
      uVar14 = *(undefined8 *)(param_1 + 0x38);
      uVar15 = *(undefined8 *)(param_1 + 0x40);
      uVar16 = *(undefined8 *)(param_1 + 0x48);
      *(undefined8 *)(pTVar20 + 8) = uVar7;
      *(undefined8 *)(pTVar20 + 0x10) = uVar8;
      *(undefined8 *)(pTVar20 + 0x18) = uVar9;
      *(undefined8 *)(pTVar20 + 0x20) = uVar10;
      *(undefined8 *)(pTVar20 + 0x28) = uVar11;
      *(undefined8 *)(pTVar20 + 0x30) = uVar12;
      *(undefined8 *)(pTVar20 + 0x38) = uVar13;
      *(undefined8 *)(pTVar20 + 0x40) = uVar14;
      *(undefined8 *)(pTVar20 + 0x48) = uVar15;
      *(undefined8 *)(pTVar20 + 0x50) = uVar16;
      lVar22 = *(long *)(pTVar19 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar19 + 0xc0100);
      pTVar19[lVar22 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar19 + lVar22 + 0x44) = 1;
      *(Thread **)(pTVar19 + lVar22 + 0x50) = pTVar20;
      *(long *)(pTVar19 + lVar22 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar19 + lVar22 + 0x60) = param_2;
      *(long *)(pTVar19 + lVar22 + 0x68) = lVar4;
      *(ulong *)(pTVar19 + lVar22 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar23 + lVar22) == 0) {
        *(undefined4 *)(pTVar23 + lVar22) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar19 + 0x40080) = *(long *)(pTVar19 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar19 + 0x40080) - 1U <= *(ulong *)(pTVar19 + 0x40040)) {
        LOCK();
        *(long *)(pTVar19 + 0x40040) = *(long *)(pTVar19 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar20 = local_48 + 8;
            *(long *)pTVar20 = *(long *)pTVar20 + -1;
            UNLOCK();
            if (*(long *)pTVar20 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar17 = embree::TaskScheduler::TaskQueue::execute_local(pTVar23,(Task *)pTVar19);
      } while (cVar17 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar18 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar21);
      pTVar23 = *(Thread **)param_2;
      if (pTVar23 != (Thread *)0x0) {
        local_48 = pTVar23;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar23 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar23 == (Thread *)0x0) {
        if (pTVar19 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar19 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar19);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar23;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  undefined8 uStack_60;
  undefined8 uStack_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 local_40;
  undefined8 uStack_38;
  TaskGroupContext *local_30;
  long local_20;
  
  uStack_60 = *(undefined8 *)param_4;
  uStack_58 = *(undefined8 *)(param_4 + 8);
  uStack_50 = *(undefined8 *)(param_4 + 0x10);
  uStack_48 = *(undefined8 *)(param_4 + 0x18);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_40 = *(undefined8 *)(param_4 + 0x20);
  uStack_38 = *(undefined8 *)(param_4 + 0x28);
  local_78 = param_2;
  uStack_70 = param_1;
  local_68 = param_3;
  local_30 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_78,param_5,param_2 - param_1,true);
LAB_0011b47d:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x58 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40068 + uVar2);
      *puVar3 = &PTR_execute_0013f160;
      puVar3[1] = local_78;
      puVar3[2] = uStack_70;
      puVar3[3] = local_68;
      puVar3[4] = uStack_60;
      puVar3[5] = uStack_58;
      puVar3[6] = uStack_50;
      puVar3[7] = uStack_48;
      puVar3[8] = local_40;
      puVar3[9] = uStack_38;
      puVar3[10] = local_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0011b47d;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul> const&) [clone
   .isra.0] */

void embree::sse2::
     HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
     create_spatial_splits
               (PrimInfoExtRange *param_1,SpatialBinSplit *param_2,SpatialBinMapping *param_3)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  ulong uVar8;
  long in_FS_OFFSET;
  float fVar9;
  float local_9c;
  ulong local_98;
  long local_90;
  ulong local_88;
  long local_80;
  long local_78;
  long lStack_70;
  undefined8 local_68;
  PrimInfoExtRange *pPStack_60;
  SpatialBinMapping *local_58;
  float *pfStack_50;
  ulong *local_48;
  ulong *puStack_40;
  long *local_38;
  TaskGroupContext *pTStack_30;
  long local_20;
  
  local_90 = *(long *)(param_2 + 0x48);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_98 = *(long *)(param_2 + 0x50) - local_90;
  LOCK();
  local_88 = 0;
  UNLOCK();
  uVar8 = (ulong)(int)*(uint *)(param_3 + 8);
  if ((long)uVar8 < 0) {
    fVar9 = (float)(uVar8 >> 1 | (ulong)(*(uint *)(param_3 + 8) & 1));
    fVar9 = fVar9 + fVar9;
  }
  else {
    fVar9 = (float)(long)uVar8;
  }
  local_9c = fVar9 * *(float *)(param_3 + (long)*(int *)(param_3 + 4) * 4 + 0x40) +
             *(float *)(param_3 + (long)*(int *)(param_3 + 4) * 4 + 0x20);
  pfStack_50 = &local_9c;
  lStack_70 = *(long *)(param_2 + 0x40);
  local_80 = 0;
  local_48 = &local_88;
  local_78 = *(long *)(param_2 + 0x48);
  puStack_40 = &local_98;
  local_38 = &local_90;
  uVar8 = local_78 - lStack_70;
  local_68 = 0x40;
  pPStack_60 = param_1;
  local_58 = param_3;
  pTStack_30 = (TaskGroupContext *)&local_80;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    TaskScheduler::
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_78,(TaskGroupContext *)&local_80,uVar8,true);
LAB_0011b6bd:
    embree::TaskScheduler::wait();
    if (local_80 != 0) {
      local_78 = local_80;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_78);
    }
    uVar8 = local_88;
    if (local_98 < local_88) {
      uVar8 = local_98;
    }
    *(ulong *)(param_2 + 0x48) = *(long *)(param_2 + 0x48) + uVar8;
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x58 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40068 + uVar2);
      *puVar3 = &PTR_execute_0013f160;
      puVar3[1] = local_78;
      puVar3[2] = lStack_70;
      puVar3[3] = local_68;
      puVar3[4] = pPStack_60;
      puVar3[5] = local_58;
      puVar3[6] = pfStack_50;
      puVar3[7] = local_48;
      puVar3[8] = puStack_40;
      puVar3[9] = local_38;
      puVar3[10] = pTStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = (TaskGroupContext *)&local_80;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = uVar8;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0011b6bd;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,
   embree::sse2::SpatialBinSplit<16ul> const&, embree::sse2::SpatialBinMapping<16ul>
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  float fVar3;
  float fVar4;
  TaskGroupContext *pTVar5;
  long lVar6;
  long lVar7;
  ulong *puVar8;
  undefined1 auVar9 [16];
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [16];
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  uint uVar17;
  long lVar18;
  long lVar19;
  TaskScheduler *this_00;
  undefined1 (*pauVar20) [16];
  undefined8 *puVar21;
  ulong uVar22;
  uint *puVar23;
  ulong uVar24;
  long in_FS_OFFSET;
  float fVar25;
  undefined1 auVar26 [16];
  undefined1 auVar27 [16];
  undefined1 auVar28 [16];
  undefined1 auVar29 [16];
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  float fVar42;
  undefined1 auVar43 [16];
  float fVar44;
  float fVar45;
  undefined1 auVar46 [16];
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  float fVar56;
  float fVar57;
  float fVar58;
  undefined1 local_150 [8];
  float fStack_148;
  undefined1 local_120 [8];
  undefined8 uStack_118;
  undefined8 local_110;
  undefined8 uStack_108;
  undefined8 uStack_100;
  undefined8 uStack_f8;
  undefined8 uStack_f0;
  undefined8 local_e8;
  undefined8 uStack_e0;
  TaskGroupContext *local_d8;
  undefined1 local_c0 [16];
  undefined1 local_b0 [16];
  undefined1 local_a0 [16];
  undefined1 local_90 [16];
  undefined1 local_80 [16];
  undefined1 local_70 [16];
  undefined1 local_60 [16];
  long local_48;
  
  uVar24 = *(ulong *)(this + 8);
  uVar22 = *(ulong *)(this + 0x10);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar24 - uVar22) {
    uVar24 = uVar24 + uVar22 >> 1;
    spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (uVar22,uVar24,*(ulong *)(this + 0x18),
               (_lambda_embree__range<unsigned_long>_const___1_ *)(this + 0x20),
               *(TaskGroupContext **)(this + 0x50));
    local_110 = *(undefined8 *)(this + 0x18);
    pTVar5 = *(TaskGroupContext **)(this + 0x50);
    uStack_108 = *(undefined8 *)(this + 0x20);
    uStack_100 = *(undefined8 *)(this + 0x28);
    uStack_f8 = *(undefined8 *)(this + 0x30);
    uStack_f0 = *(undefined8 *)(this + 0x38);
    local_e8 = *(undefined8 *)(this + 0x40);
    uStack_e0 = *(undefined8 *)(this + 0x48);
    uStack_118 = uVar24;
    local_120 = (undefined1  [8])*(long *)(this + 8);
    uVar24 = *(long *)(this + 8) - uVar24;
    local_d8 = pTVar5;
    lVar18 = embree::TaskScheduler::thread();
    if (lVar18 == 0) {
      this_00 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::create_spatial_splits(embree::sse2::PrimInfoExtRange&,embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::SpatialBinMapping<16ul>const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (this_00,(_lambda___1_ *)local_120,pTVar5,uVar24,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar18 + 0x40080)) {
LAB_0011bf28:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar6 = *(long *)(lVar18 + 0xc00c0);
      uVar22 = lVar6 + 0x58 + (ulong)(-(int)lVar6 & 0x3f);
      if (0x80000 < uVar22) goto LAB_0011bf28;
      *(ulong *)(lVar18 + 0xc00c0) = uVar22;
      puVar21 = (undefined8 *)(lVar18 + 0x40068 + uVar22);
      puVar21[1] = local_120;
      puVar21[2] = uStack_118;
      *puVar21 = &PTR_execute_0013f160;
      puVar21[3] = local_110;
      puVar21[4] = uStack_108;
      puVar21[5] = uStack_100;
      puVar21[6] = uStack_f8;
      puVar21[7] = uStack_f0;
      puVar21[8] = local_e8;
      puVar21[9] = uStack_e0;
      puVar21[10] = local_d8;
      lVar19 = *(long *)(lVar18 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar18 + 0x40 + lVar19);
      lVar7 = *(long *)(lVar18 + 0xc0100);
      *(undefined4 *)(lVar18 + 0x44 + lVar19) = 1;
      *(undefined1 *)(lVar18 + 0x48 + lVar19) = 1;
      lVar19 = lVar19 + lVar18;
      *(undefined8 **)(lVar19 + 0x50) = puVar21;
      *(long *)(lVar19 + 0x58) = lVar7;
      *(TaskGroupContext **)(lVar19 + 0x60) = pTVar5;
      *(long *)(lVar19 + 0x68) = lVar6;
      *(ulong *)(lVar19 + 0x70) = uVar24;
      if (lVar7 != 0) {
        LOCK();
        *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar18 + 0x40080) = *(long *)(lVar18 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar18 + 0x40080) - 1U <= *(ulong *)(lVar18 + 0x40040)) {
        LOCK();
        *(long *)(lVar18 + 0x40040) = *(long *)(lVar18 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    for (; uVar22 < uVar24; uVar22 = uVar22 + 1) {
      pauVar20 = (undefined1 (*) [16])(**(long **)(this + 0x20) + uVar22 * 0x20);
      fVar3 = *(float *)(*pauVar20 + 0xc);
      if (0xfffffff < (uint)fVar3) {
        fVar25 = **(float **)(this + 0x30);
        lVar18 = (long)*(int *)(*(long *)(this + 0x28) + 4) * 4;
        if ((*(float *)(*pauVar20 + (long)*(int *)(*(long *)(this + 0x28) + 4) * 4) <= fVar25 &&
             fVar25 != *(float *)(*pauVar20 + (long)*(int *)(*(long *)(this + 0x28) + 4) * 4)) &&
           (fVar25 < *(float *)(pauVar20[1] + lVar18))) {
          auVar40._0_8_ = CONCAT44(_LC12,_LC12);
          auVar40._8_4_ = _LC12;
          auVar40._12_4_ = _LC12;
          auVar29._8_4_ = _LC12;
          auVar29._0_8_ = auVar40._0_8_;
          auVar29._12_4_ = _LC12;
          lVar6 = *(long *)(*(long *)(*(long *)(*(long **)(this + 0x20))[1] + 0x1e0) +
                           (ulong)((uint)fVar3 & 0x7ffffff) * 8);
          fVar4 = *(float *)(pauVar20[1] + 0xc);
          puVar23 = (uint *)((ulong)(uint)fVar4 * *(long *)(lVar6 + 0x60) + *(long *)(lVar6 + 0x58))
          ;
          lVar7 = *(long *)(lVar6 + 0x88);
          lVar6 = *(long *)(lVar6 + 0x90);
          local_c0 = *(undefined1 (*) [16])(lVar7 + (ulong)*puVar23 * lVar6);
          fVar51 = local_c0._0_4_;
          fVar52 = local_c0._4_4_;
          fVar53 = local_c0._8_4_;
          fVar54 = local_c0._12_4_;
          local_90 = local_c0;
          local_b0 = *(undefined1 (*) [16])(lVar7 + (ulong)puVar23[1] * lVar6);
          fVar55 = local_b0._0_4_;
          fVar56 = local_b0._4_4_;
          fVar57 = local_b0._8_4_;
          fVar58 = local_b0._12_4_;
          local_a0 = *(undefined1 (*) [16])(lVar7 + (ulong)puVar23[2] * lVar6);
          fVar47 = local_a0._0_4_;
          fVar48 = local_a0._4_4_;
          fVar49 = local_a0._8_4_;
          fVar50 = local_a0._12_4_;
          auVar35._4_4_ = fVar56 - fVar52;
          auVar35._0_4_ = fVar55 - fVar51;
          auVar35._8_4_ = fVar57 - fVar53;
          auVar35._12_4_ = fVar58 - fVar54;
          local_80 = divps(auVar29,auVar35);
          auVar30._8_4_ = _LC12;
          auVar30._0_8_ = auVar40._0_8_;
          auVar30._12_4_ = _LC12;
          auVar33._4_4_ = fVar48 - fVar56;
          auVar33._0_4_ = fVar47 - fVar55;
          auVar33._8_4_ = fVar49 - fVar57;
          auVar33._12_4_ = fVar50 - fVar58;
          local_70 = divps(auVar30,auVar33);
          auVar28._4_4_ = fVar52 - fVar48;
          auVar28._0_4_ = fVar51 - fVar47;
          auVar28._8_4_ = fVar53 - fVar49;
          auVar28._12_4_ = fVar54 - fVar50;
          local_60 = divps(auVar40,auVar28);
          fVar45 = *(float *)(local_c0 + lVar18);
          fVar42 = *(float *)(local_b0 + lVar18);
          if (fVar25 < fVar45) {
            if (fVar45 < fVar25) {
              if (fVar25 <= fVar45) {
                if (fVar25 <= fVar42) {
                  auVar39._0_8_ = CONCAT44(_LC1,_LC1);
                  auVar39._8_4_ = _LC1;
                  auVar39._12_4_ = _LC1;
                  auVar34._0_8_ = CONCAT44(_LC3,_LC3);
                  auVar34._8_4_ = _LC3;
                  auVar34._12_4_ = _LC3;
                  auVar27._8_4_ = _LC1;
                  auVar27._0_8_ = auVar39._0_8_;
                  auVar27._12_4_ = _LC1;
                  auVar32._8_4_ = _LC3;
                  auVar32._0_8_ = auVar34._0_8_;
                  auVar32._12_4_ = _LC3;
                  goto LAB_0011bb22;
                }
                if (fVar45 <= fVar25) {
                  auVar27._0_8_ = CONCAT44(_LC1,_LC1);
                  auVar27._8_4_ = _LC1;
                  auVar27._12_4_ = _LC1;
                  auVar34._0_8_ = CONCAT44(_LC3,_LC3);
                  auVar34._8_4_ = _LC3;
                  auVar34._12_4_ = _LC3;
                  auVar39._8_4_ = _LC1;
                  auVar39._0_8_ = auVar27._0_8_;
                  auVar39._12_4_ = _LC1;
                  auVar32._8_4_ = _LC3;
                  auVar32._0_8_ = auVar34._0_8_;
                  auVar32._12_4_ = _LC3;
                  goto LAB_0011bee9;
                }
LAB_0011be9d:
                auVar39._0_8_ = CONCAT44(_LC1,_LC1);
                auVar39._8_4_ = _LC1;
                auVar39._12_4_ = _LC1;
                auVar34._0_8_ = CONCAT44(_LC3,_LC3);
                auVar34._8_4_ = _LC3;
                auVar34._12_4_ = _LC3;
                auVar27._8_4_ = _LC1;
                auVar27._0_8_ = auVar39._0_8_;
                auVar27._12_4_ = _LC1;
                auVar32._8_4_ = _LC3;
                auVar32._0_8_ = auVar34._0_8_;
                auVar32._12_4_ = _LC3;
                goto LAB_0011bdf9;
              }
              if (fVar25 < fVar42) goto LAB_0011be9d;
              auVar39._0_8_ = CONCAT44(_LC1,_LC1);
              auVar39._8_4_ = _LC1;
              auVar39._12_4_ = _LC1;
              auVar34._0_8_ = CONCAT44(_LC3,_LC3);
              auVar34._8_4_ = _LC3;
              auVar34._12_4_ = _LC3;
              auVar27._8_4_ = _LC1;
              auVar27._0_8_ = auVar39._0_8_;
              auVar27._12_4_ = _LC1;
              auVar32._8_4_ = _LC3;
              auVar32._0_8_ = auVar34._0_8_;
              auVar32._12_4_ = _LC3;
              goto LAB_0011be35;
            }
            auVar32._0_8_ = CONCAT44(_LC3,_LC3);
            auVar32._8_4_ = _LC3;
            auVar32._12_4_ = _LC3;
            auVar27._0_8_ = CONCAT44(_LC1,_LC1);
            auVar27._8_4_ = _LC1;
            auVar27._12_4_ = _LC1;
            auVar38._8_4_ = _LC3;
            auVar38._0_8_ = auVar32._0_8_;
            auVar38._12_4_ = _LC3;
            auVar41._8_4_ = _LC1;
            auVar41._0_8_ = auVar27._0_8_;
            auVar41._12_4_ = _LC1;
            auVar34 = minps(auVar38,local_c0);
            auVar39 = maxps(auVar41,local_c0);
            if (fVar42 < fVar25) goto LAB_0011bdf9;
LAB_0011bb22:
            fVar45 = *(float *)(local_a0 + lVar18);
            if (fVar25 < fVar42) goto LAB_0011bb35;
            auVar32 = minps(auVar32,local_b0);
            auVar27 = maxps(auVar27,local_b0);
LAB_0011bd90:
            auVar34 = minps(auVar34,local_b0);
            auVar39 = maxps(auVar39,local_b0);
LAB_0011bd98:
            fVar44 = *(float *)(local_90 + lVar18);
            if (fVar25 <= fVar45) {
              if (fVar45 <= fVar25) {
                auVar32 = minps(auVar32,local_a0);
                auVar27 = maxps(auVar27,local_a0);
                goto LAB_0011bd80;
              }
              goto LAB_0011bd4b;
            }
            if (fVar25 < fVar42) goto LAB_0011bb4d;
            auVar32 = minps(auVar32,local_a0);
            auVar27 = maxps(auVar27,local_a0);
            fVar42 = fVar44;
joined_r0x0011bbb5:
            if (fVar25 < fVar42) {
              fVar25 = (fVar25 - fVar45) * (_LC12 / (fVar44 - fVar45));
              fVar47 = fVar25 * (fVar51 - fVar47) + fVar47;
              fVar48 = fVar25 * (fVar52 - fVar48) + fVar48;
              fVar49 = fVar25 * (fVar53 - fVar49) + fVar49;
              fVar50 = fVar25 * (fVar54 - fVar50) + fVar50;
              auVar9._4_4_ = fVar48;
              auVar9._0_4_ = fVar47;
              auVar9._8_4_ = fVar49;
              auVar9._12_4_ = fVar50;
              auVar32 = minps(auVar32,auVar9);
              auVar10._4_4_ = fVar48;
              auVar10._0_4_ = fVar47;
              auVar10._8_4_ = fVar49;
              auVar10._12_4_ = fVar50;
              auVar27 = maxps(auVar27,auVar10);
              auVar11._4_4_ = fVar48;
              auVar11._0_4_ = fVar47;
              auVar11._8_4_ = fVar49;
              auVar11._12_4_ = fVar50;
              auVar34 = minps(auVar34,auVar11);
              auVar12._4_4_ = fVar48;
              auVar12._0_4_ = fVar47;
              auVar12._8_4_ = fVar49;
              auVar12._12_4_ = fVar50;
              auVar39 = maxps(auVar39,auVar12);
            }
          }
          else {
            auVar34._0_8_ = CONCAT44(_LC3,_LC3);
            auVar34._8_4_ = _LC3;
            auVar34._12_4_ = _LC3;
            auVar39._0_8_ = CONCAT44(_LC1,_LC1);
            auVar39._8_4_ = _LC1;
            auVar39._12_4_ = _LC1;
            auVar31._8_4_ = _LC3;
            auVar31._0_8_ = auVar34._0_8_;
            auVar31._12_4_ = _LC3;
            auVar26._8_4_ = _LC1;
            auVar26._0_8_ = auVar39._0_8_;
            auVar26._12_4_ = _LC1;
            auVar32 = minps(auVar31,local_c0);
            auVar27 = maxps(auVar26,local_c0);
            auVar28 = auVar32;
            auVar33 = auVar27;
            if ((fVar25 == fVar45) || (auVar28 = auVar34, auVar33 = auVar39, fVar42 <= fVar25)) {
              auVar39 = auVar33;
              auVar34 = auVar28;
              if (fVar25 <= fVar42) goto LAB_0011bb22;
LAB_0011bee9:
              auVar32 = minps(auVar32,local_b0);
              auVar27 = maxps(auVar27,local_b0);
              fVar45 = *(float *)(local_a0 + lVar18);
            }
            else {
LAB_0011bdf9:
              fVar45 = (_LC12 / (fVar42 - fVar45)) * (fVar25 - fVar45);
              auVar46._0_4_ = fVar45 * (fVar55 - fVar51) + fVar51;
              auVar46._4_4_ = fVar45 * (fVar56 - fVar52) + fVar52;
              auVar46._8_4_ = fVar45 * (fVar57 - fVar53) + fVar53;
              auVar46._12_4_ = fVar45 * (fVar58 - fVar54) + fVar54;
              auVar32 = minps(auVar32,auVar46);
              auVar27 = maxps(auVar27,auVar46);
              auVar34 = minps(auVar34,auVar46);
              auVar39 = maxps(auVar39,auVar46);
LAB_0011be35:
              fVar45 = *(float *)(local_a0 + lVar18);
              if (fVar25 < fVar42) {
LAB_0011bb35:
                if (fVar25 <= fVar42) goto LAB_0011bd90;
                if (fVar25 <= fVar42) goto LAB_0011bd98;
              }
              else {
                auVar32 = minps(auVar32,local_b0);
                auVar27 = maxps(auVar27,local_b0);
                if (fVar25 == fVar42) goto LAB_0011bd90;
              }
            }
            if (fVar25 < fVar45) {
LAB_0011bb4d:
              fVar42 = (_LC12 / (fVar45 - fVar42)) * (fVar25 - fVar42);
              auVar43._0_4_ = fVar42 * (fVar47 - fVar55) + fVar55;
              auVar43._4_4_ = fVar42 * (fVar48 - fVar56) + fVar56;
              auVar43._8_4_ = fVar42 * (fVar49 - fVar57) + fVar57;
              auVar43._12_4_ = fVar42 * (fVar50 - fVar58) + fVar58;
              auVar32 = minps(auVar32,auVar43);
              auVar27 = maxps(auVar27,auVar43);
              auVar34 = minps(auVar34,auVar43);
              auVar39 = maxps(auVar39,auVar43);
            }
            fVar44 = *(float *)(local_90 + lVar18);
            if (fVar25 < fVar45) {
LAB_0011bd4b:
              if (fVar25 <= fVar45) goto LAB_0011bd80;
              fVar42 = fVar44;
              if (fVar45 < fVar25) goto joined_r0x0011bbb5;
            }
            else {
              auVar32 = minps(auVar32,local_a0);
              auVar27 = maxps(auVar27,local_a0);
              fVar42 = fVar44;
              if (fVar25 != fVar45) goto joined_r0x0011bbb5;
LAB_0011bd80:
              auVar34 = minps(auVar34,local_a0);
              auVar39 = maxps(auVar39,local_a0);
            }
            fVar42 = fVar45;
            if (fVar44 < fVar25) goto joined_r0x0011bbb5;
          }
          auVar33 = maxps(auVar32,*pauVar20);
          auVar28 = minps(auVar27,pauVar20[1]);
          auVar35 = maxps(auVar34,*pauVar20);
          auVar40 = minps(auVar39,pauVar20[1]);
          local_120._0_4_ = auVar33._0_4_;
          uVar13 = local_120._0_4_;
          local_120._4_4_ = auVar33._4_4_;
          uVar14 = local_120._4_4_;
          uStack_118._0_4_ = auVar33._8_4_;
          fVar45 = (float)uStack_118;
          local_120._0_4_ = auVar28._0_4_;
          uVar15 = local_120._0_4_;
          local_120._4_4_ = auVar28._4_4_;
          uVar16 = local_120._4_4_;
          uStack_118._0_4_ = auVar28._8_4_;
          fVar42 = (float)uStack_118;
          auVar36._4_4_ = -(uint)((float)uVar14 <= (float)local_120._4_4_);
          auVar36._0_4_ = -(uint)((float)uVar13 <= (float)local_120._0_4_);
          auVar36._8_4_ = -(uint)(fVar45 <= (float)uStack_118);
          auVar36._12_4_ = -(uint)(fVar3 <= fVar4);
          _local_150 = auVar35._0_12_;
          _local_120 = _local_150;
          local_150._0_4_ = auVar35._0_4_;
          uVar13 = local_150._0_4_;
          local_150._4_4_ = auVar35._4_4_;
          uVar14 = local_150._4_4_;
          fStack_148 = auVar35._8_4_;
          fVar25 = fStack_148;
          uVar17 = movmskps(fVar3,auVar36);
          local_150._0_4_ = auVar40._0_4_;
          local_150._4_4_ = auVar40._4_4_;
          fStack_148 = auVar40._8_4_;
          uStack_118._4_4_ = fVar3;
          if (((~uVar17 & 7) == 0) &&
             (auVar37._4_4_ = -(uint)((float)uVar14 <= (float)local_150._4_4_),
             auVar37._0_4_ = -(uint)((float)uVar13 <= (float)local_150._0_4_),
             auVar37._8_4_ = -(uint)(fVar25 <= fStack_148), auVar37._12_4_ = -(uint)(fVar3 <= fVar4)
             , uVar17 = movmskps(~uVar17,auVar37), (~uVar17 & 7) == 0)) {
            uVar17 = (((uint)fVar3 >> 0x1b) - 1) * 0x8000000;
            puVar8 = *(ulong **)(this + 0x38);
            uStack_118._4_4_ = (uint)fVar3 & 0x7ffffff | uVar17;
            LOCK();
            uVar2 = *puVar8;
            *puVar8 = *puVar8 + 1;
            UNLOCK();
            if (**(ulong **)(this + 0x40) <= uVar2) break;
            puVar21 = (undefined8 *)(uVar22 * 0x20 + **(long **)(this + 0x20));
            *puVar21 = auVar33._0_8_;
            puVar21[1] = CONCAT44((uint)fVar3 & 0x7ffffff | uVar17,fVar45);
            *(undefined4 *)(puVar21 + 2) = uVar15;
            *(undefined4 *)((long)puVar21 + 0x14) = uVar16;
            *(float *)(puVar21 + 3) = fVar42;
            *(float *)((long)puVar21 + 0x1c) = fVar4;
            pauVar20 = (undefined1 (*) [16])
                       ((uVar2 + **(long **)(this + 0x48)) * 0x20 + **(long **)(this + 0x20));
            *pauVar20 = _local_120;
            *(undefined4 *)pauVar20[1] = local_150._0_4_;
            *(undefined4 *)(pauVar20[1] + 4) = local_150._4_4_;
            *(float *)(pauVar20[1] + 8) = fStack_148;
            *(float *)(pauVar20[1] + 0xc) = fVar4;
          }
        }
      }
    }
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0011c305) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar19 = pTVar15 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar16 = pTVar17 + 0x80;
    *(undefined4 *)(pTVar17 + 0x40) = 0;
    pTVar17 = pTVar16;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar16 = pTVar15 + uVar3 + 0x40088;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar16 = &PTR_execute_0013f178;
      *(undefined8 *)(pTVar16 + 8) = uVar7;
      *(undefined8 *)(pTVar16 + 0x10) = uVar8;
      *(undefined8 *)(pTVar16 + 0x18) = uVar9;
      *(undefined8 *)(pTVar16 + 0x20) = uVar10;
      *(undefined8 *)(pTVar16 + 0x28) = uVar11;
      *(undefined8 *)(pTVar16 + 0x30) = uVar12;
      lVar18 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar18 + 0x50) = pTVar16;
      *(long *)(pTVar15 + lVar18 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar15 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar18 + 0x68) = lVar4;
      *(ulong *)(pTVar15 + lVar18 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar16 = local_48 + 8;
            *(long *)pTVar16 = *(long *)pTVar16 + -1;
            UNLOCK();
            if (*(long *)pTVar16 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar15 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar19;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  undefined8 *puVar7;
  long lVar8;
  TaskScheduler *pTVar9;
  undefined8 *puVar10;
  ulong uVar11;
  ulong uVar12;
  long lVar13;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 local_78;
  TaskGroupContext *pTStack_70;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 local_48;
  TaskGroupContext *pTStack_40;
  long local_30;
  
  uVar12 = *(ulong *)(this + 8);
  uVar11 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar12 - uVar11) {
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_50 = *(undefined8 *)(this + 0x20);
    local_48 = *(undefined8 *)(this + 0x28);
    uVar12 = uVar12 + uVar11 >> 1;
    local_68 = uVar12;
    uStack_60 = uVar11;
    local_58 = *(ulong *)(this + 0x18);
    pTStack_40 = pTVar3;
    lVar13 = embree::TaskScheduler::thread();
    if (lVar13 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_68,pTVar3,uVar12 - uVar11,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar13 + 0x40080)) goto LAB_0011c808;
      lVar4 = *(long *)(lVar13 + 0xc00c0);
      uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0011c808;
      *(ulong *)(lVar13 + 0xc00c0) = uVar2;
      puVar7 = (undefined8 *)(lVar13 + 0x40088 + uVar2);
      *puVar7 = &PTR_execute_0013f178;
      puVar7[1] = local_68;
      puVar7[2] = uStack_60;
      puVar7[3] = local_58;
      puVar7[4] = uStack_50;
      puVar7[5] = local_48;
      puVar7[6] = pTStack_40;
      lVar8 = *(long *)(lVar13 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar13 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar13 + 0xc0100);
      *(undefined4 *)(lVar13 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar13 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar13;
      *(undefined8 **)(lVar8 + 0x50) = puVar7;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar12 - uVar11;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar13 + 0x40080) = *(long *)(lVar13 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar13 + 0x40080) - 1U <= *(ulong *)(lVar13 + 0x40040)) {
        LOCK();
        *(long *)(lVar13 + 0x40040) = *(long *)(lVar13 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(long *)(this + 8);
    local_78 = *(undefined8 *)(this + 0x28);
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    local_88 = *(undefined8 *)(this + 0x18);
    uStack_80 = *(undefined8 *)(this + 0x20);
    uVar11 = local_98 - uVar12;
    uStack_90 = uVar12;
    pTStack_70 = pTVar3;
    lVar13 = embree::TaskScheduler::thread();
    if (lVar13 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_98,pTVar3,uVar11,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar13 + 0x40080)) {
LAB_0011c808:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar4 = *(long *)(lVar13 + 0xc00c0);
      uVar12 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar12) goto LAB_0011c808;
      *(ulong *)(lVar13 + 0xc00c0) = uVar12;
      puVar7 = (undefined8 *)(lVar13 + 0x40088 + uVar12);
      *puVar7 = &PTR_execute_0013f178;
      puVar7[1] = local_98;
      puVar7[2] = uStack_90;
      puVar7[3] = local_88;
      puVar7[4] = uStack_80;
      puVar7[5] = local_78;
      puVar7[6] = pTStack_70;
      lVar8 = *(long *)(lVar13 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar13 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar13 + 0xc0100);
      *(undefined4 *)(lVar13 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar13 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar13;
      *(undefined8 **)(lVar8 + 0x50) = puVar7;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar11;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar13 + 0x40080) = *(long *)(lVar13 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar13 + 0x40080) - 1U <= *(ulong *)(lVar13 + 0x40040)) {
        LOCK();
        *(long *)(lVar13 + 0x40040) = *(long *)(lVar13 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar11 < uVar12) {
      do {
        lVar13 = **(long **)(this + 0x28) + uVar11;
        puVar10 = (undefined8 *)(uVar11 * 0x20 + **(long **)(this + 0x20));
        uVar11 = uVar11 + 1;
        uVar6 = puVar10[1];
        puVar7 = (undefined8 *)(**(long **)(this + 0x20) + lVar13 * 0x20);
        *puVar7 = *puVar10;
        puVar7[1] = uVar6;
        uVar6 = puVar10[3];
        puVar7[2] = puVar10[2];
        puVar7[3] = uVar6;
      } while (uVar12 != uVar11);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0011cbe5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar19 = pTVar15 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar16 = pTVar17 + 0x80;
    *(undefined4 *)(pTVar17 + 0x40) = 0;
    pTVar17 = pTVar16;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar16 = pTVar15 + uVar3 + 0x40088;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar16 = &PTR_execute_0013f190;
      *(undefined8 *)(pTVar16 + 8) = uVar7;
      *(undefined8 *)(pTVar16 + 0x10) = uVar8;
      *(undefined8 *)(pTVar16 + 0x18) = uVar9;
      *(undefined8 *)(pTVar16 + 0x20) = uVar10;
      *(undefined8 *)(pTVar16 + 0x28) = uVar11;
      *(undefined8 *)(pTVar16 + 0x30) = uVar12;
      lVar18 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar18 + 0x50) = pTVar16;
      *(long *)(pTVar15 + lVar18 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar15 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar18 + 0x68) = lVar4;
      *(ulong *)(pTVar15 + lVar18 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar16 = local_48 + 8;
            *(long *)pTVar16 = *(long *)pTVar16 + -1;
            UNLOCK();
            if (*(long *)pTVar16 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar15 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar19;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&) [clone .isra.0] [clone
   .cold] */

void embree::sse2::
     HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
     moveExtentedRange(PrimInfoExtRange *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3
                      )

{
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::createLargeLeaf(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >
   const&, embree::FastAllocator::CachedAllocator) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::createLargeLeaf(ulong *param_1,ulong *param_2)

{
  long *plVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  bool bVar4;
  PrimInfoExtRange aPVar5 [16];
  undefined1 auVar6 [16];
  undefined1 (*pauVar7) [16];
  undefined1 (*pauVar8) [16];
  undefined8 uVar9;
  undefined8 *puVar10;
  ulong uVar11;
  undefined4 unaff_EBX;
  ulong *puVar12;
  undefined8 unaff_RBP;
  ulong uVar13;
  undefined8 *puVar14;
  undefined8 *puVar15;
  ulong uVar16;
  PrimInfoExtRange *pPVar17;
  PrimInfoExtRange *pPVar18;
  undefined4 unaff_R12D;
  ulong uVar19;
  long lVar20;
  long in_FS_OFFSET;
  byte bVar21;
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  undefined1 auVar26 [16];
  undefined1 auVar27 [16];
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  undefined8 in_stack_00000018;
  ulong local_8a8;
  undefined1 local_8a0;
  PrimInfoExtRange local_898 [16];
  undefined1 local_888 [16];
  undefined1 local_878 [16];
  undefined1 local_868 [16];
  ulong local_858;
  ulong uStack_850;
  ulong local_848;
  ulong local_838;
  bool local_830 [8];
  PrimInfoExtRange local_828 [16];
  undefined1 local_818 [16];
  undefined1 local_808 [16];
  undefined1 local_7f8 [16];
  ulong local_7e8;
  ulong uStack_7e0;
  ulong local_7d8;
  undefined8 auStack_7d0 [17];
  ulong local_748;
  bool local_740 [8];
  undefined8 local_738;
  ulong uStack_730;
  undefined8 local_728;
  ulong auStack_720 [4];
  ulong uStack_700;
  ulong local_6f8;
  ulong uStack_6f0;
  ulong local_6e8;
  undefined1 local_6d0;
  undefined4 local_6c8;
  undefined4 uStack_6c4;
  undefined4 uStack_6c0;
  undefined4 local_6b8;
  undefined4 uStack_6b4;
  undefined4 uStack_6b0;
  long local_688;
  long lStack_680;
  undefined1 local_660;
  undefined4 local_658;
  undefined4 local_654;
  undefined4 local_650;
  undefined4 local_648;
  undefined4 local_644;
  undefined4 local_640;
  long local_618;
  long local_610;
  undefined1 local_5f0;
  undefined4 local_5e8;
  undefined4 local_5e4;
  undefined4 local_5e0;
  undefined4 local_5d8;
  undefined4 local_5d4;
  undefined4 local_5d0;
  long local_5a8;
  long local_5a0;
  undefined1 local_580;
  undefined4 local_578;
  undefined4 local_574;
  undefined4 local_570;
  undefined4 local_568;
  undefined4 local_564;
  undefined4 local_560;
  long local_538;
  long local_530;
  undefined1 local_510;
  undefined4 local_508;
  undefined4 local_504;
  undefined4 local_500;
  undefined4 local_4f8;
  undefined4 local_4f4;
  undefined4 local_4f0;
  long local_4c8;
  long local_4c0;
  undefined1 local_4a0;
  undefined4 local_498;
  undefined4 local_494;
  undefined4 local_490;
  undefined4 local_488;
  undefined4 local_484;
  undefined4 local_480;
  long local_458;
  long local_450;
  undefined1 local_430;
  undefined4 local_428;
  undefined4 local_424;
  undefined4 local_420;
  undefined4 local_418;
  undefined4 local_414;
  undefined4 local_410;
  long local_3e8;
  long local_3e0;
  undefined1 local_3c0;
  undefined4 local_3b8;
  undefined4 local_3b4;
  undefined4 local_3b0;
  undefined4 local_3a8;
  undefined4 local_3a4;
  undefined4 local_3a0;
  long local_378;
  long local_370;
  undefined1 local_350;
  undefined4 local_348;
  undefined4 local_344;
  undefined4 local_340;
  undefined4 local_338;
  undefined4 local_334;
  undefined4 local_330;
  long local_308;
  long local_300;
  undefined1 local_2e0;
  undefined4 local_2d8;
  undefined4 local_2d4;
  undefined4 local_2d0;
  undefined4 local_2c8;
  undefined4 local_2c4;
  undefined4 local_2c0;
  long local_298;
  long local_290;
  undefined1 local_270;
  undefined4 local_268;
  undefined4 local_264;
  undefined4 local_260;
  undefined4 local_258;
  undefined4 local_254;
  undefined4 local_250;
  long local_228;
  long local_220;
  undefined1 local_200;
  undefined4 local_1f8;
  undefined4 local_1f4;
  undefined4 local_1f0;
  undefined4 local_1e8;
  undefined4 local_1e4;
  undefined4 local_1e0;
  long local_1b8;
  long local_1b0;
  undefined1 local_190;
  undefined4 local_188;
  undefined4 local_184;
  undefined4 local_180;
  undefined4 local_178;
  undefined4 local_174;
  undefined4 local_170;
  long local_148;
  long local_140;
  undefined1 local_120;
  undefined4 local_118;
  undefined4 local_114;
  undefined4 local_110;
  undefined4 local_108;
  undefined4 local_104;
  undefined4 local_100;
  long local_d8;
  long local_d0;
  undefined1 local_b0;
  undefined4 local_a8;
  undefined4 local_a4;
  undefined4 local_a0;
  undefined4 local_98;
  undefined4 local_94;
  undefined4 local_90;
  long local_68;
  long local_60;
  long local_40;
  undefined4 local_38;
  undefined4 local_34;
  
  uVar3 = _LC3;
  uVar2 = _LC1;
  bVar21 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar13 = *param_2;
  if (param_1[1] < uVar13) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar11 = param_2[0xb];
  if (uVar11 - param_2[10] <= param_1[4]) {
    if (*(long *)(in_FS_OFFSET + 0x28) == *(long *)(in_FS_OFFSET + 0x28)) {
      puVar10 = (undefined8 *)
                BVHBuilderBinnedFastSpatialSAH::
                CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>
                ::operator()(param_1[0xd],param_1[8],param_2 + 10,in_stack_00000008,
                             in_stack_00000018);
      return puVar10;
    }
    goto LAB_0011e47c;
  }
  local_748 = uVar13;
  local_738 = param_2[2];
  uStack_730 = param_2[3];
  local_740[0] = (bool)(char)param_2[1];
  local_728 = param_2[4];
  auStack_720[0] = param_2[5];
  local_6e8 = param_2[0xc];
  auStack_720[1] = param_2[6];
  auStack_720[2] = param_2[7];
  auStack_720[3] = param_2[8];
  uStack_700 = param_2[9];
  local_6f8 = param_2[10];
  uStack_6f0 = param_2[0xb];
  if (param_1[4] < param_2[0xb] - param_2[10]) {
    uVar19 = 1;
    lVar20 = 0;
    puVar12 = &local_748;
    do {
      uVar13 = uVar13 + 1;
      local_8a0 = 0;
      pPVar17 = (PrimInfoExtRange *)param_1[9];
      local_858 = auStack_720[lVar20 * 0xe + 5];
      uStack_7e0 = auStack_720[lVar20 * 0xe + 6];
      local_830[0] = false;
      uStack_850 = local_858 + uStack_7e0 >> 1;
      if (local_858 < uStack_850) {
        uVar11 = 0;
        auVar24._4_4_ = uVar2;
        auVar24._0_4_ = uVar2;
        auVar24._8_4_ = uVar2;
        auVar24._12_4_ = uVar2;
        auVar25._4_4_ = uVar3;
        auVar25._0_4_ = uVar3;
        auVar25._8_4_ = uVar3;
        auVar25._12_4_ = uVar3;
        auVar26._4_4_ = uVar2;
        auVar26._0_4_ = uVar2;
        auVar26._8_4_ = uVar2;
        auVar26._12_4_ = uVar2;
        auVar27._4_4_ = uVar3;
        auVar27._0_4_ = uVar3;
        auVar27._8_4_ = uVar3;
        auVar27._12_4_ = uVar3;
        pauVar8 = (undefined1 (*) [16])(local_858 * 0x20 + *(long *)pPVar17);
        do {
          pauVar7 = pauVar8 + 2;
          auVar22._0_4_ = *(float *)pauVar8[1] + *(float *)*pauVar8;
          auVar22._4_4_ = *(float *)(pauVar8[1] + 4) + *(float *)(*pauVar8 + 4);
          auVar22._8_4_ = *(float *)(pauVar8[1] + 8) + *(float *)(*pauVar8 + 8);
          auVar22._12_4_ = *(float *)(pauVar8[1] + 0xc) + *(float *)(*pauVar8 + 0xc);
          auVar27 = minps(auVar27,*pauVar8);
          auVar26 = maxps(auVar26,pauVar8[1]);
          uVar11 = uVar11 + (*(uint *)(*pauVar8 + 0xc) >> 0x1b);
          auVar25 = minps(auVar25,auVar22);
          auVar24 = maxps(auVar24,auVar22);
          pauVar8 = pauVar7;
        } while (pauVar7 != (undefined1 (*) [16])(*(long *)pPVar17 + uStack_850 * 0x20));
      }
      else {
        auVar24._4_4_ = uVar2;
        auVar24._0_4_ = uVar2;
        auVar24._8_4_ = uVar2;
        auVar24._12_4_ = uVar2;
        auVar25._4_4_ = uVar3;
        auVar25._0_4_ = uVar3;
        auVar25._8_4_ = uVar3;
        auVar25._12_4_ = uVar3;
        auVar26._4_4_ = uVar2;
        auVar26._0_4_ = uVar2;
        auVar26._8_4_ = uVar2;
        auVar26._12_4_ = uVar2;
        uVar11 = 0;
        auVar27._4_4_ = uVar3;
        auVar27._0_4_ = uVar3;
        auVar27._8_4_ = uVar3;
        auVar27._12_4_ = uVar3;
      }
      if (uStack_850 < uStack_7e0) {
        uVar16 = 0;
        local_7f8._4_4_ = uVar2;
        local_7f8._0_4_ = uVar2;
        local_7f8._8_4_ = uVar2;
        local_7f8._12_4_ = uVar2;
        local_808._4_4_ = uVar3;
        local_808._0_4_ = uVar3;
        local_808._8_4_ = uVar3;
        local_808._12_4_ = uVar3;
        local_818._4_4_ = uVar2;
        local_818._0_4_ = uVar2;
        local_818._8_4_ = uVar2;
        local_818._12_4_ = uVar2;
        local_828._4_4_ = uVar3;
        local_828._0_4_ = uVar3;
        local_828._8_4_ = uVar3;
        local_828._12_4_ = uVar3;
        pauVar8 = (undefined1 (*) [16])(uStack_850 * 0x20 + *(long *)pPVar17);
        do {
          pauVar7 = pauVar8 + 2;
          auVar23._0_4_ = *(float *)pauVar8[1] + *(float *)*pauVar8;
          auVar23._4_4_ = *(float *)(pauVar8[1] + 4) + *(float *)(*pauVar8 + 4);
          auVar23._8_4_ = *(float *)(pauVar8[1] + 8) + *(float *)(*pauVar8 + 8);
          auVar23._12_4_ = *(float *)(pauVar8[1] + 0xc) + *(float *)(*pauVar8 + 0xc);
          local_828 = (PrimInfoExtRange  [16])minps((undefined1  [16])local_828,*pauVar8);
          local_818 = maxps(local_818,pauVar8[1]);
          uVar16 = uVar16 + (*(uint *)(*pauVar8 + 0xc) >> 0x1b);
          local_808 = minps(local_808,auVar23);
          local_7f8 = maxps(local_7f8,auVar23);
          pauVar8 = pauVar7;
        } while (pauVar7 != (undefined1 (*) [16])(*(long *)pPVar17 + uStack_7e0 * 0x20));
      }
      else {
        local_7f8._4_4_ = uVar2;
        local_7f8._0_4_ = uVar2;
        local_7f8._8_4_ = uVar2;
        local_7f8._12_4_ = uVar2;
        local_808._4_4_ = uVar3;
        local_808._0_4_ = uVar3;
        local_808._8_4_ = uVar3;
        local_808._12_4_ = uVar3;
        local_818._4_4_ = uVar2;
        local_818._0_4_ = uVar2;
        local_818._8_4_ = uVar2;
        local_818._12_4_ = uVar2;
        uVar16 = 0;
        local_828._4_4_ = uVar3;
        local_828._0_4_ = uVar3;
        local_828._8_4_ = uVar3;
        local_828._12_4_ = uVar3;
      }
      local_898 = (PrimInfoExtRange  [16])auVar27;
      local_888 = auVar26;
      local_878 = auVar25;
      local_868 = auVar24;
      local_848 = uStack_850;
      local_838 = uVar13;
      local_7e8 = uStack_850;
      local_7d8 = uStack_7e0;
      if (uStack_7e0 != auStack_720[lVar20 * 0xe + 7]) {
        pPVar18 = local_898;
        local_8a8 = uVar13;
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        setExtentedRanges((PrimInfoExtRange *)(&local_738 + lVar20 * 0xe),pPVar18,local_828,uVar11,
                          uVar16);
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        moveExtentedRange(pPVar17,pPVar18,local_828);
      }
      auVar6 = local_7f8;
      auVar23 = local_808;
      auVar22 = local_818;
      aPVar5 = local_828;
      bVar4 = local_830[0];
      uVar16 = local_838;
      uVar19 = uVar19 + 1;
      *(ulong *)(local_740 + lVar20 * 0x70 + -8) = *puVar12;
      local_740[lVar20 * 0x70] = SUB81(puVar12[1],0);
      uVar11 = puVar12[3];
      (&local_738)[lVar20 * 0xe] = puVar12[2];
      (&uStack_730)[lVar20 * 0xe] = uVar11;
      uVar11 = puVar12[5];
      (&local_728)[lVar20 * 0xe] = puVar12[4];
      auStack_720[lVar20 * 0xe] = uVar11;
      uVar11 = puVar12[7];
      auStack_720[lVar20 * 0xe + 1] = puVar12[6];
      auStack_720[lVar20 * 0xe + 2] = uVar11;
      uVar11 = puVar12[9];
      auStack_720[lVar20 * 0xe + 3] = puVar12[8];
      auStack_720[lVar20 * 0xe + 4] = uVar11;
      uVar11 = puVar12[0xb];
      auStack_720[lVar20 * 0xe + 5] = puVar12[10];
      auStack_720[lVar20 * 0xe + 6] = uVar11;
      auStack_720[lVar20 * 0xe + 7] = puVar12[0xc];
      *(undefined1 (*) [16])(puVar12 + 6) = auVar25;
      puVar12[0xc] = local_848;
      *puVar12 = uVar13;
      *(undefined1 *)(puVar12 + 1) = 0;
      *(undefined1 (*) [16])(puVar12 + 2) = auVar27;
      *(undefined1 (*) [16])(puVar12 + 4) = auVar26;
      *(undefined1 (*) [16])(puVar12 + 8) = auVar24;
      puVar12[10] = local_858;
      puVar12[0xb] = uStack_850;
      puVar12[0xe] = uVar16;
      *(bool *)(puVar12 + 0xf) = bVar4;
      *(PrimInfoExtRange (*) [16])(puVar12 + 0x10) = aPVar5;
      *(undefined1 (*) [16])(puVar12 + 0x12) = auVar22;
      *(undefined1 (*) [16])(puVar12 + 0x16) = auVar6;
      *(undefined1 (*) [16])(puVar12 + 0x14) = auVar23;
      puVar12[0x18] = local_7e8;
      puVar12[0x19] = uStack_7e0;
      puVar12[0x1a] = local_7d8;
      if (*param_1 <= uVar19) {
        uVar13 = param_1[7];
        if (param_2[0xb] - param_2[10] <= uVar13) goto LAB_0011d4f5;
        local_740[0] = uStack_6f0 - local_6f8 <= uVar13;
        goto LAB_0011e080;
      }
      uVar13 = param_1[4];
      lVar20 = 0;
      uVar11 = uStack_6f0 - local_6f8;
      if (uVar11 <= uVar13) {
        uVar11 = 0;
        lVar20 = -1;
      }
      uVar16 = uVar11;
      if (uVar11 <= uVar13) {
        uVar16 = uVar13;
      }
      if (uVar16 < (ulong)(lStack_680 - local_688)) {
        lVar20 = 1;
        uVar11 = lStack_680 - local_688;
        if (uVar19 != 2) {
LAB_0011d1f6:
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_610 - local_618)) {
            lVar20 = 2;
            uVar11 = local_610 - local_618;
            if (uVar19 == 3) goto LAB_0011d4a8;
          }
          else if (uVar19 == 3) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_5a0 - local_5a8)) {
            lVar20 = 3;
            uVar11 = local_5a0 - local_5a8;
            if (uVar19 == 4) goto LAB_0011d4a8;
          }
          else if (uVar19 == 4) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_530 - local_538)) {
            lVar20 = 4;
            uVar11 = local_530 - local_538;
            if (uVar19 == 5) goto LAB_0011d4a8;
          }
          else if (uVar19 == 5) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_4c0 - local_4c8)) {
            lVar20 = 5;
            uVar11 = local_4c0 - local_4c8;
            if (uVar19 == 6) goto LAB_0011d4a8;
          }
          else if (uVar19 == 6) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_450 - local_458)) {
            lVar20 = 6;
            uVar11 = local_450 - local_458;
            if (uVar19 == 7) goto LAB_0011d4a8;
          }
          else if (uVar19 == 7) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_3e0 - local_3e8)) {
            lVar20 = 7;
            uVar11 = local_3e0 - local_3e8;
            if (uVar19 == 8) goto LAB_0011d4a8;
          }
          else if (uVar19 == 8) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_370 - local_378)) {
            lVar20 = 8;
            uVar11 = local_370 - local_378;
            if (uVar19 == 9) goto LAB_0011d4a8;
          }
          else if (uVar19 == 9) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_300 - local_308)) {
            lVar20 = 9;
            uVar11 = local_300 - local_308;
            if (uVar19 == 10) goto LAB_0011d4a8;
          }
          else if (uVar19 == 10) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_290 - local_298)) {
            lVar20 = 10;
            uVar11 = local_290 - local_298;
            if (uVar19 == 0xb) goto LAB_0011d4a8;
          }
          else if (uVar19 == 0xb) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_220 - local_228)) {
            lVar20 = 0xb;
            uVar11 = local_220 - local_228;
            if (uVar19 == 0xc) goto LAB_0011d4a8;
          }
          else if (uVar19 == 0xc) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_1b0 - local_1b8)) {
            lVar20 = 0xc;
            uVar11 = local_1b0 - local_1b8;
            if (uVar19 == 0xd) goto LAB_0011d4a8;
          }
          else if (uVar19 == 0xd) goto LAB_0011ded0;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_140 - local_148)) {
            lVar20 = 0xd;
            uVar11 = local_140 - local_148;
            if (uVar19 == 0xe) goto LAB_0011d4a8;
          }
          else if (uVar19 == 0xe) goto LAB_0011ded0;
          uVar16 = local_d0 - local_d8;
          if (uVar11 <= uVar13) {
            uVar11 = uVar13;
          }
          if (uVar11 < uVar16) {
            if (uVar19 == 0x10) {
              if (uVar16 <= uVar13) {
                uVar16 = uVar13;
              }
              lVar20 = (ulong)(uVar16 < (ulong)(local_60 - local_68)) + 0xe;
            }
            else {
              uVar19 = 0xf;
              lVar20 = 0xe;
            }
          }
          else {
            if ((uVar19 != 0x10) || ((ulong)(local_60 - local_68) <= uVar11)) goto LAB_0011ded0;
            lVar20 = 0xf;
          }
        }
      }
      else {
        if (uVar19 != 2) goto LAB_0011d1f6;
LAB_0011ded0:
        if (lVar20 == -1) goto code_r0x0011deda;
      }
LAB_0011d4a8:
      uVar13 = *param_2;
      puVar12 = puVar12 + 0xe;
    } while( true );
  }
  uVar19 = 1;
LAB_0011d4d7:
  uVar13 = param_1[7];
  if ((uVar13 < uVar11 - param_2[10]) &&
     (local_740[0] = uStack_6f0 - local_6f8 <= uVar13, uVar19 != 1)) {
LAB_0011e080:
    local_6d0 = (ulong)(lStack_680 - local_688) <= uVar13;
    if (((uVar19 != 2) &&
        (((local_660 = (ulong)(local_610 - local_618) <= uVar13, uVar19 != 3 &&
          (local_5f0 = (ulong)(local_5a0 - local_5a8) <= uVar13, uVar19 != 4)) &&
         (local_580 = (ulong)(local_530 - local_538) <= uVar13, uVar19 != 5)))) &&
       ((((local_510 = (ulong)(local_4c0 - local_4c8) <= uVar13, uVar19 != 6 &&
          (local_4a0 = (ulong)(local_450 - local_458) <= uVar13, uVar19 != 7)) &&
         (local_430 = (ulong)(local_3e0 - local_3e8) <= uVar13, uVar19 != 8)) &&
        (((local_3c0 = (ulong)(local_370 - local_378) <= uVar13, uVar19 != 9 &&
          (local_350 = (ulong)(local_300 - local_308) <= uVar13, uVar19 != 10)) &&
         (((local_2e0 = (ulong)(local_290 - local_298) <= uVar13, uVar19 != 0xb &&
           (((local_270 = (ulong)(local_220 - local_228) <= uVar13, uVar19 != 0xc &&
             (local_200 = (ulong)(local_1b0 - local_1b8) <= uVar13, uVar19 != 0xd)) &&
            (local_190 = (ulong)(local_140 - local_148) <= uVar13, uVar19 != 0xe)))) &&
          (local_120 = (ulong)(local_d0 - local_d8) <= uVar13, uVar19 != 0xf)))))))) {
      local_b0 = (ulong)(local_60 - local_68) <= uVar13;
    }
  }
LAB_0011d4f5:
  local_8a8 = 0x80;
  uVar13 = *in_stack_00000010;
  if (in_stack_00000008 != *(FastAllocator **)(uVar13 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar13 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xa8) + *(long *)(uVar13 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar13 + 0x98) + *(long *)(uVar13 + 0x58)) -
                           *(long *)(uVar13 + 0x50)) - *(long *)(uVar13 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xb0) + *(long *)(uVar13 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar13 + 0x48) = 0;
    *(undefined8 *)(uVar13 + 0x58) = 0;
    *(undefined8 *)(uVar13 + 0x50) = 0;
    *(undefined8 *)(uVar13 + 0x68) = 0;
    *(undefined8 *)(uVar13 + 0x70) = 0;
    *(undefined8 *)(uVar13 + 0x60) = 0;
    if (in_stack_00000008 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar13 + 0x88) = 0;
      uVar9 = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
    }
    else {
      uVar9 = *(undefined8 *)(in_stack_00000008 + 0x10);
      *(undefined8 *)(uVar13 + 0x88) = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x60) = uVar9;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
      *(undefined8 *)(uVar13 + 0xa0) = 0;
      uVar9 = *(undefined8 *)(in_stack_00000008 + 0x10);
    }
    *(undefined8 *)(uVar13 + 0xa0) = uVar9;
    LOCK();
    *(FastAllocator **)(uVar13 + 8) = in_stack_00000008;
    UNLOCK();
    local_838 = uVar13;
    embree::MutexSys::lock();
    puVar12 = *(ulong **)(in_stack_00000008 + 0x138);
    if (puVar12 == *(ulong **)(in_stack_00000008 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(in_stack_00000008 + 0x130),puVar12,&local_838);
    }
    else {
      *puVar12 = uVar13;
      *(long *)(in_stack_00000008 + 0x138) = *(long *)(in_stack_00000008 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar11 = in_stack_00000010[2];
  in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
  uVar16 = (ulong)(-(int)uVar11 & 0xf);
  uVar13 = uVar11 + 0x80 + uVar16;
  in_stack_00000010[2] = uVar13;
  if (in_stack_00000010[3] < uVar13) {
    in_stack_00000010[2] = uVar11;
    if (in_stack_00000010[4] < 0x200) {
      puVar10 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_8a8,0x40,false);
    }
    else {
      local_838 = in_stack_00000010[4];
      puVar10 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,true);
      in_stack_00000010[1] = (ulong)puVar10;
      uVar13 = in_stack_00000010[2];
      in_stack_00000010[2] = 0x80;
      in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar13;
      in_stack_00000010[3] = local_838;
      if (local_838 < 0x80) {
        in_stack_00000010[2] = 0;
        local_838 = in_stack_00000010[4];
        puVar10 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,false);
        in_stack_00000010[1] = (ulong)puVar10;
        uVar13 = in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar13;
        in_stack_00000010[3] = local_838;
        if (local_838 < 0x80) {
          puVar10 = (undefined8 *)0x0;
          in_stack_00000010[2] = 0;
        }
      }
    }
  }
  else {
    in_stack_00000010[6] = in_stack_00000010[6] + uVar16;
    puVar10 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar13);
  }
  *(undefined4 *)(puVar10 + 4) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x24) = uVar3;
  *(undefined4 *)(puVar10 + 5) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x2c) = uVar3;
  *(undefined4 *)(puVar10 + 8) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x44) = uVar3;
  *(undefined4 *)(puVar10 + 9) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x4c) = uVar3;
  *(undefined4 *)(puVar10 + 4) = (undefined4)local_738;
  *(undefined4 *)(puVar10 + 0xc) = uVar3;
  *(undefined4 *)((long)puVar10 + 100) = uVar3;
  *(undefined4 *)(puVar10 + 0xd) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x6c) = uVar3;
  *(undefined4 *)(puVar10 + 8) = local_738._4_4_;
  *(undefined4 *)(puVar10 + 6) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x34) = uVar2;
  *(undefined4 *)(puVar10 + 7) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x3c) = uVar2;
  *(undefined4 *)(puVar10 + 0xc) = (undefined4)uStack_730;
  *(undefined4 *)(puVar10 + 10) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x54) = uVar2;
  *(undefined4 *)(puVar10 + 0xb) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x5c) = uVar2;
  *(undefined4 *)(puVar10 + 6) = (undefined4)local_728;
  *(undefined4 *)(puVar10 + 0xe) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x74) = uVar2;
  *(undefined4 *)(puVar10 + 0xf) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x7c) = uVar2;
  *(undefined4 *)(puVar10 + 10) = local_728._4_4_;
  *puVar10 = 8;
  puVar10[1] = 8;
  puVar10[2] = 8;
  puVar10[3] = 8;
  *(undefined4 *)(puVar10 + 0xe) = (undefined4)auStack_720[0];
  if (uVar19 != 1) {
    *(undefined4 *)((long)puVar10 + 0x24) = local_6c8;
    *(undefined4 *)((long)puVar10 + 0x44) = uStack_6c4;
    *(undefined4 *)((long)puVar10 + 100) = uStack_6c0;
    *(undefined4 *)((long)puVar10 + 0x34) = local_6b8;
    *(undefined4 *)((long)puVar10 + 0x54) = uStack_6b4;
    *(undefined4 *)((long)puVar10 + 0x74) = uStack_6b0;
    if (uVar19 != 2) {
      *(undefined4 *)(puVar10 + 5) = local_658;
      *(undefined4 *)(puVar10 + 9) = local_654;
      *(undefined4 *)(puVar10 + 0xd) = local_650;
      *(undefined4 *)(puVar10 + 7) = local_648;
      *(undefined4 *)(puVar10 + 0xb) = local_644;
      *(undefined4 *)(puVar10 + 0xf) = local_640;
      if (uVar19 != 3) {
        *(undefined4 *)((long)puVar10 + 0x2c) = local_5e8;
        *(undefined4 *)((long)puVar10 + 0x4c) = local_5e4;
        *(undefined4 *)((long)puVar10 + 0x6c) = local_5e0;
        *(undefined4 *)((long)puVar10 + 0x3c) = local_5d8;
        *(undefined4 *)((long)puVar10 + 0x5c) = local_5d4;
        *(undefined4 *)((long)puVar10 + 0x7c) = local_5d0;
        if (uVar19 != 4) {
          *(undefined4 *)(puVar10 + 6) = local_578;
          *(undefined4 *)(puVar10 + 10) = local_574;
          *(undefined4 *)(puVar10 + 0xe) = local_570;
          *(undefined4 *)(puVar10 + 8) = local_568;
          *(undefined4 *)(puVar10 + 0xc) = local_564;
          *(undefined4 *)(puVar10 + 0x10) = local_560;
          if (uVar19 != 5) {
            *(undefined4 *)((long)puVar10 + 0x34) = local_508;
            *(undefined4 *)((long)puVar10 + 0x54) = local_504;
            *(undefined4 *)((long)puVar10 + 0x74) = local_500;
            *(undefined4 *)((long)puVar10 + 0x44) = local_4f8;
            *(undefined4 *)((long)puVar10 + 100) = local_4f4;
            *(undefined4 *)((long)puVar10 + 0x84) = local_4f0;
            if (uVar19 != 6) {
              *(undefined4 *)(puVar10 + 7) = local_498;
              *(undefined4 *)(puVar10 + 0xb) = local_494;
              *(undefined4 *)(puVar10 + 0xf) = local_490;
              *(undefined4 *)(puVar10 + 9) = local_488;
              *(undefined4 *)(puVar10 + 0xd) = local_484;
              *(undefined4 *)(puVar10 + 0x11) = local_480;
              if (uVar19 != 7) {
                *(undefined4 *)((long)puVar10 + 0x3c) = local_428;
                *(undefined4 *)((long)puVar10 + 0x5c) = local_424;
                *(undefined4 *)((long)puVar10 + 0x7c) = local_420;
                *(undefined4 *)((long)puVar10 + 0x4c) = local_418;
                *(undefined4 *)((long)puVar10 + 0x6c) = local_414;
                *(undefined4 *)((long)puVar10 + 0x8c) = local_410;
                if (uVar19 != 8) {
                  *(undefined4 *)(puVar10 + 8) = local_3b8;
                  *(undefined4 *)(puVar10 + 0xc) = local_3b4;
                  *(undefined4 *)(puVar10 + 0x10) = local_3b0;
                  *(undefined4 *)(puVar10 + 10) = local_3a8;
                  *(undefined4 *)(puVar10 + 0xe) = local_3a4;
                  *(undefined4 *)(puVar10 + 0x12) = local_3a0;
                  if (uVar19 != 9) {
                    *(undefined4 *)((long)puVar10 + 0x44) = local_348;
                    *(undefined4 *)((long)puVar10 + 100) = local_344;
                    *(undefined4 *)((long)puVar10 + 0x84) = local_340;
                    *(undefined4 *)((long)puVar10 + 0x54) = local_338;
                    *(undefined4 *)((long)puVar10 + 0x74) = local_334;
                    *(undefined4 *)((long)puVar10 + 0x94) = local_330;
                    if (uVar19 != 10) {
                      *(undefined4 *)(puVar10 + 9) = local_2d8;
                      *(undefined4 *)(puVar10 + 0xd) = local_2d4;
                      *(undefined4 *)(puVar10 + 0x11) = local_2d0;
                      *(undefined4 *)(puVar10 + 0xb) = local_2c8;
                      *(undefined4 *)(puVar10 + 0xf) = local_2c4;
                      *(undefined4 *)(puVar10 + 0x13) = local_2c0;
                      if (uVar19 != 0xb) {
                        *(undefined4 *)((long)puVar10 + 0x4c) = local_268;
                        *(undefined4 *)((long)puVar10 + 0x6c) = local_264;
                        *(undefined4 *)((long)puVar10 + 0x8c) = local_260;
                        *(undefined4 *)((long)puVar10 + 0x5c) = local_258;
                        *(undefined4 *)((long)puVar10 + 0x7c) = local_254;
                        *(undefined4 *)((long)puVar10 + 0x9c) = local_250;
                        if (uVar19 != 0xc) {
                          *(undefined4 *)(puVar10 + 10) = local_1f8;
                          *(undefined4 *)(puVar10 + 0xe) = local_1f4;
                          *(undefined4 *)(puVar10 + 0x12) = local_1f0;
                          *(undefined4 *)(puVar10 + 0xc) = local_1e8;
                          *(undefined4 *)(puVar10 + 0x10) = local_1e4;
                          *(undefined4 *)(puVar10 + 0x14) = local_1e0;
                          if (uVar19 != 0xd) {
                            *(undefined4 *)((long)puVar10 + 0x54) = local_188;
                            *(undefined4 *)((long)puVar10 + 0x74) = local_184;
                            *(undefined4 *)((long)puVar10 + 0x94) = local_180;
                            *(undefined4 *)((long)puVar10 + 100) = local_178;
                            *(undefined4 *)((long)puVar10 + 0x84) = local_174;
                            *(undefined4 *)((long)puVar10 + 0xa4) = local_170;
                            if (uVar19 != 0xe) {
                              *(undefined4 *)(puVar10 + 0xb) = local_118;
                              *(undefined4 *)(puVar10 + 0xf) = local_114;
                              *(undefined4 *)(puVar10 + 0x13) = local_110;
                              *(undefined4 *)(puVar10 + 0xd) = local_108;
                              *(undefined4 *)(puVar10 + 0x11) = local_104;
                              *(undefined4 *)(puVar10 + 0x15) = local_100;
                              if (uVar19 != 0xf) {
                                *(undefined4 *)((long)puVar10 + 0x5c) = local_a8;
                                *(undefined4 *)((long)puVar10 + 0x7c) = local_a4;
                                *(undefined4 *)((long)puVar10 + 0x9c) = local_a0;
                                *(undefined4 *)((long)puVar10 + 0x6c) = local_98;
                                *(undefined4 *)((long)puVar10 + 0x8c) = local_94;
                                *(undefined4 *)((long)puVar10 + 0xac) = local_90;
                                if (uVar19 == 0x11) {
                                  *(undefined4 *)(puVar10 + 0x10) = local_34;
                                  *(undefined4 *)(puVar10 + 0x14) = unaff_EBX;
                                  *(undefined4 *)(puVar10 + 0xc) = local_38;
                                  *(int *)(puVar10 + 0xe) = (int)unaff_RBP;
                                  *(int *)(puVar10 + 0x12) = (int)((ulong)unaff_RBP >> 0x20);
                                  *(undefined4 *)(puVar10 + 0x16) = unaff_R12D;
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  uVar13 = 0;
  puVar12 = &local_748;
  do {
    uVar9 = createLargeLeaf(param_1,puVar12);
    auStack_7d0[uVar13 + 1] = uVar9;
    uVar13 = uVar13 + 1;
    puVar12 = puVar12 + 0xe;
  } while (uVar13 != uVar19);
  *puVar10 = auStack_7d0[1];
  uVar11 = uVar13 * 8 & 0xffffffff;
  *(undefined8 *)((long)puVar10 + (uVar11 - 8)) = *(undefined8 *)((long)auStack_7d0 + uVar11);
  lVar20 = (long)puVar10 - (long)((ulong)(puVar10 + 1) & 0xfffffffffffffff8);
  puVar14 = (undefined8 *)((long)auStack_7d0 + (8 - lVar20));
  puVar15 = (undefined8 *)((ulong)(puVar10 + 1) & 0xfffffffffffffff8);
  for (uVar13 = (ulong)((uint)((int)(uVar13 * 8) + (int)lVar20) >> 3); uVar13 != 0;
      uVar13 = uVar13 - 1) {
    *puVar15 = *puVar14;
    puVar14 = puVar14 + (ulong)bVar21 * -2 + 1;
    puVar15 = puVar15 + (ulong)bVar21 * -2 + 1;
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar10;
  }
LAB_0011e47c:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
code_r0x0011deda:
  uVar11 = param_2[0xb];
  goto LAB_0011d4d7;
}



/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::createLargeLeaf(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >
   const&, embree::FastAllocator::CachedAllocator) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::createLargeLeaf(ulong *param_1,ulong *param_2)

{
  long *plVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  bool bVar4;
  PrimInfoExtRange aPVar5 [16];
  undefined1 auVar6 [16];
  undefined1 (*pauVar7) [16];
  undefined1 (*pauVar8) [16];
  undefined8 uVar9;
  undefined8 *puVar10;
  ulong uVar11;
  undefined4 unaff_EBX;
  ulong *puVar12;
  undefined8 unaff_RBP;
  ulong uVar13;
  undefined8 *puVar14;
  undefined8 *puVar15;
  ulong uVar16;
  PrimInfoExtRange *pPVar17;
  PrimInfoExtRange *pPVar18;
  undefined4 unaff_R12D;
  ulong uVar19;
  long lVar20;
  long in_FS_OFFSET;
  byte bVar21;
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  undefined1 auVar26 [16];
  undefined1 auVar27 [16];
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  undefined8 in_stack_00000018;
  ulong local_8a8;
  undefined1 local_8a0;
  PrimInfoExtRange local_898 [16];
  undefined1 local_888 [16];
  undefined1 local_878 [16];
  undefined1 local_868 [16];
  ulong local_858;
  ulong uStack_850;
  ulong local_848;
  ulong local_838;
  bool local_830 [8];
  PrimInfoExtRange local_828 [16];
  undefined1 local_818 [16];
  undefined1 local_808 [16];
  undefined1 local_7f8 [16];
  ulong local_7e8;
  ulong uStack_7e0;
  ulong local_7d8;
  undefined8 auStack_7d0 [17];
  ulong local_748;
  bool local_740 [8];
  undefined8 local_738;
  ulong uStack_730;
  undefined8 local_728;
  ulong auStack_720 [4];
  ulong uStack_700;
  ulong local_6f8;
  ulong uStack_6f0;
  ulong local_6e8;
  undefined1 local_6d0;
  undefined4 local_6c8;
  undefined4 uStack_6c4;
  undefined4 uStack_6c0;
  undefined4 local_6b8;
  undefined4 uStack_6b4;
  undefined4 uStack_6b0;
  long local_688;
  long lStack_680;
  undefined1 local_660;
  undefined4 local_658;
  undefined4 local_654;
  undefined4 local_650;
  undefined4 local_648;
  undefined4 local_644;
  undefined4 local_640;
  long local_618;
  long local_610;
  undefined1 local_5f0;
  undefined4 local_5e8;
  undefined4 local_5e4;
  undefined4 local_5e0;
  undefined4 local_5d8;
  undefined4 local_5d4;
  undefined4 local_5d0;
  long local_5a8;
  long local_5a0;
  undefined1 local_580;
  undefined4 local_578;
  undefined4 local_574;
  undefined4 local_570;
  undefined4 local_568;
  undefined4 local_564;
  undefined4 local_560;
  long local_538;
  long local_530;
  undefined1 local_510;
  undefined4 local_508;
  undefined4 local_504;
  undefined4 local_500;
  undefined4 local_4f8;
  undefined4 local_4f4;
  undefined4 local_4f0;
  long local_4c8;
  long local_4c0;
  undefined1 local_4a0;
  undefined4 local_498;
  undefined4 local_494;
  undefined4 local_490;
  undefined4 local_488;
  undefined4 local_484;
  undefined4 local_480;
  long local_458;
  long local_450;
  undefined1 local_430;
  undefined4 local_428;
  undefined4 local_424;
  undefined4 local_420;
  undefined4 local_418;
  undefined4 local_414;
  undefined4 local_410;
  long local_3e8;
  long local_3e0;
  undefined1 local_3c0;
  undefined4 local_3b8;
  undefined4 local_3b4;
  undefined4 local_3b0;
  undefined4 local_3a8;
  undefined4 local_3a4;
  undefined4 local_3a0;
  long local_378;
  long local_370;
  undefined1 local_350;
  undefined4 local_348;
  undefined4 local_344;
  undefined4 local_340;
  undefined4 local_338;
  undefined4 local_334;
  undefined4 local_330;
  long local_308;
  long local_300;
  undefined1 local_2e0;
  undefined4 local_2d8;
  undefined4 local_2d4;
  undefined4 local_2d0;
  undefined4 local_2c8;
  undefined4 local_2c4;
  undefined4 local_2c0;
  long local_298;
  long local_290;
  undefined1 local_270;
  undefined4 local_268;
  undefined4 local_264;
  undefined4 local_260;
  undefined4 local_258;
  undefined4 local_254;
  undefined4 local_250;
  long local_228;
  long local_220;
  undefined1 local_200;
  undefined4 local_1f8;
  undefined4 local_1f4;
  undefined4 local_1f0;
  undefined4 local_1e8;
  undefined4 local_1e4;
  undefined4 local_1e0;
  long local_1b8;
  long local_1b0;
  undefined1 local_190;
  undefined4 local_188;
  undefined4 local_184;
  undefined4 local_180;
  undefined4 local_178;
  undefined4 local_174;
  undefined4 local_170;
  long local_148;
  long local_140;
  undefined1 local_120;
  undefined4 local_118;
  undefined4 local_114;
  undefined4 local_110;
  undefined4 local_108;
  undefined4 local_104;
  undefined4 local_100;
  long local_d8;
  long local_d0;
  undefined1 local_b0;
  undefined4 local_a8;
  undefined4 local_a4;
  undefined4 local_a0;
  undefined4 local_98;
  undefined4 local_94;
  undefined4 local_90;
  long local_68;
  long local_60;
  long local_40;
  undefined4 local_38;
  undefined4 local_34;
  
  uVar3 = _LC3;
  uVar2 = _LC1;
  bVar21 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar13 = *param_2;
  if (param_1[1] < uVar13) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar11 = param_2[0xb];
  if (uVar11 - param_2[10] <= param_1[4]) {
    if (*(long *)(in_FS_OFFSET + 0x28) == *(long *)(in_FS_OFFSET + 0x28)) {
      puVar10 = (undefined8 *)
                BVHBuilderBinnedFastSpatialSAH::
                CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>
                ::operator()(param_1[0xd],param_1[8],param_2 + 10,in_stack_00000008,
                             in_stack_00000018);
      return puVar10;
    }
    goto LAB_0011fbbc;
  }
  local_748 = uVar13;
  local_738 = param_2[2];
  uStack_730 = param_2[3];
  local_740[0] = (bool)(char)param_2[1];
  local_728 = param_2[4];
  auStack_720[0] = param_2[5];
  local_6e8 = param_2[0xc];
  auStack_720[1] = param_2[6];
  auStack_720[2] = param_2[7];
  auStack_720[3] = param_2[8];
  uStack_700 = param_2[9];
  local_6f8 = param_2[10];
  uStack_6f0 = param_2[0xb];
  if (param_1[4] < param_2[0xb] - param_2[10]) {
    uVar19 = 1;
    lVar20 = 0;
    puVar12 = &local_748;
    do {
      uVar13 = uVar13 + 1;
      local_8a0 = 0;
      pPVar17 = (PrimInfoExtRange *)param_1[9];
      local_858 = auStack_720[lVar20 * 0xe + 5];
      uStack_7e0 = auStack_720[lVar20 * 0xe + 6];
      local_830[0] = false;
      uStack_850 = local_858 + uStack_7e0 >> 1;
      if (local_858 < uStack_850) {
        uVar11 = 0;
        auVar24._4_4_ = uVar2;
        auVar24._0_4_ = uVar2;
        auVar24._8_4_ = uVar2;
        auVar24._12_4_ = uVar2;
        auVar25._4_4_ = uVar3;
        auVar25._0_4_ = uVar3;
        auVar25._8_4_ = uVar3;
        auVar25._12_4_ = uVar3;
        auVar26._4_4_ = uVar2;
        auVar26._0_4_ = uVar2;
        auVar26._8_4_ = uVar2;
        auVar26._12_4_ = uVar2;
        auVar27._4_4_ = uVar3;
        auVar27._0_4_ = uVar3;
        auVar27._8_4_ = uVar3;
        auVar27._12_4_ = uVar3;
        pauVar8 = (undefined1 (*) [16])(local_858 * 0x20 + *(long *)pPVar17);
        do {
          pauVar7 = pauVar8 + 2;
          auVar22._0_4_ = *(float *)pauVar8[1] + *(float *)*pauVar8;
          auVar22._4_4_ = *(float *)(pauVar8[1] + 4) + *(float *)(*pauVar8 + 4);
          auVar22._8_4_ = *(float *)(pauVar8[1] + 8) + *(float *)(*pauVar8 + 8);
          auVar22._12_4_ = *(float *)(pauVar8[1] + 0xc) + *(float *)(*pauVar8 + 0xc);
          auVar27 = minps(auVar27,*pauVar8);
          auVar26 = maxps(auVar26,pauVar8[1]);
          uVar11 = uVar11 + (*(uint *)(*pauVar8 + 0xc) >> 0x1b);
          auVar25 = minps(auVar25,auVar22);
          auVar24 = maxps(auVar24,auVar22);
          pauVar8 = pauVar7;
        } while (pauVar7 != (undefined1 (*) [16])(*(long *)pPVar17 + uStack_850 * 0x20));
      }
      else {
        auVar24._4_4_ = uVar2;
        auVar24._0_4_ = uVar2;
        auVar24._8_4_ = uVar2;
        auVar24._12_4_ = uVar2;
        auVar25._4_4_ = uVar3;
        auVar25._0_4_ = uVar3;
        auVar25._8_4_ = uVar3;
        auVar25._12_4_ = uVar3;
        auVar26._4_4_ = uVar2;
        auVar26._0_4_ = uVar2;
        auVar26._8_4_ = uVar2;
        auVar26._12_4_ = uVar2;
        uVar11 = 0;
        auVar27._4_4_ = uVar3;
        auVar27._0_4_ = uVar3;
        auVar27._8_4_ = uVar3;
        auVar27._12_4_ = uVar3;
      }
      if (uStack_850 < uStack_7e0) {
        uVar16 = 0;
        local_7f8._4_4_ = uVar2;
        local_7f8._0_4_ = uVar2;
        local_7f8._8_4_ = uVar2;
        local_7f8._12_4_ = uVar2;
        local_808._4_4_ = uVar3;
        local_808._0_4_ = uVar3;
        local_808._8_4_ = uVar3;
        local_808._12_4_ = uVar3;
        local_818._4_4_ = uVar2;
        local_818._0_4_ = uVar2;
        local_818._8_4_ = uVar2;
        local_818._12_4_ = uVar2;
        local_828._4_4_ = uVar3;
        local_828._0_4_ = uVar3;
        local_828._8_4_ = uVar3;
        local_828._12_4_ = uVar3;
        pauVar8 = (undefined1 (*) [16])(uStack_850 * 0x20 + *(long *)pPVar17);
        do {
          pauVar7 = pauVar8 + 2;
          auVar23._0_4_ = *(float *)pauVar8[1] + *(float *)*pauVar8;
          auVar23._4_4_ = *(float *)(pauVar8[1] + 4) + *(float *)(*pauVar8 + 4);
          auVar23._8_4_ = *(float *)(pauVar8[1] + 8) + *(float *)(*pauVar8 + 8);
          auVar23._12_4_ = *(float *)(pauVar8[1] + 0xc) + *(float *)(*pauVar8 + 0xc);
          local_828 = (PrimInfoExtRange  [16])minps((undefined1  [16])local_828,*pauVar8);
          local_818 = maxps(local_818,pauVar8[1]);
          uVar16 = uVar16 + (*(uint *)(*pauVar8 + 0xc) >> 0x1b);
          local_808 = minps(local_808,auVar23);
          local_7f8 = maxps(local_7f8,auVar23);
          pauVar8 = pauVar7;
        } while (pauVar7 != (undefined1 (*) [16])(*(long *)pPVar17 + uStack_7e0 * 0x20));
      }
      else {
        local_7f8._4_4_ = uVar2;
        local_7f8._0_4_ = uVar2;
        local_7f8._8_4_ = uVar2;
        local_7f8._12_4_ = uVar2;
        local_808._4_4_ = uVar3;
        local_808._0_4_ = uVar3;
        local_808._8_4_ = uVar3;
        local_808._12_4_ = uVar3;
        local_818._4_4_ = uVar2;
        local_818._0_4_ = uVar2;
        local_818._8_4_ = uVar2;
        local_818._12_4_ = uVar2;
        uVar16 = 0;
        local_828._4_4_ = uVar3;
        local_828._0_4_ = uVar3;
        local_828._8_4_ = uVar3;
        local_828._12_4_ = uVar3;
      }
      local_898 = (PrimInfoExtRange  [16])auVar27;
      local_888 = auVar26;
      local_878 = auVar25;
      local_868 = auVar24;
      local_848 = uStack_850;
      local_838 = uVar13;
      local_7e8 = uStack_850;
      local_7d8 = uStack_7e0;
      if (uStack_7e0 != auStack_720[lVar20 * 0xe + 7]) {
        pPVar18 = local_898;
        local_8a8 = uVar13;
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        setExtentedRanges((PrimInfoExtRange *)(&local_738 + lVar20 * 0xe),pPVar18,local_828,uVar11,
                          uVar16);
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        moveExtentedRange(pPVar17,pPVar18,local_828);
      }
      auVar6 = local_7f8;
      auVar23 = local_808;
      auVar22 = local_818;
      aPVar5 = local_828;
      bVar4 = local_830[0];
      uVar16 = local_838;
      uVar19 = uVar19 + 1;
      *(ulong *)(local_740 + lVar20 * 0x70 + -8) = *puVar12;
      local_740[lVar20 * 0x70] = SUB81(puVar12[1],0);
      uVar11 = puVar12[3];
      (&local_738)[lVar20 * 0xe] = puVar12[2];
      (&uStack_730)[lVar20 * 0xe] = uVar11;
      uVar11 = puVar12[5];
      (&local_728)[lVar20 * 0xe] = puVar12[4];
      auStack_720[lVar20 * 0xe] = uVar11;
      uVar11 = puVar12[7];
      auStack_720[lVar20 * 0xe + 1] = puVar12[6];
      auStack_720[lVar20 * 0xe + 2] = uVar11;
      uVar11 = puVar12[9];
      auStack_720[lVar20 * 0xe + 3] = puVar12[8];
      auStack_720[lVar20 * 0xe + 4] = uVar11;
      uVar11 = puVar12[0xb];
      auStack_720[lVar20 * 0xe + 5] = puVar12[10];
      auStack_720[lVar20 * 0xe + 6] = uVar11;
      auStack_720[lVar20 * 0xe + 7] = puVar12[0xc];
      *(undefined1 (*) [16])(puVar12 + 6) = auVar25;
      puVar12[0xc] = local_848;
      *puVar12 = uVar13;
      *(undefined1 *)(puVar12 + 1) = 0;
      *(undefined1 (*) [16])(puVar12 + 2) = auVar27;
      *(undefined1 (*) [16])(puVar12 + 4) = auVar26;
      *(undefined1 (*) [16])(puVar12 + 8) = auVar24;
      puVar12[10] = local_858;
      puVar12[0xb] = uStack_850;
      puVar12[0xe] = uVar16;
      *(bool *)(puVar12 + 0xf) = bVar4;
      *(PrimInfoExtRange (*) [16])(puVar12 + 0x10) = aPVar5;
      *(undefined1 (*) [16])(puVar12 + 0x12) = auVar22;
      *(undefined1 (*) [16])(puVar12 + 0x16) = auVar6;
      *(undefined1 (*) [16])(puVar12 + 0x14) = auVar23;
      puVar12[0x18] = local_7e8;
      puVar12[0x19] = uStack_7e0;
      puVar12[0x1a] = local_7d8;
      if (*param_1 <= uVar19) {
        uVar13 = param_1[7];
        if (param_2[0xb] - param_2[10] <= uVar13) goto LAB_0011ec35;
        local_740[0] = uStack_6f0 - local_6f8 <= uVar13;
        goto LAB_0011f7c0;
      }
      uVar13 = param_1[4];
      lVar20 = 0;
      uVar11 = uStack_6f0 - local_6f8;
      if (uVar11 <= uVar13) {
        uVar11 = 0;
        lVar20 = -1;
      }
      uVar16 = uVar11;
      if (uVar11 <= uVar13) {
        uVar16 = uVar13;
      }
      if (uVar16 < (ulong)(lStack_680 - local_688)) {
        lVar20 = 1;
        uVar11 = lStack_680 - local_688;
        if (uVar19 != 2) {
LAB_0011e936:
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_610 - local_618)) {
            lVar20 = 2;
            uVar11 = local_610 - local_618;
            if (uVar19 == 3) goto LAB_0011ebe8;
          }
          else if (uVar19 == 3) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_5a0 - local_5a8)) {
            lVar20 = 3;
            uVar11 = local_5a0 - local_5a8;
            if (uVar19 == 4) goto LAB_0011ebe8;
          }
          else if (uVar19 == 4) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_530 - local_538)) {
            lVar20 = 4;
            uVar11 = local_530 - local_538;
            if (uVar19 == 5) goto LAB_0011ebe8;
          }
          else if (uVar19 == 5) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_4c0 - local_4c8)) {
            lVar20 = 5;
            uVar11 = local_4c0 - local_4c8;
            if (uVar19 == 6) goto LAB_0011ebe8;
          }
          else if (uVar19 == 6) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_450 - local_458)) {
            lVar20 = 6;
            uVar11 = local_450 - local_458;
            if (uVar19 == 7) goto LAB_0011ebe8;
          }
          else if (uVar19 == 7) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_3e0 - local_3e8)) {
            lVar20 = 7;
            uVar11 = local_3e0 - local_3e8;
            if (uVar19 == 8) goto LAB_0011ebe8;
          }
          else if (uVar19 == 8) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_370 - local_378)) {
            lVar20 = 8;
            uVar11 = local_370 - local_378;
            if (uVar19 == 9) goto LAB_0011ebe8;
          }
          else if (uVar19 == 9) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_300 - local_308)) {
            lVar20 = 9;
            uVar11 = local_300 - local_308;
            if (uVar19 == 10) goto LAB_0011ebe8;
          }
          else if (uVar19 == 10) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_290 - local_298)) {
            lVar20 = 10;
            uVar11 = local_290 - local_298;
            if (uVar19 == 0xb) goto LAB_0011ebe8;
          }
          else if (uVar19 == 0xb) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_220 - local_228)) {
            lVar20 = 0xb;
            uVar11 = local_220 - local_228;
            if (uVar19 == 0xc) goto LAB_0011ebe8;
          }
          else if (uVar19 == 0xc) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_1b0 - local_1b8)) {
            lVar20 = 0xc;
            uVar11 = local_1b0 - local_1b8;
            if (uVar19 == 0xd) goto LAB_0011ebe8;
          }
          else if (uVar19 == 0xd) goto LAB_0011f610;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_140 - local_148)) {
            lVar20 = 0xd;
            uVar11 = local_140 - local_148;
            if (uVar19 == 0xe) goto LAB_0011ebe8;
          }
          else if (uVar19 == 0xe) goto LAB_0011f610;
          uVar16 = local_d0 - local_d8;
          if (uVar11 <= uVar13) {
            uVar11 = uVar13;
          }
          if (uVar11 < uVar16) {
            if (uVar19 == 0x10) {
              if (uVar16 <= uVar13) {
                uVar16 = uVar13;
              }
              lVar20 = (ulong)(uVar16 < (ulong)(local_60 - local_68)) + 0xe;
            }
            else {
              uVar19 = 0xf;
              lVar20 = 0xe;
            }
          }
          else {
            if ((uVar19 != 0x10) || ((ulong)(local_60 - local_68) <= uVar11)) goto LAB_0011f610;
            lVar20 = 0xf;
          }
        }
      }
      else {
        if (uVar19 != 2) goto LAB_0011e936;
LAB_0011f610:
        if (lVar20 == -1) goto code_r0x0011f61a;
      }
LAB_0011ebe8:
      uVar13 = *param_2;
      puVar12 = puVar12 + 0xe;
    } while( true );
  }
  uVar19 = 1;
LAB_0011ec17:
  uVar13 = param_1[7];
  if ((uVar13 < uVar11 - param_2[10]) &&
     (local_740[0] = uStack_6f0 - local_6f8 <= uVar13, uVar19 != 1)) {
LAB_0011f7c0:
    local_6d0 = (ulong)(lStack_680 - local_688) <= uVar13;
    if (((uVar19 != 2) &&
        (((local_660 = (ulong)(local_610 - local_618) <= uVar13, uVar19 != 3 &&
          (local_5f0 = (ulong)(local_5a0 - local_5a8) <= uVar13, uVar19 != 4)) &&
         (local_580 = (ulong)(local_530 - local_538) <= uVar13, uVar19 != 5)))) &&
       ((((local_510 = (ulong)(local_4c0 - local_4c8) <= uVar13, uVar19 != 6 &&
          (local_4a0 = (ulong)(local_450 - local_458) <= uVar13, uVar19 != 7)) &&
         (local_430 = (ulong)(local_3e0 - local_3e8) <= uVar13, uVar19 != 8)) &&
        (((local_3c0 = (ulong)(local_370 - local_378) <= uVar13, uVar19 != 9 &&
          (local_350 = (ulong)(local_300 - local_308) <= uVar13, uVar19 != 10)) &&
         (((local_2e0 = (ulong)(local_290 - local_298) <= uVar13, uVar19 != 0xb &&
           (((local_270 = (ulong)(local_220 - local_228) <= uVar13, uVar19 != 0xc &&
             (local_200 = (ulong)(local_1b0 - local_1b8) <= uVar13, uVar19 != 0xd)) &&
            (local_190 = (ulong)(local_140 - local_148) <= uVar13, uVar19 != 0xe)))) &&
          (local_120 = (ulong)(local_d0 - local_d8) <= uVar13, uVar19 != 0xf)))))))) {
      local_b0 = (ulong)(local_60 - local_68) <= uVar13;
    }
  }
LAB_0011ec35:
  local_8a8 = 0x80;
  uVar13 = *in_stack_00000010;
  if (in_stack_00000008 != *(FastAllocator **)(uVar13 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar13 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xa8) + *(long *)(uVar13 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar13 + 0x98) + *(long *)(uVar13 + 0x58)) -
                           *(long *)(uVar13 + 0x50)) - *(long *)(uVar13 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xb0) + *(long *)(uVar13 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar13 + 0x48) = 0;
    *(undefined8 *)(uVar13 + 0x58) = 0;
    *(undefined8 *)(uVar13 + 0x50) = 0;
    *(undefined8 *)(uVar13 + 0x68) = 0;
    *(undefined8 *)(uVar13 + 0x70) = 0;
    *(undefined8 *)(uVar13 + 0x60) = 0;
    if (in_stack_00000008 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar13 + 0x88) = 0;
      uVar9 = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
    }
    else {
      uVar9 = *(undefined8 *)(in_stack_00000008 + 0x10);
      *(undefined8 *)(uVar13 + 0x88) = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x60) = uVar9;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
      *(undefined8 *)(uVar13 + 0xa0) = 0;
      uVar9 = *(undefined8 *)(in_stack_00000008 + 0x10);
    }
    *(undefined8 *)(uVar13 + 0xa0) = uVar9;
    LOCK();
    *(FastAllocator **)(uVar13 + 8) = in_stack_00000008;
    UNLOCK();
    local_838 = uVar13;
    embree::MutexSys::lock();
    puVar12 = *(ulong **)(in_stack_00000008 + 0x138);
    if (puVar12 == *(ulong **)(in_stack_00000008 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(in_stack_00000008 + 0x130),puVar12,&local_838);
    }
    else {
      *puVar12 = uVar13;
      *(long *)(in_stack_00000008 + 0x138) = *(long *)(in_stack_00000008 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar11 = in_stack_00000010[2];
  in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
  uVar16 = (ulong)(-(int)uVar11 & 0xf);
  uVar13 = uVar11 + 0x80 + uVar16;
  in_stack_00000010[2] = uVar13;
  if (in_stack_00000010[3] < uVar13) {
    in_stack_00000010[2] = uVar11;
    if (in_stack_00000010[4] < 0x200) {
      puVar10 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_8a8,0x40,false);
    }
    else {
      local_838 = in_stack_00000010[4];
      puVar10 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,true);
      in_stack_00000010[1] = (ulong)puVar10;
      uVar13 = in_stack_00000010[2];
      in_stack_00000010[2] = 0x80;
      in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar13;
      in_stack_00000010[3] = local_838;
      if (local_838 < 0x80) {
        in_stack_00000010[2] = 0;
        local_838 = in_stack_00000010[4];
        puVar10 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,false);
        in_stack_00000010[1] = (ulong)puVar10;
        uVar13 = in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar13;
        in_stack_00000010[3] = local_838;
        if (local_838 < 0x80) {
          puVar10 = (undefined8 *)0x0;
          in_stack_00000010[2] = 0;
        }
      }
    }
  }
  else {
    in_stack_00000010[6] = in_stack_00000010[6] + uVar16;
    puVar10 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar13);
  }
  *(undefined4 *)(puVar10 + 4) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x24) = uVar3;
  *(undefined4 *)(puVar10 + 5) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x2c) = uVar3;
  *(undefined4 *)(puVar10 + 8) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x44) = uVar3;
  *(undefined4 *)(puVar10 + 9) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x4c) = uVar3;
  *(undefined4 *)(puVar10 + 4) = (undefined4)local_738;
  *(undefined4 *)(puVar10 + 0xc) = uVar3;
  *(undefined4 *)((long)puVar10 + 100) = uVar3;
  *(undefined4 *)(puVar10 + 0xd) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x6c) = uVar3;
  *(undefined4 *)(puVar10 + 8) = local_738._4_4_;
  *(undefined4 *)(puVar10 + 6) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x34) = uVar2;
  *(undefined4 *)(puVar10 + 7) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x3c) = uVar2;
  *(undefined4 *)(puVar10 + 0xc) = (undefined4)uStack_730;
  *(undefined4 *)(puVar10 + 10) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x54) = uVar2;
  *(undefined4 *)(puVar10 + 0xb) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x5c) = uVar2;
  *(undefined4 *)(puVar10 + 6) = (undefined4)local_728;
  *(undefined4 *)(puVar10 + 0xe) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x74) = uVar2;
  *(undefined4 *)(puVar10 + 0xf) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x7c) = uVar2;
  *(undefined4 *)(puVar10 + 10) = local_728._4_4_;
  *puVar10 = 8;
  puVar10[1] = 8;
  puVar10[2] = 8;
  puVar10[3] = 8;
  *(undefined4 *)(puVar10 + 0xe) = (undefined4)auStack_720[0];
  if (uVar19 != 1) {
    *(undefined4 *)((long)puVar10 + 0x24) = local_6c8;
    *(undefined4 *)((long)puVar10 + 0x44) = uStack_6c4;
    *(undefined4 *)((long)puVar10 + 100) = uStack_6c0;
    *(undefined4 *)((long)puVar10 + 0x34) = local_6b8;
    *(undefined4 *)((long)puVar10 + 0x54) = uStack_6b4;
    *(undefined4 *)((long)puVar10 + 0x74) = uStack_6b0;
    if (uVar19 != 2) {
      *(undefined4 *)(puVar10 + 5) = local_658;
      *(undefined4 *)(puVar10 + 9) = local_654;
      *(undefined4 *)(puVar10 + 0xd) = local_650;
      *(undefined4 *)(puVar10 + 7) = local_648;
      *(undefined4 *)(puVar10 + 0xb) = local_644;
      *(undefined4 *)(puVar10 + 0xf) = local_640;
      if (uVar19 != 3) {
        *(undefined4 *)((long)puVar10 + 0x2c) = local_5e8;
        *(undefined4 *)((long)puVar10 + 0x4c) = local_5e4;
        *(undefined4 *)((long)puVar10 + 0x6c) = local_5e0;
        *(undefined4 *)((long)puVar10 + 0x3c) = local_5d8;
        *(undefined4 *)((long)puVar10 + 0x5c) = local_5d4;
        *(undefined4 *)((long)puVar10 + 0x7c) = local_5d0;
        if (uVar19 != 4) {
          *(undefined4 *)(puVar10 + 6) = local_578;
          *(undefined4 *)(puVar10 + 10) = local_574;
          *(undefined4 *)(puVar10 + 0xe) = local_570;
          *(undefined4 *)(puVar10 + 8) = local_568;
          *(undefined4 *)(puVar10 + 0xc) = local_564;
          *(undefined4 *)(puVar10 + 0x10) = local_560;
          if (uVar19 != 5) {
            *(undefined4 *)((long)puVar10 + 0x34) = local_508;
            *(undefined4 *)((long)puVar10 + 0x54) = local_504;
            *(undefined4 *)((long)puVar10 + 0x74) = local_500;
            *(undefined4 *)((long)puVar10 + 0x44) = local_4f8;
            *(undefined4 *)((long)puVar10 + 100) = local_4f4;
            *(undefined4 *)((long)puVar10 + 0x84) = local_4f0;
            if (uVar19 != 6) {
              *(undefined4 *)(puVar10 + 7) = local_498;
              *(undefined4 *)(puVar10 + 0xb) = local_494;
              *(undefined4 *)(puVar10 + 0xf) = local_490;
              *(undefined4 *)(puVar10 + 9) = local_488;
              *(undefined4 *)(puVar10 + 0xd) = local_484;
              *(undefined4 *)(puVar10 + 0x11) = local_480;
              if (uVar19 != 7) {
                *(undefined4 *)((long)puVar10 + 0x3c) = local_428;
                *(undefined4 *)((long)puVar10 + 0x5c) = local_424;
                *(undefined4 *)((long)puVar10 + 0x7c) = local_420;
                *(undefined4 *)((long)puVar10 + 0x4c) = local_418;
                *(undefined4 *)((long)puVar10 + 0x6c) = local_414;
                *(undefined4 *)((long)puVar10 + 0x8c) = local_410;
                if (uVar19 != 8) {
                  *(undefined4 *)(puVar10 + 8) = local_3b8;
                  *(undefined4 *)(puVar10 + 0xc) = local_3b4;
                  *(undefined4 *)(puVar10 + 0x10) = local_3b0;
                  *(undefined4 *)(puVar10 + 10) = local_3a8;
                  *(undefined4 *)(puVar10 + 0xe) = local_3a4;
                  *(undefined4 *)(puVar10 + 0x12) = local_3a0;
                  if (uVar19 != 9) {
                    *(undefined4 *)((long)puVar10 + 0x44) = local_348;
                    *(undefined4 *)((long)puVar10 + 100) = local_344;
                    *(undefined4 *)((long)puVar10 + 0x84) = local_340;
                    *(undefined4 *)((long)puVar10 + 0x54) = local_338;
                    *(undefined4 *)((long)puVar10 + 0x74) = local_334;
                    *(undefined4 *)((long)puVar10 + 0x94) = local_330;
                    if (uVar19 != 10) {
                      *(undefined4 *)(puVar10 + 9) = local_2d8;
                      *(undefined4 *)(puVar10 + 0xd) = local_2d4;
                      *(undefined4 *)(puVar10 + 0x11) = local_2d0;
                      *(undefined4 *)(puVar10 + 0xb) = local_2c8;
                      *(undefined4 *)(puVar10 + 0xf) = local_2c4;
                      *(undefined4 *)(puVar10 + 0x13) = local_2c0;
                      if (uVar19 != 0xb) {
                        *(undefined4 *)((long)puVar10 + 0x4c) = local_268;
                        *(undefined4 *)((long)puVar10 + 0x6c) = local_264;
                        *(undefined4 *)((long)puVar10 + 0x8c) = local_260;
                        *(undefined4 *)((long)puVar10 + 0x5c) = local_258;
                        *(undefined4 *)((long)puVar10 + 0x7c) = local_254;
                        *(undefined4 *)((long)puVar10 + 0x9c) = local_250;
                        if (uVar19 != 0xc) {
                          *(undefined4 *)(puVar10 + 10) = local_1f8;
                          *(undefined4 *)(puVar10 + 0xe) = local_1f4;
                          *(undefined4 *)(puVar10 + 0x12) = local_1f0;
                          *(undefined4 *)(puVar10 + 0xc) = local_1e8;
                          *(undefined4 *)(puVar10 + 0x10) = local_1e4;
                          *(undefined4 *)(puVar10 + 0x14) = local_1e0;
                          if (uVar19 != 0xd) {
                            *(undefined4 *)((long)puVar10 + 0x54) = local_188;
                            *(undefined4 *)((long)puVar10 + 0x74) = local_184;
                            *(undefined4 *)((long)puVar10 + 0x94) = local_180;
                            *(undefined4 *)((long)puVar10 + 100) = local_178;
                            *(undefined4 *)((long)puVar10 + 0x84) = local_174;
                            *(undefined4 *)((long)puVar10 + 0xa4) = local_170;
                            if (uVar19 != 0xe) {
                              *(undefined4 *)(puVar10 + 0xb) = local_118;
                              *(undefined4 *)(puVar10 + 0xf) = local_114;
                              *(undefined4 *)(puVar10 + 0x13) = local_110;
                              *(undefined4 *)(puVar10 + 0xd) = local_108;
                              *(undefined4 *)(puVar10 + 0x11) = local_104;
                              *(undefined4 *)(puVar10 + 0x15) = local_100;
                              if (uVar19 != 0xf) {
                                *(undefined4 *)((long)puVar10 + 0x5c) = local_a8;
                                *(undefined4 *)((long)puVar10 + 0x7c) = local_a4;
                                *(undefined4 *)((long)puVar10 + 0x9c) = local_a0;
                                *(undefined4 *)((long)puVar10 + 0x6c) = local_98;
                                *(undefined4 *)((long)puVar10 + 0x8c) = local_94;
                                *(undefined4 *)((long)puVar10 + 0xac) = local_90;
                                if (uVar19 == 0x11) {
                                  *(undefined4 *)(puVar10 + 0x10) = local_34;
                                  *(undefined4 *)(puVar10 + 0x14) = unaff_EBX;
                                  *(undefined4 *)(puVar10 + 0xc) = local_38;
                                  *(int *)(puVar10 + 0xe) = (int)unaff_RBP;
                                  *(int *)(puVar10 + 0x12) = (int)((ulong)unaff_RBP >> 0x20);
                                  *(undefined4 *)(puVar10 + 0x16) = unaff_R12D;
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  uVar13 = 0;
  puVar12 = &local_748;
  do {
    uVar9 = createLargeLeaf(param_1,puVar12);
    auStack_7d0[uVar13 + 1] = uVar9;
    uVar13 = uVar13 + 1;
    puVar12 = puVar12 + 0xe;
  } while (uVar13 != uVar19);
  *puVar10 = auStack_7d0[1];
  uVar11 = uVar13 * 8 & 0xffffffff;
  *(undefined8 *)((long)puVar10 + (uVar11 - 8)) = *(undefined8 *)((long)auStack_7d0 + uVar11);
  lVar20 = (long)puVar10 - (long)((ulong)(puVar10 + 1) & 0xfffffffffffffff8);
  puVar14 = (undefined8 *)((long)auStack_7d0 + (8 - lVar20));
  puVar15 = (undefined8 *)((ulong)(puVar10 + 1) & 0xfffffffffffffff8);
  for (uVar13 = (ulong)((uint)((int)(uVar13 * 8) + (int)lVar20) >> 3); uVar13 != 0;
      uVar13 = uVar13 - 1) {
    *puVar15 = *puVar14;
    puVar14 = puVar14 + (ulong)bVar21 * -2 + 1;
    puVar15 = puVar15 + (ulong)bVar21 * -2 + 1;
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar10;
  }
LAB_0011fbbc:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
code_r0x0011f61a:
  uVar11 = param_2[0xb];
  goto LAB_0011ec17;
}



/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::createLargeLeaf(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >
   const&, embree::FastAllocator::CachedAllocator) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::createLargeLeaf(ulong *param_1,ulong *param_2)

{
  long *plVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  bool bVar4;
  PrimInfoExtRange aPVar5 [16];
  undefined1 auVar6 [16];
  undefined1 (*pauVar7) [16];
  undefined1 (*pauVar8) [16];
  undefined8 uVar9;
  undefined8 *puVar10;
  ulong uVar11;
  undefined4 unaff_EBX;
  ulong *puVar12;
  undefined8 unaff_RBP;
  ulong uVar13;
  undefined8 *puVar14;
  undefined8 *puVar15;
  ulong uVar16;
  PrimInfoExtRange *pPVar17;
  PrimInfoExtRange *pPVar18;
  undefined4 unaff_R12D;
  ulong uVar19;
  long lVar20;
  long in_FS_OFFSET;
  byte bVar21;
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  undefined1 auVar26 [16];
  undefined1 auVar27 [16];
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  undefined8 in_stack_00000018;
  ulong local_8a8;
  undefined1 local_8a0;
  PrimInfoExtRange local_898 [16];
  undefined1 local_888 [16];
  undefined1 local_878 [16];
  undefined1 local_868 [16];
  ulong local_858;
  ulong uStack_850;
  ulong local_848;
  ulong local_838;
  bool local_830 [8];
  PrimInfoExtRange local_828 [16];
  undefined1 local_818 [16];
  undefined1 local_808 [16];
  undefined1 local_7f8 [16];
  ulong local_7e8;
  ulong uStack_7e0;
  ulong local_7d8;
  undefined8 auStack_7d0 [17];
  ulong local_748;
  bool local_740 [8];
  undefined8 local_738;
  ulong uStack_730;
  undefined8 local_728;
  ulong auStack_720 [4];
  ulong uStack_700;
  ulong local_6f8;
  ulong uStack_6f0;
  ulong local_6e8;
  undefined1 local_6d0;
  undefined4 local_6c8;
  undefined4 uStack_6c4;
  undefined4 uStack_6c0;
  undefined4 local_6b8;
  undefined4 uStack_6b4;
  undefined4 uStack_6b0;
  long local_688;
  long lStack_680;
  undefined1 local_660;
  undefined4 local_658;
  undefined4 local_654;
  undefined4 local_650;
  undefined4 local_648;
  undefined4 local_644;
  undefined4 local_640;
  long local_618;
  long local_610;
  undefined1 local_5f0;
  undefined4 local_5e8;
  undefined4 local_5e4;
  undefined4 local_5e0;
  undefined4 local_5d8;
  undefined4 local_5d4;
  undefined4 local_5d0;
  long local_5a8;
  long local_5a0;
  undefined1 local_580;
  undefined4 local_578;
  undefined4 local_574;
  undefined4 local_570;
  undefined4 local_568;
  undefined4 local_564;
  undefined4 local_560;
  long local_538;
  long local_530;
  undefined1 local_510;
  undefined4 local_508;
  undefined4 local_504;
  undefined4 local_500;
  undefined4 local_4f8;
  undefined4 local_4f4;
  undefined4 local_4f0;
  long local_4c8;
  long local_4c0;
  undefined1 local_4a0;
  undefined4 local_498;
  undefined4 local_494;
  undefined4 local_490;
  undefined4 local_488;
  undefined4 local_484;
  undefined4 local_480;
  long local_458;
  long local_450;
  undefined1 local_430;
  undefined4 local_428;
  undefined4 local_424;
  undefined4 local_420;
  undefined4 local_418;
  undefined4 local_414;
  undefined4 local_410;
  long local_3e8;
  long local_3e0;
  undefined1 local_3c0;
  undefined4 local_3b8;
  undefined4 local_3b4;
  undefined4 local_3b0;
  undefined4 local_3a8;
  undefined4 local_3a4;
  undefined4 local_3a0;
  long local_378;
  long local_370;
  undefined1 local_350;
  undefined4 local_348;
  undefined4 local_344;
  undefined4 local_340;
  undefined4 local_338;
  undefined4 local_334;
  undefined4 local_330;
  long local_308;
  long local_300;
  undefined1 local_2e0;
  undefined4 local_2d8;
  undefined4 local_2d4;
  undefined4 local_2d0;
  undefined4 local_2c8;
  undefined4 local_2c4;
  undefined4 local_2c0;
  long local_298;
  long local_290;
  undefined1 local_270;
  undefined4 local_268;
  undefined4 local_264;
  undefined4 local_260;
  undefined4 local_258;
  undefined4 local_254;
  undefined4 local_250;
  long local_228;
  long local_220;
  undefined1 local_200;
  undefined4 local_1f8;
  undefined4 local_1f4;
  undefined4 local_1f0;
  undefined4 local_1e8;
  undefined4 local_1e4;
  undefined4 local_1e0;
  long local_1b8;
  long local_1b0;
  undefined1 local_190;
  undefined4 local_188;
  undefined4 local_184;
  undefined4 local_180;
  undefined4 local_178;
  undefined4 local_174;
  undefined4 local_170;
  long local_148;
  long local_140;
  undefined1 local_120;
  undefined4 local_118;
  undefined4 local_114;
  undefined4 local_110;
  undefined4 local_108;
  undefined4 local_104;
  undefined4 local_100;
  long local_d8;
  long local_d0;
  undefined1 local_b0;
  undefined4 local_a8;
  undefined4 local_a4;
  undefined4 local_a0;
  undefined4 local_98;
  undefined4 local_94;
  undefined4 local_90;
  long local_68;
  long local_60;
  long local_40;
  undefined4 local_38;
  undefined4 local_34;
  
  uVar3 = _LC3;
  uVar2 = _LC1;
  bVar21 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar13 = *param_2;
  if (param_1[1] < uVar13) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar11 = param_2[0xb];
  if (uVar11 - param_2[10] <= param_1[4]) {
    if (*(long *)(in_FS_OFFSET + 0x28) == *(long *)(in_FS_OFFSET + 0x28)) {
      puVar10 = (undefined8 *)
                BVHBuilderBinnedFastSpatialSAH::
                CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>
                ::operator()(param_1[0xd],param_1[8],param_2 + 10,in_stack_00000008,
                             in_stack_00000018);
      return puVar10;
    }
    goto LAB_001212fc;
  }
  local_748 = uVar13;
  local_738 = param_2[2];
  uStack_730 = param_2[3];
  local_740[0] = (bool)(char)param_2[1];
  local_728 = param_2[4];
  auStack_720[0] = param_2[5];
  local_6e8 = param_2[0xc];
  auStack_720[1] = param_2[6];
  auStack_720[2] = param_2[7];
  auStack_720[3] = param_2[8];
  uStack_700 = param_2[9];
  local_6f8 = param_2[10];
  uStack_6f0 = param_2[0xb];
  if (param_1[4] < param_2[0xb] - param_2[10]) {
    uVar19 = 1;
    lVar20 = 0;
    puVar12 = &local_748;
    do {
      uVar13 = uVar13 + 1;
      local_8a0 = 0;
      pPVar17 = (PrimInfoExtRange *)param_1[9];
      local_858 = auStack_720[lVar20 * 0xe + 5];
      uStack_7e0 = auStack_720[lVar20 * 0xe + 6];
      local_830[0] = false;
      uStack_850 = local_858 + uStack_7e0 >> 1;
      if (local_858 < uStack_850) {
        uVar11 = 0;
        auVar24._4_4_ = uVar2;
        auVar24._0_4_ = uVar2;
        auVar24._8_4_ = uVar2;
        auVar24._12_4_ = uVar2;
        auVar25._4_4_ = uVar3;
        auVar25._0_4_ = uVar3;
        auVar25._8_4_ = uVar3;
        auVar25._12_4_ = uVar3;
        auVar26._4_4_ = uVar2;
        auVar26._0_4_ = uVar2;
        auVar26._8_4_ = uVar2;
        auVar26._12_4_ = uVar2;
        auVar27._4_4_ = uVar3;
        auVar27._0_4_ = uVar3;
        auVar27._8_4_ = uVar3;
        auVar27._12_4_ = uVar3;
        pauVar8 = (undefined1 (*) [16])(local_858 * 0x20 + *(long *)pPVar17);
        do {
          pauVar7 = pauVar8 + 2;
          auVar22._0_4_ = *(float *)pauVar8[1] + *(float *)*pauVar8;
          auVar22._4_4_ = *(float *)(pauVar8[1] + 4) + *(float *)(*pauVar8 + 4);
          auVar22._8_4_ = *(float *)(pauVar8[1] + 8) + *(float *)(*pauVar8 + 8);
          auVar22._12_4_ = *(float *)(pauVar8[1] + 0xc) + *(float *)(*pauVar8 + 0xc);
          auVar27 = minps(auVar27,*pauVar8);
          auVar26 = maxps(auVar26,pauVar8[1]);
          uVar11 = uVar11 + (*(uint *)(*pauVar8 + 0xc) >> 0x1b);
          auVar25 = minps(auVar25,auVar22);
          auVar24 = maxps(auVar24,auVar22);
          pauVar8 = pauVar7;
        } while (pauVar7 != (undefined1 (*) [16])(*(long *)pPVar17 + uStack_850 * 0x20));
      }
      else {
        auVar24._4_4_ = uVar2;
        auVar24._0_4_ = uVar2;
        auVar24._8_4_ = uVar2;
        auVar24._12_4_ = uVar2;
        auVar25._4_4_ = uVar3;
        auVar25._0_4_ = uVar3;
        auVar25._8_4_ = uVar3;
        auVar25._12_4_ = uVar3;
        auVar26._4_4_ = uVar2;
        auVar26._0_4_ = uVar2;
        auVar26._8_4_ = uVar2;
        auVar26._12_4_ = uVar2;
        uVar11 = 0;
        auVar27._4_4_ = uVar3;
        auVar27._0_4_ = uVar3;
        auVar27._8_4_ = uVar3;
        auVar27._12_4_ = uVar3;
      }
      if (uStack_850 < uStack_7e0) {
        uVar16 = 0;
        local_7f8._4_4_ = uVar2;
        local_7f8._0_4_ = uVar2;
        local_7f8._8_4_ = uVar2;
        local_7f8._12_4_ = uVar2;
        local_808._4_4_ = uVar3;
        local_808._0_4_ = uVar3;
        local_808._8_4_ = uVar3;
        local_808._12_4_ = uVar3;
        local_818._4_4_ = uVar2;
        local_818._0_4_ = uVar2;
        local_818._8_4_ = uVar2;
        local_818._12_4_ = uVar2;
        local_828._4_4_ = uVar3;
        local_828._0_4_ = uVar3;
        local_828._8_4_ = uVar3;
        local_828._12_4_ = uVar3;
        pauVar8 = (undefined1 (*) [16])(uStack_850 * 0x20 + *(long *)pPVar17);
        do {
          pauVar7 = pauVar8 + 2;
          auVar23._0_4_ = *(float *)pauVar8[1] + *(float *)*pauVar8;
          auVar23._4_4_ = *(float *)(pauVar8[1] + 4) + *(float *)(*pauVar8 + 4);
          auVar23._8_4_ = *(float *)(pauVar8[1] + 8) + *(float *)(*pauVar8 + 8);
          auVar23._12_4_ = *(float *)(pauVar8[1] + 0xc) + *(float *)(*pauVar8 + 0xc);
          local_828 = (PrimInfoExtRange  [16])minps((undefined1  [16])local_828,*pauVar8);
          local_818 = maxps(local_818,pauVar8[1]);
          uVar16 = uVar16 + (*(uint *)(*pauVar8 + 0xc) >> 0x1b);
          local_808 = minps(local_808,auVar23);
          local_7f8 = maxps(local_7f8,auVar23);
          pauVar8 = pauVar7;
        } while (pauVar7 != (undefined1 (*) [16])(*(long *)pPVar17 + uStack_7e0 * 0x20));
      }
      else {
        local_7f8._4_4_ = uVar2;
        local_7f8._0_4_ = uVar2;
        local_7f8._8_4_ = uVar2;
        local_7f8._12_4_ = uVar2;
        local_808._4_4_ = uVar3;
        local_808._0_4_ = uVar3;
        local_808._8_4_ = uVar3;
        local_808._12_4_ = uVar3;
        local_818._4_4_ = uVar2;
        local_818._0_4_ = uVar2;
        local_818._8_4_ = uVar2;
        local_818._12_4_ = uVar2;
        uVar16 = 0;
        local_828._4_4_ = uVar3;
        local_828._0_4_ = uVar3;
        local_828._8_4_ = uVar3;
        local_828._12_4_ = uVar3;
      }
      local_898 = (PrimInfoExtRange  [16])auVar27;
      local_888 = auVar26;
      local_878 = auVar25;
      local_868 = auVar24;
      local_848 = uStack_850;
      local_838 = uVar13;
      local_7e8 = uStack_850;
      local_7d8 = uStack_7e0;
      if (uStack_7e0 != auStack_720[lVar20 * 0xe + 7]) {
        pPVar18 = local_898;
        local_8a8 = uVar13;
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        setExtentedRanges((PrimInfoExtRange *)(&local_738 + lVar20 * 0xe),pPVar18,local_828,uVar11,
                          uVar16);
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        moveExtentedRange(pPVar17,pPVar18,local_828);
      }
      auVar6 = local_7f8;
      auVar23 = local_808;
      auVar22 = local_818;
      aPVar5 = local_828;
      bVar4 = local_830[0];
      uVar16 = local_838;
      uVar19 = uVar19 + 1;
      *(ulong *)(local_740 + lVar20 * 0x70 + -8) = *puVar12;
      local_740[lVar20 * 0x70] = SUB81(puVar12[1],0);
      uVar11 = puVar12[3];
      (&local_738)[lVar20 * 0xe] = puVar12[2];
      (&uStack_730)[lVar20 * 0xe] = uVar11;
      uVar11 = puVar12[5];
      (&local_728)[lVar20 * 0xe] = puVar12[4];
      auStack_720[lVar20 * 0xe] = uVar11;
      uVar11 = puVar12[7];
      auStack_720[lVar20 * 0xe + 1] = puVar12[6];
      auStack_720[lVar20 * 0xe + 2] = uVar11;
      uVar11 = puVar12[9];
      auStack_720[lVar20 * 0xe + 3] = puVar12[8];
      auStack_720[lVar20 * 0xe + 4] = uVar11;
      uVar11 = puVar12[0xb];
      auStack_720[lVar20 * 0xe + 5] = puVar12[10];
      auStack_720[lVar20 * 0xe + 6] = uVar11;
      auStack_720[lVar20 * 0xe + 7] = puVar12[0xc];
      *(undefined1 (*) [16])(puVar12 + 6) = auVar25;
      puVar12[0xc] = local_848;
      *puVar12 = uVar13;
      *(undefined1 *)(puVar12 + 1) = 0;
      *(undefined1 (*) [16])(puVar12 + 2) = auVar27;
      *(undefined1 (*) [16])(puVar12 + 4) = auVar26;
      *(undefined1 (*) [16])(puVar12 + 8) = auVar24;
      puVar12[10] = local_858;
      puVar12[0xb] = uStack_850;
      puVar12[0xe] = uVar16;
      *(bool *)(puVar12 + 0xf) = bVar4;
      *(PrimInfoExtRange (*) [16])(puVar12 + 0x10) = aPVar5;
      *(undefined1 (*) [16])(puVar12 + 0x12) = auVar22;
      *(undefined1 (*) [16])(puVar12 + 0x16) = auVar6;
      *(undefined1 (*) [16])(puVar12 + 0x14) = auVar23;
      puVar12[0x18] = local_7e8;
      puVar12[0x19] = uStack_7e0;
      puVar12[0x1a] = local_7d8;
      if (*param_1 <= uVar19) {
        uVar13 = param_1[7];
        if (param_2[0xb] - param_2[10] <= uVar13) goto LAB_00120375;
        local_740[0] = uStack_6f0 - local_6f8 <= uVar13;
        goto LAB_00120f00;
      }
      uVar13 = param_1[4];
      lVar20 = 0;
      uVar11 = uStack_6f0 - local_6f8;
      if (uVar11 <= uVar13) {
        uVar11 = 0;
        lVar20 = -1;
      }
      uVar16 = uVar11;
      if (uVar11 <= uVar13) {
        uVar16 = uVar13;
      }
      if (uVar16 < (ulong)(lStack_680 - local_688)) {
        lVar20 = 1;
        uVar11 = lStack_680 - local_688;
        if (uVar19 != 2) {
LAB_00120076:
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_610 - local_618)) {
            lVar20 = 2;
            uVar11 = local_610 - local_618;
            if (uVar19 == 3) goto LAB_00120328;
          }
          else if (uVar19 == 3) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_5a0 - local_5a8)) {
            lVar20 = 3;
            uVar11 = local_5a0 - local_5a8;
            if (uVar19 == 4) goto LAB_00120328;
          }
          else if (uVar19 == 4) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_530 - local_538)) {
            lVar20 = 4;
            uVar11 = local_530 - local_538;
            if (uVar19 == 5) goto LAB_00120328;
          }
          else if (uVar19 == 5) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_4c0 - local_4c8)) {
            lVar20 = 5;
            uVar11 = local_4c0 - local_4c8;
            if (uVar19 == 6) goto LAB_00120328;
          }
          else if (uVar19 == 6) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_450 - local_458)) {
            lVar20 = 6;
            uVar11 = local_450 - local_458;
            if (uVar19 == 7) goto LAB_00120328;
          }
          else if (uVar19 == 7) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_3e0 - local_3e8)) {
            lVar20 = 7;
            uVar11 = local_3e0 - local_3e8;
            if (uVar19 == 8) goto LAB_00120328;
          }
          else if (uVar19 == 8) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_370 - local_378)) {
            lVar20 = 8;
            uVar11 = local_370 - local_378;
            if (uVar19 == 9) goto LAB_00120328;
          }
          else if (uVar19 == 9) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_300 - local_308)) {
            lVar20 = 9;
            uVar11 = local_300 - local_308;
            if (uVar19 == 10) goto LAB_00120328;
          }
          else if (uVar19 == 10) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_290 - local_298)) {
            lVar20 = 10;
            uVar11 = local_290 - local_298;
            if (uVar19 == 0xb) goto LAB_00120328;
          }
          else if (uVar19 == 0xb) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_220 - local_228)) {
            lVar20 = 0xb;
            uVar11 = local_220 - local_228;
            if (uVar19 == 0xc) goto LAB_00120328;
          }
          else if (uVar19 == 0xc) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_1b0 - local_1b8)) {
            lVar20 = 0xc;
            uVar11 = local_1b0 - local_1b8;
            if (uVar19 == 0xd) goto LAB_00120328;
          }
          else if (uVar19 == 0xd) goto LAB_00120d50;
          uVar16 = uVar11;
          if (uVar11 <= uVar13) {
            uVar16 = uVar13;
          }
          if (uVar16 < (ulong)(local_140 - local_148)) {
            lVar20 = 0xd;
            uVar11 = local_140 - local_148;
            if (uVar19 == 0xe) goto LAB_00120328;
          }
          else if (uVar19 == 0xe) goto LAB_00120d50;
          uVar16 = local_d0 - local_d8;
          if (uVar11 <= uVar13) {
            uVar11 = uVar13;
          }
          if (uVar11 < uVar16) {
            if (uVar19 == 0x10) {
              if (uVar16 <= uVar13) {
                uVar16 = uVar13;
              }
              lVar20 = (ulong)(uVar16 < (ulong)(local_60 - local_68)) + 0xe;
            }
            else {
              uVar19 = 0xf;
              lVar20 = 0xe;
            }
          }
          else {
            if ((uVar19 != 0x10) || ((ulong)(local_60 - local_68) <= uVar11)) goto LAB_00120d50;
            lVar20 = 0xf;
          }
        }
      }
      else {
        if (uVar19 != 2) goto LAB_00120076;
LAB_00120d50:
        if (lVar20 == -1) goto code_r0x00120d5a;
      }
LAB_00120328:
      uVar13 = *param_2;
      puVar12 = puVar12 + 0xe;
    } while( true );
  }
  uVar19 = 1;
LAB_00120357:
  uVar13 = param_1[7];
  if ((uVar13 < uVar11 - param_2[10]) &&
     (local_740[0] = uStack_6f0 - local_6f8 <= uVar13, uVar19 != 1)) {
LAB_00120f00:
    local_6d0 = (ulong)(lStack_680 - local_688) <= uVar13;
    if (((uVar19 != 2) &&
        (((local_660 = (ulong)(local_610 - local_618) <= uVar13, uVar19 != 3 &&
          (local_5f0 = (ulong)(local_5a0 - local_5a8) <= uVar13, uVar19 != 4)) &&
         (local_580 = (ulong)(local_530 - local_538) <= uVar13, uVar19 != 5)))) &&
       ((((local_510 = (ulong)(local_4c0 - local_4c8) <= uVar13, uVar19 != 6 &&
          (local_4a0 = (ulong)(local_450 - local_458) <= uVar13, uVar19 != 7)) &&
         (local_430 = (ulong)(local_3e0 - local_3e8) <= uVar13, uVar19 != 8)) &&
        (((local_3c0 = (ulong)(local_370 - local_378) <= uVar13, uVar19 != 9 &&
          (local_350 = (ulong)(local_300 - local_308) <= uVar13, uVar19 != 10)) &&
         (((local_2e0 = (ulong)(local_290 - local_298) <= uVar13, uVar19 != 0xb &&
           (((local_270 = (ulong)(local_220 - local_228) <= uVar13, uVar19 != 0xc &&
             (local_200 = (ulong)(local_1b0 - local_1b8) <= uVar13, uVar19 != 0xd)) &&
            (local_190 = (ulong)(local_140 - local_148) <= uVar13, uVar19 != 0xe)))) &&
          (local_120 = (ulong)(local_d0 - local_d8) <= uVar13, uVar19 != 0xf)))))))) {
      local_b0 = (ulong)(local_60 - local_68) <= uVar13;
    }
  }
LAB_00120375:
  local_8a8 = 0x80;
  uVar13 = *in_stack_00000010;
  if (in_stack_00000008 != *(FastAllocator **)(uVar13 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar13 + 8) != 0) {
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x118);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xa8) + *(long *)(uVar13 + 0x68);
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x120);
      *plVar1 = *plVar1 + (((*(long *)(uVar13 + 0x98) + *(long *)(uVar13 + 0x58)) -
                           *(long *)(uVar13 + 0x50)) - *(long *)(uVar13 + 0x90));
      UNLOCK();
      LOCK();
      plVar1 = (long *)(*(long *)(uVar13 + 8) + 0x128);
      *plVar1 = *plVar1 + *(long *)(uVar13 + 0xb0) + *(long *)(uVar13 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar13 + 0x48) = 0;
    *(undefined8 *)(uVar13 + 0x58) = 0;
    *(undefined8 *)(uVar13 + 0x50) = 0;
    *(undefined8 *)(uVar13 + 0x68) = 0;
    *(undefined8 *)(uVar13 + 0x70) = 0;
    *(undefined8 *)(uVar13 + 0x60) = 0;
    if (in_stack_00000008 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar13 + 0x88) = 0;
      uVar9 = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
    }
    else {
      uVar9 = *(undefined8 *)(in_stack_00000008 + 0x10);
      *(undefined8 *)(uVar13 + 0x88) = 0;
      *(undefined8 *)(uVar13 + 0x98) = 0;
      *(undefined8 *)(uVar13 + 0x60) = uVar9;
      *(undefined8 *)(uVar13 + 0x90) = 0;
      *(undefined8 *)(uVar13 + 0xa8) = 0;
      *(undefined8 *)(uVar13 + 0xb0) = 0;
      *(undefined8 *)(uVar13 + 0xa0) = 0;
      uVar9 = *(undefined8 *)(in_stack_00000008 + 0x10);
    }
    *(undefined8 *)(uVar13 + 0xa0) = uVar9;
    LOCK();
    *(FastAllocator **)(uVar13 + 8) = in_stack_00000008;
    UNLOCK();
    local_838 = uVar13;
    embree::MutexSys::lock();
    puVar12 = *(ulong **)(in_stack_00000008 + 0x138);
    if (puVar12 == *(ulong **)(in_stack_00000008 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(in_stack_00000008 + 0x130),puVar12,&local_838);
    }
    else {
      *puVar12 = uVar13;
      *(long *)(in_stack_00000008 + 0x138) = *(long *)(in_stack_00000008 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar11 = in_stack_00000010[2];
  in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
  uVar16 = (ulong)(-(int)uVar11 & 0xf);
  uVar13 = uVar11 + 0x80 + uVar16;
  in_stack_00000010[2] = uVar13;
  if (in_stack_00000010[3] < uVar13) {
    in_stack_00000010[2] = uVar11;
    if (in_stack_00000010[4] < 0x200) {
      puVar10 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_8a8,0x40,false);
    }
    else {
      local_838 = in_stack_00000010[4];
      puVar10 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,true);
      in_stack_00000010[1] = (ulong)puVar10;
      uVar13 = in_stack_00000010[2];
      in_stack_00000010[2] = 0x80;
      in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar13;
      in_stack_00000010[3] = local_838;
      if (local_838 < 0x80) {
        in_stack_00000010[2] = 0;
        local_838 = in_stack_00000010[4];
        puVar10 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_838,0x40,false);
        in_stack_00000010[1] = (ulong)puVar10;
        uVar13 = in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar13;
        in_stack_00000010[3] = local_838;
        if (local_838 < 0x80) {
          puVar10 = (undefined8 *)0x0;
          in_stack_00000010[2] = 0;
        }
      }
    }
  }
  else {
    in_stack_00000010[6] = in_stack_00000010[6] + uVar16;
    puVar10 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar13);
  }
  *(undefined4 *)(puVar10 + 4) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x24) = uVar3;
  *(undefined4 *)(puVar10 + 5) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x2c) = uVar3;
  *(undefined4 *)(puVar10 + 8) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x44) = uVar3;
  *(undefined4 *)(puVar10 + 9) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x4c) = uVar3;
  *(undefined4 *)(puVar10 + 4) = (undefined4)local_738;
  *(undefined4 *)(puVar10 + 0xc) = uVar3;
  *(undefined4 *)((long)puVar10 + 100) = uVar3;
  *(undefined4 *)(puVar10 + 0xd) = uVar3;
  *(undefined4 *)((long)puVar10 + 0x6c) = uVar3;
  *(undefined4 *)(puVar10 + 8) = local_738._4_4_;
  *(undefined4 *)(puVar10 + 6) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x34) = uVar2;
  *(undefined4 *)(puVar10 + 7) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x3c) = uVar2;
  *(undefined4 *)(puVar10 + 0xc) = (undefined4)uStack_730;
  *(undefined4 *)(puVar10 + 10) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x54) = uVar2;
  *(undefined4 *)(puVar10 + 0xb) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x5c) = uVar2;
  *(undefined4 *)(puVar10 + 6) = (undefined4)local_728;
  *(undefined4 *)(puVar10 + 0xe) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x74) = uVar2;
  *(undefined4 *)(puVar10 + 0xf) = uVar2;
  *(undefined4 *)((long)puVar10 + 0x7c) = uVar2;
  *(undefined4 *)(puVar10 + 10) = local_728._4_4_;
  *puVar10 = 8;
  puVar10[1] = 8;
  puVar10[2] = 8;
  puVar10[3] = 8;
  *(undefined4 *)(puVar10 + 0xe) = (undefined4)auStack_720[0];
  if (uVar19 != 1) {
    *(undefined4 *)((long)puVar10 + 0x24) = local_6c8;
    *(undefined4 *)((long)puVar10 + 0x44) = uStack_6c4;
    *(undefined4 *)((long)puVar10 + 100) = uStack_6c0;
    *(undefined4 *)((long)puVar10 + 0x34) = local_6b8;
    *(undefined4 *)((long)puVar10 + 0x54) = uStack_6b4;
    *(undefined4 *)((long)puVar10 + 0x74) = uStack_6b0;
    if (uVar19 != 2) {
      *(undefined4 *)(puVar10 + 5) = local_658;
      *(undefined4 *)(puVar10 + 9) = local_654;
      *(undefined4 *)(puVar10 + 0xd) = local_650;
      *(undefined4 *)(puVar10 + 7) = local_648;
      *(undefined4 *)(puVar10 + 0xb) = local_644;
      *(undefined4 *)(puVar10 + 0xf) = local_640;
      if (uVar19 != 3) {
        *(undefined4 *)((long)puVar10 + 0x2c) = local_5e8;
        *(undefined4 *)((long)puVar10 + 0x4c) = local_5e4;
        *(undefined4 *)((long)puVar10 + 0x6c) = local_5e0;
        *(undefined4 *)((long)puVar10 + 0x3c) = local_5d8;
        *(undefined4 *)((long)puVar10 + 0x5c) = local_5d4;
        *(undefined4 *)((long)puVar10 + 0x7c) = local_5d0;
        if (uVar19 != 4) {
          *(undefined4 *)(puVar10 + 6) = local_578;
          *(undefined4 *)(puVar10 + 10) = local_574;
          *(undefined4 *)(puVar10 + 0xe) = local_570;
          *(undefined4 *)(puVar10 + 8) = local_568;
          *(undefined4 *)(puVar10 + 0xc) = local_564;
          *(undefined4 *)(puVar10 + 0x10) = local_560;
          if (uVar19 != 5) {
            *(undefined4 *)((long)puVar10 + 0x34) = local_508;
            *(undefined4 *)((long)puVar10 + 0x54) = local_504;
            *(undefined4 *)((long)puVar10 + 0x74) = local_500;
            *(undefined4 *)((long)puVar10 + 0x44) = local_4f8;
            *(undefined4 *)((long)puVar10 + 100) = local_4f4;
            *(undefined4 *)((long)puVar10 + 0x84) = local_4f0;
            if (uVar19 != 6) {
              *(undefined4 *)(puVar10 + 7) = local_498;
              *(undefined4 *)(puVar10 + 0xb) = local_494;
              *(undefined4 *)(puVar10 + 0xf) = local_490;
              *(undefined4 *)(puVar10 + 9) = local_488;
              *(undefined4 *)(puVar10 + 0xd) = local_484;
              *(undefined4 *)(puVar10 + 0x11) = local_480;
              if (uVar19 != 7) {
                *(undefined4 *)((long)puVar10 + 0x3c) = local_428;
                *(undefined4 *)((long)puVar10 + 0x5c) = local_424;
                *(undefined4 *)((long)puVar10 + 0x7c) = local_420;
                *(undefined4 *)((long)puVar10 + 0x4c) = local_418;
                *(undefined4 *)((long)puVar10 + 0x6c) = local_414;
                *(undefined4 *)((long)puVar10 + 0x8c) = local_410;
                if (uVar19 != 8) {
                  *(undefined4 *)(puVar10 + 8) = local_3b8;
                  *(undefined4 *)(puVar10 + 0xc) = local_3b4;
                  *(undefined4 *)(puVar10 + 0x10) = local_3b0;
                  *(undefined4 *)(puVar10 + 10) = local_3a8;
                  *(undefined4 *)(puVar10 + 0xe) = local_3a4;
                  *(undefined4 *)(puVar10 + 0x12) = local_3a0;
                  if (uVar19 != 9) {
                    *(undefined4 *)((long)puVar10 + 0x44) = local_348;
                    *(undefined4 *)((long)puVar10 + 100) = local_344;
                    *(undefined4 *)((long)puVar10 + 0x84) = local_340;
                    *(undefined4 *)((long)puVar10 + 0x54) = local_338;
                    *(undefined4 *)((long)puVar10 + 0x74) = local_334;
                    *(undefined4 *)((long)puVar10 + 0x94) = local_330;
                    if (uVar19 != 10) {
                      *(undefined4 *)(puVar10 + 9) = local_2d8;
                      *(undefined4 *)(puVar10 + 0xd) = local_2d4;
                      *(undefined4 *)(puVar10 + 0x11) = local_2d0;
                      *(undefined4 *)(puVar10 + 0xb) = local_2c8;
                      *(undefined4 *)(puVar10 + 0xf) = local_2c4;
                      *(undefined4 *)(puVar10 + 0x13) = local_2c0;
                      if (uVar19 != 0xb) {
                        *(undefined4 *)((long)puVar10 + 0x4c) = local_268;
                        *(undefined4 *)((long)puVar10 + 0x6c) = local_264;
                        *(undefined4 *)((long)puVar10 + 0x8c) = local_260;
                        *(undefined4 *)((long)puVar10 + 0x5c) = local_258;
                        *(undefined4 *)((long)puVar10 + 0x7c) = local_254;
                        *(undefined4 *)((long)puVar10 + 0x9c) = local_250;
                        if (uVar19 != 0xc) {
                          *(undefined4 *)(puVar10 + 10) = local_1f8;
                          *(undefined4 *)(puVar10 + 0xe) = local_1f4;
                          *(undefined4 *)(puVar10 + 0x12) = local_1f0;
                          *(undefined4 *)(puVar10 + 0xc) = local_1e8;
                          *(undefined4 *)(puVar10 + 0x10) = local_1e4;
                          *(undefined4 *)(puVar10 + 0x14) = local_1e0;
                          if (uVar19 != 0xd) {
                            *(undefined4 *)((long)puVar10 + 0x54) = local_188;
                            *(undefined4 *)((long)puVar10 + 0x74) = local_184;
                            *(undefined4 *)((long)puVar10 + 0x94) = local_180;
                            *(undefined4 *)((long)puVar10 + 100) = local_178;
                            *(undefined4 *)((long)puVar10 + 0x84) = local_174;
                            *(undefined4 *)((long)puVar10 + 0xa4) = local_170;
                            if (uVar19 != 0xe) {
                              *(undefined4 *)(puVar10 + 0xb) = local_118;
                              *(undefined4 *)(puVar10 + 0xf) = local_114;
                              *(undefined4 *)(puVar10 + 0x13) = local_110;
                              *(undefined4 *)(puVar10 + 0xd) = local_108;
                              *(undefined4 *)(puVar10 + 0x11) = local_104;
                              *(undefined4 *)(puVar10 + 0x15) = local_100;
                              if (uVar19 != 0xf) {
                                *(undefined4 *)((long)puVar10 + 0x5c) = local_a8;
                                *(undefined4 *)((long)puVar10 + 0x7c) = local_a4;
                                *(undefined4 *)((long)puVar10 + 0x9c) = local_a0;
                                *(undefined4 *)((long)puVar10 + 0x6c) = local_98;
                                *(undefined4 *)((long)puVar10 + 0x8c) = local_94;
                                *(undefined4 *)((long)puVar10 + 0xac) = local_90;
                                if (uVar19 == 0x11) {
                                  *(undefined4 *)(puVar10 + 0x10) = local_34;
                                  *(undefined4 *)(puVar10 + 0x14) = unaff_EBX;
                                  *(undefined4 *)(puVar10 + 0xc) = local_38;
                                  *(int *)(puVar10 + 0xe) = (int)unaff_RBP;
                                  *(int *)(puVar10 + 0x12) = (int)((ulong)unaff_RBP >> 0x20);
                                  *(undefined4 *)(puVar10 + 0x16) = unaff_R12D;
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  uVar13 = 0;
  puVar12 = &local_748;
  do {
    uVar9 = createLargeLeaf(param_1,puVar12);
    auStack_7d0[uVar13 + 1] = uVar9;
    uVar13 = uVar13 + 1;
    puVar12 = puVar12 + 0xe;
  } while (uVar13 != uVar19);
  *puVar10 = auStack_7d0[1];
  uVar11 = uVar13 * 8 & 0xffffffff;
  *(undefined8 *)((long)puVar10 + (uVar11 - 8)) = *(undefined8 *)((long)auStack_7d0 + uVar11);
  lVar20 = (long)puVar10 - (long)((ulong)(puVar10 + 1) & 0xfffffffffffffff8);
  puVar14 = (undefined8 *)((long)auStack_7d0 + (8 - lVar20));
  puVar15 = (undefined8 *)((ulong)(puVar10 + 1) & 0xfffffffffffffff8);
  for (uVar13 = (ulong)((uint)((int)(uVar13 * 8) + (int)lVar20) >> 3); uVar13 != 0;
      uVar13 = uVar13 - 1) {
    *puVar15 = *puVar14;
    puVar14 = puVar14 + (ulong)bVar21 * -2 + 1;
    puVar15 = puVar15 + (ulong)bVar21 * -2 + 1;
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar10;
  }
LAB_001212fc:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
code_r0x00120d5a:
  uVar11 = param_2[0xb];
  goto LAB_00120357;
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  undefined8 *puVar7;
  long lVar8;
  TaskScheduler *pTVar9;
  undefined8 *puVar10;
  ulong uVar11;
  ulong uVar12;
  long lVar13;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 local_78;
  TaskGroupContext *pTStack_70;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 local_48;
  TaskGroupContext *pTStack_40;
  long local_30;
  
  uVar12 = *(ulong *)(this + 8);
  uVar11 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar12 - uVar11) {
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_50 = *(undefined8 *)(this + 0x20);
    local_48 = *(undefined8 *)(this + 0x28);
    uVar12 = uVar12 + uVar11 >> 1;
    local_68 = uVar12;
    uStack_60 = uVar11;
    local_58 = *(ulong *)(this + 0x18);
    pTStack_40 = pTVar3;
    lVar13 = embree::TaskScheduler::thread();
    if (lVar13 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_68,pTVar3,uVar12 - uVar11,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar13 + 0x40080)) goto LAB_001216a8;
      lVar4 = *(long *)(lVar13 + 0xc00c0);
      uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar2) goto LAB_001216a8;
      *(ulong *)(lVar13 + 0xc00c0) = uVar2;
      puVar7 = (undefined8 *)(lVar13 + 0x40088 + uVar2);
      *puVar7 = &PTR_execute_0013f190;
      puVar7[1] = local_68;
      puVar7[2] = uStack_60;
      puVar7[3] = local_58;
      puVar7[4] = uStack_50;
      puVar7[5] = local_48;
      puVar7[6] = pTStack_40;
      lVar8 = *(long *)(lVar13 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar13 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar13 + 0xc0100);
      *(undefined4 *)(lVar13 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar13 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar13;
      *(undefined8 **)(lVar8 + 0x50) = puVar7;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar12 - uVar11;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar13 + 0x40080) = *(long *)(lVar13 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar13 + 0x40080) - 1U <= *(ulong *)(lVar13 + 0x40040)) {
        LOCK();
        *(long *)(lVar13 + 0x40040) = *(long *)(lVar13 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(long *)(this + 8);
    local_78 = *(undefined8 *)(this + 0x28);
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    local_88 = *(undefined8 *)(this + 0x18);
    uStack_80 = *(undefined8 *)(this + 0x20);
    uVar11 = local_98 - uVar12;
    uStack_90 = uVar12;
    pTStack_70 = pTVar3;
    lVar13 = embree::TaskScheduler::thread();
    if (lVar13 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_98,pTVar3,uVar11,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar13 + 0x40080)) {
LAB_001216a8:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar4 = *(long *)(lVar13 + 0xc00c0);
      uVar12 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar12) goto LAB_001216a8;
      *(ulong *)(lVar13 + 0xc00c0) = uVar12;
      puVar7 = (undefined8 *)(lVar13 + 0x40088 + uVar12);
      *puVar7 = &PTR_execute_0013f190;
      puVar7[1] = local_98;
      puVar7[2] = uStack_90;
      puVar7[3] = local_88;
      puVar7[4] = uStack_80;
      puVar7[5] = local_78;
      puVar7[6] = pTStack_70;
      lVar8 = *(long *)(lVar13 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar13 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar13 + 0xc0100);
      *(undefined4 *)(lVar13 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar13 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar13;
      *(undefined8 **)(lVar8 + 0x50) = puVar7;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar11;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar13 + 0x40080) = *(long *)(lVar13 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar13 + 0x40080) - 1U <= *(ulong *)(lVar13 + 0x40040)) {
        LOCK();
        *(long *)(lVar13 + 0x40040) = *(long *)(lVar13 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar11 < uVar12) {
      do {
        lVar13 = **(long **)(this + 0x28) + uVar11;
        puVar10 = (undefined8 *)(uVar11 * 0x20 + **(long **)(this + 0x20));
        uVar11 = uVar11 + 1;
        uVar6 = puVar10[1];
        puVar7 = (undefined8 *)(**(long **)(this + 0x20) + lVar13 * 0x20);
        *puVar7 = *puVar10;
        puVar7[1] = uVar6;
        uVar6 = puVar10[3];
        puVar7[2] = puVar10[2];
        puVar7[3] = uVar6;
      } while (uVar12 != uVar11);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >&)
    */

void std::
     __make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (BuildRecordT *param_1,BuildRecordT *param_2,_Iter_comp_iter *param_3)

{
  long lVar1;
  long lVar2;
  long in_FS_OFFSET;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (0x70 < (long)param_2 - (long)param_1) {
    lVar2 = (((long)param_2 - (long)param_1 >> 4) * 0x6db6db6db6db6db7 + -2) / 2;
    while( true ) {
      __adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                ();
      if (lVar2 == 0) break;
      lVar2 = lVar2 + -1;
    }
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   long, 
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >*,
   long, 
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > > > >)
    */

void std::
     __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
               (BuildRecordT *param_1,BuildRecordT *param_2,long param_3)

{
  BuildRecordT *pBVar1;
  BuildRecordT *pBVar2;
  BuildRecordT BVar3;
  undefined8 uVar4;
  long lVar5;
  long lVar6;
  undefined8 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined4 uVar17;
  undefined4 uVar18;
  undefined4 uVar19;
  undefined4 uVar20;
  undefined4 uVar21;
  undefined4 uVar22;
  undefined4 uVar23;
  undefined8 uVar24;
  long lVar25;
  BuildRecordT *pBVar26;
  BuildRecordT *pBVar27;
  ulong uVar28;
  ulong uVar29;
  BuildRecordT *pBVar30;
  long lVar31;
  ulong uVar32;
  long lVar33;
  long lVar34;
  BuildRecordT *pBVar35;
  long in_FS_OFFSET;
  undefined8 local_b8;
  BuildRecordT local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar25 = (long)param_2 - (long)param_1;
  if (0x700 < lVar25) {
    pBVar30 = param_1 + 0x70;
    pBVar35 = param_2;
    if (param_3 == 0) {
      __make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (param_1,param_2,(_Iter_comp_iter *)&local_b8);
    }
    else {
      do {
        uVar4 = *(undefined8 *)param_1;
        param_3 = param_3 + -1;
        BVar3 = param_1[8];
        uVar28 = *(long *)(param_1 + 200) - *(long *)(param_1 + 0xc0);
        uVar8 = *(undefined4 *)(param_1 + 0x10);
        uVar9 = *(undefined4 *)(param_1 + 0x14);
        uVar10 = *(undefined4 *)(param_1 + 0x18);
        uVar11 = *(undefined4 *)(param_1 + 0x1c);
        uVar12 = *(undefined4 *)(param_1 + 0x20);
        uVar13 = *(undefined4 *)(param_1 + 0x24);
        uVar14 = *(undefined4 *)(param_1 + 0x28);
        uVar15 = *(undefined4 *)(param_1 + 0x2c);
        uVar16 = *(undefined4 *)(param_1 + 0x30);
        uVar17 = *(undefined4 *)(param_1 + 0x34);
        uVar18 = *(undefined4 *)(param_1 + 0x38);
        uVar19 = *(undefined4 *)(param_1 + 0x3c);
        uVar20 = *(undefined4 *)(param_1 + 0x40);
        uVar21 = *(undefined4 *)(param_1 + 0x44);
        uVar22 = *(undefined4 *)(param_1 + 0x48);
        uVar23 = *(undefined4 *)(param_1 + 0x4c);
        lVar5 = *(long *)(param_1 + 0x50);
        lVar6 = *(long *)(param_1 + 0x58);
        uVar7 = *(undefined8 *)(param_1 + 0x60);
        uVar32 = *(long *)(pBVar35 + -0x18) - *(long *)(pBVar35 + -0x20);
        pBVar26 = param_1 + ((lVar25 >> 4) * 0x6db6db6db6db6db7 >> 1) * 0x70;
        uVar29 = *(long *)(pBVar26 + 0x58) - *(long *)(pBVar26 + 0x50);
        pBVar27 = pBVar35;
        param_2 = pBVar30;
        if (uVar29 < uVar28) {
          if (uVar32 < uVar29) {
            *(undefined8 *)param_1 = *(undefined8 *)pBVar26;
            param_1[8] = pBVar26[8];
            uVar24 = *(undefined8 *)(pBVar26 + 0x18);
            *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar26 + 0x10);
            *(undefined8 *)(param_1 + 0x18) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x28);
            *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar26 + 0x20);
            *(undefined8 *)(param_1 + 0x28) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x38);
            *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar26 + 0x30);
            *(undefined8 *)(param_1 + 0x38) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x48);
            *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar26 + 0x40);
            *(undefined8 *)(param_1 + 0x48) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x58);
            *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar26 + 0x50);
            *(undefined8 *)(param_1 + 0x58) = uVar24;
LAB_001218cf:
            *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(pBVar26 + 0x60);
            *(undefined8 *)pBVar26 = uVar4;
            pBVar26[8] = BVar3;
            *(long *)(pBVar26 + 0x50) = lVar5;
            *(long *)(pBVar26 + 0x58) = lVar6;
            *(undefined8 *)(pBVar26 + 0x60) = uVar7;
            *(undefined4 *)(pBVar26 + 0x10) = uVar8;
            *(undefined4 *)(pBVar26 + 0x14) = uVar9;
            *(undefined4 *)(pBVar26 + 0x18) = uVar10;
            *(undefined4 *)(pBVar26 + 0x1c) = uVar11;
            *(undefined4 *)(pBVar26 + 0x20) = uVar12;
            *(undefined4 *)(pBVar26 + 0x24) = uVar13;
            *(undefined4 *)(pBVar26 + 0x28) = uVar14;
            *(undefined4 *)(pBVar26 + 0x2c) = uVar15;
            *(undefined4 *)(pBVar26 + 0x30) = uVar16;
            *(undefined4 *)(pBVar26 + 0x34) = uVar17;
            *(undefined4 *)(pBVar26 + 0x38) = uVar18;
            *(undefined4 *)(pBVar26 + 0x3c) = uVar19;
            *(undefined4 *)(pBVar26 + 0x40) = uVar20;
            *(undefined4 *)(pBVar26 + 0x44) = uVar21;
            *(undefined4 *)(pBVar26 + 0x48) = uVar22;
            *(undefined4 *)(pBVar26 + 0x4c) = uVar23;
            lVar31 = *(long *)(param_1 + 0xc0);
            lVar25 = *(long *)(param_1 + 200);
            lVar33 = *(long *)(pBVar35 + -0x18);
            lVar34 = *(long *)(pBVar35 + -0x20);
          }
          else {
            if (uVar28 <= uVar32) {
              *(undefined8 *)param_1 = *(undefined8 *)(param_1 + 0x70);
              *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_1 + 0x80);
              *(undefined8 *)(param_1 + 0x18) = *(undefined8 *)(param_1 + 0x88);
              *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_1 + 0x90);
              *(undefined8 *)(param_1 + 0x28) = *(undefined8 *)(param_1 + 0x98);
              param_1[8] = param_1[0x78];
              *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_1 + 0xa0);
              *(undefined8 *)(param_1 + 0x38) = *(undefined8 *)(param_1 + 0xa8);
              *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_1 + 0xb0);
              *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_1 + 0xb8);
              *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(param_1 + 0xc0);
              *(undefined8 *)(param_1 + 0x58) = *(undefined8 *)(param_1 + 200);
              goto LAB_00121aad;
            }
            *(undefined8 *)param_1 = *(undefined8 *)(pBVar35 + -0x70);
            param_1[8] = pBVar35[-0x68];
            uVar24 = *(undefined8 *)(pBVar35 + -0x58);
            *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar35 + -0x60);
            *(undefined8 *)(param_1 + 0x18) = uVar24;
            uVar24 = *(undefined8 *)(pBVar35 + -0x48);
            *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar35 + -0x50);
            *(undefined8 *)(param_1 + 0x28) = uVar24;
            uVar24 = *(undefined8 *)(pBVar35 + -0x38);
            *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar35 + -0x40);
            *(undefined8 *)(param_1 + 0x38) = uVar24;
            uVar24 = *(undefined8 *)(pBVar35 + -0x28);
            *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar35 + -0x30);
            *(undefined8 *)(param_1 + 0x48) = uVar24;
            uVar24 = *(undefined8 *)(pBVar35 + -0x18);
            *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar35 + -0x20);
            *(undefined8 *)(param_1 + 0x58) = uVar24;
LAB_00121ca4:
            *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(pBVar35 + -0x10);
            *(undefined8 *)(pBVar35 + -0x10) = uVar7;
            *(undefined8 *)(pBVar35 + -0x70) = uVar4;
            pBVar35[-0x68] = BVar3;
            *(long *)(pBVar35 + -0x20) = lVar5;
            *(long *)(pBVar35 + -0x18) = lVar6;
            *(undefined4 *)(pBVar35 + -0x60) = uVar8;
            *(undefined4 *)(pBVar35 + -0x5c) = uVar9;
            *(undefined4 *)(pBVar35 + -0x58) = uVar10;
            *(undefined4 *)(pBVar35 + -0x54) = uVar11;
            *(undefined4 *)(pBVar35 + -0x50) = uVar12;
            *(undefined4 *)(pBVar35 + -0x4c) = uVar13;
            *(undefined4 *)(pBVar35 + -0x48) = uVar14;
            *(undefined4 *)(pBVar35 + -0x44) = uVar15;
            *(undefined4 *)(pBVar35 + -0x40) = uVar16;
            *(undefined4 *)(pBVar35 + -0x3c) = uVar17;
            *(undefined4 *)(pBVar35 + -0x38) = uVar18;
            *(undefined4 *)(pBVar35 + -0x34) = uVar19;
            *(undefined4 *)(pBVar35 + -0x30) = uVar20;
            *(undefined4 *)(pBVar35 + -0x2c) = uVar21;
            *(undefined4 *)(pBVar35 + -0x28) = uVar22;
            *(undefined4 *)(pBVar35 + -0x24) = uVar23;
            lVar31 = *(long *)(param_1 + 0xc0);
            lVar25 = *(long *)(param_1 + 200);
            lVar33 = lVar6;
            lVar34 = lVar5;
          }
        }
        else {
          if (uVar28 <= uVar32) {
            if (uVar32 < uVar29) {
              *(undefined8 *)param_1 = *(undefined8 *)(pBVar35 + -0x70);
              param_1[8] = pBVar35[-0x68];
              uVar24 = *(undefined8 *)(pBVar35 + -0x58);
              *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar35 + -0x60);
              *(undefined8 *)(param_1 + 0x18) = uVar24;
              uVar24 = *(undefined8 *)(pBVar35 + -0x48);
              *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar35 + -0x50);
              *(undefined8 *)(param_1 + 0x28) = uVar24;
              uVar24 = *(undefined8 *)(pBVar35 + -0x38);
              *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar35 + -0x40);
              *(undefined8 *)(param_1 + 0x38) = uVar24;
              uVar24 = *(undefined8 *)(pBVar35 + -0x28);
              *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar35 + -0x30);
              *(undefined8 *)(param_1 + 0x48) = uVar24;
              uVar24 = *(undefined8 *)(pBVar35 + -0x18);
              *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar35 + -0x20);
              *(undefined8 *)(param_1 + 0x58) = uVar24;
              goto LAB_00121ca4;
            }
            *(undefined8 *)param_1 = *(undefined8 *)pBVar26;
            param_1[8] = pBVar26[8];
            uVar24 = *(undefined8 *)(pBVar26 + 0x18);
            *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar26 + 0x10);
            *(undefined8 *)(param_1 + 0x18) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x28);
            *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar26 + 0x20);
            *(undefined8 *)(param_1 + 0x28) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x38);
            *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar26 + 0x30);
            *(undefined8 *)(param_1 + 0x38) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x48);
            *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar26 + 0x40);
            *(undefined8 *)(param_1 + 0x48) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x58);
            *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar26 + 0x50);
            *(undefined8 *)(param_1 + 0x58) = uVar24;
            goto LAB_001218cf;
          }
          *(undefined8 *)param_1 = *(undefined8 *)(param_1 + 0x70);
          *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_1 + 0x80);
          *(undefined8 *)(param_1 + 0x18) = *(undefined8 *)(param_1 + 0x88);
          *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_1 + 0x90);
          *(undefined8 *)(param_1 + 0x28) = *(undefined8 *)(param_1 + 0x98);
          param_1[8] = param_1[0x78];
          *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_1 + 0xa0);
          *(undefined8 *)(param_1 + 0x38) = *(undefined8 *)(param_1 + 0xa8);
          *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_1 + 0xb0);
          *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_1 + 0xb8);
          *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(param_1 + 0xc0);
          *(undefined8 *)(param_1 + 0x58) = *(undefined8 *)(param_1 + 200);
LAB_00121aad:
          *(undefined8 *)(param_1 + 0x70) = uVar4;
          param_1[0x78] = BVar3;
          *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(param_1 + 0xd0);
          *(long *)(param_1 + 0xc0) = lVar5;
          *(long *)(param_1 + 200) = lVar6;
          *(undefined8 *)(param_1 + 0xd0) = uVar7;
          *(undefined4 *)(param_1 + 0x80) = uVar8;
          *(undefined4 *)(param_1 + 0x84) = uVar9;
          *(undefined4 *)(param_1 + 0x88) = uVar10;
          *(undefined4 *)(param_1 + 0x8c) = uVar11;
          *(undefined4 *)(param_1 + 0x90) = uVar12;
          *(undefined4 *)(param_1 + 0x94) = uVar13;
          *(undefined4 *)(param_1 + 0x98) = uVar14;
          *(undefined4 *)(param_1 + 0x9c) = uVar15;
          *(undefined4 *)(param_1 + 0xa0) = uVar16;
          *(undefined4 *)(param_1 + 0xa4) = uVar17;
          *(undefined4 *)(param_1 + 0xa8) = uVar18;
          *(undefined4 *)(param_1 + 0xac) = uVar19;
          *(undefined4 *)(param_1 + 0xb0) = uVar20;
          *(undefined4 *)(param_1 + 0xb4) = uVar21;
          *(undefined4 *)(param_1 + 0xb8) = uVar22;
          *(undefined4 *)(param_1 + 0xbc) = uVar23;
          lVar33 = *(long *)(pBVar35 + -0x18);
          lVar34 = *(long *)(pBVar35 + -0x20);
          lVar31 = lVar5;
          lVar25 = lVar6;
        }
        while( true ) {
          uVar28 = lVar25 - lVar31;
          while ((ulong)(*(long *)(param_1 + 0x58) - *(long *)(param_1 + 0x50)) < uVar28) {
            lVar25 = *(long *)(param_2 + 200);
            lVar31 = *(long *)(param_2 + 0xc0);
            param_2 = param_2 + 0x70;
            uVar28 = lVar25 - lVar31;
          }
          uVar28 = lVar33 - lVar34;
          pBVar26 = pBVar27;
          while (pBVar27 = pBVar26 + -0x70,
                uVar28 < (ulong)(*(long *)(param_1 + 0x58) - *(long *)(param_1 + 0x50))) {
            uVar28 = *(long *)(pBVar26 + -0x88) - *(long *)(pBVar26 + -0x90);
            pBVar26 = pBVar27;
          }
          if (pBVar27 <= param_2) break;
          uVar4 = *(undefined8 *)param_2;
          BVar3 = param_2[8];
          uVar8 = *(undefined4 *)(param_2 + 0x10);
          uVar9 = *(undefined4 *)(param_2 + 0x14);
          uVar10 = *(undefined4 *)(param_2 + 0x18);
          uVar11 = *(undefined4 *)(param_2 + 0x1c);
          uVar12 = *(undefined4 *)(param_2 + 0x20);
          uVar13 = *(undefined4 *)(param_2 + 0x24);
          uVar14 = *(undefined4 *)(param_2 + 0x28);
          uVar15 = *(undefined4 *)(param_2 + 0x2c);
          uVar16 = *(undefined4 *)(param_2 + 0x30);
          uVar17 = *(undefined4 *)(param_2 + 0x34);
          uVar18 = *(undefined4 *)(param_2 + 0x38);
          uVar19 = *(undefined4 *)(param_2 + 0x3c);
          *(undefined8 *)param_2 = *(undefined8 *)pBVar27;
          uVar20 = *(undefined4 *)(param_2 + 0x40);
          uVar21 = *(undefined4 *)(param_2 + 0x44);
          uVar22 = *(undefined4 *)(param_2 + 0x48);
          uVar23 = *(undefined4 *)(param_2 + 0x4c);
          uVar7 = *(undefined8 *)(param_2 + 0x60);
          param_2[8] = pBVar26[-0x68];
          uVar24 = *(undefined8 *)(pBVar26 + -0x58);
          *(undefined8 *)(param_2 + 0x10) = *(undefined8 *)(pBVar26 + -0x60);
          *(undefined8 *)(param_2 + 0x18) = uVar24;
          uVar24 = *(undefined8 *)(pBVar26 + -0x48);
          *(undefined8 *)(param_2 + 0x20) = *(undefined8 *)(pBVar26 + -0x50);
          *(undefined8 *)(param_2 + 0x28) = uVar24;
          uVar24 = *(undefined8 *)(pBVar26 + -0x38);
          *(undefined8 *)(param_2 + 0x30) = *(undefined8 *)(pBVar26 + -0x40);
          *(undefined8 *)(param_2 + 0x38) = uVar24;
          uVar24 = *(undefined8 *)(pBVar26 + -0x28);
          *(undefined8 *)(param_2 + 0x40) = *(undefined8 *)(pBVar26 + -0x30);
          *(undefined8 *)(param_2 + 0x48) = uVar24;
          uVar24 = *(undefined8 *)(pBVar26 + -0x18);
          *(undefined8 *)(param_2 + 0x50) = *(undefined8 *)(pBVar26 + -0x20);
          *(undefined8 *)(param_2 + 0x58) = uVar24;
          *(undefined8 *)(param_2 + 0x60) = *(undefined8 *)(pBVar26 + -0x10);
          *(long *)(pBVar26 + -0x20) = lVar31;
          *(long *)(pBVar26 + -0x18) = lVar25;
          *(undefined8 *)pBVar27 = uVar4;
          pBVar26[-0x68] = BVar3;
          *(undefined8 *)(pBVar26 + -0x10) = uVar7;
          *(undefined4 *)(pBVar26 + -0x60) = uVar8;
          *(undefined4 *)(pBVar26 + -0x5c) = uVar9;
          *(undefined4 *)(pBVar26 + -0x58) = uVar10;
          *(undefined4 *)(pBVar26 + -0x54) = uVar11;
          *(undefined4 *)(pBVar26 + -0x50) = uVar12;
          *(undefined4 *)(pBVar26 + -0x4c) = uVar13;
          *(undefined4 *)(pBVar26 + -0x48) = uVar14;
          *(undefined4 *)(pBVar26 + -0x44) = uVar15;
          *(undefined4 *)(pBVar26 + -0x40) = uVar16;
          *(undefined4 *)(pBVar26 + -0x3c) = uVar17;
          *(undefined4 *)(pBVar26 + -0x38) = uVar18;
          *(undefined4 *)(pBVar26 + -0x34) = uVar19;
          *(undefined4 *)(pBVar26 + -0x30) = uVar20;
          *(undefined4 *)(pBVar26 + -0x2c) = uVar21;
          *(undefined4 *)(pBVar26 + -0x28) = uVar22;
          *(undefined4 *)(pBVar26 + -0x24) = uVar23;
          pBVar1 = param_2 + 200;
          pBVar2 = param_2 + 0xc0;
          param_2 = param_2 + 0x70;
          lVar31 = *(long *)pBVar2;
          lVar25 = *(long *)pBVar1;
          lVar33 = *(long *)(pBVar26 + -0x88);
          lVar34 = *(long *)(pBVar26 + -0x90);
        }
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (param_2,pBVar35,param_3);
        lVar25 = (long)param_2 - (long)param_1;
        if (lVar25 < 0x701) goto LAB_00121be2;
        pBVar35 = param_2;
      } while (param_3 != 0);
      __make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (param_1,param_2,(_Iter_comp_iter *)&local_b8);
    }
    do {
      local_b8 = *(undefined8 *)(param_2 + -0x70);
      pBVar30 = param_2 + -0x70;
      local_b0 = param_2[-0x68];
      local_a8 = *(undefined4 *)(param_2 + -0x60);
      uStack_a4 = *(undefined4 *)(param_2 + -0x5c);
      uStack_a0 = *(undefined4 *)(param_2 + -0x58);
      uStack_9c = *(undefined4 *)(param_2 + -0x54);
      local_98 = *(undefined4 *)(param_2 + -0x50);
      uStack_94 = *(undefined4 *)(param_2 + -0x4c);
      uStack_90 = *(undefined4 *)(param_2 + -0x48);
      uStack_8c = *(undefined4 *)(param_2 + -0x44);
      local_88 = *(undefined4 *)(param_2 + -0x40);
      uStack_84 = *(undefined4 *)(param_2 + -0x3c);
      uStack_80 = *(undefined4 *)(param_2 + -0x38);
      uStack_7c = *(undefined4 *)(param_2 + -0x34);
      *(undefined8 *)pBVar30 = *(undefined8 *)param_1;
      local_78 = *(undefined4 *)(param_2 + -0x30);
      uStack_74 = *(undefined4 *)(param_2 + -0x2c);
      uStack_70 = *(undefined4 *)(param_2 + -0x28);
      uStack_6c = *(undefined4 *)(param_2 + -0x24);
      local_68 = *(undefined8 *)(param_2 + -0x20);
      local_60 = *(undefined8 *)(param_2 + -0x18);
      param_2[-0x68] = param_1[8];
      uVar4 = *(undefined8 *)(param_1 + 0x18);
      local_58 = *(undefined8 *)(param_2 + -0x10);
      *(undefined8 *)(param_2 + -0x60) = *(undefined8 *)(param_1 + 0x10);
      *(undefined8 *)(param_2 + -0x58) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x28);
      *(undefined8 *)(param_2 + -0x50) = *(undefined8 *)(param_1 + 0x20);
      *(undefined8 *)(param_2 + -0x48) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(param_2 + -0x40) = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(param_2 + -0x38) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x48);
      *(undefined8 *)(param_2 + -0x30) = *(undefined8 *)(param_1 + 0x40);
      *(undefined8 *)(param_2 + -0x28) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x58);
      *(undefined8 *)(param_2 + -0x20) = *(undefined8 *)(param_1 + 0x50);
      *(undefined8 *)(param_2 + -0x18) = uVar4;
      *(undefined8 *)(param_2 + -0x10) = *(undefined8 *)(param_1 + 0x60);
      __adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (param_1,0,((long)pBVar30 - (long)param_1 >> 4) * 0x6db6db6db6db6db7,&local_b8);
      param_2 = pBVar30;
    } while (0x70 < (long)pBVar30 - (long)param_1);
  }
LAB_00121be2:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x00122175) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_0013f1a8;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)param_4;
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_00122413:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0013f1a8;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00122413;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_s...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_s___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined8 *puVar2;
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  long *plVar6;
  TaskGroupContext *pTVar7;
  long *plVar8;
  long *plVar9;
  float *pfVar10;
  uint *puVar11;
  undefined8 uVar12;
  long lVar13;
  long lVar14;
  ulong uVar15;
  long lVar16;
  long lVar17;
  undefined1 (*pauVar18) [16];
  undefined1 (*pauVar19) [16];
  TaskScheduler *pTVar20;
  int iVar21;
  ulong uVar22;
  undefined1 (*pauVar23) [16];
  long lVar24;
  ulong uVar25;
  long in_FS_OFFSET;
  undefined1 auVar26 [16];
  uint uVar27;
  uint uVar29;
  uint uVar30;
  uint uVar31;
  undefined1 auVar28 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  uint uVar34;
  uint uVar36;
  uint uVar37;
  uint uVar38;
  undefined1 auVar35 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 local_d8 [16];
  undefined1 local_c8 [16];
  undefined1 local_b8 [16];
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  long lStack_50;
  ulong local_48;
  long *plStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  lVar16 = *(long *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  plVar6 = *(long **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar16)) {
    pTVar7 = *(TaskGroupContext **)(this + 0x28);
    uVar25 = (ulong)(*(long *)(this + 8) + lVar16) >> 1;
    local_58 = uVar25;
    lStack_50 = lVar16;
    local_48 = *(ulong *)(this + 0x18);
    plStack_40 = plVar6;
    local_38 = pTVar7;
    lVar13 = embree::TaskScheduler::thread();
    if (lVar13 == 0) {
      pTVar20 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar20,(_lambda___1_ *)&local_58,pTVar7,uVar25 - lVar16,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar13 + 0x40080)) goto LAB_00122b29;
      lVar24 = *(long *)(lVar13 + 0xc00c0);
      uVar15 = lVar24 + 0x30 + (ulong)(-(int)lVar24 & 0x3f);
      if (0x80000 < uVar15) goto LAB_00122b29;
      *(ulong *)(lVar13 + 0xc00c0) = uVar15;
      puVar2 = (undefined8 *)(lVar13 + 0x40090 + uVar15);
      *puVar2 = &PTR_execute_0013f1a8;
      puVar2[1] = local_58;
      puVar2[2] = lStack_50;
      puVar2[5] = local_38;
      puVar2[3] = local_48;
      puVar2[4] = plStack_40;
      lVar14 = *(long *)(lVar13 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar13 + 0x40 + lVar14);
      lVar17 = *(long *)(lVar13 + 0xc0100);
      *(undefined4 *)(lVar13 + 0x44 + lVar14) = 1;
      *(undefined1 *)(lVar13 + 0x48 + lVar14) = 1;
      lVar14 = lVar14 + lVar13;
      *(undefined8 **)(lVar14 + 0x50) = puVar2;
      *(long *)(lVar14 + 0x58) = lVar17;
      *(TaskGroupContext **)(lVar14 + 0x60) = pTVar7;
      *(long *)(lVar14 + 0x68) = lVar24;
      *(ulong *)(lVar14 + 0x70) = uVar25 - lVar16;
      if (lVar17 != 0) {
        LOCK();
        *(int *)(lVar17 + 4) = *(int *)(lVar17 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar13 + 0x40080) = *(long *)(lVar13 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar13 + 0x40080) - 1U <= *(ulong *)(lVar13 + 0x40040)) {
        LOCK();
        *(long *)(lVar13 + 0x40040) = *(long *)(lVar13 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_78 = *(undefined8 *)(this + 0x18);
    local_88 = *(long *)(this + 8);
    pTVar7 = *(TaskGroupContext **)(this + 0x28);
    uStack_70 = *(undefined8 *)(this + 0x20);
    uVar15 = local_88 - uVar25;
    uStack_80 = uVar25;
    local_68 = pTVar7;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar20 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar20,(_lambda___1_ *)&local_88,pTVar7,uVar15,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) {
LAB_00122b29:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar13 = *(long *)(lVar16 + 0xc00c0);
      uVar25 = lVar13 + 0x30 + (ulong)(-(int)lVar13 & 0x3f);
      if (0x80000 < uVar25) goto LAB_00122b29;
      *(ulong *)(lVar16 + 0xc00c0) = uVar25;
      puVar2 = (undefined8 *)(lVar16 + 0x40090 + uVar25);
      *puVar2 = &PTR_execute_0013f1a8;
      puVar2[1] = local_88;
      puVar2[2] = uStack_80;
      puVar2[5] = local_68;
      puVar2[3] = local_78;
      puVar2[4] = uStack_70;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar24 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar2;
      *(long *)(lVar17 + 0x58) = lVar24;
      *(TaskGroupContext **)(lVar17 + 0x60) = pTVar7;
      *(long *)(lVar17 + 0x68) = lVar13;
      *(ulong *)(lVar17 + 0x70) = uVar15;
      if (lVar24 != 0) {
        LOCK();
        *(int *)(lVar24 + 4) = *(int *)(lVar24 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar8 = (long *)*plVar6;
    local_c8._4_4_ = _LC1;
    local_c8._0_4_ = _LC1;
    local_c8._8_4_ = _LC1;
    local_c8._12_4_ = _LC1;
    lVar13 = *plVar8;
    plVar9 = (long *)plVar8[2];
    auVar40._0_8_ = CONCAT44(_LC3,_LC3);
    auVar40._8_4_ = _LC3;
    auVar40._12_4_ = _LC3;
    lVar17 = 0;
    uVar15 = lVar16 * plVar8[1];
    auVar39._4_4_ = _LC1;
    auVar39._0_4_ = _LC1;
    auVar39._8_4_ = _LC1;
    auVar39._12_4_ = _LC1;
    auVar26._8_4_ = _LC3;
    auVar26._0_8_ = auVar40._0_8_;
    auVar26._12_4_ = _LC3;
    auVar41._4_4_ = _LC1;
    auVar41._0_4_ = _LC1;
    auVar41._8_4_ = _LC1;
    auVar41._12_4_ = _LC1;
    auVar42._8_4_ = _LC3;
    auVar42._0_8_ = auVar40._0_8_;
    auVar42._12_4_ = _LC3;
    local_b8._4_4_ = _LC1;
    local_b8._0_4_ = _LC1;
    local_b8._8_4_ = _LC1;
    local_b8._12_4_ = _LC1;
    uVar25 = uVar15 / (ulong)plVar8[6];
    lVar24 = 0;
    pauVar19 = (undefined1 (*) [16])
               (lVar13 + -0x20 + ((plVar8[1] + uVar15) / (ulong)plVar8[6]) * 0x20);
    local_d8 = auVar40;
    for (pauVar23 = (undefined1 (*) [16])(uVar25 * 0x20 + lVar13); pauVar23 <= pauVar19;
        pauVar23 = pauVar23 + 2) {
      auVar3 = pauVar23[1];
      auVar4 = *pauVar23;
      pfVar10 = (float *)*plVar9;
      auVar32._0_4_ = auVar3._0_4_ + auVar4._0_4_;
      auVar32._4_4_ = auVar3._4_4_ + auVar4._4_4_;
      auVar32._8_4_ = auVar3._8_4_ + auVar4._8_4_;
      auVar32._12_4_ = auVar3._12_4_ + auVar4._12_4_;
      piVar1 = (int *)plVar9[1];
      puVar11 = (uint *)plVar9[2];
      uVar27 = (uint)((_LC14 * auVar32._0_4_ - *pfVar10) * pfVar10[4] + _LC16);
      uVar29 = (uint)((_UNK_0013f664 * auVar32._4_4_ - pfVar10[1]) * pfVar10[5] + _UNK_0013f674);
      uVar30 = (uint)((_UNK_0013f668 * auVar32._8_4_ - pfVar10[2]) * pfVar10[6] + _UNK_0013f678);
      uVar31 = (uint)((_UNK_0013f66c * auVar32._12_4_ - pfVar10[3]) * pfVar10[7] + _UNK_0013f67c);
      uVar34 = -(uint)((int)uVar27 < (int)__LC18);
      uVar36 = -(uint)((int)uVar29 < (int)_UNK_0013f684);
      uVar37 = -(uint)((int)uVar30 < (int)_UNK_0013f688);
      uVar38 = -(uint)((int)uVar31 < (int)_UNK_0013f68c);
      uVar27 = uVar27 & uVar34 | ~uVar34 & __LC18;
      uVar29 = uVar29 & uVar36 | ~uVar36 & _UNK_0013f684;
      uVar30 = uVar30 & uVar37 | ~uVar37 & _UNK_0013f688;
      uVar31 = uVar31 & uVar38 | ~uVar38 & _UNK_0013f68c;
      auVar28._0_4_ = -(uint)((int)(~-(uint)((int)uVar27 < 0) & uVar27) < *piVar1) & *puVar11;
      auVar28._4_4_ = -(uint)((int)(~-(uint)((int)uVar29 < 0) & uVar29) < piVar1[1]) & puVar11[1];
      auVar28._8_4_ = -(uint)((int)(~-(uint)((int)uVar30 < 0) & uVar30) < piVar1[2]) & puVar11[2];
      auVar28._12_4_ = -(uint)((int)(~-(uint)((int)uVar31 < 0) & uVar31) < piVar1[3]) & puVar11[3];
      iVar21 = movmskps((int)puVar11,auVar28);
      if (iVar21 == 0) {
        while( true ) {
          auVar28 = pauVar19[1];
          auVar5 = *pauVar19;
          pauVar18 = pauVar19 + -2;
          auVar35._0_4_ = auVar28._0_4_ + auVar5._0_4_;
          auVar35._4_4_ = auVar28._4_4_ + auVar5._4_4_;
          auVar35._8_4_ = auVar28._8_4_ + auVar5._8_4_;
          auVar35._12_4_ = auVar28._12_4_ + auVar5._12_4_;
          uVar22 = (ulong)(*(uint *)(*pauVar19 + 0xc) >> 0x1b);
          uVar27 = (uint)((_LC14 * auVar35._0_4_ - *pfVar10) * pfVar10[4] + _LC16);
          uVar29 = (uint)((_UNK_0013f664 * auVar35._4_4_ - pfVar10[1]) * pfVar10[5] + _UNK_0013f674)
          ;
          uVar30 = (uint)((_UNK_0013f668 * auVar35._8_4_ - pfVar10[2]) * pfVar10[6] + _UNK_0013f678)
          ;
          uVar31 = (uint)((_UNK_0013f66c * auVar35._12_4_ - pfVar10[3]) * pfVar10[7] + _UNK_0013f67c
                         );
          uVar34 = -(uint)((int)uVar27 < (int)__LC18);
          uVar36 = -(uint)((int)uVar29 < (int)_UNK_0013f684);
          uVar37 = -(uint)((int)uVar30 < (int)_UNK_0013f688);
          uVar38 = -(uint)((int)uVar31 < (int)_UNK_0013f68c);
          uVar27 = uVar34 & uVar27 | ~uVar34 & __LC18;
          uVar29 = uVar36 & uVar29 | ~uVar36 & _UNK_0013f684;
          uVar30 = uVar37 & uVar30 | ~uVar37 & _UNK_0013f688;
          uVar31 = uVar38 & uVar31 | ~uVar38 & _UNK_0013f68c;
          auVar33._0_4_ = -(uint)((int)(~-(uint)((int)uVar27 < 0) & uVar27) < *piVar1) & *puVar11;
          auVar33._4_4_ =
               -(uint)((int)(~-(uint)((int)uVar29 < 0) & uVar29) < piVar1[1]) & puVar11[1];
          auVar33._8_4_ =
               -(uint)((int)(~-(uint)((int)uVar30 < 0) & uVar30) < piVar1[2]) & puVar11[2];
          auVar33._12_4_ =
               -(uint)((int)(~-(uint)((int)uVar31 < 0) & uVar31) < piVar1[3]) & puVar11[3];
          uVar27 = movmskps((int)uVar15,auVar33);
          uVar15 = (ulong)uVar27;
          if (uVar27 != 0) break;
          local_d8 = minps(local_d8,auVar5);
          local_c8 = maxps(local_c8,auVar28);
          lVar24 = lVar24 + uVar22;
          auVar40 = minps(auVar40,auVar35);
          local_b8 = maxps(local_b8,auVar35);
          pauVar19 = pauVar18;
          if (pauVar18 < pauVar23) {
            goto LAB_0012288a;
          }
        }
        uVar27 = *(uint *)(*pauVar23 + 0xc);
        local_c8 = maxps(local_c8,auVar3);
        *pauVar23 = auVar5;
        auVar26 = minps(auVar26,auVar35);
        local_d8 = minps(local_d8,auVar4);
        local_b8 = maxps(local_b8,auVar32);
        auVar41 = maxps(auVar41,auVar28);
        uVar12 = *(undefined8 *)(pauVar19[1] + 8);
        auVar39 = maxps(auVar39,auVar35);
        lVar24 = lVar24 + (ulong)(uVar27 >> 0x1b);
        auVar42 = minps(auVar42,auVar5);
        auVar40 = minps(auVar40,auVar32);
        *(undefined8 *)pauVar23[1] = *(undefined8 *)pauVar19[1];
        *(undefined8 *)(pauVar23[1] + 8) = uVar12;
        *pauVar19 = auVar4;
        pauVar19[1] = auVar3;
      }
      else {
        auVar42 = minps(auVar42,auVar4);
        auVar41 = maxps(auVar41,auVar3);
        auVar26 = minps(auVar26,auVar32);
        auVar39 = maxps(auVar39,auVar32);
        uVar22 = (ulong)(*(uint *)(*pauVar23 + 0xc) >> 0x1b);
        pauVar18 = pauVar19;
      }
      lVar17 = lVar17 + uVar22;
      pauVar19 = pauVar18;
    }
LAB_0012288a:
    *(ulong *)(*plVar6 + 0x40 + lVar16 * 8) = uVar25;
    *(ulong *)(*plVar6 + 0x280 + lVar16 * 8) = ((long)pauVar23 - lVar13 >> 5) - uVar25;
    lVar16 = lVar16 * 0x50;
    pauVar19 = (undefined1 (*) [16])(*plVar6 + 0xcc0 + lVar16);
    lVar13 = *plVar6 + lVar16;
    pauVar19[2] = auVar26;
    *pauVar19 = auVar42;
    pauVar19[1] = auVar41;
    pauVar19[3] = auVar39;
    *(undefined8 *)(lVar13 + 0xd00) = 0;
    *(long *)(lVar13 + 0xd08) = lVar17;
    puVar2 = (undefined8 *)(*plVar6 + 0x20c0 + lVar16);
    lVar16 = lVar16 + *plVar6;
    *puVar2 = local_d8._0_8_;
    puVar2[1] = local_d8._8_8_;
    *(undefined1 (*) [16])(puVar2 + 4) = auVar40;
    puVar2[2] = local_c8._0_8_;
    puVar2[3] = local_c8._8_8_;
    *(undefined4 *)(puVar2 + 6) = local_b8._0_4_;
    *(undefined4 *)((long)puVar2 + 0x34) = local_b8._4_4_;
    *(undefined4 *)(puVar2 + 7) = local_b8._8_4_;
    *(undefined4 *)((long)puVar2 + 0x3c) = local_b8._12_4_;
    *(undefined8 *)(lVar16 + 0x2100) = 0;
    *(long *)(lVar16 + 0x2108) = lVar24;
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00122f05) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_0013f1c0;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)param_4;
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_001231a3:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0013f1c0;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_001231a3;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* unsigned long embree::parallel_partitioning<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3}>(embree::PrimRef*, unsigned long,
   unsigned long, embree::EmptyTy const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&, unsigned long) */

ulong embree::
      parallel_partitioning<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                (PrimRef *param_1,ulong param_2,ulong param_3,EmptyTy *param_4,PrimInfoT *param_5,
                PrimInfoT *param_6,_lambda_embree__PrimRef_const___1_ *param_7,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimRef_const___2_
                *param_8,_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                         *param_9,ulong param_10)

{
  undefined8 ****ppppuVar1;
  float *pfVar2;
  int *piVar3;
  uint *puVar4;
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  undefined1 auVar8 [16];
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  bool bVar14;
  bool bVar15;
  float fVar16;
  float fVar17;
  uint uVar18;
  uint uVar19;
  uint uVar20;
  uint uVar21;
  undefined8 ****ppppuVar22;
  undefined8 ***pppuVar23;
  ulong uVar24;
  undefined1 (*pauVar25) [16];
  undefined8 ****ppppuVar26;
  PrimRef *pPVar27;
  PrimRef *pPVar28;
  int iVar29;
  PrimRef *pPVar30;
  undefined8 ****ppppuVar31;
  long lVar32;
  undefined8 ****ppppuVar33;
  undefined8 ****ppppuVar34;
  PrimInfoT *pPVar35;
  long lVar36;
  long lVar37;
  undefined8 ***pppuVar38;
  long in_FS_OFFSET;
  uint uVar39;
  uint uVar43;
  uint uVar44;
  undefined1 auVar40 [16];
  uint uVar45;
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  uint uVar46;
  int iVar47;
  uint uVar50;
  int iVar51;
  uint uVar52;
  int iVar53;
  uint uVar54;
  int iVar55;
  undefined1 auVar48 [16];
  undefined1 auVar49 [16];
  float fVar56;
  uint uVar57;
  float fVar58;
  uint uVar59;
  float fVar60;
  uint uVar61;
  float fVar62;
  uint uVar63;
  float fVar64;
  float fVar65;
  float fVar66;
  float fVar67;
  float fVar68;
  float fVar69;
  float fVar70;
  float fVar71;
  long local_98;
  long local_90;
  undefined8 **local_88;
  long local_80;
  undefined8 ***local_78;
  undefined8 ***pppuStack_70;
  undefined8 ***local_68;
  undefined8 ***pppuStack_60;
  long *local_58;
  long *local_50;
  long local_40;
  
  uVar21 = _UNK_0013f68c;
  uVar20 = _UNK_0013f688;
  uVar19 = _UNK_0013f684;
  uVar18 = __LC18;
  fVar17 = _LC16;
  fVar16 = _LC14;
  pppuVar38 = (undefined8 ***)(param_3 - param_2);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pPVar30 = param_1 + param_2 * 0x20;
  if (pppuVar38 < param_10) {
    pPVar27 = param_1 + param_3 * 0x20 + -0x20;
    pPVar35 = param_5;
    for (; pPVar30 <= pPVar27; pPVar30 = pPVar30 + 0x20) {
      auVar40 = *(undefined1 (*) [16])pPVar30;
      pfVar2 = *(float **)param_7;
      auVar41 = *(undefined1 (*) [16])(pPVar30 + 0x10);
      fVar64 = *pfVar2;
      fVar65 = pfVar2[1];
      fVar66 = pfVar2[2];
      fVar67 = pfVar2[3];
      fVar56 = pfVar2[4];
      fVar58 = pfVar2[5];
      fVar60 = pfVar2[6];
      fVar62 = pfVar2[7];
      piVar3 = *(int **)(param_7 + 8);
      fVar68 = auVar41._0_4_ + auVar40._0_4_;
      fVar69 = auVar41._4_4_ + auVar40._4_4_;
      fVar70 = auVar41._8_4_ + auVar40._8_4_;
      fVar71 = auVar41._12_4_ + auVar40._12_4_;
      uVar39 = (uint)((fVar68 * fVar16 - fVar64) * fVar56 + fVar17);
      uVar43 = (uint)((fVar69 * fVar16 - fVar65) * fVar58 + fVar17);
      uVar44 = (uint)((fVar70 * fVar16 - fVar66) * fVar60 + fVar17);
      uVar45 = (uint)((fVar71 * fVar16 - fVar67) * fVar62 + fVar17);
      uVar46 = -(uint)((int)uVar39 < (int)uVar18);
      uVar50 = -(uint)((int)uVar43 < (int)uVar19);
      uVar52 = -(uint)((int)uVar44 < (int)uVar20);
      uVar54 = -(uint)((int)uVar45 < (int)uVar21);
      iVar47 = *piVar3;
      iVar51 = piVar3[1];
      iVar53 = piVar3[2];
      iVar55 = piVar3[3];
      puVar4 = *(uint **)(param_7 + 0x10);
      uVar46 = uVar39 & uVar46 | ~uVar46 & uVar18;
      uVar50 = uVar43 & uVar50 | ~uVar50 & uVar19;
      uVar52 = uVar44 & uVar52 | ~uVar52 & uVar20;
      uVar54 = uVar45 & uVar54 | ~uVar54 & uVar21;
      uVar39 = *puVar4;
      uVar43 = puVar4[1];
      uVar44 = puVar4[2];
      uVar45 = puVar4[3];
      auVar49._0_4_ = -(uint)((int)(~-(uint)((int)uVar46 < 0) & uVar46) < iVar47) & uVar39;
      auVar49._4_4_ = -(uint)((int)(~-(uint)((int)uVar50 < 0) & uVar50) < iVar51) & uVar43;
      auVar49._8_4_ = -(uint)((int)(~-(uint)((int)uVar52 < 0) & uVar52) < iVar53) & uVar44;
      auVar49._12_4_ = -(uint)((int)(~-(uint)((int)uVar54 < 0) & uVar54) < iVar55) & uVar45;
      iVar29 = movmskps((int)puVar4,auVar49);
      pPVar28 = pPVar27;
      if (iVar29 == 0) {
        while( true ) {
          auVar40 = *(undefined1 (*) [16])(pPVar28 + 0x10);
          auVar41 = *(undefined1 (*) [16])pPVar28;
          pPVar27 = pPVar28 + -0x20;
          fVar68 = auVar40._0_4_ + auVar41._0_4_;
          fVar69 = auVar40._4_4_ + auVar41._4_4_;
          fVar70 = auVar40._8_4_ + auVar41._8_4_;
          fVar71 = auVar40._12_4_ + auVar41._12_4_;
          uVar46 = (uint)((fVar68 * fVar16 - fVar64) * fVar56 + fVar17);
          uVar50 = (uint)((fVar69 * fVar16 - fVar65) * fVar58 + fVar17);
          uVar52 = (uint)((fVar70 * fVar16 - fVar66) * fVar60 + fVar17);
          uVar54 = (uint)((fVar71 * fVar16 - fVar67) * fVar62 + fVar17);
          uVar57 = -(uint)((int)uVar46 < (int)uVar18);
          uVar59 = -(uint)((int)uVar50 < (int)uVar19);
          uVar61 = -(uint)((int)uVar52 < (int)uVar20);
          uVar63 = -(uint)((int)uVar54 < (int)uVar21);
          uVar46 = uVar46 & uVar57 | ~uVar57 & uVar18;
          uVar50 = uVar50 & uVar59 | ~uVar59 & uVar19;
          uVar52 = uVar52 & uVar61 | ~uVar61 & uVar20;
          uVar54 = uVar54 & uVar63 | ~uVar63 & uVar21;
          auVar48._0_4_ = -(uint)((int)(~-(uint)((int)uVar46 < 0) & uVar46) < iVar47) & uVar39;
          auVar48._4_4_ = -(uint)((int)(~-(uint)((int)uVar50 < 0) & uVar50) < iVar51) & uVar43;
          auVar48._8_4_ = -(uint)((int)(~-(uint)((int)uVar52 < 0) & uVar52) < iVar53) & uVar44;
          auVar48._12_4_ = -(uint)((int)(~-(uint)((int)uVar54 < 0) & uVar54) < iVar55) & uVar45;
          uVar39 = movmskps((int)pPVar35,auVar48);
          pPVar35 = (PrimInfoT *)(ulong)uVar39;
          if (uVar39 != 0) break;
          *(ulong *)(param_6 + 0x48) =
               *(long *)(param_6 + 0x48) + (ulong)(*(uint *)(pPVar28 + 0xc) >> 0x1b);
          auVar41 = minps(*(undefined1 (*) [16])param_6,auVar41);
          *(undefined1 (*) [16])param_6 = auVar41;
          auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar40);
          *(undefined1 (*) [16])(param_6 + 0x10) = auVar40;
          auVar7._4_4_ = fVar69;
          auVar7._0_4_ = fVar68;
          auVar7._8_4_ = fVar70;
          auVar7._12_4_ = fVar71;
          auVar40 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar7);
          *(undefined1 (*) [16])(param_6 + 0x20) = auVar40;
          auVar8._4_4_ = fVar69;
          auVar8._0_4_ = fVar68;
          auVar8._8_4_ = fVar70;
          auVar8._12_4_ = fVar71;
          auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar8);
          *(undefined1 (*) [16])(param_6 + 0x30) = auVar40;
          if (pPVar27 < pPVar30) goto LAB_00123782;
          pfVar2 = *(float **)param_7;
          fVar64 = *pfVar2;
          fVar65 = pfVar2[1];
          fVar66 = pfVar2[2];
          fVar67 = pfVar2[3];
          fVar56 = pfVar2[4];
          fVar58 = pfVar2[5];
          fVar60 = pfVar2[6];
          fVar62 = pfVar2[7];
          piVar3 = *(int **)(param_7 + 8);
          iVar47 = *piVar3;
          iVar51 = piVar3[1];
          iVar53 = piVar3[2];
          iVar55 = piVar3[3];
          puVar4 = *(uint **)(param_7 + 0x10);
          uVar39 = *puVar4;
          uVar43 = puVar4[1];
          uVar44 = puVar4[2];
          uVar45 = puVar4[3];
          pPVar28 = pPVar27;
        }
        *(ulong *)(param_5 + 0x48) =
             *(long *)(param_5 + 0x48) + (ulong)(*(uint *)(pPVar28 + 0xc) >> 0x1b);
        auVar41 = minps(*(undefined1 (*) [16])param_5,auVar41);
        *(undefined1 (*) [16])param_5 = auVar41;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar40);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar40;
        auVar40._4_4_ = fVar69;
        auVar40._0_4_ = fVar68;
        auVar40._8_4_ = fVar70;
        auVar40._12_4_ = fVar71;
        auVar40 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar40);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar40;
        auVar41._4_4_ = fVar69;
        auVar41._0_4_ = fVar68;
        auVar41._8_4_ = fVar70;
        auVar41._12_4_ = fVar71;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar41);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar40;
        auVar40 = *(undefined1 (*) [16])pPVar30;
        auVar41 = *(undefined1 (*) [16])(pPVar30 + 0x10);
        auVar49 = minps(*(undefined1 (*) [16])param_6,auVar40);
        *(ulong *)(param_6 + 0x48) =
             *(long *)(param_6 + 0x48) + (ulong)(*(uint *)(pPVar30 + 0xc) >> 0x1b);
        *(undefined1 (*) [16])param_6 = auVar49;
        auVar49 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar41);
        auVar42._0_4_ = auVar41._0_4_ + auVar40._0_4_;
        auVar42._4_4_ = auVar41._4_4_ + auVar40._4_4_;
        auVar42._8_4_ = auVar41._8_4_ + auVar40._8_4_;
        auVar42._12_4_ = auVar41._12_4_ + auVar40._12_4_;
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar49;
        auVar40 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar42);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar42);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar40;
        uVar9 = *(undefined8 *)(pPVar28 + 8);
        uVar10 = *(undefined8 *)pPVar30;
        uVar11 = *(undefined8 *)(pPVar30 + 8);
        uVar12 = *(undefined8 *)(pPVar30 + 0x10);
        uVar13 = *(undefined8 *)(pPVar30 + 0x18);
        *(undefined8 *)pPVar30 = *(undefined8 *)pPVar28;
        *(undefined8 *)(pPVar30 + 8) = uVar9;
        uVar9 = *(undefined8 *)(pPVar28 + 0x18);
        *(undefined8 *)(pPVar30 + 0x10) = *(undefined8 *)(pPVar28 + 0x10);
        *(undefined8 *)(pPVar30 + 0x18) = uVar9;
        *(undefined8 *)pPVar28 = uVar10;
        *(undefined8 *)(pPVar28 + 8) = uVar11;
        *(undefined8 *)(pPVar28 + 0x10) = uVar12;
        *(undefined8 *)(pPVar28 + 0x18) = uVar13;
      }
      else {
        auVar40 = minps(*(undefined1 (*) [16])param_5,auVar40);
        *(ulong *)(param_5 + 0x48) =
             *(long *)(param_5 + 0x48) + (ulong)(*(uint *)(pPVar30 + 0xc) >> 0x1b);
        *(undefined1 (*) [16])param_5 = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar41);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar40;
        auVar5._4_4_ = fVar69;
        auVar5._0_4_ = fVar68;
        auVar5._8_4_ = fVar70;
        auVar5._12_4_ = fVar71;
        auVar40 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar5);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar40;
        auVar6._4_4_ = fVar69;
        auVar6._0_4_ = fVar68;
        auVar6._8_4_ = fVar70;
        auVar6._12_4_ = fVar71;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar6);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar40;
      }
    }
LAB_00123782:
    uVar24 = (long)pPVar30 - (long)param_1 >> 5;
    goto LAB_00123325;
  }
  ppppuVar22 = (undefined8 ****)embree::alignedMalloc(0x34c0,0x40);
  ppppuVar22[1] = pppuVar38;
  *ppppuVar22 = (undefined8 ***)pPVar30;
  ppppuVar22[2] = (undefined8 ***)param_7;
  ppppuVar22[3] = (undefined8 ***)param_8;
  ppppuVar22[4] = (undefined8 ***)param_9;
  ppppuVar22[5] = (undefined8 ***)param_4;
  pppuVar23 = (undefined8 ***)embree::TaskScheduler::threadCount();
  pppuVar38 = (undefined8 ***)(((long)pppuVar38 + (param_10 - 1)) / param_10);
  if ((undefined8 ***)0x40 < pppuVar38) {
    pppuVar38 = (undefined8 ***)0x40;
  }
  if (pppuVar38 <= pppuVar23) {
    pppuVar23 = pppuVar38;
  }
  ppppuVar22[6] = pppuVar23;
  local_68 = ppppuVar22;
  if (pppuVar23 == (undefined8 ***)0x0) {
    ppppuVar22[0x50] = (undefined8 ***)0x0;
    ppppuVar22[8] = ppppuVar22[1];
  }
  else {
    local_80 = 0;
    local_78 = &local_68;
    TaskScheduler::
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (0,(ulong)pppuVar23,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_78,
               (TaskGroupContext *)&local_80);
    embree::TaskScheduler::wait();
    if (local_80 != 0) goto LAB_0012363c;
    pppuVar38 = ppppuVar22[6];
    pppuVar23 = ppppuVar22[1];
    ppppuVar22[(long)(pppuVar38 + 10)] = (undefined8 ***)0x0;
    ppppuVar22[(long)(pppuVar38 + 1)] = pppuVar23;
    if (pppuVar38 != (undefined8 ***)0x0) {
      pppuVar38 = (undefined8 ***)0x0;
      pauVar25 = (undefined1 (*) [16])(ppppuVar22 + 0x198);
      do {
        auVar40 = minps(*(undefined1 (*) [16])param_5,*pauVar25);
        pppuVar38 = (undefined8 ***)((long)pppuVar38 + 1);
        *(undefined1 (*) [16])param_5 = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),pauVar25[1]);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar40;
        auVar40 = minps(*(undefined1 (*) [16])(param_5 + 0x20),pauVar25[2]);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),pauVar25[3]);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar40;
        *(long *)(param_5 + 0x40) = *(long *)(param_5 + 0x40) + *(long *)pauVar25[4];
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + *(long *)(pauVar25[4] + 8);
        auVar40 = minps(*(undefined1 (*) [16])param_6,pauVar25[0x140]);
        *(undefined1 (*) [16])param_6 = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),pauVar25[0x141]);
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar40;
        auVar40 = minps(*(undefined1 (*) [16])(param_6 + 0x20),pauVar25[0x142]);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),pauVar25[0x143]);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar40;
        *(long *)(param_6 + 0x40) = *(long *)(param_6 + 0x40) + *(long *)pauVar25[0x144];
        *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + *(long *)(pauVar25[0x144] + 8);
        pppuVar23 = ppppuVar22[6];
        pauVar25 = pauVar25 + 5;
      } while (pppuVar38 < pppuVar23);
      ppppuVar31 = (undefined8 ****)ppppuVar22[0x50];
      ppppuVar33 = ppppuVar31;
      if ((undefined8 ***)0x1 < pppuVar23) {
        ppppuVar26 = ppppuVar22 + 0x51;
        do {
          ppppuVar33 = (undefined8 ****)((long)ppppuVar33 + (long)*ppppuVar26);
          ppppuVar26 = ppppuVar26 + 1;
        } while (ppppuVar22 + (long)(pppuVar23 + 10) != ppppuVar26);
        ppppuVar26 = (undefined8 ****)ppppuVar22[1];
LAB_001234e6:
        local_88 = (undefined8 ***)0x0;
        local_90 = 0;
        local_98 = 0;
        ppppuVar1 = ppppuVar22 + 8;
        bVar15 = false;
        bVar14 = false;
        pppuVar38 = (undefined8 ***)0x0;
        ppppuVar34 = ppppuVar1;
        lVar32 = 0;
        lVar36 = 0;
        do {
          local_68 = *ppppuVar34;
          pppuStack_60 = (undefined8 ***)((long)ppppuVar31 + (long)local_68);
          pppuStack_70 = ppppuVar34[1];
          if ((long)ppppuVar33 <= (long)ppppuVar34[1]) {
            pppuStack_70 = ppppuVar33;
          }
          local_78 = (undefined8 ****)0x0;
          if (-1 < (long)pppuStack_60) {
            local_78 = pppuStack_60;
          }
          if ((long)ppppuVar26 < (long)pppuStack_60) {
            pppuStack_60 = ppppuVar26;
          }
          if ((long)local_68 < (long)ppppuVar33) {
            local_68 = ppppuVar33;
          }
          lVar37 = lVar36;
          if ((long)local_78 < (long)pppuStack_70) {
            bVar14 = true;
            pppuVar38 = (undefined8 ***)((long)pppuStack_70 + ((long)pppuVar38 - (long)local_78));
            lVar37 = lVar36 + 1;
            ppppuVar22[lVar36 * 2 + 0x98] = local_78;
            (ppppuVar22 + lVar36 * 2 + 0x98)[1] = pppuStack_70;
          }
          if ((long)local_68 < (long)pppuStack_60) {
            lVar36 = lVar32 + 1;
            ppppuVar22[lVar32 * 2 + 0x118] = local_68;
            (ppppuVar22 + lVar32 * 2 + 0x118)[1] = pppuStack_60;
            lVar32 = lVar36;
            if (ppppuVar1 + (long)pppuVar23 == ppppuVar34 + 1) goto LAB_00123665;
            bVar15 = true;
          }
          else {
            lVar36 = lVar32;
            if (ppppuVar1 + (long)pppuVar23 == ppppuVar34 + 1) goto code_r0x001235b3;
          }
          ppppuVar31 = (undefined8 ****)ppppuVar34[0x49];
          ppppuVar34 = ppppuVar34 + 1;
          lVar32 = lVar36;
          lVar36 = lVar37;
        } while( true );
      }
      ppppuVar26 = (undefined8 ****)ppppuVar22[1];
      local_98 = 0;
      local_90 = 0;
      local_88 = (undefined8 ***)0x0;
      if (pppuVar23 != (undefined8 ***)0x0) goto LAB_001234e6;
      goto LAB_00123310;
    }
  }
  ppppuVar31 = (undefined8 ****)ppppuVar22[0x50];
  goto LAB_00123310;
code_r0x001235b3:
  if (bVar15) {
LAB_00123665:
    local_90 = lVar32;
  }
  ppppuVar31 = ppppuVar33;
  if ((bVar14) && (local_98 = lVar37, local_88 = pppuVar38, pppuVar38 != (undefined8 ***)0x0)) {
    local_68 = &local_88;
    local_58 = &local_98;
    local_50 = &local_90;
    local_80 = 0;
    local_78 = &local_68;
    pppuStack_60 = ppppuVar22;
    TaskScheduler::
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>con___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (0,(ulong)pppuVar23,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_78,
               (TaskGroupContext *)&local_80);
    embree::TaskScheduler::wait();
    if (local_80 != 0) {
LAB_0012363c:
      local_78 = (undefined8 ***)local_80;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception((_lambda_embree__range<unsigned_long>_const___1_ *)&local_78);
    }
  }
LAB_00123310:
  if (ppppuVar22 != (undefined8 ****)0x0) {
    embree::alignedFree(ppppuVar22);
  }
  uVar24 = param_2 + (long)ppppuVar31;
LAB_00123325:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar24;
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&) [clone .isra.0] */

undefined8 __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_spatial_split
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,SpatialBinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  ulong uVar1;
  ulong uVar2;
  ulong uVar3;
  long lVar4;
  long in_FS_OFFSET;
  EmptyTy local_11b;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimRef_const___2_ local_11a;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
  local_119;
  SpatialBinSplit *local_118;
  undefined4 *local_110;
  undefined8 *local_108;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined4 local_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined8 local_48;
  undefined8 uStack_40;
  long local_30;
  
  local_118 = param_1 + 0x20;
  uVar1 = *(ulong *)(param_2 + 0x48);
  uVar2 = *(ulong *)(param_2 + 0x40);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_58 = *(undefined4 *)(param_1 + 8);
  local_b8 = 0;
  local_b0 = 0;
  local_68 = 0;
  lVar4 = (long)(1 << ((byte)*(undefined4 *)(param_1 + 4) & 0x1f));
  local_e8 = _LC1;
  uStack_e4 = _LC1;
  uStack_e0 = _LC1;
  uStack_dc = _LC1;
  local_c8 = _LC1;
  uStack_c4 = _LC1;
  uStack_c0 = _LC1;
  uStack_bc = _LC1;
  local_48 = (&mm_lookupmask_ps)[lVar4 * 2];
  uStack_40 = *(undefined8 *)(operator_delete + lVar4 * 0x10);
  local_98 = _LC1;
  uStack_94 = _LC1;
  uStack_90 = _LC1;
  uStack_8c = _LC1;
  local_78 = _LC1;
  uStack_74 = _LC1;
  uStack_70 = _LC1;
  uStack_6c = _LC1;
  local_f8 = _LC3;
  uStack_f4 = _LC3;
  uStack_f0 = _LC3;
  uStack_ec = _LC3;
  local_d8 = _LC3;
  uStack_d4 = _LC3;
  uStack_d0 = _LC3;
  uStack_cc = _LC3;
  local_a8 = _LC3;
  uStack_a4 = _LC3;
  uStack_a0 = _LC3;
  uStack_9c = _LC3;
  local_88 = _LC3;
  uStack_84 = _LC3;
  uStack_80 = _LC3;
  uStack_7c = _LC3;
  local_60 = 0;
  local_110 = &local_58;
  local_108 = &local_48;
  uStack_54 = local_58;
  uStack_50 = local_58;
  uStack_4c = local_58;
  uVar3 = parallel_partitioning<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                    ((PrimRef *)this,uVar2,uVar1,&local_11b,(PrimInfoT *)&local_f8,
                     (PrimInfoT *)&local_a8,(_lambda_embree__PrimRef_const___1_ *)&local_118,
                     &local_11a,&local_119,0x80);
  *(ulong *)(param_3 + 0x40) = uVar2;
  *(ulong *)(param_3 + 0x48) = uVar3;
  *(ulong *)param_3 = CONCAT44(uStack_f4,local_f8);
  *(ulong *)(param_3 + 8) = CONCAT44(uStack_ec,uStack_f0);
  *(ulong *)(param_3 + 0x10) = CONCAT44(uStack_e4,local_e8);
  *(ulong *)(param_3 + 0x18) = CONCAT44(uStack_dc,uStack_e0);
  *(ulong *)(param_3 + 0x50) = uVar3;
  *(undefined4 *)(param_3 + 0x20) = local_d8;
  *(undefined4 *)(param_3 + 0x24) = uStack_d4;
  *(undefined4 *)(param_3 + 0x28) = uStack_d0;
  *(undefined4 *)(param_3 + 0x2c) = uStack_cc;
  *(undefined4 *)(param_3 + 0x30) = local_c8;
  *(undefined4 *)(param_3 + 0x34) = uStack_c4;
  *(undefined4 *)(param_3 + 0x38) = uStack_c0;
  *(undefined4 *)(param_3 + 0x3c) = uStack_bc;
  *(ulong *)(param_4 + 0x40) = uVar3;
  *(ulong *)(param_4 + 0x48) = uVar1;
  *(ulong *)(param_4 + 0x50) = uVar1;
  *(ulong *)param_4 = CONCAT44(uStack_a4,local_a8);
  *(ulong *)(param_4 + 8) = CONCAT44(uStack_9c,uStack_a0);
  *(undefined4 *)(param_4 + 0x10) = local_98;
  *(undefined4 *)(param_4 + 0x14) = uStack_94;
  *(undefined4 *)(param_4 + 0x18) = uStack_90;
  *(undefined4 *)(param_4 + 0x1c) = uStack_8c;
  *(undefined4 *)(param_4 + 0x20) = local_88;
  *(undefined4 *)(param_4 + 0x24) = uStack_84;
  *(undefined4 *)(param_4 + 0x28) = uStack_80;
  *(undefined4 *)(param_4 + 0x2c) = uStack_7c;
  *(undefined4 *)(param_4 + 0x30) = local_78;
  *(undefined4 *)(param_4 + 0x34) = uStack_74;
  *(undefined4 *)(param_4 + 0x38) = uStack_70;
  *(undefined4 *)(param_4 + 0x3c) = uStack_6c;
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_b0;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_s...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_s___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  TaskGroupContext *pTVar2;
  long lVar3;
  long *plVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  long *plVar10;
  long lVar11;
  long lVar12;
  ulong uVar13;
  long lVar14;
  long lVar15;
  ulong uVar16;
  TaskScheduler *pTVar17;
  undefined8 *puVar18;
  undefined8 *puVar19;
  long *plVar20;
  ulong uVar21;
  ulong uVar22;
  ulong uVar23;
  undefined8 *puVar24;
  undefined8 *puVar25;
  ulong uVar26;
  long *plVar27;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  long lStack_50;
  ulong local_48;
  undefined8 *puStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  lVar14 = *(long *)(this + 0x10);
  puVar24 = *(undefined8 **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar14)) {
    pTVar2 = *(TaskGroupContext **)(this + 0x28);
    uVar26 = (ulong)(*(long *)(this + 8) + lVar14) >> 1;
    local_58 = uVar26;
    lStack_50 = lVar14;
    local_48 = *(ulong *)(this + 0x18);
    puStack_40 = puVar24;
    local_38 = pTVar2;
    lVar11 = embree::TaskScheduler::thread();
    if (lVar11 == 0) {
      pTVar17 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar17,(_lambda___1_ *)&local_58,pTVar2,uVar26 - lVar14,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar11 + 0x40080)) goto LAB_00124039;
      lVar3 = *(long *)(lVar11 + 0xc00c0);
      uVar13 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar13) goto LAB_00124039;
      *(ulong *)(lVar11 + 0xc00c0) = uVar13;
      puVar24 = (undefined8 *)(lVar11 + 0x40090 + uVar13);
      *puVar24 = &PTR_execute_0013f1c0;
      puVar24[1] = local_58;
      puVar24[2] = lStack_50;
      puVar24[5] = local_38;
      puVar24[3] = local_48;
      puVar24[4] = puStack_40;
      lVar12 = *(long *)(lVar11 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar11 + 0x40 + lVar12);
      lVar15 = *(long *)(lVar11 + 0xc0100);
      *(undefined4 *)(lVar11 + 0x44 + lVar12) = 1;
      *(undefined1 *)(lVar11 + 0x48 + lVar12) = 1;
      lVar12 = lVar12 + lVar11;
      *(undefined8 **)(lVar12 + 0x50) = puVar24;
      *(long *)(lVar12 + 0x58) = lVar15;
      *(TaskGroupContext **)(lVar12 + 0x60) = pTVar2;
      *(long *)(lVar12 + 0x68) = lVar3;
      *(ulong *)(lVar12 + 0x70) = uVar26 - lVar14;
      if (lVar15 != 0) {
        LOCK();
        *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar11 + 0x40080) = *(long *)(lVar11 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar11 + 0x40080) - 1U <= *(ulong *)(lVar11 + 0x40040)) {
        LOCK();
        *(long *)(lVar11 + 0x40040) = *(long *)(lVar11 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_78 = *(undefined8 *)(this + 0x18);
    local_88 = *(long *)(this + 8);
    pTVar2 = *(TaskGroupContext **)(this + 0x28);
    uStack_70 = *(undefined8 *)(this + 0x20);
    uVar13 = local_88 - uVar26;
    uStack_80 = uVar26;
    local_68 = pTVar2;
    lVar14 = embree::TaskScheduler::thread();
    if (lVar14 == 0) {
      pTVar17 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embree::sse2::SpatialBinSplit<16ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_split(embr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar17,(_lambda___1_ *)&local_88,pTVar2,uVar13,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar14 + 0x40080)) {
LAB_00124039:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar11 = *(long *)(lVar14 + 0xc00c0);
      uVar26 = lVar11 + 0x30 + (ulong)(-(int)lVar11 & 0x3f);
      if (0x80000 < uVar26) goto LAB_00124039;
      *(ulong *)(lVar14 + 0xc00c0) = uVar26;
      puVar24 = (undefined8 *)(lVar14 + 0x40090 + uVar26);
      *puVar24 = &PTR_execute_0013f1c0;
      puVar24[1] = local_88;
      puVar24[2] = uStack_80;
      puVar24[5] = local_68;
      puVar24[3] = local_78;
      puVar24[4] = uStack_70;
      lVar15 = *(long *)(lVar14 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar14 + 0x40 + lVar15);
      lVar3 = *(long *)(lVar14 + 0xc0100);
      *(undefined4 *)(lVar14 + 0x44 + lVar15) = 1;
      *(undefined1 *)(lVar14 + 0x48 + lVar15) = 1;
      lVar15 = lVar15 + lVar14;
      *(undefined8 **)(lVar15 + 0x50) = puVar24;
      *(long *)(lVar15 + 0x58) = lVar3;
      *(TaskGroupContext **)(lVar15 + 0x60) = pTVar2;
      *(long *)(lVar15 + 0x68) = lVar11;
      *(ulong *)(lVar15 + 0x70) = uVar13;
      if (lVar3 != 0) {
        LOCK();
        *(int *)(lVar3 + 4) = *(int *)(lVar3 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar14 + 0x40080) = *(long *)(lVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar14 + 0x40080) - 1U <= *(ulong *)(lVar14 + 0x40040)) {
        LOCK();
        *(long *)(lVar14 + 0x40040) = *(long *)(lVar14 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar4 = (long *)puVar24[1];
    lVar11 = plVar4[0x98];
    uVar16 = lVar14 * *(long *)*puVar24;
    uVar13 = plVar4[0x99] - lVar11;
    uVar26 = uVar16 / (ulong)plVar4[6];
    uVar22 = uVar26;
    if (uVar26 < uVar13) {
      plVar20 = plVar4 + 0x98;
    }
    else {
      plVar27 = plVar4 + 0x9a;
      do {
        plVar20 = plVar27;
        lVar11 = *plVar20;
        uVar22 = uVar22 - uVar13;
        uVar13 = plVar20[1] - lVar11;
        plVar27 = plVar20 + 2;
      } while (uVar13 <= uVar22);
    }
    lVar14 = plVar4[0x118];
    uVar23 = plVar4[0x119] - lVar14;
    uVar21 = uVar26;
    if (uVar26 < uVar23) {
      plVar27 = plVar4 + 0x118;
    }
    else {
      plVar10 = plVar4 + 0x11a;
      do {
        plVar27 = plVar10;
        lVar14 = *plVar27;
        uVar21 = uVar21 - uVar23;
        uVar23 = plVar27[1] - lVar14;
        plVar10 = plVar27 + 2;
      } while (uVar23 <= uVar21);
    }
    uVar13 = uVar13 - uVar22;
    uVar26 = (*(long *)*puVar24 + uVar16) / (ulong)plVar4[6] - uVar26;
    uVar23 = uVar23 - uVar21;
    puVar24 = (undefined8 *)((lVar11 + uVar22) * 0x20 + *plVar4);
    puVar25 = (undefined8 *)((lVar14 + uVar21) * 0x20 + *plVar4);
    uVar22 = uVar26;
    if (uVar13 <= uVar26) {
      uVar22 = uVar13;
    }
    if (uVar23 < uVar22) {
      uVar22 = uVar23;
    }
    if (uVar26 != 0) {
joined_r0x00123eb6:
      if (uVar23 == 0) {
        uVar23 = plVar27[3] - plVar27[2];
        puVar25 = (undefined8 *)(plVar27[2] * 0x20 + *plVar4);
        uVar22 = uVar26;
        if (uVar23 <= uVar26) {
          uVar22 = uVar23;
        }
        if (uVar13 < uVar22) {
          uVar22 = uVar13;
        }
        plVar27 = plVar27 + 2;
      }
      uVar26 = uVar26 - uVar22;
      uVar13 = uVar13 - uVar22;
      uVar23 = uVar23 - uVar22;
      puVar18 = puVar24;
      puVar19 = puVar25;
      uVar16 = uVar22;
      if (uVar22 != 0) {
        do {
          uVar5 = puVar19[1];
          uVar6 = *puVar18;
          uVar7 = puVar18[1];
          uVar8 = puVar18[2];
          uVar9 = puVar18[3];
          *puVar18 = *puVar19;
          puVar18[1] = uVar5;
          uVar5 = puVar19[3];
          puVar18[2] = puVar19[2];
          puVar18[3] = uVar5;
          *puVar19 = uVar6;
          puVar19[1] = uVar7;
          puVar19[2] = uVar8;
          puVar19[3] = uVar9;
          uVar16 = uVar16 - 1;
          puVar18 = puVar18 + 4;
          puVar19 = puVar19 + 4;
        } while (uVar16 != 0);
        puVar25 = puVar25 + uVar22 * 4;
        puVar24 = puVar24 + uVar22 * 4;
        if (uVar26 == 0) goto LAB_00123f58;
      }
      if (uVar13 == 0) {
        uVar13 = plVar20[3] - plVar20[2];
        puVar24 = (undefined8 *)(plVar20[2] * 0x20 + *plVar4);
        uVar22 = uVar23;
        if (uVar26 <= uVar23) {
          uVar22 = uVar26;
        }
        if (uVar13 < uVar22) {
          uVar22 = uVar13;
        }
        plVar20 = plVar20 + 2;
      }
      else {
        uVar22 = 0;
      }
      goto joined_r0x00123eb6;
    }
LAB_00123f58:
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00124415) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_0013f1d8;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)param_4;
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_001246b3:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0013f1d8;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_001246b3;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined8 *puVar2;
  undefined4 *puVar3;
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  long *plVar7;
  TaskGroupContext *pTVar8;
  long *plVar9;
  long *plVar10;
  uint *puVar11;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined8 uVar15;
  undefined1 auVar16 [16];
  long lVar17;
  long lVar18;
  ulong uVar19;
  long lVar20;
  long lVar21;
  undefined1 (*pauVar22) [16];
  undefined1 (*pauVar23) [16];
  TaskScheduler *pTVar24;
  int iVar25;
  ulong uVar26;
  undefined1 (*pauVar27) [16];
  uint uVar28;
  long lVar29;
  ulong uVar30;
  long in_FS_OFFSET;
  undefined1 auVar31 [16];
  float fVar32;
  float fVar33;
  float fVar34;
  float fVar35;
  undefined1 auVar36 [16];
  float fVar37;
  float fVar38;
  float fVar39;
  float fVar40;
  undefined4 uVar41;
  undefined4 uVar45;
  undefined4 uVar46;
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  undefined4 uVar47;
  undefined1 auVar48 [16];
  undefined1 auVar49 [16];
  undefined1 auVar50 [16];
  undefined1 local_d8 [16];
  undefined1 local_c8 [16];
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  long lStack_50;
  ulong local_48;
  long *plStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  lVar20 = *(long *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  plVar7 = *(long **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar20)) {
    pTVar8 = *(TaskGroupContext **)(this + 0x28);
    uVar30 = (ulong)(*(long *)(this + 8) + lVar20) >> 1;
    local_58 = uVar30;
    lStack_50 = lVar20;
    local_48 = *(ulong *)(this + 0x18);
    plStack_40 = plVar7;
    local_38 = pTVar8;
    lVar17 = embree::TaskScheduler::thread();
    if (lVar17 == 0) {
      pTVar24 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar24,(_lambda___1_ *)&local_58,pTVar8,uVar30 - lVar20,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar17 + 0x40080)) goto LAB_00124d39;
      lVar29 = *(long *)(lVar17 + 0xc00c0);
      uVar19 = lVar29 + 0x30 + (ulong)(-(int)lVar29 & 0x3f);
      if (0x80000 < uVar19) goto LAB_00124d39;
      *(ulong *)(lVar17 + 0xc00c0) = uVar19;
      puVar2 = (undefined8 *)(lVar17 + 0x40090 + uVar19);
      *puVar2 = &PTR_execute_0013f1d8;
      puVar2[1] = local_58;
      puVar2[2] = lStack_50;
      puVar2[5] = local_38;
      puVar2[3] = local_48;
      puVar2[4] = plStack_40;
      lVar18 = *(long *)(lVar17 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar17 + 0x40 + lVar18);
      lVar21 = *(long *)(lVar17 + 0xc0100);
      *(undefined4 *)(lVar17 + 0x44 + lVar18) = 1;
      *(undefined1 *)(lVar17 + 0x48 + lVar18) = 1;
      lVar18 = lVar18 + lVar17;
      *(undefined8 **)(lVar18 + 0x50) = puVar2;
      *(long *)(lVar18 + 0x58) = lVar21;
      *(TaskGroupContext **)(lVar18 + 0x60) = pTVar8;
      *(long *)(lVar18 + 0x68) = lVar29;
      *(ulong *)(lVar18 + 0x70) = uVar30 - lVar20;
      if (lVar21 != 0) {
        LOCK();
        *(int *)(lVar21 + 4) = *(int *)(lVar21 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar17 + 0x40080) = *(long *)(lVar17 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar17 + 0x40080) - 1U <= *(ulong *)(lVar17 + 0x40040)) {
        LOCK();
        *(long *)(lVar17 + 0x40040) = *(long *)(lVar17 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_78 = *(undefined8 *)(this + 0x18);
    local_88 = *(long *)(this + 8);
    pTVar8 = *(TaskGroupContext **)(this + 0x28);
    uStack_70 = *(undefined8 *)(this + 0x20);
    uVar19 = local_88 - uVar30;
    uStack_80 = uVar30;
    local_68 = pTVar8;
    lVar20 = embree::TaskScheduler::thread();
    if (lVar20 == 0) {
      pTVar24 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar24,(_lambda___1_ *)&local_88,pTVar8,uVar19,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar20 + 0x40080)) {
LAB_00124d39:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar17 = *(long *)(lVar20 + 0xc00c0);
      uVar30 = lVar17 + 0x30 + (ulong)(-(int)lVar17 & 0x3f);
      if (0x80000 < uVar30) goto LAB_00124d39;
      *(ulong *)(lVar20 + 0xc00c0) = uVar30;
      puVar2 = (undefined8 *)(lVar20 + 0x40090 + uVar30);
      *puVar2 = &PTR_execute_0013f1d8;
      puVar2[1] = local_88;
      puVar2[2] = uStack_80;
      puVar2[5] = local_68;
      puVar2[3] = local_78;
      puVar2[4] = uStack_70;
      lVar21 = *(long *)(lVar20 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar20 + 0x40 + lVar21);
      lVar29 = *(long *)(lVar20 + 0xc0100);
      *(undefined4 *)(lVar20 + 0x44 + lVar21) = 1;
      *(undefined1 *)(lVar20 + 0x48 + lVar21) = 1;
      lVar21 = lVar21 + lVar20;
      *(undefined8 **)(lVar21 + 0x50) = puVar2;
      *(long *)(lVar21 + 0x58) = lVar29;
      *(TaskGroupContext **)(lVar21 + 0x60) = pTVar8;
      *(long *)(lVar21 + 0x68) = lVar17;
      *(ulong *)(lVar21 + 0x70) = uVar19;
      if (lVar29 != 0) {
        LOCK();
        *(int *)(lVar29 + 4) = *(int *)(lVar29 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar20 + 0x40080) = *(long *)(lVar20 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar20 + 0x40080) - 1U <= *(ulong *)(lVar20 + 0x40040)) {
        LOCK();
        *(long *)(lVar20 + 0x40040) = *(long *)(lVar20 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar9 = (long *)*plVar7;
    auVar48._0_8_ = CONCAT44(_LC1,_LC1);
    auVar48._8_4_ = _LC1;
    auVar48._12_4_ = _LC1;
    lVar17 = *plVar9;
    plVar10 = (long *)plVar9[2];
    auVar49._0_8_ = CONCAT44(_LC3,_LC3);
    auVar49._8_4_ = _LC3;
    auVar49._12_4_ = _LC3;
    lVar21 = 0;
    uVar19 = lVar20 * plVar9[1];
    auVar36._8_4_ = _LC1;
    auVar36._0_8_ = auVar48._0_8_;
    auVar36._12_4_ = _LC1;
    auVar50._8_4_ = _LC1;
    auVar50._0_8_ = auVar48._0_8_;
    auVar50._12_4_ = _LC1;
    auVar31._8_4_ = _LC3;
    auVar31._0_8_ = auVar49._0_8_;
    auVar31._12_4_ = _LC3;
    uVar30 = uVar19 / (ulong)plVar9[6];
    lVar29 = 0;
    pauVar27 = (undefined1 (*) [16])(uVar30 * 0x20 + lVar17);
    pauVar22 = (undefined1 (*) [16])
               (lVar17 + -0x20 + ((plVar9[1] + uVar19) / (ulong)plVar9[6]) * 0x20);
    uVar41 = _LC3;
    uVar45 = _LC3;
    uVar46 = _LC3;
    uVar47 = _LC3;
    local_d8 = auVar49;
    local_c8 = auVar48;
    while( true ) {
      if (pauVar22 < pauVar27) break;
      auVar4 = pauVar27[1];
      auVar5 = *pauVar27;
      lVar18 = *plVar10;
      fVar32 = auVar4._0_4_ + auVar5._0_4_;
      fVar33 = auVar4._4_4_ + auVar5._4_4_;
      fVar34 = auVar4._8_4_ + auVar5._8_4_;
      fVar35 = auVar4._12_4_ + auVar5._12_4_;
      piVar1 = (int *)plVar10[1];
      puVar11 = (uint *)plVar10[2];
      auVar42._0_4_ =
           -(uint)((int)((fVar32 - *(float *)(lVar18 + 0x20)) * *(float *)(lVar18 + 0x30) + _LC16) <
                  *piVar1) & *puVar11;
      auVar42._4_4_ =
           -(uint)((int)((fVar33 - *(float *)(lVar18 + 0x24)) * *(float *)(lVar18 + 0x34) +
                        _UNK_0013f674) < piVar1[1]) & puVar11[1];
      auVar42._8_4_ =
           -(uint)((int)((fVar34 - *(float *)(lVar18 + 0x28)) * *(float *)(lVar18 + 0x38) +
                        _UNK_0013f678) < piVar1[2]) & puVar11[2];
      auVar42._12_4_ =
           -(uint)((int)((fVar35 - *(float *)(lVar18 + 0x2c)) * *(float *)(lVar18 + 0x3c) +
                        _UNK_0013f67c) < piVar1[3]) & puVar11[3];
      iVar25 = movmskps((int)puVar11,auVar42);
      if (iVar25 == 0) {
        auVar44._4_4_ = uVar45;
        auVar44._0_4_ = uVar41;
        auVar44._8_4_ = uVar46;
        auVar44._12_4_ = uVar47;
        pauVar23 = pauVar22;
        while( true ) {
          auVar42 = pauVar23[1];
          auVar6 = *pauVar23;
          pauVar22 = pauVar23 + -2;
          uVar26 = (ulong)(*(uint *)(*pauVar23 + 0xc) >> 0x1b);
          fVar37 = auVar42._0_4_ + auVar6._0_4_;
          fVar38 = auVar42._4_4_ + auVar6._4_4_;
          fVar39 = auVar42._8_4_ + auVar6._8_4_;
          fVar40 = auVar42._12_4_ + auVar6._12_4_;
          auVar43._0_4_ =
               -(uint)((int)((fVar37 - *(float *)(lVar18 + 0x20)) * *(float *)(lVar18 + 0x30) +
                            _LC16) < *piVar1) & *puVar11;
          auVar43._4_4_ =
               -(uint)((int)((fVar38 - *(float *)(lVar18 + 0x24)) * *(float *)(lVar18 + 0x34) +
                            _UNK_0013f674) < piVar1[1]) & puVar11[1];
          auVar43._8_4_ =
               -(uint)((int)((fVar39 - *(float *)(lVar18 + 0x28)) * *(float *)(lVar18 + 0x38) +
                            _UNK_0013f678) < piVar1[2]) & puVar11[2];
          auVar43._12_4_ =
               -(uint)((int)((fVar40 - *(float *)(lVar18 + 0x2c)) * *(float *)(lVar18 + 0x3c) +
                            _UNK_0013f67c) < piVar1[3]) & puVar11[3];
          uVar28 = movmskps((int)uVar19,auVar43);
          uVar19 = (ulong)uVar28;
          if (uVar28 != 0) break;
          auVar44 = minps(auVar44,auVar6);
          local_c8 = maxps(local_c8,auVar42);
          lVar29 = lVar29 + uVar26;
          auVar13._4_4_ = fVar38;
          auVar13._0_4_ = fVar37;
          auVar13._8_4_ = fVar39;
          auVar13._12_4_ = fVar40;
          auVar49 = minps(auVar49,auVar13);
          auVar14._4_4_ = fVar38;
          auVar14._0_4_ = fVar37;
          auVar14._8_4_ = fVar39;
          auVar14._12_4_ = fVar40;
          auVar48 = maxps(auVar48,auVar14);
          pauVar23 = pauVar22;
          if (pauVar22 < pauVar27) {
            uVar41 = auVar44._0_4_;
            uVar45 = auVar44._4_4_;
            uVar46 = auVar44._8_4_;
            uVar47 = auVar44._12_4_;
            goto LAB_00124af6;
          }
        }
        uVar28 = *(uint *)(*pauVar27 + 0xc);
        *pauVar27 = auVar6;
        auVar12._4_4_ = fVar38;
        auVar12._0_4_ = fVar37;
        auVar12._8_4_ = fVar39;
        auVar12._12_4_ = fVar40;
        local_d8 = minps(local_d8,auVar12);
        local_c8 = maxps(local_c8,auVar4);
        auVar16._4_4_ = fVar33;
        auVar16._0_4_ = fVar32;
        auVar16._8_4_ = fVar34;
        auVar16._12_4_ = fVar35;
        auVar44 = minps(auVar44,auVar5);
        auVar50 = maxps(auVar50,auVar42);
        auVar31 = minps(auVar31,auVar6);
        auVar6._4_4_ = fVar38;
        auVar6._0_4_ = fVar37;
        auVar6._8_4_ = fVar39;
        auVar6._12_4_ = fVar40;
        auVar36 = maxps(auVar36,auVar6);
        lVar29 = lVar29 + (ulong)(uVar28 >> 0x1b);
        uVar15 = *(undefined8 *)(pauVar23[1] + 8);
        auVar49 = minps(auVar49,auVar16);
        auVar48 = maxps(auVar48,auVar16);
        uVar41 = auVar44._0_4_;
        uVar45 = auVar44._4_4_;
        uVar46 = auVar44._8_4_;
        uVar47 = auVar44._12_4_;
        *(undefined8 *)pauVar27[1] = *(undefined8 *)pauVar23[1];
        *(undefined8 *)(pauVar27[1] + 8) = uVar15;
        *pauVar23 = auVar5;
        pauVar23[1] = auVar4;
      }
      else {
        auVar31 = minps(auVar31,auVar5);
        auVar50 = maxps(auVar50,auVar4);
        auVar4._4_4_ = fVar33;
        auVar4._0_4_ = fVar32;
        auVar4._8_4_ = fVar34;
        auVar4._12_4_ = fVar35;
        auVar36 = maxps(auVar36,auVar4);
        auVar5._4_4_ = fVar33;
        auVar5._0_4_ = fVar32;
        auVar5._8_4_ = fVar34;
        auVar5._12_4_ = fVar35;
        local_d8 = minps(local_d8,auVar5);
        uVar26 = (ulong)(*(uint *)(*pauVar27 + 0xc) >> 0x1b);
      }
      lVar21 = lVar21 + uVar26;
      pauVar27 = pauVar27 + 2;
    }
LAB_00124af6:
    *(ulong *)(*plVar7 + 0x40 + lVar20 * 8) = uVar30;
    *(ulong *)(*plVar7 + 0x280 + lVar20 * 8) = ((long)pauVar27 - lVar17 >> 5) - uVar30;
    lVar20 = lVar20 * 0x50;
    pauVar22 = (undefined1 (*) [16])(*plVar7 + 0xcc0 + lVar20);
    lVar17 = *plVar7 + lVar20;
    pauVar22[3] = auVar36;
    *pauVar22 = auVar31;
    pauVar22[1] = auVar50;
    *(undefined8 *)pauVar22[2] = local_d8._0_8_;
    *(undefined8 *)(pauVar22[2] + 8) = local_d8._8_8_;
    *(undefined8 *)(lVar17 + 0xd00) = 0;
    *(long *)(lVar17 + 0xd08) = lVar21;
    puVar3 = (undefined4 *)(*plVar7 + 0x20c0 + lVar20);
    lVar20 = lVar20 + *plVar7;
    *puVar3 = uVar41;
    puVar3[1] = uVar45;
    puVar3[2] = uVar46;
    puVar3[3] = uVar47;
    *(undefined8 *)(puVar3 + 4) = local_c8._0_8_;
    *(undefined8 *)(puVar3 + 6) = local_c8._8_8_;
    *(undefined1 (*) [16])(puVar3 + 8) = auVar49;
    *(undefined1 (*) [16])(puVar3 + 0xc) = auVar48;
    *(undefined8 *)(lVar20 + 0x2100) = 0;
    *(long *)(lVar20 + 0x2108) = lVar29;
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00125115) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_0013f1f0;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  undefined8 uStack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_30 = *(undefined8 *)param_4;
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_001253b3:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0013f1f0;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = uStack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_001253b3;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* unsigned long embree::parallel_partitioning<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3}>(embree::PrimRef*, unsigned long,
   unsigned long, embree::EmptyTy const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&, unsigned long) */

ulong embree::
      parallel_partitioning<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                (PrimRef *param_1,ulong param_2,ulong param_3,EmptyTy *param_4,PrimInfoT *param_5,
                PrimInfoT *param_6,_lambda_embree__PrimRef_const___1_ *param_7,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimRef_const___2_
                *param_8,_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                         *param_9,ulong param_10)

{
  undefined8 ****ppppuVar1;
  int *piVar2;
  uint *puVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  bool bVar9;
  bool bVar10;
  float fVar11;
  undefined8 ****ppppuVar12;
  undefined8 ***pppuVar13;
  ulong uVar14;
  undefined1 (*pauVar15) [16];
  undefined8 ****ppppuVar16;
  PrimRef *pPVar17;
  PrimRef *pPVar18;
  int iVar19;
  PrimRef *pPVar20;
  undefined8 ****ppppuVar21;
  long lVar22;
  undefined8 ****ppppuVar23;
  undefined8 ****ppppuVar24;
  uint uVar25;
  long lVar27;
  long lVar28;
  undefined8 ***pppuVar29;
  long in_FS_OFFSET;
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  int iVar33;
  int iVar36;
  int iVar37;
  int iVar38;
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar39 [16];
  uint uVar40;
  uint uVar41;
  uint uVar42;
  float fVar43;
  float fVar44;
  float fVar45;
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  long local_98;
  long local_90;
  undefined8 **local_88;
  long local_80;
  undefined8 ***local_78;
  undefined8 ***pppuStack_70;
  undefined8 ***local_68;
  undefined8 ***pppuStack_60;
  long *local_58;
  long *local_50;
  long local_40;
  PrimInfoT *pPVar26;
  
  fVar11 = _LC16;
  pppuVar29 = (undefined8 ***)(param_3 - param_2);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pPVar20 = param_1 + param_2 * 0x20;
  if (pppuVar29 < param_10) {
    pPVar17 = param_1 + param_3 * 0x20 + -0x20;
    pPVar26 = param_5;
    for (; pPVar20 <= pPVar17; pPVar20 = pPVar20 + 0x20) {
      auVar30 = *(undefined1 (*) [16])(pPVar20 + 0x10);
      auVar31 = *(undefined1 (*) [16])pPVar20;
      lVar22 = *(long *)param_7;
      fVar51 = auVar30._0_4_ + auVar31._0_4_;
      fVar52 = auVar30._4_4_ + auVar31._4_4_;
      fVar53 = auVar30._8_4_ + auVar31._8_4_;
      fVar54 = auVar30._12_4_ + auVar31._12_4_;
      fVar47 = *(float *)(lVar22 + 0x20);
      fVar48 = *(float *)(lVar22 + 0x24);
      fVar49 = *(float *)(lVar22 + 0x28);
      fVar50 = *(float *)(lVar22 + 0x2c);
      fVar43 = *(float *)(lVar22 + 0x30);
      fVar44 = *(float *)(lVar22 + 0x34);
      fVar45 = *(float *)(lVar22 + 0x38);
      fVar46 = *(float *)(lVar22 + 0x3c);
      piVar2 = *(int **)(param_7 + 8);
      iVar33 = *piVar2;
      iVar36 = piVar2[1];
      iVar37 = piVar2[2];
      iVar38 = piVar2[3];
      puVar3 = *(uint **)(param_7 + 0x10);
      uVar25 = *puVar3;
      uVar40 = puVar3[1];
      uVar41 = puVar3[2];
      uVar42 = puVar3[3];
      auVar35._0_4_ = -(uint)((int)((fVar51 - fVar47) * fVar43 + fVar11) < iVar33) & uVar25;
      auVar35._4_4_ = -(uint)((int)((fVar52 - fVar48) * fVar44 + fVar11) < iVar36) & uVar40;
      auVar35._8_4_ = -(uint)((int)((fVar53 - fVar49) * fVar45 + fVar11) < iVar37) & uVar41;
      auVar35._12_4_ = -(uint)((int)((fVar54 - fVar50) * fVar46 + fVar11) < iVar38) & uVar42;
      iVar19 = movmskps((int)puVar3,auVar35);
      pPVar18 = pPVar17;
      if (iVar19 == 0) {
        while( true ) {
          auVar30 = *(undefined1 (*) [16])(pPVar18 + 0x10);
          auVar31 = *(undefined1 (*) [16])pPVar18;
          pPVar17 = pPVar18 + -0x20;
          auVar39._0_4_ = auVar30._0_4_ + auVar31._0_4_;
          auVar39._4_4_ = auVar30._4_4_ + auVar31._4_4_;
          auVar39._8_4_ = auVar30._8_4_ + auVar31._8_4_;
          auVar39._12_4_ = auVar30._12_4_ + auVar31._12_4_;
          auVar34._0_4_ =
               -(uint)((int)((auVar39._0_4_ - fVar47) * fVar43 + fVar11) < iVar33) & uVar25;
          auVar34._4_4_ =
               -(uint)((int)((auVar39._4_4_ - fVar48) * fVar44 + fVar11) < iVar36) & uVar40;
          auVar34._8_4_ =
               -(uint)((int)((auVar39._8_4_ - fVar49) * fVar45 + fVar11) < iVar37) & uVar41;
          auVar34._12_4_ =
               -(uint)((int)((auVar39._12_4_ - fVar50) * fVar46 + fVar11) < iVar38) & uVar42;
          uVar25 = movmskps((int)pPVar26,auVar34);
          pPVar26 = (PrimInfoT *)(ulong)uVar25;
          if (uVar25 != 0) break;
          *(ulong *)(param_6 + 0x48) =
               *(long *)(param_6 + 0x48) + (ulong)(*(uint *)(pPVar18 + 0xc) >> 0x1b);
          auVar31 = minps(*(undefined1 (*) [16])param_6,auVar31);
          *(undefined1 (*) [16])param_6 = auVar31;
          auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar30);
          *(undefined1 (*) [16])(param_6 + 0x10) = auVar30;
          auVar30 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar39);
          *(undefined1 (*) [16])(param_6 + 0x20) = auVar30;
          auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar39);
          *(undefined1 (*) [16])(param_6 + 0x30) = auVar30;
          if (pPVar17 < pPVar20) goto LAB_00125941;
          lVar22 = *(long *)param_7;
          fVar47 = *(float *)(lVar22 + 0x20);
          fVar48 = *(float *)(lVar22 + 0x24);
          fVar49 = *(float *)(lVar22 + 0x28);
          fVar50 = *(float *)(lVar22 + 0x2c);
          fVar43 = *(float *)(lVar22 + 0x30);
          fVar44 = *(float *)(lVar22 + 0x34);
          fVar45 = *(float *)(lVar22 + 0x38);
          fVar46 = *(float *)(lVar22 + 0x3c);
          piVar2 = *(int **)(param_7 + 8);
          iVar33 = *piVar2;
          iVar36 = piVar2[1];
          iVar37 = piVar2[2];
          iVar38 = piVar2[3];
          puVar3 = *(uint **)(param_7 + 0x10);
          uVar25 = *puVar3;
          uVar40 = puVar3[1];
          uVar41 = puVar3[2];
          uVar42 = puVar3[3];
          pPVar18 = pPVar17;
        }
        *(ulong *)(param_5 + 0x48) =
             *(long *)(param_5 + 0x48) + (ulong)(*(uint *)(pPVar18 + 0xc) >> 0x1b);
        auVar31 = minps(*(undefined1 (*) [16])param_5,auVar31);
        *(undefined1 (*) [16])param_5 = auVar31;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar30);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar30;
        auVar30 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar39);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar30;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar39);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar30;
        auVar30 = *(undefined1 (*) [16])pPVar20;
        auVar31 = *(undefined1 (*) [16])(pPVar20 + 0x10);
        auVar35 = minps(*(undefined1 (*) [16])param_6,auVar30);
        *(ulong *)(param_6 + 0x48) =
             *(long *)(param_6 + 0x48) + (ulong)(*(uint *)(pPVar20 + 0xc) >> 0x1b);
        *(undefined1 (*) [16])param_6 = auVar35;
        auVar35 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar31);
        auVar32._0_4_ = auVar31._0_4_ + auVar30._0_4_;
        auVar32._4_4_ = auVar31._4_4_ + auVar30._4_4_;
        auVar32._8_4_ = auVar31._8_4_ + auVar30._8_4_;
        auVar32._12_4_ = auVar31._12_4_ + auVar30._12_4_;
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar35;
        auVar30 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar32);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar30;
        auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar32);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar30;
        uVar4 = *(undefined8 *)(pPVar18 + 8);
        uVar5 = *(undefined8 *)pPVar20;
        uVar6 = *(undefined8 *)(pPVar20 + 8);
        uVar7 = *(undefined8 *)(pPVar20 + 0x10);
        uVar8 = *(undefined8 *)(pPVar20 + 0x18);
        *(undefined8 *)pPVar20 = *(undefined8 *)pPVar18;
        *(undefined8 *)(pPVar20 + 8) = uVar4;
        uVar4 = *(undefined8 *)(pPVar18 + 0x18);
        *(undefined8 *)(pPVar20 + 0x10) = *(undefined8 *)(pPVar18 + 0x10);
        *(undefined8 *)(pPVar20 + 0x18) = uVar4;
        *(undefined8 *)pPVar18 = uVar5;
        *(undefined8 *)(pPVar18 + 8) = uVar6;
        *(undefined8 *)(pPVar18 + 0x10) = uVar7;
        *(undefined8 *)(pPVar18 + 0x18) = uVar8;
      }
      else {
        auVar31 = minps(*(undefined1 (*) [16])param_5,auVar31);
        *(ulong *)(param_5 + 0x48) =
             *(long *)(param_5 + 0x48) + (ulong)(*(uint *)(pPVar20 + 0xc) >> 0x1b);
        *(undefined1 (*) [16])param_5 = auVar31;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar30);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar30;
        auVar30._4_4_ = fVar52;
        auVar30._0_4_ = fVar51;
        auVar30._8_4_ = fVar53;
        auVar30._12_4_ = fVar54;
        auVar30 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar30);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar30;
        auVar31._4_4_ = fVar52;
        auVar31._0_4_ = fVar51;
        auVar31._8_4_ = fVar53;
        auVar31._12_4_ = fVar54;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar31);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar30;
      }
    }
LAB_00125941:
    uVar14 = (long)pPVar20 - (long)param_1 >> 5;
    goto LAB_00125535;
  }
  ppppuVar12 = (undefined8 ****)embree::alignedMalloc(0x34c0,0x40);
  ppppuVar12[1] = pppuVar29;
  *ppppuVar12 = (undefined8 ***)pPVar20;
  ppppuVar12[2] = (undefined8 ***)param_7;
  ppppuVar12[3] = (undefined8 ***)param_8;
  ppppuVar12[4] = (undefined8 ***)param_9;
  ppppuVar12[5] = (undefined8 ***)param_4;
  pppuVar13 = (undefined8 ***)embree::TaskScheduler::threadCount();
  pppuVar29 = (undefined8 ***)(((long)pppuVar29 + (param_10 - 1)) / param_10);
  if ((undefined8 ***)0x40 < pppuVar29) {
    pppuVar29 = (undefined8 ***)0x40;
  }
  if (pppuVar29 <= pppuVar13) {
    pppuVar13 = pppuVar29;
  }
  ppppuVar12[6] = pppuVar13;
  local_68 = ppppuVar12;
  if (pppuVar13 == (undefined8 ***)0x0) {
    ppppuVar12[0x50] = (undefined8 ***)0x0;
    ppppuVar12[8] = ppppuVar12[1];
  }
  else {
    local_80 = 0;
    local_78 = &local_68;
    TaskScheduler::
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (0,(ulong)pppuVar13,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_78,
               (TaskGroupContext *)&local_80);
    embree::TaskScheduler::wait();
    if (local_80 != 0) goto LAB_0012584c;
    pppuVar29 = ppppuVar12[6];
    pppuVar13 = ppppuVar12[1];
    ppppuVar12[(long)(pppuVar29 + 10)] = (undefined8 ***)0x0;
    ppppuVar12[(long)(pppuVar29 + 1)] = pppuVar13;
    if (pppuVar29 != (undefined8 ***)0x0) {
      pppuVar29 = (undefined8 ***)0x0;
      pauVar15 = (undefined1 (*) [16])(ppppuVar12 + 0x198);
      do {
        auVar30 = minps(*(undefined1 (*) [16])param_5,*pauVar15);
        pppuVar29 = (undefined8 ***)((long)pppuVar29 + 1);
        *(undefined1 (*) [16])param_5 = auVar30;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),pauVar15[1]);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar30;
        auVar30 = minps(*(undefined1 (*) [16])(param_5 + 0x20),pauVar15[2]);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar30;
        auVar30 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),pauVar15[3]);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar30;
        *(long *)(param_5 + 0x40) = *(long *)(param_5 + 0x40) + *(long *)pauVar15[4];
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + *(long *)(pauVar15[4] + 8);
        auVar30 = minps(*(undefined1 (*) [16])param_6,pauVar15[0x140]);
        *(undefined1 (*) [16])param_6 = auVar30;
        auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),pauVar15[0x141]);
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar30;
        auVar30 = minps(*(undefined1 (*) [16])(param_6 + 0x20),pauVar15[0x142]);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar30;
        auVar30 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),pauVar15[0x143]);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar30;
        *(long *)(param_6 + 0x40) = *(long *)(param_6 + 0x40) + *(long *)pauVar15[0x144];
        *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + *(long *)(pauVar15[0x144] + 8);
        pppuVar13 = ppppuVar12[6];
        pauVar15 = pauVar15 + 5;
      } while (pppuVar29 < pppuVar13);
      ppppuVar21 = (undefined8 ****)ppppuVar12[0x50];
      ppppuVar23 = ppppuVar21;
      if ((undefined8 ***)0x1 < pppuVar13) {
        ppppuVar16 = ppppuVar12 + 0x51;
        do {
          ppppuVar23 = (undefined8 ****)((long)ppppuVar23 + (long)*ppppuVar16);
          ppppuVar16 = ppppuVar16 + 1;
        } while (ppppuVar12 + (long)(pppuVar13 + 10) != ppppuVar16);
        ppppuVar16 = (undefined8 ****)ppppuVar12[1];
LAB_001256f6:
        local_88 = (undefined8 ***)0x0;
        local_90 = 0;
        local_98 = 0;
        ppppuVar1 = ppppuVar12 + 8;
        bVar10 = false;
        bVar9 = false;
        pppuVar29 = (undefined8 ***)0x0;
        ppppuVar24 = ppppuVar1;
        lVar22 = 0;
        lVar27 = 0;
        do {
          local_68 = *ppppuVar24;
          pppuStack_60 = (undefined8 ***)((long)ppppuVar21 + (long)local_68);
          pppuStack_70 = ppppuVar24[1];
          if ((long)ppppuVar23 <= (long)ppppuVar24[1]) {
            pppuStack_70 = ppppuVar23;
          }
          local_78 = (undefined8 ****)0x0;
          if (-1 < (long)pppuStack_60) {
            local_78 = pppuStack_60;
          }
          if ((long)ppppuVar16 < (long)pppuStack_60) {
            pppuStack_60 = ppppuVar16;
          }
          if ((long)local_68 < (long)ppppuVar23) {
            local_68 = ppppuVar23;
          }
          lVar28 = lVar27;
          if ((long)local_78 < (long)pppuStack_70) {
            bVar9 = true;
            pppuVar29 = (undefined8 ***)((long)pppuStack_70 + ((long)pppuVar29 - (long)local_78));
            lVar28 = lVar27 + 1;
            ppppuVar12[lVar27 * 2 + 0x98] = local_78;
            (ppppuVar12 + lVar27 * 2 + 0x98)[1] = pppuStack_70;
          }
          if ((long)local_68 < (long)pppuStack_60) {
            lVar27 = lVar22 + 1;
            ppppuVar12[lVar22 * 2 + 0x118] = local_68;
            (ppppuVar12 + lVar22 * 2 + 0x118)[1] = pppuStack_60;
            lVar22 = lVar27;
            if (ppppuVar1 + (long)pppuVar13 == ppppuVar24 + 1) goto LAB_00125875;
            bVar10 = true;
          }
          else {
            lVar27 = lVar22;
            if (ppppuVar1 + (long)pppuVar13 == ppppuVar24 + 1) goto code_r0x001257c3;
          }
          ppppuVar21 = (undefined8 ****)ppppuVar24[0x49];
          ppppuVar24 = ppppuVar24 + 1;
          lVar22 = lVar27;
          lVar27 = lVar28;
        } while( true );
      }
      ppppuVar16 = (undefined8 ****)ppppuVar12[1];
      local_98 = 0;
      local_90 = 0;
      local_88 = (undefined8 ***)0x0;
      if (pppuVar13 != (undefined8 ***)0x0) goto LAB_001256f6;
      goto LAB_00125520;
    }
  }
  ppppuVar21 = (undefined8 ****)ppppuVar12[0x50];
  goto LAB_00125520;
code_r0x001257c3:
  if (bVar10) {
LAB_00125875:
    local_90 = lVar22;
  }
  ppppuVar21 = ppppuVar23;
  if ((bVar9) && (local_98 = lVar28, local_88 = pppuVar29, pppuVar29 != (undefined8 ***)0x0)) {
    local_68 = &local_88;
    local_58 = &local_98;
    local_50 = &local_90;
    local_80 = 0;
    local_78 = &local_68;
    pppuStack_60 = ppppuVar12;
    TaskScheduler::
    spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimIn___mbree::Vec3fa>>&)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
              (0,(ulong)pppuVar13,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_78,
               (TaskGroupContext *)&local_80);
    embree::TaskScheduler::wait();
    if (local_80 != 0) {
LAB_0012584c:
      local_78 = (undefined8 ***)local_80;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception((_lambda_embree__range<unsigned_long>_const___1_ *)&local_78);
    }
  }
LAB_00125520:
  if (ppppuVar12 != (undefined8 ****)0x0) {
    embree::alignedFree(ppppuVar12);
  }
  uVar14 = param_2 + (long)ppppuVar21;
LAB_00125535:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return uVar14;
}



/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&) [clone .isra.0] */

undefined8 __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_object_split
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,BinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  ulong uVar1;
  ulong uVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  EmptyTy local_11b;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimRef_const___2_ local_11a;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
  local_119;
  BinSplit *local_118;
  undefined4 *local_110;
  undefined8 *local_108;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined4 local_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined8 local_48;
  undefined8 uStack_40;
  long local_30;
  
  uVar1 = *(ulong *)(param_2 + 0x48);
  uVar2 = *(ulong *)(param_2 + 0x40);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_58 = *(undefined4 *)(param_1 + 8);
  local_110 = &local_58;
  local_b8 = 0;
  local_b0 = 0;
  uVar3 = (ulong)(uint)(1 << ((byte)*(undefined4 *)(param_1 + 4) & 0x1f));
  local_e8 = _LC1;
  uStack_e4 = _LC1;
  uStack_e0 = _LC1;
  uStack_dc = _LC1;
  local_48 = (&mm_lookupmask_ps)[uVar3 * 2];
  uStack_40 = *(undefined8 *)(operator_delete + uVar3 * 0x10);
  local_c8 = _LC1;
  uStack_c4 = _LC1;
  uStack_c0 = _LC1;
  uStack_bc = _LC1;
  local_98 = _LC1;
  uStack_94 = _LC1;
  uStack_90 = _LC1;
  uStack_8c = _LC1;
  local_78 = _LC1;
  uStack_74 = _LC1;
  uStack_70 = _LC1;
  uStack_6c = _LC1;
  local_f8 = _LC3;
  uStack_f4 = _LC3;
  uStack_f0 = _LC3;
  uStack_ec = _LC3;
  local_d8 = _LC3;
  uStack_d4 = _LC3;
  uStack_d0 = _LC3;
  uStack_cc = _LC3;
  local_a8 = _LC3;
  uStack_a4 = _LC3;
  uStack_a0 = _LC3;
  uStack_9c = _LC3;
  local_88 = _LC3;
  uStack_84 = _LC3;
  uStack_80 = _LC3;
  uStack_7c = _LC3;
  local_68 = 0;
  local_60 = 0;
  local_108 = &local_48;
  local_118 = param_1;
  uStack_54 = local_58;
  uStack_50 = local_58;
  uStack_4c = local_58;
  uVar3 = parallel_partitioning<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                    ((PrimRef *)this,uVar2,uVar1,&local_11b,(PrimInfoT *)&local_f8,
                     (PrimInfoT *)&local_a8,(_lambda_embree__PrimRef_const___1_ *)&local_118,
                     &local_11a,&local_119,0x80);
  *(ulong *)(param_3 + 0x40) = uVar2;
  *(ulong *)(param_3 + 0x48) = uVar3;
  *(ulong *)param_3 = CONCAT44(uStack_f4,local_f8);
  *(ulong *)(param_3 + 8) = CONCAT44(uStack_ec,uStack_f0);
  *(ulong *)(param_3 + 0x10) = CONCAT44(uStack_e4,local_e8);
  *(ulong *)(param_3 + 0x18) = CONCAT44(uStack_dc,uStack_e0);
  *(ulong *)(param_3 + 0x50) = uVar3;
  *(undefined4 *)(param_3 + 0x20) = local_d8;
  *(undefined4 *)(param_3 + 0x24) = uStack_d4;
  *(undefined4 *)(param_3 + 0x28) = uStack_d0;
  *(undefined4 *)(param_3 + 0x2c) = uStack_cc;
  *(undefined4 *)(param_3 + 0x30) = local_c8;
  *(undefined4 *)(param_3 + 0x34) = uStack_c4;
  *(undefined4 *)(param_3 + 0x38) = uStack_c0;
  *(undefined4 *)(param_3 + 0x3c) = uStack_bc;
  *(ulong *)(param_4 + 0x40) = uVar3;
  *(ulong *)(param_4 + 0x48) = uVar1;
  *(ulong *)(param_4 + 0x50) = uVar1;
  *(ulong *)param_4 = CONCAT44(uStack_a4,local_a8);
  *(ulong *)(param_4 + 8) = CONCAT44(uStack_9c,uStack_a0);
  *(undefined4 *)(param_4 + 0x10) = local_98;
  *(undefined4 *)(param_4 + 0x14) = uStack_94;
  *(undefined4 *)(param_4 + 0x18) = uStack_90;
  *(undefined4 *)(param_4 + 0x1c) = uStack_8c;
  *(undefined4 *)(param_4 + 0x20) = local_88;
  *(undefined4 *)(param_4 + 0x24) = uStack_84;
  *(undefined4 *)(param_4 + 0x28) = uStack_80;
  *(undefined4 *)(param_4 + 0x2c) = uStack_7c;
  *(undefined4 *)(param_4 + 0x30) = local_78;
  *(undefined4 *)(param_4 + 0x34) = uStack_74;
  *(undefined4 *)(param_4 + 0x38) = uStack_70;
  *(undefined4 *)(param_4 + 0x3c) = uStack_6c;
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_b0;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::split(embree::sse2::Split2<embree::sse2::BinSplit<32ul>,
   embree::sse2::SpatialBinSplit<16ul> > const&, embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&, embree::sse2::PrimInfoExtRange&) */

void __thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::split
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,Split2 *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  ulong uVar4;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *this_00
  ;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar9;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar10
  ;
  ulong uVar11;
  undefined1 (*pauVar12) [16];
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *pHVar13
  ;
  long lVar14;
  int iVar15;
  undefined8 *puVar16;
  undefined8 *puVar17;
  long lVar18;
  long lVar19;
  int in_R11D;
  undefined8 *puVar20;
  ulong uVar21;
  undefined1 (*pauVar22) [16];
  ulong uVar23;
  long in_FS_OFFSET;
  undefined1 auVar24 [16];
  undefined1 auVar25 [16];
  undefined1 auVar26 [16];
  undefined1 auVar27 [16];
  undefined1 auVar28 [16];
  undefined1 auVar29 [16];
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  uint local_f8;
  uint uStack_f4;
  uint uStack_f0;
  uint uStack_ec;
  undefined1 local_e8 [16];
  undefined1 local_d8 [16];
  undefined8 local_a8;
  undefined8 uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  ulong local_68;
  ulong local_60;
  ulong local_58;
  long local_40;
  
  local_a8 = *(undefined8 *)param_2;
  uStack_a0 = *(undefined8 *)(param_2 + 8);
  local_88 = *(undefined8 *)(param_2 + 0x20);
  uStack_80 = *(undefined8 *)(param_2 + 0x28);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_98 = *(undefined8 *)(param_2 + 0x10);
  uStack_90 = *(undefined8 *)(param_2 + 0x18);
  uVar4 = *(ulong *)(param_2 + 0x40);
  uVar21 = *(ulong *)(param_2 + 0x48);
  uVar23 = *(ulong *)(param_2 + 0x50);
  local_78 = *(undefined8 *)(param_2 + 0x30);
  uStack_70 = *(undefined8 *)(param_2 + 0x38);
  local_68 = uVar4;
  local_60 = uVar21;
  local_58 = uVar23;
  if (_LC23 < *(float *)(param_1 + 0x54)) {
    lVar14 = uVar21 * 0x20;
    puVar16 = (undefined8 *)(*(long *)this + lVar14);
    puVar17 = (undefined8 *)(*(long *)this + uVar4 * 0x20);
    if (puVar16 != puVar17) {
      lVar18 = lVar14 + uVar4 * -0x20;
      uVar11 = lVar18 >> 5;
      if (uVar11 == 0) {
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar16,0xfffffffffffffffe);
      }
      else {
        lVar19 = 0x3f;
        if (uVar11 != 0) {
          for (; uVar11 >> lVar19 == 0; lVar19 = lVar19 + -1) {
          }
        }
        std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar17,puVar16,(long)(int)lVar19 * 2);
        if (0x200 < lVar18) {
          puVar20 = puVar17 + 0x40;
          std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar20)
          ;
          for (; puVar16 != puVar20; puVar20 = puVar20 + 4) {
            uVar2 = *(undefined4 *)((long)puVar20 + 0x1c);
            uVar3 = *(undefined4 *)((long)puVar20 + 0xc);
            uVar5 = puVar20[2];
            uVar6 = puVar20[3];
            uVar7 = *puVar20;
            uVar8 = puVar20[1];
            uVar11 = CONCAT44(*(undefined4 *)((long)puVar20 + -4),
                              *(undefined4 *)((long)puVar20 + -0x14));
            puVar17 = puVar20;
            while (CONCAT44(uVar2,uVar3) < uVar11) {
              *puVar17 = puVar17[-4];
              puVar17[1] = puVar17[-3];
              puVar17[2] = puVar17[-2];
              puVar17[3] = puVar17[-1];
              uVar11 = CONCAT44(*(undefined4 *)((long)puVar17 + -0x24),
                                *(undefined4 *)((long)puVar17 + -0x34));
              puVar17 = puVar17 + -4;
            }
            *puVar17 = uVar7;
            puVar17[1] = uVar8;
            puVar17[2] = uVar5;
            puVar17[3] = uVar6;
          }
          goto LAB_001260e9;
        }
      }
      std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar17,puVar16);
    }
LAB_001260e9:
    uVar11 = uVar4 + uVar21 >> 1;
    if (uVar4 < uVar11) {
      lVar18 = 0;
      auVar32._8_4_ = _LC1;
      auVar32._0_8_ = CONCAT44(_LC1,_LC1);
      auVar32._12_4_ = _LC1;
      auVar34._8_4_ = _LC1;
      auVar34._0_8_ = CONCAT44(_LC1,_LC1);
      auVar34._12_4_ = _LC1;
      auVar33._8_4_ = _LC3;
      auVar33._0_8_ = CONCAT44(_LC3,_LC3);
      auVar33._12_4_ = _LC3;
      auVar35._8_4_ = _LC3;
      auVar35._0_8_ = CONCAT44(_LC3,_LC3);
      auVar35._12_4_ = _LC3;
      pauVar12 = (undefined1 (*) [16])(uVar4 * 0x20 + *(long *)this);
      do {
        pauVar22 = pauVar12 + 2;
        auVar31._0_4_ = *(float *)pauVar12[1] + *(float *)*pauVar12;
        auVar31._4_4_ = *(float *)(pauVar12[1] + 4) + *(float *)(*pauVar12 + 4);
        auVar31._8_4_ = *(float *)(pauVar12[1] + 8) + *(float *)(*pauVar12 + 8);
        auVar31._12_4_ = *(float *)(pauVar12[1] + 0xc) + *(float *)(*pauVar12 + 0xc);
        auVar35 = minps(auVar35,*pauVar12);
        auVar34 = maxps(auVar34,pauVar12[1]);
        lVar18 = lVar18 + (ulong)(*(uint *)(*pauVar12 + 0xc) >> 0x1b);
        auVar33 = minps(auVar33,auVar31);
        auVar32 = maxps(auVar32,auVar31);
        pauVar12 = pauVar22;
      } while ((undefined1 (*) [16])(*(long *)this + uVar11 * 0x20) != pauVar22);
    }
    else {
      lVar18 = 0;
      auVar32._8_4_ = _LC1;
      auVar32._0_8_ = CONCAT44(_LC1,_LC1);
      auVar32._12_4_ = _LC1;
      auVar33._8_4_ = _LC3;
      auVar33._0_8_ = CONCAT44(_LC3,_LC3);
      auVar33._12_4_ = _LC3;
      auVar34._8_4_ = _LC1;
      auVar34._0_8_ = CONCAT44(_LC1,_LC1);
      auVar34._12_4_ = _LC1;
      auVar35._8_4_ = _LC3;
      auVar35._0_8_ = CONCAT44(_LC3,_LC3);
      auVar35._12_4_ = _LC3;
    }
    auVar30._4_4_ = _LC3;
    auVar30._0_4_ = _LC3;
    auVar27._4_4_ = _LC1;
    auVar27._0_4_ = _LC1;
    auVar30._8_4_ = _LC3;
    auVar27._8_4_ = _LC1;
    auVar30._12_4_ = _LC3;
    auVar27._12_4_ = _LC1;
    auVar31 = auVar27;
    auVar36 = auVar30;
    if (uVar11 < uVar21) {
      lVar19 = 0;
      pauVar12 = (undefined1 (*) [16])(uVar11 * 0x20 + *(long *)this);
      do {
        pauVar22 = pauVar12 + 2;
        auVar24._0_4_ = *(float *)pauVar12[1] + *(float *)*pauVar12;
        auVar24._4_4_ = *(float *)(pauVar12[1] + 4) + *(float *)(*pauVar12 + 4);
        auVar24._8_4_ = *(float *)(pauVar12[1] + 8) + *(float *)(*pauVar12 + 8);
        auVar24._12_4_ = *(float *)(pauVar12[1] + 0xc) + *(float *)(*pauVar12 + 0xc);
        auVar36 = minps(auVar36,*pauVar12);
        auVar31 = maxps(auVar31,pauVar12[1]);
        lVar19 = lVar19 + (ulong)(*(uint *)(*pauVar12 + 0xc) >> 0x1b);
        auVar30 = minps(auVar30,auVar24);
        auVar27 = maxps(auVar27,auVar24);
        pauVar12 = pauVar22;
      } while ((undefined1 (*) [16])(*(long *)this + lVar14) != pauVar22);
    }
    else {
      lVar19 = 0;
    }
    auVar42._8_8_ = lVar19;
    auVar42._0_8_ = lVar18;
    *(ulong *)(param_3 + 0x40) = uVar4;
    *(ulong *)(param_3 + 0x48) = uVar11;
    *(ulong *)(param_3 + 0x50) = uVar11;
    *(undefined1 (*) [16])param_3 = auVar35;
    *(undefined1 (*) [16])(param_3 + 0x10) = auVar34;
    *(undefined1 (*) [16])(param_3 + 0x20) = auVar33;
    *(undefined1 (*) [16])(param_3 + 0x30) = auVar32;
    *(ulong *)(param_4 + 0x40) = uVar11;
    *(ulong *)(param_4 + 0x48) = uVar21;
    *(ulong *)(param_4 + 0x50) = uVar21;
    *(undefined1 (*) [16])param_4 = auVar36;
    *(undefined1 (*) [16])(param_4 + 0x10) = auVar31;
    *(undefined1 (*) [16])(param_4 + 0x20) = auVar30;
    *(undefined1 (*) [16])(param_4 + 0x30) = auVar27;
    if (uVar21 != uVar23) goto LAB_001261f6;
  }
  else {
    if (param_1[0x50] == (Split2)0x0) {
      this_00 = *(HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                  **)this;
      if (uVar21 - uVar4 < 0xc00) {
        iVar1 = *(int *)(param_1 + 8);
        lVar18 = 0;
        puVar16 = &mm_lookupmask_ps;
        lVar14 = 0;
        auVar36._0_8_ = CONCAT44(_LC1,_LC1);
        auVar36._8_4_ = _LC1;
        auVar36._12_4_ = _LC1;
        auVar32 = *(undefined1 (*) [16])
                   (&mm_lookupmask_ps +
                   (ulong)(uint)(1 << ((byte)*(undefined4 *)(param_1 + 4) & 0x1f)) * 2);
        auVar38._8_4_ = _LC1;
        auVar38._0_8_ = auVar36._0_8_;
        auVar38._12_4_ = _LC1;
        auVar37._0_8_ = CONCAT44(_LC3,_LC3);
        auVar37._8_4_ = _LC3;
        auVar37._12_4_ = _LC3;
        auVar40._8_4_ = _LC1;
        auVar40._0_8_ = auVar36._0_8_;
        auVar40._12_4_ = _LC1;
        auVar39._8_4_ = _LC3;
        auVar39._0_8_ = auVar37._0_8_;
        auVar39._12_4_ = _LC3;
        auVar41._8_4_ = _LC3;
        auVar41._0_8_ = auVar37._0_8_;
        auVar41._12_4_ = _LC3;
        pHVar9 = this_00 + uVar21 * 0x20 + -0x20;
        local_e8 = auVar37;
        local_d8 = auVar36;
        for (pHVar13 = this_00 + uVar4 * 0x20; pHVar13 <= pHVar9; pHVar13 = pHVar13 + 0x20) {
          auVar33 = *(undefined1 (*) [16])(pHVar13 + 0x10);
          auVar34 = *(undefined1 (*) [16])pHVar13;
          auVar25._0_4_ = auVar33._0_4_ + auVar34._0_4_;
          auVar25._4_4_ = auVar33._4_4_ + auVar34._4_4_;
          auVar25._8_4_ = auVar33._8_4_ + auVar34._8_4_;
          auVar25._12_4_ = auVar33._12_4_ + auVar34._12_4_;
          local_f8 = auVar32._0_4_;
          uStack_f4 = auVar32._4_4_;
          uStack_f0 = auVar32._8_4_;
          uStack_ec = auVar32._12_4_;
          auVar28._0_4_ =
               -(uint)((int)((auVar25._0_4_ - *(float *)(param_1 + 0x20)) *
                             *(float *)(param_1 + 0x30) + _LC16) < iVar1) & local_f8;
          auVar28._4_4_ =
               -(uint)((int)((auVar25._4_4_ - *(float *)(param_1 + 0x24)) *
                             *(float *)(param_1 + 0x34) + _UNK_0013f674) < iVar1) & uStack_f4;
          auVar28._8_4_ =
               -(uint)((int)((auVar25._8_4_ - *(float *)(param_1 + 0x28)) *
                             *(float *)(param_1 + 0x38) + _UNK_0013f678) < iVar1) & uStack_f0;
          auVar28._12_4_ =
               -(uint)((int)((auVar25._12_4_ - *(float *)(param_1 + 0x2c)) *
                             *(float *)(param_1 + 0x3c) + _UNK_0013f67c) < iVar1) & uStack_ec;
          iVar15 = movmskps((int)puVar16,auVar28);
          if (iVar15 == 0) {
            while( true ) {
              auVar35 = *(undefined1 (*) [16])(pHVar9 + 0x10);
              auVar31 = *(undefined1 (*) [16])pHVar9;
              pHVar10 = pHVar9 + -0x20;
              auVar29._0_4_ = auVar35._0_4_ + auVar31._0_4_;
              auVar29._4_4_ = auVar35._4_4_ + auVar31._4_4_;
              auVar29._8_4_ = auVar35._8_4_ + auVar31._8_4_;
              auVar29._12_4_ = auVar35._12_4_ + auVar31._12_4_;
              puVar17 = (undefined8 *)(ulong)(*(uint *)(pHVar9 + 0xc) >> 0x1b);
              auVar26._0_4_ =
                   -(uint)((int)((auVar29._0_4_ - *(float *)(param_1 + 0x20)) *
                                 *(float *)(param_1 + 0x30) + _LC16) < iVar1) & local_f8;
              auVar26._4_4_ =
                   -(uint)((int)((auVar29._4_4_ - *(float *)(param_1 + 0x24)) *
                                 *(float *)(param_1 + 0x34) + _UNK_0013f674) < iVar1) & uStack_f4;
              auVar26._8_4_ =
                   -(uint)((int)((auVar29._8_4_ - *(float *)(param_1 + 0x28)) *
                                 *(float *)(param_1 + 0x38) + _UNK_0013f678) < iVar1) & uStack_f0;
              auVar26._12_4_ =
                   -(uint)((int)((auVar29._12_4_ - *(float *)(param_1 + 0x2c)) *
                                 *(float *)(param_1 + 0x3c) + _UNK_0013f67c) < iVar1) & uStack_ec;
              in_R11D = movmskps(in_R11D,auVar26);
              if (in_R11D != 0) break;
              local_e8 = minps(local_e8,auVar31);
              local_d8 = maxps(local_d8,auVar35);
              lVar18 = lVar18 + (long)puVar17;
              auVar37 = minps(auVar37,auVar29);
              auVar36 = maxps(auVar36,auVar29);
              pHVar9 = pHVar10;
              if (pHVar10 < pHVar13) goto LAB_00125e50;
            }
            *(undefined1 (*) [16])pHVar13 = auVar31;
            auVar40 = maxps(auVar40,auVar35);
            local_e8 = minps(local_e8,auVar34);
            local_d8 = maxps(local_d8,auVar33);
            puVar16 = (undefined8 *)(ulong)(*(uint *)(pHVar13 + 0xc) >> 0x1b);
            auVar41 = minps(auVar41,auVar31);
            auVar39 = minps(auVar39,auVar29);
            *(undefined1 (*) [16])(pHVar13 + 0x10) = *(undefined1 (*) [16])(pHVar9 + 0x10);
            auVar38 = maxps(auVar38,auVar29);
            auVar37 = minps(auVar37,auVar25);
            lVar18 = lVar18 + (long)puVar16;
            auVar36 = maxps(auVar36,auVar25);
            *(undefined1 (*) [16])pHVar9 = auVar34;
            *(undefined1 (*) [16])(pHVar9 + 0x10) = auVar33;
          }
          else {
            auVar41 = minps(auVar41,auVar34);
            auVar40 = maxps(auVar40,auVar33);
            auVar39 = minps(auVar39,auVar25);
            auVar38 = maxps(auVar38,auVar25);
            puVar16 = (undefined8 *)(ulong)(*(uint *)(pHVar13 + 0xc) >> 0x1b);
            pHVar10 = pHVar9;
            puVar17 = puVar16;
          }
          lVar14 = lVar14 + (long)puVar17;
          pHVar9 = pHVar10;
        }
LAB_00125e50:
        auVar42._8_8_ = lVar18;
        auVar42._0_8_ = lVar14;
        *(ulong *)(param_3 + 0x40) = uVar4;
        lVar14 = (long)pHVar13 - (long)this_00 >> 5;
        *(undefined1 (*) [16])param_3 = auVar41;
        *(long *)(param_3 + 0x48) = lVar14;
        *(long *)(param_3 + 0x50) = lVar14;
        *(undefined1 (*) [16])(param_3 + 0x10) = auVar40;
        *(undefined1 (*) [16])(param_3 + 0x20) = auVar39;
        *(undefined1 (*) [16])(param_3 + 0x30) = auVar38;
        *(long *)(param_4 + 0x40) = lVar14;
        *(ulong *)(param_4 + 0x48) = uVar21;
        *(ulong *)(param_4 + 0x50) = uVar21;
        *(undefined8 *)param_4 = local_e8._0_8_;
        *(undefined8 *)(param_4 + 8) = local_e8._8_8_;
        *(undefined8 *)(param_4 + 0x10) = local_d8._0_8_;
        *(undefined8 *)(param_4 + 0x18) = local_d8._8_8_;
        *(undefined1 (*) [16])(param_4 + 0x20) = auVar37;
        *(undefined1 (*) [16])(param_4 + 0x30) = auVar36;
      }
      else {
        auVar42 = parallel_object_split
                            (this_00,(BinSplit *)param_1,(PrimInfoExtRange *)&local_a8,param_3,
                             param_4);
      }
    }
    else {
      create_spatial_splits
                ((PrimInfoExtRange *)this,(SpatialBinSplit *)&local_a8,(SpatialBinMapping *)param_1)
      ;
      uVar21 = local_60;
      if (local_60 - local_68 < 0xc00) {
        auVar42 = sequential_spatial_split
                            (*(HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                               **)this,(SpatialBinSplit *)param_1,(PrimInfoExtRange *)&local_a8,
                             param_3,param_4);
        uVar23 = local_58;
      }
      else {
        auVar42 = parallel_spatial_split
                            (*(HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                               **)this,(SpatialBinSplit *)param_1,(PrimInfoExtRange *)&local_a8,
                             param_3,param_4);
        uVar23 = local_58;
      }
    }
    if (uVar23 != uVar21) {
LAB_001261f6:
      setExtentedRanges((PrimInfoExtRange *)&local_a8,param_3,param_4,auVar42._0_8_,auVar42._8_8_);
      if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
        moveExtentedRange((PrimInfoExtRange *)this,param_3,param_4);
        return;
      }
      goto LAB_0012634d;
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
LAB_0012634d:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long, embree::parallel_partition_task<embree::PrimRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::PrimRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   >, embree::EmptyTy, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimRef const&)#2},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimRef_const&)#1},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)#2},embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  TaskGroupContext *pTVar2;
  long lVar3;
  long *plVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  long *plVar10;
  long lVar11;
  long lVar12;
  ulong uVar13;
  long lVar14;
  long lVar15;
  ulong uVar16;
  TaskScheduler *pTVar17;
  undefined8 *puVar18;
  undefined8 *puVar19;
  long *plVar20;
  ulong uVar21;
  ulong uVar22;
  ulong uVar23;
  undefined8 *puVar24;
  undefined8 *puVar25;
  ulong uVar26;
  long *plVar27;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  long lStack_50;
  ulong local_48;
  undefined8 *puStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  lVar14 = *(long *)(this + 0x10);
  puVar24 = *(undefined8 **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar14)) {
    pTVar2 = *(TaskGroupContext **)(this + 0x28);
    uVar26 = (ulong)(*(long *)(this + 8) + lVar14) >> 1;
    local_58 = uVar26;
    lStack_50 = lVar14;
    local_48 = *(ulong *)(this + 0x18);
    puStack_40 = puVar24;
    local_38 = pTVar2;
    lVar11 = embree::TaskScheduler::thread();
    if (lVar11 == 0) {
      pTVar17 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar17,(_lambda___1_ *)&local_58,pTVar2,uVar26 - lVar14,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar11 + 0x40080)) goto LAB_00126879;
      lVar3 = *(long *)(lVar11 + 0xc00c0);
      uVar13 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar13) goto LAB_00126879;
      *(ulong *)(lVar11 + 0xc00c0) = uVar13;
      puVar24 = (undefined8 *)(lVar11 + 0x40090 + uVar13);
      *puVar24 = &PTR_execute_0013f1f0;
      puVar24[1] = local_58;
      puVar24[2] = lStack_50;
      puVar24[5] = local_38;
      puVar24[3] = local_48;
      puVar24[4] = puStack_40;
      lVar12 = *(long *)(lVar11 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar11 + 0x40 + lVar12);
      lVar15 = *(long *)(lVar11 + 0xc0100);
      *(undefined4 *)(lVar11 + 0x44 + lVar12) = 1;
      *(undefined1 *)(lVar11 + 0x48 + lVar12) = 1;
      lVar12 = lVar12 + lVar11;
      *(undefined8 **)(lVar12 + 0x50) = puVar24;
      *(long *)(lVar12 + 0x58) = lVar15;
      *(TaskGroupContext **)(lVar12 + 0x60) = pTVar2;
      *(long *)(lVar12 + 0x68) = lVar3;
      *(ulong *)(lVar12 + 0x70) = uVar26 - lVar14;
      if (lVar15 != 0) {
        LOCK();
        *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar11 + 0x40080) = *(long *)(lVar11 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar11 + 0x40080) - 1U <= *(ulong *)(lVar11 + 0x40040)) {
        LOCK();
        *(long *)(lVar11 + 0x40040) = *(long *)(lVar11 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_78 = *(undefined8 *)(this + 0x18);
    local_88 = *(long *)(this + 8);
    pTVar2 = *(TaskGroupContext **)(this + 0x28);
    uStack_70 = *(undefined8 *)(this + 0x20);
    uVar13 = local_88 - uVar26;
    uStack_80 = uVar26;
    local_68 = pTVar2;
    lVar14 = embree::TaskScheduler::thread();
    if (lVar14 == 0) {
      pTVar17 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::PrimRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimRef_const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimRef_const&)_2_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_split(embree::sse2::BinSpli___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar17,(_lambda___1_ *)&local_88,pTVar2,uVar13,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar14 + 0x40080)) {
LAB_00126879:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar11 = *(long *)(lVar14 + 0xc00c0);
      uVar26 = lVar11 + 0x30 + (ulong)(-(int)lVar11 & 0x3f);
      if (0x80000 < uVar26) goto LAB_00126879;
      *(ulong *)(lVar14 + 0xc00c0) = uVar26;
      puVar24 = (undefined8 *)(lVar14 + 0x40090 + uVar26);
      *puVar24 = &PTR_execute_0013f1f0;
      puVar24[1] = local_88;
      puVar24[2] = uStack_80;
      puVar24[5] = local_68;
      puVar24[3] = local_78;
      puVar24[4] = uStack_70;
      lVar15 = *(long *)(lVar14 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar14 + 0x40 + lVar15);
      lVar3 = *(long *)(lVar14 + 0xc0100);
      *(undefined4 *)(lVar14 + 0x44 + lVar15) = 1;
      *(undefined1 *)(lVar14 + 0x48 + lVar15) = 1;
      lVar15 = lVar15 + lVar14;
      *(undefined8 **)(lVar15 + 0x50) = puVar24;
      *(long *)(lVar15 + 0x58) = lVar3;
      *(TaskGroupContext **)(lVar15 + 0x60) = pTVar2;
      *(long *)(lVar15 + 0x68) = lVar11;
      *(ulong *)(lVar15 + 0x70) = uVar13;
      if (lVar3 != 0) {
        LOCK();
        *(int *)(lVar3 + 4) = *(int *)(lVar3 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar14 + 0x40080) = *(long *)(lVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar14 + 0x40080) - 1U <= *(ulong *)(lVar14 + 0x40040)) {
        LOCK();
        *(long *)(lVar14 + 0x40040) = *(long *)(lVar14 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar4 = (long *)puVar24[1];
    lVar11 = plVar4[0x98];
    uVar16 = lVar14 * *(long *)*puVar24;
    uVar13 = plVar4[0x99] - lVar11;
    uVar26 = uVar16 / (ulong)plVar4[6];
    uVar22 = uVar26;
    if (uVar26 < uVar13) {
      plVar20 = plVar4 + 0x98;
    }
    else {
      plVar27 = plVar4 + 0x9a;
      do {
        plVar20 = plVar27;
        lVar11 = *plVar20;
        uVar22 = uVar22 - uVar13;
        uVar13 = plVar20[1] - lVar11;
        plVar27 = plVar20 + 2;
      } while (uVar13 <= uVar22);
    }
    lVar14 = plVar4[0x118];
    uVar23 = plVar4[0x119] - lVar14;
    uVar21 = uVar26;
    if (uVar26 < uVar23) {
      plVar27 = plVar4 + 0x118;
    }
    else {
      plVar10 = plVar4 + 0x11a;
      do {
        plVar27 = plVar10;
        lVar14 = *plVar27;
        uVar21 = uVar21 - uVar23;
        uVar23 = plVar27[1] - lVar14;
        plVar10 = plVar27 + 2;
      } while (uVar23 <= uVar21);
    }
    uVar13 = uVar13 - uVar22;
    uVar26 = (*(long *)*puVar24 + uVar16) / (ulong)plVar4[6] - uVar26;
    uVar23 = uVar23 - uVar21;
    puVar24 = (undefined8 *)((lVar11 + uVar22) * 0x20 + *plVar4);
    puVar25 = (undefined8 *)((lVar14 + uVar21) * 0x20 + *plVar4);
    uVar22 = uVar26;
    if (uVar13 <= uVar26) {
      uVar22 = uVar13;
    }
    if (uVar23 < uVar22) {
      uVar22 = uVar23;
    }
    if (uVar26 != 0) {
joined_r0x001266f6:
      if (uVar23 == 0) {
        uVar23 = plVar27[3] - plVar27[2];
        puVar25 = (undefined8 *)(plVar27[2] * 0x20 + *plVar4);
        uVar22 = uVar26;
        if (uVar23 <= uVar26) {
          uVar22 = uVar23;
        }
        if (uVar13 < uVar22) {
          uVar22 = uVar13;
        }
        plVar27 = plVar27 + 2;
      }
      uVar26 = uVar26 - uVar22;
      uVar13 = uVar13 - uVar22;
      uVar23 = uVar23 - uVar22;
      puVar18 = puVar24;
      puVar19 = puVar25;
      uVar16 = uVar22;
      if (uVar22 != 0) {
        do {
          uVar5 = puVar19[1];
          uVar6 = *puVar18;
          uVar7 = puVar18[1];
          uVar8 = puVar18[2];
          uVar9 = puVar18[3];
          *puVar18 = *puVar19;
          puVar18[1] = uVar5;
          uVar5 = puVar19[3];
          puVar18[2] = puVar19[2];
          puVar18[3] = uVar5;
          *puVar19 = uVar6;
          puVar19[1] = uVar7;
          puVar19[2] = uVar8;
          puVar19[3] = uVar9;
          uVar16 = uVar16 - 1;
          puVar18 = puVar18 + 4;
          puVar19 = puVar19 + 4;
        } while (uVar16 != 0);
        puVar25 = puVar25 + uVar22 * 4;
        puVar24 = puVar24 + uVar22 * 4;
        if (uVar26 == 0) goto LAB_00126798;
      }
      if (uVar13 == 0) {
        uVar13 = plVar20[3] - plVar20[2];
        puVar24 = (undefined8 *)(plVar20[2] * 0x20 + *plVar4);
        uVar22 = uVar23;
        if (uVar26 <= uVar23) {
          uVar22 = uVar26;
        }
        if (uVar13 < uVar22) {
          uVar22 = uVar13;
        }
        plVar20 = plVar20 + 2;
      }
      else {
        uVar22 = 0;
      }
      goto joined_r0x001266f6;
    }
LAB_00126798:
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__adjust_heap<embree::sse2::PresplitItem*, long, embree::sse2::PresplitItem,
   __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&)> >(embree::sse2::PresplitItem*, long, long,
   embree::sse2::PresplitItem, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem
   const&, embree::sse2::PresplitItem const&)>) */

void std::
     __adjust_heap<embree::sse2::PresplitItem*,long,embree::sse2::PresplitItem,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
               (long param_1,long param_2,ulong param_3,undefined8 param_4,code *param_5)

{
  undefined8 *puVar1;
  char cVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  undefined8 *puVar7;
  long in_FS_OFFSET;
  undefined8 local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar5 = (long)(param_3 - 1) / 2;
  lVar4 = param_2;
  local_48 = param_4;
  if (param_2 < lVar5) {
    do {
      lVar6 = (lVar4 + 1) * 2;
      lVar3 = (lVar4 + 1) * 0x10;
      puVar7 = (undefined8 *)(param_1 + lVar3);
      cVar2 = (*param_5)(puVar7,param_1 + -8 + lVar3);
      if (cVar2 == '\0') {
        *(undefined8 *)(param_1 + lVar4 * 8) = *puVar7;
        lVar4 = lVar6;
      }
      else {
        lVar6 = lVar6 + -1;
        puVar7 = (undefined8 *)(param_1 + lVar6 * 8);
        *(undefined8 *)(param_1 + lVar4 * 8) = *puVar7;
        lVar4 = lVar6;
      }
    } while (lVar4 < lVar5);
    if ((param_3 & 1) == 0) goto LAB_001269f8;
  }
  else {
    puVar7 = (undefined8 *)(param_1 + param_2 * 8);
    if ((param_3 & 1) != 0) goto LAB_001269af;
LAB_001269f8:
    if ((long)(param_3 - 2) / 2 == lVar4) {
      lVar5 = lVar4 * 2;
      lVar4 = lVar5 + 1;
      *puVar7 = *(undefined8 *)(param_1 + -8 + (lVar5 + 2) * 8);
      puVar7 = (undefined8 *)(param_1 + lVar4 * 8);
    }
  }
  lVar5 = (lVar4 + -1) - (lVar4 + -1 >> 0x3f);
  if (param_2 < lVar4) {
    do {
      lVar6 = lVar5 >> 1;
      puVar1 = (undefined8 *)(param_1 + lVar6 * 8);
      puVar7 = (undefined8 *)(param_1 + lVar4 * 8);
      cVar2 = (*param_5)(puVar1,&local_48);
      if (cVar2 == '\0') break;
      *puVar7 = *puVar1;
      lVar5 = (lVar6 + -1) - (lVar6 + -1 >> 0x3f);
      lVar4 = lVar6;
      puVar7 = puVar1;
    } while (param_2 < lVar6);
  }
LAB_001269af:
  *puVar7 = local_48;
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__introsort_loop<embree::sse2::PresplitItem*, long,
   __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&)> >(embree::sse2::PresplitItem*, embree::sse2::PresplitItem*,
   long, __gnu_cxx::__ops::_Iter_comp_iter<bool (*)(embree::sse2::PresplitItem const&,
   embree::sse2::PresplitItem const&)>) */

void std::
     __introsort_loop<embree::sse2::PresplitItem*,long,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
               (undefined8 *param_1,undefined8 *param_2,long param_3,code *param_4)

{
  undefined8 *puVar1;
  undefined8 *puVar2;
  undefined8 *puVar3;
  undefined8 uVar4;
  char cVar5;
  long lVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  long lVar10;
  
  lVar6 = (long)param_2 - (long)param_1;
  if (lVar6 < 0x81) {
    return;
  }
  if (param_3 != 0) {
    puVar3 = param_1 + 1;
    puVar9 = param_2;
    do {
      puVar1 = puVar9 + -1;
      param_3 = param_3 + -1;
      puVar2 = param_1 + (lVar6 >> 4);
      cVar5 = (*param_4)(puVar3,puVar2);
      param_2 = puVar3;
      puVar8 = puVar9;
      if (cVar5 == '\0') {
        cVar5 = (*param_4)(puVar3,puVar1);
        if (cVar5 == '\0') {
          cVar5 = (*param_4)(puVar2,puVar1);
          uVar7 = *param_1;
          if (cVar5 != '\0') goto LAB_00126b9e;
          *param_1 = *puVar2;
          *puVar2 = uVar7;
        }
        else {
          uVar7 = *param_1;
LAB_00126b78:
          uVar4 = param_1[1];
          param_1[1] = uVar7;
          *param_1 = uVar4;
        }
      }
      else {
        cVar5 = (*param_4)(puVar2);
        if (cVar5 == '\0') {
          cVar5 = (*param_4)(puVar3,puVar1);
          uVar7 = *param_1;
          if (cVar5 == '\0') goto LAB_00126b78;
LAB_00126b9e:
          *param_1 = puVar9[-1];
          puVar9[-1] = uVar7;
        }
        else {
          uVar7 = *param_1;
          *param_1 = *puVar2;
          *puVar2 = uVar7;
        }
      }
      while( true ) {
        while (cVar5 = (*param_4)(param_2,param_1), cVar5 != '\0') {
          param_2 = param_2 + 1;
        }
        do {
          puVar8 = puVar8 + -1;
          cVar5 = (*param_4)(param_1,puVar8);
        } while (cVar5 != '\0');
        if (puVar8 <= param_2) break;
        uVar7 = *param_2;
        *param_2 = *puVar8;
        *puVar8 = uVar7;
        param_2 = param_2 + 1;
      }
      __introsort_loop<embree::sse2::PresplitItem*,long,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                (param_2,puVar9,param_3,param_4);
      lVar6 = (long)param_2 - (long)param_1;
      if (lVar6 < 0x81) {
        return;
      }
      puVar9 = param_2;
    } while (param_3 != 0);
  }
  for (lVar10 = (lVar6 >> 3) + -2 >> 1;
      __adjust_heap<embree::sse2::PresplitItem*,long,embree::sse2::PresplitItem,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                (param_1,lVar10,lVar6 >> 3,param_1[lVar10],param_4), lVar10 != 0;
      lVar10 = lVar10 + -1) {
  }
  do {
    param_2 = param_2 + -1;
    uVar7 = *param_2;
    *param_2 = *param_1;
    __adjust_heap<embree::sse2::PresplitItem*,long,embree::sse2::PresplitItem,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
              (param_1,0,(long)param_2 - (long)param_1 >> 3,uVar7,param_4);
  } while (8 < (long)param_2 - (long)param_1);
  return;
}



/* WARNING: Removing unreachable block (ram,0x00127015) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_0013f208;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  _lambda_embree__range<unsigned_long>_const___1_ *p_Stack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  p_Stack_30 = param_4;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_001272ac:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0013f208;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = p_Stack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_001272ac;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#1} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#1}>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#1}const&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#1}>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#1}const&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined4 uVar2;
  uint uVar3;
  undefined8 *puVar4;
  TaskGroupContext *pTVar5;
  long *plVar6;
  long lVar7;
  long lVar8;
  long lVar9;
  long lVar10;
  TaskScheduler *pTVar11;
  long lVar12;
  uint *puVar13;
  ulong uVar14;
  ulong uVar15;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  long lStack_50;
  ulong local_48;
  undefined8 *puStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  lVar9 = *(long *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  puVar4 = *(undefined8 **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar9)) {
    pTVar5 = *(TaskGroupContext **)(this + 0x28);
    uVar15 = (ulong)(*(long *)(this + 8) + lVar9) >> 1;
    local_58 = uVar15;
    lStack_50 = lVar9;
    local_48 = *(ulong *)(this + 0x18);
    puStack_40 = puVar4;
    local_38 = pTVar5;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_58,pTVar5,uVar15 - lVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_001276d3;
      lVar12 = *(long *)(lVar7 + 0xc00c0);
      uVar14 = lVar12 + 0x30 + (ulong)(-(int)lVar12 & 0x3f);
      if (0x80000 < uVar14) goto LAB_001276d3;
      *(ulong *)(lVar7 + 0xc00c0) = uVar14;
      puVar4 = (undefined8 *)(lVar7 + 0x40090 + uVar14);
      *puVar4 = &PTR_execute_0013f208;
      puVar4[1] = local_58;
      puVar4[2] = lStack_50;
      puVar4[5] = local_38;
      puVar4[3] = local_48;
      puVar4[4] = puStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar10 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar4;
      *(long *)(lVar8 + 0x58) = lVar10;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar5;
      *(long *)(lVar8 + 0x68) = lVar12;
      *(ulong *)(lVar8 + 0x70) = uVar15 - lVar9;
      if (lVar10 != 0) {
        LOCK();
        *(int *)(lVar10 + 4) = *(int *)(lVar10 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_78 = *(undefined8 *)(this + 0x18);
    local_88 = *(long *)(this + 8);
    pTVar5 = *(TaskGroupContext **)(this + 0x28);
    uStack_70 = *(undefined8 *)(this + 0x20);
    uVar14 = local_88 - uVar15;
    uStack_80 = uVar15;
    local_68 = pTVar5;
    lVar9 = embree::TaskScheduler::thread();
    if (lVar9 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_88,pTVar5,uVar14,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar9 + 0x40080)) {
LAB_001276d3:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar7 = *(long *)(lVar9 + 0xc00c0);
      uVar15 = lVar7 + 0x30 + (ulong)(-(int)lVar7 & 0x3f);
      if (0x80000 < uVar15) goto LAB_001276d3;
      *(ulong *)(lVar9 + 0xc00c0) = uVar15;
      puVar4 = (undefined8 *)(lVar9 + 0x40090 + uVar15);
      *puVar4 = &PTR_execute_0013f208;
      puVar4[1] = local_88;
      puVar4[2] = uStack_80;
      puVar4[5] = local_68;
      puVar4[3] = local_78;
      puVar4[4] = uStack_70;
      lVar10 = *(long *)(lVar9 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar9 + 0x40 + lVar10);
      lVar12 = *(long *)(lVar9 + 0xc0100);
      *(undefined4 *)(lVar9 + 0x44 + lVar10) = 1;
      *(undefined1 *)(lVar9 + 0x48 + lVar10) = 1;
      lVar10 = lVar10 + lVar9;
      *(undefined8 **)(lVar10 + 0x50) = puVar4;
      *(long *)(lVar10 + 0x58) = lVar12;
      *(TaskGroupContext **)(lVar10 + 0x60) = pTVar5;
      *(long *)(lVar10 + 0x68) = lVar7;
      *(ulong *)(lVar10 + 0x70) = uVar14;
      if (lVar12 != 0) {
        LOCK();
        *(int *)(lVar12 + 4) = *(int *)(lVar12 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar9 + 0x40080) = *(long *)(lVar9 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar9 + 0x40080) - 1U <= *(ulong *)(lVar9 + 0x40040)) {
        LOCK();
        *(long *)(lVar9 + 0x40040) = *(long *)(lVar9 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar6 = (long *)puVar4[4];
    uVar14 = lVar9 * plVar6[3];
    lVar7 = *(long *)puVar4[1];
    uVar2 = *(undefined4 *)*puVar4;
    uVar15 = uVar14 / *(ulong *)puVar4[3];
    uVar14 = (plVar6[3] + uVar14) / *(ulong *)puVar4[3];
    lVar12 = 0;
    do {
      lVar10 = lVar12 * 4;
      lVar12 = lVar12 + 1;
      *(undefined4 *)(lVar10 + *plVar6 + lVar9 * 0x400) = 0;
    } while (lVar12 != 0x100);
    lVar12 = *plVar6;
    if (uVar15 < uVar14) {
      puVar13 = (uint *)(lVar7 + uVar15 * 8);
      do {
        uVar3 = *puVar13;
        puVar13 = puVar13 + 2;
        piVar1 = (int *)(lVar12 + lVar9 * 0x400 + (ulong)(byte)(uVar3 >> ((byte)uVar2 & 0x3f)) * 4);
        *piVar1 = *piVar1 + 1;
      } while ((uint *)(lVar7 + uVar14 * 8) != puVar13);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00127ab5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_0013f220;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
                    /* WARNING: Subroutine does not return */
        __stack_chk_fail();
      }
      local_48 = pTVar18;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_48);
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::TaskScheduler::spawn<unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*) [clone .isra.0] */

void embree::TaskScheduler::
     spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
               (ulong param_1,ulong param_2,ulong param_3,
               _lambda_embree__range<unsigned_long>_const___1_ *param_4,TaskGroupContext *param_5)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  TaskScheduler *this;
  long in_FS_OFFSET;
  ulong local_48;
  ulong uStack_40;
  ulong local_38;
  _lambda_embree__range<unsigned_long>_const___1_ *p_Stack_30;
  TaskGroupContext *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_48 = param_2;
  uStack_40 = param_1;
  local_38 = param_3;
  p_Stack_30 = param_4;
  local_28 = param_5;
  lVar6 = embree::TaskScheduler::thread();
  if (lVar6 == 0) {
    this = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (this,(_lambda___1_ *)&local_48,param_5,param_2 - param_1,true);
LAB_00127d4c:
    if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return;
  }
  if (*(ulong *)(lVar6 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar6 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar2 < 0x80001) {
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_0013f220;
      puVar3[1] = local_48;
      puVar3[2] = uStack_40;
      puVar3[5] = local_28;
      puVar3[3] = local_38;
      puVar3[4] = p_Stack_30;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar5 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar7 + 0x60) = param_5;
      *(long *)(lVar7 + 0x68) = lVar4;
      *(ulong *)(lVar7 + 0x70) = param_2 - param_1;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00127d4c;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* void embree::radix_sort<embree::sse2::PresplitItem, unsigned int>(embree::sse2::PresplitItem*,
   embree::sse2::PresplitItem*, unsigned long, unsigned long) */

void embree::radix_sort<embree::sse2::PresplitItem,unsigned_int>
               (PresplitItem *param_1,PresplitItem *param_2,ulong param_3,ulong param_4)

{
  PresplitItem *pPVar1;
  PresplitItem *pPVar2;
  PresplitItem *pPVar3;
  undefined8 uVar4;
  bool bVar5;
  ulong uVar6;
  long lVar7;
  undefined8 uVar8;
  ulong uVar9;
  PresplitItem *pPVar10;
  PresplitItem *pPVar11;
  PresplitItem *pPVar12;
  long lVar13;
  PresplitItem *pPVar14;
  long in_FS_OFFSET;
  undefined4 local_b4;
  PresplitItem *local_b0;
  PresplitItem *local_a8;
  ulong local_a0;
  long local_98;
  long local_90;
  void *local_88;
  PresplitItem *local_80;
  PresplitItem *local_78;
  ulong local_70;
  undefined4 *local_68;
  PresplitItem **local_60;
  PresplitItem **local_58;
  ulong *local_50;
  void **local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_88 = (void *)0x0;
  local_80 = param_1;
  local_78 = param_2;
  local_70 = param_3;
  if (param_4 < param_3) {
    uVar9 = embree::TaskScheduler::threadCount();
    uVar6 = ((param_4 - 1) + local_70) / param_4;
    if (uVar6 <= uVar9) {
      uVar9 = uVar6;
    }
    uVar6 = 0x40;
    if (uVar9 < 0x41) {
      uVar6 = uVar9;
    }
    local_88 = (void *)embree::alignedMalloc(0x10000,0x40);
    local_b4 = 0;
    local_a8 = local_78;
    local_b0 = local_80;
    if (uVar9 != 0) {
      local_98 = 0;
      local_a0 = uVar6;
      local_68 = &local_b4;
      local_60 = &local_b0;
      local_58 = &local_a8;
      local_50 = &local_a0;
      local_48 = &local_88;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar6,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                 (TaskGroupContext *)&local_98);
      embree::TaskScheduler::wait();
      if (local_98 != 0) goto LAB_001282d4;
      if (local_a0 != 0) {
        local_68 = &local_b4;
        local_60 = &local_b0;
        local_58 = &local_a8;
        local_50 = &local_a0;
        local_48 = &local_88;
        TaskScheduler::
        spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                  (0,local_a0,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                   (TaskGroupContext *)&local_98);
        embree::TaskScheduler::wait();
        if (local_98 != 0) goto LAB_001282d4;
      }
    }
    local_b4 = 8;
    if (uVar9 != 0) {
      local_98 = 0;
      local_b0 = local_78;
      local_a8 = local_80;
      local_a0 = uVar6;
      local_68 = &local_b4;
      local_60 = &local_b0;
      local_58 = &local_a8;
      local_50 = &local_a0;
      local_48 = &local_88;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar6,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                 (TaskGroupContext *)&local_98);
      embree::TaskScheduler::wait();
      if (local_98 != 0) goto LAB_001282d4;
      if (local_a0 != 0) {
        local_68 = &local_b4;
        local_60 = &local_b0;
        local_58 = &local_a8;
        local_50 = &local_a0;
        local_48 = &local_88;
        TaskScheduler::
        spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                  (0,local_a0,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                   (TaskGroupContext *)&local_98);
        embree::TaskScheduler::wait();
        if (local_98 != 0) goto LAB_001282d4;
      }
    }
    local_b4 = 0x10;
    if (uVar9 != 0) {
      local_98 = 0;
      local_b0 = local_80;
      local_a8 = local_78;
      local_a0 = uVar6;
      local_68 = &local_b4;
      local_60 = &local_b0;
      local_58 = &local_a8;
      local_50 = &local_a0;
      local_48 = &local_88;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar6,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                 (TaskGroupContext *)&local_98);
      embree::TaskScheduler::wait();
      if (local_98 != 0) goto LAB_001282d4;
      if (local_a0 != 0) {
        local_68 = &local_b4;
        local_60 = &local_b0;
        local_58 = &local_a8;
        local_50 = &local_a0;
        local_48 = &local_88;
        TaskScheduler::
        spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                  (0,local_a0,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                   (TaskGroupContext *)&local_98);
        embree::TaskScheduler::wait();
        if (local_98 != 0) goto LAB_001282d4;
      }
    }
    local_b4 = 0x18;
    local_b0 = local_78;
    local_a8 = local_80;
    local_a0 = uVar6;
    local_68 = &local_b4;
    local_60 = &local_b0;
    local_58 = &local_a8;
    local_50 = &local_a0;
    local_48 = &local_88;
    if (uVar9 != 0) {
      local_98 = 0;
      TaskScheduler::
      spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_1_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar6,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                 (TaskGroupContext *)&local_98);
      embree::TaskScheduler::wait();
      if (local_98 != 0) {
LAB_001282d4:
        local_90 = local_98;
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception(&local_90);
      }
      local_68 = &local_b4;
      local_60 = &local_b0;
      local_58 = &local_a8;
      local_50 = &local_a0;
      local_48 = &local_88;
      if (local_a0 != 0) {
        TaskScheduler::
        spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>
                  (0,local_a0,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_68,
                   (TaskGroupContext *)&local_98);
        embree::TaskScheduler::wait();
        if (local_98 != 0) goto LAB_001282d4;
      }
    }
  }
  else {
    lVar7 = param_3 * 8;
    pPVar2 = param_1 + lVar7;
    if (param_1 != pPVar2) {
      uVar9 = lVar7 >> 3;
      if (uVar9 != 0) {
        lVar13 = 0x3f;
        if (uVar9 != 0) {
          for (; uVar9 >> lVar13 == 0; lVar13 = lVar13 + -1) {
          }
        }
        lVar13 = (long)(int)lVar13 * 2;
        if (0x80 < lVar7) {
          pPVar10 = pPVar2;
          if (lVar13 != 0) {
            pPVar11 = param_1 + 8;
            pPVar14 = pPVar2;
            do {
              pPVar1 = pPVar14 + -8;
              lVar13 = lVar13 + -1;
              pPVar3 = param_1 + (lVar7 >> 4) * 8;
              bVar5 = ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                      compare<embree::sse2::PresplitItem>(pPVar11,pPVar3);
              pPVar10 = pPVar11;
              pPVar12 = pPVar14;
              if (bVar5) {
                bVar5 = ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                        compare<embree::sse2::PresplitItem>(pPVar3,pPVar1);
                if (bVar5) {
                  uVar8 = *(undefined8 *)param_1;
                  *(undefined8 *)param_1 = *(undefined8 *)pPVar3;
                  *(undefined8 *)pPVar3 = uVar8;
                }
                else {
                  bVar5 = ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                          compare<embree::sse2::PresplitItem>(pPVar11,pPVar1);
                  uVar8 = *(undefined8 *)param_1;
                  if (!bVar5) goto LAB_001280e2;
LAB_00128108:
                  *(undefined8 *)param_1 = *(undefined8 *)(pPVar14 + -8);
                  *(undefined8 *)(pPVar14 + -8) = uVar8;
                }
              }
              else {
                bVar5 = ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                        compare<embree::sse2::PresplitItem>(pPVar11,pPVar1);
                if (bVar5) {
                  uVar8 = *(undefined8 *)param_1;
LAB_001280e2:
                  uVar4 = *(undefined8 *)(param_1 + 8);
                  *(undefined8 *)(param_1 + 8) = uVar8;
                  *(undefined8 *)param_1 = uVar4;
                }
                else {
                  bVar5 = ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                          compare<embree::sse2::PresplitItem>(pPVar3,pPVar1);
                  uVar8 = *(undefined8 *)param_1;
                  if (bVar5) goto LAB_00128108;
                  *(undefined8 *)param_1 = *(undefined8 *)pPVar3;
                  *(undefined8 *)pPVar3 = uVar8;
                }
              }
              while( true ) {
                while (bVar5 = ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                               compare<embree::sse2::PresplitItem>(pPVar10,param_1), bVar5) {
                  pPVar10 = pPVar10 + 8;
                }
                do {
                  pPVar12 = pPVar12 + -8;
                  bVar5 = ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                          compare<embree::sse2::PresplitItem>(param_1,pPVar12);
                } while (bVar5);
                if (pPVar12 <= pPVar10) break;
                uVar8 = *(undefined8 *)pPVar10;
                *(undefined8 *)pPVar10 = *(undefined8 *)pPVar12;
                *(undefined8 *)pPVar12 = uVar8;
                pPVar10 = pPVar10 + 8;
              }
              std::
              __introsort_loop<embree::sse2::PresplitItem*,long,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                        (pPVar10,pPVar14,lVar13,
                         ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                         compare<embree::sse2::PresplitItem>);
              lVar7 = (long)pPVar10 - (long)param_1;
              if (lVar7 < 0x81) goto LAB_001281a6;
              pPVar14 = pPVar10;
            } while (lVar13 != 0);
            uVar9 = lVar7 >> 3;
          }
          for (lVar7 = (long)(uVar9 - 2) >> 1;
              std::
              __adjust_heap<embree::sse2::PresplitItem*,long,embree::sse2::PresplitItem,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                        (param_1,lVar7,uVar9,*(undefined8 *)(param_1 + lVar7 * 8),
                         ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                         compare<embree::sse2::PresplitItem>), lVar7 != 0; lVar7 = lVar7 + -1) {
          }
          do {
            pPVar10 = pPVar10 + -8;
            uVar8 = *(undefined8 *)pPVar10;
            *(undefined8 *)pPVar10 = *(undefined8 *)param_1;
            std::
            __adjust_heap<embree::sse2::PresplitItem*,long,embree::sse2::PresplitItem,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                      (param_1,0,(long)pPVar10 - (long)param_1 >> 3,uVar8,
                       ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                       compare<embree::sse2::PresplitItem>);
          } while (8 < (long)pPVar10 - (long)param_1);
LAB_001281a6:
          pPVar10 = param_1 + 0x78;
          std::
          __insertion_sort<embree::sse2::PresplitItem*,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                    (param_1,param_1 + 0x80,
                     ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                     compare<embree::sse2::PresplitItem>);
          if (pPVar2 != param_1 + 0x80) {
            do {
              local_68 = *(undefined4 **)(pPVar10 + 8);
              pPVar11 = pPVar10;
              while (bVar5 = ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                             compare<embree::sse2::PresplitItem>((PresplitItem *)&local_68,pPVar11),
                    bVar5) {
                *(undefined8 *)(pPVar11 + 8) = *(undefined8 *)pPVar11;
                pPVar11 = pPVar11 + -8;
              }
              pPVar10 = pPVar10 + 8;
              *(undefined4 **)(pPVar11 + 8) = local_68;
            } while (pPVar2 + -8 != pPVar10);
          }
          goto LAB_0012806a;
        }
      }
      std::
      __insertion_sort<embree::sse2::PresplitItem*,__gnu_cxx::__ops::_Iter_comp_iter<bool(*)(embree::sse2::PresplitItem_const&,embree::sse2::PresplitItem_const&)>>
                (param_1,pPVar2,
                 ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::
                 compare<embree::sse2::PresplitItem>);
    }
  }
LAB_0012806a:
  embree::alignedFree(local_88);
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5},
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6},
   embree::vector_t<embree::PrimRef, embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >
   >(unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&, unsigned int,
   embree::sse2::SplittingGrid const&, embree::PrimRef*, unsigned int&)#5} const&,
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&,
   embree::BuildProgressMonitor&)::{lambda(embree::PrimRef const&)#6} const&) */

sse2 * __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>
          (sse2 *this,ulong param_1,vector_t *param_2,PrimInfoT *param_3,
          _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
          *param_4,_lambda_embree__PrimRef_const___6_ *param_5)

{
  float *pfVar1;
  float *pfVar2;
  float *pfVar3;
  int *piVar4;
  undefined8 *puVar5;
  long lVar6;
  long lVar7;
  undefined1 auVar8 [16];
  ulong uVar9;
  undefined1 auVar10 [8];
  PresplitItem *pPVar11;
  uint *puVar12;
  PresplitItem *pPVar13;
  undefined4 *puVar14;
  ulong uVar15;
  long lVar16;
  undefined1 (*pauVar17) [16];
  undefined1 *puVar18;
  undefined1 *puVar19;
  long lVar20;
  PrimRef *pPVar21;
  undefined8 uVar22;
  undefined4 *puVar23;
  float *pfVar24;
  uint uVar25;
  ulong uVar26;
  PrimRef *pPVar27;
  ulong uVar28;
  long in_FS_OFFSET;
  float fVar29;
  uint uVar30;
  float fVar33;
  uint uVar34;
  float fVar35;
  uint uVar36;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  float fVar37;
  uint uVar38;
  uint uVar39;
  uint uVar40;
  float fVar42;
  float fVar43;
  undefined1 auVar41 [16];
  undefined1 auVar44 [16];
  undefined1 auVar45 [16];
  float fVar46;
  float fVar49;
  float fVar50;
  undefined1 auVar47 [16];
  undefined1 auVar48 [16];
  float fVar51;
  undefined1 auVar52 [16];
  float fVar53;
  uint uVar54;
  ulong uStack_728;
  float *local_710;
  undefined4 *local_6f8;
  _lambda_embree__range<unsigned_long>_const___3_ *local_6e0;
  _lambda_embree__sse2__PresplitItem_const___4_ _Stack_6c2;
  undefined1 uStack_6c1;
  float local_6c0;
  uint uStack_6bc;
  ulong local_6b8;
  ulong local_6b0;
  ulong uStack_6a8;
  undefined4 *puStack_6a0;
  undefined4 *puStack_698;
  ulong uStack_690;
  long lStack_688;
  ulong uStack_680;
  undefined4 *puStack_678;
  ulong uStack_670;
  long lStack_668;
  undefined1 *puStack_660;
  undefined4 *puStack_658;
  uint *puStack_650;
  undefined1 *puStack_648;
  undefined4 **ppuStack_640;
  undefined1 local_630 [8];
  long local_628;
  long local_620;
  PresplitItem *local_618;
  float local_610;
  float fStack_60c;
  float fStack_608;
  undefined4 uStack_604;
  float local_600;
  float local_5fc;
  uint *puStack_5f0;
  undefined4 **ppuStack_5e8;
  undefined1 *puStack_5e0;
  undefined4 **ppuStack_5d8;
  long *plStack_5d0;
  ulong *puStack_5c8;
  ulong *puStack_5c0;
  PrimRef *pPStack_5b8;
  uint **ppuStack_5b0;
  vector_t *local_5a0;
  ulong *puStack_598;
  undefined1 **ppuStack_590;
  PrimRef *pPStack_588;
  _lambda_unsigned_long__embree__sse2__PresplitItem_const___1_ *p_Stack_580;
  float local_570;
  undefined4 uStack_56c;
  undefined8 uStack_568;
  undefined8 uStack_560;
  _lambda_unsigned_long__unsigned_long___2_ *p_Stack_558;
  undefined4 **ppuStack_550;
  undefined8 uStack_548;
  undefined1 auStack_540 [16];
  undefined8 uStack_530;
  ulong uStack_528;
  undefined1 local_520 [8];
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_518;
  undefined1 local_510 [16];
  undefined1 auStack_500 [16];
  undefined1 auStack_4f0 [16];
  undefined8 uStack_4e0;
  undefined8 uStack_4d8;
  float fStack_4d0;
  float fStack_4cc;
  float fStack_4c8;
  float fStack_4c4;
  float fStack_4c0;
  float fStack_4bc;
  float fStack_4b8;
  float fStack_4b4;
  float fStack_4b0;
  float fStack_4ac;
  float fStack_4a8;
  float fStack_4a4;
  float fStack_4a0;
  float fStack_49c;
  float fStack_498;
  float fStack_494;
  undefined1 auStack_490 [16];
  undefined1 auStack_480 [16];
  undefined1 auStack_470 [16];
  PrimRef aPStack_460 [256];
  undefined4 auStack_360 [198];
  long local_48;
  
  lVar16 = *(long *)(param_2 + 0x10);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_628 = 0;
  local_620 = 0;
  local_618 = (PresplitItem *)0x0;
  local_6b8 = *(long *)(param_3 + 0x48) - *(long *)(param_3 + 0x40);
  local_6b0 = (*(long *)(param_3 + 0x40) + lVar16) - *(long *)(param_3 + 0x48);
  local_6f8 = (undefined4 *)0x0;
  if (lVar16 != 0) {
    uVar15 = lVar16 * 8;
    local_618 = (PresplitItem *)embree::alignedMalloc(uVar15,4);
    pPVar11 = local_618;
    do {
      *(undefined4 *)pPVar11 = 0;
      pPVar13 = pPVar11 + 8;
      *(undefined4 *)(pPVar11 + 4) = 0;
      pPVar11 = pPVar13;
    } while (local_618 + uVar15 != pPVar13);
    local_628 = lVar16;
    local_620 = lVar16;
    local_6f8 = (undefined4 *)embree::alignedMalloc(uVar15,4);
    puVar23 = local_6f8;
    do {
      *puVar23 = 0;
      puVar14 = puVar23 + 2;
      puVar23[1] = 0;
      puVar23 = puVar14;
    } while (local_6f8 + lVar16 * 2 != puVar14);
  }
  uVar15 = local_6b8;
  local_6c0 = _LC12;
  local_610 = *(float *)param_3;
  fStack_60c = *(float *)(param_3 + 4);
  fStack_608 = *(float *)(param_3 + 8);
  uStack_604 = *(undefined4 *)(param_3 + 0xc);
  local_5fc = *(float *)(param_3 + 0x18) - fStack_608;
  if (*(float *)(param_3 + 0x18) - fStack_608 <= *(float *)(param_3 + 0x14) - fStack_60c) {
    local_5fc = *(float *)(param_3 + 0x14) - fStack_60c;
  }
  if (local_5fc <= *(float *)(param_3 + 0x10) - local_610) {
    local_5fc = *(float *)(param_3 + 0x10) - local_610;
  }
  local_600 = 0.0;
  if (local_5fc != 0.0) {
    local_600 = _LC49 / local_5fc;
  }
  uVar28 = local_6b8 + 0x7f >> 7;
  local_570 = 0.0;
  local_520 = (undefined1  [8])local_630;
  local_518 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
               *)&local_610;
  local_510._0_8_ = param_2;
  local_510._8_8_ = param_5;
  if (uVar28 == 1) {
    fVar53 = 0.0;
    uVar28 = 0;
    pPVar11 = local_618;
    uVar25 = _LC32;
    uVar54 = _LC32;
    fVar42 = _LC31;
    do {
      lVar16 = uVar28 * 8;
      *(int *)(pPVar11 + lVar16 + 4) = (int)uVar28;
      pfVar24 = (float *)(uVar28 * 0x20 + *(long *)(local_510._0_8_ + 0x20));
      fVar43 = *(float *)(local_518 + 0x10);
      fVar46 = (*pfVar24 - *(float *)local_518) * fVar43 + _LC40;
      fVar49 = (pfVar24[1] - *(float *)(local_518 + 4)) * fVar43 + _UNK_0013f6c4;
      fVar50 = (pfVar24[2] - *(float *)(local_518 + 8)) * fVar43 + _UNK_0013f6c8;
      fVar29 = (pfVar24[4] - *(float *)local_518) * fVar43 + _LC42;
      fVar33 = (pfVar24[5] - *(float *)(local_518 + 4)) * fVar43 + _UNK_0013f6d4;
      fVar35 = (pfVar24[6] - *(float *)(local_518 + 8)) * fVar43 + _UNK_0013f6d8;
      fVar43 = fVar50;
      if ((float)((uint)fVar50 & uVar54) < fVar42) {
        fVar43 = (float)((uint)((float)(int)fVar50 -
                               (float)(-(uint)(fVar50 < (float)(int)fVar50) & (uint)local_6c0)) |
                        ~uVar54 & (uint)fVar50);
      }
      fVar51 = fVar49;
      if ((float)((uint)fVar49 & uVar54) < fVar42) {
        fVar51 = (float)((uint)((float)(int)fVar49 -
                               (float)(-(uint)(fVar49 < (float)(int)fVar49) & (uint)local_6c0)) |
                        ~uVar54 & (uint)fVar49);
      }
      fVar37 = fVar46;
      if ((float)((uint)fVar46 & uVar54) < fVar42) {
        fVar37 = (float)((uint)((float)(int)fVar46 -
                               (float)(-(uint)(fVar46 < (float)(int)fVar46) & (uint)local_6c0)) |
                        ~uVar54 & (uint)fVar46);
      }
      uVar38 = (uint)fVar37;
      uVar39 = (uint)fVar51;
      uVar40 = (uint)fVar43;
      fVar43 = fVar35;
      if ((float)((uint)fVar35 & uVar54) < fVar42) {
        fVar43 = (float)((uint)((float)(int)fVar35 -
                               (float)(-(uint)(fVar35 < (float)(int)fVar35) & (uint)local_6c0)) |
                        ~uVar54 & (uint)fVar35);
      }
      fVar51 = fVar33;
      if ((float)((uint)fVar33 & uVar54) < fVar42) {
        fVar51 = (float)((uint)((float)(int)fVar33 -
                               (float)(-(uint)(fVar33 < (float)(int)fVar33) & (uint)local_6c0)) |
                        ~uVar54 & (uint)fVar33);
      }
      fVar37 = fVar29;
      if ((float)((uint)fVar29 & uVar54) < fVar42) {
        fVar37 = (float)((uint)((float)(int)fVar29 -
                               (float)(-(uint)(fVar29 < (float)(int)fVar29) & (uint)local_6c0)) |
                        ~uVar54 & (uint)fVar29);
      }
      uVar30 = -(uint)((int)fVar46 < (int)fVar29) ^ __LC50;
      uVar34 = -(uint)((int)fVar49 < (int)fVar33) ^ _UNK_0013f6e4;
      uVar36 = -(uint)((int)fVar50 < (int)fVar35) ^ _UNK_0013f6e8;
      uVar30 = uVar30 & uVar38 | ~uVar30 & (int)fVar37;
      uVar34 = uVar34 & uVar39 | ~uVar34 & (int)fVar51;
      uVar36 = uVar36 & uVar40 | ~uVar36 & (int)fVar43;
      uVar39 = ((((uVar39 << 0x10 | uVar39) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) *
               10 & 0x12492492 |
               (((((uVar40 | uVar40 << 0x10) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) *
                5 & 0x9249249) << 2 |
               ((((uVar38 << 0x10 | uVar38) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) *
               5 & 0x9249249;
      fVar43 = 0.0;
      uVar38 = ((((uVar34 << 0x10 | uVar34) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) *
               10 & 0x12492492 |
               (((((uVar36 << 0x10 | uVar36) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) *
                5 & 0x9249249) << 2 |
               ((((uVar30 << 0x10 | uVar30) & 0x30000ff) * 0x101 & 0x300f00f) * 0x11 & 0x30c30c3) *
               5 & 0x9249249;
      if (uVar39 != uVar38) {
        lVar6 = *(long *)(*(long *)(**(long **)local_510._8_8_ + 0x1e0) +
                         (ulong)(uint)pfVar24[3] * 8);
        puVar12 = (uint *)((ulong)(uint)pfVar24[7] * *(long *)(lVar6 + 0x60) +
                          *(long *)(lVar6 + 0x58));
        lVar7 = *(long *)(lVar6 + 0x88);
        lVar6 = *(long *)(lVar6 + 0x90);
        pfVar1 = (float *)(lVar7 + (ulong)*puVar12 * lVar6);
        pfVar2 = (float *)(lVar7 + (ulong)puVar12[1] * lVar6);
        pfVar3 = (float *)(lVar7 + (ulong)puVar12[2] * lVar6);
        fVar29 = *pfVar2 - *pfVar1;
        fVar33 = pfVar2[1] - pfVar1[1];
        fVar35 = pfVar2[2] - pfVar1[2];
        fVar46 = *pfVar3 - *pfVar1;
        fVar49 = pfVar3[1] - pfVar1[1];
        fVar50 = pfVar3[2] - pfVar1[2];
        fVar29 = (float)((uint)(fVar29 * fVar49 - fVar46 * fVar33) & uVar25) +
                 (float)((uint)(fVar33 * fVar50 - fVar49 * fVar35) & uVar25) +
                 (float)((uint)(fVar35 * fVar46 - fVar50 * fVar29) & uVar25);
        if (fVar29 != 0.0) {
          fVar42 = pfVar24[5] - pfVar24[1];
          fVar43 = pfVar24[6] - pfVar24[2];
          uVar39 = uVar39 ^ uVar38;
          uVar25 = 0x1f;
          if (uVar39 != 0) {
            for (; uVar39 >> uVar25 == 0; uVar25 = uVar25 - 1) {
            }
          }
          fVar42 = (pfVar24[4] - *pfVar24) * (fVar42 + fVar43) + fVar42 * fVar43;
          fVar29 = (fVar42 + fVar42) - fVar29;
          if (fVar29 <= 0.0) {
            fVar29 = 0.0;
          }
          fVar42 = powf(_LC44,(float)uVar25);
          fVar43 = SQRT(SQRT(fVar42 * fVar29));
          uVar25 = _LC32;
          uVar54 = _LC6;
          fVar42 = _LC31;
        }
      }
      uVar28 = uVar28 + 1;
      *(float *)(*(long *)((long)local_520 + 0x18) + lVar16) = fVar43;
      pPVar11 = *(PresplitItem **)((long)local_520 + 0x18);
      fVar53 = fVar53 + *(float *)(pPVar11 + lVar16);
    } while (uVar28 < uVar15);
  }
  else {
    fVar53 = parallel_reduce_internal<unsigned_long,float,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::Pr___ProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(float_const&,float_const&)_2_>
                       (uVar28,0,local_6b8,0x80,&local_570,
                        (_lambda_embree__range<unsigned_long>_const___1_ *)local_520,
                        (_lambda_float_const__float_const___2_ *)&local_5a0);
    local_6c0 = _LC12;
  }
  local_6e0 = (_lambda_embree__range<unsigned_long>_const___3_ *)local_520;
  local_710 = &local_570;
  local_6c0 = local_6c0 / fVar53;
  local_5a0 = (vector_t *)0x0;
  local_518 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
               *)&local_6b0;
  local_510._0_8_ = &local_6c0;
  local_520 = (undefined1  [8])local_630;
  TaskScheduler::
  spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_3_>
            (0,local_6b8,0x80,local_6e0,(TaskGroupContext *)&local_5a0);
  embree::TaskScheduler::wait();
  if (local_5a0 != (vector_t *)0x0) goto LAB_001299f3;
  local_570 = 0.0;
  uStack_56c = 0;
  auVar8._8_8_ = 0;
  auVar8._0_8_ = local_518;
  _local_520 = auVar8 << 0x40;
  local_5a0 = (vector_t *)0x0;
  uStack_6a8 = parallel_partitioning<embree::sse2::PresplitItem,unsigned_long,int,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitore___bree::sse2::PresplitItem_const&)_4_const&,unsigned_long)::_lambda(unsigned_long&,unsigned_long&)_2_>
                         (local_618,0,local_6b8,(int *)&local_5a0,(ulong *)local_710,
                          (ulong *)local_6e0,&_Stack_6c2,
                          (_lambda_unsigned_long__embree__sse2__PresplitItem_const___1_ *)
                          &puStack_5f0,(_lambda_unsigned_long__unsigned_long___2_ *)&plStack_5d0,
                          0x400);
  if (local_6b8 <= uStack_6a8) {
    uVar22 = *(undefined8 *)(param_3 + 8);
    *(undefined8 *)this = *(undefined8 *)param_3;
    *(undefined8 *)(this + 8) = uVar22;
    uVar22 = *(undefined8 *)(param_3 + 0x18);
    *(undefined8 *)(this + 0x10) = *(undefined8 *)(param_3 + 0x10);
    *(undefined8 *)(this + 0x18) = uVar22;
    uVar22 = *(undefined8 *)(param_3 + 0x28);
    *(undefined8 *)(this + 0x20) = *(undefined8 *)(param_3 + 0x20);
    *(undefined8 *)(this + 0x28) = uVar22;
    uVar22 = *(undefined8 *)(param_3 + 0x38);
    *(undefined8 *)(this + 0x30) = *(undefined8 *)(param_3 + 0x30);
    *(undefined8 *)(this + 0x38) = uVar22;
    *(undefined8 *)(this + 0x40) = *(undefined8 *)(param_3 + 0x40);
    *(undefined8 *)(this + 0x48) = *(undefined8 *)(param_3 + 0x48);
    goto LAB_00128d85;
  }
  uStack_728 = local_6b8 - uStack_6a8;
  radix_sort<embree::sse2::PresplitItem,unsigned_int>
            (local_618 + uStack_6a8 * 8,(PresplitItem *)(local_6f8 + uStack_6a8 * 2),uStack_728,
             0x400);
  uVar15 = local_6b8;
  puStack_698 = local_6f8 + uStack_728;
  puStack_6a0 = local_6f8;
  uVar28 = (local_6b8 + 0x7f) - uStack_6a8 >> 7;
  local_570 = 0.0;
  uStack_56c = 0;
  local_518 = param_4;
  local_510._8_8_ = (TaskGroupContext *)&local_610;
  auStack_500._0_8_ = &puStack_6a0;
  auStack_500._8_8_ = &uStack_6a8;
  if (uVar28 == 1) {
    local_520 = (undefined1  [8])local_630;
    local_510._0_8_ = param_2;
    if (uStack_6a8 < local_6b8) {
      uVar28 = 0;
      auVar44._4_4_ = _LC12;
      auVar44._0_4_ = _LC12;
      auVar44._8_4_ = _LC12;
      auVar44._12_4_ = _LC12;
      uVar26 = uStack_6a8;
      while( true ) {
        auVar10 = local_520;
        puVar12 = (uint *)(*(long *)((long)local_520 + 0x18) + uVar26 * 8);
        uVar54 = *puVar12;
        local_5a0 = (vector_t *)((ulong)local_5a0 & 0xffffffff00000000);
        pPVar27 = (PrimRef *)((ulong)puVar12[1] * 0x20 + *(long *)(local_510._0_8_ + 0x20));
        lVar16 = *(long *)(*(long *)(**(long **)local_518 + 0x1e0) +
                          (ulong)(*(uint *)(pPVar27 + 0xc) & 0x7ffffff) * 8);
        puVar12 = (uint *)((ulong)*(uint *)(pPVar27 + 0x1c) * *(long *)(lVar16 + 0x60) +
                          *(long *)(lVar16 + 0x58));
        lVar6 = *(long *)(lVar16 + 0x88);
        lVar16 = *(long *)(lVar16 + 0x90);
        pfVar24 = (float *)(lVar6 + (ulong)*puVar12 * lVar16);
        fStack_4d0 = *pfVar24;
        fStack_4cc = pfVar24[1];
        fStack_4c8 = pfVar24[2];
        fStack_4c4 = pfVar24[3];
        pfVar24 = (float *)(lVar6 + (ulong)puVar12[1] * lVar16);
        fStack_4c0 = *pfVar24;
        fStack_4bc = pfVar24[1];
        fStack_4b8 = pfVar24[2];
        fStack_4b4 = pfVar24[3];
        pfVar24 = (float *)(lVar6 + (ulong)puVar12[2] * lVar16);
        fStack_4b0 = *pfVar24;
        fStack_4ac = pfVar24[1];
        fStack_4a8 = pfVar24[2];
        fStack_4a4 = pfVar24[3];
        auVar52._0_4_ = fStack_4c0 - fStack_4d0;
        auVar52._4_4_ = fStack_4bc - fStack_4cc;
        auVar52._8_4_ = fStack_4b8 - fStack_4c8;
        auVar52._12_4_ = fStack_4b4 - fStack_4c4;
        auVar31._0_4_ = fStack_4d0 - fStack_4b0;
        auVar31._4_4_ = fStack_4cc - fStack_4ac;
        auVar31._8_4_ = fStack_4c8 - fStack_4a8;
        auVar31._12_4_ = fStack_4c4 - fStack_4a4;
        auStack_490 = divps(auVar44,auVar52);
        auVar47._0_4_ = fStack_4b0 - fStack_4c0;
        auVar47._4_4_ = fStack_4ac - fStack_4bc;
        auVar47._8_4_ = fStack_4a8 - fStack_4b8;
        auVar47._12_4_ = fStack_4a4 - fStack_4b4;
        auStack_470 = divps(auVar44,auVar31);
        auStack_480 = divps(auVar44,auVar47);
        fStack_4a0 = fStack_4d0;
        fStack_49c = fStack_4cc;
        fStack_498 = fStack_4c8;
        fStack_494 = fStack_4c4;
        splitPrimitive<embree::sse2::TriangleSplitter>
                  ((TriangleSplitter *)&fStack_4d0,pPVar27,uVar54,(SplittingGrid *)local_510._8_8_,
                   aPStack_460,(uint *)&local_5a0);
        uVar25 = (int)local_5a0 - 1;
        local_5a0 = (vector_t *)CONCAT44(local_5a0._4_4_,uVar25);
        uVar28 = uVar28 + uVar25;
        *(uint *)(*(long *)((long)auVar10 + 0x18) + uVar26 * 8) = uVar25 * 0x10000 | uVar54;
        (*(undefined4 **)auStack_500._0_8_)[uVar26 - *(ulong *)auStack_500._8_8_] = uVar25;
        if (uVar15 <= uVar26 + 1) break;
        auVar44._4_12_ = _UNK_0013f654;
        auVar44._0_4_ = _LC12;
        uVar26 = uVar26 + 1;
      }
      goto LAB_00129118;
    }
LAB_001291d0:
    if (uStack_728 < 0x1000) {
LAB_001291eb:
      uStack_6bc = 0;
      lVar16 = 0;
      uVar15 = 0;
      do {
        *(int *)((long)puStack_698 + lVar16) = (int)uVar15;
        uVar15 = (ulong)(uint)((int)uVar15 + *(int *)((long)puStack_6a0 + lVar16));
        lVar16 = lVar16 + 4;
      } while (uStack_728 * 4 != lVar16);
    }
    else {
LAB_00129390:
      uStack_6bc = 0;
      lStack_688 = 0;
      uStack_690 = uStack_728;
      puStack_650 = &uStack_6bc;
      puStack_648 = &uStack_6c1;
      ppuStack_640 = &puStack_6a0;
      uVar28 = embree::TaskScheduler::threadCount();
      uVar15 = (uStack_690 + 0x3ff) - lStack_688 >> 10;
      if (uVar28 < uVar15) {
        uVar15 = uVar28;
      }
      plStack_5d0 = &lStack_688;
      puStack_5c8 = &uStack_690;
      puStack_5c0 = &uStack_680;
      pPVar27 = aPStack_460;
      uVar28 = 0x40;
      if (uVar15 < 0x41) {
        uVar28 = uVar15;
      }
      ppuStack_5b0 = &puStack_650;
      uStack_680 = uVar28;
      pPStack_5b8 = pPVar27;
      if (uVar15 != 0) {
        local_570 = (float)uVar28;
        uStack_56c = (undefined4)(uVar28 >> 0x20);
        puStack_678 = (undefined4 *)0x0;
        uStack_568 = 0;
        uStack_560 = 1;
        p_Stack_558 = (_lambda_unsigned_long__unsigned_long___2_ *)&plStack_5d0;
        ppuStack_550 = &puStack_678;
        lVar16 = embree::TaskScheduler::thread();
        if (lVar16 == 0) {
          uVar22 = embree::TaskScheduler::instance();
          _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_19parallel_prefix_sumImjZNS_19parallel_prefix_sumIPjS6_jSt4plusIjEEET1_RKT_RT0_mRKS9_RKT2_mEUlRKNS_5rangeImEERKjE_S8_EESD_RNS_22ParallelPrefixSumStateISD_EESA_SA_SA_RKSD_SG_SJ_EUlmE_EEvSA_SV_EUlSN_E_EEvSA_SA_SA_SV_PNS0_16TaskGroupContextEEUlvE_EEvSC_SZ_mb
                    (uVar22,local_710,&puStack_678,uVar28,1);
        }
        else {
          if (0xfff < *(ulong *)(lVar16 + 0x40080)) goto LAB_00129a34;
          lVar6 = *(long *)(lVar16 + 0xc00c0);
          uVar15 = lVar6 + 0x30 + (ulong)(-(int)lVar6 & 0x3f);
          if (0x80000 < uVar15) goto LAB_00129a34;
          *(ulong *)(lVar16 + 0xc00c0) = uVar15;
          puVar5 = (undefined8 *)(lVar16 + 0x40090 + uVar15);
          *puVar5 = 0x13f058;
          puVar5[1] = CONCAT44(uStack_56c,local_570);
          puVar5[2] = uStack_568;
          puVar5[3] = uStack_560;
          puVar5[4] = p_Stack_558;
          puVar5[5] = ppuStack_550;
          lVar20 = *(long *)(lVar16 + 0x40080) * 0x40;
          piVar4 = (int *)(lVar16 + 0x40 + lVar20);
          lVar7 = *(long *)(lVar16 + 0xc0100);
          *(undefined4 *)(lVar16 + 0x44 + lVar20) = 1;
          *(undefined1 *)(lVar16 + 0x48 + lVar20) = 1;
          lVar20 = lVar20 + lVar16;
          *(undefined8 **)(lVar20 + 0x50) = puVar5;
          *(long *)(lVar20 + 0x58) = lVar7;
          *(undefined4 ***)(lVar20 + 0x60) = &puStack_678;
          *(long *)(lVar20 + 0x68) = lVar6;
          *(ulong *)(lVar20 + 0x70) = uVar28;
          if (lVar7 != 0) {
            LOCK();
            *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
            UNLOCK();
          }
          LOCK();
          if (*piVar4 == 0) {
            *piVar4 = 1;
          }
          UNLOCK();
          LOCK();
          *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
          UNLOCK();
          if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
            LOCK();
            *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
            UNLOCK();
          }
        }
        embree::TaskScheduler::wait();
        puVar23 = puStack_678;
        if (puStack_678 != (undefined4 *)0x0) goto LAB_00129a16;
        if (uStack_680 != 0) {
          pPVar21 = pPVar27;
          uVar25 = uStack_6bc;
          do {
            *(uint *)(pPVar21 + 0x100) = uVar25;
            uVar25 = uVar25 + *(int *)pPVar21;
            pPVar21 = pPVar21 + 4;
          } while (pPVar27 + uStack_680 * 4 != pPVar21);
        }
      }
      ppuStack_5e8 = &puStack_698;
      lStack_668 = 0;
      uStack_670 = uStack_728;
      puStack_5f0 = &uStack_6bc;
      puStack_5e0 = &uStack_6c1;
      ppuStack_5d8 = &puStack_6a0;
      puVar18 = (undefined1 *)embree::TaskScheduler::threadCount();
      puVar19 = (undefined1 *)((uStack_670 + 0x3ff) - lStack_668 >> 10);
      if (puVar18 < puVar19) {
        puVar19 = puVar18;
      }
      local_5a0 = (vector_t *)&lStack_668;
      puStack_598 = &uStack_670;
      ppuStack_590 = &puStack_660;
      puVar18 = (undefined1 *)0x40;
      if (puVar19 < (undefined1 *)0x41) {
        puVar18 = puVar19;
      }
      puStack_660 = puVar18;
      pPStack_588 = pPVar27;
      p_Stack_580 = (_lambda_unsigned_long__embree__sse2__PresplitItem_const___1_ *)&puStack_5f0;
      if (puVar19 == (undefined1 *)0x0) {
        uVar15 = (ulong)uStack_6bc;
      }
      else {
        puStack_658 = (undefined4 *)0x0;
        local_518 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                     *)0x0;
        local_510._0_8_ = (vector_t *)0x1;
        local_520 = (undefined1  [8])puVar18;
        local_510._8_8_ = (TaskGroupContext *)&local_5a0;
        auStack_500._0_8_ = &puStack_658;
        lVar16 = embree::TaskScheduler::thread();
        if (lVar16 == 0) {
          uVar22 = embree::TaskScheduler::instance();
          _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_19parallel_prefix_sumImjZNS_19parallel_prefix_sumIPjS6_jSt4plusIjEEET1_RKT_RT0_mRKS9_RKT2_mEUlRKNS_5rangeImEERKjE0_S8_EESD_RNS_22ParallelPrefixSumStateISD_EESA_SA_SA_RKSD_SG_SJ_EUlmE_EEvSA_SV_EUlSN_E_EEvSA_SA_SA_SV_PNS0_16TaskGroupContextEEUlvE_EEvSC_SZ_mb
                    (uVar22,local_6e0,&puStack_658,puVar18,1);
        }
        else {
          if (0xfff < *(ulong *)(lVar16 + 0x40080)) {
LAB_00129a34:
                    /* WARNING: Subroutine does not return */
            abort();
          }
          lVar6 = *(long *)(lVar16 + 0xc00c0);
          uVar15 = lVar6 + 0x30 + (ulong)(-(int)lVar6 & 0x3f);
          if (0x80000 < uVar15) goto LAB_00129a34;
          *(ulong *)(lVar16 + 0xc00c0) = uVar15;
          puVar5 = (undefined8 *)(lVar16 + 0x40090 + uVar15);
          *puVar5 = 0x13f070;
          puVar5[1] = local_520;
          puVar5[2] = local_518;
          puVar5[3] = local_510._0_8_;
          puVar5[4] = local_510._8_8_;
          puVar5[5] = auStack_500._0_8_;
          lVar20 = *(long *)(lVar16 + 0x40080) * 0x40;
          piVar4 = (int *)(lVar16 + 0x40 + lVar20);
          lVar7 = *(long *)(lVar16 + 0xc0100);
          *(undefined4 *)(lVar16 + 0x44 + lVar20) = 1;
          *(undefined1 *)(lVar16 + 0x48 + lVar20) = 1;
          lVar20 = lVar20 + lVar16;
          *(undefined8 **)(lVar20 + 0x50) = puVar5;
          *(long *)(lVar20 + 0x58) = lVar7;
          *(undefined4 ***)(lVar20 + 0x60) = &puStack_658;
          *(long *)(lVar20 + 0x68) = lVar6;
          *(undefined1 **)(lVar20 + 0x70) = puVar18;
          if (lVar7 != 0) {
            LOCK();
            *(int *)(lVar7 + 4) = *(int *)(lVar7 + 4) + 1;
            UNLOCK();
          }
          LOCK();
          if (*piVar4 == 0) {
            *piVar4 = 1;
          }
          UNLOCK();
          LOCK();
          *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
          UNLOCK();
          if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
            LOCK();
            *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
            UNLOCK();
          }
        }
        embree::TaskScheduler::wait();
        puVar23 = puStack_658;
        if (puStack_658 != (undefined4 *)0x0) {
LAB_00129a16:
          local_520 = (undefined1  [8])puVar23;
          std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
          std::rethrow_exception(local_6e0);
        }
        uVar15 = (ulong)uStack_6bc;
        if (puStack_660 != (undefined1 *)0x0) {
          pPVar21 = pPVar27 + (long)puStack_660 * 4;
          do {
            *(int *)(pPVar27 + 0x100) = (int)uVar15;
            uVar15 = (ulong)(uint)((int)uVar15 + *(int *)pPVar27);
            pPVar27 = pPVar27 + 4;
          } while (pPVar21 != pPVar27);
        }
      }
    }
  }
  else {
    local_520 = (undefined1  [8])local_630;
    local_510._0_8_ = param_2;
    uVar28 = parallel_reduce_internal<unsigned_long,unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<em___)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(unsigned_long_const&,unsigned_long_const&)_6_>
                       (uVar28,uStack_6a8,local_6b8,0x80,(ulong *)local_710,
                        (_lambda_embree__range<unsigned_long>_const___5_ *)local_6e0,
                        (_lambda_unsigned_long_const__unsigned_long_const___6_ *)&local_5a0);
LAB_00129118:
    if (uVar28 <= local_6b0) goto LAB_001291d0;
    uVar15 = local_6b8 - 1;
    uVar28 = local_6b8;
    if (uStack_6a8 <= uVar15) {
      uVar26 = (ulong)*(ushort *)(local_618 + uVar15 * 8 + 2);
      while ((uVar9 = uVar15, uVar26 < local_6b0 &&
             (uVar15 = uVar9 - 1, uVar28 = uVar9, uStack_6a8 <= uVar15))) {
        uVar26 = uVar26 + *(ushort *)(local_618 + uVar15 * 8 + 2);
      }
    }
    uStack_6bc = 0;
    puStack_6a0 = puStack_6a0 + (uVar28 - uStack_6a8);
    uStack_728 = (uStack_728 + uStack_6a8) - uVar28;
    uStack_6a8 = uVar28;
    if (0xfff < uStack_728) goto LAB_00129390;
    if (uStack_728 != 0) goto LAB_001291eb;
    uVar15 = 0;
  }
  local_5a0 = (vector_t *)0x0;
  local_510._8_8_ = (TaskGroupContext *)&local_610;
  local_510._0_8_ = param_2;
  auStack_500._8_8_ = &puStack_698;
  auStack_500._0_8_ = &local_6b8;
  auStack_4f0._0_8_ = &uStack_6a8;
  local_520 = (undefined1  [8])local_630;
  local_518 = param_4;
  TaskScheduler::
  spawn<unsigned_long,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_const&,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_const&)::_lambda(embree::range<unsigned_long>const&)_7_>
            (uStack_6a8,local_6b8,0x80,(_lambda_embree__range<unsigned_long>_const___7_ *)local_6e0,
             (TaskGroupContext *)&local_5a0);
  embree::TaskScheduler::wait();
  if (local_5a0 == (vector_t *)0x0) {
    local_6b8 = uVar15 + local_6b8;
    uStack_4e0 = 0;
    uVar15 = local_6b8 + 0x7f >> 7;
    local_520 = (undefined1  [8])CONCAT44(_LC3,_LC3);
    register0x00001288 = _LC3;
    register0x0000128c = _LC3;
    local_510._0_8_ = CONCAT44(_LC1,_LC1);
    local_510._8_4_ = _LC1;
    local_510._12_4_ = _LC1;
    uStack_4d8 = 0;
    local_5a0 = param_2;
    auStack_500 = _local_520;
    auStack_4f0 = local_510;
    if (uVar15 == 1) {
      auVar45._8_4_ = _LC1;
      auVar45._0_8_ = local_510._0_8_;
      auVar45._12_4_ = _LC1;
      auVar48._8_4_ = _LC3;
      auVar48._0_8_ = local_520;
      auVar48._12_4_ = _LC3;
      uVar15 = 0;
      pauVar17 = *(undefined1 (**) [16])(param_2 + 0x20);
      auStack_540 = local_510;
      auVar41 = _local_520;
      do {
        auVar32._0_4_ = *(float *)pauVar17[1] + *(float *)*pauVar17;
        auVar32._4_4_ = *(float *)(pauVar17[1] + 4) + *(float *)(*pauVar17 + 4);
        auVar32._8_4_ = *(float *)(pauVar17[1] + 8) + *(float *)(*pauVar17 + 8);
        auVar32._12_4_ = *(float *)(pauVar17[1] + 0xc) + *(float *)(*pauVar17 + 0xc);
        uVar15 = uVar15 + 1;
        auVar48 = minps(auVar48,*pauVar17);
        auVar45 = maxps(auVar45,pauVar17[1]);
        auVar41 = minps(auVar41,auVar32);
        auStack_540 = maxps(auStack_540,auVar32);
        pauVar17 = pauVar17 + 2;
      } while (uVar15 < local_6b8);
      uStack_530 = 0;
      uStack_528 = local_6b8;
    }
    else {
      parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>(unsigned_long,embree::vector_t<embree::PrimRef,embr___InfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_9_>
                ((ulong)local_710,uVar15,0,local_6b8,(PrimInfoT *)0x80,
                 (_lambda_embree__range<unsigned_long>_const___8_ *)local_6e0,
                 (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___9_
                  *)&local_5a0);
      auVar48._4_4_ = uStack_56c;
      auVar48._0_4_ = local_570;
      auVar48._8_8_ = uStack_568;
      auVar45._8_8_ = p_Stack_558;
      auVar45._0_8_ = uStack_560;
      auVar41._8_8_ = uStack_548;
      auVar41._0_8_ = ppuStack_550;
    }
    *(undefined8 *)(this + 0x40) = uStack_530;
    *(ulong *)(this + 0x48) = uStack_528;
    *(undefined1 (*) [16])this = auVar48;
    *(undefined1 (*) [16])(this + 0x10) = auVar45;
    *(undefined1 (*) [16])(this + 0x20) = auVar41;
    *(undefined1 (*) [16])(this + 0x30) = auStack_540;
LAB_00128d85:
    embree::alignedFree(local_6f8);
    embree::alignedFree(local_618);
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      return this;
    }
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
LAB_001299f3:
  local_570 = SUB84(local_5a0,0);
  uStack_56c = (undefined4)((ulong)local_5a0 >> 0x20);
  std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
  std::rethrow_exception(local_710);
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,
   embree::sse2::TriangleSplitterFactory>(embree::Scene*, embree::Geometry::GTypeMask, bool,
   unsigned long, embree::vector_t<embree::PrimRef,
   embree::aligned_monitored_allocator<embree::PrimRef, 32ul> >&, embree::BuildProgressMonitor&) */

sse2 * __thiscall
embree::sse2::
createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
          (sse2 *this,vector_t **param_1,ulong param_3,char param_4,ulong param_5,vector_t *param_6,
          undefined8 *param_7)

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  vector_t *pvVar5;
  vector_t *pvVar6;
  ulong uVar7;
  long lVar8;
  undefined1 (*pauVar9) [16];
  undefined1 (*pauVar10) [16];
  undefined8 uVar11;
  vector_t *pvVar12;
  ulong uVar13;
  ulong uVar14;
  ulong uVar15;
  ulong uVar16;
  ulong uVar17;
  vector_t *pvVar18;
  ulong uVar19;
  long lVar20;
  ulong uVar21;
  long in_FS_OFFSET;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2dd8;
  vector_t **local_2d90;
  undefined1 local_2d81;
  vector_t *local_2d80;
  vector_t *local_2d78;
  vector_t *local_2d70;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d68;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d60;
  vector_t **local_2d58;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  *local_2d50;
  vector_t **local_2d48;
  ulong local_2d40;
  char local_2d38;
  vector_t *local_2d28;
  vector_t **ppvStack_2d20;
  _lambda_embree__PrimRef_const___6_ *local_2d18;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  **pp_Stack_2d10;
  _lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
  **local_2d08;
  vector_t *local_2d00;
  undefined1 local_2cf8 [16];
  undefined1 local_2ce8 [16];
  undefined1 local_2cd8 [16];
  undefined1 local_2cc8 [16];
  long local_2cb8;
  long local_2cb0;
  undefined1 local_2ca8 [16];
  undefined1 local_2c98 [16];
  undefined1 local_2c88 [16];
  undefined1 local_2c78 [16];
  long local_2c68;
  long local_2c60;
  long local_2c58 [64];
  ulong local_2a58 [64];
  vector_t *local_2858;
  ulong local_2850;
  undefined1 local_2848 [10248];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_2858 = (vector_t *)0x0;
  local_2d90 = param_1;
  local_2d48 = param_1;
  local_2d40 = param_3;
  local_2d38 = param_4;
  if (*(code **)*param_7 == Scene::BuildProgressMonitorInterface::operator()) {
    embree::Scene::progressMonitor(0.0);
  }
  else {
    (**(code **)*param_7)(param_7,0);
  }
  if (local_2d48[0x3a] == (vector_t *)0x0) {
    local_2850 = 0;
    embree::TaskScheduler::threadCount();
    local_2858 = (vector_t *)0x1;
LAB_0012a34d:
    local_2a58[0] = 0;
    local_2c58[0] = 0;
    pvVar6 = (vector_t *)0x1;
  }
  else {
    pvVar6 = local_2d48[0x3c];
    uVar19 = 0;
    pvVar12 = pvVar6 + (long)local_2d48[0x3a] * 8;
    do {
      lVar20 = *(long *)pvVar6;
      if ((((lVar20 != 0) && ((*(byte *)(lVar20 + 0x3e) & 0x20) != 0)) &&
          (((long)(1 << (*(byte *)(lVar20 + 0x3c) & 0x1f)) & local_2d40) != 0)) &&
         ((*(int *)(lVar20 + 0x24) != 1) == (bool)local_2d38)) {
        uVar19 = uVar19 + *(uint *)(lVar20 + 0x20);
      }
      pvVar6 = pvVar6 + 8;
    } while (pvVar12 != pvVar6);
    local_2850 = uVar19;
    pvVar6 = (vector_t *)embree::TaskScheduler::threadCount();
    local_2c58[0] = 0;
    local_2a58[0] = 0;
    pvVar12 = (vector_t *)(uVar19 + 0x3ff >> 10);
    if (pvVar6 < pvVar12) {
      pvVar12 = pvVar6;
    }
    pvVar6 = (vector_t *)0x40;
    if (pvVar12 < (vector_t *)0x41) {
      pvVar6 = pvVar12;
    }
    if (pvVar6 == (vector_t *)0x0) {
      pvVar6 = (vector_t *)0x1;
    }
    uVar7 = uVar19 / (ulong)pvVar6;
    local_2858 = pvVar6;
    if (pvVar12 < (vector_t *)0x2) goto LAB_0012a34d;
    pvVar12 = (vector_t *)0x1;
    lVar20 = 0;
    uVar14 = 0;
    do {
      lVar3 = *(long *)(local_2d48[0x3c] + lVar20 * 8);
      uVar15 = uVar14;
      if (((((lVar3 != 0) && ((*(byte *)(lVar3 + 0x3e) & 0x20) != 0)) &&
           (((local_2d40 & (long)(1 << (*(byte *)(lVar3 + 0x3c) & 0x1f))) != 0 &&
            (((*(int *)(lVar3 + 0x24) != 1) == (bool)local_2d38 &&
             (uVar21 = (ulong)*(uint *)(lVar3 + 0x20), uVar21 != 0)))))) &&
          (uVar15 = uVar21 + uVar14, uVar7 <= uVar15)) && (pvVar12 < pvVar6)) {
        uVar13 = 0;
        uVar16 = (long)(pvVar12 + 1) * uVar19;
        pvVar5 = pvVar12 + 1;
        pvVar18 = pvVar12;
        while( true ) {
          pvVar12 = pvVar5;
          uVar17 = uVar7;
          lVar3 = uVar17 + uVar13;
          local_2c58[(long)pvVar18] = lVar20;
          uVar7 = uVar16 / (ulong)pvVar6;
          uVar13 = lVar3 - uVar14;
          local_2a58[(long)pvVar18] = uVar13;
          if (uVar21 <= uVar13) break;
          uVar16 = uVar16 + uVar19;
          uVar15 = (uVar17 + uVar21 + uVar14) - lVar3;
          if ((pvVar6 <= pvVar12) || (uVar15 < uVar7)) goto LAB_00129cec;
          pvVar5 = pvVar12 + 1;
          pvVar18 = pvVar12;
          uVar14 = uVar17;
        }
        uVar15 = (uVar14 + uVar17 + uVar21) - lVar3;
      }
LAB_00129cec:
      lVar20 = lVar20 + 1;
      uVar14 = uVar15;
    } while (pvVar12 < pvVar6);
  }
  local_2c68 = 0;
  local_2ce8._8_8_ = &local_2d60;
  local_2ce8._0_8_ = (_lambda_embree__PrimRef_const___6_ *)local_2ca8;
  local_2c60 = 0;
  local_2cf8._8_8_ = &local_2d70;
  local_2cf8._0_8_ = (vector_t *)local_2c58;
  local_2cd8._8_8_ = (vector_t *)&local_2d58;
  local_2cd8._0_8_ = &local_2d80;
  local_2d68 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                *)0x0;
  ppvStack_2d20 = (vector_t **)0x0;
  local_2d18 = (_lambda_embree__PrimRef_const___6_ *)0x1;
  local_2ca8._8_8_ = _UNK_0013f638;
  local_2ca8._0_8_ = __LC3;
  local_2c98._8_8_ = _UNK_0013f628;
  local_2c98._0_8_ = __LC1;
  local_2c88._8_8_ = _UNK_0013f638;
  local_2c88._0_8_ = __LC3;
  local_2c78._8_8_ = _UNK_0013f628;
  local_2c78._0_8_ = __LC1;
  local_2d78 = param_6;
  local_2d70 = pvVar6;
  local_2d60 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                *)&local_2d48;
  local_2d58 = &local_2d78;
  local_2d50 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                *)&local_2d48;
  local_2d28 = pvVar6;
  pp_Stack_2d10 =
       (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
        **)local_2cf8;
  local_2d08 = &local_2d68;
  lVar20 = embree::TaskScheduler::thread();
  if (lVar20 == 0) {
    uVar11 = embree::TaskScheduler::instance();
    _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_29parallel_for_for_prefix_sum0_IZNS_28parallel_for_for_prefix_sum0INS_5Scene9Iterator2EmNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitINS_12TriangleMeshENSD_23TriangleSplitterFactoryEEESC_PS6_NS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISL_Lm32EEEEERNS_20BuildProgressMonitorEEUlPSI_RKNS_5rangeImEEmmE_ZNSE_ISF_SG_EESC_SH_SJ_bmSP_SR_EUlRKSC_SZ_E0_EET1_RNS_28ParallelForForPrefixSumStateIS11_EERT_T0_RKS11_RKT2_RKT3_EUlmE_mSC_ZNS5_IS7_mSC_SX_S10_EES11_S14_S16_S17_S19_S1C_S1F_EUlmSW_mE0_S10_EES11_S14_S17_RKS15_S19_S1C_S1F_EUlmE_EEvS15_RKS17_EUlSW_E_EEvS15_S15_S15_S1M_PNS0_16TaskGroupContextEEUlvE_EEvS1J_S1P_mb
              (uVar11,&local_2d28,&local_2d68,pvVar6,1);
LAB_00129f43:
    local_2dd8 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                  *)&local_2d28;
    embree::TaskScheduler::wait();
    if (local_2d68 !=
        (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
         *)0x0) {
      local_2d28 = (vector_t *)local_2d68;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(local_2dd8);
    }
    local_2cf8 = local_2ca8;
    local_2ce8 = local_2c98;
    local_2cd8 = local_2c88;
    local_2cc8 = local_2c78;
    local_2cb8 = local_2c68;
    local_2cb0 = local_2c60;
    if (local_2d70 != (vector_t *)0x0) {
      pauVar10 = (undefined1 (*) [16])local_2848;
      do {
        *(long *)pauVar10[0x144] = local_2cb8;
        local_2cb8 = local_2cb8 + *(long *)pauVar10[4];
        pauVar9 = pauVar10 + 5;
        pauVar10[0x140] = local_2cf8;
        local_2cf8 = minps(local_2cf8,*pauVar10);
        pauVar10[0x141] = local_2ce8;
        local_2ce8 = maxps(local_2ce8,pauVar10[1]);
        pauVar10[0x142] = local_2cd8;
        local_2cd8 = minps(local_2cd8,pauVar10[2]);
        pauVar10[0x143] = local_2cc8;
        local_2cc8 = maxps(local_2cc8,pauVar10[3]);
        *(long *)(pauVar10[0x144] + 8) = local_2cb0;
        local_2cb0 = local_2cb0 + *(long *)(pauVar10[4] + 8);
        pauVar10 = pauVar9;
      } while ((undefined1 (*) [16])local_2848 + (long)local_2d70 * 5 != pauVar9);
    }
    if (param_5 != local_2cb0 - local_2cb8) {
      if (*(code **)*param_7 == Scene::BuildProgressMonitorInterface::operator()) {
        embree::Scene::progressMonitor(0.0);
      }
      else {
        (**(code **)*param_7)(param_7,0);
      }
      local_2ca8._8_8_ = _UNK_0013f638;
      local_2ca8._0_8_ = __LC3;
      local_2c68 = 0;
      local_2c98._8_8_ = _UNK_0013f628;
      local_2c98._0_8_ = __LC1;
      local_2c60 = 0;
      local_2d78 = local_2858;
      local_2d08 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                    **)&local_2d81;
      local_2d80 = param_6;
      local_2d68 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                    *)&local_2d48;
      ppvStack_2d20 = &local_2d78;
      local_2d18 = (_lambda_embree__PrimRef_const___6_ *)local_2ca8;
      pp_Stack_2d10 = &local_2d68;
      local_2d00 = (vector_t *)&local_2d58;
      local_2c88 = local_2ca8;
      local_2c78 = local_2c98;
      if (local_2858 == (vector_t *)0x0) {
        local_2cb8 = 0;
        local_2cb0 = 0;
        local_2d50 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                      *)&local_2d48;
        local_2cf8 = local_2ca8;
        local_2ce8 = local_2c98;
        local_2cd8 = local_2ca8;
        local_2cc8 = local_2c98;
        local_2ca8._8_8_ = _UNK_0013f638;
      }
      else {
        local_2d70 = (vector_t *)0x0;
        local_2d60 = local_2dd8;
        local_2d58 = &local_2d80;
        local_2d50 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                      *)&local_2d48;
        local_2d28 = (vector_t *)local_2c58;
        _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_29parallel_for_for_prefix_sum1_IZNS_28parallel_for_for_prefix_sum1INS_5Scene9Iterator2EmNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse227createPrimRefArray_presplitINS_12TriangleMeshENSC_23TriangleSplitterFactoryEEESB_PS5_NS_8Geometry9GTypeMaskEbmRNS_8vector_tINS_7PrimRefENS_27aligned_monitored_allocatorISK_Lm32EEEEERNS_20BuildProgressMonitorEEUlPSH_RKNS_5rangeImEEmmRKSB_E1_ZNSD_ISE_SF_EESB_SG_SI_bmSO_SQ_EUlSX_SX_E2_EET1_RNS_28ParallelForForPrefixSumStateIS10_EERT_T0_RKS10_RKT2_RKT3_EUlmE_mSB_ZNS4_IS6_mSB_SY_SZ_EES10_S13_S15_S16_S18_S1B_S1E_EUlmSV_mSX_E0_SZ_EES10_S13_S16_RKS14_S18_S1B_S1E_EUlmE_EEvS14_RKS16_EUlSV_E_EEvS14_S14_S14_S1L_PNS0_16TaskGroupContextE
                  (0,local_2858,1,&local_2d60,&local_2d70);
        embree::TaskScheduler::wait();
        if (local_2d70 != (vector_t *)0x0) {
          local_2d60 = (_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
                        *)local_2d70;
          std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
          std::rethrow_exception(&local_2d60);
        }
        local_2cf8 = local_2ca8;
        local_2ce8 = local_2c98;
        local_2cd8 = local_2c88;
        local_2cc8 = local_2c78;
        local_2cb8 = local_2c68;
        local_2cb0 = local_2c60;
        if (local_2d78 != (vector_t *)0x0) {
          pauVar10 = (undefined1 (*) [16])local_2848;
          do {
            *(long *)pauVar10[0x144] = local_2cb8;
            local_2cb8 = local_2cb8 + *(long *)pauVar10[4];
            pauVar9 = pauVar10 + 5;
            pauVar10[0x140] = local_2cf8;
            local_2cf8 = minps(local_2cf8,*pauVar10);
            pauVar10[0x141] = local_2ce8;
            local_2ce8 = maxps(local_2ce8,pauVar10[1]);
            pauVar10[0x142] = local_2cd8;
            local_2cd8 = minps(local_2cd8,pauVar10[2]);
            pauVar10[0x143] = local_2cc8;
            local_2cc8 = maxps(local_2cc8,pauVar10[3]);
            *(long *)(pauVar10[0x144] + 8) = local_2cb0;
            local_2cb0 = local_2cb0 + *(long *)(pauVar10[4] + 8);
            pauVar10 = pauVar9;
          } while ((undefined1 (*) [16])local_2848 + (long)local_2d78 * 5 != pauVar9);
        }
      }
    }
    local_2d58 = local_2d90;
    local_2ca8._0_8_ = &local_2d90;
    local_2d28 = (vector_t *)&local_2d58;
    createPrimRefArray_presplit<embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&,unsigned_int,embree::sse2::SplittingGrid_const&,embree::PrimRef*,unsigned_int&)_5_,embree::sse2::createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>(embree::Scene*,embree::Geometry::GTypeMask,bool,unsigned_long,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>&,embree::BuildProgressMonitor&)::_lambda(embree::PrimRef_const&)_6_,embree::vector_t<embree::PrimRef,embree::aligned_monitored_allocator<embree::PrimRef,32ul>>>
              (this,param_5,param_6,local_2cf8,local_2dd8,
               (_lambda_embree__PrimRef_const___6_ *)local_2ca8);
    if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
    return this;
  }
  if (*(ulong *)(lVar20 + 0x40080) < 0x1000) {
    lVar3 = *(long *)(lVar20 + 0xc00c0);
    uVar19 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
    if (uVar19 < 0x80001) {
      *(ulong *)(lVar20 + 0xc00c0) = uVar19;
      puVar2 = (undefined8 *)(lVar20 + 0x40090 + uVar19);
      *puVar2 = 0x13eff8;
      puVar2[1] = local_2d28;
      puVar2[2] = ppvStack_2d20;
      puVar2[3] = local_2d18;
      puVar2[4] = pp_Stack_2d10;
      puVar2[5] = local_2d08;
      lVar8 = *(long *)(lVar20 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar20 + 0x40 + lVar8);
      lVar4 = *(long *)(lVar20 + 0xc0100);
      *(undefined4 *)(lVar20 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar20 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar20;
      *(undefined8 **)(lVar8 + 0x50) = puVar2;
      *(long *)(lVar8 + 0x58) = lVar4;
      *(_lambda_embree__PrimRef_const__unsigned_int_embree__sse2__SplittingGrid_const__embree__PrimRef__unsigned_int___5_
        ***)(lVar8 + 0x60) = &local_2d68;
      *(long *)(lVar8 + 0x68) = lVar3;
      *(vector_t **)(lVar8 + 0x70) = pvVar6;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar20 + 0x40080) = *(long *)(lVar20 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar20 + 0x40080) - 1U <= *(ulong *)(lVar20 + 0x40040)) {
        LOCK();
        *(long *)(lVar20 + 0x40040) = *(long *)(lVar20 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00129f43;
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long, embree::ParallelRadixSort<embree::sse2::PresplitItem,
   unsigned int>::tbbRadixIteration(unsigned int, bool, embree::sse2::PresplitItem const*,
   embree::sse2::PresplitItem*, unsigned long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long, embree::parallel_for<unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2}>(unsigned long,
   embree::ParallelRadixSort<embree::sse2::PresplitItem, unsigned int>::tbbRadixIteration(unsigned
   int, bool, embree::sse2::PresplitItem const*, embree::sse2::PresplitItem*, unsigned
   long)::{lambda(unsigned long)#2} const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#2}>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#2}const&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#2}>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::{lambda(unsigned_long)#2}const&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined8 *puVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  long lVar8;
  long lVar9;
  TaskScheduler *pTVar10;
  ulong uVar11;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  long lStack_50;
  ulong local_48;
  undefined8 *puStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  lVar8 = *(long *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  puVar2 = *(undefined8 **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar8)) {
    pTVar3 = *(TaskGroupContext **)(this + 0x28);
    uVar11 = (ulong)(*(long *)(this + 8) + lVar8) >> 1;
    local_58 = uVar11;
    lStack_50 = lVar8;
    local_48 = *(ulong *)(this + 0x18);
    puStack_40 = puVar2;
    local_38 = pTVar3;
    lVar5 = embree::TaskScheduler::thread();
    if (lVar5 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_58,pTVar3,uVar11 - lVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar5 + 0x40080)) goto LAB_0012a766;
      lVar4 = *(long *)(lVar5 + 0xc00c0);
      uVar7 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar7) goto LAB_0012a766;
      *(ulong *)(lVar5 + 0xc00c0) = uVar7;
      puVar2 = (undefined8 *)(lVar5 + 0x40090 + uVar7);
      *puVar2 = &PTR_execute_0013f220;
      puVar2[1] = local_58;
      puVar2[2] = lStack_50;
      puVar2[5] = local_38;
      puVar2[3] = local_48;
      puVar2[4] = puStack_40;
      lVar6 = *(long *)(lVar5 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar5 + 0x40 + lVar6);
      lVar9 = *(long *)(lVar5 + 0xc0100);
      *(undefined4 *)(lVar5 + 0x44 + lVar6) = 1;
      *(undefined1 *)(lVar5 + 0x48 + lVar6) = 1;
      lVar6 = lVar6 + lVar5;
      *(undefined8 **)(lVar6 + 0x50) = puVar2;
      *(long *)(lVar6 + 0x58) = lVar9;
      *(TaskGroupContext **)(lVar6 + 0x60) = pTVar3;
      *(long *)(lVar6 + 0x68) = lVar4;
      *(ulong *)(lVar6 + 0x70) = uVar11 - lVar8;
      if (lVar9 != 0) {
        LOCK();
        *(int *)(lVar9 + 4) = *(int *)(lVar9 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar5 + 0x40080) = *(long *)(lVar5 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar5 + 0x40080) - 1U <= *(ulong *)(lVar5 + 0x40040)) {
        LOCK();
        *(long *)(lVar5 + 0x40040) = *(long *)(lVar5 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_88 = *(long *)(this + 8);
    uStack_70 = *(undefined8 *)(this + 0x20);
    pTVar3 = *(TaskGroupContext **)(this + 0x28);
    local_78 = *(undefined8 *)(this + 0x18);
    uVar7 = local_88 - uVar11;
    uStack_80 = uVar11;
    local_68 = pTVar3;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::parallel_for<unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_>(unsigned_long,embree::ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration(unsigned_int,bool,embree::sse2::PresplitItem_const*,embree::sse2::PresplitItem*,unsigned_long)::_lambda(unsigned_long)_2_const&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_88,pTVar3,uVar7,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) {
LAB_0012a766:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar8 + 0xc00c0);
      uVar11 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar11) goto LAB_0012a766;
      *(ulong *)(lVar8 + 0xc00c0) = uVar11;
      puVar2 = (undefined8 *)(lVar8 + 0x40090 + uVar11);
      *puVar2 = &PTR_execute_0013f220;
      puVar2[1] = local_88;
      puVar2[2] = uStack_80;
      puVar2[5] = local_68;
      puVar2[3] = local_78;
      puVar2[4] = uStack_70;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar4 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar2;
      *(long *)(lVar9 + 0x58) = lVar4;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar3;
      *(long *)(lVar9 + 0x68) = lVar5;
      *(ulong *)(lVar9 + 0x70) = uVar7;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    ParallelRadixSort<embree::sse2::PresplitItem,unsigned_int>::tbbRadixIteration1
              ((uint)*(undefined8 *)puVar2[4],(PresplitItem *)((undefined8 *)puVar2[4])[3],
               (PresplitItem *)(ulong)*(uint *)*puVar2,*(ulong *)puVar2[1],*(ulong *)puVar2[2]);
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> >
   embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul, embree::PrimRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(embree::range<unsigned long>
   const&)#1}, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long, embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>
   >&)::{lambda(embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned
   long, unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul, embree::PrimRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(embree::range<unsigned long>
   const&)#1} const&, embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&,
   unsigned long, embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>
   >&)::{lambda(embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::PrimRef, embree::BBox<embree::Vec3fa> > const&)#2} const&)
    */

embree * __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::_lambda(embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&)_2_>
          (embree *this,ulong param_1,ulong param_2,ulong param_3,ulong param_4,
          BinInfoT_conflict *param_5,_lambda_embree__range<unsigned_long>_const___1_ *param_6,
          _lambda_embree__sse2__BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>_>_const___2_
          *param_7)

{
  long *plVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined1 (*pauVar19) [16];
  ulong uVar20;
  embree *peVar21;
  undefined8 *puVar22;
  undefined1 (*pauVar23) [16];
  undefined1 (*pauVar24) [16];
  long lVar25;
  undefined1 (*pauVar26) [16];
  ulong uVar27;
  BinInfoT_conflict *pBVar28;
  BinInfoT_conflict *__src;
  undefined1 (*pauVar29) [16];
  undefined1 (*pauVar30) [16];
  undefined8 *puVar31;
  undefined1 (*pauVar32) [16];
  undefined8 *puVar33;
  undefined1 (*pauVar34) [16];
  long in_FS_OFFSET;
  byte bVar35;
  undefined1 auVar36 [16];
  undefined1 (*local_2b28) [16];
  ulong local_2b18;
  ulong local_2b10;
  ulong local_2b08;
  undefined8 **local_2b00;
  ulong **local_2af8;
  ulong *local_2af0;
  ulong *local_2ae8;
  ulong *local_2ae0;
  undefined1 (*local_2ad8) [16];
  _lambda_embree__range<unsigned_long>_const___1_ *local_2ad0;
  undefined1 local_2ac0 [3072];
  undefined8 local_1ec0;
  int aiStack_1eb8 [124];
  undefined8 local_1cc8;
  undefined1 local_1cc0 [7168];
  undefined1 (*local_c0) [16];
  ulong local_b8;
  long local_48;
  
  bVar35 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2b18 = param_3;
  local_2b10 = param_2;
  local_2b08 = param_1;
  uVar20 = embree::TaskScheduler::threadCount();
  if (0x200 < local_2b08) {
    local_2b08 = 0x200;
  }
  if (uVar20 < local_2b08) {
    local_2b08 = uVar20;
  }
  local_b8 = local_2b08;
  if (local_2b08 * 0xe00 < 0x2001) {
    local_c0 = (undefined1 (*) [16])local_1cc0;
  }
  else {
    local_c0 = (undefined1 (*) [16])embree::alignedMalloc(local_2b08 * 0xe00,0x40);
  }
  local_2b28 = (undefined1 (*) [16])local_1cc0;
  local_2af0 = &local_2b10;
  local_2ad0 = param_6;
  local_2ae8 = &local_2b18;
  local_2ae0 = &local_2b08;
  local_2ad8 = local_2b28;
  if (local_2b08 != 0) {
    local_2af8 = &local_2af0;
    local_2b00 = (ulong **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_4sse28BinInfoTILm32ENS_7PrimRefENS_4BBoxINS_6Vec3faEEEEEZNS4_24HeuristicArraySpatialSAHINS4_23TriangleSplitterFactoryES6_Lm32ELm16EE20parallel_object_findERKNS4_16PrimInfoExtRangeEmRNS4_10SplitInfoTIS9_EEEUlRKNS_5rangeImEEE_ZNSD_20parallel_object_findESG_mSJ_EUlRKSA_SQ_E0_EET0_T_ST_ST_ST_RKSS_RKT1_RKT2_EUlmE_EEvST_SV_EUlSN_E_EEvST_ST_ST_SV_PNS0_16TaskGroupContextE
              (0,local_2b08,1,&local_2af8,&local_2b00);
    embree::TaskScheduler::wait();
    if (local_2b00 != (ulong **)0x0) {
      local_2af8 = local_2b00;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_2af8);
    }
  }
  pauVar19 = local_c0;
  uVar20 = local_2b08;
  peVar21 = this;
  pBVar28 = param_5;
  do {
    uVar8 = *(undefined8 *)(pBVar28 + 8);
    __src = pBVar28 + 0x60;
    *(undefined8 *)peVar21 = *(undefined8 *)pBVar28;
    *(undefined8 *)(peVar21 + 8) = uVar8;
    uVar8 = *(undefined8 *)(pBVar28 + 0x18);
    *(undefined8 *)(peVar21 + 0x10) = *(undefined8 *)(pBVar28 + 0x10);
    *(undefined8 *)(peVar21 + 0x18) = uVar8;
    uVar8 = *(undefined8 *)(pBVar28 + 0x28);
    *(undefined8 *)(peVar21 + 0x20) = *(undefined8 *)(pBVar28 + 0x20);
    *(undefined8 *)(peVar21 + 0x28) = uVar8;
    uVar8 = *(undefined8 *)(pBVar28 + 0x38);
    *(undefined8 *)(peVar21 + 0x30) = *(undefined8 *)(pBVar28 + 0x30);
    *(undefined8 *)(peVar21 + 0x38) = uVar8;
    uVar8 = *(undefined8 *)(pBVar28 + 0x48);
    *(undefined8 *)(peVar21 + 0x40) = *(undefined8 *)(pBVar28 + 0x40);
    *(undefined8 *)(peVar21 + 0x48) = uVar8;
    uVar8 = *(undefined8 *)(pBVar28 + 0x58);
    *(undefined8 *)(peVar21 + 0x50) = *(undefined8 *)(pBVar28 + 0x50);
    *(undefined8 *)(peVar21 + 0x58) = uVar8;
    peVar21 = peVar21 + 0x60;
    pBVar28 = __src;
  } while (__src != param_5 + 0xc00);
  puVar22 = (undefined8 *)memmove(this + 0xc00,__src,0x200);
  if (uVar20 != 0) {
    pauVar24 = (undefined1 (*) [16])local_2ac0;
    peVar21 = this;
    pauVar34 = pauVar19;
    do {
      do {
        uVar8 = *(undefined8 *)(peVar21 + 8);
        uVar9 = *(undefined8 *)(peVar21 + 0x10);
        uVar10 = *(undefined8 *)(peVar21 + 0x18);
        pauVar23 = pauVar24 + 6;
        uVar11 = *(undefined8 *)(peVar21 + 0x20);
        uVar12 = *(undefined8 *)(peVar21 + 0x28);
        uVar13 = *(undefined8 *)(peVar21 + 0x30);
        uVar14 = *(undefined8 *)(peVar21 + 0x38);
        uVar15 = *(undefined8 *)(peVar21 + 0x40);
        uVar16 = *(undefined8 *)(peVar21 + 0x48);
        uVar17 = *(undefined8 *)(peVar21 + 0x50);
        uVar18 = *(undefined8 *)(peVar21 + 0x58);
        *(undefined8 *)*pauVar24 = *(undefined8 *)peVar21;
        *(undefined8 *)(*pauVar24 + 8) = uVar8;
        *(undefined8 *)pauVar24[1] = uVar9;
        *(undefined8 *)(pauVar24[1] + 8) = uVar10;
        *(undefined8 *)pauVar24[2] = uVar11;
        *(undefined8 *)(pauVar24[2] + 8) = uVar12;
        *(undefined8 *)pauVar24[3] = uVar13;
        *(undefined8 *)(pauVar24[3] + 8) = uVar14;
        *(undefined8 *)pauVar24[4] = uVar15;
        *(undefined8 *)(pauVar24[4] + 8) = uVar16;
        *(undefined8 *)pauVar24[5] = uVar17;
        *(undefined8 *)(pauVar24[5] + 8) = uVar18;
        pauVar24 = pauVar23;
        peVar21 = peVar21 + 0x60;
      } while (pauVar23 != (undefined1 (*) [16])&local_1ec0);
      plVar1 = *(long **)param_7;
      puVar31 = puVar22;
      pauVar24 = (undefined1 (*) [16])&local_1ec0;
      for (lVar25 = 0x40; lVar25 != 0; lVar25 = lVar25 + -1) {
        *(undefined8 *)*pauVar24 = *puVar31;
        puVar31 = puVar31 + (ulong)bVar35 * -2 + 1;
        pauVar24 = (undefined1 (*) [16])(pauVar24[-(ulong)bVar35] + 8);
      }
      lVar25 = *plVar1;
      pauVar24 = (undefined1 (*) [16])local_2ac0;
      peVar21 = this;
      if (lVar25 != 0) {
        pauVar23 = (undefined1 (*) [16])local_2ac0;
        pauVar26 = pauVar34;
        pauVar29 = pauVar34;
        pauVar32 = (undefined1 (*) [16])&local_1ec0;
        do {
          iVar2 = *(int *)(*pauVar32 + 4);
          iVar3 = *(int *)(*pauVar32 + 8);
          iVar4 = *(int *)(*pauVar32 + 0xc);
          pauVar30 = pauVar29 + 1;
          iVar5 = *(int *)(pauVar29[0xc0] + 4);
          iVar6 = *(int *)(pauVar29[0xc0] + 8);
          iVar7 = *(int *)(pauVar29[0xc0] + 0xc);
          *(int *)*pauVar32 = *(int *)*pauVar32 + *(int *)pauVar29[0xc0];
          *(int *)(*pauVar32 + 4) = iVar2 + iVar5;
          *(int *)(*pauVar32 + 8) = iVar3 + iVar6;
          *(int *)(*pauVar32 + 0xc) = iVar4 + iVar7;
          auVar36 = minps(*pauVar23,*pauVar26);
          *pauVar23 = auVar36;
          auVar36 = maxps(pauVar23[1],pauVar26[1]);
          pauVar23[1] = auVar36;
          auVar36 = minps(pauVar23[2],pauVar26[2]);
          pauVar23[2] = auVar36;
          auVar36 = maxps(pauVar23[3],pauVar26[3]);
          pauVar23[3] = auVar36;
          auVar36 = minps(pauVar23[4],pauVar26[4]);
          pauVar23[4] = auVar36;
          auVar36 = maxps(pauVar23[5],pauVar26[5]);
          pauVar23[5] = auVar36;
          pauVar23 = pauVar23 + 6;
          pauVar26 = pauVar26 + 6;
          pauVar29 = pauVar30;
          pauVar32 = pauVar32 + 1;
        } while (pauVar34 + lVar25 != pauVar30);
      }
      do {
        uVar8 = *(undefined8 *)(*pauVar24 + 8);
        uVar9 = *(undefined8 *)pauVar24[1];
        uVar10 = *(undefined8 *)(pauVar24[1] + 8);
        pauVar23 = pauVar24 + 6;
        uVar11 = *(undefined8 *)pauVar24[2];
        uVar12 = *(undefined8 *)(pauVar24[2] + 8);
        uVar13 = *(undefined8 *)pauVar24[3];
        uVar14 = *(undefined8 *)(pauVar24[3] + 8);
        uVar15 = *(undefined8 *)pauVar24[4];
        uVar16 = *(undefined8 *)(pauVar24[4] + 8);
        uVar17 = *(undefined8 *)pauVar24[5];
        uVar18 = *(undefined8 *)(pauVar24[5] + 8);
        *(undefined8 *)peVar21 = *(undefined8 *)*pauVar24;
        *(undefined8 *)(peVar21 + 8) = uVar8;
        *(undefined8 *)(peVar21 + 0x10) = uVar9;
        *(undefined8 *)(peVar21 + 0x18) = uVar10;
        *(undefined8 *)(peVar21 + 0x20) = uVar11;
        *(undefined8 *)(peVar21 + 0x28) = uVar12;
        *(undefined8 *)(peVar21 + 0x30) = uVar13;
        *(undefined8 *)(peVar21 + 0x38) = uVar14;
        *(undefined8 *)(peVar21 + 0x40) = uVar15;
        *(undefined8 *)(peVar21 + 0x48) = uVar16;
        *(undefined8 *)(peVar21 + 0x50) = uVar17;
        *(undefined8 *)(peVar21 + 0x58) = uVar18;
        pauVar24 = pauVar23;
        peVar21 = peVar21 + 0x60;
      } while ((undefined1 (*) [16])&local_1ec0 != pauVar23);
      pauVar34 = pauVar34 + 0xe0;
      *puVar22 = local_1ec0;
      *(undefined8 *)(this + 0xdf8) = local_1cc8;
      lVar25 = (long)puVar22 - (long)((ulong)(this + 0xc08) & 0xfffffffffffffff8);
      puVar31 = (undefined8 *)((long)&local_1ec0 - lVar25);
      puVar33 = (undefined8 *)((ulong)(this + 0xc08) & 0xfffffffffffffff8);
      for (uVar27 = (ulong)((int)lVar25 + 0x200U >> 3); uVar27 != 0; uVar27 = uVar27 - 1) {
        *puVar33 = *puVar31;
        puVar31 = puVar31 + (ulong)bVar35 * -2 + 1;
        puVar33 = puVar33 + (ulong)bVar35 * -2 + 1;
      }
      pauVar24 = (undefined1 (*) [16])local_2ac0;
      peVar21 = this;
    } while (pauVar34 != pauVar19 + uVar20 * 0xe0);
  }
  if (pauVar19 != local_2b28) {
    embree::alignedFree(pauVar19);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long,
   embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa> >&) */

PrimInfoExtRange *
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_object_find(PrimInfoExtRange *param_1,ulong param_2,SplitInfoT *param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  long lVar9;
  uint uVar10;
  ulong uVar11;
  BinInfoT_conflict *pBVar12;
  ulong in_RCX;
  embree *peVar13;
  ulong uVar14;
  long lVar15;
  long lVar16;
  BinInfoT_conflict *pBVar17;
  undefined1 (*pauVar18) [16];
  undefined1 (*pauVar19) [16];
  undefined1 (*pauVar20) [16];
  float *pfVar21;
  BinInfoT_conflict *pBVar22;
  ulong uVar23;
  embree *peVar24;
  embree *peVar25;
  long lVar26;
  long *in_R8;
  ulong uVar27;
  long in_FS_OFFSET;
  byte bVar28;
  undefined1 auVar29 [16];
  undefined1 auVar30 [16];
  float fVar31;
  uint uVar32;
  int iVar33;
  uint uVar35;
  int iVar36;
  uint uVar37;
  int iVar38;
  float fVar39;
  undefined1 auVar34 [16];
  int iVar40;
  uint uVar41;
  uint uVar44;
  uint uVar45;
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  uint uVar47;
  uint uVar48;
  undefined1 auVar46 [16];
  float fVar49;
  float fVar50;
  float fVar51;
  undefined1 auVar52 [16];
  undefined1 auVar53 [16];
  float fVar54;
  uint local_1f60;
  uint uStack_1f5c;
  uint uStack_1f58;
  uint uStack_1f54;
  undefined1 local_1f50 [16];
  undefined1 local_1f40 [16];
  undefined1 local_1f30 [16];
  undefined1 local_1f20 [16];
  undefined1 local_1f10 [16];
  undefined1 local_1f00 [16];
  ulong *local_1ee8;
  ulong local_1ee0;
  ulong *local_1ed8;
  undefined1 local_1ed0 [8];
  float fStack_1ec8;
  undefined1 local_1ec0 [16];
  ulong local_1eb0 [2];
  float local_1ea0;
  float fStack_1e9c;
  float fStack_1e98;
  float fStack_1e94;
  float local_1e90 [3];
  uint uStack_1e84;
  float local_1e80 [104];
  BinInfoT_conflict aBStack_1ce0 [96];
  BinInfoT_conflict local_1c80 [16];
  undefined1 local_1c70 [3040];
  BinInfoT_conflict local_1090 [4];
  BinInfoT_conflict aBStack_108c [4];
  BinInfoT_conflict aBStack_1088 [4];
  BinInfoT_conflict local_1084 [4];
  BinInfoT_conflict local_1080 [4];
  undefined4 auStack_107c [123];
  embree aeStack_e90 [4];
  int aiStack_e8c [3];
  embree local_e80 [4];
  int aiStack_e7c [3];
  int local_e70 [4];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2992];
  embree local_280 [4];
  int aiStack_27c [141];
  long local_48;
  
  bVar28 = 0;
  auVar29._4_4_ = _LC3;
  auVar29._0_4_ = _LC3;
  auVar29._8_4_ = _LC3;
  auVar29._12_4_ = _LC3;
  auVar30._4_4_ = _LC1;
  auVar30._0_4_ = _LC1;
  auVar30._8_4_ = _LC1;
  auVar30._12_4_ = _LC1;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pBVar22 = local_1080;
  pBVar12 = local_1c80;
  do {
    *(undefined1 (*) [16])(pBVar12 + 0x40) = auVar29;
    pBVar17 = pBVar12 + 0x60;
    *(undefined1 (*) [16])(pBVar12 + 0x50) = auVar30;
    *(undefined1 (*) [16])(pBVar12 + 0x20) = auVar29;
    *(undefined1 (*) [16])(pBVar12 + 0x30) = auVar30;
    *(undefined1 (*) [16])pBVar12 = auVar29;
    *(undefined1 (*) [16])(pBVar12 + 0x10) = auVar30;
    *(undefined1 (*) [16])pBVar22 = (undefined1  [16])0x0;
    pBVar22 = pBVar22 + 0x10;
    pBVar12 = pBVar17;
  } while (local_1080 != pBVar17);
  uVar11 = *(ulong *)(param_3 + 0x40);
  uVar27 = *(ulong *)(param_3 + 0x48) - uVar11;
  fVar31 = (float)uVar27 * __LC25 + __LC26;
  if (__LC27 <= fVar31) {
    local_1eb0[0] = (long)(fVar31 - __LC27) ^ 0x8000000000000000;
  }
  else {
    local_1eb0[0] = (ulong)fVar31;
  }
  local_1ea0 = *(float *)(param_3 + 0x20);
  fStack_1e9c = *(float *)(param_3 + 0x24);
  fStack_1e98 = *(float *)(param_3 + 0x28);
  fStack_1e94 = *(float *)(param_3 + 0x2c);
  local_1ee8 = local_1eb0;
  auVar34._0_4_ = *(float *)(param_3 + 0x30) - local_1ea0;
  auVar34._4_4_ = *(float *)(param_3 + 0x34) - fStack_1e9c;
  auVar34._8_4_ = *(float *)(param_3 + 0x38) - fStack_1e98;
  auVar34._12_4_ = *(float *)(param_3 + 0x3c) - fStack_1e94;
  if (0x20 < local_1eb0[0]) {
    local_1eb0[0] = 0x20;
  }
  auVar42._4_4_ = _LC29;
  auVar42._0_4_ = _LC29;
  auVar42._8_4_ = _LC29;
  auVar42._12_4_ = _LC29;
  uVar23 = uVar27 + 0x3ff >> 10;
  auVar42 = maxps(auVar42,auVar34);
  auVar43._0_4_ = (float)(long)local_1eb0[0] * _LC30;
  auVar43._4_4_ = auVar43._0_4_;
  auVar43._8_4_ = auVar43._0_4_;
  auVar43._12_4_ = auVar43._0_4_;
  auVar34 = divps(auVar43,auVar42);
  local_1e90[0] = (float)(-(uint)(_LC29 < auVar42._0_4_) & auVar34._0_4_);
  local_1e90[1] = (float)(-(uint)(_LC29 < auVar42._4_4_) & auVar34._4_4_);
  local_1e90[2] = (float)(-(uint)(_LC29 < auVar42._8_4_) & auVar34._8_4_);
  uStack_1e84 = -(uint)(_LC29 < auVar42._12_4_) & auVar34._12_4_;
  local_1ee0 = param_2;
  local_1ed8 = local_1ee8;
  if (uVar23 == 1) {
    peVar25 = local_e80;
    peVar24 = local_280;
    do {
      *(undefined1 (*) [16])(peVar25 + 0x40) = auVar29;
      peVar13 = peVar25 + 0x60;
      *(undefined1 (*) [16])(peVar25 + 0x50) = auVar30;
      *(undefined1 (*) [16])(peVar25 + 0x20) = auVar29;
      *(undefined1 (*) [16])(peVar25 + 0x30) = auVar30;
      *(undefined1 (*) [16])peVar25 = auVar29;
      *(undefined1 (*) [16])(peVar25 + 0x10) = auVar30;
      *(undefined1 (*) [16])peVar24 = (undefined1  [16])0x0;
      peVar25 = peVar13;
      peVar24 = peVar24 + 0x10;
    } while (local_280 != peVar13);
    pauVar18 = (undefined1 (*) [16])(uVar11 * 0x20 + *(long *)param_2);
    uVar10 = (int)local_1eb0[0] - 1;
    if (uVar27 != 1) {
      pauVar19 = pauVar18;
      do {
        auVar34 = pauVar19[1];
        auVar43 = *pauVar19;
        pauVar20 = pauVar19 + 4;
        auVar42 = pauVar19[3];
        auVar52 = pauVar19[2];
        uVar32 = (uint)(((auVar34._0_4_ + auVar43._0_4_) - local_1ea0) * local_1e90[0] + _LC16);
        uVar35 = (uint)(((auVar34._4_4_ + auVar43._4_4_) - fStack_1e9c) * local_1e90[1] + _LC16);
        uVar37 = (uint)(((auVar34._8_4_ + auVar43._8_4_) - fStack_1e98) * local_1e90[2] + _LC16);
        uVar41 = -(uint)((int)uVar32 < (int)uVar10);
        uVar44 = -(uint)((int)uVar35 < (int)uVar10);
        uVar45 = -(uint)((int)uVar37 < (int)uVar10);
        uVar32 = uVar32 & uVar41 | ~uVar41 & uVar10;
        uVar35 = uVar35 & uVar44 | ~uVar44 & uVar10;
        uVar41 = uVar37 & uVar45 | ~uVar45 & uVar10;
        uVar14 = (ulong)(~-(uint)((int)uVar32 < 0) & uVar32);
        peVar25 = local_e80 + uVar14 * 0x60;
        uVar32 = (uint)(((auVar42._0_4_ + auVar52._0_4_) - local_1ea0) * local_1e90[0] + _LC16);
        uVar37 = (uint)(((auVar42._4_4_ + auVar52._4_4_) - fStack_1e9c) * local_1e90[1] + _LC16);
        uVar44 = (uint)(((auVar42._8_4_ + auVar52._8_4_) - fStack_1e98) * local_1e90[2] + _LC16);
        uVar45 = -(uint)((int)uVar32 < (int)uVar10);
        uVar47 = -(uint)((int)uVar37 < (int)uVar10);
        uVar48 = -(uint)((int)uVar44 < (int)uVar10);
        uVar32 = uVar45 & uVar32 | ~uVar45 & uVar10;
        uVar37 = uVar47 & uVar37 | ~uVar47 & uVar10;
        uVar44 = uVar48 & uVar44 | ~uVar48 & uVar10;
        auVar46 = minps(*(undefined1 (*) [16])peVar25,auVar43);
        *(undefined1 (*) [16])peVar25 = auVar46;
        auVar46 = maxps(*(undefined1 (*) [16])(local_e70 + uVar14 * 0x18),auVar34);
        *(undefined1 (*) [16])(local_e70 + uVar14 * 0x18) = auVar46;
        uVar11 = (ulong)(~-(uint)((int)uVar35 < 0) & uVar35);
        lVar26 = uVar11 * 0x60;
        auVar46 = minps(*(undefined1 (*) [16])(local_e60 + lVar26),auVar43);
        *(undefined1 (*) [16])(local_e60 + lVar26) = auVar46;
        auVar46 = maxps(*(undefined1 (*) [16])(local_e50 + lVar26),auVar34);
        *(undefined1 (*) [16])(local_e50 + lVar26) = auVar46;
        uVar23 = (ulong)(~-(uint)((int)uVar41 < 0) & uVar41);
        lVar26 = uVar23 * 0x60;
        auVar43 = minps(*(undefined1 (*) [16])(local_e40 + lVar26),auVar43);
        *(undefined1 (*) [16])(local_e40 + lVar26) = auVar43;
        auVar34 = maxps(*(undefined1 (*) [16])(local_e30 + lVar26),auVar34);
        *(undefined1 (*) [16])(local_e30 + lVar26) = auVar34;
        *(int *)(local_e80 + (uVar14 + 0xc0) * 0x10) =
             *(int *)(local_e80 + (uVar14 + 0xc0) * 0x10) + 1;
        uVar14 = (ulong)(~-(uint)((int)uVar32 < 0) & uVar32);
        aiStack_27c[uVar11 * 4] = aiStack_27c[uVar11 * 4] + 1;
        aiStack_27c[uVar23 * 4 + 1] = aiStack_27c[uVar23 * 4 + 1] + 1;
        peVar25 = local_e80 + uVar14 * 0x60;
        auVar34 = minps(*(undefined1 (*) [16])peVar25,auVar52);
        *(undefined1 (*) [16])peVar25 = auVar34;
        auVar34 = maxps(*(undefined1 (*) [16])(local_e70 + uVar14 * 0x18),auVar42);
        *(undefined1 (*) [16])(local_e70 + uVar14 * 0x18) = auVar34;
        uVar11 = (ulong)(~-(uint)((int)uVar37 < 0) & uVar37);
        lVar26 = uVar11 * 0x60;
        auVar34 = minps(*(undefined1 (*) [16])(local_e60 + lVar26),auVar52);
        *(undefined1 (*) [16])(local_e60 + lVar26) = auVar34;
        auVar34 = maxps(*(undefined1 (*) [16])(local_e50 + lVar26),auVar42);
        *(undefined1 (*) [16])(local_e50 + lVar26) = auVar34;
        uVar23 = (ulong)(~-(uint)((int)uVar44 < 0) & uVar44);
        lVar26 = uVar23 * 0x60;
        auVar34 = minps(*(undefined1 (*) [16])(local_e40 + lVar26),auVar52);
        *(undefined1 (*) [16])(local_e40 + lVar26) = auVar34;
        auVar34 = maxps(*(undefined1 (*) [16])(local_e30 + lVar26),auVar42);
        *(undefined1 (*) [16])(local_e30 + lVar26) = auVar34;
        *(int *)(local_e80 + (uVar14 + 0xc0) * 0x10) =
             *(int *)(local_e80 + (uVar14 + 0xc0) * 0x10) + 1;
        aiStack_27c[uVar11 * 4] = aiStack_27c[uVar11 * 4] + 1;
        aiStack_27c[uVar23 * 4 + 1] = aiStack_27c[uVar23 * 4 + 1] + 1;
        pauVar19 = pauVar20;
      } while (pauVar18 + (uVar27 - 2 >> 1) * 4 + 4 != pauVar20);
      uVar11 = (uVar27 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar27 <= uVar11) goto LAB_0012b6a4;
      pauVar18 = pauVar18 + uVar11 * 2;
    }
    auVar34 = pauVar18[1];
    auVar43 = *pauVar18;
    uVar32 = (uint)(((auVar34._0_4_ + auVar43._0_4_) - local_1ea0) * local_1e90[0] + _LC16);
    uVar35 = (uint)(((auVar34._4_4_ + auVar43._4_4_) - fStack_1e9c) * local_1e90[1] + _LC16);
    uVar37 = (uint)(((auVar34._8_4_ + auVar43._8_4_) - fStack_1e98) * local_1e90[2] + _LC16);
    uVar41 = -(uint)((int)uVar32 < (int)uVar10);
    uVar44 = -(uint)((int)uVar35 < (int)uVar10);
    uVar45 = -(uint)((int)uVar37 < (int)uVar10);
    uVar32 = uVar41 & uVar32 | ~uVar41 & uVar10;
    uVar35 = uVar44 & uVar35 | ~uVar44 & uVar10;
    uVar10 = uVar45 & uVar37 | ~uVar45 & uVar10;
    lVar26 = (long)(int)(~-(uint)((int)uVar32 < 0) & uVar32);
    peVar25 = local_e80 + lVar26 * 0x60;
    *(int *)(local_e80 + (lVar26 + 0xc0) * 0x10) = *(int *)(local_e80 + (lVar26 + 0xc0) * 0x10) + 1;
    auVar42 = minps(*(undefined1 (*) [16])peVar25,auVar43);
    *(undefined1 (*) [16])peVar25 = auVar42;
    auVar42 = maxps(*(undefined1 (*) [16])(local_e70 + lVar26 * 0x18),auVar34);
    *(undefined1 (*) [16])(local_e70 + lVar26 * 0x18) = auVar42;
    lVar26 = (long)(int)(~-(uint)((int)uVar35 < 0) & uVar35);
    lVar15 = lVar26 * 0x60;
    aiStack_27c[lVar26 * 4] = aiStack_27c[lVar26 * 4] + 1;
    auVar42 = minps(*(undefined1 (*) [16])(local_e60 + lVar15),auVar43);
    *(undefined1 (*) [16])(local_e60 + lVar15) = auVar42;
    auVar42 = maxps(*(undefined1 (*) [16])(local_e50 + lVar15),auVar34);
    *(undefined1 (*) [16])(local_e50 + lVar15) = auVar42;
    lVar26 = (long)(int)(~-(uint)((int)uVar10 < 0) & uVar10);
    lVar15 = lVar26 * 0x60;
    aiStack_27c[lVar26 * 4 + 1] = aiStack_27c[lVar26 * 4 + 1] + 1;
    auVar43 = minps(*(undefined1 (*) [16])(local_e40 + lVar15),auVar43);
    *(undefined1 (*) [16])(local_e40 + lVar15) = auVar43;
    auVar34 = maxps(*(undefined1 (*) [16])(local_e30 + lVar15),auVar34);
    *(undefined1 (*) [16])(local_e30 + lVar15) = auVar34;
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long,embree::sse2::SplitInfoT<embree::BBox<embree::Vec3fa>>&)::_lambda(embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>>const&)_2_>
              (local_e80,uVar23,uVar11,*(ulong *)(param_3 + 0x48),0x400,local_1c80,
               (_lambda_embree__range<unsigned_long>_const___1_ *)&local_1ee0,
               (_lambda_embree__sse2__BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::PrimRef,embree::BBox<embree::Vec3fa>_>_const___2_
                *)&local_1ee8);
    auVar29._4_12_ = _UNK_0013f634;
    auVar29._0_4_ = _LC3;
    auVar30._4_12_ = _UNK_0013f624;
    auVar30._0_4_ = _LC1;
  }
LAB_0012b6a4:
  local_1f00._0_8_ = local_280;
  pBVar22 = local_1c80;
  peVar25 = local_e80;
  do {
    uVar5 = *(undefined8 *)(peVar25 + 8);
    uVar6 = *(undefined8 *)(peVar25 + 0x40);
    uVar7 = *(undefined8 *)(peVar25 + 0x48);
    pBVar12 = pBVar22 + 0x60;
    *(undefined8 *)pBVar22 = *(undefined8 *)peVar25;
    *(undefined8 *)(pBVar22 + 8) = uVar5;
    uVar5 = *(undefined8 *)(peVar25 + 0x10);
    uVar8 = *(undefined8 *)(peVar25 + 0x18);
    *(undefined8 *)(pBVar22 + 0x40) = uVar6;
    *(undefined8 *)(pBVar22 + 0x48) = uVar7;
    *(undefined8 *)(pBVar22 + 0x10) = uVar5;
    *(undefined8 *)(pBVar22 + 0x18) = uVar8;
    uVar5 = *(undefined8 *)(peVar25 + 0x28);
    *(undefined8 *)(pBVar22 + 0x20) = *(undefined8 *)(peVar25 + 0x20);
    *(undefined8 *)(pBVar22 + 0x28) = uVar5;
    uVar5 = *(undefined8 *)(peVar25 + 0x38);
    *(undefined8 *)(pBVar22 + 0x30) = *(undefined8 *)(peVar25 + 0x30);
    *(undefined8 *)(pBVar22 + 0x38) = uVar5;
    uVar5 = *(undefined8 *)(peVar25 + 0x58);
    *(undefined8 *)(pBVar22 + 0x50) = *(undefined8 *)(peVar25 + 0x50);
    *(undefined8 *)(pBVar22 + 0x58) = uVar5;
    pBVar22 = pBVar12;
    peVar25 = peVar25 + 0x60;
  } while (local_1080 != pBVar12);
  pBVar22 = local_1080;
  for (lVar26 = 0x40; lVar26 != 0; lVar26 = lVar26 + -1) {
    *(undefined8 *)pBVar22 = *(undefined8 *)local_1f00._0_8_;
    local_1f00._0_8_ = (embree *)(local_1f00._0_8_ + ((ulong)bVar28 * -2 + 1) * 8);
    pBVar22 = pBVar22 + (ulong)bVar28 * -0x10 + 8;
  }
  _local_1ed0 = auVar29;
  if (local_1eb0[0] == 1) {
    local_1ec0 = (undefined1  [16])0x0;
  }
  else {
    iVar33 = 0;
    iVar36 = 0;
    iVar38 = 0;
    iVar40 = 0;
    pBVar22 = aBStack_1ce0 + local_1eb0[0] * 0x60;
    pfVar21 = local_1e90 + local_1eb0[0] * 4;
    auVar34 = auVar29;
    auVar43 = auVar30;
    auVar42 = auVar29;
    auVar52 = auVar30;
    auVar46 = auVar29;
    auVar53 = auVar30;
    lVar26 = local_1eb0[0] * 0x10;
    do {
      lVar15 = lVar26 + -0x10;
      auVar43 = maxps(auVar43,*(undefined1 (*) [16])(pBVar22 + 0x10));
      auVar34 = minps(auVar34,*(undefined1 (*) [16])pBVar22);
      pBVar12 = pBVar22 + -0x60;
      iVar1 = *(int *)(local_1080 + lVar15);
      iVar2 = *(int *)((long)auStack_107c + lVar26 + -0x10);
      iVar3 = *(int *)(local_1090 + lVar26 + 8);
      iVar4 = *(int *)(local_1090 + lVar26 + 0xc);
      auVar52 = maxps(auVar52,*(undefined1 (*) [16])(pBVar22 + 0x30));
      pfVar21[3] = 0.0;
      auVar42 = minps(auVar42,*(undefined1 (*) [16])(pBVar22 + 0x20));
      auVar53 = maxps(auVar53,*(undefined1 (*) [16])(pBVar22 + 0x50));
      iVar33 = iVar1 + iVar33;
      iVar36 = iVar2 + iVar36;
      iVar38 = iVar3 + iVar38;
      iVar40 = iVar4 + iVar40;
      auVar46 = minps(auVar46,*(undefined1 (*) [16])(pBVar22 + 0x40));
      *(int *)(local_e80 + lVar15) = iVar33;
      *(int *)((long)aiStack_e7c + lVar26 + -0x10) = iVar36;
      *(int *)((long)auStack_107c + lVar26 + 500) = iVar38;
      *(int *)((long)auStack_107c + lVar26 + 0x1f8) = iVar40;
      fVar31 = auVar43._4_4_ - auVar34._4_4_;
      fVar39 = auVar43._8_4_ - auVar34._8_4_;
      *pfVar21 = (auVar43._0_4_ - auVar34._0_4_) * (fVar31 + fVar39) + fVar31 * fVar39;
      fVar31 = auVar52._4_4_ - auVar42._4_4_;
      fVar39 = auVar52._8_4_ - auVar42._8_4_;
      pfVar21[1] = (auVar52._0_4_ - auVar42._0_4_) * (fVar31 + fVar39) + fVar31 * fVar39;
      fVar31 = auVar53._4_4_ - auVar46._4_4_;
      fVar39 = auVar53._8_4_ - auVar46._8_4_;
      pfVar21[2] = (auVar53._0_4_ - auVar46._0_4_) * (fVar31 + fVar39) + fVar31 * fVar39;
      pBVar22 = pBVar12;
      pfVar21 = pfVar21 + -4;
      lVar26 = lVar15;
    } while (local_1c80 != pBVar12);
    local_1ec0 = (undefined1  [16])0x0;
    iVar33 = (1 << ((byte)in_RCX & 0x1f)) + -1;
    if (1 < local_1eb0[0]) {
      local_1f00 = (undefined1  [16])0x0;
      uVar11 = in_RCX & 0xffffffff;
      lVar26 = 0x10;
      local_1f10 = (undefined1  [16])0x0;
      auVar34 = auVar30;
      auVar43 = auVar30;
      local_1f50 = auVar30;
      local_1f40 = auVar29;
      local_1f30 = auVar29;
      local_1f20 = auVar29;
      local_1f60 = __LC22;
      uStack_1f5c = _UNK_0013f644;
      uStack_1f58 = _UNK_0013f648;
      uStack_1f54 = _UNK_0013f64c;
      do {
        auVar34 = maxps(auVar34,*(undefined1 (*) [16])(pBVar12 + 0x10));
        local_1f20 = minps(local_1f20,*(undefined1 (*) [16])pBVar12);
        auVar43 = maxps(auVar43,*(undefined1 (*) [16])(pBVar12 + 0x30));
        local_1f50 = maxps(local_1f50,*(undefined1 (*) [16])(pBVar12 + 0x50));
        local_1f10._0_4_ = local_1f10._0_4_ + *(int *)(local_1090 + lVar26);
        local_1f10._4_4_ = local_1f10._4_4_ + *(int *)(local_1090 + lVar26 + 4);
        local_1f10._8_4_ = local_1f10._8_4_ + *(int *)(local_1090 + lVar26 + 8);
        local_1f10._12_4_ = local_1f10._12_4_ + *(int *)(local_1090 + lVar26 + 0xc);
        fVar39 = auVar34._4_4_ - local_1f20._4_4_;
        fVar51 = auVar34._8_4_ - local_1f20._8_4_;
        local_1f30 = minps(local_1f30,*(undefined1 (*) [16])(pBVar12 + 0x20));
        fVar49 = auVar43._4_4_ - local_1f30._4_4_;
        fVar50 = auVar43._8_4_ - local_1f30._8_4_;
        local_1f40 = minps(local_1f40,*(undefined1 (*) [16])(pBVar12 + 0x40));
        fVar31 = local_1f50._4_4_ - local_1f40._4_4_;
        fVar54 = local_1f50._8_4_ - local_1f40._8_4_;
        fVar31 = fVar31 * fVar54 + (fVar31 + fVar54) * (local_1f50._0_4_ - local_1f40._0_4_);
        uVar10 = (uint)(local_1f10._0_4_ + iVar33) >> uVar11;
        uVar32 = (uint)(local_1f10._4_4_ + iVar33) >> uVar11;
        uVar35 = (uint)(local_1f10._8_4_ + iVar33) >> uVar11;
        uVar37 = (uint)(local_1f10._12_4_ + iVar33) >> uVar11;
        uVar41 = (uint)(iVar33 + *(int *)(local_e80 + lVar26)) >> uVar11;
        uVar44 = (uint)(iVar33 + *(int *)((long)aiStack_e7c + lVar26)) >> uVar11;
        uVar45 = (uint)(iVar33 + *(int *)((long)aiStack_e7c + lVar26 + 4)) >> uVar11;
        uVar47 = (uint)(iVar33 + *(int *)((long)aiStack_e7c + lVar26 + 8)) >> uVar11;
        pfVar21 = (float *)((long)local_1e80 + lVar26);
        lVar15 = lVar26 + 4;
        lVar16 = lVar26 + 8;
        lVar9 = lVar26 + 0xc;
        lVar26 = lVar26 + 0x10;
        fVar39 = ((float)(int)(uVar10 & _LC6) + (float)((int)uVar10 >> 0x1f & __LC21)) *
                 (fVar39 * fVar51 + (fVar39 + fVar51) * (auVar34._0_4_ - local_1f20._0_4_)) +
                 ((float)(int)(uVar41 & _LC6) + (float)((int)uVar41 >> 0x1f & __LC21)) * *pfVar21;
        fVar49 = ((float)(int)(uVar32 & _UNK_0013f694) +
                 (float)((int)uVar32 >> 0x1f & _UNK_0013f6a4)) *
                 ((fVar49 + fVar50) * (auVar43._0_4_ - local_1f30._0_4_) + fVar50 * fVar49) +
                 ((float)(int)(uVar44 & _UNK_0013f694) +
                 (float)((int)uVar44 >> 0x1f & _UNK_0013f6a4)) *
                 *(float *)((long)local_1e80 + lVar15);
        fVar50 = ((float)(int)(uVar35 & _UNK_0013f698) +
                 (float)((int)uVar35 >> 0x1f & _UNK_0013f6a8)) * fVar31 +
                 ((float)(int)(uVar45 & _UNK_0013f698) +
                 (float)((int)uVar45 >> 0x1f & _UNK_0013f6a8)) *
                 *(float *)((long)local_1e80 + lVar16);
        fVar31 = ((float)(int)(uVar37 & _UNK_0013f69c) +
                 (float)((int)uVar37 >> 0x1f & _UNK_0013f6ac)) * fVar31 +
                 ((float)(int)(uVar47 & _UNK_0013f69c) +
                 (float)((int)uVar47 >> 0x1f & _UNK_0013f6ac)) *
                 *(float *)((long)local_1e80 + lVar9);
        uVar10 = -(uint)(fVar39 < SUB164(_local_1ed0,0));
        uVar32 = -(uint)(fVar49 < SUB164(_local_1ed0,4));
        uVar35 = -(uint)(fVar50 < SUB164(_local_1ed0,8));
        uVar37 = -(uint)(fVar31 < SUB164(_local_1ed0,0xc));
        local_1f00._0_4_ = local_1f60 & uVar10 | ~uVar10 & local_1f00._0_4_;
        local_1f00._4_4_ = uStack_1f5c & uVar32 | ~uVar32 & local_1f00._4_4_;
        local_1f00._8_4_ = uStack_1f58 & uVar35 | ~uVar35 & local_1f00._8_4_;
        local_1f00._12_4_ = uStack_1f54 & uVar37 | ~uVar37 & local_1f00._12_4_;
        auVar46._4_4_ = uVar32 & (uint)fVar49;
        auVar46._0_4_ = uVar10 & (uint)fVar39;
        auVar52._0_4_ = ~uVar10 & (uint)SUB164(_local_1ed0,0);
        auVar52._4_4_ = ~uVar32 & (uint)SUB164(_local_1ed0,4);
        auVar52._8_4_ = ~uVar35 & (uint)SUB164(_local_1ed0,8);
        auVar52._12_4_ = ~uVar37 & (uint)SUB164(_local_1ed0,0xc);
        auVar46._8_4_ = uVar35 & (uint)fVar50;
        auVar46._12_4_ = uVar37 & (uint)fVar31;
        _local_1ed0 = auVar46 | auVar52;
        pBVar12 = pBVar12 + 0x60;
        local_1f60 = local_1f60 + __LC22;
        uStack_1f5c = uStack_1f5c + _UNK_0013f644;
        uStack_1f58 = uStack_1f58 + _UNK_0013f648;
        uStack_1f54 = uStack_1f54 + _UNK_0013f64c;
      } while (local_1eb0[0] * 0x10 != lVar26);
      local_1ec0._4_4_ = local_1f00._4_4_;
      local_1ec0._0_4_ = local_1f00._0_4_;
      local_1ec0._8_4_ = local_1f00._8_4_;
      local_1ec0._12_4_ = local_1f00._12_4_;
    }
  }
  if ((local_1e90[0] == 0.0) || (_LC23 < (float)local_1ed0._0_4_)) {
LAB_0012bb15:
    uVar11 = 0;
    lVar26 = -1;
    fVar31 = _LC3;
  }
  else {
    uVar11 = (ulong)(int)local_1ec0._0_4_;
    lVar26 = 0;
    fVar31 = (float)local_1ed0._0_4_;
    if (local_1ec0._0_4_ == 0) goto LAB_0012bb15;
  }
  if (((local_1e90[1] != 0.0) && ((float)local_1ed0._4_4_ < fVar31)) && (local_1ec0._4_4_ != 0)) {
    uVar11 = (ulong)(int)local_1ec0._4_4_;
    lVar26 = 1;
    fVar31 = (float)local_1ed0._4_4_;
  }
  auVar34 = auVar30;
  auVar43 = auVar29;
  if (((local_1e90[2] == 0.0) || (fVar31 <= fStack_1ec8)) || (local_1ec0._8_4_ == 0)) {
    *(int *)(param_1 + 4) = (int)lVar26;
    *(int *)(param_1 + 8) = (int)uVar11;
    *(undefined4 *)(param_1 + 0xc) = 0;
    *(ulong *)(param_1 + 0x10) = local_1eb0[0];
    *(float *)param_1 = fVar31;
    *(float *)(param_1 + 0x20) = local_1ea0;
    *(float *)(param_1 + 0x24) = fStack_1e9c;
    *(float *)(param_1 + 0x28) = fStack_1e98;
    *(float *)(param_1 + 0x2c) = fStack_1e94;
    *(float *)(param_1 + 0x30) = local_1e90[0];
    *(float *)(param_1 + 0x34) = local_1e90[1];
    *(float *)(param_1 + 0x38) = local_1e90[2];
    *(uint *)(param_1 + 0x3c) = uStack_1e84;
    if ((int)lVar26 == -1) {
      *in_R8 = 0;
      in_R8[1] = 0;
      *(undefined1 (*) [16])(in_R8 + 2) = auVar29;
      *(undefined1 (*) [16])(in_R8 + 4) = auVar30;
      *(undefined1 (*) [16])(in_R8 + 6) = auVar29;
      *(undefined1 (*) [16])(in_R8 + 8) = auVar30;
      goto LAB_0012bc45;
    }
    if (uVar11 != 0) goto LAB_0012bb9d;
    lVar15 = 0;
  }
  else {
    *(undefined4 *)(param_1 + 8) = local_1ec0._8_4_;
    uVar11 = (ulong)(int)local_1ec0._8_4_;
    lVar26 = 2;
    *(undefined4 *)(param_1 + 4) = 2;
    *(undefined4 *)(param_1 + 0xc) = 0;
    *(ulong *)(param_1 + 0x10) = local_1eb0[0];
    *(float *)param_1 = fStack_1ec8;
    *(float *)(param_1 + 0x20) = local_1ea0;
    *(float *)(param_1 + 0x24) = fStack_1e9c;
    *(float *)(param_1 + 0x28) = fStack_1e98;
    *(float *)(param_1 + 0x2c) = fStack_1e94;
    *(float *)(param_1 + 0x30) = local_1e90[0];
    *(float *)(param_1 + 0x34) = local_1e90[1];
    *(float *)(param_1 + 0x38) = local_1e90[2];
    *(uint *)(param_1 + 0x3c) = uStack_1e84;
LAB_0012bb9d:
    lVar16 = (long)(int)lVar26;
    lVar15 = 0;
    pauVar18 = (undefined1 (*) [16])(local_1c70 + lVar16 * 0x20);
    pBVar22 = local_1c80 + lVar16 * 4;
    do {
      pBVar12 = pBVar22 + 0x10;
      auVar43 = minps(auVar43,pauVar18[-1]);
      auVar34 = maxps(auVar34,*pauVar18);
      pauVar18 = pauVar18 + 6;
      lVar15 = lVar15 + (ulong)*(uint *)(pBVar22 + 0xc00);
      pBVar22 = pBVar12;
    } while (local_1c80 + (lVar16 + uVar11 * 4) * 4 != pBVar12);
  }
  if (uVar11 < local_1eb0[0]) {
    pBVar22 = local_1c80 + (lVar26 + 0x300 + uVar11 * 4) * 4;
    lVar16 = 0;
    pauVar18 = (undefined1 (*) [16])(local_1c70 + (uVar11 * 3 + lVar26) * 0x20);
    do {
      uVar10 = *(uint *)pBVar22;
      pBVar22 = pBVar22 + 0x10;
      auVar29 = minps(auVar29,pauVar18[-1]);
      auVar30 = maxps(auVar30,*pauVar18);
      lVar16 = lVar16 + (ulong)uVar10;
      pauVar18 = pauVar18 + 6;
    } while (pBVar22 != local_1080 + (lVar26 + local_1eb0[0] * 4) * 4);
  }
  else {
    lVar16 = 0;
  }
  *in_R8 = lVar15;
  in_R8[1] = lVar16;
  *(undefined1 (*) [16])(in_R8 + 2) = auVar43;
  *(undefined1 (*) [16])(in_R8 + 4) = auVar34;
  *(undefined1 (*) [16])(in_R8 + 6) = auVar29;
  *(undefined1 (*) [16])(in_R8 + 8) = auVar30;
LAB_0012bc45:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> embree::parallel_reduce_internal<unsigned
   long, embree::sse2::SpatialBinInfo<16ul, embree::PrimRef>,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&)#2}>(unsigned long, unsigned long,
   unsigned long, unsigned long, embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&,
   embree::sse2::SpatialBinInfo<16ul, embree::PrimRef> const&)#2} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&)_2_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,
                SpatialBinInfo_conflict *param_5,
                _lambda_embree__range<unsigned_long>_const___1_ *param_6,
                _lambda_embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const__embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const___2_
                *param_7)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  undefined8 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined1 (*pauVar12) [16];
  ulong uVar13;
  undefined1 (*pauVar14) [16];
  undefined1 (*pauVar15) [16];
  undefined1 (*pauVar16) [16];
  int *piVar17;
  long lVar18;
  undefined1 (*pauVar19) [16];
  long in_FS_OFFSET;
  int iVar20;
  int iVar22;
  int iVar23;
  int iVar24;
  undefined1 auVar21 [16];
  int iVar25;
  int iVar27;
  int iVar28;
  int iVar29;
  undefined1 auVar26 [16];
  ulong local_2918;
  ulong local_2910;
  ulong local_2908;
  undefined8 **local_2900;
  ulong **local_28f8;
  ulong *local_28f0;
  ulong *local_28e8;
  ulong *local_28e0;
  undefined1 (*local_28d8) [16];
  _lambda_embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const__embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const___2_
  *local_28d0;
  undefined1 local_28c0 [16];
  undefined4 local_28b0;
  undefined4 uStack_28ac;
  undefined4 uStack_28a8;
  undefined4 uStack_28a4;
  undefined4 local_28a0;
  undefined4 uStack_289c;
  undefined4 uStack_2898;
  undefined4 uStack_2894;
  undefined4 local_2890;
  undefined4 uStack_288c;
  undefined4 uStack_2888;
  undefined4 uStack_2884;
  undefined4 local_2880;
  undefined4 uStack_287c;
  undefined4 uStack_2878;
  undefined4 uStack_2874;
  undefined4 local_2870;
  undefined4 uStack_286c;
  undefined4 uStack_2868;
  undefined4 uStack_2864;
  undefined4 local_2860;
  undefined4 uStack_285c;
  undefined4 uStack_2858;
  undefined4 uStack_2854;
  undefined4 local_2850;
  undefined4 uStack_284c;
  undefined4 uStack_2848;
  undefined4 uStack_2844;
  undefined4 local_2840;
  undefined4 uStack_283c;
  undefined4 uStack_2838;
  undefined4 uStack_2834;
  undefined4 local_2830;
  undefined4 uStack_282c;
  undefined4 uStack_2828;
  undefined4 uStack_2824;
  undefined4 local_2820;
  undefined4 uStack_281c;
  undefined4 uStack_2818;
  undefined4 uStack_2814;
  undefined4 local_2810;
  undefined4 uStack_280c;
  undefined4 uStack_2808;
  undefined4 uStack_2804;
  undefined4 local_2800;
  undefined4 uStack_27fc;
  undefined4 uStack_27f8;
  undefined4 uStack_27f4;
  undefined4 local_27f0;
  undefined4 uStack_27ec;
  undefined4 uStack_27e8;
  undefined4 uStack_27e4;
  undefined4 local_27e0;
  undefined4 uStack_27dc;
  undefined4 uStack_27d8;
  undefined4 uStack_27d4;
  undefined4 local_27d0;
  undefined4 uStack_27cc;
  undefined4 uStack_27c8;
  undefined4 uStack_27c4;
  undefined4 local_27c0;
  undefined4 uStack_27bc;
  undefined4 uStack_27b8;
  undefined4 uStack_27b4;
  undefined4 local_27b0;
  undefined4 uStack_27ac;
  undefined4 uStack_27a8;
  undefined4 uStack_27a4;
  undefined4 local_27a0;
  undefined4 uStack_279c;
  undefined4 uStack_2798;
  undefined4 uStack_2794;
  undefined4 local_2790;
  undefined4 uStack_278c;
  undefined4 uStack_2788;
  undefined4 uStack_2784;
  undefined4 local_2780;
  undefined4 uStack_277c;
  undefined4 uStack_2778;
  undefined4 uStack_2774;
  undefined4 local_2770;
  undefined4 uStack_276c;
  undefined4 uStack_2768;
  undefined4 uStack_2764;
  undefined4 local_2760;
  undefined4 uStack_275c;
  undefined4 uStack_2758;
  undefined4 uStack_2754;
  undefined4 local_2750;
  undefined4 uStack_274c;
  undefined4 uStack_2748;
  undefined4 uStack_2744;
  undefined4 local_2740;
  undefined4 uStack_273c;
  undefined4 uStack_2738;
  undefined4 uStack_2734;
  undefined4 local_2730;
  undefined4 uStack_272c;
  undefined4 uStack_2728;
  undefined4 uStack_2724;
  undefined4 local_2720;
  undefined4 uStack_271c;
  undefined4 uStack_2718;
  undefined4 uStack_2714;
  undefined4 local_2710;
  undefined4 uStack_270c;
  undefined4 uStack_2708;
  undefined4 uStack_2704;
  undefined4 local_2700;
  undefined4 uStack_26fc;
  undefined4 uStack_26f8;
  undefined4 uStack_26f4;
  undefined4 local_26f0;
  undefined4 uStack_26ec;
  undefined4 uStack_26e8;
  undefined4 uStack_26e4;
  undefined4 local_26e0;
  undefined4 uStack_26dc;
  undefined4 uStack_26d8;
  undefined4 uStack_26d4;
  undefined4 local_26d0;
  undefined4 uStack_26cc;
  undefined4 uStack_26c8;
  undefined4 uStack_26c4;
  undefined4 local_26c0;
  undefined4 uStack_26bc;
  undefined4 uStack_26b8;
  undefined4 uStack_26b4;
  undefined4 local_26b0;
  undefined4 uStack_26ac;
  undefined4 uStack_26a8;
  undefined4 uStack_26a4;
  undefined4 local_26a0;
  undefined4 uStack_269c;
  undefined4 uStack_2698;
  undefined4 uStack_2694;
  undefined4 local_2690;
  undefined4 uStack_268c;
  undefined4 uStack_2688;
  undefined4 uStack_2684;
  undefined4 local_2680;
  undefined4 uStack_267c;
  undefined4 uStack_2678;
  undefined4 uStack_2674;
  undefined4 local_2670;
  undefined4 uStack_266c;
  undefined4 uStack_2668;
  undefined4 uStack_2664;
  undefined4 local_2660;
  undefined4 uStack_265c;
  undefined4 uStack_2658;
  undefined4 uStack_2654;
  undefined4 local_2650;
  undefined4 uStack_264c;
  undefined4 uStack_2648;
  undefined4 uStack_2644;
  undefined4 local_2640;
  undefined4 uStack_263c;
  undefined4 uStack_2638;
  undefined4 uStack_2634;
  undefined4 local_2630;
  undefined4 uStack_262c;
  undefined4 uStack_2628;
  undefined4 uStack_2624;
  undefined4 local_2620;
  undefined4 uStack_261c;
  undefined4 uStack_2618;
  undefined4 uStack_2614;
  undefined4 local_2610;
  undefined4 uStack_260c;
  undefined4 uStack_2608;
  undefined4 uStack_2604;
  undefined4 local_2600;
  undefined4 uStack_25fc;
  undefined4 uStack_25f8;
  undefined4 uStack_25f4;
  undefined4 local_25f0;
  undefined4 uStack_25ec;
  undefined4 uStack_25e8;
  undefined4 uStack_25e4;
  undefined4 local_25e0;
  undefined4 uStack_25dc;
  undefined4 uStack_25d8;
  undefined4 uStack_25d4;
  undefined4 local_25d0;
  undefined4 uStack_25cc;
  undefined4 uStack_25c8;
  undefined4 uStack_25c4;
  undefined4 local_25c0;
  undefined4 uStack_25bc;
  undefined4 uStack_25b8;
  undefined4 uStack_25b4;
  undefined4 local_25b0;
  undefined4 uStack_25ac;
  undefined4 uStack_25a8;
  undefined4 uStack_25a4;
  undefined4 local_25a0;
  undefined4 uStack_259c;
  undefined4 uStack_2598;
  undefined4 uStack_2594;
  undefined4 local_2590;
  undefined4 uStack_258c;
  undefined4 uStack_2588;
  undefined4 uStack_2584;
  undefined4 local_2580;
  undefined4 uStack_257c;
  undefined4 uStack_2578;
  undefined4 uStack_2574;
  undefined4 local_2570;
  undefined4 uStack_256c;
  undefined4 uStack_2568;
  undefined4 uStack_2564;
  undefined4 local_2560;
  undefined4 uStack_255c;
  undefined4 uStack_2558;
  undefined4 uStack_2554;
  undefined4 local_2550;
  undefined4 uStack_254c;
  undefined4 uStack_2548;
  undefined4 uStack_2544;
  undefined4 local_2540;
  undefined4 uStack_253c;
  undefined4 uStack_2538;
  undefined4 uStack_2534;
  undefined4 local_2530;
  undefined4 uStack_252c;
  undefined4 uStack_2528;
  undefined4 uStack_2524;
  undefined4 local_2520;
  undefined4 uStack_251c;
  undefined4 uStack_2518;
  undefined4 uStack_2514;
  undefined4 local_2510;
  undefined4 uStack_250c;
  undefined4 uStack_2508;
  undefined4 uStack_2504;
  undefined4 local_2500;
  undefined4 uStack_24fc;
  undefined4 uStack_24f8;
  undefined4 uStack_24f4;
  undefined4 local_24f0;
  undefined4 uStack_24ec;
  undefined4 uStack_24e8;
  undefined4 uStack_24e4;
  undefined4 local_24e0;
  undefined4 uStack_24dc;
  undefined4 uStack_24d8;
  undefined4 uStack_24d4;
  undefined4 local_24d0;
  undefined4 uStack_24cc;
  undefined4 uStack_24c8;
  undefined4 uStack_24c4;
  undefined4 local_24c0;
  undefined4 uStack_24bc;
  undefined4 uStack_24b8;
  undefined4 uStack_24b4;
  undefined4 local_24b0;
  undefined4 uStack_24ac;
  undefined4 uStack_24a8;
  undefined4 uStack_24a4;
  undefined4 local_24a0;
  undefined4 uStack_249c;
  undefined4 uStack_2498;
  undefined4 uStack_2494;
  undefined4 local_2490;
  undefined4 uStack_248c;
  undefined4 uStack_2488;
  undefined4 uStack_2484;
  undefined4 local_2480;
  undefined4 uStack_247c;
  undefined4 uStack_2478;
  undefined4 uStack_2474;
  undefined4 local_2470;
  undefined4 uStack_246c;
  undefined4 uStack_2468;
  undefined4 uStack_2464;
  undefined4 local_2460;
  undefined4 uStack_245c;
  undefined4 uStack_2458;
  undefined4 uStack_2454;
  undefined4 local_2450;
  undefined4 uStack_244c;
  undefined4 uStack_2448;
  undefined4 uStack_2444;
  undefined4 local_2440;
  undefined4 uStack_243c;
  undefined4 uStack_2438;
  undefined4 uStack_2434;
  undefined4 local_2430;
  undefined4 uStack_242c;
  undefined4 uStack_2428;
  undefined4 uStack_2424;
  undefined4 local_2420;
  undefined4 uStack_241c;
  undefined4 uStack_2418;
  undefined4 uStack_2414;
  undefined4 local_2410;
  undefined4 uStack_240c;
  undefined4 uStack_2408;
  undefined4 uStack_2404;
  undefined4 local_2400;
  undefined4 uStack_23fc;
  undefined4 uStack_23f8;
  undefined4 uStack_23f4;
  undefined4 local_23f0;
  undefined4 uStack_23ec;
  undefined4 uStack_23e8;
  undefined4 uStack_23e4;
  undefined4 local_23e0;
  undefined4 uStack_23dc;
  undefined4 uStack_23d8;
  undefined4 uStack_23d4;
  undefined4 local_23d0;
  undefined4 uStack_23cc;
  undefined4 uStack_23c8;
  undefined4 uStack_23c4;
  undefined4 local_23c0;
  undefined4 uStack_23bc;
  undefined4 uStack_23b8;
  undefined4 uStack_23b4;
  undefined4 local_23b0;
  undefined4 uStack_23ac;
  undefined4 uStack_23a8;
  undefined4 uStack_23a4;
  undefined4 local_23a0;
  undefined4 uStack_239c;
  undefined4 uStack_2398;
  undefined4 uStack_2394;
  undefined4 local_2390;
  undefined4 uStack_238c;
  undefined4 uStack_2388;
  undefined4 uStack_2384;
  undefined4 local_2380;
  undefined4 uStack_237c;
  undefined4 uStack_2378;
  undefined4 uStack_2374;
  undefined4 local_2370;
  undefined4 uStack_236c;
  undefined4 uStack_2368;
  undefined4 uStack_2364;
  undefined4 local_2360;
  undefined4 uStack_235c;
  undefined4 uStack_2358;
  undefined4 uStack_2354;
  undefined4 local_2350;
  undefined4 uStack_234c;
  undefined4 uStack_2348;
  undefined4 uStack_2344;
  undefined4 local_2340;
  undefined4 uStack_233c;
  undefined4 uStack_2338;
  undefined4 uStack_2334;
  undefined4 local_2330;
  undefined4 uStack_232c;
  undefined4 uStack_2328;
  undefined4 uStack_2324;
  undefined4 local_2320;
  undefined4 uStack_231c;
  undefined4 uStack_2318;
  undefined4 uStack_2314;
  undefined4 local_2310;
  undefined4 uStack_230c;
  undefined4 uStack_2308;
  undefined4 uStack_2304;
  undefined4 local_2300;
  undefined4 uStack_22fc;
  undefined4 uStack_22f8;
  undefined4 uStack_22f4;
  undefined4 local_22f0;
  undefined4 uStack_22ec;
  undefined4 uStack_22e8;
  undefined4 uStack_22e4;
  undefined4 local_22e0;
  undefined4 uStack_22dc;
  undefined4 uStack_22d8;
  undefined4 uStack_22d4;
  undefined4 local_22d0;
  undefined4 uStack_22cc;
  undefined4 uStack_22c8;
  undefined4 uStack_22c4;
  undefined1 local_22c0 [16];
  undefined1 local_22b0 [16];
  undefined1 local_22a0 [16];
  undefined1 local_2290 [16];
  undefined1 local_2280 [16];
  undefined1 local_2270 [16];
  undefined1 local_2260 [16];
  undefined1 local_2250 [16];
  undefined1 local_2240 [16];
  undefined1 local_2230 [16];
  undefined1 local_2220 [16];
  undefined1 local_2210 [16];
  undefined1 local_2200 [16];
  undefined1 local_21f0 [16];
  undefined1 local_21e0 [16];
  undefined1 local_21d0 [16];
  undefined1 local_21c0 [16];
  undefined1 local_21b0 [16];
  undefined1 local_21a0 [16];
  undefined1 local_2190 [16];
  undefined1 local_2180 [16];
  undefined1 local_2170 [16];
  undefined1 local_2160 [16];
  undefined1 local_2150 [16];
  undefined1 local_2140 [16];
  undefined1 local_2130 [16];
  undefined1 local_2120 [16];
  undefined1 local_2110 [16];
  undefined1 local_2100 [16];
  undefined1 local_20f0 [16];
  undefined1 local_20e0 [16];
  undefined1 local_20d0 [16];
  undefined1 local_20c0 [8192];
  undefined1 (*local_c0) [16];
  ulong local_b8;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2918 = param_4;
  local_2910 = param_3;
  local_2908 = param_2;
  uVar13 = embree::TaskScheduler::threadCount();
  if (0x200 < local_2908) {
    local_2908 = 0x200;
  }
  if (uVar13 < local_2908) {
    local_2908 = uVar13;
  }
  local_b8 = local_2908;
  if (local_2908 << 0xb < 0x2001) {
    local_c0 = (undefined1 (*) [16])local_20c0;
  }
  else {
    local_c0 = (undefined1 (*) [16])embree::alignedMalloc(local_2908 << 0xb,0x40);
  }
  local_28f0 = &local_2910;
  local_28e8 = &local_2918;
  local_28e0 = &local_2908;
  local_28d0 = param_7;
  local_28d8 = (undefined1 (*) [16])local_20c0;
  if (local_2908 != 0) {
    local_28f8 = &local_28f0;
    local_2900 = (ulong **)0x0;
    _ZN6embree13TaskScheduler5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_4sse214SpatialBinInfoILm16ENS_7PrimRefEEEZNS4_24HeuristicArraySpatialSAHINS4_23TriangleSplitterFactoryES6_Lm32ELm16EE21parallel_spatial_findERKNS4_16PrimInfoExtRangeEmEUlRKNS_5rangeImEEE_ZNSA_21parallel_spatial_findESD_mEUlRKS7_SK_E0_EET0_T_SN_SN_SN_RKSM_RKT1_RKT2_EUlmE_EEvSN_SP_EUlSH_E_EEvSN_SN_SN_SP_PNS0_16TaskGroupContextE
              (0,local_2908,1,&local_28f8,&local_2900);
    embree::TaskScheduler::wait();
    if (local_2900 != (ulong **)0x0) {
      local_28f8 = local_2900;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_28f8);
    }
  }
  pauVar12 = local_c0;
  uVar13 = local_2908;
  uVar9 = *(undefined8 *)(param_6 + 8);
  *(undefined8 *)param_1 = *(undefined8 *)param_6;
  *(undefined8 *)(param_1 + 8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x18);
  *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_6 + 0x10);
  *(undefined8 *)(param_1 + 0x18) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x28);
  *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_6 + 0x20);
  *(undefined8 *)(param_1 + 0x28) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x38);
  *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_6 + 0x30);
  *(undefined8 *)(param_1 + 0x38) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x48);
  *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_6 + 0x40);
  *(undefined8 *)(param_1 + 0x48) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x58);
  *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(param_6 + 0x50);
  *(undefined8 *)(param_1 + 0x58) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x68);
  *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(param_6 + 0x60);
  *(undefined8 *)(param_1 + 0x68) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x78);
  *(undefined8 *)(param_1 + 0x70) = *(undefined8 *)(param_6 + 0x70);
  *(undefined8 *)(param_1 + 0x78) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x88);
  *(undefined8 *)(param_1 + 0x80) = *(undefined8 *)(param_6 + 0x80);
  *(undefined8 *)(param_1 + 0x88) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x98);
  *(undefined8 *)(param_1 + 0x90) = *(undefined8 *)(param_6 + 0x90);
  *(undefined8 *)(param_1 + 0x98) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0xa8);
  *(undefined8 *)(param_1 + 0xa0) = *(undefined8 *)(param_6 + 0xa0);
  *(undefined8 *)(param_1 + 0xa8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0xb8);
  *(undefined8 *)(param_1 + 0xb0) = *(undefined8 *)(param_6 + 0xb0);
  *(undefined8 *)(param_1 + 0xb8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 200);
  *(undefined8 *)(param_1 + 0xc0) = *(undefined8 *)(param_6 + 0xc0);
  *(undefined8 *)(param_1 + 200) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0xd8);
  *(undefined8 *)(param_1 + 0xd0) = *(undefined8 *)(param_6 + 0xd0);
  *(undefined8 *)(param_1 + 0xd8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0xe8);
  *(undefined8 *)(param_1 + 0xe0) = *(undefined8 *)(param_6 + 0xe0);
  *(undefined8 *)(param_1 + 0xe8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0xf8);
  *(undefined8 *)(param_1 + 0xf0) = *(undefined8 *)(param_6 + 0xf0);
  *(undefined8 *)(param_1 + 0xf8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x108);
  *(undefined8 *)(param_1 + 0x100) = *(undefined8 *)(param_6 + 0x100);
  *(undefined8 *)(param_1 + 0x108) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x118);
  *(undefined8 *)(param_1 + 0x110) = *(undefined8 *)(param_6 + 0x110);
  *(undefined8 *)(param_1 + 0x118) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x128);
  *(undefined8 *)(param_1 + 0x120) = *(undefined8 *)(param_6 + 0x120);
  *(undefined8 *)(param_1 + 0x128) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x138);
  *(undefined8 *)(param_1 + 0x130) = *(undefined8 *)(param_6 + 0x130);
  *(undefined8 *)(param_1 + 0x138) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x148);
  *(undefined8 *)(param_1 + 0x140) = *(undefined8 *)(param_6 + 0x140);
  *(undefined8 *)(param_1 + 0x148) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x158);
  *(undefined8 *)(param_1 + 0x150) = *(undefined8 *)(param_6 + 0x150);
  *(undefined8 *)(param_1 + 0x158) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x168);
  *(undefined8 *)(param_1 + 0x160) = *(undefined8 *)(param_6 + 0x160);
  *(undefined8 *)(param_1 + 0x168) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x178);
  *(undefined8 *)(param_1 + 0x170) = *(undefined8 *)(param_6 + 0x170);
  *(undefined8 *)(param_1 + 0x178) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x188);
  *(undefined8 *)(param_1 + 0x180) = *(undefined8 *)(param_6 + 0x180);
  *(undefined8 *)(param_1 + 0x188) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x198);
  *(undefined8 *)(param_1 + 400) = *(undefined8 *)(param_6 + 400);
  *(undefined8 *)(param_1 + 0x198) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x1a8);
  *(undefined8 *)(param_1 + 0x1a0) = *(undefined8 *)(param_6 + 0x1a0);
  *(undefined8 *)(param_1 + 0x1a8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x1b8);
  *(undefined8 *)(param_1 + 0x1b0) = *(undefined8 *)(param_6 + 0x1b0);
  *(undefined8 *)(param_1 + 0x1b8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x1c8);
  *(undefined8 *)(param_1 + 0x1c0) = *(undefined8 *)(param_6 + 0x1c0);
  *(undefined8 *)(param_1 + 0x1c8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x1d8);
  *(undefined8 *)(param_1 + 0x1d0) = *(undefined8 *)(param_6 + 0x1d0);
  *(undefined8 *)(param_1 + 0x1d8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x1e8);
  *(undefined8 *)(param_1 + 0x1e0) = *(undefined8 *)(param_6 + 0x1e0);
  *(undefined8 *)(param_1 + 0x1e8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x1f8);
  *(undefined8 *)(param_1 + 0x1f0) = *(undefined8 *)(param_6 + 0x1f0);
  *(undefined8 *)(param_1 + 0x1f8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x208);
  *(undefined8 *)(param_1 + 0x200) = *(undefined8 *)(param_6 + 0x200);
  *(undefined8 *)(param_1 + 0x208) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x218);
  *(undefined8 *)(param_1 + 0x210) = *(undefined8 *)(param_6 + 0x210);
  *(undefined8 *)(param_1 + 0x218) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x228);
  *(undefined8 *)(param_1 + 0x220) = *(undefined8 *)(param_6 + 0x220);
  *(undefined8 *)(param_1 + 0x228) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x238);
  *(undefined8 *)(param_1 + 0x230) = *(undefined8 *)(param_6 + 0x230);
  *(undefined8 *)(param_1 + 0x238) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x248);
  *(undefined8 *)(param_1 + 0x240) = *(undefined8 *)(param_6 + 0x240);
  *(undefined8 *)(param_1 + 0x248) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 600);
  *(undefined8 *)(param_1 + 0x250) = *(undefined8 *)(param_6 + 0x250);
  *(undefined8 *)(param_1 + 600) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x268);
  *(undefined8 *)(param_1 + 0x260) = *(undefined8 *)(param_6 + 0x260);
  *(undefined8 *)(param_1 + 0x268) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x278);
  *(undefined8 *)(param_1 + 0x270) = *(undefined8 *)(param_6 + 0x270);
  *(undefined8 *)(param_1 + 0x278) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x288);
  *(undefined8 *)(param_1 + 0x280) = *(undefined8 *)(param_6 + 0x280);
  *(undefined8 *)(param_1 + 0x288) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x298);
  *(undefined8 *)(param_1 + 0x290) = *(undefined8 *)(param_6 + 0x290);
  *(undefined8 *)(param_1 + 0x298) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x2a8);
  *(undefined8 *)(param_1 + 0x2a0) = *(undefined8 *)(param_6 + 0x2a0);
  *(undefined8 *)(param_1 + 0x2a8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x2b8);
  *(undefined8 *)(param_1 + 0x2b0) = *(undefined8 *)(param_6 + 0x2b0);
  *(undefined8 *)(param_1 + 0x2b8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x2c8);
  *(undefined8 *)(param_1 + 0x2c0) = *(undefined8 *)(param_6 + 0x2c0);
  *(undefined8 *)(param_1 + 0x2c8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x2d8);
  *(undefined8 *)(param_1 + 0x2d0) = *(undefined8 *)(param_6 + 0x2d0);
  *(undefined8 *)(param_1 + 0x2d8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x2e8);
  *(undefined8 *)(param_1 + 0x2e0) = *(undefined8 *)(param_6 + 0x2e0);
  *(undefined8 *)(param_1 + 0x2e8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x2f8);
  *(undefined8 *)(param_1 + 0x2f0) = *(undefined8 *)(param_6 + 0x2f0);
  *(undefined8 *)(param_1 + 0x2f8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x308);
  *(undefined8 *)(param_1 + 0x300) = *(undefined8 *)(param_6 + 0x300);
  *(undefined8 *)(param_1 + 0x308) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x318);
  *(undefined8 *)(param_1 + 0x310) = *(undefined8 *)(param_6 + 0x310);
  *(undefined8 *)(param_1 + 0x318) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x328);
  *(undefined8 *)(param_1 + 800) = *(undefined8 *)(param_6 + 800);
  *(undefined8 *)(param_1 + 0x328) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x338);
  *(undefined8 *)(param_1 + 0x330) = *(undefined8 *)(param_6 + 0x330);
  *(undefined8 *)(param_1 + 0x338) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x348);
  *(undefined8 *)(param_1 + 0x340) = *(undefined8 *)(param_6 + 0x340);
  *(undefined8 *)(param_1 + 0x348) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x358);
  *(undefined8 *)(param_1 + 0x350) = *(undefined8 *)(param_6 + 0x350);
  *(undefined8 *)(param_1 + 0x358) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x368);
  *(undefined8 *)(param_1 + 0x360) = *(undefined8 *)(param_6 + 0x360);
  *(undefined8 *)(param_1 + 0x368) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x378);
  *(undefined8 *)(param_1 + 0x370) = *(undefined8 *)(param_6 + 0x370);
  *(undefined8 *)(param_1 + 0x378) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x388);
  *(undefined8 *)(param_1 + 0x380) = *(undefined8 *)(param_6 + 0x380);
  *(undefined8 *)(param_1 + 0x388) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x398);
  *(undefined8 *)(param_1 + 0x390) = *(undefined8 *)(param_6 + 0x390);
  *(undefined8 *)(param_1 + 0x398) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x3a8);
  *(undefined8 *)(param_1 + 0x3a0) = *(undefined8 *)(param_6 + 0x3a0);
  *(undefined8 *)(param_1 + 0x3a8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x3b8);
  *(undefined8 *)(param_1 + 0x3b0) = *(undefined8 *)(param_6 + 0x3b0);
  *(undefined8 *)(param_1 + 0x3b8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x3c8);
  *(undefined8 *)(param_1 + 0x3c0) = *(undefined8 *)(param_6 + 0x3c0);
  *(undefined8 *)(param_1 + 0x3c8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x3d8);
  *(undefined8 *)(param_1 + 0x3d0) = *(undefined8 *)(param_6 + 0x3d0);
  *(undefined8 *)(param_1 + 0x3d8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 1000);
  *(undefined8 *)(param_1 + 0x3e0) = *(undefined8 *)(param_6 + 0x3e0);
  *(undefined8 *)(param_1 + 1000) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x3f8);
  *(undefined8 *)(param_1 + 0x3f0) = *(undefined8 *)(param_6 + 0x3f0);
  *(undefined8 *)(param_1 + 0x3f8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x408);
  *(undefined8 *)(param_1 + 0x400) = *(undefined8 *)(param_6 + 0x400);
  *(undefined8 *)(param_1 + 0x408) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x418);
  *(undefined8 *)(param_1 + 0x410) = *(undefined8 *)(param_6 + 0x410);
  *(undefined8 *)(param_1 + 0x418) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x428);
  *(undefined8 *)(param_1 + 0x420) = *(undefined8 *)(param_6 + 0x420);
  *(undefined8 *)(param_1 + 0x428) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x438);
  *(undefined8 *)(param_1 + 0x430) = *(undefined8 *)(param_6 + 0x430);
  *(undefined8 *)(param_1 + 0x438) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x448);
  *(undefined8 *)(param_1 + 0x440) = *(undefined8 *)(param_6 + 0x440);
  *(undefined8 *)(param_1 + 0x448) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x458);
  *(undefined8 *)(param_1 + 0x450) = *(undefined8 *)(param_6 + 0x450);
  *(undefined8 *)(param_1 + 0x458) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x468);
  *(undefined8 *)(param_1 + 0x460) = *(undefined8 *)(param_6 + 0x460);
  *(undefined8 *)(param_1 + 0x468) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x478);
  *(undefined8 *)(param_1 + 0x470) = *(undefined8 *)(param_6 + 0x470);
  *(undefined8 *)(param_1 + 0x478) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x488);
  *(undefined8 *)(param_1 + 0x480) = *(undefined8 *)(param_6 + 0x480);
  *(undefined8 *)(param_1 + 0x488) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x498);
  *(undefined8 *)(param_1 + 0x490) = *(undefined8 *)(param_6 + 0x490);
  *(undefined8 *)(param_1 + 0x498) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x4a8);
  *(undefined8 *)(param_1 + 0x4a0) = *(undefined8 *)(param_6 + 0x4a0);
  *(undefined8 *)(param_1 + 0x4a8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x4b8);
  *(undefined8 *)(param_1 + 0x4b0) = *(undefined8 *)(param_6 + 0x4b0);
  *(undefined8 *)(param_1 + 0x4b8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x4c8);
  *(undefined8 *)(param_1 + 0x4c0) = *(undefined8 *)(param_6 + 0x4c0);
  *(undefined8 *)(param_1 + 0x4c8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x4d8);
  *(undefined8 *)(param_1 + 0x4d0) = *(undefined8 *)(param_6 + 0x4d0);
  *(undefined8 *)(param_1 + 0x4d8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x4e8);
  *(undefined8 *)(param_1 + 0x4e0) = *(undefined8 *)(param_6 + 0x4e0);
  *(undefined8 *)(param_1 + 0x4e8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x4f8);
  *(undefined8 *)(param_1 + 0x4f0) = *(undefined8 *)(param_6 + 0x4f0);
  *(undefined8 *)(param_1 + 0x4f8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x508);
  *(undefined8 *)(param_1 + 0x500) = *(undefined8 *)(param_6 + 0x500);
  *(undefined8 *)(param_1 + 0x508) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x518);
  *(undefined8 *)(param_1 + 0x510) = *(undefined8 *)(param_6 + 0x510);
  *(undefined8 *)(param_1 + 0x518) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x528);
  *(undefined8 *)(param_1 + 0x520) = *(undefined8 *)(param_6 + 0x520);
  *(undefined8 *)(param_1 + 0x528) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x538);
  *(undefined8 *)(param_1 + 0x530) = *(undefined8 *)(param_6 + 0x530);
  *(undefined8 *)(param_1 + 0x538) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x548);
  *(undefined8 *)(param_1 + 0x540) = *(undefined8 *)(param_6 + 0x540);
  *(undefined8 *)(param_1 + 0x548) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x558);
  *(undefined8 *)(param_1 + 0x550) = *(undefined8 *)(param_6 + 0x550);
  *(undefined8 *)(param_1 + 0x558) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x568);
  *(undefined8 *)(param_1 + 0x560) = *(undefined8 *)(param_6 + 0x560);
  *(undefined8 *)(param_1 + 0x568) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x578);
  *(undefined8 *)(param_1 + 0x570) = *(undefined8 *)(param_6 + 0x570);
  *(undefined8 *)(param_1 + 0x578) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x588);
  *(undefined8 *)(param_1 + 0x580) = *(undefined8 *)(param_6 + 0x580);
  *(undefined8 *)(param_1 + 0x588) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x598);
  *(undefined8 *)(param_1 + 0x590) = *(undefined8 *)(param_6 + 0x590);
  *(undefined8 *)(param_1 + 0x598) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x5a8);
  *(undefined8 *)(param_1 + 0x5a0) = *(undefined8 *)(param_6 + 0x5a0);
  *(undefined8 *)(param_1 + 0x5a8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x5b8);
  *(undefined8 *)(param_1 + 0x5b0) = *(undefined8 *)(param_6 + 0x5b0);
  *(undefined8 *)(param_1 + 0x5b8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x5c8);
  *(undefined8 *)(param_1 + 0x5c0) = *(undefined8 *)(param_6 + 0x5c0);
  *(undefined8 *)(param_1 + 0x5c8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x5d8);
  *(undefined8 *)(param_1 + 0x5d0) = *(undefined8 *)(param_6 + 0x5d0);
  *(undefined8 *)(param_1 + 0x5d8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x5e8);
  *(undefined8 *)(param_1 + 0x5e0) = *(undefined8 *)(param_6 + 0x5e0);
  *(undefined8 *)(param_1 + 0x5e8) = uVar9;
  uVar9 = *(undefined8 *)(param_6 + 0x5f8);
  *(undefined8 *)(param_1 + 0x5f0) = *(undefined8 *)(param_6 + 0x5f0);
  *(undefined8 *)(param_1 + 0x5f8) = uVar9;
  memmove((void *)(param_1 + 0x600),param_6 + 0x600,0x100);
  memmove((void *)(param_1 + 0x700),param_6 + 0x700,0x100);
  uVar11 = _LC3;
  uVar10 = _LC1;
  if (uVar13 != 0) {
    pauVar19 = pauVar12;
    iVar20 = *(int *)(param_1 + 0x700);
    iVar22 = *(int *)(param_1 + 0x704);
    iVar23 = *(int *)(param_1 + 0x708);
    iVar24 = *(int *)(param_1 + 0x70c);
    iVar25 = *(int *)(param_1 + 0x600);
    iVar27 = *(int *)(param_1 + 0x604);
    iVar28 = *(int *)(param_1 + 0x608);
    iVar29 = *(int *)(param_1 + 0x60c);
    do {
      local_2880 = uVar11;
      uStack_287c = uVar11;
      uStack_2878 = uVar11;
      uStack_2874 = uVar11;
      local_2870 = uVar10;
      uStack_286c = uVar10;
      uStack_2868 = uVar10;
      uStack_2864 = uVar10;
      lVar18 = 0x600;
      local_28a0 = uVar11;
      uStack_289c = uVar11;
      uStack_2898 = uVar11;
      uStack_2894 = uVar11;
      local_2890 = uVar10;
      uStack_288c = uVar10;
      uStack_2888 = uVar10;
      uStack_2884 = uVar10;
      local_28c0._0_4_ = uVar11;
      local_28c0._4_4_ = uVar11;
      local_28c0._8_4_ = uVar11;
      local_28c0._12_4_ = uVar11;
      local_28b0 = uVar10;
      uStack_28ac = uVar10;
      uStack_28a8 = uVar10;
      uStack_28a4 = uVar10;
      local_21c0 = (undefined1  [16])0x0;
      local_22c0 = (undefined1  [16])0x0;
      local_2820 = uVar11;
      uStack_281c = uVar11;
      uStack_2818 = uVar11;
      uStack_2814 = uVar11;
      local_2810 = uVar10;
      uStack_280c = uVar10;
      uStack_2808 = uVar10;
      uStack_2804 = uVar10;
      local_2840 = uVar11;
      uStack_283c = uVar11;
      uStack_2838 = uVar11;
      uStack_2834 = uVar11;
      local_2830 = uVar10;
      uStack_282c = uVar10;
      uStack_2828 = uVar10;
      uStack_2824 = uVar10;
      local_2860 = uVar11;
      uStack_285c = uVar11;
      uStack_2858 = uVar11;
      uStack_2854 = uVar11;
      local_2850 = uVar10;
      uStack_284c = uVar10;
      uStack_2848 = uVar10;
      uStack_2844 = uVar10;
      local_21b0 = (undefined1  [16])0x0;
      local_22b0 = (undefined1  [16])0x0;
      local_27c0 = uVar11;
      uStack_27bc = uVar11;
      uStack_27b8 = uVar11;
      uStack_27b4 = uVar11;
      local_27b0 = uVar10;
      uStack_27ac = uVar10;
      uStack_27a8 = uVar10;
      uStack_27a4 = uVar10;
      local_27e0 = uVar11;
      uStack_27dc = uVar11;
      uStack_27d8 = uVar11;
      uStack_27d4 = uVar11;
      local_27d0 = uVar10;
      uStack_27cc = uVar10;
      uStack_27c8 = uVar10;
      uStack_27c4 = uVar10;
      local_2800 = uVar11;
      uStack_27fc = uVar11;
      uStack_27f8 = uVar11;
      uStack_27f4 = uVar11;
      local_27f0 = uVar10;
      uStack_27ec = uVar10;
      uStack_27e8 = uVar10;
      uStack_27e4 = uVar10;
      local_21a0 = (undefined1  [16])0x0;
      local_22a0 = (undefined1  [16])0x0;
      local_2760 = uVar11;
      uStack_275c = uVar11;
      uStack_2758 = uVar11;
      uStack_2754 = uVar11;
      local_2750 = uVar10;
      uStack_274c = uVar10;
      uStack_2748 = uVar10;
      uStack_2744 = uVar10;
      local_2780 = uVar11;
      uStack_277c = uVar11;
      uStack_2778 = uVar11;
      uStack_2774 = uVar11;
      local_2770 = uVar10;
      uStack_276c = uVar10;
      uStack_2768 = uVar10;
      uStack_2764 = uVar10;
      local_27a0 = uVar11;
      uStack_279c = uVar11;
      uStack_2798 = uVar11;
      uStack_2794 = uVar11;
      local_2790 = uVar10;
      uStack_278c = uVar10;
      uStack_2788 = uVar10;
      uStack_2784 = uVar10;
      local_2190 = (undefined1  [16])0x0;
      local_2290 = (undefined1  [16])0x0;
      local_2700 = uVar11;
      uStack_26fc = uVar11;
      uStack_26f8 = uVar11;
      uStack_26f4 = uVar11;
      local_26f0 = uVar10;
      uStack_26ec = uVar10;
      uStack_26e8 = uVar10;
      uStack_26e4 = uVar10;
      local_2720 = uVar11;
      uStack_271c = uVar11;
      uStack_2718 = uVar11;
      uStack_2714 = uVar11;
      local_2710 = uVar10;
      uStack_270c = uVar10;
      uStack_2708 = uVar10;
      uStack_2704 = uVar10;
      local_2740 = uVar11;
      uStack_273c = uVar11;
      uStack_2738 = uVar11;
      uStack_2734 = uVar11;
      local_2730 = uVar10;
      uStack_272c = uVar10;
      uStack_2728 = uVar10;
      uStack_2724 = uVar10;
      local_2180 = (undefined1  [16])0x0;
      local_2280 = (undefined1  [16])0x0;
      local_26a0 = uVar11;
      uStack_269c = uVar11;
      uStack_2698 = uVar11;
      uStack_2694 = uVar11;
      local_2690 = uVar10;
      uStack_268c = uVar10;
      uStack_2688 = uVar10;
      uStack_2684 = uVar10;
      local_26c0 = uVar11;
      uStack_26bc = uVar11;
      uStack_26b8 = uVar11;
      uStack_26b4 = uVar11;
      local_26b0 = uVar10;
      uStack_26ac = uVar10;
      uStack_26a8 = uVar10;
      uStack_26a4 = uVar10;
      local_26e0 = uVar11;
      uStack_26dc = uVar11;
      uStack_26d8 = uVar11;
      uStack_26d4 = uVar11;
      local_26d0 = uVar10;
      uStack_26cc = uVar10;
      uStack_26c8 = uVar10;
      uStack_26c4 = uVar10;
      local_2170 = (undefined1  [16])0x0;
      local_2270 = (undefined1  [16])0x0;
      local_2640 = uVar11;
      uStack_263c = uVar11;
      uStack_2638 = uVar11;
      uStack_2634 = uVar11;
      local_2630 = uVar10;
      uStack_262c = uVar10;
      uStack_2628 = uVar10;
      uStack_2624 = uVar10;
      local_2660 = uVar11;
      uStack_265c = uVar11;
      uStack_2658 = uVar11;
      uStack_2654 = uVar11;
      local_2650 = uVar10;
      uStack_264c = uVar10;
      uStack_2648 = uVar10;
      uStack_2644 = uVar10;
      local_2680 = uVar11;
      uStack_267c = uVar11;
      uStack_2678 = uVar11;
      uStack_2674 = uVar11;
      local_2670 = uVar10;
      uStack_266c = uVar10;
      uStack_2668 = uVar10;
      uStack_2664 = uVar10;
      local_2160 = (undefined1  [16])0x0;
      local_2260 = (undefined1  [16])0x0;
      local_25e0 = uVar11;
      uStack_25dc = uVar11;
      uStack_25d8 = uVar11;
      uStack_25d4 = uVar11;
      local_25d0 = uVar10;
      uStack_25cc = uVar10;
      uStack_25c8 = uVar10;
      uStack_25c4 = uVar10;
      local_2600 = uVar11;
      uStack_25fc = uVar11;
      uStack_25f8 = uVar11;
      uStack_25f4 = uVar11;
      local_25f0 = uVar10;
      uStack_25ec = uVar10;
      uStack_25e8 = uVar10;
      uStack_25e4 = uVar10;
      local_2620 = uVar11;
      uStack_261c = uVar11;
      uStack_2618 = uVar11;
      uStack_2614 = uVar11;
      local_2610 = uVar10;
      uStack_260c = uVar10;
      uStack_2608 = uVar10;
      uStack_2604 = uVar10;
      local_2150 = (undefined1  [16])0x0;
      local_2250 = (undefined1  [16])0x0;
      local_2580 = uVar11;
      uStack_257c = uVar11;
      uStack_2578 = uVar11;
      uStack_2574 = uVar11;
      local_2570 = uVar10;
      uStack_256c = uVar10;
      uStack_2568 = uVar10;
      uStack_2564 = uVar10;
      local_25a0 = uVar11;
      uStack_259c = uVar11;
      uStack_2598 = uVar11;
      uStack_2594 = uVar11;
      local_2590 = uVar10;
      uStack_258c = uVar10;
      uStack_2588 = uVar10;
      uStack_2584 = uVar10;
      local_25c0 = uVar11;
      uStack_25bc = uVar11;
      uStack_25b8 = uVar11;
      uStack_25b4 = uVar11;
      local_25b0 = uVar10;
      uStack_25ac = uVar10;
      uStack_25a8 = uVar10;
      uStack_25a4 = uVar10;
      local_2140 = (undefined1  [16])0x0;
      local_2240 = (undefined1  [16])0x0;
      local_2520 = uVar11;
      uStack_251c = uVar11;
      uStack_2518 = uVar11;
      uStack_2514 = uVar11;
      local_2510 = uVar10;
      uStack_250c = uVar10;
      uStack_2508 = uVar10;
      uStack_2504 = uVar10;
      local_2540 = uVar11;
      uStack_253c = uVar11;
      uStack_2538 = uVar11;
      uStack_2534 = uVar11;
      local_2530 = uVar10;
      uStack_252c = uVar10;
      uStack_2528 = uVar10;
      uStack_2524 = uVar10;
      local_2560 = uVar11;
      uStack_255c = uVar11;
      uStack_2558 = uVar11;
      uStack_2554 = uVar11;
      local_2550 = uVar10;
      uStack_254c = uVar10;
      uStack_2548 = uVar10;
      uStack_2544 = uVar10;
      local_2130 = (undefined1  [16])0x0;
      local_2230 = (undefined1  [16])0x0;
      local_24c0 = uVar11;
      uStack_24bc = uVar11;
      uStack_24b8 = uVar11;
      uStack_24b4 = uVar11;
      local_24b0 = uVar10;
      uStack_24ac = uVar10;
      uStack_24a8 = uVar10;
      uStack_24a4 = uVar10;
      local_24e0 = uVar11;
      uStack_24dc = uVar11;
      uStack_24d8 = uVar11;
      uStack_24d4 = uVar11;
      local_24d0 = uVar10;
      uStack_24cc = uVar10;
      uStack_24c8 = uVar10;
      uStack_24c4 = uVar10;
      local_2500 = uVar11;
      uStack_24fc = uVar11;
      uStack_24f8 = uVar11;
      uStack_24f4 = uVar11;
      local_24f0 = uVar10;
      uStack_24ec = uVar10;
      uStack_24e8 = uVar10;
      uStack_24e4 = uVar10;
      local_2120 = (undefined1  [16])0x0;
      local_2220 = (undefined1  [16])0x0;
      local_2460 = uVar11;
      uStack_245c = uVar11;
      uStack_2458 = uVar11;
      uStack_2454 = uVar11;
      local_2450 = uVar10;
      uStack_244c = uVar10;
      uStack_2448 = uVar10;
      uStack_2444 = uVar10;
      local_2480 = uVar11;
      uStack_247c = uVar11;
      uStack_2478 = uVar11;
      uStack_2474 = uVar11;
      local_2470 = uVar10;
      uStack_246c = uVar10;
      uStack_2468 = uVar10;
      uStack_2464 = uVar10;
      local_24a0 = uVar11;
      uStack_249c = uVar11;
      uStack_2498 = uVar11;
      uStack_2494 = uVar11;
      local_2490 = uVar10;
      uStack_248c = uVar10;
      uStack_2488 = uVar10;
      uStack_2484 = uVar10;
      local_2110 = (undefined1  [16])0x0;
      local_2210 = (undefined1  [16])0x0;
      local_2400 = uVar11;
      uStack_23fc = uVar11;
      uStack_23f8 = uVar11;
      uStack_23f4 = uVar11;
      local_23f0 = uVar10;
      uStack_23ec = uVar10;
      uStack_23e8 = uVar10;
      uStack_23e4 = uVar10;
      local_2420 = uVar11;
      uStack_241c = uVar11;
      uStack_2418 = uVar11;
      uStack_2414 = uVar11;
      local_2410 = uVar10;
      uStack_240c = uVar10;
      uStack_2408 = uVar10;
      uStack_2404 = uVar10;
      local_2440 = uVar11;
      uStack_243c = uVar11;
      uStack_2438 = uVar11;
      uStack_2434 = uVar11;
      local_2430 = uVar10;
      uStack_242c = uVar10;
      uStack_2428 = uVar10;
      uStack_2424 = uVar10;
      local_2100 = (undefined1  [16])0x0;
      local_2200 = (undefined1  [16])0x0;
      local_23a0 = uVar11;
      uStack_239c = uVar11;
      uStack_2398 = uVar11;
      uStack_2394 = uVar11;
      local_2390 = uVar10;
      uStack_238c = uVar10;
      uStack_2388 = uVar10;
      uStack_2384 = uVar10;
      local_23c0 = uVar11;
      uStack_23bc = uVar11;
      uStack_23b8 = uVar11;
      uStack_23b4 = uVar11;
      local_23b0 = uVar10;
      uStack_23ac = uVar10;
      uStack_23a8 = uVar10;
      uStack_23a4 = uVar10;
      local_23e0 = uVar11;
      uStack_23dc = uVar11;
      uStack_23d8 = uVar11;
      uStack_23d4 = uVar11;
      local_23d0 = uVar10;
      uStack_23cc = uVar10;
      uStack_23c8 = uVar10;
      uStack_23c4 = uVar10;
      local_20f0 = (undefined1  [16])0x0;
      local_21f0 = (undefined1  [16])0x0;
      local_2340 = uVar11;
      uStack_233c = uVar11;
      uStack_2338 = uVar11;
      uStack_2334 = uVar11;
      local_2330 = uVar10;
      uStack_232c = uVar10;
      uStack_2328 = uVar10;
      uStack_2324 = uVar10;
      local_2360 = uVar11;
      uStack_235c = uVar11;
      uStack_2358 = uVar11;
      uStack_2354 = uVar11;
      local_2350 = uVar10;
      uStack_234c = uVar10;
      uStack_2348 = uVar10;
      uStack_2344 = uVar10;
      local_2380 = uVar11;
      uStack_237c = uVar11;
      uStack_2378 = uVar11;
      uStack_2374 = uVar11;
      local_2370 = uVar10;
      uStack_236c = uVar10;
      uStack_2368 = uVar10;
      uStack_2364 = uVar10;
      local_20e0 = (undefined1  [16])0x0;
      local_21e0 = (undefined1  [16])0x0;
      local_22e0 = uVar11;
      uStack_22dc = uVar11;
      uStack_22d8 = uVar11;
      uStack_22d4 = uVar11;
      local_22d0 = uVar10;
      uStack_22cc = uVar10;
      uStack_22c8 = uVar10;
      uStack_22c4 = uVar10;
      local_2300 = uVar11;
      uStack_22fc = uVar11;
      uStack_22f8 = uVar11;
      uStack_22f4 = uVar11;
      local_22f0 = uVar10;
      uStack_22ec = uVar10;
      uStack_22e8 = uVar10;
      uStack_22e4 = uVar10;
      local_2320 = uVar11;
      uStack_231c = uVar11;
      uStack_2318 = uVar11;
      uStack_2314 = uVar11;
      local_2310 = uVar10;
      uStack_230c = uVar10;
      uStack_2308 = uVar10;
      uStack_2304 = uVar10;
      local_20d0 = (undefined1  [16])0x0;
      local_21d0 = (undefined1  [16])0x0;
      pauVar14 = pauVar19;
      pauVar15 = (undefined1 (*) [16])param_1;
      pauVar16 = &local_28c0;
      piVar17 = (int *)local_22c0;
      while( true ) {
        piVar1 = (int *)(pauVar19[0x10] + lVar18);
        iVar2 = *piVar1;
        iVar3 = piVar1[1];
        iVar4 = piVar1[2];
        iVar5 = piVar1[3];
        piVar1 = (int *)(*pauVar19 + lVar18);
        iVar6 = piVar1[1];
        iVar7 = piVar1[2];
        iVar8 = piVar1[3];
        lVar18 = lVar18 + 0x10;
        *piVar17 = iVar25 + *piVar1 + *piVar17;
        piVar17[1] = iVar27 + iVar6 + piVar17[1];
        piVar17[2] = iVar28 + iVar7 + piVar17[2];
        piVar17[3] = iVar29 + iVar8 + piVar17[3];
        auVar26 = minps(*pauVar15,*pauVar14);
        piVar17[0x40] = iVar20 + iVar2 + piVar17[0x40];
        piVar17[0x41] = iVar22 + iVar3 + piVar17[0x41];
        piVar17[0x42] = iVar23 + iVar4 + piVar17[0x42];
        piVar17[0x43] = iVar24 + iVar5 + piVar17[0x43];
        auVar21 = maxps(pauVar15[1],pauVar14[1]);
        *pauVar16 = auVar26;
        auVar26 = minps(pauVar15[2],pauVar14[2]);
        pauVar16[1] = auVar21;
        auVar21 = maxps(pauVar15[3],pauVar14[3]);
        pauVar16[2] = auVar26;
        auVar26 = minps(pauVar15[4],pauVar14[4]);
        pauVar16[3] = auVar21;
        auVar21 = maxps(pauVar15[5],pauVar14[5]);
        pauVar16[4] = auVar26;
        pauVar16[5] = auVar21;
        if (piVar17 + 4 == (int *)local_21c0) break;
        piVar1 = (int *)(param_1 + 0x100 + lVar18);
        iVar20 = *piVar1;
        iVar22 = piVar1[1];
        iVar23 = piVar1[2];
        iVar24 = piVar1[3];
        piVar1 = (int *)(param_1 + lVar18);
        iVar25 = *piVar1;
        iVar27 = piVar1[1];
        iVar28 = piVar1[2];
        iVar29 = piVar1[3];
        pauVar14 = pauVar14 + 6;
        pauVar15 = pauVar15 + 6;
        pauVar16 = pauVar16 + 6;
        piVar17 = piVar17 + 4;
      }
      pauVar19 = pauVar19 + 0x80;
      *(ulong *)param_1 = CONCAT44(local_28c0._4_4_,local_28c0._0_4_);
      *(ulong *)(param_1 + 8) = CONCAT44(local_28c0._12_4_,local_28c0._8_4_);
      *(ulong *)(param_1 + 0x10) = CONCAT44(uStack_28ac,local_28b0);
      *(ulong *)(param_1 + 0x18) = CONCAT44(uStack_28a4,uStack_28a8);
      *(ulong *)(param_1 + 0x20) = CONCAT44(uStack_289c,local_28a0);
      *(ulong *)(param_1 + 0x28) = CONCAT44(uStack_2894,uStack_2898);
      *(ulong *)(param_1 + 0x30) = CONCAT44(uStack_288c,local_2890);
      *(ulong *)(param_1 + 0x38) = CONCAT44(uStack_2884,uStack_2888);
      *(ulong *)(param_1 + 0x40) = CONCAT44(uStack_287c,local_2880);
      *(ulong *)(param_1 + 0x48) = CONCAT44(uStack_2874,uStack_2878);
      *(ulong *)(param_1 + 0x50) = CONCAT44(uStack_286c,local_2870);
      *(ulong *)(param_1 + 0x58) = CONCAT44(uStack_2864,uStack_2868);
      *(ulong *)(param_1 + 0x60) = CONCAT44(uStack_285c,local_2860);
      *(ulong *)(param_1 + 0x68) = CONCAT44(uStack_2854,uStack_2858);
      *(ulong *)(param_1 + 0x70) = CONCAT44(uStack_284c,local_2850);
      *(ulong *)(param_1 + 0x78) = CONCAT44(uStack_2844,uStack_2848);
      *(ulong *)(param_1 + 0x80) = CONCAT44(uStack_283c,local_2840);
      *(ulong *)(param_1 + 0x88) = CONCAT44(uStack_2834,uStack_2838);
      *(ulong *)(param_1 + 0x90) = CONCAT44(uStack_282c,local_2830);
      *(ulong *)(param_1 + 0x98) = CONCAT44(uStack_2824,uStack_2828);
      *(ulong *)(param_1 + 0xa0) = CONCAT44(uStack_281c,local_2820);
      *(ulong *)(param_1 + 0xa8) = CONCAT44(uStack_2814,uStack_2818);
      *(ulong *)(param_1 + 0xb0) = CONCAT44(uStack_280c,local_2810);
      *(ulong *)(param_1 + 0xb8) = CONCAT44(uStack_2804,uStack_2808);
      *(ulong *)(param_1 + 0xc0) = CONCAT44(uStack_27fc,local_2800);
      *(ulong *)(param_1 + 200) = CONCAT44(uStack_27f4,uStack_27f8);
      *(ulong *)(param_1 + 0xe0) = CONCAT44(uStack_27dc,local_27e0);
      *(ulong *)(param_1 + 0xe8) = CONCAT44(uStack_27d4,uStack_27d8);
      *(ulong *)(param_1 + 0xf0) = CONCAT44(uStack_27cc,local_27d0);
      *(ulong *)(param_1 + 0xf8) = CONCAT44(uStack_27c4,uStack_27c8);
      *(ulong *)(param_1 + 0xd0) = CONCAT44(uStack_27ec,local_27f0);
      *(ulong *)(param_1 + 0xd8) = CONCAT44(uStack_27e4,uStack_27e8);
      *(ulong *)(param_1 + 0x100) = CONCAT44(uStack_27bc,local_27c0);
      *(ulong *)(param_1 + 0x108) = CONCAT44(uStack_27b4,uStack_27b8);
      *(ulong *)(param_1 + 0x110) = CONCAT44(uStack_27ac,local_27b0);
      *(ulong *)(param_1 + 0x118) = CONCAT44(uStack_27a4,uStack_27a8);
      *(ulong *)(param_1 + 0x120) = CONCAT44(uStack_279c,local_27a0);
      *(ulong *)(param_1 + 0x128) = CONCAT44(uStack_2794,uStack_2798);
      *(ulong *)(param_1 + 0x130) = CONCAT44(uStack_278c,local_2790);
      *(ulong *)(param_1 + 0x138) = CONCAT44(uStack_2784,uStack_2788);
      *(ulong *)(param_1 + 0x140) = CONCAT44(uStack_277c,local_2780);
      *(ulong *)(param_1 + 0x148) = CONCAT44(uStack_2774,uStack_2778);
      *(ulong *)(param_1 + 0x150) = CONCAT44(uStack_276c,local_2770);
      *(ulong *)(param_1 + 0x158) = CONCAT44(uStack_2764,uStack_2768);
      *(ulong *)(param_1 + 0x160) = CONCAT44(uStack_275c,local_2760);
      *(ulong *)(param_1 + 0x168) = CONCAT44(uStack_2754,uStack_2758);
      *(ulong *)(param_1 + 0x170) = CONCAT44(uStack_274c,local_2750);
      *(ulong *)(param_1 + 0x178) = CONCAT44(uStack_2744,uStack_2748);
      *(ulong *)(param_1 + 0x180) = CONCAT44(uStack_273c,local_2740);
      *(ulong *)(param_1 + 0x188) = CONCAT44(uStack_2734,uStack_2738);
      *(ulong *)(param_1 + 400) = CONCAT44(uStack_272c,local_2730);
      *(ulong *)(param_1 + 0x198) = CONCAT44(uStack_2724,uStack_2728);
      *(ulong *)(param_1 + 0x1a0) = CONCAT44(uStack_271c,local_2720);
      *(ulong *)(param_1 + 0x1a8) = CONCAT44(uStack_2714,uStack_2718);
      *(ulong *)(param_1 + 0x1b0) = CONCAT44(uStack_270c,local_2710);
      *(ulong *)(param_1 + 0x1b8) = CONCAT44(uStack_2704,uStack_2708);
      *(ulong *)(param_1 + 0x1c0) = CONCAT44(uStack_26fc,local_2700);
      *(ulong *)(param_1 + 0x1c8) = CONCAT44(uStack_26f4,uStack_26f8);
      *(ulong *)(param_1 + 0x1e0) = CONCAT44(uStack_26dc,local_26e0);
      *(ulong *)(param_1 + 0x1e8) = CONCAT44(uStack_26d4,uStack_26d8);
      *(ulong *)(param_1 + 0x1f0) = CONCAT44(uStack_26cc,local_26d0);
      *(ulong *)(param_1 + 0x1f8) = CONCAT44(uStack_26c4,uStack_26c8);
      *(ulong *)(param_1 + 0x1d0) = CONCAT44(uStack_26ec,local_26f0);
      *(ulong *)(param_1 + 0x1d8) = CONCAT44(uStack_26e4,uStack_26e8);
      *(ulong *)(param_1 + 0x200) = CONCAT44(uStack_26bc,local_26c0);
      *(ulong *)(param_1 + 0x208) = CONCAT44(uStack_26b4,uStack_26b8);
      *(ulong *)(param_1 + 0x210) = CONCAT44(uStack_26ac,local_26b0);
      *(ulong *)(param_1 + 0x218) = CONCAT44(uStack_26a4,uStack_26a8);
      *(ulong *)(param_1 + 0x220) = CONCAT44(uStack_269c,local_26a0);
      *(ulong *)(param_1 + 0x228) = CONCAT44(uStack_2694,uStack_2698);
      *(ulong *)(param_1 + 0x230) = CONCAT44(uStack_268c,local_2690);
      *(ulong *)(param_1 + 0x238) = CONCAT44(uStack_2684,uStack_2688);
      *(ulong *)(param_1 + 0x240) = CONCAT44(uStack_267c,local_2680);
      *(ulong *)(param_1 + 0x248) = CONCAT44(uStack_2674,uStack_2678);
      *(ulong *)(param_1 + 0x250) = CONCAT44(uStack_266c,local_2670);
      *(ulong *)(param_1 + 600) = CONCAT44(uStack_2664,uStack_2668);
      *(ulong *)(param_1 + 0x260) = CONCAT44(uStack_265c,local_2660);
      *(ulong *)(param_1 + 0x268) = CONCAT44(uStack_2654,uStack_2658);
      *(ulong *)(param_1 + 0x270) = CONCAT44(uStack_264c,local_2650);
      *(ulong *)(param_1 + 0x278) = CONCAT44(uStack_2644,uStack_2648);
      *(ulong *)(param_1 + 0x280) = CONCAT44(uStack_263c,local_2640);
      *(ulong *)(param_1 + 0x288) = CONCAT44(uStack_2634,uStack_2638);
      *(ulong *)(param_1 + 0x290) = CONCAT44(uStack_262c,local_2630);
      *(ulong *)(param_1 + 0x298) = CONCAT44(uStack_2624,uStack_2628);
      *(ulong *)(param_1 + 0x2a0) = CONCAT44(uStack_261c,local_2620);
      *(ulong *)(param_1 + 0x2a8) = CONCAT44(uStack_2614,uStack_2618);
      *(ulong *)(param_1 + 0x2b0) = CONCAT44(uStack_260c,local_2610);
      *(ulong *)(param_1 + 0x2b8) = CONCAT44(uStack_2604,uStack_2608);
      *(ulong *)(param_1 + 0x2c0) = CONCAT44(uStack_25fc,local_2600);
      *(ulong *)(param_1 + 0x2c8) = CONCAT44(uStack_25f4,uStack_25f8);
      *(ulong *)(param_1 + 0x2e0) = CONCAT44(uStack_25dc,local_25e0);
      *(ulong *)(param_1 + 0x2e8) = CONCAT44(uStack_25d4,uStack_25d8);
      *(ulong *)(param_1 + 0x2f0) = CONCAT44(uStack_25cc,local_25d0);
      *(ulong *)(param_1 + 0x2f8) = CONCAT44(uStack_25c4,uStack_25c8);
      *(ulong *)(param_1 + 0x2d0) = CONCAT44(uStack_25ec,local_25f0);
      *(ulong *)(param_1 + 0x2d8) = CONCAT44(uStack_25e4,uStack_25e8);
      *(ulong *)(param_1 + 0x300) = CONCAT44(uStack_25bc,local_25c0);
      *(ulong *)(param_1 + 0x308) = CONCAT44(uStack_25b4,uStack_25b8);
      *(ulong *)(param_1 + 0x310) = CONCAT44(uStack_25ac,local_25b0);
      *(ulong *)(param_1 + 0x318) = CONCAT44(uStack_25a4,uStack_25a8);
      *(ulong *)(param_1 + 800) = CONCAT44(uStack_259c,local_25a0);
      *(ulong *)(param_1 + 0x328) = CONCAT44(uStack_2594,uStack_2598);
      *(ulong *)(param_1 + 0x330) = CONCAT44(uStack_258c,local_2590);
      *(ulong *)(param_1 + 0x338) = CONCAT44(uStack_2584,uStack_2588);
      *(ulong *)(param_1 + 0x340) = CONCAT44(uStack_257c,local_2580);
      *(ulong *)(param_1 + 0x348) = CONCAT44(uStack_2574,uStack_2578);
      *(ulong *)(param_1 + 0x350) = CONCAT44(uStack_256c,local_2570);
      *(ulong *)(param_1 + 0x358) = CONCAT44(uStack_2564,uStack_2568);
      *(ulong *)(param_1 + 0x360) = CONCAT44(uStack_255c,local_2560);
      *(ulong *)(param_1 + 0x368) = CONCAT44(uStack_2554,uStack_2558);
      *(ulong *)(param_1 + 0x370) = CONCAT44(uStack_254c,local_2550);
      *(ulong *)(param_1 + 0x378) = CONCAT44(uStack_2544,uStack_2548);
      *(ulong *)(param_1 + 0x380) = CONCAT44(uStack_253c,local_2540);
      *(ulong *)(param_1 + 0x388) = CONCAT44(uStack_2534,uStack_2538);
      *(ulong *)(param_1 + 0x390) = CONCAT44(uStack_252c,local_2530);
      *(ulong *)(param_1 + 0x398) = CONCAT44(uStack_2524,uStack_2528);
      *(ulong *)(param_1 + 0x3a0) = CONCAT44(uStack_251c,local_2520);
      *(ulong *)(param_1 + 0x3a8) = CONCAT44(uStack_2514,uStack_2518);
      *(ulong *)(param_1 + 0x3b0) = CONCAT44(uStack_250c,local_2510);
      *(ulong *)(param_1 + 0x3b8) = CONCAT44(uStack_2504,uStack_2508);
      *(ulong *)(param_1 + 0x3c0) = CONCAT44(uStack_24fc,local_2500);
      *(ulong *)(param_1 + 0x3c8) = CONCAT44(uStack_24f4,uStack_24f8);
      *(ulong *)(param_1 + 0x3e0) = CONCAT44(uStack_24dc,local_24e0);
      *(ulong *)(param_1 + 1000) = CONCAT44(uStack_24d4,uStack_24d8);
      *(ulong *)(param_1 + 0x3f0) = CONCAT44(uStack_24cc,local_24d0);
      *(ulong *)(param_1 + 0x3f8) = CONCAT44(uStack_24c4,uStack_24c8);
      *(ulong *)(param_1 + 0x3d0) = CONCAT44(uStack_24ec,local_24f0);
      *(ulong *)(param_1 + 0x3d8) = CONCAT44(uStack_24e4,uStack_24e8);
      *(ulong *)(param_1 + 0x400) = CONCAT44(uStack_24bc,local_24c0);
      *(ulong *)(param_1 + 0x408) = CONCAT44(uStack_24b4,uStack_24b8);
      *(ulong *)(param_1 + 0x410) = CONCAT44(uStack_24ac,local_24b0);
      *(ulong *)(param_1 + 0x418) = CONCAT44(uStack_24a4,uStack_24a8);
      *(ulong *)(param_1 + 0x420) = CONCAT44(uStack_249c,local_24a0);
      *(ulong *)(param_1 + 0x428) = CONCAT44(uStack_2494,uStack_2498);
      *(ulong *)(param_1 + 0x430) = CONCAT44(uStack_248c,local_2490);
      *(ulong *)(param_1 + 0x438) = CONCAT44(uStack_2484,uStack_2488);
      *(ulong *)(param_1 + 0x440) = CONCAT44(uStack_247c,local_2480);
      *(ulong *)(param_1 + 0x448) = CONCAT44(uStack_2474,uStack_2478);
      *(ulong *)(param_1 + 0x450) = CONCAT44(uStack_246c,local_2470);
      *(ulong *)(param_1 + 0x458) = CONCAT44(uStack_2464,uStack_2468);
      *(ulong *)(param_1 + 0x460) = CONCAT44(uStack_245c,local_2460);
      *(ulong *)(param_1 + 0x468) = CONCAT44(uStack_2454,uStack_2458);
      *(ulong *)(param_1 + 0x470) = CONCAT44(uStack_244c,local_2450);
      *(ulong *)(param_1 + 0x478) = CONCAT44(uStack_2444,uStack_2448);
      *(ulong *)(param_1 + 0x480) = CONCAT44(uStack_243c,local_2440);
      *(ulong *)(param_1 + 0x488) = CONCAT44(uStack_2434,uStack_2438);
      *(ulong *)(param_1 + 0x490) = CONCAT44(uStack_242c,local_2430);
      *(ulong *)(param_1 + 0x498) = CONCAT44(uStack_2424,uStack_2428);
      *(ulong *)(param_1 + 0x4a0) = CONCAT44(uStack_241c,local_2420);
      *(ulong *)(param_1 + 0x4a8) = CONCAT44(uStack_2414,uStack_2418);
      *(ulong *)(param_1 + 0x4b0) = CONCAT44(uStack_240c,local_2410);
      *(ulong *)(param_1 + 0x4b8) = CONCAT44(uStack_2404,uStack_2408);
      *(ulong *)(param_1 + 0x4c0) = CONCAT44(uStack_23fc,local_2400);
      *(ulong *)(param_1 + 0x4c8) = CONCAT44(uStack_23f4,uStack_23f8);
      *(ulong *)(param_1 + 0x4e0) = CONCAT44(uStack_23dc,local_23e0);
      *(ulong *)(param_1 + 0x4e8) = CONCAT44(uStack_23d4,uStack_23d8);
      *(ulong *)(param_1 + 0x4f0) = CONCAT44(uStack_23cc,local_23d0);
      *(ulong *)(param_1 + 0x4f8) = CONCAT44(uStack_23c4,uStack_23c8);
      *(ulong *)(param_1 + 0x4d0) = CONCAT44(uStack_23ec,local_23f0);
      *(ulong *)(param_1 + 0x4d8) = CONCAT44(uStack_23e4,uStack_23e8);
      *(ulong *)(param_1 + 0x500) = CONCAT44(uStack_23bc,local_23c0);
      *(ulong *)(param_1 + 0x508) = CONCAT44(uStack_23b4,uStack_23b8);
      *(ulong *)(param_1 + 0x510) = CONCAT44(uStack_23ac,local_23b0);
      *(ulong *)(param_1 + 0x518) = CONCAT44(uStack_23a4,uStack_23a8);
      *(ulong *)(param_1 + 0x520) = CONCAT44(uStack_239c,local_23a0);
      *(ulong *)(param_1 + 0x528) = CONCAT44(uStack_2394,uStack_2398);
      *(ulong *)(param_1 + 0x530) = CONCAT44(uStack_238c,local_2390);
      *(ulong *)(param_1 + 0x538) = CONCAT44(uStack_2384,uStack_2388);
      *(ulong *)(param_1 + 0x540) = CONCAT44(uStack_237c,local_2380);
      *(ulong *)(param_1 + 0x548) = CONCAT44(uStack_2374,uStack_2378);
      *(ulong *)(param_1 + 0x550) = CONCAT44(uStack_236c,local_2370);
      *(ulong *)(param_1 + 0x558) = CONCAT44(uStack_2364,uStack_2368);
      *(ulong *)(param_1 + 0x560) = CONCAT44(uStack_235c,local_2360);
      *(ulong *)(param_1 + 0x568) = CONCAT44(uStack_2354,uStack_2358);
      *(ulong *)(param_1 + 0x570) = CONCAT44(uStack_234c,local_2350);
      *(ulong *)(param_1 + 0x578) = CONCAT44(uStack_2344,uStack_2348);
      *(ulong *)(param_1 + 0x580) = CONCAT44(uStack_233c,local_2340);
      *(ulong *)(param_1 + 0x588) = CONCAT44(uStack_2334,uStack_2338);
      *(ulong *)(param_1 + 0x590) = CONCAT44(uStack_232c,local_2330);
      *(ulong *)(param_1 + 0x598) = CONCAT44(uStack_2324,uStack_2328);
      *(ulong *)(param_1 + 0x5a0) = CONCAT44(uStack_231c,local_2320);
      *(ulong *)(param_1 + 0x5a8) = CONCAT44(uStack_2314,uStack_2318);
      *(ulong *)(param_1 + 0x5b0) = CONCAT44(uStack_230c,local_2310);
      *(ulong *)(param_1 + 0x5b8) = CONCAT44(uStack_2304,uStack_2308);
      *(ulong *)(param_1 + 0x5c0) = CONCAT44(uStack_22fc,local_2300);
      *(ulong *)(param_1 + 0x5c8) = CONCAT44(uStack_22f4,uStack_22f8);
      *(ulong *)(param_1 + 0x5d0) = CONCAT44(uStack_22ec,local_22f0);
      *(ulong *)(param_1 + 0x5d8) = CONCAT44(uStack_22e4,uStack_22e8);
      *(ulong *)(param_1 + 0x5e0) = CONCAT44(uStack_22dc,local_22e0);
      *(ulong *)(param_1 + 0x5e8) = CONCAT44(uStack_22d4,uStack_22d8);
      *(ulong *)(param_1 + 0x5f0) = CONCAT44(uStack_22cc,local_22d0);
      *(ulong *)(param_1 + 0x5f8) = CONCAT44(uStack_22c4,uStack_22c8);
      *(undefined8 *)(param_1 + 0x610) = local_22b0._0_8_;
      *(undefined8 *)(param_1 + 0x618) = local_22b0._8_8_;
      *(undefined8 *)(param_1 + 0x620) = local_22a0._0_8_;
      *(undefined8 *)(param_1 + 0x628) = local_22a0._8_8_;
      *(undefined8 *)(param_1 + 0x630) = local_2290._0_8_;
      *(undefined8 *)(param_1 + 0x638) = local_2290._8_8_;
      *(undefined8 *)(param_1 + 0x640) = local_2280._0_8_;
      *(undefined8 *)(param_1 + 0x648) = local_2280._8_8_;
      *(undefined8 *)(param_1 + 0x650) = local_2270._0_8_;
      *(undefined8 *)(param_1 + 0x658) = local_2270._8_8_;
      *(undefined8 *)(param_1 + 0x660) = local_2260._0_8_;
      *(undefined8 *)(param_1 + 0x668) = local_2260._8_8_;
      *(undefined8 *)(param_1 + 0x670) = local_2250._0_8_;
      *(undefined8 *)(param_1 + 0x678) = local_2250._8_8_;
      *(undefined8 *)(param_1 + 0x680) = local_2240._0_8_;
      *(undefined8 *)(param_1 + 0x688) = local_2240._8_8_;
      *(undefined8 *)(param_1 + 0x690) = local_2230._0_8_;
      *(undefined8 *)(param_1 + 0x698) = local_2230._8_8_;
      *(undefined8 *)(param_1 + 0x6a0) = local_2220._0_8_;
      *(undefined8 *)(param_1 + 0x6a8) = local_2220._8_8_;
      *(undefined8 *)(param_1 + 0x6b0) = local_2210._0_8_;
      *(undefined8 *)(param_1 + 0x6b8) = local_2210._8_8_;
      *(undefined8 *)(param_1 + 0x6c0) = local_2200._0_8_;
      *(undefined8 *)(param_1 + 0x6c8) = local_2200._8_8_;
      *(undefined8 *)(param_1 + 0x6d0) = local_21f0._0_8_;
      *(undefined8 *)(param_1 + 0x6d8) = local_21f0._8_8_;
      *(undefined8 *)(param_1 + 0x6e0) = local_21e0._0_8_;
      *(undefined8 *)(param_1 + 0x6e8) = local_21e0._8_8_;
      *(undefined8 *)(param_1 + 0x6f0) = local_21d0._0_8_;
      *(undefined8 *)(param_1 + 0x6f8) = local_21d0._8_8_;
      *(undefined4 *)(param_1 + 0x600) = local_22c0._0_4_;
      *(undefined4 *)(param_1 + 0x604) = local_22c0._4_4_;
      *(undefined4 *)(param_1 + 0x608) = local_22c0._8_4_;
      *(undefined4 *)(param_1 + 0x60c) = local_22c0._12_4_;
      *(undefined8 *)(param_1 + 0x710) = local_21b0._0_8_;
      *(undefined8 *)(param_1 + 0x718) = local_21b0._8_8_;
      *(undefined8 *)(param_1 + 0x720) = local_21a0._0_8_;
      *(undefined8 *)(param_1 + 0x728) = local_21a0._8_8_;
      *(undefined8 *)(param_1 + 0x730) = local_2190._0_8_;
      *(undefined8 *)(param_1 + 0x738) = local_2190._8_8_;
      *(undefined8 *)(param_1 + 0x740) = local_2180._0_8_;
      *(undefined8 *)(param_1 + 0x748) = local_2180._8_8_;
      *(undefined8 *)(param_1 + 0x750) = local_2170._0_8_;
      *(undefined8 *)(param_1 + 0x758) = local_2170._8_8_;
      *(undefined8 *)(param_1 + 0x760) = local_2160._0_8_;
      *(undefined8 *)(param_1 + 0x768) = local_2160._8_8_;
      *(undefined8 *)(param_1 + 0x770) = local_2150._0_8_;
      *(undefined8 *)(param_1 + 0x778) = local_2150._8_8_;
      *(undefined8 *)(param_1 + 0x780) = local_2140._0_8_;
      *(undefined8 *)(param_1 + 0x788) = local_2140._8_8_;
      *(undefined8 *)(param_1 + 0x790) = local_2130._0_8_;
      *(undefined8 *)(param_1 + 0x798) = local_2130._8_8_;
      *(undefined8 *)(param_1 + 0x7a0) = local_2120._0_8_;
      *(undefined8 *)(param_1 + 0x7a8) = local_2120._8_8_;
      *(undefined8 *)(param_1 + 0x7b0) = local_2110._0_8_;
      *(undefined8 *)(param_1 + 0x7b8) = local_2110._8_8_;
      *(undefined8 *)(param_1 + 0x7c0) = local_2100._0_8_;
      *(undefined8 *)(param_1 + 0x7c8) = local_2100._8_8_;
      *(undefined4 *)(param_1 + 0x700) = local_21c0._0_4_;
      *(undefined4 *)(param_1 + 0x704) = local_21c0._4_4_;
      *(undefined4 *)(param_1 + 0x708) = local_21c0._8_4_;
      *(undefined4 *)(param_1 + 0x70c) = local_21c0._12_4_;
      *(undefined8 *)(param_1 + 2000) = local_20f0._0_8_;
      *(undefined8 *)(param_1 + 0x7d8) = local_20f0._8_8_;
      *(undefined8 *)(param_1 + 0x7e0) = local_20e0._0_8_;
      *(undefined8 *)(param_1 + 0x7e8) = local_20e0._8_8_;
      *(undefined8 *)(param_1 + 0x7f0) = local_20d0._0_8_;
      *(undefined8 *)(param_1 + 0x7f8) = local_20d0._8_8_;
      iVar20 = local_21c0._0_4_;
      iVar22 = local_21c0._4_4_;
      iVar23 = local_21c0._8_4_;
      iVar24 = local_21c0._12_4_;
      iVar25 = local_22c0._0_4_;
      iVar27 = local_22c0._4_4_;
      iVar28 = local_22c0._8_4_;
      iVar29 = local_22c0._12_4_;
    } while (pauVar12 + uVar13 * 0x80 != pauVar19);
  }
  if (pauVar12 != (undefined1 (*) [16])local_20c0) {
    embree::alignedFree(pauVar12);
  }
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange const&, unsigned long) */

PrimInfoExtRange *
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
parallel_spatial_find(PrimInfoExtRange *param_1,ulong param_2)

{
  _lambda_embree__range<unsigned_long>const___1_ *p_Var1;
  ulong uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined1 auVar7 [12];
  long lVar8;
  long lVar9;
  long lVar10;
  undefined1 (*pauVar11) [16];
  undefined1 (*pauVar12) [16];
  undefined1 (*pauVar13) [16];
  uint in_ECX;
  long lVar14;
  undefined1 (*in_RDX) [16];
  float *pfVar15;
  ulong uVar16;
  ulong uVar17;
  long in_FS_OFFSET;
  float fVar18;
  int iVar19;
  float fVar21;
  int iVar22;
  float fVar23;
  int iVar24;
  undefined1 auVar20 [16];
  float fVar25;
  int iVar26;
  uint uVar27;
  uint uVar30;
  uint uVar31;
  undefined1 auVar28 [16];
  undefined1 auVar29 [16];
  uint uVar32;
  undefined1 auVar33 [16];
  uint uVar34;
  undefined8 uVar35;
  uint uVar36;
  uint uVar37;
  undefined8 uVar38;
  uint uVar39;
  undefined1 auVar40 [16];
  undefined8 uVar41;
  undefined1 auVar42 [8];
  undefined1 auVar43 [16];
  undefined8 uVar44;
  float fVar45;
  float fVar46;
  undefined1 auVar47 [16];
  undefined1 auVar48 [16];
  uint uVar49;
  uint uVar50;
  uint uVar51;
  undefined1 auVar52 [16];
  undefined1 auVar53 [16];
  undefined1 auVar54 [16];
  undefined1 auVar55 [16];
  uint local_1260;
  uint uStack_125c;
  uint uStack_1258;
  undefined1 local_1250 [16];
  undefined1 local_1240 [16];
  undefined1 local_1230 [16];
  undefined1 local_1220 [16];
  undefined1 local_1210 [16];
  undefined1 local_1200 [16];
  undefined1 local_11f0 [16];
  undefined1 local_11e0 [8];
  undefined8 uStack_11d8;
  ulong local_11d0;
  float *local_11c8;
  ulong local_11c0;
  ulong local_11b8;
  float local_11b0;
  float fStack_11ac;
  float fStack_11a8;
  float fStack_11a4;
  undefined1 local_11a0 [8];
  undefined8 uStack_1198;
  undefined1 local_1190 [16];
  float local_1180 [60];
  float local_1090 [4];
  float local_1080;
  float fStack_107c;
  float fStack_1078;
  float fStack_1074;
  undefined8 local_1070;
  undefined8 uStack_1068;
  undefined8 local_1060;
  undefined8 uStack_1058;
  undefined8 local_1050;
  undefined8 uStack_1048;
  undefined8 local_1040;
  undefined8 uStack_1038;
  undefined8 local_1030;
  undefined8 uStack_1028;
  undefined8 local_1020;
  undefined8 uStack_1018;
  undefined8 local_1010;
  undefined8 uStack_1008;
  undefined8 local_1000;
  undefined8 uStack_ff8;
  undefined8 local_ff0;
  undefined8 uStack_fe8;
  undefined8 local_fe0;
  undefined8 uStack_fd8;
  undefined8 local_fd0;
  undefined8 uStack_fc8;
  undefined8 local_fc0;
  undefined8 uStack_fb8;
  undefined8 local_fb0;
  undefined8 uStack_fa8;
  undefined8 local_fa0;
  undefined8 uStack_f98;
  undefined8 local_f90;
  undefined8 uStack_f88;
  undefined8 local_f80;
  undefined8 uStack_f78;
  undefined8 local_f70;
  undefined8 uStack_f68;
  undefined8 local_f60;
  undefined8 uStack_f58;
  undefined8 local_f50;
  undefined8 uStack_f48;
  undefined8 local_f40;
  undefined8 uStack_f38;
  undefined8 local_f30;
  undefined8 uStack_f28;
  undefined8 local_f20;
  undefined8 uStack_f18;
  undefined8 local_f10;
  undefined8 uStack_f08;
  undefined8 local_f00;
  undefined8 uStack_ef8;
  undefined8 local_ef0;
  undefined8 uStack_ee8;
  undefined8 local_ee0;
  undefined8 uStack_ed8;
  undefined8 local_ed0;
  undefined8 uStack_ec8;
  undefined8 local_ec0;
  undefined8 uStack_eb8;
  undefined8 local_eb0;
  undefined8 uStack_ea8;
  undefined8 local_ea0;
  undefined8 uStack_e98;
  undefined8 local_e90;
  undefined8 uStack_e88;
  undefined8 local_e80;
  undefined8 uStack_e78;
  undefined8 local_e70;
  undefined8 uStack_e68;
  undefined8 local_e60;
  undefined8 uStack_e58;
  undefined8 local_e50;
  undefined8 uStack_e48;
  undefined8 local_e40;
  undefined8 uStack_e38;
  undefined8 local_e30;
  undefined8 uStack_e28;
  undefined8 local_e20;
  undefined8 uStack_e18;
  undefined8 local_e10;
  undefined8 uStack_e08;
  undefined8 local_e00;
  undefined8 uStack_df8;
  undefined8 local_df0;
  undefined8 uStack_de8;
  undefined8 local_de0;
  undefined8 uStack_dd8;
  undefined8 local_dd0;
  undefined8 uStack_dc8;
  undefined8 local_dc0;
  undefined8 uStack_db8;
  undefined8 local_db0;
  undefined8 uStack_da8;
  undefined8 local_da0;
  undefined8 uStack_d98;
  undefined8 local_d90;
  undefined8 uStack_d88;
  undefined8 local_d80;
  undefined8 uStack_d78;
  undefined8 local_d70;
  undefined8 uStack_d68;
  undefined8 local_d60;
  undefined8 uStack_d58;
  undefined8 local_d50;
  undefined8 uStack_d48;
  undefined8 local_d40;
  undefined8 uStack_d38;
  undefined8 local_d30;
  undefined8 uStack_d28;
  undefined8 local_d20;
  undefined8 uStack_d18;
  undefined8 local_d10;
  undefined8 uStack_d08;
  undefined8 local_d00;
  undefined8 uStack_cf8;
  undefined8 local_cf0;
  undefined8 uStack_ce8;
  undefined8 local_ce0;
  undefined8 uStack_cd8;
  undefined8 local_cd0;
  undefined8 uStack_cc8;
  undefined8 local_cc0;
  undefined8 uStack_cb8;
  undefined8 local_cb0;
  undefined8 uStack_ca8;
  undefined8 local_ca0;
  undefined8 uStack_c98;
  undefined8 local_c90;
  undefined8 uStack_c88;
  undefined8 local_c80;
  undefined8 uStack_c78;
  undefined8 local_c70;
  undefined8 uStack_c68;
  undefined8 local_c60;
  undefined8 uStack_c58;
  undefined8 local_c50;
  undefined8 uStack_c48;
  undefined8 local_c40;
  undefined8 uStack_c38;
  undefined8 local_c30;
  undefined8 uStack_c28;
  undefined8 local_c20;
  undefined8 uStack_c18;
  undefined8 local_c10;
  undefined8 uStack_c08;
  undefined8 local_c00;
  undefined8 uStack_bf8;
  undefined8 local_bf0;
  undefined8 uStack_be8;
  undefined8 local_be0;
  undefined8 uStack_bd8;
  undefined8 local_bd0;
  undefined8 uStack_bc8;
  undefined8 local_bc0;
  undefined8 uStack_bb8;
  undefined8 local_bb0;
  undefined8 uStack_ba8;
  undefined8 local_ba0;
  undefined8 uStack_b98;
  undefined8 local_b90;
  undefined8 uStack_b88;
  undefined8 local_b80;
  undefined8 uStack_b78;
  undefined8 local_b70;
  undefined8 uStack_b68;
  undefined8 local_b60;
  undefined8 uStack_b58;
  undefined8 local_b50;
  undefined8 uStack_b48;
  undefined8 local_b40;
  undefined8 uStack_b38;
  undefined8 local_b30;
  undefined8 uStack_b28;
  undefined8 local_b20;
  undefined8 uStack_b18;
  undefined8 local_b10;
  undefined8 uStack_b08;
  undefined8 local_b00;
  undefined8 uStack_af8;
  undefined8 local_af0;
  undefined8 uStack_ae8;
  float local_ae0;
  float fStack_adc;
  float fStack_ad8;
  float fStack_ad4;
  undefined8 local_ad0;
  undefined8 uStack_ac8;
  undefined8 local_ac0;
  undefined8 uStack_ab8;
  undefined8 local_ab0;
  undefined8 uStack_aa8;
  undefined8 local_aa0;
  undefined8 uStack_a98;
  undefined8 local_a90;
  undefined8 uStack_a88;
  undefined1 local_a80 [16];
  undefined1 local_a70 [16];
  undefined1 local_a60 [16];
  undefined1 local_a50 [16];
  undefined1 local_a40 [16];
  undefined1 local_a30 [16];
  undefined1 local_a20 [16];
  undefined1 local_a10 [16];
  undefined1 local_a00 [16];
  undefined1 local_9f0 [16];
  undefined1 local_9e0 [16];
  undefined1 local_9d0 [16];
  undefined1 local_9c0 [16];
  undefined1 local_9b0 [16];
  undefined1 local_9a0 [16];
  undefined1 local_990 [16];
  undefined1 local_980 [16];
  undefined1 local_970 [16];
  undefined1 local_960 [16];
  undefined1 local_950 [16];
  undefined1 local_940 [16];
  undefined1 local_930 [16];
  undefined1 local_920 [16];
  undefined1 local_910 [16];
  undefined1 local_900 [16];
  undefined1 local_8f0 [16];
  undefined1 local_8e0 [16];
  undefined1 local_8d0 [16];
  undefined1 local_8c0 [16];
  undefined1 local_8b0 [16];
  undefined1 local_8a0 [16];
  undefined1 local_890 [16];
  _lambda_embree__range<unsigned_long>const___1_ local_880 [4];
  _lambda_embree__range<unsigned_long>const___1_ a_Stack_87c [4];
  _lambda_embree__range<unsigned_long>const___1_ a_Stack_878 [4];
  _lambda_embree__range<unsigned_long>const___1_ a_Stack_874 [4];
  undefined8 local_870;
  undefined8 uStack_868;
  undefined8 local_860;
  undefined8 uStack_858;
  undefined8 local_850;
  undefined8 uStack_848;
  undefined8 local_840;
  undefined8 uStack_838;
  undefined8 local_830;
  undefined8 uStack_828;
  undefined8 local_820;
  undefined8 uStack_818;
  undefined8 local_810;
  undefined8 uStack_808;
  undefined8 local_800;
  undefined8 uStack_7f8;
  undefined8 local_7f0;
  undefined8 uStack_7e8;
  undefined8 local_7e0;
  undefined8 uStack_7d8;
  undefined8 local_7d0;
  undefined8 uStack_7c8;
  undefined8 local_7c0;
  undefined8 uStack_7b8;
  undefined8 local_7b0;
  undefined8 uStack_7a8;
  undefined8 local_7a0;
  undefined8 uStack_798;
  undefined8 local_790;
  undefined8 uStack_788;
  undefined8 local_780;
  undefined8 uStack_778;
  undefined8 local_770;
  undefined8 uStack_768;
  undefined8 local_760;
  undefined8 uStack_758;
  undefined8 local_750;
  undefined8 uStack_748;
  undefined8 local_740;
  undefined8 uStack_738;
  undefined8 local_730;
  undefined8 uStack_728;
  undefined8 local_720;
  undefined8 uStack_718;
  undefined8 local_710;
  undefined8 uStack_708;
  undefined8 local_700;
  undefined8 uStack_6f8;
  undefined8 local_6f0;
  undefined8 uStack_6e8;
  undefined8 local_6e0;
  undefined8 uStack_6d8;
  undefined8 local_6d0;
  undefined8 uStack_6c8;
  undefined8 local_6c0;
  undefined8 uStack_6b8;
  undefined8 local_6b0;
  undefined8 uStack_6a8;
  undefined8 local_6a0;
  undefined8 uStack_698;
  undefined8 local_690;
  undefined8 uStack_688;
  undefined8 local_680;
  undefined8 uStack_678;
  undefined8 local_670;
  undefined8 uStack_668;
  undefined8 local_660;
  undefined8 uStack_658;
  undefined8 local_650;
  undefined8 uStack_648;
  undefined8 local_640;
  undefined8 uStack_638;
  undefined8 local_630;
  undefined8 uStack_628;
  undefined8 local_620;
  undefined8 uStack_618;
  undefined8 local_610;
  undefined8 uStack_608;
  undefined8 local_600;
  undefined8 uStack_5f8;
  undefined8 local_5f0;
  undefined8 uStack_5e8;
  undefined8 local_5e0;
  undefined8 uStack_5d8;
  undefined8 local_5d0;
  undefined8 uStack_5c8;
  undefined8 local_5c0;
  undefined8 uStack_5b8;
  undefined8 local_5b0;
  undefined8 uStack_5a8;
  undefined8 local_5a0;
  undefined8 uStack_598;
  undefined8 local_590;
  undefined8 uStack_588;
  undefined8 local_580;
  undefined8 uStack_578;
  undefined8 local_570;
  undefined8 uStack_568;
  undefined8 local_560;
  undefined8 uStack_558;
  undefined8 local_550;
  undefined8 uStack_548;
  undefined8 local_540;
  undefined8 uStack_538;
  undefined8 local_530;
  undefined8 uStack_528;
  undefined8 local_520;
  undefined8 uStack_518;
  undefined8 local_510;
  undefined8 uStack_508;
  undefined8 local_500;
  undefined8 uStack_4f8;
  undefined8 local_4f0;
  undefined8 uStack_4e8;
  undefined8 local_4e0;
  undefined8 uStack_4d8;
  undefined8 local_4d0;
  undefined8 uStack_4c8;
  undefined8 local_4c0;
  undefined8 uStack_4b8;
  undefined8 local_4b0;
  undefined8 uStack_4a8;
  undefined8 local_4a0;
  undefined8 uStack_498;
  undefined8 local_490;
  undefined8 uStack_488;
  undefined8 local_480;
  undefined8 uStack_478;
  undefined8 local_470;
  undefined8 uStack_468;
  undefined8 local_460;
  undefined8 uStack_458;
  undefined8 local_450;
  undefined8 uStack_448;
  undefined8 local_440;
  undefined8 uStack_438;
  undefined8 local_430;
  undefined8 uStack_428;
  undefined8 local_420;
  undefined8 uStack_418;
  undefined8 local_410;
  undefined8 uStack_408;
  undefined8 local_400;
  undefined8 uStack_3f8;
  undefined8 local_3f0;
  undefined8 uStack_3e8;
  undefined8 local_3e0;
  undefined8 uStack_3d8;
  undefined8 local_3d0;
  undefined8 uStack_3c8;
  undefined8 local_3c0;
  undefined8 uStack_3b8;
  undefined8 local_3b0;
  undefined8 uStack_3a8;
  undefined8 local_3a0;
  undefined8 uStack_398;
  undefined8 local_390;
  undefined8 uStack_388;
  undefined8 local_380;
  undefined8 uStack_378;
  undefined8 local_370;
  undefined8 uStack_368;
  undefined8 local_360;
  undefined8 uStack_358;
  undefined8 local_350;
  undefined8 uStack_348;
  undefined8 local_340;
  undefined8 uStack_338;
  undefined8 local_330;
  undefined8 uStack_328;
  undefined8 local_320;
  undefined8 uStack_318;
  undefined8 local_310;
  undefined8 uStack_308;
  undefined8 local_300;
  undefined8 uStack_2f8;
  undefined8 local_2f0;
  undefined8 uStack_2e8;
  undefined8 local_2e0;
  undefined8 uStack_2d8;
  undefined8 local_2d0;
  undefined8 uStack_2c8;
  undefined8 local_2c0;
  undefined8 uStack_2b8;
  undefined8 local_2b0;
  undefined8 uStack_2a8;
  undefined8 local_2a0;
  undefined8 uStack_298;
  undefined8 local_290;
  undefined8 uStack_288;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_980 = (undefined1  [16])0x0;
  local_a80 = (undefined1  [16])0x0;
  local_11c8 = &local_11b0;
  local_970 = (undefined1  [16])0x0;
  local_a70 = (undefined1  [16])0x0;
  local_960 = (undefined1  [16])0x0;
  local_a60 = (undefined1  [16])0x0;
  local_1040 = CONCAT44(_LC3,_LC3);
  uStack_1038 = CONCAT44(_LC3,_LC3);
  local_1030 = CONCAT44(_LC1,_LC1);
  uStack_1028 = CONCAT44(_LC1,_LC1);
  local_1060 = CONCAT44(_LC3,_LC3);
  uStack_1058 = CONCAT44(_LC3,_LC3);
  local_1050 = CONCAT44(_LC1,_LC1);
  uStack_1048 = CONCAT44(_LC1,_LC1);
  fStack_107c = _LC3;
  local_1080 = _LC3;
  fStack_1074 = _LC3;
  fStack_1078 = _LC3;
  local_1070 = CONCAT44(_LC1,_LC1);
  uStack_1068 = CONCAT44(_LC1,_LC1);
  local_fe0 = CONCAT44(_LC3,_LC3);
  uStack_fd8 = CONCAT44(_LC3,_LC3);
  local_fd0 = CONCAT44(_LC1,_LC1);
  uStack_fc8 = CONCAT44(_LC1,_LC1);
  local_1000 = CONCAT44(_LC3,_LC3);
  uStack_ff8 = CONCAT44(_LC3,_LC3);
  local_ff0 = CONCAT44(_LC1,_LC1);
  uStack_fe8 = CONCAT44(_LC1,_LC1);
  local_1020 = CONCAT44(_LC3,_LC3);
  uStack_1018 = CONCAT44(_LC3,_LC3);
  local_1010 = CONCAT44(_LC1,_LC1);
  uStack_1008 = CONCAT44(_LC1,_LC1);
  local_f80 = CONCAT44(_LC3,_LC3);
  uStack_f78 = CONCAT44(_LC3,_LC3);
  local_f70 = CONCAT44(_LC1,_LC1);
  uStack_f68 = CONCAT44(_LC1,_LC1);
  local_fa0 = CONCAT44(_LC3,_LC3);
  uStack_f98 = CONCAT44(_LC3,_LC3);
  local_f90 = CONCAT44(_LC1,_LC1);
  uStack_f88 = CONCAT44(_LC1,_LC1);
  local_fc0 = CONCAT44(_LC3,_LC3);
  uStack_fb8 = CONCAT44(_LC3,_LC3);
  local_fb0 = CONCAT44(_LC1,_LC1);
  uStack_fa8 = CONCAT44(_LC1,_LC1);
  local_f20 = CONCAT44(_LC3,_LC3);
  uStack_f18 = CONCAT44(_LC3,_LC3);
  local_f10 = CONCAT44(_LC1,_LC1);
  uStack_f08 = CONCAT44(_LC1,_LC1);
  local_f40 = CONCAT44(_LC3,_LC3);
  uStack_f38 = CONCAT44(_LC3,_LC3);
  local_f30 = CONCAT44(_LC1,_LC1);
  uStack_f28 = CONCAT44(_LC1,_LC1);
  local_f60 = CONCAT44(_LC3,_LC3);
  uStack_f58 = CONCAT44(_LC3,_LC3);
  local_950 = (undefined1  [16])0x0;
  local_a50 = (undefined1  [16])0x0;
  local_940 = (undefined1  [16])0x0;
  local_a40 = (undefined1  [16])0x0;
  local_930 = (undefined1  [16])0x0;
  local_a30 = (undefined1  [16])0x0;
  local_920 = (undefined1  [16])0x0;
  local_a20 = (undefined1  [16])0x0;
  local_f50 = CONCAT44(_LC1,_LC1);
  uStack_f48 = CONCAT44(_LC1,_LC1);
  local_ec0 = CONCAT44(_LC3,_LC3);
  uStack_eb8 = CONCAT44(_LC3,_LC3);
  local_eb0 = CONCAT44(_LC1,_LC1);
  uStack_ea8 = CONCAT44(_LC1,_LC1);
  local_ee0 = CONCAT44(_LC3,_LC3);
  uStack_ed8 = CONCAT44(_LC3,_LC3);
  local_ed0 = CONCAT44(_LC1,_LC1);
  uStack_ec8 = CONCAT44(_LC1,_LC1);
  local_f00 = CONCAT44(_LC3,_LC3);
  uStack_ef8 = CONCAT44(_LC3,_LC3);
  local_ef0 = CONCAT44(_LC1,_LC1);
  uStack_ee8 = CONCAT44(_LC1,_LC1);
  local_e60 = CONCAT44(_LC3,_LC3);
  uStack_e58 = CONCAT44(_LC3,_LC3);
  local_e50 = CONCAT44(_LC1,_LC1);
  uStack_e48 = CONCAT44(_LC1,_LC1);
  local_e80 = CONCAT44(_LC3,_LC3);
  uStack_e78 = CONCAT44(_LC3,_LC3);
  local_e70 = CONCAT44(_LC1,_LC1);
  uStack_e68 = CONCAT44(_LC1,_LC1);
  local_ea0 = CONCAT44(_LC3,_LC3);
  uStack_e98 = CONCAT44(_LC3,_LC3);
  local_e90 = CONCAT44(_LC1,_LC1);
  uStack_e88 = CONCAT44(_LC1,_LC1);
  local_e00 = CONCAT44(_LC3,_LC3);
  uStack_df8 = CONCAT44(_LC3,_LC3);
  local_df0 = CONCAT44(_LC1,_LC1);
  uStack_de8 = CONCAT44(_LC1,_LC1);
  local_e20 = CONCAT44(_LC3,_LC3);
  uStack_e18 = CONCAT44(_LC3,_LC3);
  local_e10 = CONCAT44(_LC1,_LC1);
  uStack_e08 = CONCAT44(_LC1,_LC1);
  local_e40 = CONCAT44(_LC3,_LC3);
  uStack_e38 = CONCAT44(_LC3,_LC3);
  local_e30 = CONCAT44(_LC1,_LC1);
  uStack_e28 = CONCAT44(_LC1,_LC1);
  local_da0 = CONCAT44(_LC3,_LC3);
  uStack_d98 = CONCAT44(_LC3,_LC3);
  local_d90 = CONCAT44(_LC1,_LC1);
  uStack_d88 = CONCAT44(_LC1,_LC1);
  local_dc0 = CONCAT44(_LC3,_LC3);
  uStack_db8 = CONCAT44(_LC3,_LC3);
  local_db0 = CONCAT44(_LC1,_LC1);
  uStack_da8 = CONCAT44(_LC1,_LC1);
  local_de0 = CONCAT44(_LC3,_LC3);
  uStack_dd8 = CONCAT44(_LC3,_LC3);
  local_dd0 = CONCAT44(_LC1,_LC1);
  uStack_dc8 = CONCAT44(_LC1,_LC1);
  local_910 = (undefined1  [16])0x0;
  local_a10 = (undefined1  [16])0x0;
  local_900 = (undefined1  [16])0x0;
  local_a00 = (undefined1  [16])0x0;
  local_8f0 = (undefined1  [16])0x0;
  local_9f0 = (undefined1  [16])0x0;
  local_8e0 = (undefined1  [16])0x0;
  local_9e0 = (undefined1  [16])0x0;
  local_d40 = CONCAT44(_LC3,_LC3);
  uStack_d38 = CONCAT44(_LC3,_LC3);
  local_d30 = CONCAT44(_LC1,_LC1);
  uStack_d28 = CONCAT44(_LC1,_LC1);
  local_d60 = CONCAT44(_LC3,_LC3);
  uStack_d58 = CONCAT44(_LC3,_LC3);
  local_d50 = CONCAT44(_LC1,_LC1);
  uStack_d48 = CONCAT44(_LC1,_LC1);
  local_d80 = CONCAT44(_LC3,_LC3);
  uStack_d78 = CONCAT44(_LC3,_LC3);
  local_d70 = CONCAT44(_LC1,_LC1);
  uStack_d68 = CONCAT44(_LC1,_LC1);
  local_ce0 = CONCAT44(_LC3,_LC3);
  uStack_cd8 = CONCAT44(_LC3,_LC3);
  local_cd0 = CONCAT44(_LC1,_LC1);
  uStack_cc8 = CONCAT44(_LC1,_LC1);
  local_d00 = CONCAT44(_LC3,_LC3);
  uStack_cf8 = CONCAT44(_LC3,_LC3);
  local_cf0 = CONCAT44(_LC1,_LC1);
  uStack_ce8 = CONCAT44(_LC1,_LC1);
  local_d20 = CONCAT44(_LC3,_LC3);
  uStack_d18 = CONCAT44(_LC3,_LC3);
  local_d10 = CONCAT44(_LC1,_LC1);
  uStack_d08 = CONCAT44(_LC1,_LC1);
  local_c80 = CONCAT44(_LC3,_LC3);
  uStack_c78 = CONCAT44(_LC3,_LC3);
  local_c70 = CONCAT44(_LC1,_LC1);
  uStack_c68 = CONCAT44(_LC1,_LC1);
  local_ca0 = CONCAT44(_LC3,_LC3);
  uStack_c98 = CONCAT44(_LC3,_LC3);
  local_c90 = CONCAT44(_LC1,_LC1);
  uStack_c88 = CONCAT44(_LC1,_LC1);
  local_cc0 = CONCAT44(_LC3,_LC3);
  uStack_cb8 = CONCAT44(_LC3,_LC3);
  local_cb0 = CONCAT44(_LC1,_LC1);
  uStack_ca8 = CONCAT44(_LC1,_LC1);
  local_c20 = CONCAT44(_LC3,_LC3);
  uStack_c18 = CONCAT44(_LC3,_LC3);
  local_c10 = CONCAT44(_LC1,_LC1);
  uStack_c08 = CONCAT44(_LC1,_LC1);
  local_c40 = CONCAT44(_LC3,_LC3);
  uStack_c38 = CONCAT44(_LC3,_LC3);
  local_c30 = CONCAT44(_LC1,_LC1);
  uStack_c28 = CONCAT44(_LC1,_LC1);
  local_c60 = CONCAT44(_LC3,_LC3);
  uStack_c58 = CONCAT44(_LC3,_LC3);
  local_c50 = CONCAT44(_LC1,_LC1);
  uStack_c48 = CONCAT44(_LC1,_LC1);
  local_8d0 = (undefined1  [16])0x0;
  local_9d0 = (undefined1  [16])0x0;
  local_8c0 = (undefined1  [16])0x0;
  local_9c0 = (undefined1  [16])0x0;
  local_8b0 = (undefined1  [16])0x0;
  local_9b0 = (undefined1  [16])0x0;
  local_8a0 = (undefined1  [16])0x0;
  local_9a0 = (undefined1  [16])0x0;
  local_890 = (undefined1  [16])0x0;
  local_bc0 = CONCAT44(_LC3,_LC3);
  uStack_bb8 = CONCAT44(_LC3,_LC3);
  local_bb0 = CONCAT44(_LC1,_LC1);
  uStack_ba8 = CONCAT44(_LC1,_LC1);
  local_be0 = CONCAT44(_LC3,_LC3);
  uStack_bd8 = CONCAT44(_LC3,_LC3);
  local_bd0 = CONCAT44(_LC1,_LC1);
  uStack_bc8 = CONCAT44(_LC1,_LC1);
  local_c00 = CONCAT44(_LC3,_LC3);
  uStack_bf8 = CONCAT44(_LC3,_LC3);
  local_bf0 = CONCAT44(_LC1,_LC1);
  uStack_be8 = CONCAT44(_LC1,_LC1);
  local_b60 = CONCAT44(_LC3,_LC3);
  uStack_b58 = CONCAT44(_LC3,_LC3);
  local_b50 = CONCAT44(_LC1,_LC1);
  uStack_b48 = CONCAT44(_LC1,_LC1);
  local_b80 = CONCAT44(_LC3,_LC3);
  uStack_b78 = CONCAT44(_LC3,_LC3);
  local_b70 = CONCAT44(_LC1,_LC1);
  uStack_b68 = CONCAT44(_LC1,_LC1);
  local_ba0 = CONCAT44(_LC3,_LC3);
  uStack_b98 = CONCAT44(_LC3,_LC3);
  local_b90 = CONCAT44(_LC1,_LC1);
  uStack_b88 = CONCAT44(_LC1,_LC1);
  local_b00 = CONCAT44(_LC3,_LC3);
  uStack_af8 = CONCAT44(_LC3,_LC3);
  local_af0 = CONCAT44(_LC1,_LC1);
  uStack_ae8 = CONCAT44(_LC1,_LC1);
  local_b20 = CONCAT44(_LC3,_LC3);
  uStack_b18 = CONCAT44(_LC3,_LC3);
  local_b10 = CONCAT44(_LC1,_LC1);
  uStack_b08 = CONCAT44(_LC1,_LC1);
  local_b40 = CONCAT44(_LC3,_LC3);
  uStack_b38 = CONCAT44(_LC3,_LC3);
  local_b30 = CONCAT44(_LC1,_LC1);
  uStack_b28 = CONCAT44(_LC1,_LC1);
  local_aa0 = CONCAT44(_LC3,_LC3);
  uStack_a98 = CONCAT44(_LC3,_LC3);
  local_a90 = CONCAT44(_LC1,_LC1);
  uStack_a88 = CONCAT44(_LC1,_LC1);
  local_ac0 = CONCAT44(_LC3,_LC3);
  uStack_ab8 = CONCAT44(_LC3,_LC3);
  local_ab0 = CONCAT44(_LC1,_LC1);
  uStack_aa8 = CONCAT44(_LC1,_LC1);
  fStack_adc = _LC3;
  local_ae0 = _LC3;
  fStack_ad4 = _LC3;
  fStack_ad8 = _LC3;
  local_ad0 = CONCAT44(_LC1,_LC1);
  uStack_ac8 = CONCAT44(_LC1,_LC1);
  local_990 = (undefined1  [16])0x0;
  local_11b0 = *(float *)*in_RDX;
  fStack_11ac = *(float *)(*in_RDX + 4);
  fStack_11a8 = *(float *)(*in_RDX + 8);
  auVar7 = *(undefined1 (*) [12])*in_RDX;
  fStack_11a4 = *(float *)(*in_RDX + 0xc);
  auVar47 = *in_RDX;
  uVar17 = *(ulong *)(in_RDX[4] + 8);
  auVar28._0_4_ = *(uint *)in_RDX[1] & _LC6;
  auVar28._4_4_ = *(uint *)(in_RDX[1] + 4) & _LC6;
  auVar28._8_4_ = *(uint *)(in_RDX[1] + 8) & _LC6;
  auVar28._12_4_ = *(uint *)(in_RDX[1] + 0xc) & _LC6;
  auVar20._0_4_ = _LC6 & (uint)local_11b0;
  auVar20._4_4_ = _LC6 & (uint)fStack_11ac;
  auVar20._8_4_ = _LC6 & (uint)fStack_11a8;
  auVar20._12_4_ = _LC6 & (uint)fStack_11a4;
  auVar20 = maxps(auVar20,auVar28);
  fVar18 = auVar20._0_4_ * _LC8;
  fVar21 = auVar20._4_4_ * _LC8;
  auVar33._4_4_ = fVar21;
  auVar33._0_4_ = fVar18;
  fVar23 = auVar20._8_4_ * _LC8;
  fVar25 = auVar20._12_4_ * _LC8;
  uVar2 = *(ulong *)in_RDX[4];
  auVar29._0_4_ = *(float *)in_RDX[1] - local_11b0;
  auVar29._4_4_ = *(float *)(in_RDX[1] + 4) - fStack_11ac;
  auVar29._8_4_ = *(float *)(in_RDX[1] + 8) - fStack_11a8;
  auVar29._12_4_ = *(float *)(in_RDX[1] + 0xc) - fStack_11a4;
  uVar16 = (uVar17 + 0x3ff) - uVar2 >> 10;
  auVar33._8_4_ = fVar23;
  auVar33._12_4_ = fVar25;
  auVar20 = maxps(auVar33,auVar29);
  auVar53._4_4_ = _LC10;
  auVar53._0_4_ = _LC10;
  auVar53._8_4_ = _LC10;
  auVar53._12_4_ = _LC10;
  auVar20 = divps(auVar53,auVar20);
  auVar40._0_8_ =
       (undefined1  [8])
       CONCAT44(~-(uint)(auVar29._4_4_ <= fVar21) & auVar20._4_4_,
                ~-(uint)(auVar29._0_4_ <= fVar18) & auVar20._0_4_);
  auVar40._8_4_ = ~-(uint)(auVar29._8_4_ <= fVar23) & auVar20._8_4_;
  auVar40._12_4_ = ~-(uint)(auVar29._12_4_ <= fVar25) & auVar20._12_4_;
  auVar43._4_4_ = _LC12;
  auVar43._0_4_ = _LC12;
  auVar43._8_4_ = _LC12;
  auVar43._12_4_ = _LC12;
  auVar20 = divps(auVar43,auVar40);
  local_11d0 = param_2;
  _local_11a0 = auVar40;
  local_1190 = auVar20;
  if (uVar16 == 1) {
    local_11c0 = uVar2;
    local_11b8 = uVar17;
    parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::
    {lambda(embree::range<unsigned_long>const&)#1}::operator()(local_880,(range *)&local_11d0);
    local_1250._4_12_ = _UNK_0013f634;
    local_1250._0_4_ = _LC3;
    local_11e0 = auVar20._0_8_;
    uStack_11d8 = auVar20._8_8_;
    local_11f0._8_8_ = auVar40._8_8_;
    local_1200._0_8_ = auVar7._0_8_;
    local_1200._8_8_ = auVar47._8_8_;
    auVar42 = local_11e0;
    uVar44 = uStack_11d8;
    uVar41 = local_11f0._8_8_;
    uVar35 = local_1200._0_8_;
    uVar38 = local_1200._8_8_;
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::parallel_spatial_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&,embree::sse2::SpatialBinInfo<16ul,embree::PrimRef>const&)_2_>
              ((ulong)local_880,uVar16,uVar2,uVar17,(SpatialBinInfo_conflict *)0x400,
               (_lambda_embree__range<unsigned_long>_const___1_ *)&local_1080,
               (_lambda_embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const__embree__sse2__SpatialBinInfo<16ul,embree::PrimRef>_const___2_
                *)&local_11d0);
    uVar35 = CONCAT44(fStack_11ac,local_11b0);
    uVar38 = CONCAT44(fStack_11a4,fStack_11a8);
    local_1250._4_12_ = _UNK_0013f634;
    local_1250._0_4_ = _LC3;
    auVar42 = (undefined1  [8])local_1190._0_8_;
    uVar44 = local_1190._8_8_;
    auVar40._0_8_ = local_11a0;
    uVar41 = uStack_1198;
  }
  lVar14 = 0xf0;
  auVar54._4_4_ = _UNK_0013f624;
  auVar54._0_4_ = _LC1;
  auVar54._8_4_ = _UNK_0013f628;
  auVar54._12_4_ = _UNK_0013f62c;
  auVar52._4_4_ = _UNK_0013f624;
  auVar52._0_4_ = _LC1;
  auVar52._8_4_ = _UNK_0013f628;
  auVar52._12_4_ = _UNK_0013f62c;
  _local_1080 = _local_880;
  _fStack_1078 = _a_Stack_878;
  auVar48._4_4_ = _UNK_0013f624;
  auVar48._0_4_ = _LC1;
  auVar48._8_4_ = _UNK_0013f628;
  auVar48._12_4_ = _UNK_0013f62c;
  iVar19 = 0;
  iVar22 = 0;
  iVar24 = 0;
  iVar26 = 0;
  local_1070 = local_870;
  uStack_1068 = uStack_868;
  local_1060 = local_860;
  uStack_1058 = uStack_858;
  local_1050 = local_850;
  uStack_1048 = uStack_848;
  local_1040 = local_840;
  uStack_1038 = uStack_838;
  local_1030 = local_830;
  uStack_1028 = uStack_828;
  local_1020 = local_820;
  uStack_1018 = uStack_818;
  local_1010 = local_810;
  uStack_1008 = uStack_808;
  local_1000 = local_800;
  uStack_ff8 = uStack_7f8;
  local_ff0 = local_7f0;
  uStack_fe8 = uStack_7e8;
  local_fe0 = local_7e0;
  uStack_fd8 = uStack_7d8;
  local_fd0 = local_7d0;
  uStack_fc8 = uStack_7c8;
  local_fc0 = local_7c0;
  uStack_fb8 = uStack_7b8;
  local_fb0 = local_7b0;
  uStack_fa8 = uStack_7a8;
  local_fa0 = local_7a0;
  uStack_f98 = uStack_798;
  local_f90 = local_790;
  uStack_f88 = uStack_788;
  local_f80 = local_780;
  uStack_f78 = uStack_778;
  local_f70 = local_770;
  uStack_f68 = uStack_768;
  local_f60 = local_760;
  uStack_f58 = uStack_758;
  local_f50 = local_750;
  uStack_f48 = uStack_748;
  local_f40 = local_740;
  uStack_f38 = uStack_738;
  local_f30 = local_730;
  uStack_f28 = uStack_728;
  local_f20 = local_720;
  uStack_f18 = uStack_718;
  local_f10 = local_710;
  uStack_f08 = uStack_708;
  local_f00 = local_700;
  uStack_ef8 = uStack_6f8;
  local_ef0 = local_6f0;
  uStack_ee8 = uStack_6e8;
  local_ee0 = local_6e0;
  uStack_ed8 = uStack_6d8;
  local_ed0 = local_6d0;
  uStack_ec8 = uStack_6c8;
  local_ec0 = local_6c0;
  uStack_eb8 = uStack_6b8;
  local_eb0 = local_6b0;
  uStack_ea8 = uStack_6a8;
  local_ea0 = local_6a0;
  uStack_e98 = uStack_698;
  local_e90 = local_690;
  uStack_e88 = uStack_688;
  local_e80 = local_680;
  uStack_e78 = uStack_678;
  local_e70 = local_670;
  uStack_e68 = uStack_668;
  local_e60 = local_660;
  uStack_e58 = uStack_658;
  local_e50 = local_650;
  uStack_e48 = uStack_648;
  local_e40 = local_640;
  uStack_e38 = uStack_638;
  local_e30 = local_630;
  uStack_e28 = uStack_628;
  local_e20 = local_620;
  uStack_e18 = uStack_618;
  local_e10 = local_610;
  uStack_e08 = uStack_608;
  local_e00 = local_600;
  uStack_df8 = uStack_5f8;
  local_df0 = local_5f0;
  uStack_de8 = uStack_5e8;
  local_de0 = local_5e0;
  uStack_dd8 = uStack_5d8;
  local_dd0 = local_5d0;
  uStack_dc8 = uStack_5c8;
  local_dc0 = local_5c0;
  uStack_db8 = uStack_5b8;
  local_db0 = local_5b0;
  uStack_da8 = uStack_5a8;
  local_da0 = local_5a0;
  uStack_d98 = uStack_598;
  local_d90 = local_590;
  uStack_d88 = uStack_588;
  local_d80 = local_580;
  uStack_d78 = uStack_578;
  local_d70 = local_570;
  uStack_d68 = uStack_568;
  local_d60 = local_560;
  uStack_d58 = uStack_558;
  local_d50 = local_550;
  uStack_d48 = uStack_548;
  local_d40 = local_540;
  uStack_d38 = uStack_538;
  local_d30 = local_530;
  uStack_d28 = uStack_528;
  local_d20 = local_520;
  uStack_d18 = uStack_518;
  local_d10 = local_510;
  uStack_d08 = uStack_508;
  local_d00 = local_500;
  uStack_cf8 = uStack_4f8;
  local_cf0 = local_4f0;
  uStack_ce8 = uStack_4e8;
  local_ce0 = local_4e0;
  uStack_cd8 = uStack_4d8;
  local_cd0 = local_4d0;
  uStack_cc8 = uStack_4c8;
  local_cc0 = local_4c0;
  uStack_cb8 = uStack_4b8;
  local_cb0 = local_4b0;
  uStack_ca8 = uStack_4a8;
  local_ca0 = local_4a0;
  uStack_c98 = uStack_498;
  local_c90 = local_490;
  uStack_c88 = uStack_488;
  local_c80 = local_480;
  uStack_c78 = uStack_478;
  local_c70 = local_470;
  uStack_c68 = uStack_468;
  local_c60 = local_460;
  uStack_c58 = uStack_458;
  local_c50 = local_450;
  uStack_c48 = uStack_448;
  local_c40 = local_440;
  uStack_c38 = uStack_438;
  local_c30 = local_430;
  uStack_c28 = uStack_428;
  local_c20 = local_420;
  uStack_c18 = uStack_418;
  local_c10 = local_410;
  uStack_c08 = uStack_408;
  local_c00 = local_400;
  uStack_bf8 = uStack_3f8;
  local_bf0 = local_3f0;
  uStack_be8 = uStack_3e8;
  local_be0 = local_3e0;
  uStack_bd8 = uStack_3d8;
  local_bd0 = local_3d0;
  uStack_bc8 = uStack_3c8;
  local_bc0 = local_3c0;
  uStack_bb8 = uStack_3b8;
  local_bb0 = local_3b0;
  uStack_ba8 = uStack_3a8;
  local_ba0 = local_3a0;
  uStack_b98 = uStack_398;
  local_b90 = local_390;
  uStack_b88 = uStack_388;
  local_b80 = local_380;
  uStack_b78 = uStack_378;
  local_b70 = local_370;
  uStack_b68 = uStack_368;
  local_b60 = local_360;
  uStack_b58 = uStack_358;
  local_b50 = local_350;
  uStack_b48 = uStack_348;
  local_b40 = local_340;
  uStack_b38 = uStack_338;
  local_b30 = local_330;
  uStack_b28 = uStack_328;
  local_b20 = local_320;
  uStack_b18 = uStack_318;
  local_b10 = local_310;
  uStack_b08 = uStack_308;
  local_b00 = local_300;
  uStack_af8 = uStack_2f8;
  local_af0 = local_2f0;
  uStack_ae8 = uStack_2e8;
  _local_ae0 = local_2e0;
  _fStack_ad8 = uStack_2d8;
  local_ad0 = local_2d0;
  uStack_ac8 = uStack_2c8;
  local_ac0 = local_2c0;
  uStack_ab8 = uStack_2b8;
  local_ab0 = local_2b0;
  uStack_aa8 = uStack_2a8;
  local_aa0 = local_2a0;
  uStack_a98 = uStack_298;
  local_a90 = local_290;
  uStack_a88 = uStack_288;
  pauVar12 = (undefined1 (*) [16])&local_ae0;
  pfVar15 = local_1090;
  auVar47 = local_1250;
  auVar20 = local_1250;
  auVar53 = local_1250;
  do {
    pauVar11 = pauVar12;
    auVar48 = maxps(auVar48,pauVar11[1]);
    auVar47 = minps(auVar47,*pauVar11);
    pauVar12 = pauVar11 + -6;
    iVar3 = *(int *)(local_980 + lVar14);
    iVar4 = *(int *)(local_980 + lVar14 + 4);
    iVar5 = *(int *)(local_980 + lVar14 + 8);
    iVar6 = *(int *)(local_980 + lVar14 + 0xc);
    auVar52 = maxps(auVar52,pauVar11[3]);
    pfVar15[3] = 0.0;
    auVar20 = minps(auVar20,pauVar11[2]);
    auVar54 = maxps(auVar54,pauVar11[5]);
    iVar19 = iVar3 + iVar19;
    iVar22 = iVar4 + iVar22;
    iVar24 = iVar5 + iVar24;
    iVar26 = iVar6 + iVar26;
    auVar53 = minps(auVar53,pauVar11[4]);
    *(int *)(local_880 + lVar14) = iVar19;
    *(int *)(local_880 + lVar14 + 4) = iVar22;
    *(int *)(a_Stack_87c + lVar14 + 4) = iVar24;
    *(int *)(a_Stack_87c + lVar14 + 8) = iVar26;
    lVar14 = lVar14 + -0x10;
    fVar18 = auVar48._4_4_ - auVar47._4_4_;
    fVar23 = auVar48._8_4_ - auVar47._8_4_;
    fVar21 = auVar52._4_4_ - auVar20._4_4_;
    fVar25 = auVar52._8_4_ - auVar20._8_4_;
    *pfVar15 = (fVar18 + fVar23) * (auVar48._0_4_ - auVar47._0_4_) + fVar18 * fVar23;
    fVar18 = auVar54._4_4_ - auVar53._4_4_;
    fVar23 = auVar54._8_4_ - auVar53._8_4_;
    pfVar15[1] = (fVar21 + fVar25) * (auVar52._0_4_ - auVar20._0_4_) + fVar21 * fVar25;
    pfVar15[2] = (fVar18 + fVar23) * (auVar54._0_4_ - auVar53._0_4_) + fVar18 * fVar23;
    pfVar15 = pfVar15 + -4;
  } while ((undefined1 (*) [16])&local_1080 != pauVar12);
  auVar55._4_4_ = _UNK_0013f624;
  auVar55._0_4_ = _LC1;
  auVar55._8_4_ = _UNK_0013f628;
  auVar55._12_4_ = _UNK_0013f62c;
  uVar17 = (ulong)in_ECX;
  iVar19 = (1 << ((byte)in_ECX & 0x1f)) + -1;
  lVar14 = 0x10;
  auVar47._4_4_ = _UNK_0013f624;
  auVar47._0_4_ = _LC1;
  auVar47._8_4_ = _UNK_0013f628;
  auVar47._12_4_ = _UNK_0013f62c;
  local_1240._4_4_ = _UNK_0013f624;
  local_1240._0_4_ = _LC1;
  local_1240._8_4_ = _UNK_0013f628;
  local_1240._12_4_ = _UNK_0013f62c;
  uVar49 = 0;
  uVar50 = 0;
  uVar51 = 0;
  local_1200 = (undefined1  [16])0x0;
  local_11f0 = (undefined1  [16])0x0;
  local_1260 = __LC22;
  uStack_125c = _UNK_0013f644;
  uStack_1258 = _UNK_0013f648;
  local_1210 = (undefined1  [16])0x0;
  local_1230 = local_1250;
  local_1220 = local_1250;
  _local_11e0 = local_1250;
  do {
    pauVar13 = pauVar12 + 6;
    local_1230 = minps(local_1230,pauVar12[2]);
    local_1240 = maxps(local_1240,pauVar12[3]);
    auVar47 = maxps(auVar47,pauVar12[5]);
    auVar55 = maxps(auVar55,pauVar12[1]);
    local_1220 = minps(local_1220,*pauVar12);
    local_1210._0_4_ = local_1210._0_4_ + *(int *)((long)&local_a90 + lVar14);
    local_1210._4_4_ = local_1210._4_4_ + *(int *)((long)&local_a90 + lVar14 + 4);
    local_1210._8_4_ = local_1210._8_4_ + *(int *)(local_a80 + lVar14 + -8);
    local_1210._12_4_ = local_1210._12_4_ + *(int *)(local_a80 + lVar14 + -4);
    fVar23 = local_1240._4_4_ - local_1230._4_4_;
    fVar25 = local_1240._8_4_ - local_1230._8_4_;
    local_1250 = minps(local_1250,pauVar12[4]);
    fVar45 = auVar55._4_4_ - local_1220._4_4_;
    fVar46 = auVar55._8_4_ - local_1220._8_4_;
    fVar18 = auVar47._4_4_ - local_1250._4_4_;
    fVar21 = auVar47._8_4_ - local_1250._8_4_;
    fVar18 = (fVar18 + fVar21) * (auVar47._0_4_ - local_1250._0_4_) + fVar18 * fVar21;
    uVar34 = (uint)(iVar19 + local_1210._0_4_) >> uVar17;
    uVar36 = (uint)(iVar19 + local_1210._4_4_) >> uVar17;
    uVar37 = (uint)(iVar19 + local_1210._8_4_) >> uVar17;
    uVar39 = (uint)(iVar19 + local_1210._12_4_) >> uVar17;
    uVar27 = (uint)(iVar19 + *(int *)(local_880 + lVar14)) >> uVar17;
    uVar30 = (uint)(iVar19 + *(int *)(local_880 + lVar14 + 4)) >> uVar17;
    uVar31 = (uint)(iVar19 + *(int *)(a_Stack_87c + lVar14 + 4)) >> uVar17;
    uVar32 = (uint)(iVar19 + *(int *)(a_Stack_87c + lVar14 + 8)) >> uVar17;
    fVar21 = ((fVar45 + fVar46) * (auVar55._0_4_ - local_1220._0_4_) + fVar45 * fVar46) *
             ((float)(int)(uVar34 & _LC6) + (float)((int)uVar34 >> 0x1f & __LC21)) +
             ((float)(int)(uVar27 & _LC6) + (float)((int)uVar27 >> 0x1f & __LC21)) *
             *(float *)((long)local_1180 + lVar14);
    fVar23 = ((fVar23 + fVar25) * (local_1240._0_4_ - local_1230._0_4_) + fVar23 * fVar25) *
             ((float)(int)(uVar36 & _UNK_0013f694) + (float)((int)uVar36 >> 0x1f & _UNK_0013f6a4)) +
             ((float)(int)(uVar30 & _UNK_0013f694) + (float)((int)uVar30 >> 0x1f & _UNK_0013f6a4)) *
             *(float *)((long)local_1180 + lVar14 + 4);
    fVar25 = fVar18 * ((float)(int)(uVar37 & _UNK_0013f698) +
                      (float)((int)uVar37 >> 0x1f & _UNK_0013f6a8)) +
             ((float)(int)(uVar31 & _UNK_0013f698) + (float)((int)uVar31 >> 0x1f & _UNK_0013f6a8)) *
             *(float *)((long)local_1180 + lVar14 + 8);
    fVar18 = fVar18 * ((float)(int)(uVar39 & _UNK_0013f69c) +
                      (float)((int)uVar39 >> 0x1f & _UNK_0013f6ac)) +
             ((float)(int)(uVar32 & _UNK_0013f69c) + (float)((int)uVar32 >> 0x1f & _UNK_0013f6ac)) *
             *(float *)((long)local_1180 + lVar14 + 0xc);
    uVar27 = -(uint)(fVar21 < (float)local_11e0._0_4_);
    uVar30 = -(uint)(fVar23 < (float)local_11e0._4_4_);
    uVar31 = -(uint)(fVar25 < (float)uStack_11d8);
    uVar32 = -(uint)(fVar18 < uStack_11d8._4_4_);
    uVar49 = local_1260 & uVar27 | ~uVar27 & uVar49;
    uVar50 = uStack_125c & uVar30 | ~uVar30 & uVar50;
    uVar51 = uStack_1258 & uVar31 | ~uVar31 & uVar51;
    local_11e0._0_4_ = (uint)fVar21 & uVar27 | ~uVar27 & local_11e0._0_4_;
    local_11e0._4_4_ = (uint)fVar23 & uVar30 | ~uVar30 & local_11e0._4_4_;
    uStack_11d8._0_4_ = (float)((uint)fVar25 & uVar31 | ~uVar31 & (uint)(float)uStack_11d8);
    uStack_11d8._4_4_ = (float)((uint)fVar18 & uVar32 | ~uVar32 & (uint)uStack_11d8._4_4_);
    local_11f0._0_4_ = local_1210._0_4_ & uVar27 | ~uVar27 & local_11f0._0_4_;
    local_11f0._4_4_ = local_1210._4_4_ & uVar30 | ~uVar30 & local_11f0._4_4_;
    local_11f0._8_4_ = local_1210._8_4_ & uVar31 | ~uVar31 & local_11f0._8_4_;
    p_Var1 = local_880 + lVar14;
    lVar8 = lVar14 + 4;
    lVar9 = lVar14 + 4;
    lVar10 = lVar14 + 8;
    lVar14 = lVar14 + 0x10;
    local_11f0._12_4_ = local_1210._12_4_ & uVar32 | ~uVar32 & local_11f0._12_4_;
    local_1200._0_4_ = uVar27 & *(uint *)p_Var1 | ~uVar27 & local_1200._0_4_;
    local_1200._4_4_ = uVar30 & *(uint *)(local_880 + lVar8) | ~uVar30 & local_1200._4_4_;
    local_1200._8_4_ = uVar31 & *(uint *)(a_Stack_87c + lVar9) | ~uVar31 & local_1200._8_4_;
    local_1200._12_4_ = uVar32 & *(uint *)(a_Stack_87c + lVar10) | ~uVar32 & local_1200._12_4_;
    local_1260 = local_1260 + __LC22;
    uStack_125c = uStack_125c + _UNK_0013f644;
    uStack_1258 = uStack_1258 + _UNK_0013f648;
    pauVar12 = pauVar13;
  } while (pauVar11 + 0x54 != pauVar13);
  if (((float)local_11a0._0_4_ == 0.0) || (_LC23 < (float)local_11e0._0_4_)) {
    local_1200._0_4_ = 0;
    local_11f0._0_4_ = 0;
    uVar49 = 0;
    iVar19 = -1;
    local_11e0._0_4_ = _LC3;
  }
  else if (uVar49 == 0) {
    local_1200._0_4_ = 0;
    uVar49 = 0;
    iVar19 = -1;
    local_11f0._0_4_ = 0;
    local_11e0._0_4_ = _LC3;
  }
  else {
    iVar19 = 0;
  }
  if ((((float)local_11a0._4_4_ == 0.0) || ((float)local_11e0._0_4_ <= (float)local_11e0._4_4_)) ||
     (uVar50 == 0)) {
    iVar22 = iVar19;
    if ((float)uStack_1198 != 0.0) goto LAB_0012ee3f;
LAB_0012ee90:
    if (iVar19 == -1) {
      *(undefined8 *)(param_1 + 0x20) = uVar35;
      *(undefined8 *)(param_1 + 0x28) = uVar38;
      *(undefined8 *)param_1 = 0xffffffff7f800000;
      *(undefined8 *)(param_1 + 8) = 0xffffffff00000000;
      *(undefined8 *)(param_1 + 0x10) = 0x3f800000ffffffff;
      *(undefined1 (*) [8])(param_1 + 0x30) = auVar40._0_8_;
      *(undefined8 *)(param_1 + 0x38) = uVar41;
      *(undefined1 (*) [8])(param_1 + 0x40) = auVar42;
      *(undefined8 *)(param_1 + 0x48) = uVar44;
      goto LAB_0012ee07;
    }
  }
  else {
    iVar19 = 1;
    local_11e0._0_4_ = local_11e0._4_4_;
    local_1200._0_4_ = local_1200._4_4_;
    local_11f0._0_4_ = local_11f0._4_4_;
    uVar49 = uVar50;
    iVar22 = 1;
    if ((float)uStack_1198 != 0.0) {
LAB_0012ee3f:
      iVar19 = iVar22;
      if (((float)local_11e0._0_4_ <= (float)uStack_11d8) || (uVar51 == 0)) goto LAB_0012ee90;
      iVar19 = 2;
      local_11e0._0_4_ = (float)uStack_11d8;
      local_1200._0_4_ = local_1200._8_4_;
      local_11f0._0_4_ = local_11f0._8_4_;
      uVar49 = uVar51;
    }
  }
  *(int *)(param_1 + 4) = iVar19;
  *(uint *)(param_1 + 8) = uVar49;
  *(undefined4 *)(param_1 + 0xc) = local_11f0._0_4_;
  *(undefined4 *)(param_1 + 0x14) = 0x3f800000;
  *(undefined4 *)param_1 = local_11e0._0_4_;
  *(undefined4 *)(param_1 + 0x10) = local_1200._0_4_;
  *(undefined8 *)(param_1 + 0x20) = uVar35;
  *(undefined8 *)(param_1 + 0x28) = uVar38;
  *(undefined1 (*) [8])(param_1 + 0x30) = auVar40._0_8_;
  *(undefined8 *)(param_1 + 0x38) = uVar41;
  *(undefined1 (*) [8])(param_1 + 0x40) = auVar42;
  *(undefined8 *)(param_1 + 0x48) = uVar44;
LAB_0012ee07:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return param_1;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>::find(embree::sse2::PrimInfoExtRange const&, unsigned long) */

HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul> *
__thiscall
embree::sse2::
HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::find
          (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
           *this,PrimInfoExtRange *param_1,ulong param_2)

{
  float *pfVar1;
  undefined1 auVar2 [16];
  uint uVar3;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  undefined4 uVar4;
  uint uVar5;
  long lVar6;
  long in_FS_OFFSET;
  float fVar7;
  float fVar8;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  undefined1 auVar9 [16];
  undefined1 auVar14 [16];
  float fVar15;
  float fVar16;
  undefined1 auVar17 [16];
  float fVar18;
  undefined1 local_108 [16];
  undefined1 local_f8 [16];
  undefined1 local_e8 [16];
  undefined1 local_d8 [16];
  float local_c8;
  undefined4 local_c4;
  undefined4 local_c0;
  undefined4 local_bc;
  undefined8 local_b8;
  undefined8 local_a8;
  undefined8 uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  float local_88;
  undefined8 local_84;
  int local_7c;
  int local_78;
  undefined4 local_74;
  undefined8 local_68;
  undefined8 uStack_60;
  undefined8 local_58;
  undefined8 uStack_50;
  undefined8 local_48;
  undefined8 uStack_40;
  long local_30;
  
  lVar6 = *(long *)(param_2 + 0x48);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if ((ulong)(lVar6 - *(long *)(param_2 + 0x40)) < 0xc00) {
    sequential_object_find((PrimInfoExtRange *)&local_c8,*(ulong *)param_1,(SplitInfoT *)param_2);
    fVar7 = local_c8;
    uVar4 = extraout_EDX;
    if (*(long *)(param_2 + 0x50) != lVar6) {
LAB_0012f06e:
      auVar14 = maxps(local_108,local_e8);
      auVar9 = minps(local_f8,local_d8);
      pfVar1 = *(float **)(param_1 + 0x10);
      auVar17._4_4_ = -(uint)(auVar14._4_4_ <= auVar9._4_4_);
      auVar17._0_4_ = -(uint)(auVar14._0_4_ <= auVar9._0_4_);
      auVar17._8_4_ = -(uint)(auVar14._8_4_ <= auVar9._8_4_);
      auVar17._12_4_ = -(uint)(auVar14._12_4_ <= auVar9._12_4_);
      uVar5 = movmskps(uVar4,auVar17);
      auVar2._4_4_ = -(uint)(pfVar1[1] <= pfVar1[5]);
      auVar2._0_4_ = -(uint)(*pfVar1 <= pfVar1[4]);
      auVar2._8_4_ = -(uint)(pfVar1[2] <= pfVar1[6]);
      auVar2._12_4_ = -(uint)(pfVar1[3] <= pfVar1[7]);
      uVar3 = movmskps((int)pfVar1,auVar2);
      uVar3 = uVar3 & 7;
      local_c8 = fVar7;
      if ((~uVar5 & 7) == 0) {
        fVar10 = auVar9._4_4_ - auVar14._4_4_;
        fVar12 = auVar9._8_4_ - auVar14._8_4_;
        fVar15 = 0.0;
        fVar10 = (fVar10 + fVar12) * (auVar9._0_4_ - auVar14._0_4_) + fVar10 * fVar12;
        fVar10 = fVar10 + fVar10;
        if (uVar3 == 7) {
LAB_0012f119:
          fVar15 = pfVar1[5] - pfVar1[1];
          fVar12 = pfVar1[6] - pfVar1[2];
          fVar15 = (fVar15 + fVar12) * (pfVar1[4] - *pfVar1) + fVar15 * fVar12;
          fVar15 = (fVar15 + fVar15) * __LC51;
        }
        if (fVar15 <= fVar10) {
          fVar15 = *(float *)param_2;
          fVar12 = *(float *)(param_2 + 4);
          fVar18 = *(float *)(param_2 + 8);
          fVar8 = *(float *)(param_2 + 0x10);
          fVar11 = *(float *)(param_2 + 0x14);
          fVar13 = *(float *)(param_2 + 0x18);
          auVar14._4_4_ = -(uint)(fVar12 <= fVar11);
          auVar14._0_4_ = -(uint)(fVar15 <= fVar8);
          auVar14._8_4_ = -(uint)(fVar18 <= fVar13);
          auVar14._12_4_ = -(uint)(*(float *)(param_2 + 0xc) <= *(float *)(param_2 + 0x1c));
          uVar3 = movmskps(uVar3,auVar14);
          fVar16 = 0.0;
          if ((~uVar3 & 7) == 0) {
LAB_0012f16c:
            fVar15 = ((fVar11 - fVar12) + (fVar13 - fVar18)) * (fVar8 - fVar15) +
                     (fVar11 - fVar12) * (fVar13 - fVar18);
            fVar16 = (fVar15 + fVar15) * __LC52;
          }
          if (fVar16 <= fVar10) goto LAB_0012f1a4;
        }
      }
      else {
        if (uVar3 == 7) {
          fVar10 = 0.0;
          goto LAB_0012f119;
        }
        fVar15 = *(float *)param_2;
        fVar12 = *(float *)(param_2 + 4);
        fVar18 = *(float *)(param_2 + 8);
        fVar8 = *(float *)(param_2 + 0x10);
        fVar11 = *(float *)(param_2 + 0x14);
        fVar13 = *(float *)(param_2 + 0x18);
        auVar9._4_4_ = -(uint)(fVar12 <= fVar11);
        auVar9._0_4_ = -(uint)(fVar15 <= fVar8);
        auVar9._8_4_ = -(uint)(fVar18 <= fVar13);
        auVar9._12_4_ = -(uint)(*(float *)(param_2 + 0xc) <= *(float *)(param_2 + 0x1c));
        uVar3 = movmskps(uVar3,auVar9);
        fVar10 = 0.0;
        if ((~uVar3 & 7) == 0) goto LAB_0012f16c;
LAB_0012f1a4:
        if ((ulong)(lVar6 - *(long *)(param_2 + 0x40)) < 0xc00) {
          sequential_spatial_find((PrimInfoExtRange *)&local_88,*(ulong *)param_1);
        }
        else {
          parallel_spatial_find((PrimInfoExtRange *)&local_88,(ulong)param_1);
        }
        if ((local_88 < _LC30 * fVar7) &&
           ((ulong)(((long)(local_7c + local_78) + *(long *)(param_2 + 0x40)) -
                   *(long *)(param_2 + 0x48)) <=
            (ulong)(*(long *)(param_2 + 0x50) - *(long *)(param_2 + 0x48)))) {
          this[0x50] = (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                        )0x1;
          *(int *)(this + 0xc) = local_7c;
          *(undefined8 *)(this + 0x20) = local_68;
          *(undefined8 *)(this + 0x28) = uStack_60;
          *(undefined8 *)(this + 4) = local_84;
          *(undefined8 *)(this + 0x30) = local_58;
          *(undefined8 *)(this + 0x38) = uStack_50;
          *(int *)(this + 0x10) = local_78;
          *(float *)(this + 0x54) = local_88;
          *(float *)this = local_88;
          *(undefined4 *)(this + 0x14) = local_74;
          *(undefined8 *)(this + 0x40) = local_48;
          *(undefined8 *)(this + 0x48) = uStack_40;
          goto LAB_0012f01e;
        }
      }
    }
  }
  else {
    parallel_object_find((PrimInfoExtRange *)&local_c8,(ulong)param_1,(SplitInfoT *)param_2);
    lVar6 = *(long *)(param_2 + 0x48);
    fVar7 = local_c8;
    uVar4 = extraout_EDX_00;
    if (*(long *)(param_2 + 0x50) != lVar6) goto LAB_0012f06e;
  }
  this[0x50] = (HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                )0x0;
  *(float *)(this + 0x54) = local_c8;
  *(undefined4 *)(this + 4) = local_c4;
  *(float *)this = local_c8;
  *(undefined4 *)(this + 8) = local_c0;
  *(undefined8 *)(this + 0x20) = local_a8;
  *(undefined8 *)(this + 0x28) = uStack_a0;
  *(undefined4 *)(this + 0xc) = local_bc;
  *(undefined8 *)(this + 0x30) = local_98;
  *(undefined8 *)(this + 0x38) = uStack_90;
  *(undefined8 *)(this + 0x10) = local_b8;
LAB_0012f01e:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::recurse(ulong *param_1,long *param_2,char param_3)

{
  undefined1 *puVar1;
  SplitInfoT *pSVar2;
  ulong *puVar3;
  MutexSys *pMVar4;
  undefined8 *puVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined4 uVar9;
  undefined8 *puVar10;
  float *pfVar11;
  long lVar12;
  undefined8 uVar13;
  uint uVar14;
  ulong uVar15;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  undefined4 uVar16;
  uint uVar17;
  long lVar18;
  ulong uVar19;
  undefined1 *puVar20;
  ulong uVar21;
  undefined8 *puVar22;
  undefined8 *puVar23;
  long *plVar24;
  long in_FS_OFFSET;
  float fVar25;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar30;
  float fVar31;
  float fVar32;
  float fVar33;
  undefined1 auVar29 [16];
  undefined1 auVar34 [16];
  float fVar35;
  undefined1 auVar36 [16];
  float fVar38;
  undefined1 auVar37 [16];
  FastAllocator *in_stack_00000008;
  MutexSys *in_stack_00000010;
  FastAllocator *local_b18;
  long *local_b08;
  MutexSys *local_b00 [2];
  undefined1 local_af0 [16];
  undefined1 local_ae0 [16];
  undefined1 local_ad0 [16];
  undefined1 local_ac0 [16];
  undefined8 local_ab0;
  undefined8 uStack_aa8;
  undefined8 local_aa0;
  undefined8 uStack_a98;
  long local_a90;
  undefined8 uStack_a88;
  undefined8 local_a80;
  undefined8 uStack_a78;
  long local_a70;
  long local_a68;
  undefined8 local_a60;
  undefined8 local_a50;
  undefined8 uStack_a48;
  undefined4 local_a40;
  undefined4 uStack_a3c;
  undefined4 uStack_a38;
  undefined4 uStack_a34;
  undefined4 local_a30;
  undefined4 uStack_a2c;
  undefined4 uStack_a28;
  undefined4 uStack_a24;
  undefined4 local_a20;
  undefined4 uStack_a1c;
  undefined4 uStack_a18;
  undefined4 uStack_a14;
  long local_a10;
  long local_a08;
  undefined8 local_a00;
  MutexSys *local_9f0;
  undefined1 local_9e8;
  ulong *local_9e0;
  long lStack_9d8;
  long local_9d0;
  long lStack_9c8;
  ulong *local_9c0;
  long lStack_9b8;
  long local_9b0;
  long lStack_9a8;
  long local_9a0;
  long lStack_998;
  long local_990;
  MutexSys *local_980;
  long *local_978;
  ulong *local_970;
  long lStack_968;
  long local_960;
  long lStack_958;
  undefined8 local_950;
  undefined8 uStack_948;
  undefined8 local_940;
  undefined8 uStack_938;
  undefined8 local_930;
  undefined8 uStack_928;
  long local_920;
  float local_910;
  undefined4 local_90c;
  undefined4 local_908;
  int local_904;
  undefined8 local_900;
  undefined8 local_8f0;
  undefined8 uStack_8e8;
  undefined8 local_8e0;
  undefined8 uStack_8d8;
  float local_8d0 [3];
  int local_8c4;
  int local_8c0;
  undefined4 local_8bc;
  undefined8 local_8b0;
  undefined8 uStack_8a8;
  undefined8 local_8a0;
  undefined8 uStack_898;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
  local_880 [84];
  float local_82c;
  float local_800 [3];
  int local_7f4;
  undefined8 local_7f0;
  undefined8 uStack_7e8;
  undefined8 local_7e0;
  undefined8 uStack_7d8;
  undefined8 local_7d0;
  undefined8 uStack_7c8;
  undefined1 local_7b0;
  float local_7ac;
  long local_750;
  undefined1 local_748 [8];
  undefined8 local_740;
  undefined8 uStack_738;
  undefined8 local_730;
  undefined8 uStack_728;
  long local_720 [4];
  long local_700;
  long local_6f8;
  undefined8 local_6f0;
  long local_6e0;
  undefined1 local_6d8;
  undefined8 local_6d0;
  undefined8 uStack_6c8;
  undefined4 local_6c0;
  undefined4 uStack_6bc;
  undefined4 uStack_6b8;
  undefined4 uStack_6b4;
  undefined4 local_6b0;
  undefined4 uStack_6ac;
  undefined4 uStack_6a8;
  undefined4 uStack_6a4;
  undefined4 local_6a0;
  undefined4 uStack_69c;
  undefined4 uStack_698;
  undefined4 uStack_694;
  long local_690;
  long local_688;
  undefined8 local_680;
  long local_670;
  undefined1 local_668;
  undefined4 local_660;
  undefined4 uStack_65c;
  undefined4 uStack_658;
  undefined4 local_650;
  undefined4 uStack_64c;
  undefined4 uStack_648;
  long local_620;
  long lStack_618;
  undefined1 local_5f8;
  undefined4 uStack_5f0;
  undefined4 uStack_5ec;
  undefined4 uStack_5e8;
  undefined4 uStack_5e0;
  undefined4 uStack_5dc;
  undefined4 uStack_5d8;
  long local_5b0;
  long local_5a8;
  undefined1 local_588;
  undefined4 uStack_580;
  undefined4 uStack_57c;
  undefined4 uStack_578;
  undefined4 uStack_570;
  undefined4 uStack_56c;
  undefined4 uStack_568;
  long local_540;
  long local_538;
  undefined1 local_518;
  undefined4 uStack_510;
  undefined4 uStack_50c;
  undefined4 uStack_508;
  undefined4 uStack_500;
  undefined4 uStack_4fc;
  undefined4 uStack_4f8;
  long local_4d0;
  long local_4c8;
  undefined1 local_4a8;
  undefined4 uStack_4a0;
  undefined4 uStack_49c;
  undefined4 uStack_498;
  undefined4 uStack_490;
  undefined4 uStack_48c;
  undefined4 uStack_488;
  long local_460;
  long local_458;
  undefined1 local_438;
  undefined4 uStack_430;
  undefined4 uStack_42c;
  undefined4 uStack_428;
  undefined4 uStack_420;
  undefined4 uStack_41c;
  undefined4 uStack_418;
  long local_3f0;
  long local_3e8;
  undefined1 local_3c8;
  undefined4 uStack_3c0;
  undefined4 uStack_3bc;
  undefined4 uStack_3b8;
  undefined4 uStack_3b0;
  undefined4 uStack_3ac;
  undefined4 uStack_3a8;
  long local_380;
  long local_378;
  undefined1 local_358;
  undefined4 uStack_350;
  undefined4 uStack_34c;
  undefined4 uStack_348;
  undefined4 uStack_340;
  undefined4 uStack_33c;
  undefined4 uStack_338;
  long local_310;
  long local_308;
  undefined1 local_2e8;
  undefined4 uStack_2e0;
  undefined4 uStack_2dc;
  undefined4 uStack_2d8;
  undefined4 uStack_2d0;
  undefined4 uStack_2cc;
  undefined4 uStack_2c8;
  long local_2a0;
  long local_298;
  undefined1 local_278;
  undefined4 uStack_270;
  undefined4 uStack_26c;
  undefined4 uStack_268;
  undefined4 uStack_260;
  undefined4 uStack_25c;
  undefined4 uStack_258;
  long local_230;
  long local_228;
  undefined1 local_208;
  undefined4 uStack_200;
  undefined4 uStack_1fc;
  undefined4 uStack_1f8;
  undefined4 uStack_1f0;
  undefined4 uStack_1ec;
  undefined4 uStack_1e8;
  long local_1c0;
  long local_1b8;
  undefined1 local_198;
  undefined4 uStack_190;
  undefined4 uStack_18c;
  undefined4 uStack_188;
  undefined4 uStack_180;
  undefined4 uStack_17c;
  undefined4 uStack_178;
  long local_150;
  long local_148;
  undefined1 local_128;
  undefined4 uStack_120;
  undefined4 uStack_11c;
  undefined4 uStack_118;
  undefined4 uStack_110;
  undefined4 uStack_10c;
  undefined4 uStack_108;
  long local_e0;
  long local_d8;
  undefined1 local_b8;
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined4 uStack_a8;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 uStack_98;
  long local_70;
  long local_68;
  undefined1 auStack_50 [8];
  long local_48;
  
  lVar12 = lRam000000000012fae3;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_b18 = in_stack_00000008;
  if (in_stack_00000008 == (FastAllocator *)0x0) {
    local_b18 = *(FastAllocator **)param_1[10];
    in_stack_00000010 = *(MutexSys **)(in_FS_OFFSET + lRam000000000012fae3);
    if (in_stack_00000010 == (MutexSys *)0x0) {
      in_stack_00000010 = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
      embree::MutexSys::MutexSys(in_stack_00000010);
      *(undefined8 *)(in_stack_00000010 + 8) = 0;
      *(MutexSys **)(in_stack_00000010 + 0x40) = in_stack_00000010;
      *(undefined8 *)(in_stack_00000010 + 0x48) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x50) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x58) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x60) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x68) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x70) = 0;
      *(MutexSys **)(in_stack_00000010 + 0x80) = in_stack_00000010;
      *(undefined8 *)(in_stack_00000010 + 0x88) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x90) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x98) = 0;
      *(undefined8 *)(in_stack_00000010 + 0xa0) = 0;
      *(undefined8 *)(in_stack_00000010 + 0xa8) = 0;
      *(undefined8 *)(in_stack_00000010 + 0xb0) = 0;
      *(MutexSys **)(in_FS_OFFSET + lVar12) = in_stack_00000010;
      embree::MutexSys::lock();
      local_980 = in_stack_00000010;
      if (__MutexSys == _preBuild) {
        std::
        vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
        ::
        _M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>
                  ((vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
                    *)&FastAllocator::s_thread_local_allocators,__MutexSys,&local_980);
        pMVar4 = local_980;
        if (local_980 != (MutexSys *)0x0) {
          embree::MutexSys::~MutexSys(local_980);
          embree::alignedFree(pMVar4);
        }
      }
      else {
        *__MutexSys = in_stack_00000010;
        __MutexSys = __MutexSys + 1;
      }
      embree::MutexSys::unlock();
    }
    in_stack_00000010 = in_stack_00000010 + 0x40;
  }
  if ((param_3 != '\0') && ((ulong)(param_2[0xb] - param_2[10]) <= param_1[6])) {
    if ((code *)**(undefined8 **)param_1[0x10] == Scene::BuildProgressMonitorInterface::operator())
    {
      embree::Scene::progressMonitor((double)(ulong)(param_2[0xb] - param_2[10]));
    }
    else {
      (*(code *)**(undefined8 **)param_1[0x10])();
    }
  }
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::find
            (local_880,(PrimInfoExtRange *)param_1[9],(ulong)(param_2 + 2));
  lVar12 = param_2[10];
  uVar21 = param_2[0xb] - lVar12;
  if (((param_1[3] < uVar21) && (*param_2 + 8U < param_1[1])) &&
     ((param_1[4] < uVar21 ||
      (fVar27 = *(float *)((long)param_2 + 0x24) - *(float *)((long)param_2 + 0x14),
      fVar27 = (*(float *)(param_2 + 4) - *(float *)(param_2 + 2)) *
               (fVar27 + (*(float *)(param_2 + 5) - *(float *)(param_2 + 3))) +
               fVar27 * (*(float *)(param_2 + 5) - *(float *)(param_2 + 3)),
      fVar27 * *(float *)(param_1 + 5) + *(float *)((long)param_1 + 0x2c) * local_82c <
      (float)((uVar21 - 1) + (1L << ((byte)param_1[2] & 0x3f)) >> ((byte)param_1[2] & 0x3f)) *
      fVar27 * *(float *)((long)param_1 + 0x2c))))) {
    HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::split
              ((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                *)param_1[9],(Split2 *)local_880,(PrimInfoExtRange *)(param_2 + 2),
               (PrimInfoExtRange *)&local_ab0,(PrimInfoExtRange *)&local_a50);
    uVar9 = _LC3;
    fVar27 = _LC1;
    local_748[0] = 0;
    local_6d8 = 0;
    local_740 = local_ab0;
    uStack_738 = uStack_aa8;
    local_720[2] = local_a80;
    local_720[3] = uStack_a78;
    local_730 = local_aa0;
    uStack_728 = uStack_a98;
    local_750 = *param_2 + 1;
    local_720[0] = local_a90;
    local_720[1] = uStack_a88;
    local_690 = local_a10;
    local_6d0 = local_a50;
    uStack_6c8 = uStack_a48;
    local_700 = local_a70;
    local_6f8 = local_a68;
    local_6f0 = local_a60;
    local_688 = local_a08;
    local_6c0 = local_a40;
    uStack_6bc = uStack_a3c;
    uStack_6b8 = uStack_a38;
    uStack_6b4 = uStack_a34;
    local_6b0 = local_a30;
    uStack_6ac = uStack_a2c;
    uStack_6a8 = uStack_a28;
    uStack_6a4 = uStack_a24;
    local_6a0 = local_a20;
    uStack_69c = uStack_a1c;
    uStack_698 = uStack_a18;
    uStack_694 = uStack_a14;
    local_680 = local_a00;
    local_6e0 = local_750;
    if (*param_1 < 3) {
      lVar12 = 0xe0;
      uVar21 = 2;
    }
    else {
      uVar21 = 2;
      plVar24 = &local_670;
      do {
        uVar15 = 0;
        uVar19 = 0xffffffffffffffff;
        pfVar11 = (float *)&local_740;
        lVar12 = local_6f8;
        lVar18 = local_700;
        fVar26 = _LC1;
        while( true ) {
          if ((param_1[3] < (ulong)(lVar12 - lVar18)) &&
             (fVar25 = (pfVar11[4] - *pfVar11) *
                       ((pfVar11[5] - pfVar11[1]) + (pfVar11[6] - pfVar11[2])) +
                       (pfVar11[5] - pfVar11[1]) * (pfVar11[6] - pfVar11[2]), fVar26 < fVar25)) {
            uVar19 = uVar15;
            fVar26 = fVar25;
          }
          uVar15 = uVar15 + 1;
          if (uVar15 == uVar21) break;
          lVar12 = *(long *)(pfVar11 + 0x2e);
          lVar18 = *(long *)(pfVar11 + 0x2c);
          pfVar11 = pfVar11 + 0x1c;
        }
        if (uVar19 == 0xffffffffffffffff) break;
        puVar3 = (ulong *)param_1[9];
        local_9e8 = 0;
        local_9e0 = (ulong *)CONCAT44(uVar9,uVar9);
        lStack_9d8 = CONCAT44(uVar9,uVar9);
        local_9a0 = 0;
        local_9d0 = CONCAT44(fVar27,fVar27);
        lStack_9c8 = CONCAT44(fVar27,fVar27);
        lStack_998 = 0;
        lVar18 = uVar19 * 0x70;
        local_990 = 0;
        local_978 = (long *)((ulong)local_978 & 0xffffffffffffff00);
        local_9f0 = (MutexSys *)(*param_2 + 1);
        local_930 = 0;
        uStack_928 = 0;
        pSVar2 = (SplitInfoT *)(&local_740 + uVar19 * 0xe);
        lVar12 = local_720[uVar19 * 0xe + 5];
        local_920 = 0;
        local_9c0 = local_9e0;
        lStack_9b8 = lStack_9d8;
        local_9b0 = local_9d0;
        lStack_9a8 = lStack_9c8;
        local_980 = local_9f0;
        local_970 = local_9e0;
        lStack_968 = lStack_9d8;
        local_960 = local_9d0;
        lStack_958 = lStack_9c8;
        local_950 = local_9e0;
        uStack_948 = lStack_9d8;
        local_940 = local_9d0;
        uStack_938 = lStack_9c8;
        if ((ulong)(lVar12 - local_720[uVar19 * 0xe + 4]) < 0xc00) {
          HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
          ::sequential_object_find((PrimInfoExtRange *)&local_910,*puVar3,pSVar2);
          uVar16 = extraout_EDX;
          fVar26 = local_910;
          if (local_720[uVar19 * 0xe + 6] == lVar12) goto LAB_0012f946;
LAB_0012fbf1:
          fVar26 = local_910;
          auVar34 = maxps(local_af0,local_ad0);
          auVar29 = minps(local_ae0,local_ac0);
          pfVar11 = (float *)puVar3[2];
          auVar36._4_4_ = -(uint)(auVar34._4_4_ <= auVar29._4_4_);
          auVar36._0_4_ = -(uint)(auVar34._0_4_ <= auVar29._0_4_);
          auVar36._8_4_ = -(uint)(auVar34._8_4_ <= auVar29._8_4_);
          auVar36._12_4_ = -(uint)(auVar34._12_4_ <= auVar29._12_4_);
          uVar17 = movmskps(uVar16,auVar36);
          auVar37._4_4_ = -(uint)(pfVar11[1] <= pfVar11[5]);
          auVar37._0_4_ = -(uint)(*pfVar11 <= pfVar11[4]);
          auVar37._8_4_ = -(uint)(pfVar11[2] <= pfVar11[6]);
          auVar37._12_4_ = -(uint)(pfVar11[3] <= pfVar11[7]);
          uVar14 = movmskps((int)pfVar11,auVar37);
          uVar17 = ~uVar17 & 7;
          if (uVar17 == 0) {
            fVar30 = auVar29._4_4_ - auVar34._4_4_;
            fVar32 = auVar29._8_4_ - auVar34._8_4_;
            fVar25 = 0.0;
            fVar30 = (fVar30 + fVar32) * (auVar29._0_4_ - auVar34._0_4_) + fVar30 * fVar32;
            fVar30 = fVar30 + fVar30;
            if ((uVar14 & 7) == 7) goto LAB_0012fc6a;
LAB_0012fc99:
            if (fVar25 <= fVar30) {
              fVar25 = *(float *)pSVar2;
              fVar32 = *(float *)((long)&local_740 + lVar18 + 4);
              fVar38 = *(float *)(&uStack_738 + uVar19 * 0xe);
              fVar28 = *(float *)(&local_730 + uVar19 * 0xe);
              fVar31 = *(float *)((long)&local_730 + lVar18 + 4);
              fVar33 = *(float *)(&uStack_728 + uVar19 * 0xe);
              auVar29._4_4_ = -(uint)(fVar32 <= fVar31);
              auVar29._0_4_ = -(uint)(fVar25 <= fVar28);
              auVar29._8_4_ = -(uint)(fVar38 <= fVar33);
              auVar29._12_4_ =
                   -(uint)(*(float *)((long)&uStack_738 + lVar18 + 4) <=
                          *(float *)((long)&uStack_728 + lVar18 + 4));
              uVar14 = movmskps(uVar17,auVar29);
              fVar35 = 0.0;
              if ((~uVar14 & 7) == 0) goto LAB_00130766;
LAB_00130795:
              if (fVar35 <= fVar30) goto LAB_0013079e;
            }
            goto LAB_0012f946;
          }
          if ((uVar14 & 7) == 7) {
            fVar30 = 0.0;
LAB_0012fc6a:
            fVar25 = pfVar11[5] - pfVar11[1];
            fVar32 = pfVar11[6] - pfVar11[2];
            fVar25 = (fVar25 + fVar32) * (pfVar11[4] - *pfVar11) + fVar25 * fVar32;
            fVar25 = (fVar25 + fVar25) * __LC51;
            goto LAB_0012fc99;
          }
          fVar25 = *(float *)pSVar2;
          fVar32 = *(float *)((long)&local_740 + lVar18 + 4);
          fVar38 = *(float *)(&uStack_738 + uVar19 * 0xe);
          fVar28 = *(float *)(&local_730 + uVar19 * 0xe);
          fVar31 = *(float *)((long)&local_730 + lVar18 + 4);
          fVar33 = *(float *)(&uStack_728 + uVar19 * 0xe);
          auVar34._4_4_ = -(uint)(fVar32 <= fVar31);
          auVar34._0_4_ = -(uint)(fVar25 <= fVar28);
          auVar34._8_4_ = -(uint)(fVar38 <= fVar33);
          auVar34._12_4_ =
               -(uint)(*(float *)((long)&uStack_738 + lVar18 + 4) <=
                      *(float *)((long)&uStack_728 + lVar18 + 4));
          uVar14 = movmskps(uVar17,auVar34);
          fVar30 = 0.0;
          if ((~uVar14 & 7) == 0) {
LAB_00130766:
            fVar25 = ((fVar31 - fVar32) + (fVar33 - fVar38)) * (fVar28 - fVar25) +
                     (fVar31 - fVar32) * (fVar33 - fVar38);
            fVar35 = (fVar25 + fVar25) * __LC52;
            goto LAB_00130795;
          }
LAB_0013079e:
          if ((ulong)(lVar12 - local_720[uVar19 * 0xe + 4]) < 0xc00) {
            HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
            ::sequential_spatial_find((PrimInfoExtRange *)local_8d0,*puVar3);
          }
          else {
            HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
            ::parallel_spatial_find((PrimInfoExtRange *)local_8d0,(ulong)puVar3);
          }
          if ((_LC30 * fVar26 <= local_8d0[0]) ||
             (local_7f4 = local_8c4,
             (ulong)(local_720[uVar19 * 0xe + 6] - local_720[uVar19 * 0xe + 5]) <
             (ulong)(((long)(local_8c4 + local_8c0) + local_720[uVar19 * 0xe + 4]) -
                    local_720[uVar19 * 0xe + 5]))) goto LAB_0012f946;
          local_7e0 = local_8b0;
          uStack_7d8 = uStack_8a8;
          local_7b0 = 1;
          local_7d0 = local_8a0;
          uStack_7c8 = uStack_898;
          local_800[1] = (float)local_8d0._4_8_;
          local_800[2] = SUB84(local_8d0._4_8_,4);
          local_7ac = local_8d0[0];
          local_7f0 = CONCAT44(local_8bc,local_8c0);
        }
        else {
          HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
          ::parallel_object_find((PrimInfoExtRange *)&local_910,(ulong)puVar3,pSVar2);
          lVar12 = local_720[uVar19 * 0xe + 5];
          uVar16 = extraout_EDX_00;
          fVar26 = local_910;
          if (local_720[uVar19 * 0xe + 6] != lVar12) goto LAB_0012fbf1;
LAB_0012f946:
          local_7b0 = 0;
          local_800[1] = (float)local_90c;
          local_800[2] = (float)local_908;
          local_7e0 = local_8f0;
          uStack_7d8 = uStack_8e8;
          local_7f4 = local_904;
          local_7d0 = local_8e0;
          uStack_7c8 = uStack_8d8;
          local_7f0 = local_900;
          local_7ac = fVar26;
        }
        uVar21 = uVar21 + 1;
        local_800[0] = local_7ac;
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        split((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
               *)param_1[9],(Split2 *)local_800,(PrimInfoExtRange *)pSVar2,
              (PrimInfoExtRange *)&local_9e0,(PrimInfoExtRange *)&local_970);
        *(MutexSys **)(local_748 + uVar19 * 0x70 + -8) = local_9f0;
        local_748[uVar19 * 0x70] = local_9e8;
        (&local_740)[uVar19 * 0xe] = local_9e0;
        (&uStack_738)[uVar19 * 0xe] = lStack_9d8;
        local_720[uVar19 * 0xe + 6] = local_990;
        (&local_730)[uVar19 * 0xe] = local_9d0;
        (&uStack_728)[uVar19 * 0xe] = lStack_9c8;
        local_720[uVar19 * 0xe] = (long)local_9c0;
        local_720[uVar19 * 0xe + 1] = lStack_9b8;
        local_720[uVar19 * 0xe + 2] = local_9b0;
        local_720[uVar19 * 0xe + 3] = lStack_9a8;
        local_720[uVar19 * 0xe + 4] = local_9a0;
        local_720[uVar19 * 0xe + 5] = lStack_998;
        *plVar24 = (long)local_980;
        plVar24[2] = (long)local_970;
        plVar24[3] = lStack_968;
        *(undefined1 *)(plVar24 + 1) = local_978._0_1_;
        plVar24[4] = local_960;
        plVar24[5] = lStack_958;
        *(undefined4 *)(plVar24 + 6) = (undefined4)local_950;
        *(undefined4 *)((long)plVar24 + 0x34) = local_950._4_4_;
        *(undefined4 *)(plVar24 + 7) = (undefined4)uStack_948;
        *(undefined4 *)((long)plVar24 + 0x3c) = uStack_948._4_4_;
        *(undefined4 *)(plVar24 + 8) = (undefined4)local_940;
        *(undefined4 *)((long)plVar24 + 0x44) = local_940._4_4_;
        *(undefined4 *)(plVar24 + 9) = (undefined4)uStack_938;
        *(undefined4 *)((long)plVar24 + 0x4c) = uStack_938._4_4_;
        *(undefined4 *)(plVar24 + 10) = (undefined4)local_930;
        *(undefined4 *)((long)plVar24 + 0x54) = local_930._4_4_;
        *(undefined4 *)(plVar24 + 0xb) = (undefined4)uStack_928;
        *(undefined4 *)((long)plVar24 + 0x5c) = uStack_928._4_4_;
        plVar24[0xc] = local_920;
        plVar24 = plVar24 + 0xe;
      } while (uVar21 < *param_1);
      lVar12 = uVar21 * 0x70;
    }
    local_b08 = &local_750;
    uVar19 = param_1[7];
    if (uVar19 < (ulong)(param_2[0xb] - param_2[10])) {
      local_748[0] = (ulong)(local_6f8 - local_700) <= uVar19;
      local_6d8 = (ulong)(local_688 - local_690) <= uVar19;
      if (((((uVar21 != 2) && (local_668 = (ulong)(lStack_618 - local_620) <= uVar19, uVar21 != 3))
           && (local_5f8 = (ulong)(local_5a8 - local_5b0) <= uVar19, uVar21 != 4)) &&
          ((((local_588 = (ulong)(local_538 - local_540) <= uVar19, uVar21 != 5 &&
             (local_518 = (ulong)(local_4c8 - local_4d0) <= uVar19, uVar21 != 6)) &&
            ((local_4a8 = (ulong)(local_458 - local_460) <= uVar19, uVar21 != 7 &&
             ((local_438 = (ulong)(local_3e8 - local_3f0) <= uVar19, uVar21 != 8 &&
              (local_3c8 = (ulong)(local_378 - local_380) <= uVar19, uVar21 != 9)))))) &&
           (local_358 = (ulong)(local_308 - local_310) <= uVar19, uVar21 != 10)))) &&
         ((((local_2e8 = (ulong)(local_298 - local_2a0) <= uVar19, uVar21 != 0xb &&
            (local_278 = (ulong)(local_228 - local_230) <= uVar19, uVar21 != 0xc)) &&
           (local_208 = (ulong)(local_1b8 - local_1c0) <= uVar19, uVar21 != 0xd)) &&
          ((local_198 = (ulong)(local_148 - local_150) <= uVar19, uVar21 != 0xe &&
           (local_128 = (ulong)(local_d8 - local_e0) <= uVar19, uVar21 == 0x10)))))) {
        local_b8 = (ulong)(local_68 - local_70) <= uVar19;
      }
    }
    if (lVar12 != 0) {
      uVar19 = (lVar12 >> 4) * 0x6db6db6db6db6db7;
      puVar1 = (undefined1 *)((long)local_b08 + lVar12);
      if (uVar19 == 0) {
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (local_b08,puVar1,0xfffffffffffffffe);
      }
      else {
        lVar18 = 0x3f;
        if (uVar19 != 0) {
          for (; uVar19 >> lVar18 == 0; lVar18 = lVar18 + -1) {
          }
        }
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (local_b08,puVar1,(long)(int)lVar18 * 2);
        if (0x700 < lVar12) {
          puVar20 = auStack_50;
          std::
          __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                    (local_b08,puVar20);
          do {
            puVar20 = puVar20 + 0x70;
            std::
            __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                      ();
          } while (puVar1 != puVar20);
          goto LAB_0012fdaf;
        }
      }
      std::
      __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (local_b08,puVar1);
    }
LAB_0012fdaf:
    local_9f0 = (MutexSys *)0x80;
    pMVar4 = *(MutexSys **)in_stack_00000010;
    if (local_b18 != *(FastAllocator **)(pMVar4 + 8)) {
      embree::MutexSys::lock();
      if (*(long *)(pMVar4 + 8) != 0) {
        LOCK();
        *(long *)(*(long *)(pMVar4 + 8) + 0x118) =
             *(long *)(*(long *)(pMVar4 + 8) + 0x118) +
             *(long *)(pMVar4 + 0xa8) + *(long *)(pMVar4 + 0x68);
        UNLOCK();
        LOCK();
        *(long *)(*(long *)(pMVar4 + 8) + 0x120) =
             *(long *)(*(long *)(pMVar4 + 8) + 0x120) +
             (((*(long *)(pMVar4 + 0x98) + *(long *)(pMVar4 + 0x58)) - *(long *)(pMVar4 + 0x50)) -
             *(long *)(pMVar4 + 0x90));
        UNLOCK();
        LOCK();
        *(long *)(*(long *)(pMVar4 + 8) + 0x128) =
             *(long *)(*(long *)(pMVar4 + 8) + 0x128) +
             *(long *)(pMVar4 + 0xb0) + *(long *)(pMVar4 + 0x70);
        UNLOCK();
      }
      *(undefined8 *)(pMVar4 + 0x48) = 0;
      *(undefined8 *)(pMVar4 + 0x58) = 0;
      *(undefined8 *)(pMVar4 + 0x50) = 0;
      *(undefined8 *)(pMVar4 + 0x68) = 0;
      *(undefined8 *)(pMVar4 + 0x70) = 0;
      *(undefined8 *)(pMVar4 + 0x60) = 0;
      if (local_b18 == (FastAllocator *)0x0) {
        *(undefined8 *)(pMVar4 + 0x88) = 0;
        uVar13 = 0;
        *(undefined8 *)(pMVar4 + 0x98) = 0;
        *(undefined8 *)(pMVar4 + 0x90) = 0;
        *(undefined8 *)(pMVar4 + 0xa8) = 0;
        *(undefined8 *)(pMVar4 + 0xb0) = 0;
      }
      else {
        uVar13 = *(undefined8 *)(local_b18 + 0x10);
        *(undefined8 *)(pMVar4 + 0x88) = 0;
        *(undefined8 *)(pMVar4 + 0x98) = 0;
        *(undefined8 *)(pMVar4 + 0x60) = uVar13;
        *(undefined8 *)(pMVar4 + 0x90) = 0;
        *(undefined8 *)(pMVar4 + 0xa8) = 0;
        *(undefined8 *)(pMVar4 + 0xb0) = 0;
        *(undefined8 *)(pMVar4 + 0xa0) = 0;
        uVar13 = *(undefined8 *)(local_b18 + 0x10);
      }
      *(undefined8 *)(pMVar4 + 0xa0) = uVar13;
      LOCK();
      *(FastAllocator **)(pMVar4 + 8) = local_b18;
      UNLOCK();
      local_980 = pMVar4;
      embree::MutexSys::lock();
      plVar24 = *(long **)(local_b18 + 0x138);
      if (plVar24 == *(long **)(local_b18 + 0x140)) {
        std::
        vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
        ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                  ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                    *)(local_b18 + 0x130),plVar24,&local_980);
      }
      else {
        *plVar24 = (long)pMVar4;
        *(long *)(local_b18 + 0x138) = *(long *)(local_b18 + 0x138) + 8;
      }
      embree::MutexSys::unlock();
      embree::MutexSys::unlock();
    }
    lVar12 = *(long *)(in_stack_00000010 + 0x10);
    *(long *)(in_stack_00000010 + 0x28) = *(long *)(in_stack_00000010 + 0x28) + 0x80;
    uVar15 = (ulong)(-(int)lVar12 & 0xf);
    uVar19 = lVar12 + 0x80 + uVar15;
    *(ulong *)(in_stack_00000010 + 0x10) = uVar19;
    if (*(ulong *)(in_stack_00000010 + 0x18) < uVar19) {
      *(long *)(in_stack_00000010 + 0x10) = lVar12;
      if (*(MutexSys **)(in_stack_00000010 + 0x20) < (MutexSys *)0x200) {
        puVar10 = (undefined8 *)FastAllocator::malloc(local_b18,(ulong *)&local_9f0,0x40,false);
      }
      else {
        local_980 = *(MutexSys **)(in_stack_00000010 + 0x20);
        puVar10 = (undefined8 *)FastAllocator::malloc(local_b18,(ulong *)&local_980,0x40,true);
        *(undefined8 **)(in_stack_00000010 + 8) = puVar10;
        lVar12 = *(long *)(in_stack_00000010 + 0x10);
        *(long *)(in_stack_00000010 + 0x10) = 0x80;
        *(long *)(in_stack_00000010 + 0x30) =
             (*(long *)(in_stack_00000010 + 0x18) + *(long *)(in_stack_00000010 + 0x30)) - lVar12;
        *(MutexSys **)(in_stack_00000010 + 0x18) = local_980;
        if (local_980 < (MutexSys *)0x80) {
          *(long *)(in_stack_00000010 + 0x10) = 0;
          local_980 = *(MutexSys **)(in_stack_00000010 + 0x20);
          puVar10 = (undefined8 *)FastAllocator::malloc(local_b18,(ulong *)&local_980,0x40,false);
          *(undefined8 **)(in_stack_00000010 + 8) = puVar10;
          lVar12 = *(long *)(in_stack_00000010 + 0x10);
          *(long *)(in_stack_00000010 + 0x10) = 0x80;
          *(long *)(in_stack_00000010 + 0x30) =
               (*(long *)(in_stack_00000010 + 0x18) + *(long *)(in_stack_00000010 + 0x30)) - lVar12;
          *(MutexSys **)(in_stack_00000010 + 0x18) = local_980;
          if (local_980 < (MutexSys *)0x80) {
            puVar10 = (undefined8 *)0x0;
            *(long *)(in_stack_00000010 + 0x10) = 0;
          }
        }
      }
    }
    else {
      *(ulong *)(in_stack_00000010 + 0x30) = *(long *)(in_stack_00000010 + 0x30) + uVar15;
      puVar10 = (undefined8 *)(*(long *)(in_stack_00000010 + 8) + -0x80 + uVar19);
    }
    *puVar10 = 8;
    uVar13 = CONCAT44(uVar9,uVar9);
    uVar6 = CONCAT44(uVar9,uVar9);
    puVar10[1] = 8;
    uVar7 = CONCAT44(fVar27,fVar27);
    uVar8 = CONCAT44(fVar27,fVar27);
    puVar10[2] = 8;
    puVar10[4] = uVar13;
    puVar10[5] = uVar6;
    puVar10[3] = 8;
    *(float *)(puVar10 + 4) = (float)local_740;
    puVar10[8] = uVar13;
    puVar10[9] = uVar6;
    puVar10[0xc] = uVar13;
    puVar10[0xd] = uVar6;
    *(undefined4 *)(puVar10 + 8) = local_740._4_4_;
    puVar10[0xe] = uVar7;
    puVar10[0xf] = uVar8;
    puVar10[10] = uVar7;
    puVar10[0xb] = uVar8;
    puVar10[6] = uVar7;
    puVar10[7] = uVar8;
    *(undefined4 *)(puVar10 + 0xc) = (undefined4)uStack_738;
    *(undefined4 *)(puVar10 + 6) = (undefined4)local_730;
    *(undefined4 *)(puVar10 + 10) = local_730._4_4_;
    *(undefined4 *)(puVar10 + 0xe) = (undefined4)uStack_728;
    *(undefined4 *)((long)puVar10 + 0x44) = local_6d0._4_4_;
    *(undefined4 *)((long)puVar10 + 0x24) = (undefined4)local_6d0;
    *(undefined4 *)((long)puVar10 + 100) = (undefined4)uStack_6c8;
    *(undefined4 *)((long)puVar10 + 0x34) = local_6c0;
    *(undefined4 *)((long)puVar10 + 0x54) = uStack_6bc;
    *(undefined4 *)((long)puVar10 + 0x74) = uStack_6b8;
    if (uVar21 != 2) {
      *(undefined4 *)(puVar10 + 9) = uStack_65c;
      *(undefined4 *)(puVar10 + 0xd) = uStack_658;
      *(undefined4 *)(puVar10 + 5) = local_660;
      *(undefined4 *)(puVar10 + 7) = local_650;
      *(undefined4 *)(puVar10 + 0xb) = uStack_64c;
      *(undefined4 *)(puVar10 + 0xf) = uStack_648;
      if (uVar21 != 3) {
        *(undefined4 *)((long)puVar10 + 0x4c) = uStack_5ec;
        *(undefined4 *)((long)puVar10 + 0x6c) = uStack_5e8;
        *(undefined4 *)((long)puVar10 + 0x2c) = uStack_5f0;
        *(undefined4 *)((long)puVar10 + 0x3c) = uStack_5e0;
        *(undefined4 *)((long)puVar10 + 0x5c) = uStack_5dc;
        *(undefined4 *)((long)puVar10 + 0x7c) = uStack_5d8;
        if (uVar21 != 4) {
          *(undefined4 *)(puVar10 + 10) = uStack_57c;
          *(undefined4 *)(puVar10 + 0xe) = uStack_578;
          *(undefined4 *)(puVar10 + 6) = uStack_580;
          *(undefined4 *)(puVar10 + 8) = uStack_570;
          *(undefined4 *)(puVar10 + 0xc) = uStack_56c;
          *(undefined4 *)(puVar10 + 0x10) = uStack_568;
          if (uVar21 != 5) {
            *(undefined4 *)((long)puVar10 + 0x54) = uStack_50c;
            *(undefined4 *)((long)puVar10 + 0x74) = uStack_508;
            *(undefined4 *)((long)puVar10 + 0x34) = uStack_510;
            *(undefined4 *)((long)puVar10 + 0x44) = uStack_500;
            *(undefined4 *)((long)puVar10 + 100) = uStack_4fc;
            *(undefined4 *)((long)puVar10 + 0x84) = uStack_4f8;
            if (uVar21 != 6) {
              *(undefined4 *)(puVar10 + 0xb) = uStack_49c;
              *(undefined4 *)(puVar10 + 0xf) = uStack_498;
              *(undefined4 *)(puVar10 + 7) = uStack_4a0;
              *(undefined4 *)(puVar10 + 9) = uStack_490;
              *(undefined4 *)(puVar10 + 0xd) = uStack_48c;
              *(undefined4 *)(puVar10 + 0x11) = uStack_488;
              if (uVar21 != 7) {
                *(undefined4 *)((long)puVar10 + 0x5c) = uStack_42c;
                *(undefined4 *)((long)puVar10 + 0x7c) = uStack_428;
                *(undefined4 *)((long)puVar10 + 0x3c) = uStack_430;
                *(undefined4 *)((long)puVar10 + 0x4c) = uStack_420;
                *(undefined4 *)((long)puVar10 + 0x6c) = uStack_41c;
                *(undefined4 *)((long)puVar10 + 0x8c) = uStack_418;
                if (uVar21 != 8) {
                  *(undefined4 *)(puVar10 + 0xc) = uStack_3bc;
                  *(undefined4 *)(puVar10 + 0x10) = uStack_3b8;
                  *(undefined4 *)(puVar10 + 8) = uStack_3c0;
                  *(undefined4 *)(puVar10 + 10) = uStack_3b0;
                  *(undefined4 *)(puVar10 + 0xe) = uStack_3ac;
                  *(undefined4 *)(puVar10 + 0x12) = uStack_3a8;
                  if (uVar21 != 9) {
                    *(undefined4 *)((long)puVar10 + 100) = uStack_34c;
                    *(undefined4 *)((long)puVar10 + 0x84) = uStack_348;
                    *(undefined4 *)((long)puVar10 + 0x44) = uStack_350;
                    *(undefined4 *)((long)puVar10 + 0x54) = uStack_340;
                    *(undefined4 *)((long)puVar10 + 0x74) = uStack_33c;
                    *(undefined4 *)((long)puVar10 + 0x94) = uStack_338;
                    if (uVar21 != 10) {
                      *(undefined4 *)(puVar10 + 0xd) = uStack_2dc;
                      *(undefined4 *)(puVar10 + 0x11) = uStack_2d8;
                      *(undefined4 *)(puVar10 + 9) = uStack_2e0;
                      *(undefined4 *)(puVar10 + 0xb) = uStack_2d0;
                      *(undefined4 *)(puVar10 + 0xf) = uStack_2cc;
                      *(undefined4 *)(puVar10 + 0x13) = uStack_2c8;
                      if (uVar21 != 0xb) {
                        *(undefined4 *)((long)puVar10 + 0x6c) = uStack_26c;
                        *(undefined4 *)((long)puVar10 + 0x8c) = uStack_268;
                        *(undefined4 *)((long)puVar10 + 0x4c) = uStack_270;
                        *(undefined4 *)((long)puVar10 + 0x5c) = uStack_260;
                        *(undefined4 *)((long)puVar10 + 0x7c) = uStack_25c;
                        *(undefined4 *)((long)puVar10 + 0x9c) = uStack_258;
                        if (uVar21 != 0xc) {
                          *(undefined4 *)(puVar10 + 0xe) = uStack_1fc;
                          *(undefined4 *)(puVar10 + 0x12) = uStack_1f8;
                          *(undefined4 *)(puVar10 + 10) = uStack_200;
                          *(undefined4 *)(puVar10 + 0xc) = uStack_1f0;
                          *(undefined4 *)(puVar10 + 0x10) = uStack_1ec;
                          *(undefined4 *)(puVar10 + 0x14) = uStack_1e8;
                          if (uVar21 != 0xd) {
                            *(undefined4 *)((long)puVar10 + 0x74) = uStack_18c;
                            *(undefined4 *)((long)puVar10 + 0x94) = uStack_188;
                            *(undefined4 *)((long)puVar10 + 0x54) = uStack_190;
                            *(undefined4 *)((long)puVar10 + 100) = uStack_180;
                            *(undefined4 *)((long)puVar10 + 0x84) = uStack_17c;
                            *(undefined4 *)((long)puVar10 + 0xa4) = uStack_178;
                            if (uVar21 != 0xe) {
                              *(undefined4 *)(puVar10 + 0xf) = uStack_11c;
                              *(undefined4 *)(puVar10 + 0x13) = uStack_118;
                              *(undefined4 *)(puVar10 + 0xb) = uStack_120;
                              *(undefined4 *)(puVar10 + 0xd) = uStack_110;
                              *(undefined4 *)(puVar10 + 0x11) = uStack_10c;
                              *(undefined4 *)(puVar10 + 0x15) = uStack_108;
                              if (uVar21 == 0x10) {
                                *(undefined4 *)((long)puVar10 + 0x7c) = uStack_ac;
                                *(undefined4 *)((long)puVar10 + 0x9c) = uStack_a8;
                                *(undefined4 *)((long)puVar10 + 0x5c) = uStack_b0;
                                *(undefined4 *)((long)puVar10 + 0x6c) = uStack_a0;
                                *(undefined4 *)((long)puVar10 + 0x8c) = uStack_9c;
                                *(undefined4 *)((long)puVar10 + 0xac) = uStack_98;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    uVar19 = 0;
    if (param_1[6] < (ulong)(param_2[0xb] - param_2[10])) {
      local_980 = (MutexSys *)local_800;
      local_978 = local_b08;
      local_b00[0] = (MutexSys *)0x0;
      local_970 = param_1;
      TaskScheduler::
      spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar21,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_980,
                 (TaskGroupContext *)local_b00);
      embree::TaskScheduler::wait();
      if (local_b00[0] != (MutexSys *)0x0) {
        local_9f0 = local_b00[0];
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception(&local_9f0);
      }
      *puVar10 = CONCAT44(local_800[1],local_800[0]);
      puVar10[1] = CONCAT44(local_7f4,local_800[2]);
      if (uVar21 == 2) goto LAB_0012f533;
      puVar10[2] = local_7f0;
      uVar19 = uVar21;
    }
    else {
      do {
        uVar13 = recurse(param_1,local_b08,0);
        *(undefined8 *)(local_800 + uVar19 * 2) = uVar13;
        uVar19 = uVar19 + 1;
        local_b08 = local_b08 + 0xe;
      } while (uVar19 != uVar21);
      *puVar10 = CONCAT44(local_800[1],local_800[0]);
      puVar10[1] = CONCAT44(local_7f4,local_800[2]);
      if (uVar19 == 2) goto LAB_0012f533;
      puVar10[2] = local_7f0;
    }
    if (uVar19 != 3) {
      puVar10[3] = uStack_7e8;
    }
    goto LAB_0012f533;
  }
  lVar18 = param_2[0xb] * 0x20;
  puVar10 = (undefined8 *)(*(long *)param_1[9] + lVar18);
  puVar22 = (undefined8 *)(*(long *)param_1[9] + lVar12 * 0x20);
  if (puVar10 != puVar22) {
    lVar18 = lVar18 + lVar12 * -0x20;
    uVar21 = lVar18 >> 5;
    if (uVar21 == 0) {
      std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar22,puVar10,0xfffffffffffffffe);
    }
    else {
      lVar12 = 0x3f;
      if (uVar21 != 0) {
        for (; uVar21 >> lVar12 == 0; lVar12 = lVar12 + -1) {
        }
      }
      std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar22,puVar10,(long)(int)lVar12 * 2);
      if (0x200 < lVar18) {
        puVar23 = puVar22 + 0x40;
        std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar22,puVar23);
        for (; puVar10 != puVar23; puVar23 = puVar23 + 4) {
          while( true ) {
            uVar13 = puVar23[2];
            uVar6 = puVar23[3];
            uVar7 = *puVar23;
            uVar8 = puVar23[1];
            uVar21 = CONCAT44(*(undefined4 *)((long)puVar23 + 0x1c),
                              *(undefined4 *)((long)puVar23 + 0xc));
            puVar22 = puVar23;
            if (CONCAT44(*(undefined4 *)((long)puVar23 + -4),*(undefined4 *)((long)puVar23 + -0x14))
                <= uVar21) break;
            do {
              puVar5 = puVar22;
              puVar22 = puVar5 + -4;
              *puVar5 = *puVar22;
              puVar5[1] = puVar5[-3];
              puVar5[2] = puVar5[-2];
              puVar5[3] = puVar5[-1];
            } while (uVar21 < CONCAT44(*(undefined4 *)((long)puVar5 + -0x24),
                                       *(undefined4 *)((long)puVar5 + -0x34)));
            puVar23 = puVar23 + 4;
            *puVar22 = uVar7;
            puVar5[-3] = uVar8;
            puVar5[-2] = uVar13;
            puVar5[-1] = uVar6;
            if (puVar10 == puVar23) goto LAB_0012f500;
          }
          *puVar23 = uVar7;
          puVar23[1] = uVar8;
          puVar23[2] = uVar13;
          puVar23[3] = uVar6;
        }
        goto LAB_0012f500;
      }
    }
    std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar22,puVar10);
  }
LAB_0012f500:
  puVar10 = (undefined8 *)createLargeLeaf(param_1,param_2);
LAB_0012f533:
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar10;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::NodeRefPtr<4> embree::sse2::GeneralBVHBuilder::build<embree::NodeRefPtr<4>,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::Scene::BuildProgressMonitorInterface>(embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>&, embree::PrimRef*, embree::sse2::PrimInfoExtRange const&,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > > const&,
   embree::Scene::BuildProgressMonitorInterface const&, embree::sse2::GeneralBVHBuilder::Settings
   const&) */

void embree::sse2::GeneralBVHBuilder::
     build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::Scene::BuildProgressMonitorInterface>
               (undefined8 param_1,undefined8 param_2,undefined4 *param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,ulong *param_7)

{
  long in_FS_OFFSET;
  undefined1 local_132;
  undefined1 local_131;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 uStack_120;
  undefined8 local_118;
  undefined8 local_108;
  undefined1 local_100;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  ulong local_98;
  ulong uStack_90;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  ulong uStack_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 *local_48;
  undefined1 *local_40;
  undefined1 *local_38;
  undefined8 local_30;
  undefined8 *local_28;
  undefined8 *local_20;
  undefined8 local_18;
  long local_10;
  
  local_98 = *param_7;
  uStack_90 = param_7[1];
  local_88 = param_7[2];
  uStack_80 = param_7[3];
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = param_7[4];
  uStack_70 = param_7[5];
  local_68 = param_7[6];
  uStack_60 = param_7[7];
  local_48 = &local_130;
  local_40 = &local_131;
  local_38 = &local_132;
  local_20 = &local_108;
  local_28 = &local_128;
  local_130 = param_4;
  local_58 = param_2;
  local_50 = param_1;
  local_30 = param_5;
  local_18 = param_6;
  if (0x10 < *param_7) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  local_b8 = *(undefined8 *)(param_3 + 0x10);
  local_f8 = *param_3;
  uStack_f4 = param_3[1];
  uStack_f0 = param_3[2];
  uStack_ec = param_3[3];
  local_100 = 0;
  local_e8 = param_3[4];
  uStack_e4 = param_3[5];
  uStack_e0 = param_3[6];
  uStack_dc = param_3[7];
  local_d8 = param_3[8];
  uStack_d4 = param_3[9];
  uStack_d0 = param_3[10];
  uStack_cc = param_3[0xb];
  local_108 = 1;
  local_c8 = param_3[0xc];
  uStack_c4 = param_3[0xd];
  uStack_c0 = param_3[0xe];
  uStack_bc = param_3[0xf];
  local_b0 = *(undefined8 *)(param_3 + 0x12);
  local_a8 = *(undefined8 *)(param_3 + 0x14);
  local_128 = 0;
  uStack_120 = 0;
  local_118 = 0;
  BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
  ::recurse(&local_98,local_20,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::build() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::build(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  FastAllocator *pFVar1;
  ulong *puVar2;
  Geometry *pGVar3;
  Device *pDVar4;
  Block *pBVar5;
  void *pvVar6;
  string *psVar7;
  long lVar8;
  undefined **ppuVar9;
  Block *pBVar10;
  uint uVar11;
  ulong uVar12;
  long lVar13;
  undefined8 *puVar14;
  ulong uVar15;
  ulong uVar16;
  undefined8 *puVar17;
  undefined8 uVar18;
  long lVar19;
  long *plVar20;
  size_t sVar21;
  long *plVar22;
  undefined8 uVar23;
  ulong uVar24;
  uint uVar25;
  ulong *puVar26;
  long *plVar27;
  vector_t *pvVar28;
  uint uVar29;
  undefined8 *puVar30;
  ulong *puVar31;
  long *plVar32;
  byte bVar33;
  vector_t *pvVar34;
  vector_t *pvVar35;
  char *__s;
  long in_FS_OFFSET;
  bool bVar36;
  float fVar37;
  double dVar38;
  double local_1e8;
  undefined4 local_1b0;
  float local_1ac;
  undefined8 local_1a8;
  undefined **local_1a0;
  undefined ***local_198;
  undefined **local_190;
  undefined **local_188;
  undefined8 local_180;
  undefined **local_178;
  undefined8 *local_170;
  undefined ****local_168;
  undefined ***local_158;
  undefined8 uStack_150;
  undefined8 local_148;
  undefined8 uStack_140;
  undefined ***local_138;
  undefined8 uStack_130;
  undefined8 local_128;
  undefined8 uStack_120;
  long local_118;
  long local_110;
  undefined ***local_108;
  float *pfStack_100;
  TaskGroupContext *local_f8;
  float *pfStack_f0;
  undefined ***local_e8;
  undefined8 uStack_e0;
  undefined8 local_d8;
  undefined8 uStack_d0;
  long local_c8;
  long local_c0;
  vector_t *local_b8;
  long *local_a8 [2];
  long local_98 [2];
  long *local_88;
  long local_80;
  long local_78 [2];
  ulong *local_68;
  long local_60;
  ulong local_58 [5];
  
  local_58[3] = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(this + 0x20) == 0) {
LAB_001318c8:
    lVar13 = *(long *)(this + 0x18);
    pvVar28 = *(vector_t **)(lVar13 + 0x288);
    *(int *)(this + 0x98) = (int)pvVar28;
    if (pvVar28 == (vector_t *)0x0) goto LAB_001318e3;
    psVar7 = *(string **)(this + 0x10);
    bVar33 = *(byte *)(*(long *)(lVar13 + 0x188) + 0x464);
    if (*(long *)(lVar13 + 0x1d0) == 0) {
      uVar29 = 0;
      uVar25 = 0;
      if (bVar33 != 0) goto LAB_00131e63;
LAB_00132683:
      bVar33 = 0;
      __s = "BuilderFastSpatialSAH";
    }
    else {
      uVar25 = 0;
      uVar29 = 0;
      lVar19 = 0;
      do {
        lVar8 = *(long *)(*(long *)(lVar13 + 0x1e0) + lVar19 * 8);
        if ((((lVar8 != 0) && ((*(byte *)(lVar8 + 0x3e) & 0x20) != 0)) &&
            (*(char *)(lVar8 + 0x3c) == '\x14')) &&
           ((*(int *)(lVar8 + 0x24) == 1 &&
            (uVar11 = (uint)lVar19, bVar36 = uVar29 < uVar11, uVar29 = uVar25, bVar36)))) {
          uVar29 = uVar11;
          uVar25 = uVar11;
        }
        lVar19 = lVar19 + 1;
      } while (lVar19 != *(long *)(lVar13 + 0x1d0));
      bVar33 = bVar33 | 0x7ffffff < uVar29;
      uVar25 = uVar29;
      if (bVar33 == 0) goto LAB_00132683;
LAB_00131e63:
      uVar29 = uVar25;
      __s = "BuilderFastSpatialPresplitSAH";
    }
    local_a8[0] = local_98;
    std::__cxx11::string::_M_construct((ulong)local_a8,'\x01');
    *(undefined1 *)local_a8[0] = 0x34;
    plVar20 = (long *)std::__cxx11::string::_M_replace((ulong)local_a8,0,(char *)0x0,0x1310fc);
    plVar22 = plVar20 + 2;
    if ((long *)*plVar20 == plVar22) {
      uVar12 = plVar20[1] + 1;
      plVar27 = plVar22;
      plVar32 = local_78;
      if (7 < (uint)uVar12) {
        uVar15 = 0;
        do {
          uVar25 = (int)uVar15 + 8;
          uVar24 = (ulong)uVar25;
          *(undefined8 *)((long)local_78 + uVar15) = *(undefined8 *)((long)plVar22 + uVar15);
          uVar15 = uVar24;
        } while (uVar25 < ((uint)uVar12 & 0xfffffff8));
        plVar32 = (long *)((long)local_78 + uVar24);
        plVar27 = (long *)(uVar24 + (long)plVar22);
      }
      lVar13 = 0;
      if ((uVar12 & 4) != 0) {
        *(int *)plVar32 = (int)*plVar27;
        lVar13 = 4;
      }
      if ((uVar12 & 2) != 0) {
        *(undefined2 *)((long)plVar32 + lVar13) = *(undefined2 *)((long)plVar27 + lVar13);
        lVar13 = lVar13 + 2;
      }
      local_88 = local_78;
      if ((uVar12 & 1) != 0) {
        *(undefined1 *)((long)plVar32 + lVar13) = *(undefined1 *)((long)plVar27 + lVar13);
      }
    }
    else {
      local_78[0] = plVar20[2];
      local_88 = (long *)*plVar20;
    }
    local_80 = plVar20[1];
    *plVar20 = (long)plVar22;
    plVar20[1] = 0;
    *(undefined1 *)(plVar20 + 2) = 0;
    sVar21 = strlen(__s);
    if (0x3fffffffffffffffU - local_80 < sVar21) {
                    /* WARNING: Subroutine does not return */
      std::__throw_length_error("basic_string::append");
    }
    plVar22 = (long *)std::__cxx11::string::_M_append((char *)&local_88,(ulong)__s);
    puVar2 = (ulong *)(plVar22 + 2);
    if ((ulong *)*plVar22 == puVar2) {
      uVar12 = plVar22[1] + 1;
      puVar26 = puVar2;
      puVar31 = local_58;
      if (7 < (uint)uVar12) {
        uVar15 = 0;
        do {
          uVar25 = (int)uVar15 + 8;
          uVar24 = (ulong)uVar25;
          *(undefined8 *)((long)local_58 + uVar15) = *(undefined8 *)((long)puVar2 + uVar15);
          uVar15 = uVar24;
        } while (uVar25 < ((uint)uVar12 & 0xfffffff8));
        puVar31 = (ulong *)((long)local_58 + uVar24);
        puVar26 = (ulong *)(uVar24 + (long)puVar2);
      }
      lVar13 = 0;
      if ((uVar12 & 4) != 0) {
        *(int *)puVar31 = (int)*puVar26;
        lVar13 = 4;
      }
      if ((uVar12 & 2) != 0) {
        *(undefined2 *)((long)puVar31 + lVar13) = *(undefined2 *)((long)puVar26 + lVar13);
        lVar13 = lVar13 + 2;
      }
      local_68 = local_58;
      if ((uVar12 & 1) != 0) {
        *(undefined1 *)((long)puVar31 + lVar13) = *(undefined1 *)((long)puVar26 + lVar13);
      }
    }
    else {
      local_58[0] = plVar22[2];
      local_68 = (ulong *)*plVar22;
    }
    local_60 = plVar22[1];
    *plVar22 = (long)puVar2;
    plVar22[1] = 0;
    *(undefined1 *)(plVar22 + 2) = 0;
    local_1e8 = (double)embree::BVHN<4>::preBuild(psVar7);
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
    if (local_88 != local_78) {
      operator_delete(local_88,local_78[0] + 1);
    }
    if (local_a8[0] != local_98) {
      operator_delete(local_a8[0],local_98[0] + 1);
    }
  }
  else {
    uVar29 = *(uint *)(this + 0x98);
    if (*(uint *)(*(long *)(this + 0x20) + 0x20) == uVar29) {
      *(uint *)(this + 0x98) = uVar29;
    }
    else {
      lVar13 = *(long *)(this + 0x10);
      pFVar1 = (FastAllocator *)(lVar13 + 0x78);
      FastAllocator::internal_fix_used_blocks(pFVar1);
      plVar22 = *(long **)(lVar13 + 0x1a8);
      plVar20 = *(long **)(lVar13 + 0x1b0);
      if (plVar20 != plVar22) {
        do {
          while( true ) {
            lVar19 = *plVar22;
            if (pFVar1 != *(FastAllocator **)(lVar19 + 8)) break;
            embree::MutexSys::lock();
            if (pFVar1 == *(FastAllocator **)(lVar19 + 8)) {
              LOCK();
              plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x118);
              *plVar32 = *plVar32 + *(long *)(lVar19 + 0xa8) + *(long *)(lVar19 + 0x68);
              UNLOCK();
              LOCK();
              plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x120);
              *plVar32 = *plVar32 +
                         (((*(long *)(lVar19 + 0x98) + *(long *)(lVar19 + 0x58)) -
                          *(long *)(lVar19 + 0x50)) - *(long *)(lVar19 + 0x90));
              UNLOCK();
              LOCK();
              plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x128);
              *plVar32 = *plVar32 + *(long *)(lVar19 + 0xb0) + *(long *)(lVar19 + 0x70);
              UNLOCK();
              *(undefined8 *)(lVar19 + 0x48) = 0;
              *(undefined8 *)(lVar19 + 0x58) = 0;
              *(undefined8 *)(lVar19 + 0x50) = 0;
              *(undefined8 *)(lVar19 + 0x68) = 0;
              *(undefined8 *)(lVar19 + 0x70) = 0;
              *(undefined8 *)(lVar19 + 0x60) = 0;
              *(undefined8 *)(lVar19 + 0x88) = 0;
              *(undefined8 *)(lVar19 + 0x98) = 0;
              *(undefined8 *)(lVar19 + 0x90) = 0;
              *(undefined8 *)(lVar19 + 0xa8) = 0;
              *(undefined8 *)(lVar19 + 0xb0) = 0;
              *(undefined8 *)(lVar19 + 0xa0) = 0;
              LOCK();
              *(undefined8 *)(lVar19 + 8) = 0;
              UNLOCK();
            }
            plVar22 = plVar22 + 1;
            embree::MutexSys::unlock();
            if (plVar20 == plVar22) goto LAB_00131711;
          }
          plVar22 = plVar22 + 1;
        } while (plVar20 != plVar22);
LAB_00131711:
        if (*(long *)(lVar13 + 0x1a8) != *(long *)(lVar13 + 0x1b0)) {
          *(long *)(lVar13 + 0x1b0) = *(long *)(lVar13 + 0x1a8);
        }
      }
      LOCK();
      *(undefined8 *)(lVar13 + 400) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar13 + 0x198) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar13 + 0x1a0) = 0;
      UNLOCK();
      if (*(long *)(lVar13 + 0x170) != 0) {
        bVar36 = *(bool *)(lVar13 + 0x180);
        pDVar4 = *(Device **)(lVar13 + 0x78);
        pBVar10 = *(Block **)(lVar13 + 0x170);
        while (pBVar10 != (Block *)0x0) {
          pBVar5 = *(Block **)(pBVar10 + 0x18);
          FastAllocator::Block::clear_block(pBVar10,pDVar4,bVar36);
          pBVar10 = pBVar5;
        }
      }
      LOCK();
      *(undefined8 *)(lVar13 + 0x170) = 0;
      UNLOCK();
      if (*(long *)(lVar13 + 0x178) != 0) {
        bVar36 = *(bool *)(lVar13 + 0x180);
        pDVar4 = *(Device **)(lVar13 + 0x78);
        pBVar10 = *(Block **)(lVar13 + 0x178);
        while (pBVar10 != (Block *)0x0) {
          pBVar5 = *(Block **)(pBVar10 + 0x18);
          FastAllocator::Block::clear_block(pBVar10,pDVar4,bVar36);
          pBVar10 = pBVar5;
        }
      }
      LOCK();
      *(undefined8 *)(lVar13 + 0x178) = 0;
      UNLOCK();
      puVar17 = (undefined8 *)(lVar13 + 0xf0);
      do {
        LOCK();
        *puVar17 = 0;
        UNLOCK();
        LOCK();
        puVar17[8] = 0;
        UNLOCK();
        puVar17 = puVar17 + 1;
      } while ((undefined8 *)(lVar13 + 0x130) != puVar17);
      pvVar6 = *(void **)(lVar13 + 0x1e8);
      lVar19 = *(long *)(lVar13 + 0x1e0);
      if (pvVar6 != (void *)0x0) {
        if ((ulong)(lVar19 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar6);
        }
        else {
          embree::os_free(pvVar6,lVar19 << 5,*(bool *)(lVar13 + 0x1d0));
        }
      }
      if (lVar19 != 0) {
        (**(code **)**(undefined8 **)(lVar13 + 0x1c8))
                  (*(undefined8 **)(lVar13 + 0x1c8),lVar19 * -0x20,1);
      }
      *(undefined8 *)(lVar13 + 0x1e8) = 0;
      *(undefined8 *)(lVar13 + 0x1e0) = 0;
      *(undefined8 *)(lVar13 + 0x1d8) = 0;
      if (*(long *)(this + 0x20) == 0) goto LAB_001318c8;
      uVar29 = *(uint *)(*(long *)(this + 0x20) + 0x20);
      *(uint *)(this + 0x98) = uVar29;
    }
    pvVar28 = (vector_t *)(ulong)uVar29;
    if (pvVar28 == (vector_t *)0x0) {
LAB_001318e3:
      pvVar6 = *(void **)(this + 0x48);
      lVar13 = *(long *)(this + 0x40);
      if (pvVar6 != (void *)0x0) {
        if ((ulong)(lVar13 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar6);
        }
        else {
          embree::os_free(pvVar6,lVar13 << 5,(bool)this[0x30]);
        }
      }
      if (lVar13 != 0) {
        (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar13 * -0x20,1);
      }
      *(undefined8 *)(this + 0x48) = 0;
      *(undefined8 *)(this + 0x40) = 0;
      *(undefined8 *)(this + 0x38) = 0;
      if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Could not recover jumptable at 0x0013196a. Too many branches */
                    /* WARNING: Treating indirect jump as call */
        (**(code **)(**(long **)(this + 0x10) + 0x28))();
        return;
      }
      goto LAB_00132723;
    }
    uVar29 = *(uint *)(this + 0x94);
    local_58[0] = local_58[0] & 0xffffffffffffff00;
    bVar33 = 0x7ffffff < uVar29 | *(byte *)(*(long *)(*(long *)(this + 0x18) + 0x188) + 0x464);
    local_60 = 0;
    local_68 = local_58;
    local_1e8 = (double)embree::BVHN<4>::preBuild(*(string **)(this + 0x10));
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
  }
  fVar37 = (float)pvVar28 * *(float *)(this + 0x90);
  if (__LC27 <= fVar37) {
    pvVar35 = *(vector_t **)(this + 0x40);
    pvVar34 = (vector_t *)((long)(fVar37 - __LC27) ^ 0x8000000000000000);
    if (pvVar34 < pvVar28) {
      pvVar34 = pvVar28;
    }
    if (pvVar35 < pvVar34) goto LAB_00131249;
LAB_00131996:
    lVar13 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar34;
    if (*(long *)(this + 0x20) != 0) goto LAB_00131386;
LAB_001319a9:
    lVar13 = *(long *)(lVar13 + 0x68);
    if (bVar33 != 0) goto LAB_001319b6;
LAB_00132698:
    embree::sse2::createPrimRefArray
              (&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar34,this + 0x28,lVar13 + 600);
LAB_0013234e:
    local_110 = local_c0;
    local_118 = local_c8;
    uVar18 = *(undefined8 *)(this + 0x18);
    local_158 = local_108;
    uStack_150 = pfStack_100;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    dVar38 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC57 * __LC58;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC36 <= dVar38) {
      uVar12 = (long)(dVar38 - _LC36) ^ 0x8000000000000000;
    }
    else {
      uVar12 = (ulong)dVar38;
    }
    uVar12 = uVar12 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar12);
    uVar23 = FastAllocator::fixSingleThreadThreshold
                       ((FastAllocator *)(*(long *)(this + 0x10) + 0x78),4,0x400,
                        local_110 - local_118,uVar12);
    local_188 = &PTR_operator___0013f540;
    ppuVar9 = *(undefined ***)(this + 0x10);
    local_1a0 = *(undefined ***)(this + 0x48);
    *(undefined8 *)(this + 0x80) = uVar23;
    *(undefined8 *)(this + 0x50) = 4;
    lVar13 = local_110 - local_118;
    *(undefined8 *)(this + 0x58) = 0x28;
    local_180 = *(undefined8 *)(ppuVar9[0xd] + 0x260);
    local_170 = &local_1a8;
    pfStack_f0 = &local_1ac;
    local_190 = (undefined **)0x0;
    local_1a8 = uVar18;
    local_178 = local_1a0;
    local_168 = &local_158;
    if (lVar13 == 1) {
      fVar37 = *(float *)((long)local_1a0 + 0x14) - *(float *)((long)local_1a0 + 4);
      fVar37 = (fVar37 + (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1))) *
               (*(float *)(local_1a0 + 2) - *(float *)local_1a0) +
               fVar37 * (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1));
      dVar38 = (double)(fVar37 + fVar37) + 0.0;
      uVar12 = 1;
    }
    else {
      local_198 = &local_1a0;
      local_108 = &local_190;
      pfStack_100 = pfStack_f0;
      local_f8 = (TaskGroupContext *)&local_198;
      dVar38 = (double)_ZN6embree24parallel_reduce_internalImdZNS_15parallel_reduceImdZNS_4sse230BVHBuilderBinnedFastSpatialSAH5buildINS_10NodeRefPtrILi4EEENS_4BVHNILi4EE11CreateAllocENS_10AABBNode_tIS6_Li4EE7Create2ENSB_4Set2ENS2_17CreateLeafSpatialILi4ENS_9TriangleMILi4EEEEENS2_23TriangleSplitterFactoryENS_5Scene29BuildProgressMonitorInterfaceEEET_T0_T1_T2_RKT3_T4_T5_PNS_7PrimRefEmRKNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEERKNS2_17GeneralBVHBuilder8SettingsEEUlRKNS_5rangeImEEE_St4plusIdEEESM_SL_SL_RKSM_RKSN_RKSO_EUlS18_E_S1D_EESM_SL_SL_SL_SL_S1F_S1H_S1J__isra_0
                                 (lVar13,0,lVar13,&local_190,
                                  (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108);
      uVar12 = local_110 - local_118;
    }
    pfStack_100 = (float *)&local_1b0;
    local_1ac = _LC12 / (float)dVar38;
    local_1b0 = 0x41200000;
    local_198 = (undefined ***)0x0;
    local_108 = &local_1a0;
    local_f8 = (TaskGroupContext *)&local_158;
    TaskScheduler::
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (0,uVar12,1,(_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,
               (TaskGroupContext *)&local_198);
    embree::TaskScheduler::wait();
    if (local_198 != (undefined ***)0x0) {
      local_190 = (undefined **)local_198;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_190);
    }
    local_c8 = 0;
    local_108 = local_158;
    pfStack_100 = (float *)uStack_150;
    local_c0 = local_110 - local_118;
    local_f8 = (TaskGroupContext *)local_148;
    pfStack_f0 = (float *)uStack_140;
    local_e8 = local_138;
    uStack_e0 = uStack_130;
    local_d8 = local_128;
    uStack_d0 = uStack_120;
    local_190 = ppuVar9;
    local_b8 = pvVar34;
    uVar18 = GeneralBVHBuilder::
             build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::Scene::BuildProgressMonitorInterface>
                       (&local_178,local_1a0,
                        (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,ppuVar9 + 0xf,
                        &local_190,&local_188,this + 0x50);
  }
  else {
    pvVar35 = *(vector_t **)(this + 0x40);
    pvVar34 = (vector_t *)(long)fVar37;
    if ((vector_t *)(long)fVar37 < pvVar28) {
      pvVar34 = pvVar28;
    }
    if (pvVar34 <= pvVar35) goto LAB_00131996;
LAB_00131249:
    if (pvVar35 == (vector_t *)0x0) {
      pvVar35 = pvVar34;
      if (pvVar34 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar34;
      }
    }
    else {
      do {
        pvVar35 = (vector_t *)((long)pvVar35 * 2);
        if (pvVar35 == (vector_t *)0x0) {
          pvVar35 = (vector_t *)0x1;
        }
      } while (pvVar35 < pvVar34);
      if (pvVar34 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar34;
      }
    }
    uVar12 = (long)pvVar35 << 5;
    puVar17 = *(undefined8 **)(this + 0x48);
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),uVar12,0);
    if (uVar12 < 0x1c00000) {
      lVar13 = embree::alignedMalloc(uVar12,0x20);
    }
    else {
      lVar13 = embree::os_malloc(uVar12,(bool *)(this + 0x30));
    }
    *(long *)(this + 0x48) = lVar13;
    if (*(long *)(this + 0x38) != 0) {
      uVar12 = 0;
      puVar30 = puVar17;
      while( true ) {
        uVar18 = puVar30[1];
        puVar14 = (undefined8 *)(lVar13 + uVar12 * 0x20);
        *puVar14 = *puVar30;
        puVar14[1] = uVar18;
        uVar18 = puVar30[3];
        puVar14[2] = puVar30[2];
        puVar14[3] = uVar18;
        if (*(ulong *)(this + 0x38) <= uVar12 + 1) break;
        lVar13 = *(long *)(this + 0x48);
        uVar12 = uVar12 + 1;
        puVar30 = puVar30 + 4;
      }
    }
    lVar13 = *(long *)(this + 0x40);
    if (puVar17 != (undefined8 *)0x0) {
      if ((ulong)(lVar13 << 5) < 0x1c00000) {
        embree::alignedFree(puVar17);
      }
      else {
        embree::os_free(puVar17,lVar13 << 5,(bool)this[0x30]);
      }
    }
    if (lVar13 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar13 * -0x20,1);
    }
    lVar13 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar34;
    *(vector_t **)(this + 0x40) = pvVar35;
    if (*(long *)(this + 0x20) == 0) goto LAB_001319a9;
LAB_00131386:
    *(undefined4 *)(lVar13 + 0x1c0) = 1;
    pGVar3 = *(Geometry **)(this + 0x20);
    lVar13 = *(long *)(*(long *)(this + 0x10) + 0x68);
    if (bVar33 == 0) {
      if (pGVar3 == (Geometry *)0x0) goto LAB_00132698;
      embree::sse2::createPrimRefArray
                ((Geometry *)&local_108,(uint)pGVar3,(ulong)*(uint *)(this + 0x94),pvVar34,
                 (BuildProgressMonitor *)(this + 0x28));
      goto LAB_0013234e;
    }
    if (pGVar3 == (Geometry *)0x0) {
LAB_001319b6:
      createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
                ((sse2 *)&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar28,this + 0x28,
                 lVar13 + 600);
    }
    else {
      createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
                ((sse2 *)&local_108,pGVar3,uVar29,(ulong)pvVar28,(vector_t *)(this + 0x28),
                 (BuildProgressMonitor *)(lVar13 + 600));
    }
    local_110 = local_c0;
    local_118 = local_c8;
    local_158 = local_108;
    uStack_150 = pfStack_100;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    dVar38 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC57 * __LC58;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC36 <= dVar38) {
      uVar12 = (long)(dVar38 - _LC36) ^ 0x8000000000000000;
    }
    else {
      uVar12 = (ulong)dVar38;
    }
    uVar12 = uVar12 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar12);
    uVar15 = local_110 - local_118;
    local_170 = *(undefined8 **)(this + 0x10);
    if ((uVar15 == 0) || (uVar12 == 0)) {
      uVar12 = 0x400;
    }
    else {
      bVar33 = *(byte *)((long)local_170 + 0x182);
      uVar16 = embree::TaskScheduler::threadCount();
      lVar13 = (2 - (ulong)bVar33) * local_170[0x11];
      uVar24 = lVar13 * 0x14;
      if (((uVar12 - 1) + uVar24) / uVar24 < uVar16) {
        uVar24 = lVar13 * 0x50;
        if ((long)uVar24 < 0) {
          dVar38 = (double)(uVar24 >> 1) + (double)(uVar24 >> 1);
        }
        else {
          dVar38 = (double)(long)uVar24;
        }
        dVar38 = dVar38 / ((double)uVar12 / (double)uVar15);
        if ((double)((ulong)dVar38 & _LC37) < _LC33) {
          dVar38 = (double)((ulong)((double)(long)dVar38 +
                                   (double)(-(ulong)((double)(long)dVar38 < dVar38) & _LC35)) |
                           ~_LC37 & (ulong)dVar38);
        }
        if (_LC36 <= dVar38) {
          uVar12 = (long)(dVar38 - _LC36) ^ 0x8000000000000000;
        }
        else {
          uVar12 = (ulong)dVar38;
        }
        local_170 = *(undefined8 **)(this + 0x10);
      }
      else {
        local_170 = *(undefined8 **)(this + 0x10);
        uVar12 = 0x400;
      }
    }
    *(ulong *)(this + 0x80) = uVar12;
    local_f8 = *(TaskGroupContext **)(this + 0x60);
    pfStack_f0 = *(float **)(this + 0x68);
    *(undefined8 *)(this + 0x50) = 4;
    local_e8 = *(undefined ****)(this + 0x70);
    uStack_e0 = *(undefined8 *)(this + 0x78);
    *(undefined8 *)(this + 0x58) = 0x28;
    local_108 = *(undefined ****)(this + 0x50);
    pfStack_100 = *(float **)(this + 0x58);
    local_d8 = *(undefined8 *)(this + 0x80);
    uStack_d0 = *(undefined8 *)(this + 0x88);
    local_178 = &PTR_createLeaf_0013ef38;
    uVar18 = embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderV::build
                       (&local_178,local_170 + 0xf,local_170[0xd] + 600,*(undefined8 *)(this + 0x48)
                        ,&local_158);
  }
  local_108 = local_158;
  pfStack_100 = (float *)uStack_150;
  local_f8 = (TaskGroupContext *)local_148;
  pfStack_f0 = (float *)uStack_140;
  local_e8 = local_158;
  uStack_e0 = uStack_150;
  local_d8 = local_148;
  uStack_d0 = uStack_140;
  embree::BVHN<4>::set(*(undefined8 *)(this + 0x10),uVar18,&local_108,local_110 - local_118);
  embree::BVHN<4>::layoutLargeNodes(*(ulong *)(this + 0x10));
  if ((*(long *)(this + 0x18) != 0) && ((*(byte *)(*(long *)(this + 0x18) + 0x230) & 1) == 0)) {
    pvVar6 = *(void **)(this + 0x48);
    lVar13 = *(long *)(this + 0x40);
    if (pvVar6 != (void *)0x0) {
      if ((ulong)(lVar13 << 5) < 0x1c00000) {
        embree::alignedFree(pvVar6);
      }
      else {
        embree::os_free(pvVar6,lVar13 << 5,(bool)this[0x30]);
      }
    }
    if (lVar13 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar13 * -0x20,1);
    }
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x38) = 0;
  }
  lVar13 = *(long *)(this + 0x10);
  pFVar1 = (FastAllocator *)(lVar13 + 0x78);
  FastAllocator::internal_fix_used_blocks(pFVar1);
  plVar22 = *(long **)(lVar13 + 0x1a8);
  plVar20 = *(long **)(lVar13 + 0x1b0);
  if (plVar22 != plVar20) {
    do {
      while( true ) {
        lVar19 = *plVar22;
        if (pFVar1 != *(FastAllocator **)(lVar19 + 8)) break;
        embree::MutexSys::lock();
        if (pFVar1 == *(FastAllocator **)(lVar19 + 8)) {
          LOCK();
          plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x118);
          *plVar32 = *plVar32 + *(long *)(lVar19 + 0xa8) + *(long *)(lVar19 + 0x68);
          UNLOCK();
          LOCK();
          plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x120);
          *plVar32 = *plVar32 +
                     (((*(long *)(lVar19 + 0x98) + *(long *)(lVar19 + 0x58)) -
                      *(long *)(lVar19 + 0x50)) - *(long *)(lVar19 + 0x90));
          UNLOCK();
          LOCK();
          plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x128);
          *plVar32 = *plVar32 + *(long *)(lVar19 + 0xb0) + *(long *)(lVar19 + 0x70);
          UNLOCK();
          *(undefined8 *)(lVar19 + 0x48) = 0;
          *(undefined8 *)(lVar19 + 0x58) = 0;
          *(undefined8 *)(lVar19 + 0x50) = 0;
          *(undefined8 *)(lVar19 + 0x68) = 0;
          *(undefined8 *)(lVar19 + 0x70) = 0;
          *(undefined8 *)(lVar19 + 0x60) = 0;
          *(undefined8 *)(lVar19 + 0x88) = 0;
          *(undefined8 *)(lVar19 + 0x98) = 0;
          *(undefined8 *)(lVar19 + 0x90) = 0;
          *(undefined8 *)(lVar19 + 0xa8) = 0;
          *(undefined8 *)(lVar19 + 0xb0) = 0;
          *(undefined8 *)(lVar19 + 0xa0) = 0;
          LOCK();
          *(undefined8 *)(lVar19 + 8) = 0;
          UNLOCK();
        }
        plVar22 = plVar22 + 1;
        embree::MutexSys::unlock();
        if (plVar20 == plVar22) goto LAB_00131d51;
      }
      plVar22 = plVar22 + 1;
    } while (plVar20 != plVar22);
LAB_00131d51:
    if (*(long *)(lVar13 + 0x1a8) != *(long *)(lVar13 + 0x1b0)) {
      *(long *)(lVar13 + 0x1b0) = *(long *)(lVar13 + 0x1a8);
    }
  }
  embree::BVHN<4>::postBuild(local_1e8);
  if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
LAB_00132723:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleM<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMo...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMo___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  ulong uVar8;
  undefined8 uVar9;
  TaskScheduler *pTVar10;
  long lVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  long local_a8;
  ulong uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar12 = *(ulong *)(this + 8);
  uVar8 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar12 - uVar8) {
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uStack_40 = *(undefined8 *)(this + 0x30);
    uVar12 = uVar12 + uVar8 >> 1;
    local_68 = uVar12;
    uStack_60 = uVar8;
    local_58 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInte___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_68,pTVar4,uVar12 - uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) goto LAB_00132b4e;
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_00132b4e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0013f118;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[7] = local_38;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar12 - uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(undefined8 *)(this + 0x18);
    local_a8 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_90 = *(undefined8 *)(this + 0x20);
    uStack_88 = *(undefined8 *)(this + 0x28);
    uStack_80 = *(undefined8 *)(this + 0x30);
    uVar8 = local_a8 - uVar12;
    uStack_a0 = uVar12;
    local_78 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInte___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_a8,pTVar4,uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_00132b4e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar12 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar12) goto LAB_00132b4e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar12;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar12);
      *puVar3 = &PTR_execute_0013f118;
      puVar3[1] = local_a8;
      puVar3[2] = uStack_a0;
      puVar3[7] = local_78;
      puVar3[3] = local_98;
      puVar3[4] = uStack_90;
      puVar3[5] = uStack_88;
      puVar3[6] = uStack_80;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    lVar6 = uVar8 * 0x70;
    for (; uVar8 < uVar12; uVar8 = uVar8 + 1) {
      local_68 = 0;
      uStack_60 = 0;
      lVar5 = *(long *)(this + 0x20);
      local_58 = 0;
      lVar11 = *(long *)(this + 0x28) + lVar6;
      lVar6 = lVar6 + 0x70;
      uVar9 = sse2::GeneralBVHBuilder::
              BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleM<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
              ::recurse(*(undefined8 *)(this + 0x30),lVar11,1);
      *(undefined8 *)(lVar5 + uVar8 * 8) = uVar9;
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::recurse(ulong *param_1,long *param_2,char param_3)

{
  undefined1 *puVar1;
  SplitInfoT *pSVar2;
  ulong *puVar3;
  MutexSys *pMVar4;
  undefined8 *puVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined4 uVar9;
  undefined8 *puVar10;
  float *pfVar11;
  long lVar12;
  undefined8 uVar13;
  uint uVar14;
  ulong uVar15;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  undefined4 uVar16;
  uint uVar17;
  long lVar18;
  ulong uVar19;
  undefined1 *puVar20;
  ulong uVar21;
  undefined8 *puVar22;
  undefined8 *puVar23;
  long *plVar24;
  long in_FS_OFFSET;
  float fVar25;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar30;
  float fVar31;
  float fVar32;
  float fVar33;
  undefined1 auVar29 [16];
  undefined1 auVar34 [16];
  float fVar35;
  undefined1 auVar36 [16];
  float fVar38;
  undefined1 auVar37 [16];
  FastAllocator *in_stack_00000008;
  MutexSys *in_stack_00000010;
  FastAllocator *local_b18;
  long *local_b08;
  MutexSys *local_b00 [2];
  undefined1 local_af0 [16];
  undefined1 local_ae0 [16];
  undefined1 local_ad0 [16];
  undefined1 local_ac0 [16];
  undefined8 local_ab0;
  undefined8 uStack_aa8;
  undefined8 local_aa0;
  undefined8 uStack_a98;
  long local_a90;
  undefined8 uStack_a88;
  undefined8 local_a80;
  undefined8 uStack_a78;
  long local_a70;
  long local_a68;
  undefined8 local_a60;
  undefined8 local_a50;
  undefined8 uStack_a48;
  undefined4 local_a40;
  undefined4 uStack_a3c;
  undefined4 uStack_a38;
  undefined4 uStack_a34;
  undefined4 local_a30;
  undefined4 uStack_a2c;
  undefined4 uStack_a28;
  undefined4 uStack_a24;
  undefined4 local_a20;
  undefined4 uStack_a1c;
  undefined4 uStack_a18;
  undefined4 uStack_a14;
  long local_a10;
  long local_a08;
  undefined8 local_a00;
  MutexSys *local_9f0;
  undefined1 local_9e8;
  ulong *local_9e0;
  long lStack_9d8;
  long local_9d0;
  long lStack_9c8;
  ulong *local_9c0;
  long lStack_9b8;
  long local_9b0;
  long lStack_9a8;
  long local_9a0;
  long lStack_998;
  long local_990;
  MutexSys *local_980;
  long *local_978;
  ulong *local_970;
  long lStack_968;
  long local_960;
  long lStack_958;
  undefined8 local_950;
  undefined8 uStack_948;
  undefined8 local_940;
  undefined8 uStack_938;
  undefined8 local_930;
  undefined8 uStack_928;
  long local_920;
  float local_910;
  undefined4 local_90c;
  undefined4 local_908;
  int local_904;
  undefined8 local_900;
  undefined8 local_8f0;
  undefined8 uStack_8e8;
  undefined8 local_8e0;
  undefined8 uStack_8d8;
  float local_8d0 [3];
  int local_8c4;
  int local_8c0;
  undefined4 local_8bc;
  undefined8 local_8b0;
  undefined8 uStack_8a8;
  undefined8 local_8a0;
  undefined8 uStack_898;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
  local_880 [84];
  float local_82c;
  float local_800 [3];
  int local_7f4;
  undefined8 local_7f0;
  undefined8 uStack_7e8;
  undefined8 local_7e0;
  undefined8 uStack_7d8;
  undefined8 local_7d0;
  undefined8 uStack_7c8;
  undefined1 local_7b0;
  float local_7ac;
  long local_750;
  undefined1 local_748 [8];
  undefined8 local_740;
  undefined8 uStack_738;
  undefined8 local_730;
  undefined8 uStack_728;
  long local_720 [4];
  long local_700;
  long local_6f8;
  undefined8 local_6f0;
  long local_6e0;
  undefined1 local_6d8;
  undefined8 local_6d0;
  undefined8 uStack_6c8;
  undefined4 local_6c0;
  undefined4 uStack_6bc;
  undefined4 uStack_6b8;
  undefined4 uStack_6b4;
  undefined4 local_6b0;
  undefined4 uStack_6ac;
  undefined4 uStack_6a8;
  undefined4 uStack_6a4;
  undefined4 local_6a0;
  undefined4 uStack_69c;
  undefined4 uStack_698;
  undefined4 uStack_694;
  long local_690;
  long local_688;
  undefined8 local_680;
  long local_670;
  undefined1 local_668;
  undefined4 local_660;
  undefined4 uStack_65c;
  undefined4 uStack_658;
  undefined4 local_650;
  undefined4 uStack_64c;
  undefined4 uStack_648;
  long local_620;
  long lStack_618;
  undefined1 local_5f8;
  undefined4 uStack_5f0;
  undefined4 uStack_5ec;
  undefined4 uStack_5e8;
  undefined4 uStack_5e0;
  undefined4 uStack_5dc;
  undefined4 uStack_5d8;
  long local_5b0;
  long local_5a8;
  undefined1 local_588;
  undefined4 uStack_580;
  undefined4 uStack_57c;
  undefined4 uStack_578;
  undefined4 uStack_570;
  undefined4 uStack_56c;
  undefined4 uStack_568;
  long local_540;
  long local_538;
  undefined1 local_518;
  undefined4 uStack_510;
  undefined4 uStack_50c;
  undefined4 uStack_508;
  undefined4 uStack_500;
  undefined4 uStack_4fc;
  undefined4 uStack_4f8;
  long local_4d0;
  long local_4c8;
  undefined1 local_4a8;
  undefined4 uStack_4a0;
  undefined4 uStack_49c;
  undefined4 uStack_498;
  undefined4 uStack_490;
  undefined4 uStack_48c;
  undefined4 uStack_488;
  long local_460;
  long local_458;
  undefined1 local_438;
  undefined4 uStack_430;
  undefined4 uStack_42c;
  undefined4 uStack_428;
  undefined4 uStack_420;
  undefined4 uStack_41c;
  undefined4 uStack_418;
  long local_3f0;
  long local_3e8;
  undefined1 local_3c8;
  undefined4 uStack_3c0;
  undefined4 uStack_3bc;
  undefined4 uStack_3b8;
  undefined4 uStack_3b0;
  undefined4 uStack_3ac;
  undefined4 uStack_3a8;
  long local_380;
  long local_378;
  undefined1 local_358;
  undefined4 uStack_350;
  undefined4 uStack_34c;
  undefined4 uStack_348;
  undefined4 uStack_340;
  undefined4 uStack_33c;
  undefined4 uStack_338;
  long local_310;
  long local_308;
  undefined1 local_2e8;
  undefined4 uStack_2e0;
  undefined4 uStack_2dc;
  undefined4 uStack_2d8;
  undefined4 uStack_2d0;
  undefined4 uStack_2cc;
  undefined4 uStack_2c8;
  long local_2a0;
  long local_298;
  undefined1 local_278;
  undefined4 uStack_270;
  undefined4 uStack_26c;
  undefined4 uStack_268;
  undefined4 uStack_260;
  undefined4 uStack_25c;
  undefined4 uStack_258;
  long local_230;
  long local_228;
  undefined1 local_208;
  undefined4 uStack_200;
  undefined4 uStack_1fc;
  undefined4 uStack_1f8;
  undefined4 uStack_1f0;
  undefined4 uStack_1ec;
  undefined4 uStack_1e8;
  long local_1c0;
  long local_1b8;
  undefined1 local_198;
  undefined4 uStack_190;
  undefined4 uStack_18c;
  undefined4 uStack_188;
  undefined4 uStack_180;
  undefined4 uStack_17c;
  undefined4 uStack_178;
  long local_150;
  long local_148;
  undefined1 local_128;
  undefined4 uStack_120;
  undefined4 uStack_11c;
  undefined4 uStack_118;
  undefined4 uStack_110;
  undefined4 uStack_10c;
  undefined4 uStack_108;
  long local_e0;
  long local_d8;
  undefined1 local_b8;
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined4 uStack_a8;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 uStack_98;
  long local_70;
  long local_68;
  undefined1 auStack_50 [8];
  long local_48;
  
  lVar12 = lRam00000000001333a3;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_b18 = in_stack_00000008;
  if (in_stack_00000008 == (FastAllocator *)0x0) {
    local_b18 = *(FastAllocator **)param_1[10];
    in_stack_00000010 = *(MutexSys **)(in_FS_OFFSET + lRam00000000001333a3);
    if (in_stack_00000010 == (MutexSys *)0x0) {
      in_stack_00000010 = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
      embree::MutexSys::MutexSys(in_stack_00000010);
      *(undefined8 *)(in_stack_00000010 + 8) = 0;
      *(MutexSys **)(in_stack_00000010 + 0x40) = in_stack_00000010;
      *(undefined8 *)(in_stack_00000010 + 0x48) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x50) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x58) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x60) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x68) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x70) = 0;
      *(MutexSys **)(in_stack_00000010 + 0x80) = in_stack_00000010;
      *(undefined8 *)(in_stack_00000010 + 0x88) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x90) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x98) = 0;
      *(undefined8 *)(in_stack_00000010 + 0xa0) = 0;
      *(undefined8 *)(in_stack_00000010 + 0xa8) = 0;
      *(undefined8 *)(in_stack_00000010 + 0xb0) = 0;
      *(MutexSys **)(in_FS_OFFSET + lVar12) = in_stack_00000010;
      embree::MutexSys::lock();
      local_980 = in_stack_00000010;
      if (__MutexSys == _preBuild) {
        std::
        vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
        ::
        _M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>
                  ((vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
                    *)&FastAllocator::s_thread_local_allocators,__MutexSys,&local_980);
        pMVar4 = local_980;
        if (local_980 != (MutexSys *)0x0) {
          embree::MutexSys::~MutexSys(local_980);
          embree::alignedFree(pMVar4);
        }
      }
      else {
        *__MutexSys = in_stack_00000010;
        __MutexSys = __MutexSys + 1;
      }
      embree::MutexSys::unlock();
    }
    in_stack_00000010 = in_stack_00000010 + 0x40;
  }
  if ((param_3 != '\0') && ((ulong)(param_2[0xb] - param_2[10]) <= param_1[6])) {
    if ((code *)**(undefined8 **)param_1[0x10] == Scene::BuildProgressMonitorInterface::operator())
    {
      embree::Scene::progressMonitor((double)(ulong)(param_2[0xb] - param_2[10]));
    }
    else {
      (*(code *)**(undefined8 **)param_1[0x10])();
    }
  }
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::find
            (local_880,(PrimInfoExtRange *)param_1[9],(ulong)(param_2 + 2));
  lVar12 = param_2[10];
  uVar21 = param_2[0xb] - lVar12;
  if (((param_1[3] < uVar21) && (*param_2 + 8U < param_1[1])) &&
     ((param_1[4] < uVar21 ||
      (fVar27 = *(float *)((long)param_2 + 0x24) - *(float *)((long)param_2 + 0x14),
      fVar27 = (*(float *)(param_2 + 4) - *(float *)(param_2 + 2)) *
               (fVar27 + (*(float *)(param_2 + 5) - *(float *)(param_2 + 3))) +
               fVar27 * (*(float *)(param_2 + 5) - *(float *)(param_2 + 3)),
      fVar27 * *(float *)(param_1 + 5) + *(float *)((long)param_1 + 0x2c) * local_82c <
      (float)((uVar21 - 1) + (1L << ((byte)param_1[2] & 0x3f)) >> ((byte)param_1[2] & 0x3f)) *
      fVar27 * *(float *)((long)param_1 + 0x2c))))) {
    HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::split
              ((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                *)param_1[9],(Split2 *)local_880,(PrimInfoExtRange *)(param_2 + 2),
               (PrimInfoExtRange *)&local_ab0,(PrimInfoExtRange *)&local_a50);
    uVar9 = _LC3;
    fVar27 = _LC1;
    local_748[0] = 0;
    local_6d8 = 0;
    local_740 = local_ab0;
    uStack_738 = uStack_aa8;
    local_720[2] = local_a80;
    local_720[3] = uStack_a78;
    local_730 = local_aa0;
    uStack_728 = uStack_a98;
    local_750 = *param_2 + 1;
    local_720[0] = local_a90;
    local_720[1] = uStack_a88;
    local_690 = local_a10;
    local_6d0 = local_a50;
    uStack_6c8 = uStack_a48;
    local_700 = local_a70;
    local_6f8 = local_a68;
    local_6f0 = local_a60;
    local_688 = local_a08;
    local_6c0 = local_a40;
    uStack_6bc = uStack_a3c;
    uStack_6b8 = uStack_a38;
    uStack_6b4 = uStack_a34;
    local_6b0 = local_a30;
    uStack_6ac = uStack_a2c;
    uStack_6a8 = uStack_a28;
    uStack_6a4 = uStack_a24;
    local_6a0 = local_a20;
    uStack_69c = uStack_a1c;
    uStack_698 = uStack_a18;
    uStack_694 = uStack_a14;
    local_680 = local_a00;
    local_6e0 = local_750;
    if (*param_1 < 3) {
      lVar12 = 0xe0;
      uVar21 = 2;
    }
    else {
      uVar21 = 2;
      plVar24 = &local_670;
      do {
        uVar15 = 0;
        uVar19 = 0xffffffffffffffff;
        pfVar11 = (float *)&local_740;
        lVar12 = local_6f8;
        lVar18 = local_700;
        fVar26 = _LC1;
        while( true ) {
          if ((param_1[3] < (ulong)(lVar12 - lVar18)) &&
             (fVar25 = (pfVar11[4] - *pfVar11) *
                       ((pfVar11[5] - pfVar11[1]) + (pfVar11[6] - pfVar11[2])) +
                       (pfVar11[5] - pfVar11[1]) * (pfVar11[6] - pfVar11[2]), fVar26 < fVar25)) {
            uVar19 = uVar15;
            fVar26 = fVar25;
          }
          uVar15 = uVar15 + 1;
          if (uVar15 == uVar21) break;
          lVar12 = *(long *)(pfVar11 + 0x2e);
          lVar18 = *(long *)(pfVar11 + 0x2c);
          pfVar11 = pfVar11 + 0x1c;
        }
        if (uVar19 == 0xffffffffffffffff) break;
        puVar3 = (ulong *)param_1[9];
        local_9e8 = 0;
        local_9e0 = (ulong *)CONCAT44(uVar9,uVar9);
        lStack_9d8 = CONCAT44(uVar9,uVar9);
        local_9a0 = 0;
        local_9d0 = CONCAT44(fVar27,fVar27);
        lStack_9c8 = CONCAT44(fVar27,fVar27);
        lStack_998 = 0;
        lVar18 = uVar19 * 0x70;
        local_990 = 0;
        local_978 = (long *)((ulong)local_978 & 0xffffffffffffff00);
        local_9f0 = (MutexSys *)(*param_2 + 1);
        local_930 = 0;
        uStack_928 = 0;
        pSVar2 = (SplitInfoT *)(&local_740 + uVar19 * 0xe);
        lVar12 = local_720[uVar19 * 0xe + 5];
        local_920 = 0;
        local_9c0 = local_9e0;
        lStack_9b8 = lStack_9d8;
        local_9b0 = local_9d0;
        lStack_9a8 = lStack_9c8;
        local_980 = local_9f0;
        local_970 = local_9e0;
        lStack_968 = lStack_9d8;
        local_960 = local_9d0;
        lStack_958 = lStack_9c8;
        local_950 = local_9e0;
        uStack_948 = lStack_9d8;
        local_940 = local_9d0;
        uStack_938 = lStack_9c8;
        if ((ulong)(lVar12 - local_720[uVar19 * 0xe + 4]) < 0xc00) {
          HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
          ::sequential_object_find((PrimInfoExtRange *)&local_910,*puVar3,pSVar2);
          uVar16 = extraout_EDX;
          fVar26 = local_910;
          if (local_720[uVar19 * 0xe + 6] == lVar12) goto LAB_00133206;
LAB_001334b1:
          fVar26 = local_910;
          auVar34 = maxps(local_af0,local_ad0);
          auVar29 = minps(local_ae0,local_ac0);
          pfVar11 = (float *)puVar3[2];
          auVar36._4_4_ = -(uint)(auVar34._4_4_ <= auVar29._4_4_);
          auVar36._0_4_ = -(uint)(auVar34._0_4_ <= auVar29._0_4_);
          auVar36._8_4_ = -(uint)(auVar34._8_4_ <= auVar29._8_4_);
          auVar36._12_4_ = -(uint)(auVar34._12_4_ <= auVar29._12_4_);
          uVar17 = movmskps(uVar16,auVar36);
          auVar37._4_4_ = -(uint)(pfVar11[1] <= pfVar11[5]);
          auVar37._0_4_ = -(uint)(*pfVar11 <= pfVar11[4]);
          auVar37._8_4_ = -(uint)(pfVar11[2] <= pfVar11[6]);
          auVar37._12_4_ = -(uint)(pfVar11[3] <= pfVar11[7]);
          uVar14 = movmskps((int)pfVar11,auVar37);
          uVar17 = ~uVar17 & 7;
          if (uVar17 == 0) {
            fVar30 = auVar29._4_4_ - auVar34._4_4_;
            fVar32 = auVar29._8_4_ - auVar34._8_4_;
            fVar25 = 0.0;
            fVar30 = (fVar30 + fVar32) * (auVar29._0_4_ - auVar34._0_4_) + fVar30 * fVar32;
            fVar30 = fVar30 + fVar30;
            if ((uVar14 & 7) == 7) goto LAB_0013352a;
LAB_00133559:
            if (fVar25 <= fVar30) {
              fVar25 = *(float *)pSVar2;
              fVar32 = *(float *)((long)&local_740 + lVar18 + 4);
              fVar38 = *(float *)(&uStack_738 + uVar19 * 0xe);
              fVar28 = *(float *)(&local_730 + uVar19 * 0xe);
              fVar31 = *(float *)((long)&local_730 + lVar18 + 4);
              fVar33 = *(float *)(&uStack_728 + uVar19 * 0xe);
              auVar29._4_4_ = -(uint)(fVar32 <= fVar31);
              auVar29._0_4_ = -(uint)(fVar25 <= fVar28);
              auVar29._8_4_ = -(uint)(fVar38 <= fVar33);
              auVar29._12_4_ =
                   -(uint)(*(float *)((long)&uStack_738 + lVar18 + 4) <=
                          *(float *)((long)&uStack_728 + lVar18 + 4));
              uVar14 = movmskps(uVar17,auVar29);
              fVar35 = 0.0;
              if ((~uVar14 & 7) == 0) goto LAB_00134026;
LAB_00134055:
              if (fVar35 <= fVar30) goto LAB_0013405e;
            }
            goto LAB_00133206;
          }
          if ((uVar14 & 7) == 7) {
            fVar30 = 0.0;
LAB_0013352a:
            fVar25 = pfVar11[5] - pfVar11[1];
            fVar32 = pfVar11[6] - pfVar11[2];
            fVar25 = (fVar25 + fVar32) * (pfVar11[4] - *pfVar11) + fVar25 * fVar32;
            fVar25 = (fVar25 + fVar25) * __LC51;
            goto LAB_00133559;
          }
          fVar25 = *(float *)pSVar2;
          fVar32 = *(float *)((long)&local_740 + lVar18 + 4);
          fVar38 = *(float *)(&uStack_738 + uVar19 * 0xe);
          fVar28 = *(float *)(&local_730 + uVar19 * 0xe);
          fVar31 = *(float *)((long)&local_730 + lVar18 + 4);
          fVar33 = *(float *)(&uStack_728 + uVar19 * 0xe);
          auVar34._4_4_ = -(uint)(fVar32 <= fVar31);
          auVar34._0_4_ = -(uint)(fVar25 <= fVar28);
          auVar34._8_4_ = -(uint)(fVar38 <= fVar33);
          auVar34._12_4_ =
               -(uint)(*(float *)((long)&uStack_738 + lVar18 + 4) <=
                      *(float *)((long)&uStack_728 + lVar18 + 4));
          uVar14 = movmskps(uVar17,auVar34);
          fVar30 = 0.0;
          if ((~uVar14 & 7) == 0) {
LAB_00134026:
            fVar25 = ((fVar31 - fVar32) + (fVar33 - fVar38)) * (fVar28 - fVar25) +
                     (fVar31 - fVar32) * (fVar33 - fVar38);
            fVar35 = (fVar25 + fVar25) * __LC52;
            goto LAB_00134055;
          }
LAB_0013405e:
          if ((ulong)(lVar12 - local_720[uVar19 * 0xe + 4]) < 0xc00) {
            HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
            ::sequential_spatial_find((PrimInfoExtRange *)local_8d0,*puVar3);
          }
          else {
            HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
            ::parallel_spatial_find((PrimInfoExtRange *)local_8d0,(ulong)puVar3);
          }
          if ((_LC30 * fVar26 <= local_8d0[0]) ||
             (local_7f4 = local_8c4,
             (ulong)(local_720[uVar19 * 0xe + 6] - local_720[uVar19 * 0xe + 5]) <
             (ulong)(((long)(local_8c4 + local_8c0) + local_720[uVar19 * 0xe + 4]) -
                    local_720[uVar19 * 0xe + 5]))) goto LAB_00133206;
          local_7e0 = local_8b0;
          uStack_7d8 = uStack_8a8;
          local_7b0 = 1;
          local_7d0 = local_8a0;
          uStack_7c8 = uStack_898;
          local_800[1] = (float)local_8d0._4_8_;
          local_800[2] = SUB84(local_8d0._4_8_,4);
          local_7ac = local_8d0[0];
          local_7f0 = CONCAT44(local_8bc,local_8c0);
        }
        else {
          HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
          ::parallel_object_find((PrimInfoExtRange *)&local_910,(ulong)puVar3,pSVar2);
          lVar12 = local_720[uVar19 * 0xe + 5];
          uVar16 = extraout_EDX_00;
          fVar26 = local_910;
          if (local_720[uVar19 * 0xe + 6] != lVar12) goto LAB_001334b1;
LAB_00133206:
          local_7b0 = 0;
          local_800[1] = (float)local_90c;
          local_800[2] = (float)local_908;
          local_7e0 = local_8f0;
          uStack_7d8 = uStack_8e8;
          local_7f4 = local_904;
          local_7d0 = local_8e0;
          uStack_7c8 = uStack_8d8;
          local_7f0 = local_900;
          local_7ac = fVar26;
        }
        uVar21 = uVar21 + 1;
        local_800[0] = local_7ac;
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        split((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
               *)param_1[9],(Split2 *)local_800,(PrimInfoExtRange *)pSVar2,
              (PrimInfoExtRange *)&local_9e0,(PrimInfoExtRange *)&local_970);
        *(MutexSys **)(local_748 + uVar19 * 0x70 + -8) = local_9f0;
        local_748[uVar19 * 0x70] = local_9e8;
        (&local_740)[uVar19 * 0xe] = local_9e0;
        (&uStack_738)[uVar19 * 0xe] = lStack_9d8;
        local_720[uVar19 * 0xe + 6] = local_990;
        (&local_730)[uVar19 * 0xe] = local_9d0;
        (&uStack_728)[uVar19 * 0xe] = lStack_9c8;
        local_720[uVar19 * 0xe] = (long)local_9c0;
        local_720[uVar19 * 0xe + 1] = lStack_9b8;
        local_720[uVar19 * 0xe + 2] = local_9b0;
        local_720[uVar19 * 0xe + 3] = lStack_9a8;
        local_720[uVar19 * 0xe + 4] = local_9a0;
        local_720[uVar19 * 0xe + 5] = lStack_998;
        *plVar24 = (long)local_980;
        plVar24[2] = (long)local_970;
        plVar24[3] = lStack_968;
        *(undefined1 *)(plVar24 + 1) = local_978._0_1_;
        plVar24[4] = local_960;
        plVar24[5] = lStack_958;
        *(undefined4 *)(plVar24 + 6) = (undefined4)local_950;
        *(undefined4 *)((long)plVar24 + 0x34) = local_950._4_4_;
        *(undefined4 *)(plVar24 + 7) = (undefined4)uStack_948;
        *(undefined4 *)((long)plVar24 + 0x3c) = uStack_948._4_4_;
        *(undefined4 *)(plVar24 + 8) = (undefined4)local_940;
        *(undefined4 *)((long)plVar24 + 0x44) = local_940._4_4_;
        *(undefined4 *)(plVar24 + 9) = (undefined4)uStack_938;
        *(undefined4 *)((long)plVar24 + 0x4c) = uStack_938._4_4_;
        *(undefined4 *)(plVar24 + 10) = (undefined4)local_930;
        *(undefined4 *)((long)plVar24 + 0x54) = local_930._4_4_;
        *(undefined4 *)(plVar24 + 0xb) = (undefined4)uStack_928;
        *(undefined4 *)((long)plVar24 + 0x5c) = uStack_928._4_4_;
        plVar24[0xc] = local_920;
        plVar24 = plVar24 + 0xe;
      } while (uVar21 < *param_1);
      lVar12 = uVar21 * 0x70;
    }
    local_b08 = &local_750;
    uVar19 = param_1[7];
    if (uVar19 < (ulong)(param_2[0xb] - param_2[10])) {
      local_748[0] = (ulong)(local_6f8 - local_700) <= uVar19;
      local_6d8 = (ulong)(local_688 - local_690) <= uVar19;
      if (((((uVar21 != 2) && (local_668 = (ulong)(lStack_618 - local_620) <= uVar19, uVar21 != 3))
           && (local_5f8 = (ulong)(local_5a8 - local_5b0) <= uVar19, uVar21 != 4)) &&
          ((((local_588 = (ulong)(local_538 - local_540) <= uVar19, uVar21 != 5 &&
             (local_518 = (ulong)(local_4c8 - local_4d0) <= uVar19, uVar21 != 6)) &&
            ((local_4a8 = (ulong)(local_458 - local_460) <= uVar19, uVar21 != 7 &&
             ((local_438 = (ulong)(local_3e8 - local_3f0) <= uVar19, uVar21 != 8 &&
              (local_3c8 = (ulong)(local_378 - local_380) <= uVar19, uVar21 != 9)))))) &&
           (local_358 = (ulong)(local_308 - local_310) <= uVar19, uVar21 != 10)))) &&
         ((((local_2e8 = (ulong)(local_298 - local_2a0) <= uVar19, uVar21 != 0xb &&
            (local_278 = (ulong)(local_228 - local_230) <= uVar19, uVar21 != 0xc)) &&
           (local_208 = (ulong)(local_1b8 - local_1c0) <= uVar19, uVar21 != 0xd)) &&
          ((local_198 = (ulong)(local_148 - local_150) <= uVar19, uVar21 != 0xe &&
           (local_128 = (ulong)(local_d8 - local_e0) <= uVar19, uVar21 == 0x10)))))) {
        local_b8 = (ulong)(local_68 - local_70) <= uVar19;
      }
    }
    if (lVar12 != 0) {
      uVar19 = (lVar12 >> 4) * 0x6db6db6db6db6db7;
      puVar1 = (undefined1 *)((long)local_b08 + lVar12);
      if (uVar19 == 0) {
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (local_b08,puVar1,0xfffffffffffffffe);
      }
      else {
        lVar18 = 0x3f;
        if (uVar19 != 0) {
          for (; uVar19 >> lVar18 == 0; lVar18 = lVar18 + -1) {
          }
        }
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (local_b08,puVar1,(long)(int)lVar18 * 2);
        if (0x700 < lVar12) {
          puVar20 = auStack_50;
          std::
          __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                    (local_b08,puVar20);
          do {
            puVar20 = puVar20 + 0x70;
            std::
            __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                      ();
          } while (puVar1 != puVar20);
          goto LAB_0013366f;
        }
      }
      std::
      __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (local_b08,puVar1);
    }
LAB_0013366f:
    local_9f0 = (MutexSys *)0x80;
    pMVar4 = *(MutexSys **)in_stack_00000010;
    if (local_b18 != *(FastAllocator **)(pMVar4 + 8)) {
      embree::MutexSys::lock();
      if (*(long *)(pMVar4 + 8) != 0) {
        LOCK();
        *(long *)(*(long *)(pMVar4 + 8) + 0x118) =
             *(long *)(*(long *)(pMVar4 + 8) + 0x118) +
             *(long *)(pMVar4 + 0xa8) + *(long *)(pMVar4 + 0x68);
        UNLOCK();
        LOCK();
        *(long *)(*(long *)(pMVar4 + 8) + 0x120) =
             *(long *)(*(long *)(pMVar4 + 8) + 0x120) +
             (((*(long *)(pMVar4 + 0x98) + *(long *)(pMVar4 + 0x58)) - *(long *)(pMVar4 + 0x50)) -
             *(long *)(pMVar4 + 0x90));
        UNLOCK();
        LOCK();
        *(long *)(*(long *)(pMVar4 + 8) + 0x128) =
             *(long *)(*(long *)(pMVar4 + 8) + 0x128) +
             *(long *)(pMVar4 + 0xb0) + *(long *)(pMVar4 + 0x70);
        UNLOCK();
      }
      *(undefined8 *)(pMVar4 + 0x48) = 0;
      *(undefined8 *)(pMVar4 + 0x58) = 0;
      *(undefined8 *)(pMVar4 + 0x50) = 0;
      *(undefined8 *)(pMVar4 + 0x68) = 0;
      *(undefined8 *)(pMVar4 + 0x70) = 0;
      *(undefined8 *)(pMVar4 + 0x60) = 0;
      if (local_b18 == (FastAllocator *)0x0) {
        *(undefined8 *)(pMVar4 + 0x88) = 0;
        uVar13 = 0;
        *(undefined8 *)(pMVar4 + 0x98) = 0;
        *(undefined8 *)(pMVar4 + 0x90) = 0;
        *(undefined8 *)(pMVar4 + 0xa8) = 0;
        *(undefined8 *)(pMVar4 + 0xb0) = 0;
      }
      else {
        uVar13 = *(undefined8 *)(local_b18 + 0x10);
        *(undefined8 *)(pMVar4 + 0x88) = 0;
        *(undefined8 *)(pMVar4 + 0x98) = 0;
        *(undefined8 *)(pMVar4 + 0x60) = uVar13;
        *(undefined8 *)(pMVar4 + 0x90) = 0;
        *(undefined8 *)(pMVar4 + 0xa8) = 0;
        *(undefined8 *)(pMVar4 + 0xb0) = 0;
        *(undefined8 *)(pMVar4 + 0xa0) = 0;
        uVar13 = *(undefined8 *)(local_b18 + 0x10);
      }
      *(undefined8 *)(pMVar4 + 0xa0) = uVar13;
      LOCK();
      *(FastAllocator **)(pMVar4 + 8) = local_b18;
      UNLOCK();
      local_980 = pMVar4;
      embree::MutexSys::lock();
      plVar24 = *(long **)(local_b18 + 0x138);
      if (plVar24 == *(long **)(local_b18 + 0x140)) {
        std::
        vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
        ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                  ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                    *)(local_b18 + 0x130),plVar24,&local_980);
      }
      else {
        *plVar24 = (long)pMVar4;
        *(long *)(local_b18 + 0x138) = *(long *)(local_b18 + 0x138) + 8;
      }
      embree::MutexSys::unlock();
      embree::MutexSys::unlock();
    }
    lVar12 = *(long *)(in_stack_00000010 + 0x10);
    *(long *)(in_stack_00000010 + 0x28) = *(long *)(in_stack_00000010 + 0x28) + 0x80;
    uVar15 = (ulong)(-(int)lVar12 & 0xf);
    uVar19 = lVar12 + 0x80 + uVar15;
    *(ulong *)(in_stack_00000010 + 0x10) = uVar19;
    if (*(ulong *)(in_stack_00000010 + 0x18) < uVar19) {
      *(long *)(in_stack_00000010 + 0x10) = lVar12;
      if (*(MutexSys **)(in_stack_00000010 + 0x20) < (MutexSys *)0x200) {
        puVar10 = (undefined8 *)FastAllocator::malloc(local_b18,(ulong *)&local_9f0,0x40,false);
      }
      else {
        local_980 = *(MutexSys **)(in_stack_00000010 + 0x20);
        puVar10 = (undefined8 *)FastAllocator::malloc(local_b18,(ulong *)&local_980,0x40,true);
        *(undefined8 **)(in_stack_00000010 + 8) = puVar10;
        lVar12 = *(long *)(in_stack_00000010 + 0x10);
        *(long *)(in_stack_00000010 + 0x10) = 0x80;
        *(long *)(in_stack_00000010 + 0x30) =
             (*(long *)(in_stack_00000010 + 0x18) + *(long *)(in_stack_00000010 + 0x30)) - lVar12;
        *(MutexSys **)(in_stack_00000010 + 0x18) = local_980;
        if (local_980 < (MutexSys *)0x80) {
          *(long *)(in_stack_00000010 + 0x10) = 0;
          local_980 = *(MutexSys **)(in_stack_00000010 + 0x20);
          puVar10 = (undefined8 *)FastAllocator::malloc(local_b18,(ulong *)&local_980,0x40,false);
          *(undefined8 **)(in_stack_00000010 + 8) = puVar10;
          lVar12 = *(long *)(in_stack_00000010 + 0x10);
          *(long *)(in_stack_00000010 + 0x10) = 0x80;
          *(long *)(in_stack_00000010 + 0x30) =
               (*(long *)(in_stack_00000010 + 0x18) + *(long *)(in_stack_00000010 + 0x30)) - lVar12;
          *(MutexSys **)(in_stack_00000010 + 0x18) = local_980;
          if (local_980 < (MutexSys *)0x80) {
            puVar10 = (undefined8 *)0x0;
            *(long *)(in_stack_00000010 + 0x10) = 0;
          }
        }
      }
    }
    else {
      *(ulong *)(in_stack_00000010 + 0x30) = *(long *)(in_stack_00000010 + 0x30) + uVar15;
      puVar10 = (undefined8 *)(*(long *)(in_stack_00000010 + 8) + -0x80 + uVar19);
    }
    *puVar10 = 8;
    uVar13 = CONCAT44(uVar9,uVar9);
    uVar6 = CONCAT44(uVar9,uVar9);
    puVar10[1] = 8;
    uVar7 = CONCAT44(fVar27,fVar27);
    uVar8 = CONCAT44(fVar27,fVar27);
    puVar10[2] = 8;
    puVar10[4] = uVar13;
    puVar10[5] = uVar6;
    puVar10[3] = 8;
    *(float *)(puVar10 + 4) = (float)local_740;
    puVar10[8] = uVar13;
    puVar10[9] = uVar6;
    puVar10[0xc] = uVar13;
    puVar10[0xd] = uVar6;
    *(undefined4 *)(puVar10 + 8) = local_740._4_4_;
    puVar10[0xe] = uVar7;
    puVar10[0xf] = uVar8;
    puVar10[10] = uVar7;
    puVar10[0xb] = uVar8;
    puVar10[6] = uVar7;
    puVar10[7] = uVar8;
    *(undefined4 *)(puVar10 + 0xc) = (undefined4)uStack_738;
    *(undefined4 *)(puVar10 + 6) = (undefined4)local_730;
    *(undefined4 *)(puVar10 + 10) = local_730._4_4_;
    *(undefined4 *)(puVar10 + 0xe) = (undefined4)uStack_728;
    *(undefined4 *)((long)puVar10 + 0x44) = local_6d0._4_4_;
    *(undefined4 *)((long)puVar10 + 0x24) = (undefined4)local_6d0;
    *(undefined4 *)((long)puVar10 + 100) = (undefined4)uStack_6c8;
    *(undefined4 *)((long)puVar10 + 0x34) = local_6c0;
    *(undefined4 *)((long)puVar10 + 0x54) = uStack_6bc;
    *(undefined4 *)((long)puVar10 + 0x74) = uStack_6b8;
    if (uVar21 != 2) {
      *(undefined4 *)(puVar10 + 9) = uStack_65c;
      *(undefined4 *)(puVar10 + 0xd) = uStack_658;
      *(undefined4 *)(puVar10 + 5) = local_660;
      *(undefined4 *)(puVar10 + 7) = local_650;
      *(undefined4 *)(puVar10 + 0xb) = uStack_64c;
      *(undefined4 *)(puVar10 + 0xf) = uStack_648;
      if (uVar21 != 3) {
        *(undefined4 *)((long)puVar10 + 0x4c) = uStack_5ec;
        *(undefined4 *)((long)puVar10 + 0x6c) = uStack_5e8;
        *(undefined4 *)((long)puVar10 + 0x2c) = uStack_5f0;
        *(undefined4 *)((long)puVar10 + 0x3c) = uStack_5e0;
        *(undefined4 *)((long)puVar10 + 0x5c) = uStack_5dc;
        *(undefined4 *)((long)puVar10 + 0x7c) = uStack_5d8;
        if (uVar21 != 4) {
          *(undefined4 *)(puVar10 + 10) = uStack_57c;
          *(undefined4 *)(puVar10 + 0xe) = uStack_578;
          *(undefined4 *)(puVar10 + 6) = uStack_580;
          *(undefined4 *)(puVar10 + 8) = uStack_570;
          *(undefined4 *)(puVar10 + 0xc) = uStack_56c;
          *(undefined4 *)(puVar10 + 0x10) = uStack_568;
          if (uVar21 != 5) {
            *(undefined4 *)((long)puVar10 + 0x54) = uStack_50c;
            *(undefined4 *)((long)puVar10 + 0x74) = uStack_508;
            *(undefined4 *)((long)puVar10 + 0x34) = uStack_510;
            *(undefined4 *)((long)puVar10 + 0x44) = uStack_500;
            *(undefined4 *)((long)puVar10 + 100) = uStack_4fc;
            *(undefined4 *)((long)puVar10 + 0x84) = uStack_4f8;
            if (uVar21 != 6) {
              *(undefined4 *)(puVar10 + 0xb) = uStack_49c;
              *(undefined4 *)(puVar10 + 0xf) = uStack_498;
              *(undefined4 *)(puVar10 + 7) = uStack_4a0;
              *(undefined4 *)(puVar10 + 9) = uStack_490;
              *(undefined4 *)(puVar10 + 0xd) = uStack_48c;
              *(undefined4 *)(puVar10 + 0x11) = uStack_488;
              if (uVar21 != 7) {
                *(undefined4 *)((long)puVar10 + 0x5c) = uStack_42c;
                *(undefined4 *)((long)puVar10 + 0x7c) = uStack_428;
                *(undefined4 *)((long)puVar10 + 0x3c) = uStack_430;
                *(undefined4 *)((long)puVar10 + 0x4c) = uStack_420;
                *(undefined4 *)((long)puVar10 + 0x6c) = uStack_41c;
                *(undefined4 *)((long)puVar10 + 0x8c) = uStack_418;
                if (uVar21 != 8) {
                  *(undefined4 *)(puVar10 + 0xc) = uStack_3bc;
                  *(undefined4 *)(puVar10 + 0x10) = uStack_3b8;
                  *(undefined4 *)(puVar10 + 8) = uStack_3c0;
                  *(undefined4 *)(puVar10 + 10) = uStack_3b0;
                  *(undefined4 *)(puVar10 + 0xe) = uStack_3ac;
                  *(undefined4 *)(puVar10 + 0x12) = uStack_3a8;
                  if (uVar21 != 9) {
                    *(undefined4 *)((long)puVar10 + 100) = uStack_34c;
                    *(undefined4 *)((long)puVar10 + 0x84) = uStack_348;
                    *(undefined4 *)((long)puVar10 + 0x44) = uStack_350;
                    *(undefined4 *)((long)puVar10 + 0x54) = uStack_340;
                    *(undefined4 *)((long)puVar10 + 0x74) = uStack_33c;
                    *(undefined4 *)((long)puVar10 + 0x94) = uStack_338;
                    if (uVar21 != 10) {
                      *(undefined4 *)(puVar10 + 0xd) = uStack_2dc;
                      *(undefined4 *)(puVar10 + 0x11) = uStack_2d8;
                      *(undefined4 *)(puVar10 + 9) = uStack_2e0;
                      *(undefined4 *)(puVar10 + 0xb) = uStack_2d0;
                      *(undefined4 *)(puVar10 + 0xf) = uStack_2cc;
                      *(undefined4 *)(puVar10 + 0x13) = uStack_2c8;
                      if (uVar21 != 0xb) {
                        *(undefined4 *)((long)puVar10 + 0x6c) = uStack_26c;
                        *(undefined4 *)((long)puVar10 + 0x8c) = uStack_268;
                        *(undefined4 *)((long)puVar10 + 0x4c) = uStack_270;
                        *(undefined4 *)((long)puVar10 + 0x5c) = uStack_260;
                        *(undefined4 *)((long)puVar10 + 0x7c) = uStack_25c;
                        *(undefined4 *)((long)puVar10 + 0x9c) = uStack_258;
                        if (uVar21 != 0xc) {
                          *(undefined4 *)(puVar10 + 0xe) = uStack_1fc;
                          *(undefined4 *)(puVar10 + 0x12) = uStack_1f8;
                          *(undefined4 *)(puVar10 + 10) = uStack_200;
                          *(undefined4 *)(puVar10 + 0xc) = uStack_1f0;
                          *(undefined4 *)(puVar10 + 0x10) = uStack_1ec;
                          *(undefined4 *)(puVar10 + 0x14) = uStack_1e8;
                          if (uVar21 != 0xd) {
                            *(undefined4 *)((long)puVar10 + 0x74) = uStack_18c;
                            *(undefined4 *)((long)puVar10 + 0x94) = uStack_188;
                            *(undefined4 *)((long)puVar10 + 0x54) = uStack_190;
                            *(undefined4 *)((long)puVar10 + 100) = uStack_180;
                            *(undefined4 *)((long)puVar10 + 0x84) = uStack_17c;
                            *(undefined4 *)((long)puVar10 + 0xa4) = uStack_178;
                            if (uVar21 != 0xe) {
                              *(undefined4 *)(puVar10 + 0xf) = uStack_11c;
                              *(undefined4 *)(puVar10 + 0x13) = uStack_118;
                              *(undefined4 *)(puVar10 + 0xb) = uStack_120;
                              *(undefined4 *)(puVar10 + 0xd) = uStack_110;
                              *(undefined4 *)(puVar10 + 0x11) = uStack_10c;
                              *(undefined4 *)(puVar10 + 0x15) = uStack_108;
                              if (uVar21 == 0x10) {
                                *(undefined4 *)((long)puVar10 + 0x7c) = uStack_ac;
                                *(undefined4 *)((long)puVar10 + 0x9c) = uStack_a8;
                                *(undefined4 *)((long)puVar10 + 0x5c) = uStack_b0;
                                *(undefined4 *)((long)puVar10 + 0x6c) = uStack_a0;
                                *(undefined4 *)((long)puVar10 + 0x8c) = uStack_9c;
                                *(undefined4 *)((long)puVar10 + 0xac) = uStack_98;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    uVar19 = 0;
    if (param_1[6] < (ulong)(param_2[0xb] - param_2[10])) {
      local_980 = (MutexSys *)local_800;
      local_978 = local_b08;
      local_b00[0] = (MutexSys *)0x0;
      local_970 = param_1;
      TaskScheduler::
      spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar21,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_980,
                 (TaskGroupContext *)local_b00);
      embree::TaskScheduler::wait();
      if (local_b00[0] != (MutexSys *)0x0) {
        local_9f0 = local_b00[0];
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception(&local_9f0);
      }
      *puVar10 = CONCAT44(local_800[1],local_800[0]);
      puVar10[1] = CONCAT44(local_7f4,local_800[2]);
      if (uVar21 == 2) goto LAB_00132df3;
      puVar10[2] = local_7f0;
      uVar19 = uVar21;
    }
    else {
      do {
        uVar13 = recurse(param_1,local_b08,0);
        *(undefined8 *)(local_800 + uVar19 * 2) = uVar13;
        uVar19 = uVar19 + 1;
        local_b08 = local_b08 + 0xe;
      } while (uVar19 != uVar21);
      *puVar10 = CONCAT44(local_800[1],local_800[0]);
      puVar10[1] = CONCAT44(local_7f4,local_800[2]);
      if (uVar19 == 2) goto LAB_00132df3;
      puVar10[2] = local_7f0;
    }
    if (uVar19 != 3) {
      puVar10[3] = uStack_7e8;
    }
    goto LAB_00132df3;
  }
  lVar18 = param_2[0xb] * 0x20;
  puVar10 = (undefined8 *)(*(long *)param_1[9] + lVar18);
  puVar22 = (undefined8 *)(*(long *)param_1[9] + lVar12 * 0x20);
  if (puVar10 != puVar22) {
    lVar18 = lVar18 + lVar12 * -0x20;
    uVar21 = lVar18 >> 5;
    if (uVar21 == 0) {
      std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar22,puVar10,0xfffffffffffffffe);
    }
    else {
      lVar12 = 0x3f;
      if (uVar21 != 0) {
        for (; uVar21 >> lVar12 == 0; lVar12 = lVar12 + -1) {
        }
      }
      std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar22,puVar10,(long)(int)lVar12 * 2);
      if (0x200 < lVar18) {
        puVar23 = puVar22 + 0x40;
        std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar22,puVar23);
        for (; puVar10 != puVar23; puVar23 = puVar23 + 4) {
          while( true ) {
            uVar13 = puVar23[2];
            uVar6 = puVar23[3];
            uVar7 = *puVar23;
            uVar8 = puVar23[1];
            uVar21 = CONCAT44(*(undefined4 *)((long)puVar23 + 0x1c),
                              *(undefined4 *)((long)puVar23 + 0xc));
            puVar22 = puVar23;
            if (CONCAT44(*(undefined4 *)((long)puVar23 + -4),*(undefined4 *)((long)puVar23 + -0x14))
                <= uVar21) break;
            do {
              puVar5 = puVar22;
              puVar22 = puVar5 + -4;
              *puVar5 = *puVar22;
              puVar5[1] = puVar5[-3];
              puVar5[2] = puVar5[-2];
              puVar5[3] = puVar5[-1];
            } while (uVar21 < CONCAT44(*(undefined4 *)((long)puVar5 + -0x24),
                                       *(undefined4 *)((long)puVar5 + -0x34)));
            puVar23 = puVar23 + 4;
            *puVar22 = uVar7;
            puVar5[-3] = uVar8;
            puVar5[-2] = uVar13;
            puVar5[-1] = uVar6;
            if (puVar10 == puVar23) goto LAB_00132dc0;
          }
          *puVar23 = uVar7;
          puVar23[1] = uVar8;
          puVar23[2] = uVar13;
          puVar23[3] = uVar6;
        }
        goto LAB_00132dc0;
      }
    }
    std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar22,puVar10);
  }
LAB_00132dc0:
  puVar10 = (undefined8 *)createLargeLeaf(param_1,param_2);
LAB_00132df3:
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar10;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::NodeRefPtr<4> embree::sse2::GeneralBVHBuilder::build<embree::NodeRefPtr<4>,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::Scene::BuildProgressMonitorInterface>(embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>&, embree::PrimRef*, embree::sse2::PrimInfoExtRange const&,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > > const&,
   embree::Scene::BuildProgressMonitorInterface const&, embree::sse2::GeneralBVHBuilder::Settings
   const&) */

void embree::sse2::GeneralBVHBuilder::
     build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::Scene::BuildProgressMonitorInterface>
               (undefined8 param_1,undefined8 param_2,undefined4 *param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,ulong *param_7)

{
  long in_FS_OFFSET;
  undefined1 local_132;
  undefined1 local_131;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 uStack_120;
  undefined8 local_118;
  undefined8 local_108;
  undefined1 local_100;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  ulong local_98;
  ulong uStack_90;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  ulong uStack_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 *local_48;
  undefined1 *local_40;
  undefined1 *local_38;
  undefined8 local_30;
  undefined8 *local_28;
  undefined8 *local_20;
  undefined8 local_18;
  long local_10;
  
  local_98 = *param_7;
  uStack_90 = param_7[1];
  local_88 = param_7[2];
  uStack_80 = param_7[3];
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = param_7[4];
  uStack_70 = param_7[5];
  local_68 = param_7[6];
  uStack_60 = param_7[7];
  local_48 = &local_130;
  local_40 = &local_131;
  local_38 = &local_132;
  local_20 = &local_108;
  local_28 = &local_128;
  local_130 = param_4;
  local_58 = param_2;
  local_50 = param_1;
  local_30 = param_5;
  local_18 = param_6;
  if (0x10 < *param_7) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  local_b8 = *(undefined8 *)(param_3 + 0x10);
  local_f8 = *param_3;
  uStack_f4 = param_3[1];
  uStack_f0 = param_3[2];
  uStack_ec = param_3[3];
  local_100 = 0;
  local_e8 = param_3[4];
  uStack_e4 = param_3[5];
  uStack_e0 = param_3[6];
  uStack_dc = param_3[7];
  local_d8 = param_3[8];
  uStack_d4 = param_3[9];
  uStack_d0 = param_3[10];
  uStack_cc = param_3[0xb];
  local_108 = 1;
  local_c8 = param_3[0xc];
  uStack_c4 = param_3[0xd];
  uStack_c0 = param_3[0xe];
  uStack_bc = param_3[0xf];
  local_b0 = *(undefined8 *)(param_3 + 0x12);
  local_a8 = *(undefined8 *)(param_3 + 0x14);
  local_128 = 0;
  uStack_120 = 0;
  local_118 = 0;
  BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
  ::recurse(&local_98,local_20,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::build() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::build(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  FastAllocator *pFVar1;
  ulong *puVar2;
  Geometry *pGVar3;
  Device *pDVar4;
  Block *pBVar5;
  void *pvVar6;
  string *psVar7;
  long lVar8;
  undefined **ppuVar9;
  Block *pBVar10;
  uint uVar11;
  ulong uVar12;
  long lVar13;
  undefined8 *puVar14;
  ulong uVar15;
  ulong uVar16;
  undefined8 *puVar17;
  undefined8 uVar18;
  long lVar19;
  long *plVar20;
  size_t sVar21;
  long *plVar22;
  undefined8 uVar23;
  ulong uVar24;
  uint uVar25;
  ulong *puVar26;
  long *plVar27;
  vector_t *pvVar28;
  uint uVar29;
  undefined8 *puVar30;
  ulong *puVar31;
  long *plVar32;
  byte bVar33;
  vector_t *pvVar34;
  vector_t *pvVar35;
  char *__s;
  long in_FS_OFFSET;
  bool bVar36;
  float fVar37;
  double dVar38;
  double local_1e8;
  undefined4 local_1b0;
  float local_1ac;
  undefined8 local_1a8;
  undefined **local_1a0;
  undefined ***local_198;
  undefined **local_190;
  undefined **local_188;
  undefined8 local_180;
  undefined **local_178;
  undefined8 *local_170;
  undefined ****local_168;
  undefined ***local_158;
  undefined8 uStack_150;
  undefined8 local_148;
  undefined8 uStack_140;
  undefined ***local_138;
  undefined8 uStack_130;
  undefined8 local_128;
  undefined8 uStack_120;
  long local_118;
  long local_110;
  undefined ***local_108;
  float *pfStack_100;
  TaskGroupContext *local_f8;
  float *pfStack_f0;
  undefined ***local_e8;
  undefined8 uStack_e0;
  undefined8 local_d8;
  undefined8 uStack_d0;
  long local_c8;
  long local_c0;
  vector_t *local_b8;
  long *local_a8 [2];
  long local_98 [2];
  long *local_88;
  long local_80;
  long local_78 [2];
  ulong *local_68;
  long local_60;
  ulong local_58 [5];
  
  local_58[3] = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(this + 0x20) == 0) {
LAB_00135138:
    lVar13 = *(long *)(this + 0x18);
    pvVar28 = *(vector_t **)(lVar13 + 0x288);
    *(int *)(this + 0x98) = (int)pvVar28;
    if (pvVar28 == (vector_t *)0x0) goto LAB_00135153;
    psVar7 = *(string **)(this + 0x10);
    bVar33 = *(byte *)(*(long *)(lVar13 + 0x188) + 0x464);
    if (*(long *)(lVar13 + 0x1d0) == 0) {
      uVar29 = 0;
      uVar25 = 0;
      if (bVar33 != 0) goto LAB_001356d3;
LAB_00135ef3:
      bVar33 = 0;
      __s = "BuilderFastSpatialSAH";
    }
    else {
      uVar25 = 0;
      uVar29 = 0;
      lVar19 = 0;
      do {
        lVar8 = *(long *)(*(long *)(lVar13 + 0x1e0) + lVar19 * 8);
        if ((((lVar8 != 0) && ((*(byte *)(lVar8 + 0x3e) & 0x20) != 0)) &&
            (*(char *)(lVar8 + 0x3c) == '\x14')) &&
           ((*(int *)(lVar8 + 0x24) == 1 &&
            (uVar11 = (uint)lVar19, bVar36 = uVar29 < uVar11, uVar29 = uVar25, bVar36)))) {
          uVar29 = uVar11;
          uVar25 = uVar11;
        }
        lVar19 = lVar19 + 1;
      } while (lVar19 != *(long *)(lVar13 + 0x1d0));
      bVar33 = bVar33 | 0x7ffffff < uVar29;
      uVar25 = uVar29;
      if (bVar33 == 0) goto LAB_00135ef3;
LAB_001356d3:
      uVar29 = uVar25;
      __s = "BuilderFastSpatialPresplitSAH";
    }
    local_a8[0] = local_98;
    std::__cxx11::string::_M_construct((ulong)local_a8,'\x01');
    *(undefined1 *)local_a8[0] = 0x34;
    plVar20 = (long *)std::__cxx11::string::_M_replace((ulong)local_a8,0,(char *)0x0,0x1310fc);
    plVar22 = plVar20 + 2;
    if ((long *)*plVar20 == plVar22) {
      uVar12 = plVar20[1] + 1;
      plVar27 = plVar22;
      plVar32 = local_78;
      if (7 < (uint)uVar12) {
        uVar15 = 0;
        do {
          uVar25 = (int)uVar15 + 8;
          uVar24 = (ulong)uVar25;
          *(undefined8 *)((long)local_78 + uVar15) = *(undefined8 *)((long)plVar22 + uVar15);
          uVar15 = uVar24;
        } while (uVar25 < ((uint)uVar12 & 0xfffffff8));
        plVar32 = (long *)((long)local_78 + uVar24);
        plVar27 = (long *)(uVar24 + (long)plVar22);
      }
      lVar13 = 0;
      if ((uVar12 & 4) != 0) {
        *(int *)plVar32 = (int)*plVar27;
        lVar13 = 4;
      }
      if ((uVar12 & 2) != 0) {
        *(undefined2 *)((long)plVar32 + lVar13) = *(undefined2 *)((long)plVar27 + lVar13);
        lVar13 = lVar13 + 2;
      }
      local_88 = local_78;
      if ((uVar12 & 1) != 0) {
        *(undefined1 *)((long)plVar32 + lVar13) = *(undefined1 *)((long)plVar27 + lVar13);
      }
    }
    else {
      local_78[0] = plVar20[2];
      local_88 = (long *)*plVar20;
    }
    local_80 = plVar20[1];
    *plVar20 = (long)plVar22;
    plVar20[1] = 0;
    *(undefined1 *)(plVar20 + 2) = 0;
    sVar21 = strlen(__s);
    if (0x3fffffffffffffffU - local_80 < sVar21) {
                    /* WARNING: Subroutine does not return */
      std::__throw_length_error("basic_string::append");
    }
    plVar22 = (long *)std::__cxx11::string::_M_append((char *)&local_88,(ulong)__s);
    puVar2 = (ulong *)(plVar22 + 2);
    if ((ulong *)*plVar22 == puVar2) {
      uVar12 = plVar22[1] + 1;
      puVar26 = puVar2;
      puVar31 = local_58;
      if (7 < (uint)uVar12) {
        uVar15 = 0;
        do {
          uVar25 = (int)uVar15 + 8;
          uVar24 = (ulong)uVar25;
          *(undefined8 *)((long)local_58 + uVar15) = *(undefined8 *)((long)puVar2 + uVar15);
          uVar15 = uVar24;
        } while (uVar25 < ((uint)uVar12 & 0xfffffff8));
        puVar31 = (ulong *)((long)local_58 + uVar24);
        puVar26 = (ulong *)(uVar24 + (long)puVar2);
      }
      lVar13 = 0;
      if ((uVar12 & 4) != 0) {
        *(int *)puVar31 = (int)*puVar26;
        lVar13 = 4;
      }
      if ((uVar12 & 2) != 0) {
        *(undefined2 *)((long)puVar31 + lVar13) = *(undefined2 *)((long)puVar26 + lVar13);
        lVar13 = lVar13 + 2;
      }
      local_68 = local_58;
      if ((uVar12 & 1) != 0) {
        *(undefined1 *)((long)puVar31 + lVar13) = *(undefined1 *)((long)puVar26 + lVar13);
      }
    }
    else {
      local_58[0] = plVar22[2];
      local_68 = (ulong *)*plVar22;
    }
    local_60 = plVar22[1];
    *plVar22 = (long)puVar2;
    plVar22[1] = 0;
    *(undefined1 *)(plVar22 + 2) = 0;
    local_1e8 = (double)embree::BVHN<4>::preBuild(psVar7);
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
    if (local_88 != local_78) {
      operator_delete(local_88,local_78[0] + 1);
    }
    if (local_a8[0] != local_98) {
      operator_delete(local_a8[0],local_98[0] + 1);
    }
  }
  else {
    uVar29 = *(uint *)(this + 0x98);
    if (*(uint *)(*(long *)(this + 0x20) + 0x20) == uVar29) {
      *(uint *)(this + 0x98) = uVar29;
    }
    else {
      lVar13 = *(long *)(this + 0x10);
      pFVar1 = (FastAllocator *)(lVar13 + 0x78);
      FastAllocator::internal_fix_used_blocks(pFVar1);
      plVar22 = *(long **)(lVar13 + 0x1a8);
      plVar20 = *(long **)(lVar13 + 0x1b0);
      if (plVar20 != plVar22) {
        do {
          while( true ) {
            lVar19 = *plVar22;
            if (pFVar1 != *(FastAllocator **)(lVar19 + 8)) break;
            embree::MutexSys::lock();
            if (pFVar1 == *(FastAllocator **)(lVar19 + 8)) {
              LOCK();
              plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x118);
              *plVar32 = *plVar32 + *(long *)(lVar19 + 0xa8) + *(long *)(lVar19 + 0x68);
              UNLOCK();
              LOCK();
              plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x120);
              *plVar32 = *plVar32 +
                         (((*(long *)(lVar19 + 0x98) + *(long *)(lVar19 + 0x58)) -
                          *(long *)(lVar19 + 0x50)) - *(long *)(lVar19 + 0x90));
              UNLOCK();
              LOCK();
              plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x128);
              *plVar32 = *plVar32 + *(long *)(lVar19 + 0xb0) + *(long *)(lVar19 + 0x70);
              UNLOCK();
              *(undefined8 *)(lVar19 + 0x48) = 0;
              *(undefined8 *)(lVar19 + 0x58) = 0;
              *(undefined8 *)(lVar19 + 0x50) = 0;
              *(undefined8 *)(lVar19 + 0x68) = 0;
              *(undefined8 *)(lVar19 + 0x70) = 0;
              *(undefined8 *)(lVar19 + 0x60) = 0;
              *(undefined8 *)(lVar19 + 0x88) = 0;
              *(undefined8 *)(lVar19 + 0x98) = 0;
              *(undefined8 *)(lVar19 + 0x90) = 0;
              *(undefined8 *)(lVar19 + 0xa8) = 0;
              *(undefined8 *)(lVar19 + 0xb0) = 0;
              *(undefined8 *)(lVar19 + 0xa0) = 0;
              LOCK();
              *(undefined8 *)(lVar19 + 8) = 0;
              UNLOCK();
            }
            plVar22 = plVar22 + 1;
            embree::MutexSys::unlock();
            if (plVar20 == plVar22) goto LAB_00134f81;
          }
          plVar22 = plVar22 + 1;
        } while (plVar20 != plVar22);
LAB_00134f81:
        if (*(long *)(lVar13 + 0x1a8) != *(long *)(lVar13 + 0x1b0)) {
          *(long *)(lVar13 + 0x1b0) = *(long *)(lVar13 + 0x1a8);
        }
      }
      LOCK();
      *(undefined8 *)(lVar13 + 400) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar13 + 0x198) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar13 + 0x1a0) = 0;
      UNLOCK();
      if (*(long *)(lVar13 + 0x170) != 0) {
        bVar36 = *(bool *)(lVar13 + 0x180);
        pDVar4 = *(Device **)(lVar13 + 0x78);
        pBVar10 = *(Block **)(lVar13 + 0x170);
        while (pBVar10 != (Block *)0x0) {
          pBVar5 = *(Block **)(pBVar10 + 0x18);
          FastAllocator::Block::clear_block(pBVar10,pDVar4,bVar36);
          pBVar10 = pBVar5;
        }
      }
      LOCK();
      *(undefined8 *)(lVar13 + 0x170) = 0;
      UNLOCK();
      if (*(long *)(lVar13 + 0x178) != 0) {
        bVar36 = *(bool *)(lVar13 + 0x180);
        pDVar4 = *(Device **)(lVar13 + 0x78);
        pBVar10 = *(Block **)(lVar13 + 0x178);
        while (pBVar10 != (Block *)0x0) {
          pBVar5 = *(Block **)(pBVar10 + 0x18);
          FastAllocator::Block::clear_block(pBVar10,pDVar4,bVar36);
          pBVar10 = pBVar5;
        }
      }
      LOCK();
      *(undefined8 *)(lVar13 + 0x178) = 0;
      UNLOCK();
      puVar17 = (undefined8 *)(lVar13 + 0xf0);
      do {
        LOCK();
        *puVar17 = 0;
        UNLOCK();
        LOCK();
        puVar17[8] = 0;
        UNLOCK();
        puVar17 = puVar17 + 1;
      } while ((undefined8 *)(lVar13 + 0x130) != puVar17);
      pvVar6 = *(void **)(lVar13 + 0x1e8);
      lVar19 = *(long *)(lVar13 + 0x1e0);
      if (pvVar6 != (void *)0x0) {
        if ((ulong)(lVar19 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar6);
        }
        else {
          embree::os_free(pvVar6,lVar19 << 5,*(bool *)(lVar13 + 0x1d0));
        }
      }
      if (lVar19 != 0) {
        (**(code **)**(undefined8 **)(lVar13 + 0x1c8))
                  (*(undefined8 **)(lVar13 + 0x1c8),lVar19 * -0x20,1);
      }
      *(undefined8 *)(lVar13 + 0x1e8) = 0;
      *(undefined8 *)(lVar13 + 0x1e0) = 0;
      *(undefined8 *)(lVar13 + 0x1d8) = 0;
      if (*(long *)(this + 0x20) == 0) goto LAB_00135138;
      uVar29 = *(uint *)(*(long *)(this + 0x20) + 0x20);
      *(uint *)(this + 0x98) = uVar29;
    }
    pvVar28 = (vector_t *)(ulong)uVar29;
    if (pvVar28 == (vector_t *)0x0) {
LAB_00135153:
      pvVar6 = *(void **)(this + 0x48);
      lVar13 = *(long *)(this + 0x40);
      if (pvVar6 != (void *)0x0) {
        if ((ulong)(lVar13 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar6);
        }
        else {
          embree::os_free(pvVar6,lVar13 << 5,(bool)this[0x30]);
        }
      }
      if (lVar13 != 0) {
        (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar13 * -0x20,1);
      }
      *(undefined8 *)(this + 0x48) = 0;
      *(undefined8 *)(this + 0x40) = 0;
      *(undefined8 *)(this + 0x38) = 0;
      if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Could not recover jumptable at 0x001351da. Too many branches */
                    /* WARNING: Treating indirect jump as call */
        (**(code **)(**(long **)(this + 0x10) + 0x28))();
        return;
      }
      goto LAB_00135f93;
    }
    uVar29 = *(uint *)(this + 0x94);
    local_58[0] = local_58[0] & 0xffffffffffffff00;
    bVar33 = 0x7ffffff < uVar29 | *(byte *)(*(long *)(*(long *)(this + 0x18) + 0x188) + 0x464);
    local_60 = 0;
    local_68 = local_58;
    local_1e8 = (double)embree::BVHN<4>::preBuild(*(string **)(this + 0x10));
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
  }
  fVar37 = (float)pvVar28 * *(float *)(this + 0x90);
  if (__LC27 <= fVar37) {
    pvVar35 = *(vector_t **)(this + 0x40);
    pvVar34 = (vector_t *)((long)(fVar37 - __LC27) ^ 0x8000000000000000);
    if (pvVar34 < pvVar28) {
      pvVar34 = pvVar28;
    }
    if (pvVar35 < pvVar34) goto LAB_00134ab9;
LAB_00135206:
    lVar13 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar34;
    if (*(long *)(this + 0x20) != 0) goto LAB_00134bf6;
LAB_00135219:
    lVar13 = *(long *)(lVar13 + 0x68);
    if (bVar33 != 0) goto LAB_00135226;
LAB_00135f08:
    embree::sse2::createPrimRefArray
              (&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar34,this + 0x28,lVar13 + 600);
LAB_00135bbe:
    local_110 = local_c0;
    local_118 = local_c8;
    uVar18 = *(undefined8 *)(this + 0x18);
    local_158 = local_108;
    uStack_150 = pfStack_100;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    dVar38 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC57 * __LC61;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC36 <= dVar38) {
      uVar12 = (long)(dVar38 - _LC36) ^ 0x8000000000000000;
    }
    else {
      uVar12 = (ulong)dVar38;
    }
    uVar12 = uVar12 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar12);
    uVar23 = FastAllocator::fixSingleThreadThreshold
                       ((FastAllocator *)(*(long *)(this + 0x10) + 0x78),4,0x400,
                        local_110 - local_118,uVar12);
    local_188 = &PTR_operator___0013f540;
    ppuVar9 = *(undefined ***)(this + 0x10);
    local_1a0 = *(undefined ***)(this + 0x48);
    *(undefined8 *)(this + 0x80) = uVar23;
    *(undefined8 *)(this + 0x50) = 4;
    lVar13 = local_110 - local_118;
    *(undefined8 *)(this + 0x58) = 0x28;
    local_180 = *(undefined8 *)(ppuVar9[0xd] + 0x260);
    local_170 = &local_1a8;
    pfStack_f0 = &local_1ac;
    local_190 = (undefined **)0x0;
    local_1a8 = uVar18;
    local_178 = local_1a0;
    local_168 = &local_158;
    if (lVar13 == 1) {
      fVar37 = *(float *)((long)local_1a0 + 0x14) - *(float *)((long)local_1a0 + 4);
      fVar37 = (fVar37 + (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1))) *
               (*(float *)(local_1a0 + 2) - *(float *)local_1a0) +
               fVar37 * (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1));
      dVar38 = (double)(fVar37 + fVar37) + 0.0;
      uVar12 = 1;
    }
    else {
      local_198 = &local_1a0;
      local_108 = &local_190;
      pfStack_100 = pfStack_f0;
      local_f8 = (TaskGroupContext *)&local_198;
      dVar38 = (double)_ZN6embree24parallel_reduce_internalImdZNS_15parallel_reduceImdZNS_4sse230BVHBuilderBinnedFastSpatialSAH5buildINS_10NodeRefPtrILi4EEENS_4BVHNILi4EE11CreateAllocENS_10AABBNode_tIS6_Li4EE7Create2ENSB_4Set2ENS2_17CreateLeafSpatialILi4ENS_10TriangleMiILi4EEEEENS2_23TriangleSplitterFactoryENS_5Scene29BuildProgressMonitorInterfaceEEET_T0_T1_T2_RKT3_T4_T5_PNS_7PrimRefEmRKNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEERKNS2_17GeneralBVHBuilder8SettingsEEUlRKNS_5rangeImEEE_St4plusIdEEESM_SL_SL_RKSM_RKSN_RKSO_EUlS18_E_S1D_EESM_SL_SL_SL_SL_S1F_S1H_S1J__isra_0
                                 (lVar13,0,lVar13,&local_190,
                                  (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108);
      uVar12 = local_110 - local_118;
    }
    pfStack_100 = (float *)&local_1b0;
    local_1ac = _LC12 / (float)dVar38;
    local_1b0 = 0x41200000;
    local_198 = (undefined ***)0x0;
    local_108 = &local_1a0;
    local_f8 = (TaskGroupContext *)&local_158;
    TaskScheduler::
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (0,uVar12,1,(_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,
               (TaskGroupContext *)&local_198);
    embree::TaskScheduler::wait();
    if (local_198 != (undefined ***)0x0) {
      local_190 = (undefined **)local_198;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_190);
    }
    local_c8 = 0;
    local_108 = local_158;
    pfStack_100 = (float *)uStack_150;
    local_c0 = local_110 - local_118;
    local_f8 = (TaskGroupContext *)local_148;
    pfStack_f0 = (float *)uStack_140;
    local_e8 = local_138;
    uStack_e0 = uStack_130;
    local_d8 = local_128;
    uStack_d0 = uStack_120;
    local_190 = ppuVar9;
    local_b8 = pvVar34;
    uVar18 = GeneralBVHBuilder::
             build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::Scene::BuildProgressMonitorInterface>
                       (&local_178,local_1a0,
                        (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,ppuVar9 + 0xf,
                        &local_190,&local_188,this + 0x50);
  }
  else {
    pvVar35 = *(vector_t **)(this + 0x40);
    pvVar34 = (vector_t *)(long)fVar37;
    if ((vector_t *)(long)fVar37 < pvVar28) {
      pvVar34 = pvVar28;
    }
    if (pvVar34 <= pvVar35) goto LAB_00135206;
LAB_00134ab9:
    if (pvVar35 == (vector_t *)0x0) {
      pvVar35 = pvVar34;
      if (pvVar34 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar34;
      }
    }
    else {
      do {
        pvVar35 = (vector_t *)((long)pvVar35 * 2);
        if (pvVar35 == (vector_t *)0x0) {
          pvVar35 = (vector_t *)0x1;
        }
      } while (pvVar35 < pvVar34);
      if (pvVar34 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar34;
      }
    }
    uVar12 = (long)pvVar35 << 5;
    puVar17 = *(undefined8 **)(this + 0x48);
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),uVar12,0);
    if (uVar12 < 0x1c00000) {
      lVar13 = embree::alignedMalloc(uVar12,0x20);
    }
    else {
      lVar13 = embree::os_malloc(uVar12,(bool *)(this + 0x30));
    }
    *(long *)(this + 0x48) = lVar13;
    if (*(long *)(this + 0x38) != 0) {
      uVar12 = 0;
      puVar30 = puVar17;
      while( true ) {
        uVar18 = puVar30[1];
        puVar14 = (undefined8 *)(lVar13 + uVar12 * 0x20);
        *puVar14 = *puVar30;
        puVar14[1] = uVar18;
        uVar18 = puVar30[3];
        puVar14[2] = puVar30[2];
        puVar14[3] = uVar18;
        if (*(ulong *)(this + 0x38) <= uVar12 + 1) break;
        lVar13 = *(long *)(this + 0x48);
        uVar12 = uVar12 + 1;
        puVar30 = puVar30 + 4;
      }
    }
    lVar13 = *(long *)(this + 0x40);
    if (puVar17 != (undefined8 *)0x0) {
      if ((ulong)(lVar13 << 5) < 0x1c00000) {
        embree::alignedFree(puVar17);
      }
      else {
        embree::os_free(puVar17,lVar13 << 5,(bool)this[0x30]);
      }
    }
    if (lVar13 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar13 * -0x20,1);
    }
    lVar13 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar34;
    *(vector_t **)(this + 0x40) = pvVar35;
    if (*(long *)(this + 0x20) == 0) goto LAB_00135219;
LAB_00134bf6:
    *(undefined4 *)(lVar13 + 0x1c0) = 1;
    pGVar3 = *(Geometry **)(this + 0x20);
    lVar13 = *(long *)(*(long *)(this + 0x10) + 0x68);
    if (bVar33 == 0) {
      if (pGVar3 == (Geometry *)0x0) goto LAB_00135f08;
      embree::sse2::createPrimRefArray
                ((Geometry *)&local_108,(uint)pGVar3,(ulong)*(uint *)(this + 0x94),pvVar34,
                 (BuildProgressMonitor *)(this + 0x28));
      goto LAB_00135bbe;
    }
    if (pGVar3 == (Geometry *)0x0) {
LAB_00135226:
      createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
                ((sse2 *)&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar28,this + 0x28,
                 lVar13 + 600);
    }
    else {
      createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
                ((sse2 *)&local_108,pGVar3,uVar29,(ulong)pvVar28,(vector_t *)(this + 0x28),
                 (BuildProgressMonitor *)(lVar13 + 600));
    }
    local_110 = local_c0;
    local_118 = local_c8;
    local_158 = local_108;
    uStack_150 = pfStack_100;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    dVar38 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC57 * __LC61;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC36 <= dVar38) {
      uVar12 = (long)(dVar38 - _LC36) ^ 0x8000000000000000;
    }
    else {
      uVar12 = (ulong)dVar38;
    }
    uVar12 = uVar12 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar12);
    uVar15 = local_110 - local_118;
    local_170 = *(undefined8 **)(this + 0x10);
    if ((uVar15 == 0) || (uVar12 == 0)) {
      uVar12 = 0x400;
    }
    else {
      bVar33 = *(byte *)((long)local_170 + 0x182);
      uVar16 = embree::TaskScheduler::threadCount();
      lVar13 = (2 - (ulong)bVar33) * local_170[0x11];
      uVar24 = lVar13 * 0x14;
      if (((uVar12 - 1) + uVar24) / uVar24 < uVar16) {
        uVar24 = lVar13 * 0x50;
        if ((long)uVar24 < 0) {
          dVar38 = (double)(uVar24 >> 1) + (double)(uVar24 >> 1);
        }
        else {
          dVar38 = (double)(long)uVar24;
        }
        dVar38 = dVar38 / ((double)uVar12 / (double)uVar15);
        if ((double)((ulong)dVar38 & _LC37) < _LC33) {
          dVar38 = (double)((ulong)((double)(long)dVar38 +
                                   (double)(-(ulong)((double)(long)dVar38 < dVar38) & _LC35)) |
                           ~_LC37 & (ulong)dVar38);
        }
        if (_LC36 <= dVar38) {
          uVar12 = (long)(dVar38 - _LC36) ^ 0x8000000000000000;
        }
        else {
          uVar12 = (ulong)dVar38;
        }
        local_170 = *(undefined8 **)(this + 0x10);
      }
      else {
        local_170 = *(undefined8 **)(this + 0x10);
        uVar12 = 0x400;
      }
    }
    *(ulong *)(this + 0x80) = uVar12;
    local_f8 = *(TaskGroupContext **)(this + 0x60);
    pfStack_f0 = *(float **)(this + 0x68);
    *(undefined8 *)(this + 0x50) = 4;
    local_e8 = *(undefined ****)(this + 0x70);
    uStack_e0 = *(undefined8 *)(this + 0x78);
    *(undefined8 *)(this + 0x58) = 0x28;
    local_108 = *(undefined ****)(this + 0x50);
    pfStack_100 = *(float **)(this + 0x58);
    local_d8 = *(undefined8 *)(this + 0x80);
    uStack_d0 = *(undefined8 *)(this + 0x88);
    local_178 = &PTR_createLeaf_0013ef08;
    uVar18 = embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderV::build
                       (&local_178,local_170 + 0xf,local_170[0xd] + 600,*(undefined8 *)(this + 0x48)
                        ,&local_158);
  }
  local_108 = local_158;
  pfStack_100 = (float *)uStack_150;
  local_f8 = (TaskGroupContext *)local_148;
  pfStack_f0 = (float *)uStack_140;
  local_e8 = local_158;
  uStack_e0 = uStack_150;
  local_d8 = local_148;
  uStack_d0 = uStack_140;
  embree::BVHN<4>::set(*(undefined8 *)(this + 0x10),uVar18,&local_108,local_110 - local_118);
  embree::BVHN<4>::layoutLargeNodes(*(ulong *)(this + 0x10));
  if ((*(long *)(this + 0x18) != 0) && ((*(byte *)(*(long *)(this + 0x18) + 0x230) & 1) == 0)) {
    pvVar6 = *(void **)(this + 0x48);
    lVar13 = *(long *)(this + 0x40);
    if (pvVar6 != (void *)0x0) {
      if ((ulong)(lVar13 << 5) < 0x1c00000) {
        embree::alignedFree(pvVar6);
      }
      else {
        embree::os_free(pvVar6,lVar13 << 5,(bool)this[0x30]);
      }
    }
    if (lVar13 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar13 * -0x20,1);
    }
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x38) = 0;
  }
  lVar13 = *(long *)(this + 0x10);
  pFVar1 = (FastAllocator *)(lVar13 + 0x78);
  FastAllocator::internal_fix_used_blocks(pFVar1);
  plVar22 = *(long **)(lVar13 + 0x1a8);
  plVar20 = *(long **)(lVar13 + 0x1b0);
  if (plVar22 != plVar20) {
    do {
      while( true ) {
        lVar19 = *plVar22;
        if (pFVar1 != *(FastAllocator **)(lVar19 + 8)) break;
        embree::MutexSys::lock();
        if (pFVar1 == *(FastAllocator **)(lVar19 + 8)) {
          LOCK();
          plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x118);
          *plVar32 = *plVar32 + *(long *)(lVar19 + 0xa8) + *(long *)(lVar19 + 0x68);
          UNLOCK();
          LOCK();
          plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x120);
          *plVar32 = *plVar32 +
                     (((*(long *)(lVar19 + 0x98) + *(long *)(lVar19 + 0x58)) -
                      *(long *)(lVar19 + 0x50)) - *(long *)(lVar19 + 0x90));
          UNLOCK();
          LOCK();
          plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x128);
          *plVar32 = *plVar32 + *(long *)(lVar19 + 0xb0) + *(long *)(lVar19 + 0x70);
          UNLOCK();
          *(undefined8 *)(lVar19 + 0x48) = 0;
          *(undefined8 *)(lVar19 + 0x58) = 0;
          *(undefined8 *)(lVar19 + 0x50) = 0;
          *(undefined8 *)(lVar19 + 0x68) = 0;
          *(undefined8 *)(lVar19 + 0x70) = 0;
          *(undefined8 *)(lVar19 + 0x60) = 0;
          *(undefined8 *)(lVar19 + 0x88) = 0;
          *(undefined8 *)(lVar19 + 0x98) = 0;
          *(undefined8 *)(lVar19 + 0x90) = 0;
          *(undefined8 *)(lVar19 + 0xa8) = 0;
          *(undefined8 *)(lVar19 + 0xb0) = 0;
          *(undefined8 *)(lVar19 + 0xa0) = 0;
          LOCK();
          *(undefined8 *)(lVar19 + 8) = 0;
          UNLOCK();
        }
        plVar22 = plVar22 + 1;
        embree::MutexSys::unlock();
        if (plVar20 == plVar22) goto LAB_001355c1;
      }
      plVar22 = plVar22 + 1;
    } while (plVar20 != plVar22);
LAB_001355c1:
    if (*(long *)(lVar13 + 0x1a8) != *(long *)(lVar13 + 0x1b0)) {
      *(long *)(lVar13 + 0x1b0) = *(long *)(lVar13 + 0x1a8);
    }
  }
  embree::BVHN<4>::postBuild(local_1e8);
  if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
LAB_00135f93:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMi<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressM...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  ulong uVar8;
  undefined8 uVar9;
  TaskScheduler *pTVar10;
  long lVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  long local_a8;
  ulong uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar12 = *(ulong *)(this + 8);
  uVar8 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar12 - uVar8) {
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uStack_40 = *(undefined8 *)(this + 0x30);
    uVar12 = uVar12 + uVar8 >> 1;
    local_68 = uVar12;
    uStack_60 = uVar8;
    local_58 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_68,pTVar4,uVar12 - uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) goto LAB_001363be;
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_001363be;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0013f0b8;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[7] = local_38;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar12 - uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(undefined8 *)(this + 0x18);
    local_a8 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_90 = *(undefined8 *)(this + 0x20);
    uStack_88 = *(undefined8 *)(this + 0x28);
    uStack_80 = *(undefined8 *)(this + 0x30);
    uVar8 = local_a8 - uVar12;
    uStack_a0 = uVar12;
    local_78 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_a8,pTVar4,uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_001363be:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar12 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar12) goto LAB_001363be;
      *(ulong *)(lVar6 + 0xc00c0) = uVar12;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar12);
      *puVar3 = &PTR_execute_0013f0b8;
      puVar3[1] = local_a8;
      puVar3[2] = uStack_a0;
      puVar3[7] = local_78;
      puVar3[3] = local_98;
      puVar3[4] = uStack_90;
      puVar3[5] = uStack_88;
      puVar3[6] = uStack_80;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    lVar6 = uVar8 * 0x70;
    for (; uVar8 < uVar12; uVar8 = uVar8 + 1) {
      local_68 = 0;
      uStack_60 = 0;
      lVar5 = *(long *)(this + 0x20);
      local_58 = 0;
      lVar11 = *(long *)(this + 0x28) + lVar6;
      lVar6 = lVar6 + 0x70;
      uVar9 = sse2::GeneralBVHBuilder::
              BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMi<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
              ::recurse(*(undefined8 *)(this + 0x30),lVar11,1);
      *(undefined8 *)(lVar5 + uVar8 * 8) = uVar9;
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
::recurse(ulong *param_1,long *param_2,char param_3)

{
  undefined1 *puVar1;
  SplitInfoT *pSVar2;
  ulong *puVar3;
  MutexSys *pMVar4;
  undefined8 *puVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined4 uVar9;
  undefined8 *puVar10;
  float *pfVar11;
  long lVar12;
  undefined8 uVar13;
  uint uVar14;
  ulong uVar15;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  undefined4 uVar16;
  uint uVar17;
  long lVar18;
  ulong uVar19;
  undefined1 *puVar20;
  ulong uVar21;
  undefined8 *puVar22;
  undefined8 *puVar23;
  long *plVar24;
  long in_FS_OFFSET;
  float fVar25;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar30;
  float fVar31;
  float fVar32;
  float fVar33;
  undefined1 auVar29 [16];
  undefined1 auVar34 [16];
  float fVar35;
  undefined1 auVar36 [16];
  float fVar38;
  undefined1 auVar37 [16];
  FastAllocator *in_stack_00000008;
  MutexSys *in_stack_00000010;
  FastAllocator *local_b18;
  long *local_b08;
  MutexSys *local_b00 [2];
  undefined1 local_af0 [16];
  undefined1 local_ae0 [16];
  undefined1 local_ad0 [16];
  undefined1 local_ac0 [16];
  undefined8 local_ab0;
  undefined8 uStack_aa8;
  undefined8 local_aa0;
  undefined8 uStack_a98;
  long local_a90;
  undefined8 uStack_a88;
  undefined8 local_a80;
  undefined8 uStack_a78;
  long local_a70;
  long local_a68;
  undefined8 local_a60;
  undefined8 local_a50;
  undefined8 uStack_a48;
  undefined4 local_a40;
  undefined4 uStack_a3c;
  undefined4 uStack_a38;
  undefined4 uStack_a34;
  undefined4 local_a30;
  undefined4 uStack_a2c;
  undefined4 uStack_a28;
  undefined4 uStack_a24;
  undefined4 local_a20;
  undefined4 uStack_a1c;
  undefined4 uStack_a18;
  undefined4 uStack_a14;
  long local_a10;
  long local_a08;
  undefined8 local_a00;
  MutexSys *local_9f0;
  undefined1 local_9e8;
  ulong *local_9e0;
  long lStack_9d8;
  long local_9d0;
  long lStack_9c8;
  ulong *local_9c0;
  long lStack_9b8;
  long local_9b0;
  long lStack_9a8;
  long local_9a0;
  long lStack_998;
  long local_990;
  MutexSys *local_980;
  long *local_978;
  ulong *local_970;
  long lStack_968;
  long local_960;
  long lStack_958;
  undefined8 local_950;
  undefined8 uStack_948;
  undefined8 local_940;
  undefined8 uStack_938;
  undefined8 local_930;
  undefined8 uStack_928;
  long local_920;
  float local_910;
  undefined4 local_90c;
  undefined4 local_908;
  int local_904;
  undefined8 local_900;
  undefined8 local_8f0;
  undefined8 uStack_8e8;
  undefined8 local_8e0;
  undefined8 uStack_8d8;
  float local_8d0 [3];
  int local_8c4;
  int local_8c0;
  undefined4 local_8bc;
  undefined8 local_8b0;
  undefined8 uStack_8a8;
  undefined8 local_8a0;
  undefined8 uStack_898;
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
  local_880 [84];
  float local_82c;
  float local_800 [3];
  int local_7f4;
  undefined8 local_7f0;
  undefined8 uStack_7e8;
  undefined8 local_7e0;
  undefined8 uStack_7d8;
  undefined8 local_7d0;
  undefined8 uStack_7c8;
  undefined1 local_7b0;
  float local_7ac;
  long local_750;
  undefined1 local_748 [8];
  undefined8 local_740;
  undefined8 uStack_738;
  undefined8 local_730;
  undefined8 uStack_728;
  long local_720 [4];
  long local_700;
  long local_6f8;
  undefined8 local_6f0;
  long local_6e0;
  undefined1 local_6d8;
  undefined8 local_6d0;
  undefined8 uStack_6c8;
  undefined4 local_6c0;
  undefined4 uStack_6bc;
  undefined4 uStack_6b8;
  undefined4 uStack_6b4;
  undefined4 local_6b0;
  undefined4 uStack_6ac;
  undefined4 uStack_6a8;
  undefined4 uStack_6a4;
  undefined4 local_6a0;
  undefined4 uStack_69c;
  undefined4 uStack_698;
  undefined4 uStack_694;
  long local_690;
  long local_688;
  undefined8 local_680;
  long local_670;
  undefined1 local_668;
  undefined4 local_660;
  undefined4 uStack_65c;
  undefined4 uStack_658;
  undefined4 local_650;
  undefined4 uStack_64c;
  undefined4 uStack_648;
  long local_620;
  long lStack_618;
  undefined1 local_5f8;
  undefined4 uStack_5f0;
  undefined4 uStack_5ec;
  undefined4 uStack_5e8;
  undefined4 uStack_5e0;
  undefined4 uStack_5dc;
  undefined4 uStack_5d8;
  long local_5b0;
  long local_5a8;
  undefined1 local_588;
  undefined4 uStack_580;
  undefined4 uStack_57c;
  undefined4 uStack_578;
  undefined4 uStack_570;
  undefined4 uStack_56c;
  undefined4 uStack_568;
  long local_540;
  long local_538;
  undefined1 local_518;
  undefined4 uStack_510;
  undefined4 uStack_50c;
  undefined4 uStack_508;
  undefined4 uStack_500;
  undefined4 uStack_4fc;
  undefined4 uStack_4f8;
  long local_4d0;
  long local_4c8;
  undefined1 local_4a8;
  undefined4 uStack_4a0;
  undefined4 uStack_49c;
  undefined4 uStack_498;
  undefined4 uStack_490;
  undefined4 uStack_48c;
  undefined4 uStack_488;
  long local_460;
  long local_458;
  undefined1 local_438;
  undefined4 uStack_430;
  undefined4 uStack_42c;
  undefined4 uStack_428;
  undefined4 uStack_420;
  undefined4 uStack_41c;
  undefined4 uStack_418;
  long local_3f0;
  long local_3e8;
  undefined1 local_3c8;
  undefined4 uStack_3c0;
  undefined4 uStack_3bc;
  undefined4 uStack_3b8;
  undefined4 uStack_3b0;
  undefined4 uStack_3ac;
  undefined4 uStack_3a8;
  long local_380;
  long local_378;
  undefined1 local_358;
  undefined4 uStack_350;
  undefined4 uStack_34c;
  undefined4 uStack_348;
  undefined4 uStack_340;
  undefined4 uStack_33c;
  undefined4 uStack_338;
  long local_310;
  long local_308;
  undefined1 local_2e8;
  undefined4 uStack_2e0;
  undefined4 uStack_2dc;
  undefined4 uStack_2d8;
  undefined4 uStack_2d0;
  undefined4 uStack_2cc;
  undefined4 uStack_2c8;
  long local_2a0;
  long local_298;
  undefined1 local_278;
  undefined4 uStack_270;
  undefined4 uStack_26c;
  undefined4 uStack_268;
  undefined4 uStack_260;
  undefined4 uStack_25c;
  undefined4 uStack_258;
  long local_230;
  long local_228;
  undefined1 local_208;
  undefined4 uStack_200;
  undefined4 uStack_1fc;
  undefined4 uStack_1f8;
  undefined4 uStack_1f0;
  undefined4 uStack_1ec;
  undefined4 uStack_1e8;
  long local_1c0;
  long local_1b8;
  undefined1 local_198;
  undefined4 uStack_190;
  undefined4 uStack_18c;
  undefined4 uStack_188;
  undefined4 uStack_180;
  undefined4 uStack_17c;
  undefined4 uStack_178;
  long local_150;
  long local_148;
  undefined1 local_128;
  undefined4 uStack_120;
  undefined4 uStack_11c;
  undefined4 uStack_118;
  undefined4 uStack_110;
  undefined4 uStack_10c;
  undefined4 uStack_108;
  long local_e0;
  long local_d8;
  undefined1 local_b8;
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined4 uStack_a8;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 uStack_98;
  long local_70;
  long local_68;
  undefined1 auStack_50 [8];
  long local_48;
  
  lVar12 = lRam0000000000136c13;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_b18 = in_stack_00000008;
  if (in_stack_00000008 == (FastAllocator *)0x0) {
    local_b18 = *(FastAllocator **)param_1[10];
    in_stack_00000010 = *(MutexSys **)(in_FS_OFFSET + lRam0000000000136c13);
    if (in_stack_00000010 == (MutexSys *)0x0) {
      in_stack_00000010 = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
      embree::MutexSys::MutexSys(in_stack_00000010);
      *(undefined8 *)(in_stack_00000010 + 8) = 0;
      *(MutexSys **)(in_stack_00000010 + 0x40) = in_stack_00000010;
      *(undefined8 *)(in_stack_00000010 + 0x48) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x50) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x58) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x60) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x68) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x70) = 0;
      *(MutexSys **)(in_stack_00000010 + 0x80) = in_stack_00000010;
      *(undefined8 *)(in_stack_00000010 + 0x88) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x90) = 0;
      *(undefined8 *)(in_stack_00000010 + 0x98) = 0;
      *(undefined8 *)(in_stack_00000010 + 0xa0) = 0;
      *(undefined8 *)(in_stack_00000010 + 0xa8) = 0;
      *(undefined8 *)(in_stack_00000010 + 0xb0) = 0;
      *(MutexSys **)(in_FS_OFFSET + lVar12) = in_stack_00000010;
      embree::MutexSys::lock();
      local_980 = in_stack_00000010;
      if (__MutexSys == _preBuild) {
        std::
        vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
        ::
        _M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>
                  ((vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
                    *)&FastAllocator::s_thread_local_allocators,__MutexSys,&local_980);
        pMVar4 = local_980;
        if (local_980 != (MutexSys *)0x0) {
          embree::MutexSys::~MutexSys(local_980);
          embree::alignedFree(pMVar4);
        }
      }
      else {
        *__MutexSys = in_stack_00000010;
        __MutexSys = __MutexSys + 1;
      }
      embree::MutexSys::unlock();
    }
    in_stack_00000010 = in_stack_00000010 + 0x40;
  }
  if ((param_3 != '\0') && ((ulong)(param_2[0xb] - param_2[10]) <= param_1[6])) {
    if ((code *)**(undefined8 **)param_1[0x10] == Scene::BuildProgressMonitorInterface::operator())
    {
      embree::Scene::progressMonitor((double)(ulong)(param_2[0xb] - param_2[10]));
    }
    else {
      (*(code *)**(undefined8 **)param_1[0x10])();
    }
  }
  HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::find
            (local_880,(PrimInfoExtRange *)param_1[9],(ulong)(param_2 + 2));
  lVar12 = param_2[10];
  uVar21 = param_2[0xb] - lVar12;
  if (((param_1[3] < uVar21) && (*param_2 + 8U < param_1[1])) &&
     ((param_1[4] < uVar21 ||
      (fVar27 = *(float *)((long)param_2 + 0x24) - *(float *)((long)param_2 + 0x14),
      fVar27 = (*(float *)(param_2 + 4) - *(float *)(param_2 + 2)) *
               (fVar27 + (*(float *)(param_2 + 5) - *(float *)(param_2 + 3))) +
               fVar27 * (*(float *)(param_2 + 5) - *(float *)(param_2 + 3)),
      fVar27 * *(float *)(param_1 + 5) + *(float *)((long)param_1 + 0x2c) * local_82c <
      (float)((uVar21 - 1) + (1L << ((byte)param_1[2] & 0x3f)) >> ((byte)param_1[2] & 0x3f)) *
      fVar27 * *(float *)((long)param_1 + 0x2c))))) {
    HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::split
              ((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
                *)param_1[9],(Split2 *)local_880,(PrimInfoExtRange *)(param_2 + 2),
               (PrimInfoExtRange *)&local_ab0,(PrimInfoExtRange *)&local_a50);
    uVar9 = _LC3;
    fVar27 = _LC1;
    local_748[0] = 0;
    local_6d8 = 0;
    local_740 = local_ab0;
    uStack_738 = uStack_aa8;
    local_720[2] = local_a80;
    local_720[3] = uStack_a78;
    local_730 = local_aa0;
    uStack_728 = uStack_a98;
    local_750 = *param_2 + 1;
    local_720[0] = local_a90;
    local_720[1] = uStack_a88;
    local_690 = local_a10;
    local_6d0 = local_a50;
    uStack_6c8 = uStack_a48;
    local_700 = local_a70;
    local_6f8 = local_a68;
    local_6f0 = local_a60;
    local_688 = local_a08;
    local_6c0 = local_a40;
    uStack_6bc = uStack_a3c;
    uStack_6b8 = uStack_a38;
    uStack_6b4 = uStack_a34;
    local_6b0 = local_a30;
    uStack_6ac = uStack_a2c;
    uStack_6a8 = uStack_a28;
    uStack_6a4 = uStack_a24;
    local_6a0 = local_a20;
    uStack_69c = uStack_a1c;
    uStack_698 = uStack_a18;
    uStack_694 = uStack_a14;
    local_680 = local_a00;
    local_6e0 = local_750;
    if (*param_1 < 3) {
      lVar12 = 0xe0;
      uVar21 = 2;
    }
    else {
      uVar21 = 2;
      plVar24 = &local_670;
      do {
        uVar15 = 0;
        uVar19 = 0xffffffffffffffff;
        pfVar11 = (float *)&local_740;
        lVar12 = local_6f8;
        lVar18 = local_700;
        fVar26 = _LC1;
        while( true ) {
          if ((param_1[3] < (ulong)(lVar12 - lVar18)) &&
             (fVar25 = (pfVar11[4] - *pfVar11) *
                       ((pfVar11[5] - pfVar11[1]) + (pfVar11[6] - pfVar11[2])) +
                       (pfVar11[5] - pfVar11[1]) * (pfVar11[6] - pfVar11[2]), fVar26 < fVar25)) {
            uVar19 = uVar15;
            fVar26 = fVar25;
          }
          uVar15 = uVar15 + 1;
          if (uVar15 == uVar21) break;
          lVar12 = *(long *)(pfVar11 + 0x2e);
          lVar18 = *(long *)(pfVar11 + 0x2c);
          pfVar11 = pfVar11 + 0x1c;
        }
        if (uVar19 == 0xffffffffffffffff) break;
        puVar3 = (ulong *)param_1[9];
        local_9e8 = 0;
        local_9e0 = (ulong *)CONCAT44(uVar9,uVar9);
        lStack_9d8 = CONCAT44(uVar9,uVar9);
        local_9a0 = 0;
        local_9d0 = CONCAT44(fVar27,fVar27);
        lStack_9c8 = CONCAT44(fVar27,fVar27);
        lStack_998 = 0;
        lVar18 = uVar19 * 0x70;
        local_990 = 0;
        local_978 = (long *)((ulong)local_978 & 0xffffffffffffff00);
        local_9f0 = (MutexSys *)(*param_2 + 1);
        local_930 = 0;
        uStack_928 = 0;
        pSVar2 = (SplitInfoT *)(&local_740 + uVar19 * 0xe);
        lVar12 = local_720[uVar19 * 0xe + 5];
        local_920 = 0;
        local_9c0 = local_9e0;
        lStack_9b8 = lStack_9d8;
        local_9b0 = local_9d0;
        lStack_9a8 = lStack_9c8;
        local_980 = local_9f0;
        local_970 = local_9e0;
        lStack_968 = lStack_9d8;
        local_960 = local_9d0;
        lStack_958 = lStack_9c8;
        local_950 = local_9e0;
        uStack_948 = lStack_9d8;
        local_940 = local_9d0;
        uStack_938 = lStack_9c8;
        if ((ulong)(lVar12 - local_720[uVar19 * 0xe + 4]) < 0xc00) {
          HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
          ::sequential_object_find((PrimInfoExtRange *)&local_910,*puVar3,pSVar2);
          uVar16 = extraout_EDX;
          fVar26 = local_910;
          if (local_720[uVar19 * 0xe + 6] == lVar12) goto LAB_00136a76;
LAB_00136d21:
          fVar26 = local_910;
          auVar34 = maxps(local_af0,local_ad0);
          auVar29 = minps(local_ae0,local_ac0);
          pfVar11 = (float *)puVar3[2];
          auVar36._4_4_ = -(uint)(auVar34._4_4_ <= auVar29._4_4_);
          auVar36._0_4_ = -(uint)(auVar34._0_4_ <= auVar29._0_4_);
          auVar36._8_4_ = -(uint)(auVar34._8_4_ <= auVar29._8_4_);
          auVar36._12_4_ = -(uint)(auVar34._12_4_ <= auVar29._12_4_);
          uVar17 = movmskps(uVar16,auVar36);
          auVar37._4_4_ = -(uint)(pfVar11[1] <= pfVar11[5]);
          auVar37._0_4_ = -(uint)(*pfVar11 <= pfVar11[4]);
          auVar37._8_4_ = -(uint)(pfVar11[2] <= pfVar11[6]);
          auVar37._12_4_ = -(uint)(pfVar11[3] <= pfVar11[7]);
          uVar14 = movmskps((int)pfVar11,auVar37);
          uVar17 = ~uVar17 & 7;
          if (uVar17 == 0) {
            fVar30 = auVar29._4_4_ - auVar34._4_4_;
            fVar32 = auVar29._8_4_ - auVar34._8_4_;
            fVar25 = 0.0;
            fVar30 = (fVar30 + fVar32) * (auVar29._0_4_ - auVar34._0_4_) + fVar30 * fVar32;
            fVar30 = fVar30 + fVar30;
            if ((uVar14 & 7) == 7) goto LAB_00136d9a;
LAB_00136dc9:
            if (fVar25 <= fVar30) {
              fVar25 = *(float *)pSVar2;
              fVar32 = *(float *)((long)&local_740 + lVar18 + 4);
              fVar38 = *(float *)(&uStack_738 + uVar19 * 0xe);
              fVar28 = *(float *)(&local_730 + uVar19 * 0xe);
              fVar31 = *(float *)((long)&local_730 + lVar18 + 4);
              fVar33 = *(float *)(&uStack_728 + uVar19 * 0xe);
              auVar29._4_4_ = -(uint)(fVar32 <= fVar31);
              auVar29._0_4_ = -(uint)(fVar25 <= fVar28);
              auVar29._8_4_ = -(uint)(fVar38 <= fVar33);
              auVar29._12_4_ =
                   -(uint)(*(float *)((long)&uStack_738 + lVar18 + 4) <=
                          *(float *)((long)&uStack_728 + lVar18 + 4));
              uVar14 = movmskps(uVar17,auVar29);
              fVar35 = 0.0;
              if ((~uVar14 & 7) == 0) goto LAB_00137896;
LAB_001378c5:
              if (fVar35 <= fVar30) goto LAB_001378ce;
            }
            goto LAB_00136a76;
          }
          if ((uVar14 & 7) == 7) {
            fVar30 = 0.0;
LAB_00136d9a:
            fVar25 = pfVar11[5] - pfVar11[1];
            fVar32 = pfVar11[6] - pfVar11[2];
            fVar25 = (fVar25 + fVar32) * (pfVar11[4] - *pfVar11) + fVar25 * fVar32;
            fVar25 = (fVar25 + fVar25) * __LC51;
            goto LAB_00136dc9;
          }
          fVar25 = *(float *)pSVar2;
          fVar32 = *(float *)((long)&local_740 + lVar18 + 4);
          fVar38 = *(float *)(&uStack_738 + uVar19 * 0xe);
          fVar28 = *(float *)(&local_730 + uVar19 * 0xe);
          fVar31 = *(float *)((long)&local_730 + lVar18 + 4);
          fVar33 = *(float *)(&uStack_728 + uVar19 * 0xe);
          auVar34._4_4_ = -(uint)(fVar32 <= fVar31);
          auVar34._0_4_ = -(uint)(fVar25 <= fVar28);
          auVar34._8_4_ = -(uint)(fVar38 <= fVar33);
          auVar34._12_4_ =
               -(uint)(*(float *)((long)&uStack_738 + lVar18 + 4) <=
                      *(float *)((long)&uStack_728 + lVar18 + 4));
          uVar14 = movmskps(uVar17,auVar34);
          fVar30 = 0.0;
          if ((~uVar14 & 7) == 0) {
LAB_00137896:
            fVar25 = ((fVar31 - fVar32) + (fVar33 - fVar38)) * (fVar28 - fVar25) +
                     (fVar31 - fVar32) * (fVar33 - fVar38);
            fVar35 = (fVar25 + fVar25) * __LC52;
            goto LAB_001378c5;
          }
LAB_001378ce:
          if ((ulong)(lVar12 - local_720[uVar19 * 0xe + 4]) < 0xc00) {
            HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
            ::sequential_spatial_find((PrimInfoExtRange *)local_8d0,*puVar3);
          }
          else {
            HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
            ::parallel_spatial_find((PrimInfoExtRange *)local_8d0,(ulong)puVar3);
          }
          if ((_LC30 * fVar26 <= local_8d0[0]) ||
             (local_7f4 = local_8c4,
             (ulong)(local_720[uVar19 * 0xe + 6] - local_720[uVar19 * 0xe + 5]) <
             (ulong)(((long)(local_8c4 + local_8c0) + local_720[uVar19 * 0xe + 4]) -
                    local_720[uVar19 * 0xe + 5]))) goto LAB_00136a76;
          local_7e0 = local_8b0;
          uStack_7d8 = uStack_8a8;
          local_7b0 = 1;
          local_7d0 = local_8a0;
          uStack_7c8 = uStack_898;
          local_800[1] = (float)local_8d0._4_8_;
          local_800[2] = SUB84(local_8d0._4_8_,4);
          local_7ac = local_8d0[0];
          local_7f0 = CONCAT44(local_8bc,local_8c0);
        }
        else {
          HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
          ::parallel_object_find((PrimInfoExtRange *)&local_910,(ulong)puVar3,pSVar2);
          lVar12 = local_720[uVar19 * 0xe + 5];
          uVar16 = extraout_EDX_00;
          fVar26 = local_910;
          if (local_720[uVar19 * 0xe + 6] != lVar12) goto LAB_00136d21;
LAB_00136a76:
          local_7b0 = 0;
          local_800[1] = (float)local_90c;
          local_800[2] = (float)local_908;
          local_7e0 = local_8f0;
          uStack_7d8 = uStack_8e8;
          local_7f4 = local_904;
          local_7d0 = local_8e0;
          uStack_7c8 = uStack_8d8;
          local_7f0 = local_900;
          local_7ac = fVar26;
        }
        uVar21 = uVar21 + 1;
        local_800[0] = local_7ac;
        HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>::
        split((HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>
               *)param_1[9],(Split2 *)local_800,(PrimInfoExtRange *)pSVar2,
              (PrimInfoExtRange *)&local_9e0,(PrimInfoExtRange *)&local_970);
        *(MutexSys **)(local_748 + uVar19 * 0x70 + -8) = local_9f0;
        local_748[uVar19 * 0x70] = local_9e8;
        (&local_740)[uVar19 * 0xe] = local_9e0;
        (&uStack_738)[uVar19 * 0xe] = lStack_9d8;
        local_720[uVar19 * 0xe + 6] = local_990;
        (&local_730)[uVar19 * 0xe] = local_9d0;
        (&uStack_728)[uVar19 * 0xe] = lStack_9c8;
        local_720[uVar19 * 0xe] = (long)local_9c0;
        local_720[uVar19 * 0xe + 1] = lStack_9b8;
        local_720[uVar19 * 0xe + 2] = local_9b0;
        local_720[uVar19 * 0xe + 3] = lStack_9a8;
        local_720[uVar19 * 0xe + 4] = local_9a0;
        local_720[uVar19 * 0xe + 5] = lStack_998;
        *plVar24 = (long)local_980;
        plVar24[2] = (long)local_970;
        plVar24[3] = lStack_968;
        *(undefined1 *)(plVar24 + 1) = local_978._0_1_;
        plVar24[4] = local_960;
        plVar24[5] = lStack_958;
        *(undefined4 *)(plVar24 + 6) = (undefined4)local_950;
        *(undefined4 *)((long)plVar24 + 0x34) = local_950._4_4_;
        *(undefined4 *)(plVar24 + 7) = (undefined4)uStack_948;
        *(undefined4 *)((long)plVar24 + 0x3c) = uStack_948._4_4_;
        *(undefined4 *)(plVar24 + 8) = (undefined4)local_940;
        *(undefined4 *)((long)plVar24 + 0x44) = local_940._4_4_;
        *(undefined4 *)(plVar24 + 9) = (undefined4)uStack_938;
        *(undefined4 *)((long)plVar24 + 0x4c) = uStack_938._4_4_;
        *(undefined4 *)(plVar24 + 10) = (undefined4)local_930;
        *(undefined4 *)((long)plVar24 + 0x54) = local_930._4_4_;
        *(undefined4 *)(plVar24 + 0xb) = (undefined4)uStack_928;
        *(undefined4 *)((long)plVar24 + 0x5c) = uStack_928._4_4_;
        plVar24[0xc] = local_920;
        plVar24 = plVar24 + 0xe;
      } while (uVar21 < *param_1);
      lVar12 = uVar21 * 0x70;
    }
    local_b08 = &local_750;
    uVar19 = param_1[7];
    if (uVar19 < (ulong)(param_2[0xb] - param_2[10])) {
      local_748[0] = (ulong)(local_6f8 - local_700) <= uVar19;
      local_6d8 = (ulong)(local_688 - local_690) <= uVar19;
      if (((((uVar21 != 2) && (local_668 = (ulong)(lStack_618 - local_620) <= uVar19, uVar21 != 3))
           && (local_5f8 = (ulong)(local_5a8 - local_5b0) <= uVar19, uVar21 != 4)) &&
          ((((local_588 = (ulong)(local_538 - local_540) <= uVar19, uVar21 != 5 &&
             (local_518 = (ulong)(local_4c8 - local_4d0) <= uVar19, uVar21 != 6)) &&
            ((local_4a8 = (ulong)(local_458 - local_460) <= uVar19, uVar21 != 7 &&
             ((local_438 = (ulong)(local_3e8 - local_3f0) <= uVar19, uVar21 != 8 &&
              (local_3c8 = (ulong)(local_378 - local_380) <= uVar19, uVar21 != 9)))))) &&
           (local_358 = (ulong)(local_308 - local_310) <= uVar19, uVar21 != 10)))) &&
         ((((local_2e8 = (ulong)(local_298 - local_2a0) <= uVar19, uVar21 != 0xb &&
            (local_278 = (ulong)(local_228 - local_230) <= uVar19, uVar21 != 0xc)) &&
           (local_208 = (ulong)(local_1b8 - local_1c0) <= uVar19, uVar21 != 0xd)) &&
          ((local_198 = (ulong)(local_148 - local_150) <= uVar19, uVar21 != 0xe &&
           (local_128 = (ulong)(local_d8 - local_e0) <= uVar19, uVar21 == 0x10)))))) {
        local_b8 = (ulong)(local_68 - local_70) <= uVar19;
      }
    }
    if (lVar12 != 0) {
      uVar19 = (lVar12 >> 4) * 0x6db6db6db6db6db7;
      puVar1 = (undefined1 *)((long)local_b08 + lVar12);
      if (uVar19 == 0) {
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (local_b08,puVar1,0xfffffffffffffffe);
      }
      else {
        lVar18 = 0x3f;
        if (uVar19 != 0) {
          for (; uVar19 >> lVar18 == 0; lVar18 = lVar18 + -1) {
          }
        }
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                  (local_b08,puVar1,(long)(int)lVar18 * 2);
        if (0x700 < lVar12) {
          puVar20 = auStack_50;
          std::
          __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                    (local_b08,puVar20);
          do {
            puVar20 = puVar20 + 0x70;
            std::
            __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                      ();
          } while (puVar1 != puVar20);
          goto LAB_00136edf;
        }
      }
      std::
      __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>>>>
                (local_b08,puVar1);
    }
LAB_00136edf:
    local_9f0 = (MutexSys *)0x80;
    pMVar4 = *(MutexSys **)in_stack_00000010;
    if (local_b18 != *(FastAllocator **)(pMVar4 + 8)) {
      embree::MutexSys::lock();
      if (*(long *)(pMVar4 + 8) != 0) {
        LOCK();
        *(long *)(*(long *)(pMVar4 + 8) + 0x118) =
             *(long *)(*(long *)(pMVar4 + 8) + 0x118) +
             *(long *)(pMVar4 + 0xa8) + *(long *)(pMVar4 + 0x68);
        UNLOCK();
        LOCK();
        *(long *)(*(long *)(pMVar4 + 8) + 0x120) =
             *(long *)(*(long *)(pMVar4 + 8) + 0x120) +
             (((*(long *)(pMVar4 + 0x98) + *(long *)(pMVar4 + 0x58)) - *(long *)(pMVar4 + 0x50)) -
             *(long *)(pMVar4 + 0x90));
        UNLOCK();
        LOCK();
        *(long *)(*(long *)(pMVar4 + 8) + 0x128) =
             *(long *)(*(long *)(pMVar4 + 8) + 0x128) +
             *(long *)(pMVar4 + 0xb0) + *(long *)(pMVar4 + 0x70);
        UNLOCK();
      }
      *(undefined8 *)(pMVar4 + 0x48) = 0;
      *(undefined8 *)(pMVar4 + 0x58) = 0;
      *(undefined8 *)(pMVar4 + 0x50) = 0;
      *(undefined8 *)(pMVar4 + 0x68) = 0;
      *(undefined8 *)(pMVar4 + 0x70) = 0;
      *(undefined8 *)(pMVar4 + 0x60) = 0;
      if (local_b18 == (FastAllocator *)0x0) {
        *(undefined8 *)(pMVar4 + 0x88) = 0;
        uVar13 = 0;
        *(undefined8 *)(pMVar4 + 0x98) = 0;
        *(undefined8 *)(pMVar4 + 0x90) = 0;
        *(undefined8 *)(pMVar4 + 0xa8) = 0;
        *(undefined8 *)(pMVar4 + 0xb0) = 0;
      }
      else {
        uVar13 = *(undefined8 *)(local_b18 + 0x10);
        *(undefined8 *)(pMVar4 + 0x88) = 0;
        *(undefined8 *)(pMVar4 + 0x98) = 0;
        *(undefined8 *)(pMVar4 + 0x60) = uVar13;
        *(undefined8 *)(pMVar4 + 0x90) = 0;
        *(undefined8 *)(pMVar4 + 0xa8) = 0;
        *(undefined8 *)(pMVar4 + 0xb0) = 0;
        *(undefined8 *)(pMVar4 + 0xa0) = 0;
        uVar13 = *(undefined8 *)(local_b18 + 0x10);
      }
      *(undefined8 *)(pMVar4 + 0xa0) = uVar13;
      LOCK();
      *(FastAllocator **)(pMVar4 + 8) = local_b18;
      UNLOCK();
      local_980 = pMVar4;
      embree::MutexSys::lock();
      plVar24 = *(long **)(local_b18 + 0x138);
      if (plVar24 == *(long **)(local_b18 + 0x140)) {
        std::
        vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
        ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                  ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                    *)(local_b18 + 0x130),plVar24,&local_980);
      }
      else {
        *plVar24 = (long)pMVar4;
        *(long *)(local_b18 + 0x138) = *(long *)(local_b18 + 0x138) + 8;
      }
      embree::MutexSys::unlock();
      embree::MutexSys::unlock();
    }
    lVar12 = *(long *)(in_stack_00000010 + 0x10);
    *(long *)(in_stack_00000010 + 0x28) = *(long *)(in_stack_00000010 + 0x28) + 0x80;
    uVar15 = (ulong)(-(int)lVar12 & 0xf);
    uVar19 = lVar12 + 0x80 + uVar15;
    *(ulong *)(in_stack_00000010 + 0x10) = uVar19;
    if (*(ulong *)(in_stack_00000010 + 0x18) < uVar19) {
      *(long *)(in_stack_00000010 + 0x10) = lVar12;
      if (*(MutexSys **)(in_stack_00000010 + 0x20) < (MutexSys *)0x200) {
        puVar10 = (undefined8 *)FastAllocator::malloc(local_b18,(ulong *)&local_9f0,0x40,false);
      }
      else {
        local_980 = *(MutexSys **)(in_stack_00000010 + 0x20);
        puVar10 = (undefined8 *)FastAllocator::malloc(local_b18,(ulong *)&local_980,0x40,true);
        *(undefined8 **)(in_stack_00000010 + 8) = puVar10;
        lVar12 = *(long *)(in_stack_00000010 + 0x10);
        *(long *)(in_stack_00000010 + 0x10) = 0x80;
        *(long *)(in_stack_00000010 + 0x30) =
             (*(long *)(in_stack_00000010 + 0x18) + *(long *)(in_stack_00000010 + 0x30)) - lVar12;
        *(MutexSys **)(in_stack_00000010 + 0x18) = local_980;
        if (local_980 < (MutexSys *)0x80) {
          *(long *)(in_stack_00000010 + 0x10) = 0;
          local_980 = *(MutexSys **)(in_stack_00000010 + 0x20);
          puVar10 = (undefined8 *)FastAllocator::malloc(local_b18,(ulong *)&local_980,0x40,false);
          *(undefined8 **)(in_stack_00000010 + 8) = puVar10;
          lVar12 = *(long *)(in_stack_00000010 + 0x10);
          *(long *)(in_stack_00000010 + 0x10) = 0x80;
          *(long *)(in_stack_00000010 + 0x30) =
               (*(long *)(in_stack_00000010 + 0x18) + *(long *)(in_stack_00000010 + 0x30)) - lVar12;
          *(MutexSys **)(in_stack_00000010 + 0x18) = local_980;
          if (local_980 < (MutexSys *)0x80) {
            puVar10 = (undefined8 *)0x0;
            *(long *)(in_stack_00000010 + 0x10) = 0;
          }
        }
      }
    }
    else {
      *(ulong *)(in_stack_00000010 + 0x30) = *(long *)(in_stack_00000010 + 0x30) + uVar15;
      puVar10 = (undefined8 *)(*(long *)(in_stack_00000010 + 8) + -0x80 + uVar19);
    }
    *puVar10 = 8;
    uVar13 = CONCAT44(uVar9,uVar9);
    uVar6 = CONCAT44(uVar9,uVar9);
    puVar10[1] = 8;
    uVar7 = CONCAT44(fVar27,fVar27);
    uVar8 = CONCAT44(fVar27,fVar27);
    puVar10[2] = 8;
    puVar10[4] = uVar13;
    puVar10[5] = uVar6;
    puVar10[3] = 8;
    *(float *)(puVar10 + 4) = (float)local_740;
    puVar10[8] = uVar13;
    puVar10[9] = uVar6;
    puVar10[0xc] = uVar13;
    puVar10[0xd] = uVar6;
    *(undefined4 *)(puVar10 + 8) = local_740._4_4_;
    puVar10[0xe] = uVar7;
    puVar10[0xf] = uVar8;
    puVar10[10] = uVar7;
    puVar10[0xb] = uVar8;
    puVar10[6] = uVar7;
    puVar10[7] = uVar8;
    *(undefined4 *)(puVar10 + 0xc) = (undefined4)uStack_738;
    *(undefined4 *)(puVar10 + 6) = (undefined4)local_730;
    *(undefined4 *)(puVar10 + 10) = local_730._4_4_;
    *(undefined4 *)(puVar10 + 0xe) = (undefined4)uStack_728;
    *(undefined4 *)((long)puVar10 + 0x44) = local_6d0._4_4_;
    *(undefined4 *)((long)puVar10 + 0x24) = (undefined4)local_6d0;
    *(undefined4 *)((long)puVar10 + 100) = (undefined4)uStack_6c8;
    *(undefined4 *)((long)puVar10 + 0x34) = local_6c0;
    *(undefined4 *)((long)puVar10 + 0x54) = uStack_6bc;
    *(undefined4 *)((long)puVar10 + 0x74) = uStack_6b8;
    if (uVar21 != 2) {
      *(undefined4 *)(puVar10 + 9) = uStack_65c;
      *(undefined4 *)(puVar10 + 0xd) = uStack_658;
      *(undefined4 *)(puVar10 + 5) = local_660;
      *(undefined4 *)(puVar10 + 7) = local_650;
      *(undefined4 *)(puVar10 + 0xb) = uStack_64c;
      *(undefined4 *)(puVar10 + 0xf) = uStack_648;
      if (uVar21 != 3) {
        *(undefined4 *)((long)puVar10 + 0x4c) = uStack_5ec;
        *(undefined4 *)((long)puVar10 + 0x6c) = uStack_5e8;
        *(undefined4 *)((long)puVar10 + 0x2c) = uStack_5f0;
        *(undefined4 *)((long)puVar10 + 0x3c) = uStack_5e0;
        *(undefined4 *)((long)puVar10 + 0x5c) = uStack_5dc;
        *(undefined4 *)((long)puVar10 + 0x7c) = uStack_5d8;
        if (uVar21 != 4) {
          *(undefined4 *)(puVar10 + 10) = uStack_57c;
          *(undefined4 *)(puVar10 + 0xe) = uStack_578;
          *(undefined4 *)(puVar10 + 6) = uStack_580;
          *(undefined4 *)(puVar10 + 8) = uStack_570;
          *(undefined4 *)(puVar10 + 0xc) = uStack_56c;
          *(undefined4 *)(puVar10 + 0x10) = uStack_568;
          if (uVar21 != 5) {
            *(undefined4 *)((long)puVar10 + 0x54) = uStack_50c;
            *(undefined4 *)((long)puVar10 + 0x74) = uStack_508;
            *(undefined4 *)((long)puVar10 + 0x34) = uStack_510;
            *(undefined4 *)((long)puVar10 + 0x44) = uStack_500;
            *(undefined4 *)((long)puVar10 + 100) = uStack_4fc;
            *(undefined4 *)((long)puVar10 + 0x84) = uStack_4f8;
            if (uVar21 != 6) {
              *(undefined4 *)(puVar10 + 0xb) = uStack_49c;
              *(undefined4 *)(puVar10 + 0xf) = uStack_498;
              *(undefined4 *)(puVar10 + 7) = uStack_4a0;
              *(undefined4 *)(puVar10 + 9) = uStack_490;
              *(undefined4 *)(puVar10 + 0xd) = uStack_48c;
              *(undefined4 *)(puVar10 + 0x11) = uStack_488;
              if (uVar21 != 7) {
                *(undefined4 *)((long)puVar10 + 0x5c) = uStack_42c;
                *(undefined4 *)((long)puVar10 + 0x7c) = uStack_428;
                *(undefined4 *)((long)puVar10 + 0x3c) = uStack_430;
                *(undefined4 *)((long)puVar10 + 0x4c) = uStack_420;
                *(undefined4 *)((long)puVar10 + 0x6c) = uStack_41c;
                *(undefined4 *)((long)puVar10 + 0x8c) = uStack_418;
                if (uVar21 != 8) {
                  *(undefined4 *)(puVar10 + 0xc) = uStack_3bc;
                  *(undefined4 *)(puVar10 + 0x10) = uStack_3b8;
                  *(undefined4 *)(puVar10 + 8) = uStack_3c0;
                  *(undefined4 *)(puVar10 + 10) = uStack_3b0;
                  *(undefined4 *)(puVar10 + 0xe) = uStack_3ac;
                  *(undefined4 *)(puVar10 + 0x12) = uStack_3a8;
                  if (uVar21 != 9) {
                    *(undefined4 *)((long)puVar10 + 100) = uStack_34c;
                    *(undefined4 *)((long)puVar10 + 0x84) = uStack_348;
                    *(undefined4 *)((long)puVar10 + 0x44) = uStack_350;
                    *(undefined4 *)((long)puVar10 + 0x54) = uStack_340;
                    *(undefined4 *)((long)puVar10 + 0x74) = uStack_33c;
                    *(undefined4 *)((long)puVar10 + 0x94) = uStack_338;
                    if (uVar21 != 10) {
                      *(undefined4 *)(puVar10 + 0xd) = uStack_2dc;
                      *(undefined4 *)(puVar10 + 0x11) = uStack_2d8;
                      *(undefined4 *)(puVar10 + 9) = uStack_2e0;
                      *(undefined4 *)(puVar10 + 0xb) = uStack_2d0;
                      *(undefined4 *)(puVar10 + 0xf) = uStack_2cc;
                      *(undefined4 *)(puVar10 + 0x13) = uStack_2c8;
                      if (uVar21 != 0xb) {
                        *(undefined4 *)((long)puVar10 + 0x6c) = uStack_26c;
                        *(undefined4 *)((long)puVar10 + 0x8c) = uStack_268;
                        *(undefined4 *)((long)puVar10 + 0x4c) = uStack_270;
                        *(undefined4 *)((long)puVar10 + 0x5c) = uStack_260;
                        *(undefined4 *)((long)puVar10 + 0x7c) = uStack_25c;
                        *(undefined4 *)((long)puVar10 + 0x9c) = uStack_258;
                        if (uVar21 != 0xc) {
                          *(undefined4 *)(puVar10 + 0xe) = uStack_1fc;
                          *(undefined4 *)(puVar10 + 0x12) = uStack_1f8;
                          *(undefined4 *)(puVar10 + 10) = uStack_200;
                          *(undefined4 *)(puVar10 + 0xc) = uStack_1f0;
                          *(undefined4 *)(puVar10 + 0x10) = uStack_1ec;
                          *(undefined4 *)(puVar10 + 0x14) = uStack_1e8;
                          if (uVar21 != 0xd) {
                            *(undefined4 *)((long)puVar10 + 0x74) = uStack_18c;
                            *(undefined4 *)((long)puVar10 + 0x94) = uStack_188;
                            *(undefined4 *)((long)puVar10 + 0x54) = uStack_190;
                            *(undefined4 *)((long)puVar10 + 100) = uStack_180;
                            *(undefined4 *)((long)puVar10 + 0x84) = uStack_17c;
                            *(undefined4 *)((long)puVar10 + 0xa4) = uStack_178;
                            if (uVar21 != 0xe) {
                              *(undefined4 *)(puVar10 + 0xf) = uStack_11c;
                              *(undefined4 *)(puVar10 + 0x13) = uStack_118;
                              *(undefined4 *)(puVar10 + 0xb) = uStack_120;
                              *(undefined4 *)(puVar10 + 0xd) = uStack_110;
                              *(undefined4 *)(puVar10 + 0x11) = uStack_10c;
                              *(undefined4 *)(puVar10 + 0x15) = uStack_108;
                              if (uVar21 == 0x10) {
                                *(undefined4 *)((long)puVar10 + 0x7c) = uStack_ac;
                                *(undefined4 *)((long)puVar10 + 0x9c) = uStack_a8;
                                *(undefined4 *)((long)puVar10 + 0x5c) = uStack_b0;
                                *(undefined4 *)((long)puVar10 + 0x6c) = uStack_a0;
                                *(undefined4 *)((long)puVar10 + 0x8c) = uStack_9c;
                                *(undefined4 *)((long)puVar10 + 0xac) = uStack_98;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    uVar19 = 0;
    if (param_1[6] < (ulong)(param_2[0xb] - param_2[10])) {
      local_980 = (MutexSys *)local_800;
      local_978 = local_b08;
      local_b00[0] = (MutexSys *)0x0;
      local_970 = param_1;
      TaskScheduler::
      spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>&,embree::FastAllocator::CachedAllocator,bool)::_lambda(embree::range<unsigned_long>const&)_1_>
                (0,uVar21,1,(_lambda_embree__range<unsigned_long>_const___1_ *)&local_980,
                 (TaskGroupContext *)local_b00);
      embree::TaskScheduler::wait();
      if (local_b00[0] != (MutexSys *)0x0) {
        local_9f0 = local_b00[0];
        std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
        std::rethrow_exception(&local_9f0);
      }
      *puVar10 = CONCAT44(local_800[1],local_800[0]);
      puVar10[1] = CONCAT44(local_7f4,local_800[2]);
      if (uVar21 == 2) goto LAB_00136663;
      puVar10[2] = local_7f0;
      uVar19 = uVar21;
    }
    else {
      do {
        uVar13 = recurse(param_1,local_b08,0);
        *(undefined8 *)(local_800 + uVar19 * 2) = uVar13;
        uVar19 = uVar19 + 1;
        local_b08 = local_b08 + 0xe;
      } while (uVar19 != uVar21);
      *puVar10 = CONCAT44(local_800[1],local_800[0]);
      puVar10[1] = CONCAT44(local_7f4,local_800[2]);
      if (uVar19 == 2) goto LAB_00136663;
      puVar10[2] = local_7f0;
    }
    if (uVar19 != 3) {
      puVar10[3] = uStack_7e8;
    }
    goto LAB_00136663;
  }
  lVar18 = param_2[0xb] * 0x20;
  puVar10 = (undefined8 *)(*(long *)param_1[9] + lVar18);
  puVar22 = (undefined8 *)(*(long *)param_1[9] + lVar12 * 0x20);
  if (puVar10 != puVar22) {
    lVar18 = lVar18 + lVar12 * -0x20;
    uVar21 = lVar18 >> 5;
    if (uVar21 == 0) {
      std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar22,puVar10,0xfffffffffffffffe);
    }
    else {
      lVar12 = 0x3f;
      if (uVar21 != 0) {
        for (; uVar21 >> lVar12 == 0; lVar12 = lVar12 + -1) {
        }
      }
      std::__introsort_loop<embree::PrimRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar22,puVar10,(long)(int)lVar12 * 2);
      if (0x200 < lVar18) {
        puVar23 = puVar22 + 0x40;
        std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar22,puVar23);
        for (; puVar10 != puVar23; puVar23 = puVar23 + 4) {
          while( true ) {
            uVar13 = puVar23[2];
            uVar6 = puVar23[3];
            uVar7 = *puVar23;
            uVar8 = puVar23[1];
            uVar21 = CONCAT44(*(undefined4 *)((long)puVar23 + 0x1c),
                              *(undefined4 *)((long)puVar23 + 0xc));
            puVar22 = puVar23;
            if (CONCAT44(*(undefined4 *)((long)puVar23 + -4),*(undefined4 *)((long)puVar23 + -0x14))
                <= uVar21) break;
            do {
              puVar5 = puVar22;
              puVar22 = puVar5 + -4;
              *puVar5 = *puVar22;
              puVar5[1] = puVar5[-3];
              puVar5[2] = puVar5[-2];
              puVar5[3] = puVar5[-1];
            } while (uVar21 < CONCAT44(*(undefined4 *)((long)puVar5 + -0x24),
                                       *(undefined4 *)((long)puVar5 + -0x34)));
            puVar23 = puVar23 + 4;
            *puVar22 = uVar7;
            puVar5[-3] = uVar8;
            puVar5[-2] = uVar13;
            puVar5[-1] = uVar6;
            if (puVar10 == puVar23) goto LAB_00136630;
          }
          *puVar23 = uVar7;
          puVar23[1] = uVar8;
          puVar23[2] = uVar13;
          puVar23[3] = uVar6;
        }
        goto LAB_00136630;
      }
    }
    std::__insertion_sort<embree::PrimRef*,__gnu_cxx::__ops::_Iter_less_iter>(puVar22,puVar10);
  }
LAB_00136630:
  puVar10 = (undefined8 *)createLargeLeaf(param_1,param_2);
LAB_00136663:
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar10;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::NodeRefPtr<4> embree::sse2::GeneralBVHBuilder::build<embree::NodeRefPtr<4>,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::Scene::BuildProgressMonitorInterface>(embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,
   embree::PrimRef, 32ul, 16ul>&, embree::PrimRef*, embree::sse2::PrimInfoExtRange const&,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2,
   embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > > const&,
   embree::Scene::BuildProgressMonitorInterface const&, embree::sse2::GeneralBVHBuilder::Settings
   const&) */

void embree::sse2::GeneralBVHBuilder::
     build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::Scene::BuildProgressMonitorInterface>
               (undefined8 param_1,undefined8 param_2,undefined4 *param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,ulong *param_7)

{
  long in_FS_OFFSET;
  undefined1 local_132;
  undefined1 local_131;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 uStack_120;
  undefined8 local_118;
  undefined8 local_108;
  undefined1 local_100;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  ulong local_98;
  ulong uStack_90;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  ulong uStack_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 *local_48;
  undefined1 *local_40;
  undefined1 *local_38;
  undefined8 local_30;
  undefined8 *local_28;
  undefined8 *local_20;
  undefined8 local_18;
  long local_10;
  
  local_98 = *param_7;
  uStack_90 = param_7[1];
  local_88 = param_7[2];
  uStack_80 = param_7[3];
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = param_7[4];
  uStack_70 = param_7[5];
  local_68 = param_7[6];
  uStack_60 = param_7[7];
  local_48 = &local_130;
  local_40 = &local_131;
  local_38 = &local_132;
  local_20 = &local_108;
  local_28 = &local_128;
  local_130 = param_4;
  local_58 = param_2;
  local_50 = param_1;
  local_30 = param_5;
  local_18 = param_6;
  if (0x10 < *param_7) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  local_b8 = *(undefined8 *)(param_3 + 0x10);
  local_f8 = *param_3;
  uStack_f4 = param_3[1];
  uStack_f0 = param_3[2];
  uStack_ec = param_3[3];
  local_100 = 0;
  local_e8 = param_3[4];
  uStack_e4 = param_3[5];
  uStack_e0 = param_3[6];
  uStack_dc = param_3[7];
  local_d8 = param_3[8];
  uStack_d4 = param_3[9];
  uStack_d0 = param_3[10];
  uStack_cc = param_3[0xb];
  local_108 = 1;
  local_c8 = param_3[0xc];
  uStack_c4 = param_3[0xd];
  uStack_c0 = param_3[0xe];
  uStack_bc = param_3[0xf];
  local_b0 = *(undefined8 *)(param_3 + 0x12);
  local_a8 = *(undefined8 *)(param_3 + 0x14);
  local_128 = 0;
  uStack_120 = 0;
  local_118 = 0;
  BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
  ::recurse(&local_98,local_20,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::build() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::build(BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
        *this)

{
  FastAllocator *pFVar1;
  ulong *puVar2;
  Geometry *pGVar3;
  Device *pDVar4;
  Block *pBVar5;
  void *pvVar6;
  string *psVar7;
  long lVar8;
  undefined **ppuVar9;
  Block *pBVar10;
  uint uVar11;
  ulong uVar12;
  long lVar13;
  undefined8 *puVar14;
  ulong uVar15;
  ulong uVar16;
  undefined8 *puVar17;
  undefined8 uVar18;
  long lVar19;
  long *plVar20;
  size_t sVar21;
  long *plVar22;
  undefined8 uVar23;
  ulong uVar24;
  uint uVar25;
  ulong *puVar26;
  long *plVar27;
  vector_t *pvVar28;
  uint uVar29;
  undefined8 *puVar30;
  ulong *puVar31;
  long *plVar32;
  byte bVar33;
  vector_t *pvVar34;
  vector_t *pvVar35;
  char *__s;
  long in_FS_OFFSET;
  bool bVar36;
  float fVar37;
  double dVar38;
  double local_1e8;
  undefined4 local_1b0;
  float local_1ac;
  undefined8 local_1a8;
  undefined **local_1a0;
  undefined ***local_198;
  undefined **local_190;
  undefined **local_188;
  undefined8 local_180;
  undefined **local_178;
  undefined8 *local_170;
  undefined ****local_168;
  undefined ***local_158;
  undefined8 uStack_150;
  undefined8 local_148;
  undefined8 uStack_140;
  undefined ***local_138;
  undefined8 uStack_130;
  undefined8 local_128;
  undefined8 uStack_120;
  long local_118;
  long local_110;
  undefined ***local_108;
  float *pfStack_100;
  TaskGroupContext *local_f8;
  float *pfStack_f0;
  undefined ***local_e8;
  undefined8 uStack_e0;
  undefined8 local_d8;
  undefined8 uStack_d0;
  long local_c8;
  long local_c0;
  vector_t *local_b8;
  long *local_a8 [2];
  long local_98 [2];
  long *local_88;
  long local_80;
  long local_78 [2];
  ulong *local_68;
  long local_60;
  ulong local_58 [5];
  
  local_58[3] = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(this + 0x20) == 0) {
LAB_001389a8:
    lVar13 = *(long *)(this + 0x18);
    pvVar28 = *(vector_t **)(lVar13 + 0x288);
    *(int *)(this + 0x98) = (int)pvVar28;
    if (pvVar28 == (vector_t *)0x0) goto LAB_001389c3;
    psVar7 = *(string **)(this + 0x10);
    bVar33 = *(byte *)(*(long *)(lVar13 + 0x188) + 0x464);
    if (*(long *)(lVar13 + 0x1d0) == 0) {
      uVar29 = 0;
      uVar25 = 0;
      if (bVar33 != 0) goto LAB_00138f43;
LAB_00139763:
      bVar33 = 0;
      __s = "BuilderFastSpatialSAH";
    }
    else {
      uVar25 = 0;
      uVar29 = 0;
      lVar19 = 0;
      do {
        lVar8 = *(long *)(*(long *)(lVar13 + 0x1e0) + lVar19 * 8);
        if ((((lVar8 != 0) && ((*(byte *)(lVar8 + 0x3e) & 0x20) != 0)) &&
            (*(char *)(lVar8 + 0x3c) == '\x14')) &&
           ((*(int *)(lVar8 + 0x24) == 1 &&
            (uVar11 = (uint)lVar19, bVar36 = uVar29 < uVar11, uVar29 = uVar25, bVar36)))) {
          uVar29 = uVar11;
          uVar25 = uVar11;
        }
        lVar19 = lVar19 + 1;
      } while (lVar19 != *(long *)(lVar13 + 0x1d0));
      bVar33 = bVar33 | 0x7ffffff < uVar29;
      uVar25 = uVar29;
      if (bVar33 == 0) goto LAB_00139763;
LAB_00138f43:
      uVar29 = uVar25;
      __s = "BuilderFastSpatialPresplitSAH";
    }
    local_a8[0] = local_98;
    std::__cxx11::string::_M_construct((ulong)local_a8,'\x01');
    *(undefined1 *)local_a8[0] = 0x34;
    plVar20 = (long *)std::__cxx11::string::_M_replace((ulong)local_a8,0,(char *)0x0,0x1310fc);
    plVar22 = plVar20 + 2;
    if ((long *)*plVar20 == plVar22) {
      uVar12 = plVar20[1] + 1;
      plVar27 = plVar22;
      plVar32 = local_78;
      if (7 < (uint)uVar12) {
        uVar15 = 0;
        do {
          uVar25 = (int)uVar15 + 8;
          uVar24 = (ulong)uVar25;
          *(undefined8 *)((long)local_78 + uVar15) = *(undefined8 *)((long)plVar22 + uVar15);
          uVar15 = uVar24;
        } while (uVar25 < ((uint)uVar12 & 0xfffffff8));
        plVar32 = (long *)((long)local_78 + uVar24);
        plVar27 = (long *)(uVar24 + (long)plVar22);
      }
      lVar13 = 0;
      if ((uVar12 & 4) != 0) {
        *(int *)plVar32 = (int)*plVar27;
        lVar13 = 4;
      }
      if ((uVar12 & 2) != 0) {
        *(undefined2 *)((long)plVar32 + lVar13) = *(undefined2 *)((long)plVar27 + lVar13);
        lVar13 = lVar13 + 2;
      }
      local_88 = local_78;
      if ((uVar12 & 1) != 0) {
        *(undefined1 *)((long)plVar32 + lVar13) = *(undefined1 *)((long)plVar27 + lVar13);
      }
    }
    else {
      local_78[0] = plVar20[2];
      local_88 = (long *)*plVar20;
    }
    local_80 = plVar20[1];
    *plVar20 = (long)plVar22;
    plVar20[1] = 0;
    *(undefined1 *)(plVar20 + 2) = 0;
    sVar21 = strlen(__s);
    if (0x3fffffffffffffffU - local_80 < sVar21) {
                    /* WARNING: Subroutine does not return */
      std::__throw_length_error("basic_string::append");
    }
    plVar22 = (long *)std::__cxx11::string::_M_append((char *)&local_88,(ulong)__s);
    puVar2 = (ulong *)(plVar22 + 2);
    if ((ulong *)*plVar22 == puVar2) {
      uVar12 = plVar22[1] + 1;
      puVar26 = puVar2;
      puVar31 = local_58;
      if (7 < (uint)uVar12) {
        uVar15 = 0;
        do {
          uVar25 = (int)uVar15 + 8;
          uVar24 = (ulong)uVar25;
          *(undefined8 *)((long)local_58 + uVar15) = *(undefined8 *)((long)puVar2 + uVar15);
          uVar15 = uVar24;
        } while (uVar25 < ((uint)uVar12 & 0xfffffff8));
        puVar31 = (ulong *)((long)local_58 + uVar24);
        puVar26 = (ulong *)(uVar24 + (long)puVar2);
      }
      lVar13 = 0;
      if ((uVar12 & 4) != 0) {
        *(int *)puVar31 = (int)*puVar26;
        lVar13 = 4;
      }
      if ((uVar12 & 2) != 0) {
        *(undefined2 *)((long)puVar31 + lVar13) = *(undefined2 *)((long)puVar26 + lVar13);
        lVar13 = lVar13 + 2;
      }
      local_68 = local_58;
      if ((uVar12 & 1) != 0) {
        *(undefined1 *)((long)puVar31 + lVar13) = *(undefined1 *)((long)puVar26 + lVar13);
      }
    }
    else {
      local_58[0] = plVar22[2];
      local_68 = (ulong *)*plVar22;
    }
    local_60 = plVar22[1];
    *plVar22 = (long)puVar2;
    plVar22[1] = 0;
    *(undefined1 *)(plVar22 + 2) = 0;
    local_1e8 = (double)embree::BVHN<4>::preBuild(psVar7);
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
    if (local_88 != local_78) {
      operator_delete(local_88,local_78[0] + 1);
    }
    if (local_a8[0] != local_98) {
      operator_delete(local_a8[0],local_98[0] + 1);
    }
  }
  else {
    uVar29 = *(uint *)(this + 0x98);
    if (*(uint *)(*(long *)(this + 0x20) + 0x20) == uVar29) {
      *(uint *)(this + 0x98) = uVar29;
    }
    else {
      lVar13 = *(long *)(this + 0x10);
      pFVar1 = (FastAllocator *)(lVar13 + 0x78);
      FastAllocator::internal_fix_used_blocks(pFVar1);
      plVar22 = *(long **)(lVar13 + 0x1a8);
      plVar20 = *(long **)(lVar13 + 0x1b0);
      if (plVar20 != plVar22) {
        do {
          while( true ) {
            lVar19 = *plVar22;
            if (pFVar1 != *(FastAllocator **)(lVar19 + 8)) break;
            embree::MutexSys::lock();
            if (pFVar1 == *(FastAllocator **)(lVar19 + 8)) {
              LOCK();
              plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x118);
              *plVar32 = *plVar32 + *(long *)(lVar19 + 0xa8) + *(long *)(lVar19 + 0x68);
              UNLOCK();
              LOCK();
              plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x120);
              *plVar32 = *plVar32 +
                         (((*(long *)(lVar19 + 0x98) + *(long *)(lVar19 + 0x58)) -
                          *(long *)(lVar19 + 0x50)) - *(long *)(lVar19 + 0x90));
              UNLOCK();
              LOCK();
              plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x128);
              *plVar32 = *plVar32 + *(long *)(lVar19 + 0xb0) + *(long *)(lVar19 + 0x70);
              UNLOCK();
              *(undefined8 *)(lVar19 + 0x48) = 0;
              *(undefined8 *)(lVar19 + 0x58) = 0;
              *(undefined8 *)(lVar19 + 0x50) = 0;
              *(undefined8 *)(lVar19 + 0x68) = 0;
              *(undefined8 *)(lVar19 + 0x70) = 0;
              *(undefined8 *)(lVar19 + 0x60) = 0;
              *(undefined8 *)(lVar19 + 0x88) = 0;
              *(undefined8 *)(lVar19 + 0x98) = 0;
              *(undefined8 *)(lVar19 + 0x90) = 0;
              *(undefined8 *)(lVar19 + 0xa8) = 0;
              *(undefined8 *)(lVar19 + 0xb0) = 0;
              *(undefined8 *)(lVar19 + 0xa0) = 0;
              LOCK();
              *(undefined8 *)(lVar19 + 8) = 0;
              UNLOCK();
            }
            plVar22 = plVar22 + 1;
            embree::MutexSys::unlock();
            if (plVar20 == plVar22) goto LAB_001387f1;
          }
          plVar22 = plVar22 + 1;
        } while (plVar20 != plVar22);
LAB_001387f1:
        if (*(long *)(lVar13 + 0x1a8) != *(long *)(lVar13 + 0x1b0)) {
          *(long *)(lVar13 + 0x1b0) = *(long *)(lVar13 + 0x1a8);
        }
      }
      LOCK();
      *(undefined8 *)(lVar13 + 400) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar13 + 0x198) = 0;
      UNLOCK();
      LOCK();
      *(undefined8 *)(lVar13 + 0x1a0) = 0;
      UNLOCK();
      if (*(long *)(lVar13 + 0x170) != 0) {
        bVar36 = *(bool *)(lVar13 + 0x180);
        pDVar4 = *(Device **)(lVar13 + 0x78);
        pBVar10 = *(Block **)(lVar13 + 0x170);
        while (pBVar10 != (Block *)0x0) {
          pBVar5 = *(Block **)(pBVar10 + 0x18);
          FastAllocator::Block::clear_block(pBVar10,pDVar4,bVar36);
          pBVar10 = pBVar5;
        }
      }
      LOCK();
      *(undefined8 *)(lVar13 + 0x170) = 0;
      UNLOCK();
      if (*(long *)(lVar13 + 0x178) != 0) {
        bVar36 = *(bool *)(lVar13 + 0x180);
        pDVar4 = *(Device **)(lVar13 + 0x78);
        pBVar10 = *(Block **)(lVar13 + 0x178);
        while (pBVar10 != (Block *)0x0) {
          pBVar5 = *(Block **)(pBVar10 + 0x18);
          FastAllocator::Block::clear_block(pBVar10,pDVar4,bVar36);
          pBVar10 = pBVar5;
        }
      }
      LOCK();
      *(undefined8 *)(lVar13 + 0x178) = 0;
      UNLOCK();
      puVar17 = (undefined8 *)(lVar13 + 0xf0);
      do {
        LOCK();
        *puVar17 = 0;
        UNLOCK();
        LOCK();
        puVar17[8] = 0;
        UNLOCK();
        puVar17 = puVar17 + 1;
      } while ((undefined8 *)(lVar13 + 0x130) != puVar17);
      pvVar6 = *(void **)(lVar13 + 0x1e8);
      lVar19 = *(long *)(lVar13 + 0x1e0);
      if (pvVar6 != (void *)0x0) {
        if ((ulong)(lVar19 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar6);
        }
        else {
          embree::os_free(pvVar6,lVar19 << 5,*(bool *)(lVar13 + 0x1d0));
        }
      }
      if (lVar19 != 0) {
        (**(code **)**(undefined8 **)(lVar13 + 0x1c8))
                  (*(undefined8 **)(lVar13 + 0x1c8),lVar19 * -0x20,1);
      }
      *(undefined8 *)(lVar13 + 0x1e8) = 0;
      *(undefined8 *)(lVar13 + 0x1e0) = 0;
      *(undefined8 *)(lVar13 + 0x1d8) = 0;
      if (*(long *)(this + 0x20) == 0) goto LAB_001389a8;
      uVar29 = *(uint *)(*(long *)(this + 0x20) + 0x20);
      *(uint *)(this + 0x98) = uVar29;
    }
    pvVar28 = (vector_t *)(ulong)uVar29;
    if (pvVar28 == (vector_t *)0x0) {
LAB_001389c3:
      pvVar6 = *(void **)(this + 0x48);
      lVar13 = *(long *)(this + 0x40);
      if (pvVar6 != (void *)0x0) {
        if ((ulong)(lVar13 << 5) < 0x1c00000) {
          embree::alignedFree(pvVar6);
        }
        else {
          embree::os_free(pvVar6,lVar13 << 5,(bool)this[0x30]);
        }
      }
      if (lVar13 != 0) {
        (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar13 * -0x20,1);
      }
      *(undefined8 *)(this + 0x48) = 0;
      *(undefined8 *)(this + 0x40) = 0;
      *(undefined8 *)(this + 0x38) = 0;
      if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Could not recover jumptable at 0x00138a4a. Too many branches */
                    /* WARNING: Treating indirect jump as call */
        (**(code **)(**(long **)(this + 0x10) + 0x28))();
        return;
      }
      goto LAB_00139803;
    }
    uVar29 = *(uint *)(this + 0x94);
    local_58[0] = local_58[0] & 0xffffffffffffff00;
    bVar33 = 0x7ffffff < uVar29 | *(byte *)(*(long *)(*(long *)(this + 0x18) + 0x188) + 0x464);
    local_60 = 0;
    local_68 = local_58;
    local_1e8 = (double)embree::BVHN<4>::preBuild(*(string **)(this + 0x10));
    if (local_68 != local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
  }
  fVar37 = (float)pvVar28 * *(float *)(this + 0x90);
  if (__LC27 <= fVar37) {
    pvVar35 = *(vector_t **)(this + 0x40);
    pvVar34 = (vector_t *)((long)(fVar37 - __LC27) ^ 0x8000000000000000);
    if (pvVar34 < pvVar28) {
      pvVar34 = pvVar28;
    }
    if (pvVar35 < pvVar34) goto LAB_00138329;
LAB_00138a76:
    lVar13 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar34;
    if (*(long *)(this + 0x20) != 0) goto LAB_00138466;
LAB_00138a89:
    lVar13 = *(long *)(lVar13 + 0x68);
    if (bVar33 != 0) goto LAB_00138a96;
LAB_00139778:
    embree::sse2::createPrimRefArray
              (&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar34,this + 0x28,lVar13 + 600);
LAB_0013942e:
    local_110 = local_c0;
    local_118 = local_c8;
    uVar18 = *(undefined8 *)(this + 0x18);
    local_158 = local_108;
    uStack_150 = pfStack_100;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    dVar38 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC57 * __LC58;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC36 <= dVar38) {
      uVar12 = (long)(dVar38 - _LC36) ^ 0x8000000000000000;
    }
    else {
      uVar12 = (ulong)dVar38;
    }
    uVar12 = uVar12 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar12);
    uVar23 = FastAllocator::fixSingleThreadThreshold
                       ((FastAllocator *)(*(long *)(this + 0x10) + 0x78),4,0x400,
                        local_110 - local_118,uVar12);
    local_188 = &PTR_operator___0013f540;
    ppuVar9 = *(undefined ***)(this + 0x10);
    local_1a0 = *(undefined ***)(this + 0x48);
    *(undefined8 *)(this + 0x80) = uVar23;
    *(undefined8 *)(this + 0x50) = 4;
    lVar13 = local_110 - local_118;
    *(undefined8 *)(this + 0x58) = 0x28;
    local_180 = *(undefined8 *)(ppuVar9[0xd] + 0x260);
    local_170 = &local_1a8;
    pfStack_f0 = &local_1ac;
    local_190 = (undefined **)0x0;
    local_1a8 = uVar18;
    local_178 = local_1a0;
    local_168 = &local_158;
    if (lVar13 == 1) {
      fVar37 = *(float *)((long)local_1a0 + 0x14) - *(float *)((long)local_1a0 + 4);
      fVar37 = (fVar37 + (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1))) *
               (*(float *)(local_1a0 + 2) - *(float *)local_1a0) +
               fVar37 * (*(float *)(local_1a0 + 3) - *(float *)(local_1a0 + 1));
      dVar38 = (double)(fVar37 + fVar37) + 0.0;
      uVar12 = 1;
    }
    else {
      local_198 = &local_1a0;
      local_108 = &local_190;
      pfStack_100 = pfStack_f0;
      local_f8 = (TaskGroupContext *)&local_198;
      dVar38 = (double)_ZN6embree24parallel_reduce_internalImdZNS_15parallel_reduceImdZNS_4sse230BVHBuilderBinnedFastSpatialSAH5buildINS_10NodeRefPtrILi4EEENS_4BVHNILi4EE11CreateAllocENS_10AABBNode_tIS6_Li4EE7Create2ENSB_4Set2ENS2_17CreateLeafSpatialILi4ENS_10TriangleMvILi4EEEEENS2_23TriangleSplitterFactoryENS_5Scene29BuildProgressMonitorInterfaceEEET_T0_T1_T2_RKT3_T4_T5_PNS_7PrimRefEmRKNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEERKNS2_17GeneralBVHBuilder8SettingsEEUlRKNS_5rangeImEEE_St4plusIdEEESM_SL_SL_RKSM_RKSN_RKSO_EUlS18_E_S1D_EESM_SL_SL_SL_SL_S1F_S1H_S1J__isra_0
                                 (lVar13,0,lVar13,&local_190,
                                  (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108);
      uVar12 = local_110 - local_118;
    }
    pfStack_100 = (float *)&local_1b0;
    local_1ac = _LC12 / (float)dVar38;
    local_1b0 = 0x41200000;
    local_198 = (undefined ***)0x0;
    local_108 = &local_1a0;
    local_f8 = (TaskGroupContext *)&local_158;
    TaskScheduler::
    spawn<unsigned_long,embree::sse2::BVHBuilderBinnedFastSpatialSAH::build<embree::NodeRefPtr<4>,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface>(embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>const&,embree::sse2::TriangleSplitterFactory,embree::Scene::BuildProgressMonitorInterface,embree::PrimRef*,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::GeneralBVHBuilder::Settings_const&)::_lambda(embree::range<unsigned_long>const&)_2_>
              (0,uVar12,1,(_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,
               (TaskGroupContext *)&local_198);
    embree::TaskScheduler::wait();
    if (local_198 != (undefined ***)0x0) {
      local_190 = (undefined **)local_198;
      std::__exception_ptr::exception_ptr::_M_addref();
                    /* WARNING: Subroutine does not return */
      std::rethrow_exception(&local_190);
    }
    local_c8 = 0;
    local_108 = local_158;
    pfStack_100 = (float *)uStack_150;
    local_c0 = local_110 - local_118;
    local_f8 = (TaskGroupContext *)local_148;
    pfStack_f0 = (float *)uStack_140;
    local_e8 = local_138;
    uStack_e0 = uStack_130;
    local_d8 = local_128;
    uStack_d0 = uStack_120;
    local_190 = ppuVar9;
    local_b8 = pvVar34;
    uVar18 = GeneralBVHBuilder::
             build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::Scene::BuildProgressMonitorInterface>
                       (&local_178,local_1a0,
                        (_lambda_embree__range<unsigned_long>_const___2_ *)&local_108,ppuVar9 + 0xf,
                        &local_190,&local_188,this + 0x50);
  }
  else {
    pvVar35 = *(vector_t **)(this + 0x40);
    pvVar34 = (vector_t *)(long)fVar37;
    if ((vector_t *)(long)fVar37 < pvVar28) {
      pvVar34 = pvVar28;
    }
    if (pvVar34 <= pvVar35) goto LAB_00138a76;
LAB_00138329:
    if (pvVar35 == (vector_t *)0x0) {
      pvVar35 = pvVar34;
      if (pvVar34 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar34;
      }
    }
    else {
      do {
        pvVar35 = (vector_t *)((long)pvVar35 * 2);
        if (pvVar35 == (vector_t *)0x0) {
          pvVar35 = (vector_t *)0x1;
        }
      } while (pvVar35 < pvVar34);
      if (pvVar34 < *(vector_t **)(this + 0x38)) {
        *(vector_t **)(this + 0x38) = pvVar34;
      }
    }
    uVar12 = (long)pvVar35 << 5;
    puVar17 = *(undefined8 **)(this + 0x48);
    (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),uVar12,0);
    if (uVar12 < 0x1c00000) {
      lVar13 = embree::alignedMalloc(uVar12,0x20);
    }
    else {
      lVar13 = embree::os_malloc(uVar12,(bool *)(this + 0x30));
    }
    *(long *)(this + 0x48) = lVar13;
    if (*(long *)(this + 0x38) != 0) {
      uVar12 = 0;
      puVar30 = puVar17;
      while( true ) {
        uVar18 = puVar30[1];
        puVar14 = (undefined8 *)(lVar13 + uVar12 * 0x20);
        *puVar14 = *puVar30;
        puVar14[1] = uVar18;
        uVar18 = puVar30[3];
        puVar14[2] = puVar30[2];
        puVar14[3] = uVar18;
        if (*(ulong *)(this + 0x38) <= uVar12 + 1) break;
        lVar13 = *(long *)(this + 0x48);
        uVar12 = uVar12 + 1;
        puVar30 = puVar30 + 4;
      }
    }
    lVar13 = *(long *)(this + 0x40);
    if (puVar17 != (undefined8 *)0x0) {
      if ((ulong)(lVar13 << 5) < 0x1c00000) {
        embree::alignedFree(puVar17);
      }
      else {
        embree::os_free(puVar17,lVar13 << 5,(bool)this[0x30]);
      }
    }
    if (lVar13 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar13 * -0x20,1);
    }
    lVar13 = *(long *)(this + 0x10);
    *(vector_t **)(this + 0x38) = pvVar34;
    *(vector_t **)(this + 0x40) = pvVar35;
    if (*(long *)(this + 0x20) == 0) goto LAB_00138a89;
LAB_00138466:
    *(undefined4 *)(lVar13 + 0x1c0) = 1;
    pGVar3 = *(Geometry **)(this + 0x20);
    lVar13 = *(long *)(*(long *)(this + 0x10) + 0x68);
    if (bVar33 == 0) {
      if (pGVar3 == (Geometry *)0x0) goto LAB_00139778;
      embree::sse2::createPrimRefArray
                ((Geometry *)&local_108,(uint)pGVar3,(ulong)*(uint *)(this + 0x94),pvVar34,
                 (BuildProgressMonitor *)(this + 0x28));
      goto LAB_0013942e;
    }
    if (pGVar3 == (Geometry *)0x0) {
LAB_00138a96:
      createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
                ((sse2 *)&local_108,*(undefined8 *)(this + 0x18),0x100000,0,pvVar28,this + 0x28,
                 lVar13 + 600);
    }
    else {
      createPrimRefArray_presplit<embree::TriangleMesh,embree::sse2::TriangleSplitterFactory>
                ((sse2 *)&local_108,pGVar3,uVar29,(ulong)pvVar28,(vector_t *)(this + 0x28),
                 (BuildProgressMonitor *)(lVar13 + 600));
    }
    local_110 = local_c0;
    local_118 = local_c8;
    local_158 = local_108;
    uStack_150 = pfStack_100;
    local_148 = local_f8;
    uStack_140 = pfStack_f0;
    dVar38 = (double)((local_c0 - local_c8) + 3U >> 2) * __LC57 * __LC58;
    local_138 = local_e8;
    uStack_130 = uStack_e0;
    local_128 = local_d8;
    uStack_120 = uStack_d0;
    if (_LC36 <= dVar38) {
      uVar12 = (long)(dVar38 - _LC36) ^ 0x8000000000000000;
    }
    else {
      uVar12 = (ulong)dVar38;
    }
    uVar12 = uVar12 + ((ulong)((local_c0 - local_c8) * 0x80) >> 4);
    FastAllocator::init_estimate((FastAllocator *)(*(long *)(this + 0x10) + 0x78),uVar12);
    uVar15 = local_110 - local_118;
    local_170 = *(undefined8 **)(this + 0x10);
    if ((uVar15 == 0) || (uVar12 == 0)) {
      uVar12 = 0x400;
    }
    else {
      bVar33 = *(byte *)((long)local_170 + 0x182);
      uVar16 = embree::TaskScheduler::threadCount();
      lVar13 = (2 - (ulong)bVar33) * local_170[0x11];
      uVar24 = lVar13 * 0x14;
      if (((uVar12 - 1) + uVar24) / uVar24 < uVar16) {
        uVar24 = lVar13 * 0x50;
        if ((long)uVar24 < 0) {
          dVar38 = (double)(uVar24 >> 1) + (double)(uVar24 >> 1);
        }
        else {
          dVar38 = (double)(long)uVar24;
        }
        dVar38 = dVar38 / ((double)uVar12 / (double)uVar15);
        if ((double)((ulong)dVar38 & _LC37) < _LC33) {
          dVar38 = (double)((ulong)((double)(long)dVar38 +
                                   (double)(-(ulong)((double)(long)dVar38 < dVar38) & _LC35)) |
                           ~_LC37 & (ulong)dVar38);
        }
        if (_LC36 <= dVar38) {
          uVar12 = (long)(dVar38 - _LC36) ^ 0x8000000000000000;
        }
        else {
          uVar12 = (ulong)dVar38;
        }
        local_170 = *(undefined8 **)(this + 0x10);
      }
      else {
        local_170 = *(undefined8 **)(this + 0x10);
        uVar12 = 0x400;
      }
    }
    *(ulong *)(this + 0x80) = uVar12;
    local_f8 = *(TaskGroupContext **)(this + 0x60);
    pfStack_f0 = *(float **)(this + 0x68);
    *(undefined8 *)(this + 0x50) = 4;
    local_e8 = *(undefined ****)(this + 0x70);
    uStack_e0 = *(undefined8 *)(this + 0x78);
    *(undefined8 *)(this + 0x58) = 0x28;
    local_108 = *(undefined ****)(this + 0x50);
    pfStack_100 = *(float **)(this + 0x58);
    local_d8 = *(undefined8 *)(this + 0x80);
    uStack_d0 = *(undefined8 *)(this + 0x88);
    local_178 = &PTR_createLeaf_0013ef20;
    uVar18 = embree::sse2::BVHNBuilderVirtual<4>::BVHNBuilderV::build
                       (&local_178,local_170 + 0xf,local_170[0xd] + 600,*(undefined8 *)(this + 0x48)
                        ,&local_158);
  }
  local_108 = local_158;
  pfStack_100 = (float *)uStack_150;
  local_f8 = (TaskGroupContext *)local_148;
  pfStack_f0 = (float *)uStack_140;
  local_e8 = local_158;
  uStack_e0 = uStack_150;
  local_d8 = local_148;
  uStack_d0 = uStack_140;
  embree::BVHN<4>::set(*(undefined8 *)(this + 0x10),uVar18,&local_108,local_110 - local_118);
  embree::BVHN<4>::layoutLargeNodes(*(ulong *)(this + 0x10));
  if ((*(long *)(this + 0x18) != 0) && ((*(byte *)(*(long *)(this + 0x18) + 0x230) & 1) == 0)) {
    pvVar6 = *(void **)(this + 0x48);
    lVar13 = *(long *)(this + 0x40);
    if (pvVar6 != (void *)0x0) {
      if ((ulong)(lVar13 << 5) < 0x1c00000) {
        embree::alignedFree(pvVar6);
      }
      else {
        embree::os_free(pvVar6,lVar13 << 5,(bool)this[0x30]);
      }
    }
    if (lVar13 != 0) {
      (**(code **)**(undefined8 **)(this + 0x28))(*(undefined8 **)(this + 0x28),lVar13 * -0x20,1);
    }
    *(undefined8 *)(this + 0x48) = 0;
    *(undefined8 *)(this + 0x40) = 0;
    *(undefined8 *)(this + 0x38) = 0;
  }
  lVar13 = *(long *)(this + 0x10);
  pFVar1 = (FastAllocator *)(lVar13 + 0x78);
  FastAllocator::internal_fix_used_blocks(pFVar1);
  plVar22 = *(long **)(lVar13 + 0x1a8);
  plVar20 = *(long **)(lVar13 + 0x1b0);
  if (plVar22 != plVar20) {
    do {
      while( true ) {
        lVar19 = *plVar22;
        if (pFVar1 != *(FastAllocator **)(lVar19 + 8)) break;
        embree::MutexSys::lock();
        if (pFVar1 == *(FastAllocator **)(lVar19 + 8)) {
          LOCK();
          plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x118);
          *plVar32 = *plVar32 + *(long *)(lVar19 + 0xa8) + *(long *)(lVar19 + 0x68);
          UNLOCK();
          LOCK();
          plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x120);
          *plVar32 = *plVar32 +
                     (((*(long *)(lVar19 + 0x98) + *(long *)(lVar19 + 0x58)) -
                      *(long *)(lVar19 + 0x50)) - *(long *)(lVar19 + 0x90));
          UNLOCK();
          LOCK();
          plVar32 = (long *)(*(long *)(lVar19 + 8) + 0x128);
          *plVar32 = *plVar32 + *(long *)(lVar19 + 0xb0) + *(long *)(lVar19 + 0x70);
          UNLOCK();
          *(undefined8 *)(lVar19 + 0x48) = 0;
          *(undefined8 *)(lVar19 + 0x58) = 0;
          *(undefined8 *)(lVar19 + 0x50) = 0;
          *(undefined8 *)(lVar19 + 0x68) = 0;
          *(undefined8 *)(lVar19 + 0x70) = 0;
          *(undefined8 *)(lVar19 + 0x60) = 0;
          *(undefined8 *)(lVar19 + 0x88) = 0;
          *(undefined8 *)(lVar19 + 0x98) = 0;
          *(undefined8 *)(lVar19 + 0x90) = 0;
          *(undefined8 *)(lVar19 + 0xa8) = 0;
          *(undefined8 *)(lVar19 + 0xb0) = 0;
          *(undefined8 *)(lVar19 + 0xa0) = 0;
          LOCK();
          *(undefined8 *)(lVar19 + 8) = 0;
          UNLOCK();
        }
        plVar22 = plVar22 + 1;
        embree::MutexSys::unlock();
        if (plVar20 == plVar22) goto LAB_00138e31;
      }
      plVar22 = plVar22 + 1;
    } while (plVar20 != plVar22);
LAB_00138e31:
    if (*(long *)(lVar13 + 0x1a8) != *(long *)(lVar13 + 0x1b0)) {
      *(long *)(lVar13 + 0x1b0) = *(long *)(lVar13 + 0x1a8);
    }
  }
  embree::BVHN<4>::postBuild(local_1e8);
  if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
LAB_00139803:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >,
   embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory, embree::PrimRef,
   32ul, 16ul>, embree::sse2::PrimInfoExtRange, embree::PrimRef, embree::NodeRefPtr<4>,
   embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,
   embree::sse2::CreateLeafSpatial<4, embree::TriangleMv<4> > >,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,
   embree::sse2::PrimInfoExtRange>,
   embree::Scene::BuildProgressMonitorInterface>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::Split2<embree::sse2::BinSplit<32ul>, embree::sse2::SpatialBinSplit<16ul> > >&,
   embree::FastAllocator::CachedAllocator, bool)::{lambda(embree::range<unsigned long> const&)#1}
   const&, embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressM...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  ulong uVar8;
  undefined8 uVar9;
  TaskScheduler *pTVar10;
  long lVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  long local_a8;
  ulong uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar12 = *(ulong *)(this + 8);
  uVar8 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar12 - uVar8) {
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uStack_40 = *(undefined8 *)(this + 0x30);
    uVar12 = uVar12 + uVar8 >> 1;
    local_68 = uVar12;
    uStack_60 = uVar8;
    local_58 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_68,pTVar4,uVar12 - uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) goto LAB_00139c2e;
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_00139c2e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_0013f0e8;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[7] = local_38;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar12 - uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(undefined8 *)(this + 0x18);
    local_a8 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_90 = *(undefined8 *)(this + 0x20);
    uStack_88 = *(undefined8 *)(this + 0x28);
    uStack_80 = *(undefined8 *)(this + 0x30);
    uVar8 = local_a8 - uVar12;
    uStack_a0 = uVar12;
    local_78 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInt___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_a8,pTVar4,uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_00139c2e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar12 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar12) goto LAB_00139c2e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar12;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar12);
      *puVar3 = &PTR_execute_0013f0e8;
      puVar3[1] = local_a8;
      puVar3[2] = uStack_a0;
      puVar3[7] = local_78;
      puVar3[3] = local_98;
      puVar3[4] = uStack_90;
      puVar3[5] = uStack_88;
      puVar3[6] = uStack_80;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    lVar6 = uVar8 * 0x70;
    for (; uVar8 < uVar12; uVar8 = uVar8 + 1) {
      local_68 = 0;
      uStack_60 = 0;
      lVar5 = *(long *)(this + 0x20);
      local_58 = 0;
      lVar11 = *(long *)(this + 0x28) + lVar6;
      lVar6 = lVar6 + 0x70;
      uVar9 = sse2::GeneralBVHBuilder::
              BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::Split2<embree::sse2::BinSplit<32ul>,embree::sse2::SpatialBinSplit<16ul>>>,embree::sse2::HeuristicArraySpatialSAH<embree::sse2::TriangleSplitterFactory,embree::PrimRef,32ul,16ul>,embree::sse2::PrimInfoExtRange,embree::PrimRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHBuilderBinnedFastSpatialSAH::CreateLeafExt<embree::NodeRefPtr<4>,embree::sse2::CreateLeafSpatial<4,embree::TriangleMv<4>>>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::PrimRef,embree::sse2::PrimInfoExtRange>,embree::Scene::BuildProgressMonitorInterface>
              ::recurse(*(undefined8 *)(this + 0x30),lVar11,1);
      *(undefined8 *)(lVar5 + uVar8 * 8) = uVar9;
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleM<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleM<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMv<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMv<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderFastSpatialSAH<4, embree::TriangleMesh, embree::TriangleMi<4>,
   embree::sse2::TriangleSplitterFactory>::~BVHNBuilderFastSpatialSAH() */

void __thiscall
embree::sse2::
BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
::~BVHNBuilderFastSpatialSAH
          (BVHNBuilderFastSpatialSAH<4,embree::TriangleMesh,embree::TriangleMi<4>,embree::sse2::TriangleSplitterFactory>
           *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}




