/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, long, long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, __gnu_cxx::__ops::_Iter_less_iter) [clone
   .isra.0] */

void std::
     __adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
               (long param_1,long param_2,ulong param_3,undefined8 *param_4)

{
  float fVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  long lVar9;
  undefined8 *puVar10;
  long lVar11;
  long lVar12;
  long lVar13;
  
  lVar13 = (long)(param_3 - 1) / 2;
  lVar12 = param_2;
  if (param_2 < lVar13) {
    do {
      lVar9 = (lVar12 + 1) * 2;
      lVar11 = (lVar12 + 1) * 0x80;
      puVar8 = (undefined8 *)(param_1 + lVar11);
      fVar1 = *(float *)(param_1 + -0x18 + lVar11);
      if (*(float *)(puVar8 + 5) <= fVar1 && fVar1 != *(float *)(puVar8 + 5)) {
        lVar9 = lVar9 + -1;
        puVar10 = (undefined8 *)(lVar12 * 0x40 + param_1);
        puVar8 = (undefined8 *)(lVar9 * 0x40 + param_1);
        uVar2 = puVar8[1];
        *puVar10 = *puVar8;
        puVar10[1] = uVar2;
        uVar2 = puVar8[3];
        puVar10[2] = puVar8[2];
        puVar10[3] = uVar2;
      }
      else {
        uVar2 = puVar8[1];
        puVar10 = (undefined8 *)(lVar12 * 0x40 + param_1);
        *puVar10 = *puVar8;
        puVar10[1] = uVar2;
        uVar2 = puVar8[3];
        puVar10[2] = puVar8[2];
        puVar10[3] = uVar2;
      }
      puVar10[4] = puVar8[4];
      *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar8 + 5);
      lVar12 = lVar9;
    } while (lVar9 < lVar13);
  }
  else {
    puVar8 = (undefined8 *)(param_2 * 0x40 + param_1);
    lVar9 = param_2;
  }
  if (((param_3 & 1) == 0) && ((long)(param_3 - 2) / 2 == lVar9)) {
    lVar12 = lVar9 + 1;
    lVar9 = lVar9 + lVar12;
    puVar10 = (undefined8 *)(param_1 + -0x40 + lVar12 * 0x80);
    uVar2 = puVar10[1];
    *puVar8 = *puVar10;
    puVar8[1] = uVar2;
    uVar2 = puVar10[3];
    puVar8[2] = puVar10[2];
    puVar8[3] = uVar2;
    puVar8[4] = puVar10[4];
    *(undefined4 *)(puVar8 + 5) = *(undefined4 *)(puVar10 + 5);
    puVar8 = (undefined8 *)(lVar9 * 0x40 + param_1);
  }
  uVar3 = *param_4;
  uVar4 = param_4[1];
  uVar5 = param_4[2];
  uVar6 = param_4[3];
  uVar2 = param_4[4];
  fVar1 = *(float *)(param_4 + 5);
  lVar12 = (lVar9 + -1) - (lVar9 + -1 >> 0x3f);
  while (param_2 < lVar9) {
    lVar13 = lVar12 >> 1;
    puVar10 = (undefined8 *)(lVar13 * 0x40 + param_1);
    puVar8 = (undefined8 *)(lVar9 * 0x40 + param_1);
    if (fVar1 < *(float *)(puVar10 + 5) || fVar1 == *(float *)(puVar10 + 5)) break;
    uVar7 = puVar10[1];
    *puVar8 = *puVar10;
    puVar8[1] = uVar7;
    uVar7 = puVar10[3];
    puVar8[2] = puVar10[2];
    puVar8[3] = uVar7;
    puVar8[4] = puVar10[4];
    *(undefined4 *)(puVar8 + 5) = *(undefined4 *)(puVar10 + 5);
    lVar12 = (lVar13 + -1) - (lVar13 + -1 >> 0x3f);
    puVar8 = puVar10;
    lVar9 = lVar13;
  }
  puVar8[4] = uVar2;
  *puVar8 = uVar3;
  puVar8[1] = uVar4;
  puVar8[2] = uVar5;
  puVar8[3] = uVar6;
  *(float *)(puVar8 + 5) = fVar1;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, long, long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, __gnu_cxx::__ops::_Iter_less_iter)
   [clone .isra.0] */

void std::
     __adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
               (long param_1,long param_2,ulong param_3,undefined8 *param_4)

{
  float fVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  long lVar9;
  undefined8 *puVar10;
  long lVar11;
  long lVar12;
  long lVar13;
  
  lVar13 = (long)(param_3 - 1) / 2;
  lVar12 = param_2;
  if (param_2 < lVar13) {
    do {
      lVar9 = (lVar12 + 1) * 2;
      lVar11 = (lVar12 + 1) * 0x80;
      puVar8 = (undefined8 *)(param_1 + lVar11);
      fVar1 = *(float *)(param_1 + -0x18 + lVar11);
      if (*(float *)(puVar8 + 5) <= fVar1 && fVar1 != *(float *)(puVar8 + 5)) {
        lVar9 = lVar9 + -1;
        puVar10 = (undefined8 *)(lVar12 * 0x40 + param_1);
        puVar8 = (undefined8 *)(lVar9 * 0x40 + param_1);
        uVar2 = puVar8[1];
        *puVar10 = *puVar8;
        puVar10[1] = uVar2;
        uVar2 = puVar8[3];
        puVar10[2] = puVar8[2];
        puVar10[3] = uVar2;
      }
      else {
        uVar2 = puVar8[1];
        puVar10 = (undefined8 *)(lVar12 * 0x40 + param_1);
        *puVar10 = *puVar8;
        puVar10[1] = uVar2;
        uVar2 = puVar8[3];
        puVar10[2] = puVar8[2];
        puVar10[3] = uVar2;
      }
      puVar10[4] = puVar8[4];
      *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar8 + 5);
      lVar12 = lVar9;
    } while (lVar9 < lVar13);
  }
  else {
    puVar8 = (undefined8 *)(param_2 * 0x40 + param_1);
    lVar9 = param_2;
  }
  if (((param_3 & 1) == 0) && ((long)(param_3 - 2) / 2 == lVar9)) {
    lVar12 = lVar9 + 1;
    lVar9 = lVar9 + lVar12;
    puVar10 = (undefined8 *)(param_1 + -0x40 + lVar12 * 0x80);
    uVar2 = puVar10[1];
    *puVar8 = *puVar10;
    puVar8[1] = uVar2;
    uVar2 = puVar10[3];
    puVar8[2] = puVar10[2];
    puVar8[3] = uVar2;
    puVar8[4] = puVar10[4];
    *(undefined4 *)(puVar8 + 5) = *(undefined4 *)(puVar10 + 5);
    puVar8 = (undefined8 *)(lVar9 * 0x40 + param_1);
  }
  uVar3 = *param_4;
  uVar4 = param_4[1];
  uVar5 = param_4[2];
  uVar6 = param_4[3];
  uVar2 = param_4[4];
  fVar1 = *(float *)(param_4 + 5);
  lVar12 = (lVar9 + -1) - (lVar9 + -1 >> 0x3f);
  while (param_2 < lVar9) {
    lVar13 = lVar12 >> 1;
    puVar10 = (undefined8 *)(lVar13 * 0x40 + param_1);
    puVar8 = (undefined8 *)(lVar9 * 0x40 + param_1);
    if (fVar1 < *(float *)(puVar10 + 5) || fVar1 == *(float *)(puVar10 + 5)) break;
    uVar7 = puVar10[1];
    *puVar8 = *puVar10;
    puVar8[1] = uVar7;
    uVar7 = puVar10[3];
    puVar8[2] = puVar10[2];
    puVar8[3] = uVar7;
    puVar8[4] = puVar10[4];
    *(undefined4 *)(puVar8 + 5) = *(undefined4 *)(puVar10 + 5);
    lVar12 = (lVar13 + -1) - (lVar13 + -1 >> 0x3f);
    puVar8 = puVar10;
    lVar9 = lVar13;
  }
  puVar8[4] = uVar2;
  *puVar8 = uVar3;
  puVar8[1] = uVar4;
  puVar8[2] = uVar5;
  puVar8[3] = uVar6;
  *(float *)(puVar8 + 5) = fVar1;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, long, long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, __gnu_cxx::__ops::_Iter_less_iter)
   [clone .isra.0] */

void std::
     __adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
               (long param_1,long param_2,ulong param_3,undefined8 *param_4)

{
  float fVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  long lVar9;
  undefined8 *puVar10;
  long lVar11;
  long lVar12;
  long lVar13;
  
  lVar13 = (long)(param_3 - 1) / 2;
  lVar12 = param_2;
  if (param_2 < lVar13) {
    do {
      lVar9 = (lVar12 + 1) * 2;
      lVar11 = (lVar12 + 1) * 0x80;
      puVar8 = (undefined8 *)(param_1 + lVar11);
      fVar1 = *(float *)(param_1 + -0x18 + lVar11);
      if (*(float *)(puVar8 + 5) <= fVar1 && fVar1 != *(float *)(puVar8 + 5)) {
        lVar9 = lVar9 + -1;
        puVar10 = (undefined8 *)(lVar12 * 0x40 + param_1);
        puVar8 = (undefined8 *)(lVar9 * 0x40 + param_1);
        uVar2 = puVar8[1];
        *puVar10 = *puVar8;
        puVar10[1] = uVar2;
        uVar2 = puVar8[3];
        puVar10[2] = puVar8[2];
        puVar10[3] = uVar2;
      }
      else {
        uVar2 = puVar8[1];
        puVar10 = (undefined8 *)(lVar12 * 0x40 + param_1);
        *puVar10 = *puVar8;
        puVar10[1] = uVar2;
        uVar2 = puVar8[3];
        puVar10[2] = puVar8[2];
        puVar10[3] = uVar2;
      }
      puVar10[4] = puVar8[4];
      *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar8 + 5);
      lVar12 = lVar9;
    } while (lVar9 < lVar13);
  }
  else {
    puVar8 = (undefined8 *)(param_2 * 0x40 + param_1);
    lVar9 = param_2;
  }
  if (((param_3 & 1) == 0) && ((long)(param_3 - 2) / 2 == lVar9)) {
    lVar12 = lVar9 + 1;
    lVar9 = lVar9 + lVar12;
    puVar10 = (undefined8 *)(param_1 + -0x40 + lVar12 * 0x80);
    uVar2 = puVar10[1];
    *puVar8 = *puVar10;
    puVar8[1] = uVar2;
    uVar2 = puVar10[3];
    puVar8[2] = puVar10[2];
    puVar8[3] = uVar2;
    puVar8[4] = puVar10[4];
    *(undefined4 *)(puVar8 + 5) = *(undefined4 *)(puVar10 + 5);
    puVar8 = (undefined8 *)(lVar9 * 0x40 + param_1);
  }
  uVar3 = *param_4;
  uVar4 = param_4[1];
  uVar5 = param_4[2];
  uVar6 = param_4[3];
  uVar2 = param_4[4];
  fVar1 = *(float *)(param_4 + 5);
  lVar12 = (lVar9 + -1) - (lVar9 + -1 >> 0x3f);
  while (param_2 < lVar9) {
    lVar13 = lVar12 >> 1;
    puVar10 = (undefined8 *)(lVar13 * 0x40 + param_1);
    puVar8 = (undefined8 *)(lVar9 * 0x40 + param_1);
    if (fVar1 < *(float *)(puVar10 + 5) || fVar1 == *(float *)(puVar10 + 5)) break;
    uVar7 = puVar10[1];
    *puVar8 = *puVar10;
    puVar8[1] = uVar7;
    uVar7 = puVar10[3];
    puVar8[2] = puVar10[2];
    puVar8[3] = uVar7;
    puVar8[4] = puVar10[4];
    *(undefined4 *)(puVar8 + 5) = *(undefined4 *)(puVar10 + 5);
    lVar12 = (lVar13 + -1) - (lVar13 + -1 >> 0x3f);
    puVar8 = puVar10;
    lVar9 = lVar13;
  }
  puVar8[4] = uVar2;
  *puVar8 = uVar3;
  puVar8[1] = uVar4;
  puVar8[2] = uVar5;
  puVar8[3] = uVar6;
  *(float *)(puVar8 + 5) = fVar1;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*, long,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*, long, long,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >) [clone .isra.0] */

void std::
     __adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
               (long param_1,long param_2,ulong param_3,undefined8 *param_4)

{
  undefined1 uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 *puVar13;
  long lVar14;
  long lVar15;
  undefined8 *puVar16;
  long lVar17;
  long lVar18;
  long lVar19;
  
  lVar18 = (long)(param_3 - 1) / 2;
  lVar19 = param_2;
  if (param_2 < lVar18) {
    do {
      lVar14 = (lVar19 + 1) * 2;
      lVar15 = (lVar19 + 1) * 0xe0;
      puVar13 = (undefined8 *)(param_1 + lVar15);
      if ((ulong)(*(long *)(param_1 + -0x18 + lVar15) - *(long *)(param_1 + -0x20 + lVar15)) <
          (ulong)(puVar13[0xb] - puVar13[10])) {
        lVar14 = lVar14 + -1;
        puVar13 = (undefined8 *)(lVar14 * 0x70 + param_1);
      }
      puVar16 = (undefined8 *)(lVar19 * 0x70 + param_1);
      *puVar16 = *puVar13;
      *(undefined1 *)(puVar16 + 1) = *(undefined1 *)(puVar13 + 1);
      uVar2 = puVar13[3];
      puVar16[2] = puVar13[2];
      puVar16[3] = uVar2;
      uVar2 = puVar13[5];
      puVar16[4] = puVar13[4];
      puVar16[5] = uVar2;
      uVar2 = puVar13[7];
      puVar16[6] = puVar13[6];
      puVar16[7] = uVar2;
      uVar2 = puVar13[9];
      puVar16[8] = puVar13[8];
      puVar16[9] = uVar2;
      uVar2 = puVar13[0xb];
      puVar16[10] = puVar13[10];
      puVar16[0xb] = uVar2;
      puVar16[0xc] = puVar13[0xc];
      lVar19 = lVar14;
    } while (lVar14 < lVar18);
  }
  else {
    puVar13 = (undefined8 *)(param_2 * 0x70 + param_1);
    lVar14 = param_2;
  }
  if (((param_3 & 1) == 0) && ((long)(param_3 - 2) / 2 == lVar14)) {
    puVar16 = (undefined8 *)(param_1 + -0x70 + (lVar14 + 1) * 0xe0);
    *puVar13 = *puVar16;
    *(undefined1 *)(puVar13 + 1) = *(undefined1 *)(puVar16 + 1);
    uVar2 = puVar16[3];
    lVar14 = (lVar14 + 1) * 2 + -1;
    puVar13[2] = puVar16[2];
    puVar13[3] = uVar2;
    uVar2 = puVar16[5];
    puVar13[4] = puVar16[4];
    puVar13[5] = uVar2;
    uVar2 = puVar16[7];
    puVar13[6] = puVar16[6];
    puVar13[7] = uVar2;
    uVar2 = puVar16[9];
    puVar13[8] = puVar16[8];
    puVar13[9] = uVar2;
    uVar2 = puVar16[0xb];
    puVar13[10] = puVar16[10];
    puVar13[0xb] = uVar2;
    puVar13[0xc] = puVar16[0xc];
    puVar13 = (undefined8 *)(lVar14 * 0x70 + param_1);
  }
  uVar2 = *param_4;
  uVar1 = *(undefined1 *)(param_4 + 1);
  uVar4 = param_4[2];
  uVar5 = param_4[3];
  uVar6 = param_4[4];
  uVar7 = param_4[5];
  uVar8 = param_4[6];
  uVar9 = param_4[7];
  uVar10 = param_4[8];
  uVar11 = param_4[9];
  lVar19 = param_4[10];
  lVar18 = param_4[0xb];
  uVar3 = param_4[0xc];
  lVar15 = (lVar14 + -1) - (lVar14 + -1 >> 0x3f);
  if (param_2 < lVar14) {
    do {
      lVar17 = lVar15 >> 1;
      puVar16 = (undefined8 *)(lVar17 * 0x70 + param_1);
      puVar13 = (undefined8 *)(lVar14 * 0x70 + param_1);
      if ((ulong)(puVar16[0xb] - puVar16[10]) <= (ulong)(lVar18 - lVar19)) break;
      *puVar13 = *puVar16;
      *(undefined1 *)(puVar13 + 1) = *(undefined1 *)(puVar16 + 1);
      uVar12 = puVar16[3];
      puVar13[2] = puVar16[2];
      puVar13[3] = uVar12;
      uVar12 = puVar16[5];
      puVar13[4] = puVar16[4];
      puVar13[5] = uVar12;
      uVar12 = puVar16[7];
      puVar13[6] = puVar16[6];
      puVar13[7] = uVar12;
      uVar12 = puVar16[9];
      puVar13[8] = puVar16[8];
      puVar13[9] = uVar12;
      uVar12 = puVar16[0xb];
      puVar13[10] = puVar16[10];
      puVar13[0xb] = uVar12;
      puVar13[0xc] = puVar16[0xc];
      lVar15 = (lVar17 + -1) - (lVar17 + -1 >> 0x3f);
      puVar13 = puVar16;
      lVar14 = lVar17;
    } while (param_2 < lVar17);
  }
  *puVar13 = uVar2;
  *(undefined1 *)(puVar13 + 1) = uVar1;
  puVar13[10] = lVar19;
  puVar13[0xb] = lVar18;
  puVar13[0xc] = uVar3;
  puVar13[2] = uVar4;
  puVar13[3] = uVar5;
  puVar13[4] = uVar6;
  puVar13[5] = uVar7;
  puVar13[6] = uVar8;
  puVar13[7] = uVar9;
  puVar13[8] = uVar10;
  puVar13[9] = uVar11;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*,
   __gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*,
   __gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >) [clone .isra.0] */

void std::
     __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
               (undefined8 *param_1)

{
  undefined1 uVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 *puVar14;
  undefined8 *puVar15;
  ulong uVar16;
  
  lVar2 = param_1[0xb];
  lVar3 = param_1[10];
  uVar4 = *param_1;
  uVar1 = *(undefined1 *)(param_1 + 1);
  uVar6 = param_1[2];
  uVar7 = param_1[3];
  uVar8 = param_1[4];
  uVar9 = param_1[5];
  uVar10 = param_1[6];
  uVar11 = param_1[7];
  uVar12 = param_1[8];
  uVar13 = param_1[9];
  uVar5 = param_1[0xc];
  uVar16 = param_1[-3] - param_1[-4];
  puVar15 = param_1 + -0xe;
  while (puVar14 = puVar15, uVar16 < (ulong)(lVar2 - lVar3)) {
    puVar14[0xe] = *puVar14;
    puVar14[0x10] = puVar14[2];
    puVar14[0x11] = puVar14[3];
    *(undefined1 *)(puVar14 + 0xf) = *(undefined1 *)(puVar14 + 1);
    puVar14[0x12] = puVar14[4];
    puVar14[0x13] = puVar14[5];
    puVar14[0x14] = puVar14[6];
    puVar14[0x15] = puVar14[7];
    puVar14[0x16] = puVar14[8];
    puVar14[0x17] = puVar14[9];
    puVar14[0x18] = puVar14[10];
    puVar14[0x19] = puVar14[0xb];
    puVar14[0x1a] = puVar14[0xc];
    puVar15 = puVar14 + -0xe;
    param_1 = puVar14;
    uVar16 = puVar14[-3] - puVar14[-4];
  }
  *param_1 = uVar4;
  *(undefined1 *)(param_1 + 1) = uVar1;
  param_1[10] = lVar3;
  param_1[0xb] = lVar2;
  param_1[0xc] = uVar5;
  param_1[2] = uVar6;
  param_1[3] = uVar7;
  param_1[4] = uVar8;
  param_1[5] = uVar9;
  param_1[6] = uVar10;
  param_1[7] = uVar11;
  param_1[8] = uVar12;
  param_1[9] = uVar13;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >) [clone .isra.0] */

void std::
     __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
               (undefined8 *param_1,undefined8 *param_2)

{
  undefined1 uVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 *puVar14;
  undefined8 *puVar15;
  undefined8 *puVar16;
  
  if (param_1 == param_2) {
    return;
  }
  puVar14 = param_1 + 0xe;
  while (param_2 != puVar14) {
    lVar2 = puVar14[0xb];
    lVar3 = puVar14[10];
    if ((ulong)(param_1[0xb] - param_1[10]) < (ulong)(lVar2 - lVar3)) {
      uVar4 = *puVar14;
      uVar1 = *(undefined1 *)(puVar14 + 1);
      uVar6 = puVar14[2];
      uVar7 = puVar14[3];
      uVar8 = puVar14[4];
      uVar9 = puVar14[5];
      uVar10 = puVar14[6];
      uVar11 = puVar14[7];
      uVar12 = puVar14[8];
      uVar13 = puVar14[9];
      uVar5 = puVar14[0xc];
      if (0 < (long)puVar14 - (long)param_1) {
        puVar15 = puVar14;
        do {
          puVar16 = puVar15 + -0xe;
          *puVar15 = puVar15[-0xe];
          puVar15[2] = puVar15[-0xc];
          puVar15[3] = puVar15[-0xb];
          *(undefined1 *)(puVar15 + 1) = *(undefined1 *)(puVar15 + -0xd);
          puVar15[4] = puVar15[-10];
          puVar15[5] = puVar15[-9];
          puVar15[0xc] = puVar15[-2];
          puVar15[6] = puVar15[-8];
          puVar15[7] = puVar15[-7];
          puVar15[8] = puVar15[-6];
          puVar15[9] = puVar15[-5];
          puVar15[10] = puVar15[-4];
          puVar15[0xb] = puVar15[-3];
          puVar15 = puVar16;
        } while (puVar16 != puVar14 + ((long)puVar14 - (long)param_1 >> 4) * -2);
      }
      *param_1 = uVar4;
      *(undefined1 *)(param_1 + 1) = uVar1;
      param_1[10] = lVar3;
      param_1[0xb] = lVar2;
      param_1[0xc] = uVar5;
      param_1[2] = uVar6;
      param_1[3] = uVar7;
      param_1[4] = uVar8;
      param_1[5] = uVar9;
      param_1[6] = uVar10;
      param_1[7] = uVar11;
      param_1[8] = uVar12;
      param_1[9] = uVar13;
      puVar14 = puVar14 + 0xe;
    }
    else {
      __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                ();
      puVar14 = puVar14 + 0xe;
    }
  }
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::
     __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined8 *param_1,undefined8 *param_2)

{
  float fVar1;
  float fVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  undefined8 *puVar10;
  undefined8 *puVar11;
  
  if (param_1 != param_2) {
    puVar8 = param_1 + 8;
    while (puVar9 = puVar8, param_2 != puVar8) {
      while( true ) {
        fVar1 = *(float *)(puVar9 + 5);
        puVar8 = puVar9 + 8;
        uVar4 = *puVar9;
        uVar5 = puVar9[1];
        uVar6 = puVar9[2];
        uVar7 = puVar9[3];
        uVar3 = puVar9[4];
        if (fVar1 < *(float *)(param_1 + 5)) break;
        fVar2 = *(float *)(puVar9 + -3);
        while (fVar1 < fVar2) {
          puVar9[4] = puVar9[-4];
          *puVar9 = puVar9[-8];
          puVar9[1] = puVar9[-7];
          puVar9[2] = puVar9[-6];
          puVar9[3] = puVar9[-5];
          *(undefined4 *)(puVar9 + 5) = *(undefined4 *)(puVar9 + -3);
          fVar2 = *(float *)(puVar9 + -0xb);
          puVar9 = puVar9 + -8;
        }
        puVar9[4] = uVar3;
        *puVar9 = uVar4;
        puVar9[1] = uVar5;
        puVar9[2] = uVar6;
        puVar9[3] = uVar7;
        *(float *)(puVar9 + 5) = fVar1;
        puVar9 = puVar8;
        if (param_2 == puVar8) {
          return;
        }
      }
      puVar10 = puVar9;
      if (0 < (long)puVar9 - (long)param_1) {
        do {
          puVar11 = puVar10 + -8;
          *puVar10 = puVar10[-8];
          puVar10[1] = puVar10[-7];
          puVar10[4] = puVar10[-4];
          *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar10 + -3);
          puVar10[2] = puVar10[-6];
          puVar10[3] = puVar10[-5];
          puVar10 = puVar11;
        } while (puVar11 !=
                 (undefined8 *)((long)puVar9 - ((long)puVar9 - (long)param_1 & 0xffffffffffffffc0U))
                );
      }
      param_1[4] = uVar3;
      *param_1 = uVar4;
      param_1[1] = uVar5;
      param_1[2] = uVar6;
      param_1[3] = uVar7;
      *(float *)(param_1 + 5) = fVar1;
    }
  }
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::
     __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined8 *param_1,undefined8 *param_2)

{
  float fVar1;
  float fVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  undefined8 *puVar10;
  undefined8 *puVar11;
  
  if (param_1 != param_2) {
    puVar8 = param_1 + 8;
    while (puVar9 = puVar8, param_2 != puVar8) {
      while( true ) {
        fVar1 = *(float *)(puVar9 + 5);
        puVar8 = puVar9 + 8;
        uVar4 = *puVar9;
        uVar5 = puVar9[1];
        uVar6 = puVar9[2];
        uVar7 = puVar9[3];
        uVar3 = puVar9[4];
        if (fVar1 < *(float *)(param_1 + 5)) break;
        fVar2 = *(float *)(puVar9 + -3);
        while (fVar1 < fVar2) {
          puVar9[4] = puVar9[-4];
          *puVar9 = puVar9[-8];
          puVar9[1] = puVar9[-7];
          puVar9[2] = puVar9[-6];
          puVar9[3] = puVar9[-5];
          *(undefined4 *)(puVar9 + 5) = *(undefined4 *)(puVar9 + -3);
          fVar2 = *(float *)(puVar9 + -0xb);
          puVar9 = puVar9 + -8;
        }
        puVar9[4] = uVar3;
        *puVar9 = uVar4;
        puVar9[1] = uVar5;
        puVar9[2] = uVar6;
        puVar9[3] = uVar7;
        *(float *)(puVar9 + 5) = fVar1;
        puVar9 = puVar8;
        if (param_2 == puVar8) {
          return;
        }
      }
      puVar10 = puVar9;
      if (0 < (long)puVar9 - (long)param_1) {
        do {
          puVar11 = puVar10 + -8;
          *puVar10 = puVar10[-8];
          puVar10[1] = puVar10[-7];
          puVar10[4] = puVar10[-4];
          *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar10 + -3);
          puVar10[2] = puVar10[-6];
          puVar10[3] = puVar10[-5];
          puVar10 = puVar11;
        } while (puVar11 !=
                 (undefined8 *)((long)puVar9 - ((long)puVar9 - (long)param_1 & 0xffffffffffffffc0U))
                );
      }
      param_1[4] = uVar3;
      *param_1 = uVar4;
      param_1[1] = uVar5;
      param_1[2] = uVar6;
      param_1[3] = uVar7;
      *(float *)(param_1 + 5) = fVar1;
    }
  }
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::
     __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined8 *param_1,undefined8 *param_2)

{
  float fVar1;
  float fVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  undefined8 *puVar9;
  undefined8 *puVar10;
  undefined8 *puVar11;
  
  if (param_1 != param_2) {
    puVar8 = param_1 + 8;
    while (puVar9 = puVar8, param_2 != puVar8) {
      while( true ) {
        fVar1 = *(float *)(puVar9 + 5);
        puVar8 = puVar9 + 8;
        uVar4 = *puVar9;
        uVar5 = puVar9[1];
        uVar6 = puVar9[2];
        uVar7 = puVar9[3];
        uVar3 = puVar9[4];
        if (fVar1 < *(float *)(param_1 + 5)) break;
        fVar2 = *(float *)(puVar9 + -3);
        while (fVar1 < fVar2) {
          puVar9[4] = puVar9[-4];
          *puVar9 = puVar9[-8];
          puVar9[1] = puVar9[-7];
          puVar9[2] = puVar9[-6];
          puVar9[3] = puVar9[-5];
          *(undefined4 *)(puVar9 + 5) = *(undefined4 *)(puVar9 + -3);
          fVar2 = *(float *)(puVar9 + -0xb);
          puVar9 = puVar9 + -8;
        }
        puVar9[4] = uVar3;
        *puVar9 = uVar4;
        puVar9[1] = uVar5;
        puVar9[2] = uVar6;
        puVar9[3] = uVar7;
        *(float *)(puVar9 + 5) = fVar1;
        puVar9 = puVar8;
        if (param_2 == puVar8) {
          return;
        }
      }
      puVar10 = puVar9;
      if (0 < (long)puVar9 - (long)param_1) {
        do {
          puVar11 = puVar10 + -8;
          *puVar10 = puVar10[-8];
          puVar10[1] = puVar10[-7];
          puVar10[4] = puVar10[-4];
          *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar10 + -3);
          puVar10[2] = puVar10[-6];
          puVar10[3] = puVar10[-5];
          puVar10 = puVar11;
        } while (puVar11 !=
                 (undefined8 *)((long)puVar9 - ((long)puVar9 - (long)param_1 & 0xffffffffffffffc0U))
                );
      }
      param_1[4] = uVar3;
      *param_1 = uVar4;
      param_1[1] = uVar5;
      param_1[2] = uVar6;
      param_1[3] = uVar7;
      *(float *)(param_1 + 5) = fVar1;
    }
  }
  return;
}



/* embree::sse2::BVH4BuilderTwoLevelTriangle4MeshSAH(void*, embree::Scene*, bool) */

void embree::sse2::BVH4BuilderTwoLevelTriangle4MeshSAH(void *param_1,Scene *param_2,bool param_3)

{
  undefined8 *puVar1;
  long lVar2;
  
  puVar1 = (undefined8 *)operator_new(0xa8);
  lVar2 = *(long *)(param_2 + 0x188);
  puVar1[1] = 0;
  *puVar1 = &PTR__BVHNBuilderTwoLevel_00143ff8;
  if (lVar2 != 0) {
    lVar2 = lVar2 + 0x548;
  }
  puVar1[2] = 0;
  puVar1[3] = 0;
  puVar1[4] = 0;
  puVar1[5] = param_1;
  puVar1[6] = param_2;
  puVar1[7] = lVar2;
  *(undefined1 *)(puVar1 + 8) = 0;
  puVar1[9] = 0;
  puVar1[10] = 0;
  puVar1[0xb] = 0;
  puVar1[0xc] = lVar2;
  *(undefined1 *)(puVar1 + 0xd) = 0;
  puVar1[0xe] = 0;
  puVar1[0xf] = 0;
  puVar1[0x10] = 0;
  puVar1[0x12] = 0x400;
  puVar1[0x13] = 0x100000;
  *(bool *)(puVar1 + 0x14) = param_3;
  return;
}



/* embree::sse2::BVH4BuilderTwoLevelTriangle4vMeshSAH(void*, embree::Scene*, bool) */

void embree::sse2::BVH4BuilderTwoLevelTriangle4vMeshSAH(void *param_1,Scene *param_2,bool param_3)

{
  undefined8 *puVar1;
  long lVar2;
  
  puVar1 = (undefined8 *)operator_new(0xa8);
  lVar2 = *(long *)(param_2 + 0x188);
  puVar1[1] = 0;
  *puVar1 = &PTR__BVHNBuilderTwoLevel_00144040;
  if (lVar2 != 0) {
    lVar2 = lVar2 + 0x548;
  }
  puVar1[2] = 0;
  puVar1[3] = 0;
  puVar1[4] = 0;
  puVar1[5] = param_1;
  puVar1[6] = param_2;
  puVar1[7] = lVar2;
  *(undefined1 *)(puVar1 + 8) = 0;
  puVar1[9] = 0;
  puVar1[10] = 0;
  puVar1[0xb] = 0;
  puVar1[0xc] = lVar2;
  *(undefined1 *)(puVar1 + 0xd) = 0;
  puVar1[0xe] = 0;
  puVar1[0xf] = 0;
  puVar1[0x10] = 0;
  puVar1[0x12] = 0x400;
  puVar1[0x13] = 0x100000;
  *(bool *)(puVar1 + 0x14) = param_3;
  return;
}



/* embree::sse2::BVH4BuilderTwoLevelTriangle4iMeshSAH(void*, embree::Scene*, bool) */

void embree::sse2::BVH4BuilderTwoLevelTriangle4iMeshSAH(void *param_1,Scene *param_2,bool param_3)

{
  undefined8 *puVar1;
  long lVar2;
  
  puVar1 = (undefined8 *)operator_new(0xa8);
  lVar2 = *(long *)(param_2 + 0x188);
  puVar1[1] = 0;
  *puVar1 = &PTR__BVHNBuilderTwoLevel_00144088;
  if (lVar2 != 0) {
    lVar2 = lVar2 + 0x548;
  }
  puVar1[2] = 0;
  puVar1[3] = 0;
  puVar1[4] = 0;
  puVar1[5] = param_1;
  puVar1[6] = param_2;
  puVar1[7] = lVar2;
  *(undefined1 *)(puVar1 + 8) = 0;
  puVar1[9] = 0;
  puVar1[10] = 0;
  puVar1[0xb] = 0;
  puVar1[0xc] = lVar2;
  *(undefined1 *)(puVar1 + 0xd) = 0;
  puVar1[0xe] = 0;
  puVar1[0xf] = 0;
  puVar1[0x10] = 0;
  puVar1[0x12] = 0x400;
  puVar1[0x13] = 0x100000;
  *(bool *)(puVar1 + 0x14) = param_3;
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, long,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, long, __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::
     __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined8 *param_2,long param_3)

{
  float *pfVar1;
  float fVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 *puVar20;
  long lVar21;
  undefined4 *puVar22;
  undefined8 *puVar23;
  undefined8 *puVar24;
  undefined8 *puVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  undefined4 local_a0;
  undefined4 uStack_9c;
  undefined4 uStack_98;
  undefined4 uStack_94;
  undefined4 local_90;
  undefined4 uStack_8c;
  undefined4 uStack_88;
  undefined4 uStack_84;
  undefined8 local_80;
  undefined4 local_78;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar21 = (long)param_2 - (long)param_1;
  if (0x400 < lVar21) {
    puVar24 = (undefined8 *)(param_1 + 0x10);
    puVar25 = param_2;
    if (param_3 != 0) {
      do {
        fVar26 = (float)param_1[0x1a];
        param_3 = param_3 + -1;
        fVar27 = *(float *)(puVar25 + -3);
        uVar5 = *param_1;
        uVar6 = param_1[1];
        uVar7 = param_1[2];
        uVar8 = param_1[3];
        uVar9 = param_1[4];
        uVar10 = param_1[5];
        uVar11 = param_1[6];
        uVar12 = param_1[7];
        puVar22 = param_1 + (lVar21 >> 7) * 0x10;
        uVar3 = *(undefined8 *)(param_1 + 8);
        fVar28 = (float)param_1[10];
        fVar2 = (float)puVar22[10];
        puVar23 = puVar25;
        param_2 = puVar24;
        if (fVar2 <= fVar26) {
          if (fVar27 <= fVar26) {
            if (fVar2 < fVar27) goto LAB_0010110b;
            goto LAB_0010118a;
          }
LAB_00101022:
          uVar13 = param_1[0x10];
          uVar14 = param_1[0x11];
          uVar15 = param_1[0x12];
          uVar16 = param_1[0x13];
          param_1[10] = fVar26;
          uVar4 = *(undefined8 *)(param_1 + 0x18);
          param_1[0x10] = uVar5;
          param_1[0x11] = uVar6;
          param_1[0x12] = uVar7;
          param_1[0x13] = uVar8;
          *(undefined8 *)(param_1 + 0x18) = uVar3;
          *(undefined8 *)(param_1 + 8) = uVar4;
          *param_1 = uVar13;
          param_1[1] = uVar14;
          param_1[2] = uVar15;
          param_1[3] = uVar16;
          param_1[4] = param_1[0x14];
          param_1[5] = param_1[0x15];
          param_1[6] = param_1[0x16];
          param_1[7] = param_1[0x17];
          param_1[0x14] = uVar9;
          param_1[0x15] = uVar10;
          param_1[0x16] = uVar11;
          param_1[0x17] = uVar12;
          param_1[0x1a] = fVar28;
          fVar27 = fVar28;
          fVar28 = *(float *)(puVar25 + -3);
        }
        else if (fVar2 < fVar27) {
LAB_0010118a:
          uVar13 = puVar22[1];
          uVar14 = puVar22[2];
          uVar15 = puVar22[3];
          *param_1 = *puVar22;
          param_1[1] = uVar13;
          param_1[2] = uVar14;
          param_1[3] = uVar15;
          uVar13 = puVar22[5];
          uVar14 = puVar22[6];
          uVar15 = puVar22[7];
          param_1[4] = puVar22[4];
          param_1[5] = uVar13;
          param_1[6] = uVar14;
          param_1[7] = uVar15;
          *(undefined8 *)(param_1 + 8) = *(undefined8 *)(puVar22 + 8);
          param_1[10] = puVar22[10];
          *(undefined8 *)(puVar22 + 8) = uVar3;
          *puVar22 = uVar5;
          puVar22[1] = uVar6;
          puVar22[2] = uVar7;
          puVar22[3] = uVar8;
          puVar22[4] = uVar9;
          puVar22[5] = uVar10;
          puVar22[6] = uVar11;
          puVar22[7] = uVar12;
          puVar22[10] = fVar28;
          fVar27 = (float)param_1[0x1a];
          fVar28 = *(float *)(puVar25 + -3);
          fVar26 = (float)param_1[10];
        }
        else {
          if (fVar27 <= fVar26) goto LAB_00101022;
LAB_0010110b:
          uVar13 = *(undefined4 *)((long)puVar25 + -0x3c);
          uVar14 = *(undefined4 *)(puVar25 + -7);
          uVar15 = *(undefined4 *)((long)puVar25 + -0x34);
          *param_1 = *(undefined4 *)(puVar25 + -8);
          param_1[1] = uVar13;
          param_1[2] = uVar14;
          param_1[3] = uVar15;
          uVar13 = *(undefined4 *)((long)puVar25 + -0x2c);
          uVar14 = *(undefined4 *)(puVar25 + -5);
          uVar15 = *(undefined4 *)((long)puVar25 + -0x24);
          param_1[4] = *(undefined4 *)(puVar25 + -6);
          param_1[5] = uVar13;
          param_1[6] = uVar14;
          param_1[7] = uVar15;
          *(undefined8 *)(param_1 + 8) = puVar25[-4];
          param_1[10] = *(undefined4 *)(puVar25 + -3);
          puVar25[-4] = uVar3;
          *(undefined4 *)(puVar25 + -8) = uVar5;
          *(undefined4 *)((long)puVar25 + -0x3c) = uVar6;
          *(undefined4 *)(puVar25 + -7) = uVar7;
          *(undefined4 *)((long)puVar25 + -0x34) = uVar8;
          *(undefined4 *)(puVar25 + -6) = uVar9;
          *(undefined4 *)((long)puVar25 + -0x2c) = uVar10;
          *(undefined4 *)(puVar25 + -5) = uVar11;
          *(undefined4 *)((long)puVar25 + -0x24) = uVar12;
          *(float *)(puVar25 + -3) = fVar28;
          fVar26 = (float)param_1[10];
          fVar27 = (float)param_1[0x1a];
        }
        while( true ) {
          while (fVar27 < fVar26) {
            pfVar1 = (float *)(param_2 + 0xd);
            param_2 = param_2 + 8;
            fVar27 = *pfVar1;
          }
          while (puVar20 = puVar23 + -8, fVar26 < fVar28) {
            puVar23 = puVar20;
            fVar28 = *(float *)(puVar20 + -3);
          }
          if (puVar20 <= param_2) break;
          uVar5 = *(undefined4 *)((long)puVar23 + -0x3c);
          uVar6 = *(undefined4 *)(puVar20 + 1);
          uVar7 = *(undefined4 *)((long)puVar23 + -0x34);
          uVar4 = *param_2;
          uVar17 = param_2[1];
          uVar18 = param_2[2];
          uVar19 = param_2[3];
          uVar3 = param_2[4];
          *(undefined4 *)param_2 = *(undefined4 *)puVar20;
          *(undefined4 *)((long)param_2 + 4) = uVar5;
          *(undefined4 *)(param_2 + 1) = uVar6;
          *(undefined4 *)((long)param_2 + 0xc) = uVar7;
          uVar5 = *(undefined4 *)((long)puVar23 + -0x2c);
          uVar6 = *(undefined4 *)(puVar20 + 3);
          uVar7 = *(undefined4 *)((long)puVar23 + -0x24);
          *(undefined4 *)(param_2 + 2) = *(undefined4 *)(puVar20 + 2);
          *(undefined4 *)((long)param_2 + 0x14) = uVar5;
          *(undefined4 *)(param_2 + 3) = uVar6;
          *(undefined4 *)((long)param_2 + 0x1c) = uVar7;
          param_2[4] = puVar20[4];
          *(undefined4 *)(param_2 + 5) = *(undefined4 *)(puVar20 + 5);
          *puVar20 = uVar4;
          puVar20[1] = uVar17;
          puVar20[4] = uVar3;
          puVar20[2] = uVar18;
          puVar20[3] = uVar19;
          *(float *)(puVar20 + 5) = fVar27;
          pfVar1 = (float *)(param_2 + 0xd);
          fVar26 = (float)param_1[10];
          puVar23 = puVar20;
          param_2 = param_2 + 8;
          fVar27 = *pfVar1;
          fVar28 = *(float *)(puVar20 + -3);
        }
        __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (param_2,puVar25,param_3);
        lVar21 = (long)param_2 - (long)param_1;
        if (lVar21 < 0x401) goto LAB_00101268;
        puVar25 = param_2;
      } while (param_3 != 0);
    }
    __heap_select<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
              (param_1,param_2,param_2);
    do {
      uVar5 = param_1[1];
      uVar6 = param_1[2];
      uVar7 = param_1[3];
      local_a0 = *(undefined4 *)(param_2 + -8);
      uStack_9c = *(undefined4 *)((long)param_2 + -0x3c);
      uStack_98 = *(undefined4 *)(param_2 + -7);
      uStack_94 = *(undefined4 *)((long)param_2 + -0x34);
      puVar24 = param_2 + -8;
      local_90 = *(undefined4 *)(param_2 + -6);
      uStack_8c = *(undefined4 *)((long)param_2 + -0x2c);
      uStack_88 = *(undefined4 *)(param_2 + -5);
      uStack_84 = *(undefined4 *)((long)param_2 + -0x24);
      local_80 = param_2[-4];
      *(undefined4 *)puVar24 = *param_1;
      *(undefined4 *)((long)param_2 + -0x3c) = uVar5;
      *(undefined4 *)(param_2 + -7) = uVar6;
      *(undefined4 *)((long)param_2 + -0x34) = uVar7;
      uVar5 = param_1[5];
      uVar6 = param_1[6];
      uVar7 = param_1[7];
      local_78 = *(undefined4 *)(param_2 + -3);
      *(undefined4 *)(param_2 + -6) = param_1[4];
      *(undefined4 *)((long)param_2 + -0x2c) = uVar5;
      *(undefined4 *)(param_2 + -5) = uVar6;
      *(undefined4 *)((long)param_2 + -0x24) = uVar7;
      param_2[-4] = *(undefined8 *)(param_1 + 8);
      *(undefined4 *)(param_2 + -3) = param_1[10];
      __adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
                (param_1,0,(long)puVar24 - (long)param_1 >> 6,&local_a0);
      param_2 = puVar24;
    } while (0x40 < (long)puVar24 - (long)param_1);
  }
LAB_00101268:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, long,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, long, __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::
     __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined8 *param_2,long param_3)

{
  float *pfVar1;
  float fVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 *puVar20;
  long lVar21;
  undefined4 *puVar22;
  undefined8 *puVar23;
  undefined8 *puVar24;
  undefined8 *puVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  undefined4 local_a0;
  undefined4 uStack_9c;
  undefined4 uStack_98;
  undefined4 uStack_94;
  undefined4 local_90;
  undefined4 uStack_8c;
  undefined4 uStack_88;
  undefined4 uStack_84;
  undefined8 local_80;
  undefined4 local_78;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar21 = (long)param_2 - (long)param_1;
  if (0x400 < lVar21) {
    puVar24 = (undefined8 *)(param_1 + 0x10);
    puVar25 = param_2;
    if (param_3 != 0) {
      do {
        fVar26 = (float)param_1[0x1a];
        param_3 = param_3 + -1;
        fVar27 = *(float *)(puVar25 + -3);
        uVar5 = *param_1;
        uVar6 = param_1[1];
        uVar7 = param_1[2];
        uVar8 = param_1[3];
        uVar9 = param_1[4];
        uVar10 = param_1[5];
        uVar11 = param_1[6];
        uVar12 = param_1[7];
        puVar22 = param_1 + (lVar21 >> 7) * 0x10;
        uVar3 = *(undefined8 *)(param_1 + 8);
        fVar28 = (float)param_1[10];
        fVar2 = (float)puVar22[10];
        puVar23 = puVar25;
        param_2 = puVar24;
        if (fVar2 <= fVar26) {
          if (fVar27 <= fVar26) {
            if (fVar2 < fVar27) goto LAB_0010141b;
            goto LAB_0010149a;
          }
LAB_00101332:
          uVar13 = param_1[0x10];
          uVar14 = param_1[0x11];
          uVar15 = param_1[0x12];
          uVar16 = param_1[0x13];
          param_1[10] = fVar26;
          uVar4 = *(undefined8 *)(param_1 + 0x18);
          param_1[0x10] = uVar5;
          param_1[0x11] = uVar6;
          param_1[0x12] = uVar7;
          param_1[0x13] = uVar8;
          *(undefined8 *)(param_1 + 0x18) = uVar3;
          *(undefined8 *)(param_1 + 8) = uVar4;
          *param_1 = uVar13;
          param_1[1] = uVar14;
          param_1[2] = uVar15;
          param_1[3] = uVar16;
          param_1[4] = param_1[0x14];
          param_1[5] = param_1[0x15];
          param_1[6] = param_1[0x16];
          param_1[7] = param_1[0x17];
          param_1[0x14] = uVar9;
          param_1[0x15] = uVar10;
          param_1[0x16] = uVar11;
          param_1[0x17] = uVar12;
          param_1[0x1a] = fVar28;
          fVar27 = fVar28;
          fVar28 = *(float *)(puVar25 + -3);
        }
        else if (fVar2 < fVar27) {
LAB_0010149a:
          uVar13 = puVar22[1];
          uVar14 = puVar22[2];
          uVar15 = puVar22[3];
          *param_1 = *puVar22;
          param_1[1] = uVar13;
          param_1[2] = uVar14;
          param_1[3] = uVar15;
          uVar13 = puVar22[5];
          uVar14 = puVar22[6];
          uVar15 = puVar22[7];
          param_1[4] = puVar22[4];
          param_1[5] = uVar13;
          param_1[6] = uVar14;
          param_1[7] = uVar15;
          *(undefined8 *)(param_1 + 8) = *(undefined8 *)(puVar22 + 8);
          param_1[10] = puVar22[10];
          *(undefined8 *)(puVar22 + 8) = uVar3;
          *puVar22 = uVar5;
          puVar22[1] = uVar6;
          puVar22[2] = uVar7;
          puVar22[3] = uVar8;
          puVar22[4] = uVar9;
          puVar22[5] = uVar10;
          puVar22[6] = uVar11;
          puVar22[7] = uVar12;
          puVar22[10] = fVar28;
          fVar27 = (float)param_1[0x1a];
          fVar28 = *(float *)(puVar25 + -3);
          fVar26 = (float)param_1[10];
        }
        else {
          if (fVar27 <= fVar26) goto LAB_00101332;
LAB_0010141b:
          uVar13 = *(undefined4 *)((long)puVar25 + -0x3c);
          uVar14 = *(undefined4 *)(puVar25 + -7);
          uVar15 = *(undefined4 *)((long)puVar25 + -0x34);
          *param_1 = *(undefined4 *)(puVar25 + -8);
          param_1[1] = uVar13;
          param_1[2] = uVar14;
          param_1[3] = uVar15;
          uVar13 = *(undefined4 *)((long)puVar25 + -0x2c);
          uVar14 = *(undefined4 *)(puVar25 + -5);
          uVar15 = *(undefined4 *)((long)puVar25 + -0x24);
          param_1[4] = *(undefined4 *)(puVar25 + -6);
          param_1[5] = uVar13;
          param_1[6] = uVar14;
          param_1[7] = uVar15;
          *(undefined8 *)(param_1 + 8) = puVar25[-4];
          param_1[10] = *(undefined4 *)(puVar25 + -3);
          puVar25[-4] = uVar3;
          *(undefined4 *)(puVar25 + -8) = uVar5;
          *(undefined4 *)((long)puVar25 + -0x3c) = uVar6;
          *(undefined4 *)(puVar25 + -7) = uVar7;
          *(undefined4 *)((long)puVar25 + -0x34) = uVar8;
          *(undefined4 *)(puVar25 + -6) = uVar9;
          *(undefined4 *)((long)puVar25 + -0x2c) = uVar10;
          *(undefined4 *)(puVar25 + -5) = uVar11;
          *(undefined4 *)((long)puVar25 + -0x24) = uVar12;
          *(float *)(puVar25 + -3) = fVar28;
          fVar26 = (float)param_1[10];
          fVar27 = (float)param_1[0x1a];
        }
        while( true ) {
          while (fVar27 < fVar26) {
            pfVar1 = (float *)(param_2 + 0xd);
            param_2 = param_2 + 8;
            fVar27 = *pfVar1;
          }
          while (puVar20 = puVar23 + -8, fVar26 < fVar28) {
            puVar23 = puVar20;
            fVar28 = *(float *)(puVar20 + -3);
          }
          if (puVar20 <= param_2) break;
          uVar5 = *(undefined4 *)((long)puVar23 + -0x3c);
          uVar6 = *(undefined4 *)(puVar20 + 1);
          uVar7 = *(undefined4 *)((long)puVar23 + -0x34);
          uVar4 = *param_2;
          uVar17 = param_2[1];
          uVar18 = param_2[2];
          uVar19 = param_2[3];
          uVar3 = param_2[4];
          *(undefined4 *)param_2 = *(undefined4 *)puVar20;
          *(undefined4 *)((long)param_2 + 4) = uVar5;
          *(undefined4 *)(param_2 + 1) = uVar6;
          *(undefined4 *)((long)param_2 + 0xc) = uVar7;
          uVar5 = *(undefined4 *)((long)puVar23 + -0x2c);
          uVar6 = *(undefined4 *)(puVar20 + 3);
          uVar7 = *(undefined4 *)((long)puVar23 + -0x24);
          *(undefined4 *)(param_2 + 2) = *(undefined4 *)(puVar20 + 2);
          *(undefined4 *)((long)param_2 + 0x14) = uVar5;
          *(undefined4 *)(param_2 + 3) = uVar6;
          *(undefined4 *)((long)param_2 + 0x1c) = uVar7;
          param_2[4] = puVar20[4];
          *(undefined4 *)(param_2 + 5) = *(undefined4 *)(puVar20 + 5);
          *puVar20 = uVar4;
          puVar20[1] = uVar17;
          puVar20[4] = uVar3;
          puVar20[2] = uVar18;
          puVar20[3] = uVar19;
          *(float *)(puVar20 + 5) = fVar27;
          pfVar1 = (float *)(param_2 + 0xd);
          fVar26 = (float)param_1[10];
          puVar23 = puVar20;
          param_2 = param_2 + 8;
          fVar27 = *pfVar1;
          fVar28 = *(float *)(puVar20 + -3);
        }
        __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (param_2,puVar25,param_3);
        lVar21 = (long)param_2 - (long)param_1;
        if (lVar21 < 0x401) goto LAB_00101578;
        puVar25 = param_2;
      } while (param_3 != 0);
    }
    __heap_select<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
              (param_1,param_2,param_2);
    do {
      uVar5 = param_1[1];
      uVar6 = param_1[2];
      uVar7 = param_1[3];
      local_a0 = *(undefined4 *)(param_2 + -8);
      uStack_9c = *(undefined4 *)((long)param_2 + -0x3c);
      uStack_98 = *(undefined4 *)(param_2 + -7);
      uStack_94 = *(undefined4 *)((long)param_2 + -0x34);
      puVar24 = param_2 + -8;
      local_90 = *(undefined4 *)(param_2 + -6);
      uStack_8c = *(undefined4 *)((long)param_2 + -0x2c);
      uStack_88 = *(undefined4 *)(param_2 + -5);
      uStack_84 = *(undefined4 *)((long)param_2 + -0x24);
      local_80 = param_2[-4];
      *(undefined4 *)puVar24 = *param_1;
      *(undefined4 *)((long)param_2 + -0x3c) = uVar5;
      *(undefined4 *)(param_2 + -7) = uVar6;
      *(undefined4 *)((long)param_2 + -0x34) = uVar7;
      uVar5 = param_1[5];
      uVar6 = param_1[6];
      uVar7 = param_1[7];
      local_78 = *(undefined4 *)(param_2 + -3);
      *(undefined4 *)(param_2 + -6) = param_1[4];
      *(undefined4 *)((long)param_2 + -0x2c) = uVar5;
      *(undefined4 *)(param_2 + -5) = uVar6;
      *(undefined4 *)((long)param_2 + -0x24) = uVar7;
      param_2[-4] = *(undefined8 *)(param_1 + 8);
      *(undefined4 *)(param_2 + -3) = param_1[10];
      __adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
                (param_1,0,(long)puVar24 - (long)param_1 >> 6,&local_a0);
      param_2 = puVar24;
    } while (0x40 < (long)puVar24 - (long)param_1);
  }
LAB_00101578:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, long,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, long, __gnu_cxx::__ops::_Iter_less_iter) [clone .isra.0] */

void std::
     __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined8 *param_2,long param_3)

{
  float *pfVar1;
  float fVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 *puVar20;
  long lVar21;
  undefined4 *puVar22;
  undefined8 *puVar23;
  undefined8 *puVar24;
  undefined8 *puVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  undefined4 local_a0;
  undefined4 uStack_9c;
  undefined4 uStack_98;
  undefined4 uStack_94;
  undefined4 local_90;
  undefined4 uStack_8c;
  undefined4 uStack_88;
  undefined4 uStack_84;
  undefined8 local_80;
  undefined4 local_78;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar21 = (long)param_2 - (long)param_1;
  if (0x400 < lVar21) {
    puVar24 = (undefined8 *)(param_1 + 0x10);
    puVar25 = param_2;
    if (param_3 != 0) {
      do {
        fVar26 = (float)param_1[0x1a];
        param_3 = param_3 + -1;
        fVar27 = *(float *)(puVar25 + -3);
        uVar5 = *param_1;
        uVar6 = param_1[1];
        uVar7 = param_1[2];
        uVar8 = param_1[3];
        uVar9 = param_1[4];
        uVar10 = param_1[5];
        uVar11 = param_1[6];
        uVar12 = param_1[7];
        puVar22 = param_1 + (lVar21 >> 7) * 0x10;
        uVar3 = *(undefined8 *)(param_1 + 8);
        fVar28 = (float)param_1[10];
        fVar2 = (float)puVar22[10];
        puVar23 = puVar25;
        param_2 = puVar24;
        if (fVar2 <= fVar26) {
          if (fVar27 <= fVar26) {
            if (fVar2 < fVar27) goto LAB_0010172b;
            goto LAB_001017aa;
          }
LAB_00101642:
          uVar13 = param_1[0x10];
          uVar14 = param_1[0x11];
          uVar15 = param_1[0x12];
          uVar16 = param_1[0x13];
          param_1[10] = fVar26;
          uVar4 = *(undefined8 *)(param_1 + 0x18);
          param_1[0x10] = uVar5;
          param_1[0x11] = uVar6;
          param_1[0x12] = uVar7;
          param_1[0x13] = uVar8;
          *(undefined8 *)(param_1 + 0x18) = uVar3;
          *(undefined8 *)(param_1 + 8) = uVar4;
          *param_1 = uVar13;
          param_1[1] = uVar14;
          param_1[2] = uVar15;
          param_1[3] = uVar16;
          param_1[4] = param_1[0x14];
          param_1[5] = param_1[0x15];
          param_1[6] = param_1[0x16];
          param_1[7] = param_1[0x17];
          param_1[0x14] = uVar9;
          param_1[0x15] = uVar10;
          param_1[0x16] = uVar11;
          param_1[0x17] = uVar12;
          param_1[0x1a] = fVar28;
          fVar27 = fVar28;
          fVar28 = *(float *)(puVar25 + -3);
        }
        else if (fVar2 < fVar27) {
LAB_001017aa:
          uVar13 = puVar22[1];
          uVar14 = puVar22[2];
          uVar15 = puVar22[3];
          *param_1 = *puVar22;
          param_1[1] = uVar13;
          param_1[2] = uVar14;
          param_1[3] = uVar15;
          uVar13 = puVar22[5];
          uVar14 = puVar22[6];
          uVar15 = puVar22[7];
          param_1[4] = puVar22[4];
          param_1[5] = uVar13;
          param_1[6] = uVar14;
          param_1[7] = uVar15;
          *(undefined8 *)(param_1 + 8) = *(undefined8 *)(puVar22 + 8);
          param_1[10] = puVar22[10];
          *(undefined8 *)(puVar22 + 8) = uVar3;
          *puVar22 = uVar5;
          puVar22[1] = uVar6;
          puVar22[2] = uVar7;
          puVar22[3] = uVar8;
          puVar22[4] = uVar9;
          puVar22[5] = uVar10;
          puVar22[6] = uVar11;
          puVar22[7] = uVar12;
          puVar22[10] = fVar28;
          fVar27 = (float)param_1[0x1a];
          fVar28 = *(float *)(puVar25 + -3);
          fVar26 = (float)param_1[10];
        }
        else {
          if (fVar27 <= fVar26) goto LAB_00101642;
LAB_0010172b:
          uVar13 = *(undefined4 *)((long)puVar25 + -0x3c);
          uVar14 = *(undefined4 *)(puVar25 + -7);
          uVar15 = *(undefined4 *)((long)puVar25 + -0x34);
          *param_1 = *(undefined4 *)(puVar25 + -8);
          param_1[1] = uVar13;
          param_1[2] = uVar14;
          param_1[3] = uVar15;
          uVar13 = *(undefined4 *)((long)puVar25 + -0x2c);
          uVar14 = *(undefined4 *)(puVar25 + -5);
          uVar15 = *(undefined4 *)((long)puVar25 + -0x24);
          param_1[4] = *(undefined4 *)(puVar25 + -6);
          param_1[5] = uVar13;
          param_1[6] = uVar14;
          param_1[7] = uVar15;
          *(undefined8 *)(param_1 + 8) = puVar25[-4];
          param_1[10] = *(undefined4 *)(puVar25 + -3);
          puVar25[-4] = uVar3;
          *(undefined4 *)(puVar25 + -8) = uVar5;
          *(undefined4 *)((long)puVar25 + -0x3c) = uVar6;
          *(undefined4 *)(puVar25 + -7) = uVar7;
          *(undefined4 *)((long)puVar25 + -0x34) = uVar8;
          *(undefined4 *)(puVar25 + -6) = uVar9;
          *(undefined4 *)((long)puVar25 + -0x2c) = uVar10;
          *(undefined4 *)(puVar25 + -5) = uVar11;
          *(undefined4 *)((long)puVar25 + -0x24) = uVar12;
          *(float *)(puVar25 + -3) = fVar28;
          fVar26 = (float)param_1[10];
          fVar27 = (float)param_1[0x1a];
        }
        while( true ) {
          while (fVar27 < fVar26) {
            pfVar1 = (float *)(param_2 + 0xd);
            param_2 = param_2 + 8;
            fVar27 = *pfVar1;
          }
          while (puVar20 = puVar23 + -8, fVar26 < fVar28) {
            puVar23 = puVar20;
            fVar28 = *(float *)(puVar20 + -3);
          }
          if (puVar20 <= param_2) break;
          uVar5 = *(undefined4 *)((long)puVar23 + -0x3c);
          uVar6 = *(undefined4 *)(puVar20 + 1);
          uVar7 = *(undefined4 *)((long)puVar23 + -0x34);
          uVar4 = *param_2;
          uVar17 = param_2[1];
          uVar18 = param_2[2];
          uVar19 = param_2[3];
          uVar3 = param_2[4];
          *(undefined4 *)param_2 = *(undefined4 *)puVar20;
          *(undefined4 *)((long)param_2 + 4) = uVar5;
          *(undefined4 *)(param_2 + 1) = uVar6;
          *(undefined4 *)((long)param_2 + 0xc) = uVar7;
          uVar5 = *(undefined4 *)((long)puVar23 + -0x2c);
          uVar6 = *(undefined4 *)(puVar20 + 3);
          uVar7 = *(undefined4 *)((long)puVar23 + -0x24);
          *(undefined4 *)(param_2 + 2) = *(undefined4 *)(puVar20 + 2);
          *(undefined4 *)((long)param_2 + 0x14) = uVar5;
          *(undefined4 *)(param_2 + 3) = uVar6;
          *(undefined4 *)((long)param_2 + 0x1c) = uVar7;
          param_2[4] = puVar20[4];
          *(undefined4 *)(param_2 + 5) = *(undefined4 *)(puVar20 + 5);
          *puVar20 = uVar4;
          puVar20[1] = uVar17;
          puVar20[4] = uVar3;
          puVar20[2] = uVar18;
          puVar20[3] = uVar19;
          *(float *)(puVar20 + 5) = fVar27;
          pfVar1 = (float *)(param_2 + 0xd);
          fVar26 = (float)param_1[10];
          puVar23 = puVar20;
          param_2 = param_2 + 8;
          fVar27 = *pfVar1;
          fVar28 = *(float *)(puVar20 + -3);
        }
        __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (param_2,puVar25,param_3);
        lVar21 = (long)param_2 - (long)param_1;
        if (lVar21 < 0x401) goto LAB_00101888;
        puVar25 = param_2;
      } while (param_3 != 0);
    }
    __heap_select<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
              (param_1,param_2,param_2);
    do {
      uVar5 = param_1[1];
      uVar6 = param_1[2];
      uVar7 = param_1[3];
      local_a0 = *(undefined4 *)(param_2 + -8);
      uStack_9c = *(undefined4 *)((long)param_2 + -0x3c);
      uStack_98 = *(undefined4 *)(param_2 + -7);
      uStack_94 = *(undefined4 *)((long)param_2 + -0x34);
      puVar24 = param_2 + -8;
      local_90 = *(undefined4 *)(param_2 + -6);
      uStack_8c = *(undefined4 *)((long)param_2 + -0x2c);
      uStack_88 = *(undefined4 *)(param_2 + -5);
      uStack_84 = *(undefined4 *)((long)param_2 + -0x24);
      local_80 = param_2[-4];
      *(undefined4 *)puVar24 = *param_1;
      *(undefined4 *)((long)param_2 + -0x3c) = uVar5;
      *(undefined4 *)(param_2 + -7) = uVar6;
      *(undefined4 *)((long)param_2 + -0x34) = uVar7;
      uVar5 = param_1[5];
      uVar6 = param_1[6];
      uVar7 = param_1[7];
      local_78 = *(undefined4 *)(param_2 + -3);
      *(undefined4 *)(param_2 + -6) = param_1[4];
      *(undefined4 *)((long)param_2 + -0x2c) = uVar5;
      *(undefined4 *)(param_2 + -5) = uVar6;
      *(undefined4 *)((long)param_2 + -0x24) = uVar7;
      param_2[-4] = *(undefined8 *)(param_1 + 8);
      *(undefined4 *)(param_2 + -3) = param_1[10];
      __adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
                (param_1,0,(long)puVar24 - (long)param_1 >> 6,&local_a0);
      param_2 = puVar24;
    } while (0x40 < (long)puVar24 - (long)param_1);
  }
LAB_00101888:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderSmall::~RefBuilderSmall() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderSmall::
~RefBuilderSmall(RefBuilderSmall *this)

{
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderSmall::~RefBuilderSmall() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderSmall::
~RefBuilderSmall(RefBuilderSmall *this)

{
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderSmall::~RefBuilderSmall() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderSmall::
~RefBuilderSmall(RefBuilderSmall *this)

{
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderLarge::meshQualityChanged(RTCBuildQuality) */

bool __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderLarge::
meshQualityChanged(RefBuilderLarge *this,int param_2)

{
  return *(int *)(this + 0x18) != param_2;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderSmall::meshQualityChanged(RTCBuildQuality) */

undefined8
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderSmall::
meshQualityChanged(void)

{
  return 0;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderLarge::meshQualityChanged(RTCBuildQuality) */

bool __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderLarge::
meshQualityChanged(RefBuilderLarge *this,int param_2)

{
  return *(int *)(this + 0x18) != param_2;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderSmall::meshQualityChanged(RTCBuildQuality) */

undefined8
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderSmall::
meshQualityChanged(void)

{
  return 0;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderLarge::meshQualityChanged(RTCBuildQuality) */

bool __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderLarge::
meshQualityChanged(RefBuilderLarge *this,int param_2)

{
  return *(int *)(this + 0x18) != param_2;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderSmall::meshQualityChanged(RTCBuildQuality) */

undefined8
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderSmall::
meshQualityChanged(void)

{
  return 0;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderSmall::~RefBuilderSmall() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderSmall::
~RefBuilderSmall(RefBuilderSmall *this)

{
  operator_delete(this,0x10);
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderSmall::~RefBuilderSmall() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderSmall::
~RefBuilderSmall(RefBuilderSmall *this)

{
  operator_delete(this,0x10);
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderSmall::~RefBuilderSmall() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderSmall::
~RefBuilderSmall(RefBuilderSmall *this)

{
  operator_delete(this,0x10);
  return;
}



/* embree::RefCount::refInc() */

RefCount * __thiscall embree::RefCount::refInc(RefCount *this)

{
  LOCK();
  *(long *)(this + 8) = *(long *)(this + 8) + 1;
  UNLOCK();
  return this;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::clear() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::clear
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *this)

{
  long *plVar1;
  long *plVar2;
  void *pvVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  
  uVar6 = 0;
  lVar5 = *(long *)(*(long *)(this + 0x28) + 0x208);
  lVar4 = *(long *)(*(long *)(this + 0x28) + 0x200);
  if (lVar5 != lVar4) {
    do {
      plVar1 = *(long **)(lVar4 + uVar6 * 8);
      if (plVar1 != (long *)0x0) {
        (**(code **)(*plVar1 + 0x28))();
        lVar5 = *(long *)(*(long *)(this + 0x28) + 0x208);
        lVar4 = *(long *)(*(long *)(this + 0x28) + 0x200);
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < (ulong)(lVar5 - lVar4 >> 3));
  }
  lVar5 = *(long *)(this + 0x18);
  lVar4 = *(long *)(this + 0x10);
  uVar6 = 0;
  if (lVar5 != lVar4) {
    do {
      plVar1 = (long *)(lVar4 + uVar6 * 8);
      plVar2 = (long *)*plVar1;
      if (plVar2 != (long *)0x0) {
        *plVar1 = 0;
        (**(code **)(*plVar2 + 8))();
        lVar5 = *(long *)(this + 0x18);
        lVar4 = *(long *)(this + 0x10);
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < (ulong)(lVar5 - lVar4 >> 3));
  }
  pvVar3 = *(void **)(this + 0x58);
  lVar5 = *(long *)(this + 0x50);
  if (pvVar3 != (void *)0x0) {
    if ((ulong)(lVar5 << 6) < 0x1c00000) {
      embree::alignedFree(pvVar3);
    }
    else {
      embree::os_free(pvVar3,lVar5 << 6,(bool)this[0x40]);
    }
  }
  if (lVar5 != 0) {
    (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),lVar5 * -0x40,1);
  }
  *(undefined8 *)(this + 0x58) = 0;
  *(undefined8 *)(this + 0x50) = 0;
  *(undefined8 *)(this + 0x48) = 0;
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::clear() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::clear
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *this)

{
  long *plVar1;
  long *plVar2;
  void *pvVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  
  uVar6 = 0;
  lVar5 = *(long *)(*(long *)(this + 0x28) + 0x208);
  lVar4 = *(long *)(*(long *)(this + 0x28) + 0x200);
  if (lVar5 != lVar4) {
    do {
      plVar1 = *(long **)(lVar4 + uVar6 * 8);
      if (plVar1 != (long *)0x0) {
        (**(code **)(*plVar1 + 0x28))();
        lVar5 = *(long *)(*(long *)(this + 0x28) + 0x208);
        lVar4 = *(long *)(*(long *)(this + 0x28) + 0x200);
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < (ulong)(lVar5 - lVar4 >> 3));
  }
  lVar5 = *(long *)(this + 0x18);
  lVar4 = *(long *)(this + 0x10);
  uVar6 = 0;
  if (lVar5 != lVar4) {
    do {
      plVar1 = (long *)(lVar4 + uVar6 * 8);
      plVar2 = (long *)*plVar1;
      if (plVar2 != (long *)0x0) {
        *plVar1 = 0;
        (**(code **)(*plVar2 + 8))();
        lVar5 = *(long *)(this + 0x18);
        lVar4 = *(long *)(this + 0x10);
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < (ulong)(lVar5 - lVar4 >> 3));
  }
  pvVar3 = *(void **)(this + 0x58);
  lVar5 = *(long *)(this + 0x50);
  if (pvVar3 != (void *)0x0) {
    if ((ulong)(lVar5 << 6) < 0x1c00000) {
      embree::alignedFree(pvVar3);
    }
    else {
      embree::os_free(pvVar3,lVar5 << 6,(bool)this[0x40]);
    }
  }
  if (lVar5 != 0) {
    (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),lVar5 * -0x40,1);
  }
  *(undefined8 *)(this + 0x58) = 0;
  *(undefined8 *)(this + 0x50) = 0;
  *(undefined8 *)(this + 0x48) = 0;
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::clear() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::clear
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *this)

{
  long *plVar1;
  long *plVar2;
  void *pvVar3;
  long lVar4;
  long lVar5;
  ulong uVar6;
  
  uVar6 = 0;
  lVar5 = *(long *)(*(long *)(this + 0x28) + 0x208);
  lVar4 = *(long *)(*(long *)(this + 0x28) + 0x200);
  if (lVar5 != lVar4) {
    do {
      plVar1 = *(long **)(lVar4 + uVar6 * 8);
      if (plVar1 != (long *)0x0) {
        (**(code **)(*plVar1 + 0x28))();
        lVar5 = *(long *)(*(long *)(this + 0x28) + 0x208);
        lVar4 = *(long *)(*(long *)(this + 0x28) + 0x200);
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < (ulong)(lVar5 - lVar4 >> 3));
  }
  lVar5 = *(long *)(this + 0x18);
  lVar4 = *(long *)(this + 0x10);
  uVar6 = 0;
  if (lVar5 != lVar4) {
    do {
      plVar1 = (long *)(lVar4 + uVar6 * 8);
      plVar2 = (long *)*plVar1;
      if (plVar2 != (long *)0x0) {
        *plVar1 = 0;
        (**(code **)(*plVar2 + 8))();
        lVar5 = *(long *)(this + 0x18);
        lVar4 = *(long *)(this + 0x10);
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < (ulong)(lVar5 - lVar4 >> 3));
  }
  pvVar3 = *(void **)(this + 0x58);
  lVar5 = *(long *)(this + 0x50);
  if (pvVar3 != (void *)0x0) {
    if ((ulong)(lVar5 << 6) < 0x1c00000) {
      embree::alignedFree(pvVar3);
    }
    else {
      embree::os_free(pvVar3,lVar5 << 6,(bool)this[0x40]);
    }
  }
  if (lVar5 != 0) {
    (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),lVar5 * -0x40,1);
  }
  *(undefined8 *)(this + 0x58) = 0;
  *(undefined8 *)(this + 0x50) = 0;
  *(undefined8 *)(this + 0x48) = 0;
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderLarge::attachBuildRefs(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >*) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderLarge::
attachBuildRefs(RefBuilderLarge *this,BVHNBuilderTwoLevel *param_1)

{
  BVHNBuilderTwoLevel *pBVar1;
  int iVar2;
  float fVar3;
  long lVar4;
  ulong uVar5;
  undefined1 auVar6 [16];
  uint uVar7;
  long lVar8;
  float *pfVar9;
  long lVar10;
  float fVar11;
  float fVar12;
  float fVar14;
  float fVar15;
  undefined1 auVar13 [16];
  float fVar16;
  float fVar18;
  float fVar19;
  undefined1 auVar17 [16];
  
  lVar8 = *(long *)(this + 8);
  lVar4 = *(long *)(*(long *)(*(long *)(param_1 + 0x28) + 0x200) + lVar8 * 8);
  lVar10 = *(long *)(*(long *)(*(long *)(param_1 + 0x30) + 0x1e0) + lVar8 * 8);
  if (lVar10 != 0) {
    if (*(uint *)(*(long *)(*(long *)(param_1 + 0x30) + 0x200) + lVar8 * 4) <
        *(uint *)(lVar10 + 0x38)) {
      lVar8 = (**(code **)(**(long **)(this + 0x10) + 0x20))();
    }
  }
  auVar17 = minps(*(undefined1 (*) [16])(lVar4 + 0x10),*(undefined1 (*) [16])(lVar4 + 0x30));
  auVar13 = maxps(*(undefined1 (*) [16])(lVar4 + 0x20),*(undefined1 (*) [16])(lVar4 + 0x40));
  fVar16 = auVar17._0_4_;
  fVar18 = auVar17._4_4_;
  fVar19 = auVar17._8_4_;
  fVar11 = auVar13._0_4_;
  fVar14 = auVar13._4_4_;
  fVar15 = auVar13._8_4_;
  auVar6._4_4_ = -(uint)(fVar18 <= fVar14);
  auVar6._0_4_ = -(uint)(fVar16 <= fVar11);
  auVar6._8_4_ = -(uint)(fVar19 <= fVar15);
  auVar6._12_4_ = -(uint)(auVar17._12_4_ <= auVar13._12_4_);
  uVar7 = movmskps((int)lVar8,auVar6);
  if ((~uVar7 & 7) != 0) {
    return;
  }
  lVar8 = *(long *)(this + 8);
  lVar10 = *(long *)(*(long *)(*(long *)(param_1 + 0x30) + 0x1e0) + lVar8 * 8);
  if ((lVar10 != 0) && (*(char *)(lVar10 + 0x3c) != '\x14')) {
    lVar10 = 0;
  }
  fVar3 = *(float *)(lVar10 + 0x20);
  uVar5 = *(ulong *)(lVar4 + 0x70);
  fVar12 = 0.0;
  if ((uVar5 & 8) == 0) {
    fVar12 = ((fVar14 - fVar18) + (fVar15 - fVar19)) * (fVar11 - fVar16) +
             (fVar14 - fVar18) * (fVar15 - fVar19);
    fVar12 = fVar12 + fVar12;
  }
  LOCK();
  pBVar1 = param_1 + 0x88;
  iVar2 = *(int *)pBVar1;
  *(int *)pBVar1 = *(int *)pBVar1 + 1;
  UNLOCK();
  pfVar9 = (float *)((long)iVar2 * 0x40 + *(long *)(param_1 + 0x58));
  *(ulong *)(pfVar9 + 8) = uVar5;
  *pfVar9 = fVar16;
  pfVar9[1] = fVar18;
  pfVar9[2] = fVar19;
  pfVar9[3] = (float)lVar8;
  pfVar9[4] = fVar11;
  pfVar9[5] = fVar14;
  pfVar9[6] = fVar15;
  pfVar9[7] = fVar3;
  pfVar9[10] = fVar12;
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderLarge::attachBuildRefs(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >*) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderLarge::
attachBuildRefs(RefBuilderLarge *this,BVHNBuilderTwoLevel *param_1)

{
  BVHNBuilderTwoLevel *pBVar1;
  int iVar2;
  float fVar3;
  long lVar4;
  ulong uVar5;
  undefined1 auVar6 [16];
  uint uVar7;
  long lVar8;
  float *pfVar9;
  long lVar10;
  float fVar11;
  float fVar12;
  float fVar14;
  float fVar15;
  undefined1 auVar13 [16];
  float fVar16;
  float fVar18;
  float fVar19;
  undefined1 auVar17 [16];
  
  lVar8 = *(long *)(this + 8);
  lVar4 = *(long *)(*(long *)(*(long *)(param_1 + 0x28) + 0x200) + lVar8 * 8);
  lVar10 = *(long *)(*(long *)(*(long *)(param_1 + 0x30) + 0x1e0) + lVar8 * 8);
  if (lVar10 != 0) {
    if (*(uint *)(*(long *)(*(long *)(param_1 + 0x30) + 0x200) + lVar8 * 4) <
        *(uint *)(lVar10 + 0x38)) {
      lVar8 = (**(code **)(**(long **)(this + 0x10) + 0x20))();
    }
  }
  auVar17 = minps(*(undefined1 (*) [16])(lVar4 + 0x10),*(undefined1 (*) [16])(lVar4 + 0x30));
  auVar13 = maxps(*(undefined1 (*) [16])(lVar4 + 0x20),*(undefined1 (*) [16])(lVar4 + 0x40));
  fVar16 = auVar17._0_4_;
  fVar18 = auVar17._4_4_;
  fVar19 = auVar17._8_4_;
  fVar11 = auVar13._0_4_;
  fVar14 = auVar13._4_4_;
  fVar15 = auVar13._8_4_;
  auVar6._4_4_ = -(uint)(fVar18 <= fVar14);
  auVar6._0_4_ = -(uint)(fVar16 <= fVar11);
  auVar6._8_4_ = -(uint)(fVar19 <= fVar15);
  auVar6._12_4_ = -(uint)(auVar17._12_4_ <= auVar13._12_4_);
  uVar7 = movmskps((int)lVar8,auVar6);
  if ((~uVar7 & 7) != 0) {
    return;
  }
  lVar8 = *(long *)(this + 8);
  lVar10 = *(long *)(*(long *)(*(long *)(param_1 + 0x30) + 0x1e0) + lVar8 * 8);
  if ((lVar10 != 0) && (*(char *)(lVar10 + 0x3c) != '\x14')) {
    lVar10 = 0;
  }
  fVar3 = *(float *)(lVar10 + 0x20);
  uVar5 = *(ulong *)(lVar4 + 0x70);
  fVar12 = 0.0;
  if ((uVar5 & 8) == 0) {
    fVar12 = ((fVar14 - fVar18) + (fVar15 - fVar19)) * (fVar11 - fVar16) +
             (fVar14 - fVar18) * (fVar15 - fVar19);
    fVar12 = fVar12 + fVar12;
  }
  LOCK();
  pBVar1 = param_1 + 0x88;
  iVar2 = *(int *)pBVar1;
  *(int *)pBVar1 = *(int *)pBVar1 + 1;
  UNLOCK();
  pfVar9 = (float *)((long)iVar2 * 0x40 + *(long *)(param_1 + 0x58));
  *(ulong *)(pfVar9 + 8) = uVar5;
  *pfVar9 = fVar16;
  pfVar9[1] = fVar18;
  pfVar9[2] = fVar19;
  pfVar9[3] = (float)lVar8;
  pfVar9[4] = fVar11;
  pfVar9[5] = fVar14;
  pfVar9[6] = fVar15;
  pfVar9[7] = fVar3;
  pfVar9[10] = fVar12;
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderLarge::attachBuildRefs(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >*) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderLarge::
attachBuildRefs(RefBuilderLarge *this,BVHNBuilderTwoLevel *param_1)

{
  BVHNBuilderTwoLevel *pBVar1;
  int iVar2;
  float fVar3;
  long lVar4;
  ulong uVar5;
  undefined1 auVar6 [16];
  uint uVar7;
  long lVar8;
  float *pfVar9;
  long lVar10;
  float fVar11;
  float fVar12;
  float fVar14;
  float fVar15;
  undefined1 auVar13 [16];
  float fVar16;
  float fVar18;
  float fVar19;
  undefined1 auVar17 [16];
  
  lVar8 = *(long *)(this + 8);
  lVar4 = *(long *)(*(long *)(*(long *)(param_1 + 0x28) + 0x200) + lVar8 * 8);
  lVar10 = *(long *)(*(long *)(*(long *)(param_1 + 0x30) + 0x1e0) + lVar8 * 8);
  if (lVar10 != 0) {
    if (*(uint *)(*(long *)(*(long *)(param_1 + 0x30) + 0x200) + lVar8 * 4) <
        *(uint *)(lVar10 + 0x38)) {
      lVar8 = (**(code **)(**(long **)(this + 0x10) + 0x20))();
    }
  }
  auVar17 = minps(*(undefined1 (*) [16])(lVar4 + 0x10),*(undefined1 (*) [16])(lVar4 + 0x30));
  auVar13 = maxps(*(undefined1 (*) [16])(lVar4 + 0x20),*(undefined1 (*) [16])(lVar4 + 0x40));
  fVar16 = auVar17._0_4_;
  fVar18 = auVar17._4_4_;
  fVar19 = auVar17._8_4_;
  fVar11 = auVar13._0_4_;
  fVar14 = auVar13._4_4_;
  fVar15 = auVar13._8_4_;
  auVar6._4_4_ = -(uint)(fVar18 <= fVar14);
  auVar6._0_4_ = -(uint)(fVar16 <= fVar11);
  auVar6._8_4_ = -(uint)(fVar19 <= fVar15);
  auVar6._12_4_ = -(uint)(auVar17._12_4_ <= auVar13._12_4_);
  uVar7 = movmskps((int)lVar8,auVar6);
  if ((~uVar7 & 7) != 0) {
    return;
  }
  lVar8 = *(long *)(this + 8);
  lVar10 = *(long *)(*(long *)(*(long *)(param_1 + 0x30) + 0x1e0) + lVar8 * 8);
  if ((lVar10 != 0) && (*(char *)(lVar10 + 0x3c) != '\x14')) {
    lVar10 = 0;
  }
  fVar3 = *(float *)(lVar10 + 0x20);
  uVar5 = *(ulong *)(lVar4 + 0x70);
  fVar12 = 0.0;
  if ((uVar5 & 8) == 0) {
    fVar12 = ((fVar14 - fVar18) + (fVar15 - fVar19)) * (fVar11 - fVar16) +
             (fVar14 - fVar18) * (fVar15 - fVar19);
    fVar12 = fVar12 + fVar12;
  }
  LOCK();
  pBVar1 = param_1 + 0x88;
  iVar2 = *(int *)pBVar1;
  *(int *)pBVar1 = *(int *)pBVar1 + 1;
  UNLOCK();
  pfVar9 = (float *)((long)iVar2 * 0x40 + *(long *)(param_1 + 0x58));
  *(ulong *)(pfVar9 + 8) = uVar5;
  *pfVar9 = fVar16;
  pfVar9[1] = fVar18;
  pfVar9[2] = fVar19;
  pfVar9[3] = (float)lVar8;
  pfVar9[4] = fVar11;
  pfVar9[5] = fVar14;
  pfVar9[6] = fVar15;
  pfVar9[7] = fVar3;
  pfVar9[10] = fVar12;
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::deleteGeometry(unsigned long) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::deleteGeometry
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *this,ulong param_1)

{
  long lVar1;
  long *plVar2;
  long lVar3;
  
  lVar3 = *(long *)(*(long *)(this + 0x28) + 0x200);
  if (param_1 < (ulong)(*(long *)(*(long *)(this + 0x28) + 0x208) - lVar3 >> 3)) {
    lVar1 = param_1 * 8;
    plVar2 = *(long **)(*(long *)(this + 0x10) + lVar1);
    if (plVar2 != (long *)0x0) {
      *(long *)(*(long *)(this + 0x10) + lVar1) = 0;
      (**(code **)(*plVar2 + 8))();
      lVar3 = *(long *)(*(long *)(this + 0x28) + 0x200);
    }
    plVar2 = (long *)(lVar3 + lVar1);
    if ((long *)*plVar2 != (long *)0x0) {
      (**(code **)(*(long *)*plVar2 + 8))();
      plVar2 = (long *)(lVar1 + *(long *)(*(long *)(this + 0x28) + 0x200));
    }
    *plVar2 = 0;
    return;
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::deleteGeometry(unsigned long) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::deleteGeometry
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *this,ulong param_1)

{
  long lVar1;
  long *plVar2;
  long lVar3;
  
  lVar3 = *(long *)(*(long *)(this + 0x28) + 0x200);
  if (param_1 < (ulong)(*(long *)(*(long *)(this + 0x28) + 0x208) - lVar3 >> 3)) {
    lVar1 = param_1 * 8;
    plVar2 = *(long **)(*(long *)(this + 0x10) + lVar1);
    if (plVar2 != (long *)0x0) {
      *(long *)(*(long *)(this + 0x10) + lVar1) = 0;
      (**(code **)(*plVar2 + 8))();
      lVar3 = *(long *)(*(long *)(this + 0x28) + 0x200);
    }
    plVar2 = (long *)(lVar3 + lVar1);
    if ((long *)*plVar2 != (long *)0x0) {
      (**(code **)(*(long *)*plVar2 + 8))();
      plVar2 = (long *)(lVar1 + *(long *)(*(long *)(this + 0x28) + 0x200));
    }
    *plVar2 = 0;
    return;
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::deleteGeometry(unsigned long) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::deleteGeometry
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *this,ulong param_1)

{
  long lVar1;
  long *plVar2;
  long lVar3;
  
  lVar3 = *(long *)(*(long *)(this + 0x28) + 0x200);
  if (param_1 < (ulong)(*(long *)(*(long *)(this + 0x28) + 0x208) - lVar3 >> 3)) {
    lVar1 = param_1 * 8;
    plVar2 = *(long **)(*(long *)(this + 0x10) + lVar1);
    if (plVar2 != (long *)0x0) {
      *(long *)(*(long *)(this + 0x10) + lVar1) = 0;
      (**(code **)(*plVar2 + 8))();
      lVar3 = *(long *)(*(long *)(this + 0x28) + 0x200);
    }
    plVar2 = (long *)(lVar3 + lVar1);
    if ((long *)*plVar2 != (long *)0x0) {
      (**(code **)(*(long *)*plVar2 + 8))();
      plVar2 = (long *)(lVar1 + *(long *)(*(long *)(this + 0x28) + 0x200));
    }
    *plVar2 = 0;
    return;
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::~BVHNBuilderTwoLevel() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::~BVHNBuilderTwoLevel
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *this)

{
  long lVar1;
  void *pvVar2;
  long *plVar3;
  long *plVar4;
  long *plVar5;
  
  lVar1 = *(long *)(this + 0x78);
  *(undefined ***)this = &PTR__BVHNBuilderTwoLevel_00143ff8;
  pvVar2 = *(void **)(this + 0x80);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x68]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x60))(*(undefined8 **)(this + 0x60),lVar1 * -0x20,1);
  }
  pvVar2 = *(void **)(this + 0x58);
  lVar1 = *(long *)(this + 0x50);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 6) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 6,(bool)this[0x40]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),lVar1 * -0x40,1);
  }
  plVar3 = *(long **)(this + 0x18);
  plVar5 = *(long **)(this + 0x10);
  if (plVar3 != plVar5) {
    do {
      while (plVar4 = (long *)*plVar5, plVar4 == (long *)0x0) {
        plVar5 = plVar5 + 1;
        if (plVar3 == plVar5) goto LAB_00102347;
      }
      plVar5 = plVar5 + 1;
      (**(code **)(*plVar4 + 8))();
    } while (plVar3 != plVar5);
LAB_00102347:
    plVar5 = *(long **)(this + 0x10);
  }
  if (plVar5 == (long *)0x0) {
    return;
  }
  operator_delete(plVar5,*(long *)(this + 0x20) - (long)plVar5);
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::~BVHNBuilderTwoLevel() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::~BVHNBuilderTwoLevel
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *this)

{
  ~BVHNBuilderTwoLevel(this);
  operator_delete(this,0xa8);
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::~BVHNBuilderTwoLevel() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::
~BVHNBuilderTwoLevel(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *this)

{
  long lVar1;
  void *pvVar2;
  long *plVar3;
  long *plVar4;
  long *plVar5;
  
  lVar1 = *(long *)(this + 0x78);
  *(undefined ***)this = &PTR__BVHNBuilderTwoLevel_00144040;
  pvVar2 = *(void **)(this + 0x80);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x68]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x60))(*(undefined8 **)(this + 0x60),lVar1 * -0x20,1);
  }
  pvVar2 = *(void **)(this + 0x58);
  lVar1 = *(long *)(this + 0x50);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 6) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 6,(bool)this[0x40]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),lVar1 * -0x40,1);
  }
  plVar3 = *(long **)(this + 0x18);
  plVar5 = *(long **)(this + 0x10);
  if (plVar3 != plVar5) {
    do {
      while (plVar4 = (long *)*plVar5, plVar4 == (long *)0x0) {
        plVar5 = plVar5 + 1;
        if (plVar3 == plVar5) goto LAB_00102487;
      }
      plVar5 = plVar5 + 1;
      (**(code **)(*plVar4 + 8))();
    } while (plVar3 != plVar5);
LAB_00102487:
    plVar5 = *(long **)(this + 0x10);
  }
  if (plVar5 == (long *)0x0) {
    return;
  }
  operator_delete(plVar5,*(long *)(this + 0x20) - (long)plVar5);
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::~BVHNBuilderTwoLevel() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::
~BVHNBuilderTwoLevel(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *this)

{
  ~BVHNBuilderTwoLevel(this);
  operator_delete(this,0xa8);
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::~BVHNBuilderTwoLevel() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::
~BVHNBuilderTwoLevel(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *this)

{
  long lVar1;
  void *pvVar2;
  long *plVar3;
  long *plVar4;
  long *plVar5;
  
  lVar1 = *(long *)(this + 0x78);
  *(undefined ***)this = &PTR__BVHNBuilderTwoLevel_00144088;
  pvVar2 = *(void **)(this + 0x80);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 5) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 5,(bool)this[0x68]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x60))(*(undefined8 **)(this + 0x60),lVar1 * -0x20,1);
  }
  pvVar2 = *(void **)(this + 0x58);
  lVar1 = *(long *)(this + 0x50);
  if (pvVar2 != (void *)0x0) {
    if ((ulong)(lVar1 << 6) < 0x1c00000) {
      embree::alignedFree(pvVar2);
    }
    else {
      embree::os_free(pvVar2,lVar1 << 6,(bool)this[0x40]);
    }
  }
  if (lVar1 != 0) {
    (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),lVar1 * -0x40,1);
  }
  plVar3 = *(long **)(this + 0x18);
  plVar5 = *(long **)(this + 0x10);
  if (plVar3 != plVar5) {
    do {
      while (plVar4 = (long *)*plVar5, plVar4 == (long *)0x0) {
        plVar5 = plVar5 + 1;
        if (plVar3 == plVar5) goto LAB_001025c7;
      }
      plVar5 = plVar5 + 1;
      (**(code **)(*plVar4 + 8))();
    } while (plVar3 != plVar5);
LAB_001025c7:
    plVar5 = *(long **)(this + 0x10);
  }
  if (plVar5 == (long *)0x0) {
    return;
  }
  operator_delete(plVar5,*(long *)(this + 0x20) - (long)plVar5);
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::~BVHNBuilderTwoLevel() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::
~BVHNBuilderTwoLevel(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *this)

{
  ~BVHNBuilderTwoLevel(this);
  operator_delete(this,0xa8);
  return;
}



/* embree::RefCount::refDec() */

void __thiscall embree::RefCount::refDec(RefCount *this)

{
  RefCount *pRVar1;
  
  LOCK();
  pRVar1 = this + 8;
  *(long *)pRVar1 = *(long *)pRVar1 + -1;
  UNLOCK();
  if ((this != (RefCount *)0x0) && (*(long *)pRVar1 == 0)) {
                    /* WARNING: Could not recover jumptable at 0x00102659. Too many branches */
                    /* WARNING: Treating indirect jump as call */
    (**(code **)(*(long *)this + 8))();
    return;
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderLarge::~RefBuilderLarge() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderLarge::
~RefBuilderLarge(RefBuilderLarge *this)

{
  long *plVar1;
  long *plVar2;
  
  *(undefined ***)this = &PTR__RefBuilderLarge_00143788;
  plVar2 = *(long **)(this + 0x10);
  if (plVar2 != (long *)0x0) {
    if (*(code **)(*plVar2 + 0x18) != RefCount::refDec) {
                    /* WARNING: Could not recover jumptable at 0x001026b8. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar2 + 0x18))();
      return;
    }
    LOCK();
    plVar1 = plVar2 + 1;
    *plVar1 = *plVar1 + -1;
    UNLOCK();
    if (*plVar1 == 0) {
                    /* WARNING: Could not recover jumptable at 0x001026a5. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar2 + 8))();
      return;
    }
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderLarge::~RefBuilderLarge() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderLarge::
~RefBuilderLarge(RefBuilderLarge *this)

{
  long *plVar1;
  long *plVar2;
  
  *(undefined ***)this = &PTR__RefBuilderLarge_00143848;
  plVar2 = *(long **)(this + 0x10);
  if (plVar2 != (long *)0x0) {
    if (*(code **)(*plVar2 + 0x18) != RefCount::refDec) {
                    /* WARNING: Could not recover jumptable at 0x00102708. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar2 + 0x18))();
      return;
    }
    LOCK();
    plVar1 = plVar2 + 1;
    *plVar1 = *plVar1 + -1;
    UNLOCK();
    if (*plVar1 == 0) {
                    /* WARNING: Could not recover jumptable at 0x001026f5. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar2 + 8))();
      return;
    }
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderLarge::~RefBuilderLarge() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderLarge::
~RefBuilderLarge(RefBuilderLarge *this)

{
  long *plVar1;
  long *plVar2;
  
  *(undefined ***)this = &PTR__RefBuilderLarge_001437e8;
  plVar2 = *(long **)(this + 0x10);
  if (plVar2 != (long *)0x0) {
    if (*(code **)(*plVar2 + 0x18) != RefCount::refDec) {
                    /* WARNING: Could not recover jumptable at 0x00102758. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar2 + 0x18))();
      return;
    }
    LOCK();
    plVar1 = plVar2 + 1;
    *plVar1 = *plVar1 + -1;
    UNLOCK();
    if (*plVar1 == 0) {
                    /* WARNING: Could not recover jumptable at 0x00102745. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar2 + 8))();
      return;
    }
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderLarge::~RefBuilderLarge() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderLarge::
~RefBuilderLarge(RefBuilderLarge *this)

{
  long *plVar1;
  long *plVar2;
  
  *(undefined ***)this = &PTR__RefBuilderLarge_00143788;
  plVar2 = *(long **)(this + 0x10);
  if (plVar2 != (long *)0x0) {
    if (*(code **)(*plVar2 + 0x18) != RefCount::refDec) {
      (**(code **)(*plVar2 + 0x18))();
      operator_delete(this,0x20);
      return;
    }
    LOCK();
    plVar1 = plVar2 + 1;
    *plVar1 = *plVar1 + -1;
    UNLOCK();
    if (*plVar1 == 0) {
      (**(code **)(*plVar2 + 8))();
    }
  }
  operator_delete(this,0x20);
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderLarge::~RefBuilderLarge() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderLarge::
~RefBuilderLarge(RefBuilderLarge *this)

{
  long *plVar1;
  long *plVar2;
  
  *(undefined ***)this = &PTR__RefBuilderLarge_00143848;
  plVar2 = *(long **)(this + 0x10);
  if (plVar2 != (long *)0x0) {
    if (*(code **)(*plVar2 + 0x18) != RefCount::refDec) {
      (**(code **)(*plVar2 + 0x18))();
      operator_delete(this,0x20);
      return;
    }
    LOCK();
    plVar1 = plVar2 + 1;
    *plVar1 = *plVar1 + -1;
    UNLOCK();
    if (*plVar1 == 0) {
      (**(code **)(*plVar2 + 8))();
    }
  }
  operator_delete(this,0x20);
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderLarge::~RefBuilderLarge() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderLarge::
~RefBuilderLarge(RefBuilderLarge *this)

{
  long *plVar1;
  long *plVar2;
  
  *(undefined ***)this = &PTR__RefBuilderLarge_001437e8;
  plVar2 = *(long **)(this + 0x10);
  if (plVar2 != (long *)0x0) {
    if (*(code **)(*plVar2 + 0x18) != RefCount::refDec) {
      (**(code **)(*plVar2 + 0x18))();
      operator_delete(this,0x20);
      return;
    }
    LOCK();
    plVar1 = plVar2 + 1;
    *plVar1 = *plVar1 + -1;
    UNLOCK();
    if (*plVar1 == 0) {
      (**(code **)(*plVar2 + 8))();
    }
  }
  operator_delete(this,0x20);
  return;
}



/* embree::FastAllocator::reset() */

void __thiscall embree::FastAllocator::reset(FastAllocator *this)

{
  long *plVar1;
  ulong *puVar2;
  long *plVar3;
  FastAllocator *pFVar4;
  long lVar5;
  FastAllocator *pFVar6;
  ulong uVar7;
  long *plVar8;
  long in_FS_OFFSET;
  long local_48;
  long local_40;
  
  pFVar6 = this + 0xf8;
  plVar8 = &local_48;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pFVar4 = this + 0xb8;
  do {
    while (*(long *)pFVar4 != 0) {
      lVar5 = *(long *)(*(long *)pFVar4 + 0x18);
      *(long *)(*(long *)pFVar4 + 0x18) = *(long *)pFVar6;
      LOCK();
      *(long *)pFVar6 = *(long *)pFVar4;
      UNLOCK();
      LOCK();
      *(long *)pFVar4 = lVar5;
      UNLOCK();
    }
    LOCK();
    *(long *)pFVar4 = 0;
    UNLOCK();
    pFVar4 = pFVar4 + 8;
  } while (pFVar4 != pFVar6);
  LOCK();
  *(undefined8 *)(this + 0x118) = 0;
  UNLOCK();
  LOCK();
  *(undefined8 *)(this + 0x120) = 0;
  UNLOCK();
  LOCK();
  *(undefined8 *)(this + 0x128) = 0;
  UNLOCK();
  pFVar4 = this + 0x100;
  while (*(long *)pFVar6 != 0) {
    puVar2 = *(ulong **)pFVar6;
    uVar7 = *puVar2;
    if (*puVar2 < puVar2[1]) {
      uVar7 = puVar2[1];
    }
    LOCK();
    puVar2[1] = uVar7;
    UNLOCK();
    LOCK();
    *puVar2 = 0;
    UNLOCK();
    lVar5 = *(long *)(*(long *)pFVar6 + 0x18);
    *(long *)(*(long *)pFVar6 + 0x18) = *(long *)pFVar4;
    LOCK();
    *(long *)pFVar4 = *(long *)pFVar6;
    UNLOCK();
    LOCK();
    *(long *)pFVar6 = lVar5;
    UNLOCK();
  }
  lVar5 = *(long *)(this + 0x100);
  local_48 = lVar5;
  for (; lVar5 != 0; lVar5 = *(long *)(lVar5 + 0x18)) {
    while (*(int *)(lVar5 + 0x28) == 2) {
      lVar5 = *(long *)(lVar5 + 0x18);
      *plVar8 = lVar5;
      if (lVar5 == 0) goto LAB_0010299b;
    }
    plVar8 = (long *)(lVar5 + 0x18);
  }
LAB_0010299b:
  LOCK();
  *(long *)pFVar4 = local_48;
  UNLOCK();
  pFVar6 = this + 0x78;
  do {
    LOCK();
    *(long *)pFVar6 = 0;
    UNLOCK();
    LOCK();
    *(long *)(pFVar6 + 0x40) = 0;
    UNLOCK();
    pFVar6 = pFVar6 + 8;
  } while (pFVar6 != this + 0xb8);
  plVar8 = *(long **)(this + 0x130);
  plVar3 = *(long **)(this + 0x138);
  if (plVar3 != plVar8) {
    do {
      while( true ) {
        lVar5 = *plVar8;
        if (this != *(FastAllocator **)(lVar5 + 8)) break;
        embree::MutexSys::lock();
        if (this == *(FastAllocator **)(lVar5 + 8)) {
          LOCK();
          plVar1 = (long *)(*(long *)(lVar5 + 8) + 0x118);
          *plVar1 = *plVar1 + *(long *)(lVar5 + 0xa8) + *(long *)(lVar5 + 0x68);
          UNLOCK();
          LOCK();
          plVar1 = (long *)(*(long *)(lVar5 + 8) + 0x120);
          *plVar1 = *plVar1 + (((*(long *)(lVar5 + 0x98) + *(long *)(lVar5 + 0x58)) -
                               *(long *)(lVar5 + 0x50)) - *(long *)(lVar5 + 0x90));
          UNLOCK();
          LOCK();
          plVar1 = (long *)(*(long *)(lVar5 + 8) + 0x128);
          *plVar1 = *plVar1 + *(long *)(lVar5 + 0xb0) + *(long *)(lVar5 + 0x70);
          UNLOCK();
          *(undefined8 *)(lVar5 + 0x48) = 0;
          *(undefined8 *)(lVar5 + 0x58) = 0;
          *(undefined8 *)(lVar5 + 0x50) = 0;
          *(undefined8 *)(lVar5 + 0x68) = 0;
          *(undefined8 *)(lVar5 + 0x70) = 0;
          *(undefined8 *)(lVar5 + 0x60) = 0;
          *(undefined8 *)(lVar5 + 0x88) = 0;
          *(undefined8 *)(lVar5 + 0x98) = 0;
          *(undefined8 *)(lVar5 + 0x90) = 0;
          *(undefined8 *)(lVar5 + 0xa8) = 0;
          *(undefined8 *)(lVar5 + 0xb0) = 0;
          *(undefined8 *)(lVar5 + 0xa0) = 0;
          LOCK();
          *(undefined8 *)(lVar5 + 8) = 0;
          UNLOCK();
        }
        plVar8 = plVar8 + 1;
        embree::MutexSys::unlock();
        if (plVar3 == plVar8) goto LAB_00102af0;
      }
      plVar8 = plVar8 + 1;
    } while (plVar3 != plVar8);
LAB_00102af0:
    if (*(long *)(this + 0x130) != *(long *)(this + 0x138)) {
      *(long *)(this + 0x138) = *(long *)(this + 0x130);
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::FastAllocator::malloc(unsigned long&, unsigned long, bool) */

void __thiscall
embree::FastAllocator::malloc(FastAllocator *this,ulong *param_1,ulong param_2,bool param_3)

{
  FastAllocator *pFVar1;
  long lVar2;
  FastAllocator *pFVar3;
  FastAllocator FVar4;
  ulong *puVar5;
  undefined8 uVar6;
  long *plVar7;
  long lVar8;
  ulong uVar9;
  ulong uVar10;
  undefined8 *puVar11;
  ulong uVar12;
  void *pvVar13;
  long in_FS_OFFSET;
  bool local_41;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar8 = param_2 - 1;
  if (param_3) {
LAB_00102b98:
    uVar9 = embree::TaskScheduler::threadID();
    lVar2 = (uVar9 & *(ulong *)(this + 8)) * 8;
    pFVar3 = this + lVar2 + 0x78;
    puVar5 = *(ulong **)pFVar3;
    if (puVar5 != (ulong *)0x0) {
      puVar11 = *(undefined8 **)this;
      if (puVar11 != (undefined8 *)0x0) {
        puVar11 = puVar11 + 0xa9;
      }
      uVar12 = -param_2 & lVar8 + *param_1;
      LOCK();
      uVar9 = *puVar5;
      *puVar5 = *puVar5 + uVar12;
      UNLOCK();
      if (uVar9 <= puVar5[2]) {
        uVar10 = puVar5[2] - uVar9;
        if (uVar12 < puVar5[2] - uVar9) {
          uVar10 = uVar12;
        }
        *param_1 = uVar10;
        if ((puVar11 != (undefined8 *)0x0) && (puVar5[1] < uVar10 + uVar9)) {
          uVar12 = puVar5[1];
          if (puVar5[1] <= uVar9) {
            uVar12 = uVar9;
          }
          (**(code **)*puVar11)(puVar11,(uVar10 + uVar9) - uVar12,1);
        }
        if ((long)puVar5 + uVar9 + 0x40 != 0) goto LAB_00102ee0;
      }
      if (this[0x109] == (FastAllocator)0x0) goto LAB_001038b8;
    }
    if (0x1fffc0 < *param_1) goto LAB_001038b8;
    if (*(long *)(this + 0x100) == 0) {
      embree::MutexSys::lock();
      if (puVar5 == *(ulong **)pFVar3) {
        uVar9 = lVar8 + *param_1 & -param_2;
        uVar12 = *(ulong *)(this + 0x28);
        if (*(ulong *)(this + 0x20) < *(ulong *)(this + 0x28)) {
          uVar12 = *(ulong *)(this + 0x20);
        }
        if (uVar9 < uVar12) {
          uVar9 = uVar12;
        }
        uVar6 = *(undefined8 *)(this + lVar2 + 0xb8);
        FVar4 = this[0x108];
        plVar7 = *(long **)this;
        if (*(int *)(this + 0x148) == 1) {
          if (uVar9 < 0x1fffc0) {
LAB_00102d00:
            if (plVar7 != (long *)0x0) {
              (**(code **)(*plVar7 + 0x20))(plVar7,uVar9 + 0x80,0);
            }
            if (FVar4 == (FastAllocator)0x0) {
              puVar11 = (undefined8 *)embree::alignedMalloc(uVar9 + 0x40,0x40);
            }
            else {
              puVar11 = (undefined8 *)(**(code **)(*plVar7 + 0x38))(plVar7,uVar9 + 0x40,0x40);
            }
            *puVar11 = 0;
            puVar11[1] = uVar9;
            puVar11[2] = uVar9;
LAB_00102d5d:
            puVar11[4] = 0x40;
            *(undefined4 *)(puVar11 + 5) = 0;
            puVar11[3] = uVar6;
            *(undefined1 *)((long)puVar11 + 0x2c) = 0;
          }
          else {
            uVar9 = uVar9 + 0x103f & 0xfffffffffffff000;
            if (plVar7 != (long *)0x0) {
              (**(code **)(*plVar7 + 0x20))(plVar7,uVar9,0);
            }
            puVar11 = (undefined8 *)embree::os_malloc(uVar9,&local_41);
            *puVar11 = 0;
            puVar11[1] = uVar9 - 0x40;
            puVar11[2] = uVar9 - 0x40;
            puVar11[3] = uVar6;
            puVar11[4] = 0;
            *(undefined4 *)(puVar11 + 5) = 1;
            *(bool *)((long)puVar11 + 0x2c) = local_41;
          }
        }
        else {
          puVar11 = (undefined8 *)0x0;
          if (*(int *)(this + 0x148) == 0) {
            if (uVar9 != 0x3fffc0) goto LAB_00102d00;
            if (plVar7 != (long *)0x0) {
              (**(code **)(*plVar7 + 0x20))(plVar7,0x400040);
            }
            if (FVar4 == (FastAllocator)0x0) {
              puVar11 = (undefined8 *)embree::alignedMalloc(0x400000,0x40);
            }
            else {
              puVar11 = (undefined8 *)(**(code **)(*plVar7 + 0x38))(plVar7,0x400000,0x40);
            }
            pvVar13 = (void *)((ulong)puVar11 & 0xffffffffffe00000);
            embree::os_advise(pvVar13,0x200000);
            embree::os_advise((void *)((long)pvVar13 + 0x200000),0x200000);
            embree::os_advise((void *)((long)pvVar13 + 0x400000),0x200000);
            *puVar11 = 0;
            puVar11[1] = 0x3fffc0;
            puVar11[2] = 0x3fffc0;
            goto LAB_00102d5d;
          }
        }
        LOCK();
        *(undefined8 **)pFVar3 = puVar11;
        UNLOCK();
        LOCK();
        *(undefined8 **)(this + lVar2 + 0xb8) = puVar11;
        UNLOCK();
      }
      embree::MutexSys::unlock();
    }
    else {
      embree::MutexSys::lock();
      if (puVar5 == *(ulong **)pFVar3) {
        if (*(long *)(this + 0x100) == 0) {
          LOCK();
          pFVar1 = this + 0x110;
          lVar2 = *(long *)pFVar1;
          *(long *)pFVar1 = *(long *)pFVar1 + 1;
          UNLOCK();
          uVar9 = 0x10;
          if (lVar2 + 1U < 0x11) {
            uVar9 = lVar2 + 1U;
          }
          uVar9 = *(long *)(this + 0x20) << ((byte)uVar9 & 0x3f);
          uVar6 = *(undefined8 *)(this + 0xf8);
          if (*(ulong *)(this + 0x28) < uVar9) {
            uVar9 = *(ulong *)(this + 0x28);
          }
          FVar4 = this[0x108];
          plVar7 = *(long **)this;
          if (*(int *)(this + 0x148) == 1) {
            if (uVar9 < 0x1fffc0) {
LAB_001030c6:
              if (plVar7 != (long *)0x0) {
                (**(code **)(*plVar7 + 0x20))(plVar7,uVar9 + 0x80,0);
              }
              if (FVar4 == (FastAllocator)0x0) {
                puVar11 = (undefined8 *)embree::alignedMalloc(uVar9 + 0x40,0x40);
              }
              else {
                puVar11 = (undefined8 *)(**(code **)(*plVar7 + 0x38))(plVar7,uVar9 + 0x40,0x40);
              }
              *puVar11 = 0;
              puVar11[1] = uVar9;
              puVar11[2] = uVar9;
LAB_0010311a:
              puVar11[4] = 0x40;
              *(undefined4 *)(puVar11 + 5) = 0;
              puVar11[3] = uVar6;
              *(undefined1 *)((long)puVar11 + 0x2c) = 0;
            }
            else {
              uVar9 = uVar9 + 0x103f & 0xfffffffffffff000;
              if (plVar7 != (long *)0x0) {
                (**(code **)(*plVar7 + 0x20))(plVar7,uVar9,0);
              }
              puVar11 = (undefined8 *)embree::os_malloc(uVar9,&local_41);
              *puVar11 = 0;
              puVar11[1] = uVar9 - 0x40;
              puVar11[2] = uVar9 - 0x40;
              puVar11[3] = uVar6;
              puVar11[4] = 0;
              *(undefined4 *)(puVar11 + 5) = 1;
              *(bool *)((long)puVar11 + 0x2c) = local_41;
            }
          }
          else {
            puVar11 = (undefined8 *)0x0;
            if (*(int *)(this + 0x148) == 0) {
              if (uVar9 != 0x3fffc0) goto LAB_001030c6;
              if (plVar7 != (long *)0x0) {
                (**(code **)(*plVar7 + 0x20))(plVar7,0x400040);
              }
              if (FVar4 == (FastAllocator)0x0) {
                puVar11 = (undefined8 *)embree::alignedMalloc(0x400000,0x40);
              }
              else {
                puVar11 = (undefined8 *)(**(code **)(*plVar7 + 0x38))(plVar7,0x400000,0x40);
              }
              pvVar13 = (void *)((ulong)puVar11 & 0xffffffffffe00000);
              embree::os_advise(pvVar13,0x200000);
              embree::os_advise((void *)((long)pvVar13 + 0x200000),0x200000);
              embree::os_advise((void *)((long)pvVar13 + 0x400000),0x200000);
              *puVar11 = 0;
              puVar11[1] = 0x3fffc0;
              puVar11[2] = 0x3fffc0;
              goto LAB_0010311a;
            }
          }
          LOCK();
          *(undefined8 **)pFVar3 = puVar11;
          UNLOCK();
          LOCK();
          *(undefined8 **)(this + 0xf8) = puVar11;
          UNLOCK();
        }
        else {
          uVar6 = *(undefined8 *)(*(long *)(this + 0x100) + 0x18);
          *(undefined8 *)(*(long *)(this + 0x100) + 0x18) = *(undefined8 *)(this + 0xf8);
          LOCK();
          *(undefined8 *)(this + 0xf8) = *(undefined8 *)(this + 0x100);
          UNLOCK();
          LOCK();
          *(undefined8 *)pFVar3 = *(undefined8 *)(this + 0x100);
          UNLOCK();
          LOCK();
          *(undefined8 *)(this + 0x100) = uVar6;
          UNLOCK();
        }
      }
      embree::MutexSys::unlock();
    }
    goto LAB_00102b98;
  }
  do {
    uVar9 = embree::TaskScheduler::threadID();
    lVar2 = (uVar9 & *(ulong *)(this + 8)) * 8;
    pFVar3 = this + lVar2 + 0x78;
    puVar5 = *(ulong **)pFVar3;
    if (puVar5 != (ulong *)0x0) {
      puVar11 = *(undefined8 **)this;
      if (puVar11 != (undefined8 *)0x0) {
        puVar11 = puVar11 + 0xa9;
      }
      uVar9 = -param_2 & lVar8 + *param_1;
      if (*puVar5 + uVar9 <= puVar5[2]) {
        LOCK();
        uVar12 = *puVar5;
        *puVar5 = *puVar5 + uVar9;
        UNLOCK();
        if ((uVar9 + uVar12 <= puVar5[2]) && (uVar12 <= puVar5[2])) {
          uVar10 = puVar5[2] - uVar12;
          if (uVar9 < puVar5[2] - uVar12) {
            uVar10 = uVar9;
          }
          *param_1 = uVar10;
          if (puVar11 != (undefined8 *)0x0) {
            if (uVar10 + uVar12 <= puVar5[1]) {
              if ((long)puVar5 + uVar12 + 0x40 == 0) goto LAB_00102dc5;
              goto LAB_00102ee0;
            }
            uVar9 = puVar5[1];
            if (puVar5[1] < uVar12) {
              uVar9 = uVar12;
            }
            (**(code **)*puVar11)(puVar11,(uVar10 + uVar12) - uVar9,1);
          }
          if ((long)puVar5 + uVar12 + 0x40 != 0) {
LAB_00102ee0:
            if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
              return;
            }
                    /* WARNING: Subroutine does not return */
            __stack_chk_fail();
          }
        }
      }
LAB_00102dc5:
      if (this[0x109] == (FastAllocator)0x0) {
LAB_001038b8:
                    /* WARNING: Subroutine does not return */
        abort();
      }
    }
    if (0x1fffc0 < *param_1) goto LAB_001038b8;
    if (*(long *)(this + 0x100) == 0) {
      embree::MutexSys::lock();
      if (puVar5 == *(ulong **)pFVar3) {
        uVar12 = lVar8 + *param_1 & -param_2;
        uVar9 = *(ulong *)(this + 0x28);
        if (*(ulong *)(this + 0x20) < *(ulong *)(this + 0x28)) {
          uVar9 = *(ulong *)(this + 0x20);
        }
        if (uVar12 < uVar9) {
          uVar12 = uVar9;
        }
        uVar6 = *(undefined8 *)(this + lVar2 + 0xb8);
        FVar4 = this[0x108];
        plVar7 = *(long **)this;
        if (*(int *)(this + 0x148) == 1) {
          if (uVar12 < 0x1fffc0) {
LAB_001031a6:
            if (plVar7 != (long *)0x0) {
              (**(code **)(*plVar7 + 0x20))(plVar7,uVar12 + 0x80,0);
            }
            if (FVar4 == (FastAllocator)0x0) {
              puVar11 = (undefined8 *)embree::alignedMalloc(uVar12 + 0x40,0x40);
            }
            else {
              puVar11 = (undefined8 *)(**(code **)(*plVar7 + 0x38))(plVar7,uVar12 + 0x40,0x40);
            }
            *puVar11 = 0;
            puVar11[1] = uVar12;
            puVar11[2] = uVar12;
            puVar11[3] = uVar6;
            puVar11[4] = 0x40;
            *(undefined4 *)(puVar11 + 5) = 0;
            *(undefined1 *)((long)puVar11 + 0x2c) = 0;
          }
          else {
            uVar9 = uVar12 + 0x103f & 0xfffffffffffff000;
            if (plVar7 != (long *)0x0) {
              (**(code **)(*plVar7 + 0x20))(plVar7,uVar9,0);
            }
            puVar11 = (undefined8 *)embree::os_malloc(uVar9,&local_41);
            *puVar11 = 0;
            puVar11[1] = uVar9 - 0x40;
            puVar11[2] = uVar9 - 0x40;
            puVar11[3] = uVar6;
            puVar11[4] = 0;
            *(undefined4 *)(puVar11 + 5) = 1;
            *(bool *)((long)puVar11 + 0x2c) = local_41;
          }
        }
        else {
          puVar11 = (undefined8 *)0x0;
          if (*(int *)(this + 0x148) == 0) {
            if (uVar12 != 0x3fffc0) goto LAB_001031a6;
            if (plVar7 != (long *)0x0) {
              (**(code **)(*plVar7 + 0x20))(plVar7,0x400040,0);
            }
            if (FVar4 == (FastAllocator)0x0) {
              puVar11 = (undefined8 *)embree::alignedMalloc(0x400000,0x40);
            }
            else {
              puVar11 = (undefined8 *)(**(code **)(*plVar7 + 0x38))(plVar7,0x400000,0x40);
            }
            pvVar13 = (void *)((ulong)puVar11 & 0xffffffffffe00000);
            embree::os_advise(pvVar13,0x200000);
            embree::os_advise((void *)((long)pvVar13 + 0x200000),0x200000);
            embree::os_advise((void *)((long)pvVar13 + 0x400000),0x200000);
            *puVar11 = 0;
            puVar11[1] = 0x3fffc0;
            puVar11[2] = 0x3fffc0;
            puVar11[3] = uVar6;
            puVar11[4] = 0x40;
            *(undefined4 *)(puVar11 + 5) = 0;
            *(undefined1 *)((long)puVar11 + 0x2c) = 0;
          }
        }
        LOCK();
        *(undefined8 **)pFVar3 = puVar11;
        UNLOCK();
        LOCK();
        *(undefined8 **)(this + lVar2 + 0xb8) = puVar11;
        UNLOCK();
      }
      embree::MutexSys::unlock();
    }
    else {
      embree::MutexSys::lock();
      if (puVar5 == *(ulong **)pFVar3) {
        if (*(long *)(this + 0x100) == 0) {
          LOCK();
          pFVar1 = this + 0x110;
          lVar2 = *(long *)pFVar1;
          *(long *)pFVar1 = *(long *)pFVar1 + 1;
          UNLOCK();
          uVar9 = 0x10;
          if (lVar2 + 1U < 0x11) {
            uVar9 = lVar2 + 1U;
          }
          uVar12 = *(long *)(this + 0x20) << ((byte)uVar9 & 0x3f);
          uVar9 = *(ulong *)(this + 0x28);
          if (uVar12 <= *(ulong *)(this + 0x28)) {
            uVar9 = uVar12;
          }
          uVar6 = *(undefined8 *)(this + 0xf8);
          FVar4 = this[0x108];
          plVar7 = *(long **)this;
          if (*(int *)(this + 0x148) == 1) {
            if (uVar9 < 0x1fffc0) {
LAB_00103617:
              if (plVar7 != (long *)0x0) {
                (**(code **)(*plVar7 + 0x20))(plVar7,uVar9 + 0x80,0);
              }
              if (FVar4 == (FastAllocator)0x0) {
                puVar11 = (undefined8 *)embree::alignedMalloc(uVar9 + 0x40,0x40);
              }
              else {
                puVar11 = (undefined8 *)(**(code **)(*plVar7 + 0x38))(plVar7,uVar9 + 0x40,0x40);
              }
              *puVar11 = 0;
              puVar11[1] = uVar9;
              puVar11[2] = uVar9;
              puVar11[3] = uVar6;
              puVar11[4] = 0x40;
              *(undefined4 *)(puVar11 + 5) = 0;
              *(undefined1 *)((long)puVar11 + 0x2c) = 0;
            }
            else {
              uVar9 = uVar9 + 0x103f & 0xfffffffffffff000;
              if (plVar7 != (long *)0x0) {
                (**(code **)(*plVar7 + 0x20))(plVar7,uVar9,0);
              }
              puVar11 = (undefined8 *)embree::os_malloc(uVar9,&local_41);
              *puVar11 = 0;
              puVar11[1] = uVar9 - 0x40;
              puVar11[2] = uVar9 - 0x40;
              puVar11[3] = uVar6;
              puVar11[4] = 0;
              *(undefined4 *)(puVar11 + 5) = 1;
              *(bool *)((long)puVar11 + 0x2c) = local_41;
            }
          }
          else {
            puVar11 = (undefined8 *)0x0;
            if (*(int *)(this + 0x148) == 0) {
              if (uVar9 != 0x3fffc0) goto LAB_00103617;
              if (plVar7 != (long *)0x0) {
                (**(code **)(*plVar7 + 0x20))(plVar7,0x400040,0);
              }
              if (FVar4 == (FastAllocator)0x0) {
                puVar11 = (undefined8 *)embree::alignedMalloc(0x400000,0x40);
              }
              else {
                puVar11 = (undefined8 *)(**(code **)(*plVar7 + 0x38))(plVar7,0x400000,0x40);
              }
              pvVar13 = (void *)((ulong)puVar11 & 0xffffffffffe00000);
              embree::os_advise(pvVar13,0x200000);
              embree::os_advise((void *)((long)pvVar13 + 0x200000),0x200000);
              embree::os_advise((void *)((long)pvVar13 + 0x400000),0x200000);
              *puVar11 = 0;
              puVar11[1] = 0x3fffc0;
              puVar11[2] = 0x3fffc0;
              puVar11[3] = uVar6;
              puVar11[4] = 0x40;
              *(undefined4 *)(puVar11 + 5) = 0;
              *(undefined1 *)((long)puVar11 + 0x2c) = 0;
            }
          }
          LOCK();
          *(undefined8 **)pFVar3 = puVar11;
          UNLOCK();
          LOCK();
          *(undefined8 **)(this + 0xf8) = puVar11;
          UNLOCK();
        }
        else {
          uVar6 = *(undefined8 *)(*(long *)(this + 0x100) + 0x18);
          *(undefined8 *)(*(long *)(this + 0x100) + 0x18) = *(undefined8 *)(this + 0xf8);
          LOCK();
          *(undefined8 *)(this + 0xf8) = *(undefined8 *)(this + 0x100);
          UNLOCK();
          LOCK();
          *(undefined8 *)pFVar3 = *(undefined8 *)(this + 0x100);
          UNLOCK();
          LOCK();
          *(undefined8 *)(this + 0x100) = uVar6;
          UNLOCK();
        }
      }
      embree::MutexSys::unlock();
    }
  } while( true );
}



/* void std::vector<embree::FastAllocator::ThreadLocal2*,
   std::allocator<embree::FastAllocator::ThreadLocal2*>
   >::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*
   const&>(__gnu_cxx::__normal_iterator<embree::FastAllocator::ThreadLocal2**,
   std::vector<embree::FastAllocator::ThreadLocal2*,
   std::allocator<embree::FastAllocator::ThreadLocal2*> > >, embree::FastAllocator::ThreadLocal2*
   const&) */

void __thiscall
std::
vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>::
_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
          (vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
           *this,void *param_2,undefined8 *param_3)

{
  void *__src;
  ulong uVar1;
  void *pvVar2;
  void *__dest;
  size_t __n;
  long lVar3;
  ulong uVar4;
  size_t __n_00;
  
  pvVar2 = *(void **)(this + 8);
  __src = *(void **)this;
  uVar1 = (long)pvVar2 - (long)__src >> 3;
  if (uVar1 == 0xfffffffffffffff) {
                    /* WARNING: Subroutine does not return */
    std::__throw_length_error("vector::_M_realloc_insert");
  }
  __n = (long)param_2 - (long)__src;
  if (__src == pvVar2) {
    if (0xfffffffffffffffe < uVar1) goto LAB_001039c0;
    uVar4 = 0xfffffffffffffff;
    if (uVar1 + 1 < 0x1000000000000000) {
      uVar4 = uVar1 + 1;
    }
    uVar4 = uVar4 << 3;
  }
  else {
    uVar4 = uVar1 * 2;
    if (uVar4 < uVar1) {
LAB_001039c0:
      uVar4 = 0x7ffffffffffffff8;
    }
    else {
      if (uVar4 == 0) {
        lVar3 = 0;
        __dest = (void *)0x0;
        goto LAB_00103949;
      }
      if (0xfffffffffffffff < uVar4) {
        uVar4 = 0xfffffffffffffff;
      }
      uVar4 = uVar4 * 8;
    }
  }
  __dest = operator_new(uVar4);
  lVar3 = uVar4 + (long)__dest;
LAB_00103949:
  *(undefined8 *)((long)__dest + __n) = *param_3;
  if (0 < (long)__n) {
    memmove(__dest,__src,__n);
  }
  __n_00 = (long)pvVar2 - (long)param_2;
  pvVar2 = (void *)((long)__dest + __n + 8);
  if (0 < (long)__n_00) {
    pvVar2 = memmove(pvVar2,param_2,__n_00);
  }
  if (__src != (void *)0x0) {
    operator_delete(__src,*(long *)(this + 0x10) - (long)__src);
  }
  *(void **)this = __dest;
  *(size_t *)(this + 8) = __n_00 + (long)pvVar2;
  *(long *)(this + 0x10) = lVar3;
  return;
}



/* void std::vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >,
   std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> > >
   >::_M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >
   >(__gnu_cxx::__normal_iterator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >*,
   std::vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >,
   std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> > > > >,
   std::unique_ptr<embree::FastAllocator::ThreadLocal2,
   std::default_delete<embree::FastAllocator::ThreadLocal2> >&&) */

void __thiscall
std::
vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
::
_M_realloc_insert<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>
          (vector<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>,std::allocator<std::unique_ptr<embree::FastAllocator::ThreadLocal2,std::default_delete<embree::FastAllocator::ThreadLocal2>>>>
           *this,undefined8 *param_2,undefined8 *param_3)

{
  undefined8 *puVar1;
  undefined8 uVar2;
  ulong uVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  ulong uVar8;
  undefined8 *puVar9;
  long lVar10;
  
  puVar5 = *(undefined8 **)(this + 8);
  puVar1 = *(undefined8 **)this;
  uVar3 = (long)puVar5 - (long)puVar1 >> 3;
  if (uVar3 == 0xfffffffffffffff) {
                    /* WARNING: Subroutine does not return */
    std::__throw_length_error("vector::_M_realloc_insert");
  }
  if (puVar1 == puVar5) {
    if (0xfffffffffffffffe < uVar3) goto LAB_00103b50;
    uVar8 = 0xfffffffffffffff;
    if (uVar3 + 1 < 0x1000000000000000) {
      uVar8 = uVar3 + 1;
    }
    uVar8 = uVar8 << 3;
LAB_00103b5a:
    puVar7 = (undefined8 *)operator_new(uVar8);
    lVar10 = uVar8 + (long)puVar7;
    *(undefined8 *)((long)puVar7 + ((long)param_2 - (long)puVar1)) = *param_3;
    puVar4 = puVar7 + 1;
    *param_3 = 0;
    if (param_2 != puVar1) {
LAB_00103ac1:
      puVar4 = puVar1;
      puVar9 = puVar7;
      do {
        uVar2 = *puVar4;
        puVar4 = puVar4 + 1;
        *puVar9 = uVar2;
        puVar9 = puVar9 + 1;
      } while (puVar4 != param_2);
      puVar4 = (undefined8 *)((long)puVar7 + (long)param_2 + (8 - (long)puVar1));
    }
    if (param_2 == puVar5) goto LAB_00103b14;
  }
  else {
    uVar8 = uVar3 * 2;
    if (uVar8 < uVar3) {
LAB_00103b50:
      uVar8 = 0x7ffffffffffffff8;
      goto LAB_00103b5a;
    }
    if (uVar8 != 0) {
      if (0xfffffffffffffff < uVar8) {
        uVar8 = 0xfffffffffffffff;
      }
      uVar8 = uVar8 * 8;
      goto LAB_00103b5a;
    }
    lVar10 = 0;
    puVar7 = (undefined8 *)0x0;
    *(undefined8 *)((long)param_2 - (long)puVar1) = *param_3;
    puVar4 = (undefined8 *)&DAT_00000008;
    *param_3 = 0;
    if (param_2 != puVar1) goto LAB_00103ac1;
  }
  puVar9 = (undefined8 *)(((long)puVar5 - (long)param_2) + (long)puVar4);
  puVar5 = puVar4;
  do {
    uVar2 = *param_2;
    puVar6 = puVar5 + 1;
    param_2 = param_2 + 1;
    *puVar5 = uVar2;
    puVar5 = puVar6;
    puVar4 = puVar9;
  } while (puVar9 != puVar6);
LAB_00103b14:
  if (puVar1 != (undefined8 *)0x0) {
    operator_delete(puVar1,*(long *)(this + 0x10) - (long)puVar1);
  }
  *(undefined8 **)this = puVar7;
  *(undefined8 **)(this + 8) = puVar4;
  *(long *)(this + 0x10) = lVar10;
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderSmall::attachBuildRefs(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >*) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderSmall::
attachBuildRefs(RefBuilderSmall *this,BVHNBuilderTwoLevel *param_1)

{
  FastAllocator *this_00;
  BVHNBuilderTwoLevel *pBVar1;
  long *plVar2;
  int iVar3;
  long lVar4;
  ulong *puVar5;
  ulong uVar6;
  undefined8 *puVar7;
  undefined8 uVar8;
  MutexSys *this_01;
  uint uVar9;
  ulong uVar10;
  ulong uVar11;
  long lVar12;
  ulong uVar13;
  int *piVar14;
  vector_t *pvVar15;
  long lVar16;
  ulong uVar17;
  ulong *puVar18;
  long in_FS_OFFSET;
  ulong local_130;
  ulong local_128;
  undefined8 uStack_120;
  undefined8 *local_118;
  bool local_110 [8];
  vector_t *local_108;
  vector_t *local_100;
  void *local_f8;
  undefined8 local_e8 [2];
  ulong local_d8;
  undefined8 uStack_d0;
  long local_a8;
  long local_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  uint local_68;
  uint uStack_64;
  uint uStack_60;
  uint uStack_5c;
  uint local_58;
  uint uStack_54;
  uint uStack_50;
  uint uStack_4c;
  long local_40;
  
  uVar17 = *(ulong *)(this + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar12 = *(long *)(*(long *)(*(long *)(param_1 + 0x30) + 0x1e0) + uVar17 * 8);
  if ((lVar12 != 0) && (*(char *)(lVar12 + 0x3c) != '\x14')) {
    lVar12 = 0;
  }
  local_118 = *(undefined8 **)(*(long *)(param_1 + 0x30) + 0x188);
  pvVar15 = (vector_t *)(ulong)*(uint *)(lVar12 + 0x20);
  local_110[0] = false;
  local_108 = (vector_t *)0x0;
  local_100 = (vector_t *)0x0;
  local_f8 = (void *)0x0;
  if (local_118 != (undefined8 *)0x0) {
    local_118 = local_118 + 0xa9;
  }
  if (pvVar15 != (vector_t *)0x0) {
    uVar17 = (long)pvVar15 << 5;
    (**(code **)*local_118)(local_118,uVar17,0);
    if (uVar17 < 0x1c00000) {
      local_f8 = (void *)embree::alignedMalloc(uVar17,0x20);
    }
    else {
      local_f8 = (void *)embree::os_malloc(uVar17,local_110);
    }
    uVar17 = *(ulong *)(this + 8);
    local_100 = pvVar15;
  }
  local_108 = local_100;
  embree::sse2::createPrimRefArray
            ((Geometry *)local_e8,(uint)lVar12,uVar17,pvVar15,(BuildProgressMonitor *)&local_118);
  if (local_a0 != local_a8) {
    uVar17 = 0;
    do {
      lVar12 = *(long *)(param_1 + 0x28);
      lVar4 = *(long *)(in_FS_OFFSET + lRam0000000000103f91);
      this_00 = (FastAllocator *)(lVar12 + 0x78);
      if (lVar4 == 0) {
        this_01 = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
                    /* WARNING: Subroutine does not return */
        embree::MutexSys::MutexSys(this_01);
      }
      puVar18 = (ulong *)(lVar4 + 0x80);
      if (*(char *)(lVar12 + 0x182) != '\0') {
        puVar18 = (ulong *)(lVar4 + 0x40);
      }
      local_130 = 0x50;
      uVar13 = *puVar18;
      if (this_00 != *(FastAllocator **)(uVar13 + 8)) {
        embree::MutexSys::lock();
        if (*(long *)(uVar13 + 8) != 0) {
          LOCK();
          plVar2 = (long *)(*(long *)(uVar13 + 8) + 0x118);
          *plVar2 = *plVar2 + *(long *)(uVar13 + 0xa8) + *(long *)(uVar13 + 0x68);
          UNLOCK();
          LOCK();
          plVar2 = (long *)(*(long *)(uVar13 + 8) + 0x120);
          *plVar2 = *plVar2 + (((*(long *)(uVar13 + 0x98) + *(long *)(uVar13 + 0x58)) -
                               *(long *)(uVar13 + 0x50)) - *(long *)(uVar13 + 0x90));
          UNLOCK();
          LOCK();
          plVar2 = (long *)(*(long *)(uVar13 + 8) + 0x128);
          *plVar2 = *plVar2 + *(long *)(uVar13 + 0xb0) + *(long *)(uVar13 + 0x70);
          UNLOCK();
        }
        *(undefined8 *)(uVar13 + 0x48) = 0;
        *(undefined8 *)(uVar13 + 0x58) = 0;
        *(undefined8 *)(uVar13 + 0x50) = 0;
        *(undefined8 *)(uVar13 + 0x68) = 0;
        *(undefined8 *)(uVar13 + 0x70) = 0;
        *(undefined8 *)(uVar13 + 0x60) = 0;
        if (this_00 == (FastAllocator *)0x0) {
          *(undefined8 *)(uVar13 + 0x88) = 0;
          uVar8 = 0;
          *(undefined8 *)(uVar13 + 0x98) = 0;
          *(undefined8 *)(uVar13 + 0x90) = 0;
          *(undefined8 *)(uVar13 + 0xa8) = 0;
          *(undefined8 *)(uVar13 + 0xb0) = 0;
        }
        else {
          uVar8 = *(undefined8 *)(lVar12 + 0x88);
          *(undefined8 *)(uVar13 + 0x88) = 0;
          *(undefined8 *)(uVar13 + 0x98) = 0;
          *(undefined8 *)(uVar13 + 0x60) = uVar8;
          *(undefined8 *)(uVar13 + 0x90) = 0;
          *(undefined8 *)(uVar13 + 0xa8) = 0;
          *(undefined8 *)(uVar13 + 0xb0) = 0;
          *(undefined8 *)(uVar13 + 0xa0) = 0;
          uVar8 = *(undefined8 *)(lVar12 + 0x88);
        }
        *(undefined8 *)(uVar13 + 0xa0) = uVar8;
        LOCK();
        *(FastAllocator **)(uVar13 + 8) = this_00;
        UNLOCK();
        local_128 = uVar13;
        embree::MutexSys::lock();
        puVar5 = *(ulong **)(lVar12 + 0x1b0);
        if (puVar5 == *(ulong **)(lVar12 + 0x1b8)) {
          std::
          vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
          ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                    ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                      *)(lVar12 + 0x1a8),puVar5,&local_128);
        }
        else {
          *puVar5 = uVar13;
          *(long *)(lVar12 + 0x1b0) = *(long *)(lVar12 + 0x1b0) + 8;
        }
        embree::MutexSys::unlock();
        embree::MutexSys::unlock();
      }
      uVar11 = local_130;
      uVar13 = puVar18[2];
      puVar18[5] = puVar18[5] + local_130;
      uVar10 = (ulong)(-(int)uVar13 & 0xf);
      uVar6 = local_130 + uVar13 + uVar10;
      puVar18[2] = uVar6;
      if (puVar18[3] < uVar6) {
        puVar18[2] = uVar13;
        if (puVar18[4] < local_130 * 4) {
          puVar7 = (undefined8 *)FastAllocator::malloc(this_00,&local_130,0x40,false);
          uVar13 = (ulong)puVar7 | 9;
        }
        else {
          local_128 = puVar18[4];
          puVar7 = (undefined8 *)FastAllocator::malloc(this_00,&local_128,0x40,true);
          puVar18[1] = (ulong)puVar7;
          puVar18[6] = (puVar18[3] + puVar18[6]) - puVar18[2];
          puVar18[2] = uVar11;
          puVar18[3] = local_128;
          if (local_128 < uVar11) {
            puVar18[2] = 0;
            local_128 = puVar18[4];
            puVar7 = (undefined8 *)FastAllocator::malloc(this_00,&local_128,0x40,false);
            puVar18[1] = (ulong)puVar7;
            puVar18[6] = (puVar18[3] + puVar18[6]) - puVar18[2];
            puVar18[2] = uVar11;
            puVar18[3] = local_128;
            if (local_128 < uVar11) {
              puVar18[2] = 0;
              uVar13 = 9;
              puVar7 = (undefined8 *)0x0;
              goto LAB_0010417c;
            }
          }
          uVar13 = (ulong)puVar7 | 9;
        }
      }
      else {
        puVar18[6] = puVar18[6] + uVar10;
        puVar7 = (undefined8 *)((uVar6 - local_130) + puVar18[1]);
        uVar13 = (ulong)puVar7 | 9;
      }
LAB_0010417c:
      uVar6 = local_a0 - local_a8;
      local_98._0_4_ = 0;
      local_88._0_4_ = 0;
      local_78._0_4_ = 0;
      local_68 = 0xffffffff;
      local_58 = 0xffffffff;
      uStack_54 = 0xffffffff;
      uStack_50 = 0xffffffff;
      uStack_4c = 0xffffffff;
      uVar11 = uVar17;
      if (uVar17 < uVar6) {
        lVar12 = *(long *)(*(long *)(*(long *)(param_1 + 0x28) + 0x68) + 0x1e0);
        lVar16 = uVar17 * 0x20;
        local_68 = *(uint *)((long)local_f8 + lVar16 + 0xc);
        local_58 = *(uint *)((long)local_f8 + lVar16 + 0x1c);
        lVar4 = *(long *)(lVar12 + (ulong)local_68 * 8);
        piVar14 = (int *)((ulong)local_58 * *(long *)(lVar4 + 0x60) + *(long *)(lVar4 + 0x58));
        uVar9 = (uint)(*(ulong *)(lVar4 + 0x90) >> 2) & 0x3fffffff;
        uStack_90._4_4_ = *piVar14 * uVar9;
        local_88._0_4_ = piVar14[1] * uVar9;
        local_78._0_4_ = uVar9 * piVar14[2];
        uVar11 = uVar17 + 1;
        local_98._0_4_ = uStack_90._4_4_;
        if (uVar6 <= uVar17 + 1) goto LAB_001041de;
        uStack_64 = *(uint *)((long)local_f8 + lVar16 + 0x2c);
        uStack_54 = *(uint *)((long)local_f8 + lVar16 + 0x3c);
        lVar4 = *(long *)(lVar12 + (ulong)uStack_64 * 8);
        piVar14 = (int *)((ulong)uStack_54 * *(long *)(lVar4 + 0x60) + *(long *)(lVar4 + 0x58));
        uVar9 = (uint)(*(ulong *)(lVar4 + 0x90) >> 2) & 0x3fffffff;
        local_98 = CONCAT44(*piVar14 * uVar9,uStack_90._4_4_);
        uVar11 = uVar17 + 2;
        local_88 = CONCAT44(piVar14[1] * uVar9,(int)local_88);
        local_78 = CONCAT44(uVar9 * piVar14[2],(int)local_78);
        if (uVar6 <= uVar11) goto LAB_001041fb;
        uStack_60 = *(uint *)((long)local_f8 + lVar16 + 0x4c);
        uStack_50 = *(uint *)((long)local_f8 + lVar16 + 0x5c);
        lVar4 = *(long *)(lVar12 + (ulong)uStack_60 * 8);
        piVar14 = (int *)((ulong)uStack_50 * *(long *)(lVar4 + 0x60) + *(long *)(lVar4 + 0x58));
        uVar9 = (uint)(*(ulong *)(lVar4 + 0x90) >> 2) & 0x3fffffff;
        uStack_90._0_4_ = *piVar14 * uVar9;
        uVar11 = uVar17 + 3;
        uStack_80._0_4_ = piVar14[1] * uVar9;
        uStack_70._0_4_ = uVar9 * piVar14[2];
        if (uVar6 <= uVar11) goto LAB_00104218;
        uVar11 = uVar17 + 4;
        uStack_5c = *(uint *)((long)local_f8 + lVar16 + 0x6c);
        uStack_4c = *(uint *)((long)local_f8 + lVar16 + 0x7c);
        lVar12 = *(long *)(lVar12 + (ulong)uStack_5c * 8);
        piVar14 = (int *)((ulong)uStack_4c * *(long *)(lVar12 + 0x60) + *(long *)(lVar12 + 0x58));
        uVar9 = (uint)(*(ulong *)(lVar12 + 0x90) >> 2) & 0x3fffffff;
        uStack_90._4_4_ = *piVar14 * uVar9;
        uStack_80._4_4_ = piVar14[1] * uVar9;
        uStack_70._4_4_ = uVar9 * piVar14[2];
      }
      else {
LAB_001041de:
        local_98 = CONCAT44((int)local_98,(int)local_98);
        local_88 = CONCAT44((int)local_98,(int)local_88);
        local_78 = CONCAT44((int)local_98,(int)local_78);
        uStack_64 = local_68;
        uStack_90._4_4_ = (int)local_98;
LAB_001041fb:
        uStack_90._0_4_ = uStack_90._4_4_;
        uStack_80._0_4_ = uStack_90._4_4_;
        uStack_70._0_4_ = uStack_90._4_4_;
        uStack_60 = local_68;
LAB_00104218:
        uStack_80._4_4_ = uStack_90._4_4_;
        uStack_70._4_4_ = uStack_90._4_4_;
        uStack_5c = local_68;
      }
      *(uint *)(puVar7 + 8) = local_58;
      *(uint *)((long)puVar7 + 0x44) = uStack_54;
      *(uint *)(puVar7 + 9) = uStack_50;
      *(uint *)((long)puVar7 + 0x4c) = uStack_4c;
      *puVar7 = local_98;
      puVar7[1] = uStack_90;
      puVar7[2] = local_88;
      puVar7[3] = uStack_80;
      puVar7[4] = local_78;
      puVar7[5] = uStack_70;
      puVar7[6] = CONCAT44(uStack_64,local_68);
      puVar7[7] = CONCAT44(uStack_5c,uStack_60);
      uStack_120._0_4_ = (undefined4)local_e8[1];
      uStack_120 = CONCAT44((int)*(undefined8 *)(this + 8),(undefined4)uStack_120);
      uVar8 = uStack_120;
      local_128 = local_d8;
      uStack_120._0_4_ = (undefined4)uStack_d0;
      uStack_120 = CONCAT44(1,(undefined4)uStack_120);
      LOCK();
      pBVar1 = param_1 + 0x88;
      iVar3 = *(int *)pBVar1;
      *(int *)pBVar1 = *(int *)pBVar1 + 1;
      UNLOCK();
      puVar7 = (undefined8 *)((long)iVar3 * 0x40 + *(long *)(param_1 + 0x58));
      puVar7[4] = uVar13;
      *(undefined4 *)(puVar7 + 5) = 0;
      *puVar7 = local_e8[0];
      puVar7[1] = uVar8;
      puVar7[2] = local_d8;
      puVar7[3] = uStack_120;
      uVar17 = uVar11;
    } while (uVar11 < (ulong)(local_a0 - local_a8));
  }
  pvVar15 = local_100;
  if (local_f8 != (void *)0x0) {
    if ((ulong)((long)local_100 << 5) < 0x1c00000) {
      embree::alignedFree(local_f8);
    }
    else {
      embree::os_free(local_f8,(long)local_100 << 5,local_110[0]);
    }
  }
  if (pvVar15 != (vector_t *)0x0) {
    (**(code **)*local_118)(local_118,(long)pvVar15 * -0x20,1);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderSmall::attachBuildRefs(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >*) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderSmall::
attachBuildRefs(RefBuilderSmall *this,BVHNBuilderTwoLevel *param_1)

{
  FastAllocator *this_00;
  BVHNBuilderTwoLevel *pBVar1;
  long *plVar2;
  int iVar3;
  ulong *puVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  undefined4 *puVar8;
  undefined8 *puVar9;
  undefined8 uVar10;
  MutexSys *this_01;
  undefined4 *puVar11;
  undefined4 *puVar12;
  ulong uVar13;
  uint *puVar14;
  undefined4 *puVar15;
  undefined4 *puVar16;
  undefined4 *puVar17;
  undefined4 *puVar18;
  undefined4 *puVar19;
  undefined4 *puVar20;
  undefined4 *puVar21;
  ulong uVar22;
  ulong uVar23;
  long lVar24;
  long lVar25;
  vector_t *pvVar26;
  ulong uVar27;
  ulong *puVar28;
  long in_FS_OFFSET;
  undefined4 uVar29;
  undefined4 uVar30;
  undefined1 auVar31 [8];
  undefined4 uVar32;
  undefined4 uVar33;
  undefined4 uVar34;
  undefined4 uVar35;
  undefined4 uVar36;
  undefined4 uVar37;
  undefined4 uVar38;
  undefined4 uVar39;
  undefined4 uVar40;
  undefined4 uVar41;
  undefined4 uVar42;
  undefined4 uVar43;
  undefined4 uVar44;
  undefined4 uVar45;
  undefined4 uVar46;
  undefined4 uVar47;
  undefined4 uVar48;
  undefined4 uVar49;
  undefined4 uVar50;
  undefined4 uVar51;
  undefined4 uVar52;
  undefined4 uVar53;
  undefined4 uVar54;
  undefined4 uVar55;
  undefined4 uVar56;
  undefined4 uVar57;
  undefined4 uVar58;
  undefined4 uVar59;
  undefined4 uVar60;
  undefined4 uVar61;
  ulong local_190;
  ulong local_188;
  undefined8 uStack_180;
  undefined8 *local_178;
  bool local_170 [8];
  vector_t *local_168;
  vector_t *local_160;
  void *local_158;
  undefined8 local_148 [2];
  ulong local_138;
  undefined8 uStack_130;
  long local_108;
  long local_100;
  uint local_f8;
  uint uStack_f4;
  uint uStack_f0;
  uint uStack_ec;
  uint local_e8;
  uint uStack_e4;
  uint uStack_e0;
  uint uStack_dc;
  undefined1 local_d8 [8];
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined1 local_c8 [8];
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined1 local_b8 [8];
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined1 local_a8 [8];
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined1 local_98 [8];
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined1 local_88 [8];
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined1 local_78 [8];
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined1 local_68 [8];
  undefined4 uStack_60;
  undefined4 uStack_5c;
  undefined1 local_58 [8];
  undefined8 uStack_50;
  long local_40;
  
  uVar27 = *(ulong *)(this + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar25 = *(long *)(*(long *)(*(long *)(param_1 + 0x30) + 0x1e0) + uVar27 * 8);
  if ((lVar25 != 0) && (*(char *)(lVar25 + 0x3c) != '\x14')) {
    lVar25 = 0;
  }
  local_178 = *(undefined8 **)(*(long *)(param_1 + 0x30) + 0x188);
  pvVar26 = (vector_t *)(ulong)*(uint *)(lVar25 + 0x20);
  local_170[0] = false;
  local_168 = (vector_t *)0x0;
  local_160 = (vector_t *)0x0;
  local_158 = (void *)0x0;
  if (local_178 != (undefined8 *)0x0) {
    local_178 = local_178 + 0xa9;
  }
  if (pvVar26 != (vector_t *)0x0) {
    uVar27 = (long)pvVar26 << 5;
    (**(code **)*local_178)(local_178,uVar27,0);
    if (uVar27 < 0x1c00000) {
      local_158 = (void *)embree::alignedMalloc(uVar27,0x20);
    }
    else {
      local_158 = (void *)embree::os_malloc(uVar27,local_170);
    }
    uVar27 = *(ulong *)(this + 8);
    local_160 = pvVar26;
  }
  local_168 = local_160;
  embree::sse2::createPrimRefArray
            ((Geometry *)local_148,(uint)lVar25,uVar27,pvVar26,(BuildProgressMonitor *)&local_178);
  if (local_100 != local_108) {
    uVar27 = 0;
    do {
      lVar25 = *(long *)(param_1 + 0x28);
      lVar6 = *(long *)(in_FS_OFFSET + lRam0000000000104cfe);
      this_00 = (FastAllocator *)(lVar25 + 0x78);
      if (lVar6 == 0) {
        this_01 = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
                    /* WARNING: Subroutine does not return */
        embree::MutexSys::MutexSys(this_01);
      }
      puVar28 = (ulong *)(lVar6 + 0x80);
      if (*(char *)(lVar25 + 0x182) != '\0') {
        puVar28 = (ulong *)(lVar6 + 0x40);
      }
      local_190 = 0xb0;
      uVar23 = *puVar28;
      if (this_00 != *(FastAllocator **)(uVar23 + 8)) {
        embree::MutexSys::lock();
        if (*(long *)(uVar23 + 8) != 0) {
          LOCK();
          plVar2 = (long *)(*(long *)(uVar23 + 8) + 0x118);
          *plVar2 = *plVar2 + *(long *)(uVar23 + 0xa8) + *(long *)(uVar23 + 0x68);
          UNLOCK();
          LOCK();
          plVar2 = (long *)(*(long *)(uVar23 + 8) + 0x120);
          *plVar2 = *plVar2 + (((*(long *)(uVar23 + 0x98) + *(long *)(uVar23 + 0x58)) -
                               *(long *)(uVar23 + 0x50)) - *(long *)(uVar23 + 0x90));
          UNLOCK();
          LOCK();
          plVar2 = (long *)(*(long *)(uVar23 + 8) + 0x128);
          *plVar2 = *plVar2 + *(long *)(uVar23 + 0xb0) + *(long *)(uVar23 + 0x70);
          UNLOCK();
        }
        *(undefined8 *)(uVar23 + 0x48) = 0;
        *(undefined8 *)(uVar23 + 0x58) = 0;
        *(undefined8 *)(uVar23 + 0x50) = 0;
        *(undefined8 *)(uVar23 + 0x68) = 0;
        *(undefined8 *)(uVar23 + 0x70) = 0;
        *(undefined8 *)(uVar23 + 0x60) = 0;
        if (this_00 == (FastAllocator *)0x0) {
          *(undefined8 *)(uVar23 + 0x88) = 0;
          uVar10 = 0;
          *(undefined8 *)(uVar23 + 0x98) = 0;
          *(undefined8 *)(uVar23 + 0x90) = 0;
          *(undefined8 *)(uVar23 + 0xa8) = 0;
          *(undefined8 *)(uVar23 + 0xb0) = 0;
        }
        else {
          uVar10 = *(undefined8 *)(lVar25 + 0x88);
          *(undefined8 *)(uVar23 + 0x88) = 0;
          *(undefined8 *)(uVar23 + 0x98) = 0;
          *(undefined8 *)(uVar23 + 0x60) = uVar10;
          *(undefined8 *)(uVar23 + 0x90) = 0;
          *(undefined8 *)(uVar23 + 0xa8) = 0;
          *(undefined8 *)(uVar23 + 0xb0) = 0;
          *(undefined8 *)(uVar23 + 0xa0) = 0;
          uVar10 = *(undefined8 *)(lVar25 + 0x88);
        }
        *(undefined8 *)(uVar23 + 0xa0) = uVar10;
        LOCK();
        *(FastAllocator **)(uVar23 + 8) = this_00;
        UNLOCK();
        local_188 = uVar23;
        embree::MutexSys::lock();
        puVar4 = *(ulong **)(lVar25 + 0x1b0);
        if (puVar4 == *(ulong **)(lVar25 + 0x1b8)) {
          std::
          vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
          ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                    ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                      *)(lVar25 + 0x1a8),puVar4,&local_188);
        }
        else {
          *puVar4 = uVar23;
          *(long *)(lVar25 + 0x1b0) = *(long *)(lVar25 + 0x1b0) + 8;
        }
        embree::MutexSys::unlock();
        embree::MutexSys::unlock();
      }
      uVar22 = local_190;
      uVar23 = puVar28[2];
      puVar28[5] = puVar28[5] + local_190;
      uVar13 = (ulong)(-(int)uVar23 & 0xf);
      uVar7 = local_190 + uVar23 + uVar13;
      puVar28[2] = uVar7;
      if (puVar28[3] < uVar7) {
        puVar28[2] = uVar23;
        if (puVar28[4] < local_190 * 4) {
          puVar8 = (undefined4 *)FastAllocator::malloc(this_00,&local_190,0x40,false);
          uVar23 = (ulong)puVar8 | 9;
        }
        else {
          local_188 = puVar28[4];
          puVar8 = (undefined4 *)FastAllocator::malloc(this_00,&local_188,0x40,true);
          puVar28[1] = (ulong)puVar8;
          puVar28[6] = (puVar28[3] + puVar28[6]) - puVar28[2];
          puVar28[2] = uVar22;
          puVar28[3] = local_188;
          if (local_188 < uVar22) {
            puVar28[2] = 0;
            local_188 = puVar28[4];
            puVar8 = (undefined4 *)FastAllocator::malloc(this_00,&local_188,0x40,false);
            puVar28[1] = (ulong)puVar8;
            puVar28[6] = (puVar28[3] + puVar28[6]) - puVar28[2];
            puVar28[2] = uVar22;
            puVar28[3] = local_188;
            if (local_188 < uVar22) {
              puVar28[2] = 0;
              uVar23 = 9;
              puVar8 = (undefined4 *)0x0;
              goto LAB_001047cb;
            }
          }
          uVar23 = (ulong)puVar8 | 9;
        }
      }
      else {
        puVar28[6] = puVar28[6] + uVar13;
        puVar8 = (undefined4 *)((uVar7 - local_190) + puVar28[1]);
        uVar23 = (ulong)puVar8 | 9;
      }
LAB_001047cb:
      uVar22 = local_100 - local_108;
      local_f8 = 0xffffffff;
      uStack_f4 = 0xffffffff;
      uStack_f0 = 0xffffffff;
      uStack_ec = 0xffffffff;
      local_e8 = 0xffffffff;
      uStack_e4 = 0xffffffff;
      uStack_e0 = 0xffffffff;
      uStack_dc = 0xffffffff;
      _local_d8 = (undefined1  [16])0x0;
      _local_c8 = (undefined1  [16])0x0;
      _local_b8 = (undefined1  [16])0x0;
      _local_a8 = (undefined1  [16])0x0;
      _local_98 = (undefined1  [16])0x0;
      _local_88 = (undefined1  [16])0x0;
      _local_78 = (undefined1  [16])0x0;
      _local_68 = (undefined1  [16])0x0;
      _local_58 = (undefined1  [16])0x0;
      if (uVar27 < uVar22) {
        lVar25 = *(long *)(*(long *)(*(long *)(param_1 + 0x28) + 0x68) + 0x1e0);
        lVar24 = uVar27 * 0x20;
        local_f8 = *(uint *)((long)local_158 + lVar24 + 0xc);
        local_e8 = *(uint *)((long)local_158 + lVar24 + 0x1c);
        lVar6 = *(long *)(lVar25 + (ulong)local_f8 * 8);
        puVar14 = (uint *)((ulong)local_e8 * *(long *)(lVar6 + 0x60) + *(long *)(lVar6 + 0x58));
        lVar5 = *(long *)(lVar6 + 0x88);
        lVar6 = *(long *)(lVar6 + 0x90);
        puVar11 = (undefined4 *)((ulong)*puVar14 * lVar6 + lVar5);
        local_b8._0_4_ = puVar11[2];
        local_c8._0_4_ = puVar11[1];
        local_d8._0_4_ = *puVar11;
        stack0xffffffffffffff3c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff2c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff4c = SUB1612((undefined1  [16])0x0,4);
        puVar11 = (undefined4 *)((ulong)puVar14[1] * lVar6 + lVar5);
        puVar15 = (undefined4 *)((ulong)puVar14[2] * lVar6 + lVar5);
        local_88._0_4_ = puVar11[2];
        local_98._0_4_ = puVar11[1];
        local_68._0_4_ = puVar15[1];
        local_78._0_4_ = *puVar15;
        local_a8._0_4_ = *puVar11;
        uVar7 = uVar27 + 1;
        stack0xffffffffffffff6c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff7c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff5c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff8c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffff9c = SUB1612((undefined1  [16])0x0,4);
        stack0xffffffffffffffac = SUB1612((undefined1  [16])0x0,4);
        local_58._0_4_ = puVar15[2];
        if (uVar7 < uVar22) {
          uStack_f4 = *(uint *)((long)local_158 + lVar24 + 0x2c);
          uStack_e4 = *(uint *)((long)local_158 + lVar24 + 0x3c);
          lVar6 = *(long *)(lVar25 + (ulong)uStack_f4 * 8);
          puVar14 = (uint *)((ulong)uStack_e4 * *(long *)(lVar6 + 0x60) + *(long *)(lVar6 + 0x58));
          lVar5 = *(long *)(lVar6 + 0x88);
          lVar6 = *(long *)(lVar6 + 0x90);
          puVar11 = (undefined4 *)((ulong)*puVar14 * lVar6 + lVar5);
          local_c8._4_4_ = puVar11[1];
          _uStack_c0 = 0;
          local_d8._4_4_ = *puVar11;
          _uStack_d0 = 0;
          local_b8._4_4_ = puVar11[2];
          _uStack_b0 = 0;
          puVar16 = (undefined4 *)((ulong)puVar14[1] * lVar6 + lVar5);
          local_98._4_4_ = puVar16[1];
          _uStack_90 = 0;
          local_a8._4_4_ = *puVar16;
          _uStack_a0 = 0;
          local_88._4_4_ = puVar16[2];
          _uStack_80 = 0;
          puVar17 = (undefined4 *)((ulong)puVar14[2] * lVar6 + lVar5);
          uVar7 = uVar27 + 2;
          local_68._4_4_ = puVar17[1];
          _uStack_60 = 0;
          local_78._4_4_ = *puVar17;
          _uStack_70 = 0;
          local_58._4_4_ = puVar17[2];
          uStack_50 = 0;
          if (uVar7 < uVar22) {
            uStack_f0 = *(uint *)((long)local_158 + lVar24 + 0x4c);
            uStack_e0 = *(uint *)((long)local_158 + lVar24 + 0x5c);
            lVar6 = *(long *)(lVar25 + (ulong)uStack_f0 * 8);
            puVar14 = (uint *)((ulong)uStack_e0 * *(long *)(lVar6 + 0x60) + *(long *)(lVar6 + 0x58))
            ;
            lVar5 = *(long *)(lVar6 + 0x88);
            lVar6 = *(long *)(lVar6 + 0x90);
            puVar15 = (undefined4 *)((ulong)*puVar14 * lVar6 + lVar5);
            uStack_c0 = puVar15[1];
            uStack_bc = 0;
            uStack_d0 = *puVar15;
            uStack_cc = 0;
            uStack_b0 = puVar15[2];
            uStack_ac = 0;
            puVar18 = (undefined4 *)((ulong)puVar14[1] * lVar6 + lVar5);
            uStack_90 = puVar18[1];
            uStack_8c = 0;
            uStack_a0 = *puVar18;
            uStack_9c = 0;
            uStack_80 = puVar18[2];
            uStack_7c = 0;
            puVar19 = (undefined4 *)((ulong)puVar14[2] * lVar6 + lVar5);
            uVar7 = uVar27 + 3;
            uStack_60 = puVar19[1];
            uStack_5c = 0;
            uStack_70 = *puVar19;
            uStack_6c = 0;
            uStack_50._0_4_ = puVar19[2];
            uStack_50._4_4_ = 0;
            if (uVar7 < uVar22) {
              uStack_ec = *(uint *)((long)local_158 + lVar24 + 0x6c);
              uStack_dc = *(uint *)((long)local_158 + lVar24 + 0x7c);
              lVar25 = *(long *)(lVar25 + (ulong)uStack_ec * 8);
              puVar14 = (uint *)((ulong)uStack_dc * *(long *)(lVar25 + 0x60) +
                                *(long *)(lVar25 + 0x58));
              lVar6 = *(long *)(lVar25 + 0x88);
              lVar25 = *(long *)(lVar25 + 0x90);
              puVar20 = (undefined4 *)((ulong)puVar14[1] * lVar25 + lVar6);
              puVar12 = (undefined4 *)((ulong)*puVar14 * lVar25 + lVar6);
              uStack_8c = puVar20[1];
              uStack_9c = *puVar20;
              uStack_bc = puVar12[1];
              uStack_cc = *puVar12;
              uStack_ac = puVar12[2];
              puVar21 = (undefined4 *)((ulong)puVar14[2] * lVar25 + lVar6);
              uStack_7c = puVar20[2];
              uStack_5c = puVar21[1];
              uStack_6c = *puVar21;
              uStack_50._4_4_ = puVar21[2];
              uVar27 = uVar27 + 4;
              uVar29 = local_68._0_4_;
              uVar32 = puVar17[1];
              uVar34 = puVar19[1];
              uVar35 = puVar21[1];
              uVar36 = local_78._0_4_;
              uVar37 = *puVar17;
              uVar38 = *puVar19;
              uVar39 = *puVar21;
              uVar30 = local_88._0_4_;
              uVar40 = puVar16[2];
              uVar41 = puVar18[2];
              uVar42 = puVar20[2];
              uVar43 = local_98._0_4_;
              uVar44 = puVar16[1];
              uVar45 = puVar18[1];
              uVar46 = puVar20[1];
              uVar47 = local_a8._0_4_;
              uVar33 = *puVar16;
              uVar48 = *puVar18;
              uVar49 = *puVar20;
              uVar50 = local_b8._0_4_;
              uVar51 = puVar11[2];
              uVar52 = puVar15[2];
              uVar53 = puVar12[2];
              uVar54 = local_c8._0_4_;
              uVar55 = puVar11[1];
              uVar56 = puVar15[1];
              uVar57 = puVar12[1];
              uVar58 = local_d8._0_4_;
              uVar59 = *puVar11;
              uVar60 = *puVar15;
              uVar61 = *puVar12;
              auVar31 = local_58;
              goto LAB_00104c48;
            }
          }
        }
        uVar27 = uVar7;
        uVar29 = local_68._0_4_;
        uVar32 = local_68._4_4_;
        uVar34 = uStack_60;
        uVar35 = uStack_5c;
        uVar36 = local_78._0_4_;
        uVar37 = local_78._4_4_;
        uVar38 = uStack_70;
        uVar39 = uStack_6c;
        uVar30 = local_88._0_4_;
        uVar40 = local_88._4_4_;
        uVar41 = uStack_80;
        uVar42 = uStack_7c;
        uVar43 = local_98._0_4_;
        uVar44 = local_98._4_4_;
        uVar45 = uStack_90;
        uVar46 = uStack_8c;
        uVar47 = local_a8._0_4_;
        uVar33 = local_a8._4_4_;
        uVar48 = uStack_a0;
        uVar49 = uStack_9c;
        uVar50 = local_b8._0_4_;
        uVar51 = local_b8._4_4_;
        uVar52 = uStack_b0;
        uVar53 = uStack_ac;
        uVar54 = local_c8._0_4_;
        uVar55 = local_c8._4_4_;
        uVar56 = uStack_c0;
        uVar57 = uStack_bc;
        uVar58 = local_d8._0_4_;
        uVar59 = local_d8._4_4_;
        uVar60 = uStack_d0;
        uVar61 = uStack_cc;
        auVar31 = local_58;
      }
      else {
        auVar31 = (undefined1  [8])0x0;
        uStack_50 = 0;
        uVar29 = 0;
        uVar32 = 0;
        uVar34 = 0;
        uVar35 = 0;
        uVar30 = 0;
        uVar33 = 0;
        uVar36 = uVar29;
        uVar37 = uVar32;
        uVar38 = uVar34;
        uVar39 = uVar35;
        uVar40 = uVar32;
        uVar41 = uVar34;
        uVar42 = uVar35;
        uVar43 = uVar30;
        uVar44 = uVar32;
        uVar45 = uVar34;
        uVar46 = uVar35;
        uVar47 = uVar30;
        uVar48 = uVar34;
        uVar49 = uVar35;
        uVar50 = uVar30;
        uVar51 = uVar33;
        uVar52 = uVar34;
        uVar53 = uVar35;
        uVar54 = uVar30;
        uVar55 = uVar33;
        uVar56 = uVar34;
        uVar57 = uVar35;
        uVar58 = uVar30;
        uVar59 = uVar33;
        uVar60 = uVar34;
        uVar61 = uVar35;
      }
LAB_00104c48:
      *puVar8 = uVar58;
      puVar8[1] = uVar59;
      puVar8[2] = uVar60;
      puVar8[3] = uVar61;
      puVar8[4] = uVar54;
      puVar8[5] = uVar55;
      puVar8[6] = uVar56;
      puVar8[7] = uVar57;
      puVar8[0x18] = uVar36;
      puVar8[0x19] = uVar37;
      puVar8[0x1a] = uVar38;
      puVar8[0x1b] = uVar39;
      puVar8[0x1c] = uVar29;
      puVar8[0x1d] = uVar32;
      puVar8[0x1e] = uVar34;
      puVar8[0x1f] = uVar35;
      puVar8[0x24] = local_f8;
      puVar8[0x25] = uStack_f4;
      puVar8[0x26] = uStack_f0;
      puVar8[0x27] = uStack_ec;
      puVar8[0x28] = local_e8;
      puVar8[0x29] = uStack_e4;
      puVar8[0x2a] = uStack_e0;
      puVar8[0x2b] = uStack_dc;
      puVar8[8] = uVar50;
      puVar8[9] = uVar51;
      puVar8[10] = uVar52;
      puVar8[0xb] = uVar53;
      puVar8[0xc] = uVar47;
      puVar8[0xd] = uVar33;
      puVar8[0xe] = uVar48;
      puVar8[0xf] = uVar49;
      puVar8[0x10] = uVar43;
      puVar8[0x11] = uVar44;
      puVar8[0x12] = uVar45;
      puVar8[0x13] = uVar46;
      puVar8[0x14] = uVar30;
      puVar8[0x15] = uVar40;
      puVar8[0x16] = uVar41;
      puVar8[0x17] = uVar42;
      *(undefined1 (*) [8])(puVar8 + 0x20) = auVar31;
      *(undefined8 *)(puVar8 + 0x22) = uStack_50;
      uStack_180._0_4_ = (undefined4)local_148[1];
      uStack_180 = CONCAT44((int)*(undefined8 *)(this + 8),(undefined4)uStack_180);
      uVar10 = uStack_180;
      local_188 = local_138;
      uStack_180._0_4_ = (undefined4)uStack_130;
      uStack_180 = CONCAT44(1,(undefined4)uStack_180);
      LOCK();
      pBVar1 = param_1 + 0x88;
      iVar3 = *(int *)pBVar1;
      *(int *)pBVar1 = *(int *)pBVar1 + 1;
      UNLOCK();
      puVar9 = (undefined8 *)((long)iVar3 * 0x40 + *(long *)(param_1 + 0x58));
      puVar9[4] = uVar23;
      *(undefined4 *)(puVar9 + 5) = 0;
      *puVar9 = local_148[0];
      puVar9[1] = uVar10;
      puVar9[2] = local_138;
      puVar9[3] = uStack_180;
    } while (uVar27 < (ulong)(local_100 - local_108));
  }
  pvVar26 = local_160;
  if (local_158 != (void *)0x0) {
    if ((ulong)((long)local_160 << 5) < 0x1c00000) {
      embree::alignedFree(local_158);
    }
    else {
      embree::os_free(local_158,(long)local_160 << 5,local_170[0]);
    }
  }
  if (pvVar26 != (vector_t *)0x0) {
    (**(code **)*local_178)(local_178,(long)pvVar26 * -0x20,1);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderSmall::attachBuildRefs(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >*) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderSmall::
attachBuildRefs(RefBuilderSmall *this,BVHNBuilderTwoLevel *param_1)

{
  FastAllocator *this_00;
  BVHNBuilderTwoLevel *pBVar1;
  long *plVar2;
  int iVar3;
  ulong *puVar4;
  long lVar5;
  long lVar6;
  ulong uVar7;
  float *pfVar8;
  undefined8 *puVar9;
  undefined8 uVar10;
  MutexSys *this_01;
  float *pfVar11;
  float *pfVar12;
  ulong uVar13;
  uint *puVar14;
  float *pfVar15;
  float *pfVar16;
  float *pfVar17;
  float *pfVar18;
  ulong uVar19;
  ulong uVar20;
  long lVar21;
  long lVar22;
  vector_t *pvVar23;
  ulong uVar24;
  ulong *puVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar29;
  float fVar30;
  float fVar31;
  float fVar32;
  float fVar33;
  float fVar34;
  undefined1 auVar35 [4];
  float fVar36;
  float fVar37;
  float fVar38;
  float fVar39;
  float fVar40;
  float fVar41;
  undefined1 auVar42 [4];
  float fVar43;
  float fVar44;
  float fVar45;
  undefined1 auVar46 [4];
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  float fVar56;
  float fVar57;
  float fVar58;
  float fVar59;
  float fVar60;
  float fVar61;
  ulong local_190;
  ulong local_188;
  undefined8 uStack_180;
  undefined8 *local_178;
  bool local_170 [8];
  vector_t *local_168;
  vector_t *local_160;
  void *local_158;
  undefined8 local_148 [2];
  ulong local_138;
  undefined8 uStack_130;
  long local_108;
  long local_100;
  float local_f8;
  float fStack_f4;
  float fStack_f0;
  float fStack_ec;
  float local_e8;
  float fStack_e4;
  float fStack_e0;
  float fStack_dc;
  undefined1 local_d8 [4];
  undefined1 auStack_d4 [8];
  float fStack_cc;
  undefined1 local_c8 [4];
  undefined1 auStack_c4 [8];
  float fStack_bc;
  undefined1 local_b8 [4];
  undefined1 auStack_b4 [8];
  float fStack_ac;
  undefined1 local_a8 [4];
  undefined1 auStack_a4 [8];
  float fStack_9c;
  undefined1 local_98 [4];
  undefined1 auStack_94 [8];
  float fStack_8c;
  undefined1 local_88 [4];
  undefined1 auStack_84 [8];
  float fStack_7c;
  undefined1 local_78 [4];
  undefined1 auStack_74 [8];
  float fStack_6c;
  undefined1 local_68 [4];
  undefined1 auStack_64 [8];
  float fStack_5c;
  undefined1 local_58 [4];
  undefined1 auStack_54 [8];
  float fStack_4c;
  long local_40;
  
  uVar24 = *(ulong *)(this + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar22 = *(long *)(*(long *)(*(long *)(param_1 + 0x30) + 0x1e0) + uVar24 * 8);
  if ((lVar22 != 0) && (*(char *)(lVar22 + 0x3c) != '\x14')) {
    lVar22 = 0;
  }
  local_178 = *(undefined8 **)(*(long *)(param_1 + 0x30) + 0x188);
  pvVar23 = (vector_t *)(ulong)*(uint *)(lVar22 + 0x20);
  local_170[0] = false;
  local_168 = (vector_t *)0x0;
  local_160 = (vector_t *)0x0;
  local_158 = (void *)0x0;
  if (local_178 != (undefined8 *)0x0) {
    local_178 = local_178 + 0xa9;
  }
  if (pvVar23 != (vector_t *)0x0) {
    uVar24 = (long)pvVar23 << 5;
    (**(code **)*local_178)(local_178,uVar24,0);
    if (uVar24 < 0x1c00000) {
      local_158 = (void *)embree::alignedMalloc(uVar24,0x20);
    }
    else {
      local_158 = (void *)embree::os_malloc(uVar24,local_170);
    }
    uVar24 = *(ulong *)(this + 8);
    local_160 = pvVar23;
  }
  local_168 = local_160;
  embree::sse2::createPrimRefArray
            ((Geometry *)local_148,(uint)lVar22,uVar24,pvVar23,(BuildProgressMonitor *)&local_178);
  if (local_100 != local_108) {
    uVar24 = 0;
    do {
      lVar22 = *(long *)(param_1 + 0x28);
      lVar6 = *(long *)(in_FS_OFFSET + lRam0000000000105903);
      this_00 = (FastAllocator *)(lVar22 + 0x78);
      if (lVar6 == 0) {
        this_01 = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
                    /* WARNING: Subroutine does not return */
        embree::MutexSys::MutexSys(this_01);
      }
      puVar25 = (ulong *)(lVar6 + 0x80);
      if (*(char *)(lVar22 + 0x182) != '\0') {
        puVar25 = (ulong *)(lVar6 + 0x40);
      }
      local_190 = 0xb0;
      uVar20 = *puVar25;
      if (this_00 != *(FastAllocator **)(uVar20 + 8)) {
        embree::MutexSys::lock();
        if (*(long *)(uVar20 + 8) != 0) {
          LOCK();
          plVar2 = (long *)(*(long *)(uVar20 + 8) + 0x118);
          *plVar2 = *plVar2 + *(long *)(uVar20 + 0xa8) + *(long *)(uVar20 + 0x68);
          UNLOCK();
          LOCK();
          plVar2 = (long *)(*(long *)(uVar20 + 8) + 0x120);
          *plVar2 = *plVar2 + (((*(long *)(uVar20 + 0x98) + *(long *)(uVar20 + 0x58)) -
                               *(long *)(uVar20 + 0x50)) - *(long *)(uVar20 + 0x90));
          UNLOCK();
          LOCK();
          plVar2 = (long *)(*(long *)(uVar20 + 8) + 0x128);
          *plVar2 = *plVar2 + *(long *)(uVar20 + 0xb0) + *(long *)(uVar20 + 0x70);
          UNLOCK();
        }
        *(undefined8 *)(uVar20 + 0x48) = 0;
        *(undefined8 *)(uVar20 + 0x58) = 0;
        *(undefined8 *)(uVar20 + 0x50) = 0;
        *(undefined8 *)(uVar20 + 0x68) = 0;
        *(undefined8 *)(uVar20 + 0x70) = 0;
        *(undefined8 *)(uVar20 + 0x60) = 0;
        if (this_00 == (FastAllocator *)0x0) {
          *(undefined8 *)(uVar20 + 0x88) = 0;
          uVar10 = 0;
          *(undefined8 *)(uVar20 + 0x98) = 0;
          *(undefined8 *)(uVar20 + 0x90) = 0;
          *(undefined8 *)(uVar20 + 0xa8) = 0;
          *(undefined8 *)(uVar20 + 0xb0) = 0;
        }
        else {
          uVar10 = *(undefined8 *)(lVar22 + 0x88);
          *(undefined8 *)(uVar20 + 0x88) = 0;
          *(undefined8 *)(uVar20 + 0x98) = 0;
          *(undefined8 *)(uVar20 + 0x60) = uVar10;
          *(undefined8 *)(uVar20 + 0x90) = 0;
          *(undefined8 *)(uVar20 + 0xa8) = 0;
          *(undefined8 *)(uVar20 + 0xb0) = 0;
          *(undefined8 *)(uVar20 + 0xa0) = 0;
          uVar10 = *(undefined8 *)(lVar22 + 0x88);
        }
        *(undefined8 *)(uVar20 + 0xa0) = uVar10;
        LOCK();
        *(FastAllocator **)(uVar20 + 8) = this_00;
        UNLOCK();
        local_188 = uVar20;
        embree::MutexSys::lock();
        puVar4 = *(ulong **)(lVar22 + 0x1b0);
        if (puVar4 == *(ulong **)(lVar22 + 0x1b8)) {
          std::
          vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
          ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                    ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                      *)(lVar22 + 0x1a8),puVar4,&local_188);
        }
        else {
          *puVar4 = uVar20;
          *(long *)(lVar22 + 0x1b0) = *(long *)(lVar22 + 0x1b0) + 8;
        }
        embree::MutexSys::unlock();
        embree::MutexSys::unlock();
      }
      uVar19 = local_190;
      uVar20 = puVar25[2];
      puVar25[5] = puVar25[5] + local_190;
      uVar13 = (ulong)(-(int)uVar20 & 0xf);
      uVar7 = local_190 + uVar20 + uVar13;
      puVar25[2] = uVar7;
      if (puVar25[3] < uVar7) {
        puVar25[2] = uVar20;
        if (puVar25[4] < local_190 * 4) {
          pfVar8 = (float *)FastAllocator::malloc(this_00,&local_190,0x40,false);
          uVar20 = (ulong)pfVar8 | 9;
        }
        else {
          local_188 = puVar25[4];
          pfVar8 = (float *)FastAllocator::malloc(this_00,&local_188,0x40,true);
          puVar25[1] = (ulong)pfVar8;
          puVar25[6] = (puVar25[3] + puVar25[6]) - puVar25[2];
          puVar25[2] = uVar19;
          puVar25[3] = local_188;
          if (local_188 < uVar19) {
            puVar25[2] = 0;
            local_188 = puVar25[4];
            pfVar8 = (float *)FastAllocator::malloc(this_00,&local_188,0x40,false);
            puVar25[1] = (ulong)pfVar8;
            puVar25[6] = (puVar25[3] + puVar25[6]) - puVar25[2];
            puVar25[2] = uVar19;
            puVar25[3] = local_188;
            if (local_188 < uVar19) {
              puVar25[2] = 0;
              uVar20 = 9;
              pfVar8 = (float *)0x0;
              goto LAB_001053bb;
            }
          }
          uVar20 = (ulong)pfVar8 | 9;
        }
      }
      else {
        puVar25[6] = puVar25[6] + uVar13;
        pfVar8 = (float *)((uVar7 - local_190) + puVar25[1]);
        uVar20 = (ulong)pfVar8 | 9;
      }
LAB_001053bb:
      uVar19 = local_100 - local_108;
      local_f8 = -NAN;
      fStack_f4 = -NAN;
      fStack_f0 = -NAN;
      fStack_ec = -NAN;
      local_e8 = -NAN;
      fStack_e4 = -NAN;
      fStack_e0 = -NAN;
      fStack_dc = -NAN;
      _local_d8 = (undefined1  [16])0x0;
      _local_c8 = (undefined1  [16])0x0;
      _local_b8 = (undefined1  [16])0x0;
      _local_a8 = (undefined1  [16])0x0;
      _local_98 = (undefined1  [16])0x0;
      _local_88 = (undefined1  [16])0x0;
      _local_78 = (undefined1  [16])0x0;
      _local_68 = (undefined1  [16])0x0;
      _local_58 = (undefined1  [16])0x0;
      if (uVar24 < uVar19) {
        lVar22 = *(long *)(*(long *)(*(long *)(param_1 + 0x28) + 0x68) + 0x1e0);
        lVar21 = uVar24 * 0x20;
        local_f8 = *(float *)((long)local_158 + lVar21 + 0xc);
        local_e8 = *(float *)((long)local_158 + lVar21 + 0x1c);
        lVar6 = *(long *)(lVar22 + (ulong)(uint)local_f8 * 8);
        puVar14 = (uint *)((ulong)(uint)local_e8 * *(long *)(lVar6 + 0x60) + *(long *)(lVar6 + 0x58)
                          );
        lVar5 = *(long *)(lVar6 + 0x88);
        lVar6 = *(long *)(lVar6 + 0x90);
        pfVar11 = (float *)((ulong)*puVar14 * lVar6 + lVar5);
        local_b8 = (undefined1  [4])pfVar11[2];
        local_c8 = (undefined1  [4])pfVar11[1];
        local_d8 = (undefined1  [4])*pfVar11;
        _auStack_c4 = SUB1612((undefined1  [16])0x0,4);
        _auStack_d4 = SUB1612((undefined1  [16])0x0,4);
        _auStack_b4 = SUB1612((undefined1  [16])0x0,4);
        pfVar11 = (float *)((ulong)puVar14[1] * lVar6 + lVar5);
        pfVar15 = (float *)((ulong)puVar14[2] * lVar6 + lVar5);
        local_88 = (undefined1  [4])pfVar11[2];
        local_98 = (undefined1  [4])pfVar11[1];
        local_58 = (undefined1  [4])pfVar15[2];
        local_68 = (undefined1  [4])pfVar15[1];
        local_78 = (undefined1  [4])*pfVar15;
        local_a8 = (undefined1  [4])*pfVar11;
        uVar7 = uVar24 + 1;
        _auStack_94 = SUB1612((undefined1  [16])0x0,4);
        _auStack_84 = SUB1612((undefined1  [16])0x0,4);
        _auStack_a4 = SUB1612((undefined1  [16])0x0,4);
        _auStack_74 = SUB1612((undefined1  [16])0x0,4);
        _auStack_64 = SUB1612((undefined1  [16])0x0,4);
        _auStack_54 = SUB1612((undefined1  [16])0x0,4);
        if (uVar7 < uVar19) {
          fStack_f4 = *(float *)((long)local_158 + lVar21 + 0x2c);
          fStack_e4 = *(float *)((long)local_158 + lVar21 + 0x3c);
          lVar6 = *(long *)(lVar22 + (ulong)(uint)fStack_f4 * 8);
          puVar14 = (uint *)((ulong)(uint)fStack_e4 * *(long *)(lVar6 + 0x60) +
                            *(long *)(lVar6 + 0x58));
          lVar5 = *(long *)(lVar6 + 0x88);
          lVar6 = *(long *)(lVar6 + 0x90);
          pfVar11 = (float *)((ulong)*puVar14 * lVar6 + lVar5);
          fVar37 = pfVar11[2];
          fVar43 = pfVar11[1];
          fVar47 = *pfVar11;
          _local_c8 = CONCAT44(fVar43,local_c8);
          stack0xffffffffffffff40 = 0;
          _local_d8 = CONCAT44(fVar47,local_d8);
          stack0xffffffffffffff30 = 0;
          _local_b8 = CONCAT44(fVar37,local_b8);
          stack0xffffffffffffff50 = 0;
          pfVar11 = (float *)((ulong)puVar14[1] * lVar6 + lVar5);
          _local_98 = CONCAT44(pfVar11[1],local_98);
          stack0xffffffffffffff70 = 0;
          _local_a8 = CONCAT44(*pfVar11,local_a8);
          stack0xffffffffffffff60 = 0;
          _local_88 = CONCAT44(pfVar11[2],local_88);
          stack0xffffffffffffff80 = 0;
          pfVar15 = (float *)((ulong)puVar14[2] * lVar6 + lVar5);
          uVar7 = uVar24 + 2;
          _local_68 = CONCAT44(pfVar15[1],local_68);
          stack0xffffffffffffffa0 = 0;
          _local_78 = CONCAT44(*pfVar15,local_78);
          stack0xffffffffffffff90 = 0;
          _local_58 = CONCAT44(pfVar15[2],local_58);
          stack0xffffffffffffffb0 = 0;
          if (uVar7 < uVar19) {
            fStack_f0 = *(float *)((long)local_158 + lVar21 + 0x4c);
            fStack_e0 = *(float *)((long)local_158 + lVar21 + 0x5c);
            lVar6 = *(long *)(lVar22 + (ulong)(uint)fStack_f0 * 8);
            puVar14 = (uint *)((ulong)(uint)fStack_e0 * *(long *)(lVar6 + 0x60) +
                              *(long *)(lVar6 + 0x58));
            lVar5 = *(long *)(lVar6 + 0x88);
            lVar6 = *(long *)(lVar6 + 0x90);
            pfVar16 = (float *)((ulong)*puVar14 * lVar6 + lVar5);
            auStack_b4._4_4_ = pfVar16[2];
            auStack_c4._4_4_ = pfVar16[1];
            auStack_d4._4_4_ = *pfVar16;
            fStack_bc = 0.0;
            fStack_cc = 0.0;
            fStack_ac = 0.0;
            pfVar16 = (float *)((ulong)puVar14[1] * lVar6 + lVar5);
            auStack_94._4_4_ = pfVar16[1];
            fStack_8c = 0.0;
            auStack_a4._4_4_ = *pfVar16;
            fStack_9c = 0.0;
            auStack_84._4_4_ = pfVar16[2];
            fStack_7c = 0.0;
            pfVar17 = (float *)((ulong)puVar14[2] * lVar6 + lVar5);
            uVar7 = uVar24 + 3;
            auStack_64._4_4_ = pfVar17[1];
            fStack_5c = 0.0;
            auStack_74._4_4_ = *pfVar17;
            fStack_6c = 0.0;
            auStack_54._4_4_ = pfVar17[2];
            fStack_4c = 0.0;
            if (uVar7 < uVar19) {
              fStack_ec = *(float *)((long)local_158 + lVar21 + 0x6c);
              fStack_dc = *(float *)((long)local_158 + lVar21 + 0x7c);
              lVar22 = *(long *)(lVar22 + (ulong)(uint)fStack_ec * 8);
              puVar14 = (uint *)((ulong)(uint)fStack_dc * *(long *)(lVar22 + 0x60) +
                                *(long *)(lVar22 + 0x58));
              lVar6 = *(long *)(lVar22 + 0x88);
              lVar22 = *(long *)(lVar22 + 0x90);
              pfVar18 = (float *)((ulong)puVar14[1] * lVar22 + lVar6);
              pfVar12 = (float *)((ulong)*puVar14 * lVar22 + lVar6);
              fStack_ac = pfVar12[2];
              fStack_bc = pfVar12[1];
              fStack_9c = *pfVar18;
              fStack_cc = *pfVar12;
              fStack_8c = pfVar18[1];
              pfVar12 = (float *)((ulong)puVar14[2] * lVar22 + lVar6);
              fStack_7c = pfVar18[2];
              fStack_5c = pfVar12[1];
              fStack_6c = *pfVar12;
              fStack_4c = pfVar12[2];
              fVar26 = (float)local_58 - (float)local_b8;
              fVar27 = pfVar15[2] - fVar37;
              fVar28 = pfVar17[2] - (float)auStack_b4._4_4_;
              fVar29 = pfVar12[2] - fStack_ac;
              fVar30 = (float)local_68 - (float)local_c8;
              fVar31 = pfVar15[1] - fVar43;
              fVar32 = pfVar17[1] - (float)auStack_c4._4_4_;
              fVar33 = pfVar12[1] - fStack_bc;
              fVar34 = (float)local_78 - (float)local_d8;
              fVar36 = *pfVar15 - fVar47;
              fVar38 = *pfVar17 - (float)auStack_d4._4_4_;
              fVar39 = *pfVar12 - fStack_cc;
              uVar24 = uVar24 + 4;
              auVar35 = local_b8;
              fVar40 = (float)auStack_b4._4_4_;
              fVar41 = fStack_ac;
              auVar42 = local_c8;
              fVar44 = (float)auStack_c4._4_4_;
              fVar45 = fStack_bc;
              auVar46 = local_d8;
              fVar48 = (float)auStack_d4._4_4_;
              fVar49 = fStack_cc;
              fVar50 = (float)local_b8 - (float)local_88;
              fVar51 = fVar37 - pfVar11[2];
              fVar52 = (float)auStack_b4._4_4_ - pfVar16[2];
              fVar53 = fStack_ac - pfVar18[2];
              fVar54 = (float)local_c8 - (float)local_98;
              fVar55 = fVar43 - pfVar11[1];
              fVar56 = (float)auStack_c4._4_4_ - pfVar16[1];
              fVar57 = fStack_bc - pfVar18[1];
              fVar58 = (float)local_d8 - (float)local_a8;
              fVar59 = fVar47 - *pfVar11;
              fVar60 = (float)auStack_d4._4_4_ - *pfVar16;
              fVar61 = fStack_cc - *pfVar18;
              goto LAB_0010584d;
            }
          }
        }
        fVar26 = (float)local_58 - (float)local_b8;
        fVar27 = (float)auStack_54._0_4_ - (float)auStack_b4._0_4_;
        fVar28 = (float)auStack_54._4_4_ - (float)auStack_b4._4_4_;
        fVar29 = fStack_4c - fStack_ac;
        fVar30 = (float)local_68 - (float)local_c8;
        fVar31 = (float)auStack_64._0_4_ - (float)auStack_c4._0_4_;
        fVar32 = (float)auStack_64._4_4_ - (float)auStack_c4._4_4_;
        fVar33 = fStack_5c - fStack_bc;
        fVar34 = (float)local_78 - (float)local_d8;
        fVar36 = (float)auStack_74._0_4_ - (float)auStack_d4._0_4_;
        fVar38 = (float)auStack_74._4_4_ - (float)auStack_d4._4_4_;
        fVar39 = fStack_6c - fStack_cc;
        uVar24 = uVar7;
        auVar35 = local_b8;
        fVar37 = (float)auStack_b4._0_4_;
        fVar40 = (float)auStack_b4._4_4_;
        fVar41 = fStack_ac;
        auVar42 = local_c8;
        fVar43 = (float)auStack_c4._0_4_;
        fVar44 = (float)auStack_c4._4_4_;
        fVar45 = fStack_bc;
        auVar46 = local_d8;
        fVar47 = (float)auStack_d4._0_4_;
        fVar48 = (float)auStack_d4._4_4_;
        fVar49 = fStack_cc;
        fVar50 = (float)local_b8 - (float)local_88;
        fVar51 = (float)auStack_b4._0_4_ - (float)auStack_84._0_4_;
        fVar52 = (float)auStack_b4._4_4_ - (float)auStack_84._4_4_;
        fVar53 = fStack_ac - fStack_7c;
        fVar54 = (float)local_c8 - (float)local_98;
        fVar55 = (float)auStack_c4._0_4_ - (float)auStack_94._0_4_;
        fVar56 = (float)auStack_c4._4_4_ - (float)auStack_94._4_4_;
        fVar57 = fStack_bc - fStack_8c;
        fVar58 = (float)local_d8 - (float)local_a8;
        fVar59 = (float)auStack_d4._0_4_ - (float)auStack_a4._0_4_;
        fVar60 = (float)auStack_d4._4_4_ - (float)auStack_a4._4_4_;
        fVar61 = fStack_cc - fStack_9c;
      }
      else {
        fVar34 = 0.0;
        fVar36 = 0.0;
        fVar38 = 0.0;
        fVar39 = 0.0;
        fVar30 = 0.0;
        fVar31 = 0.0;
        fVar32 = 0.0;
        fVar33 = 0.0;
        fVar26 = 0.0;
        fVar27 = 0.0;
        fVar28 = 0.0;
        fVar29 = 0.0;
        auVar35 = (undefined1  [4])0x0;
        fVar37 = 0.0;
        fVar40 = fVar32;
        fVar41 = fVar33;
        auVar42 = auVar35;
        fVar43 = fVar37;
        fVar44 = fVar32;
        fVar45 = fVar33;
        auVar46 = auVar35;
        fVar47 = fVar37;
        fVar48 = fVar32;
        fVar49 = fVar33;
        fVar50 = (float)auVar35;
        fVar51 = fVar37;
        fVar52 = fVar32;
        fVar53 = fVar33;
        fVar54 = (float)auVar35;
        fVar55 = fVar31;
        fVar56 = fVar32;
        fVar57 = fVar33;
        fVar58 = (float)auVar35;
        fVar59 = fVar31;
        fVar60 = fVar32;
        fVar61 = fVar33;
      }
LAB_0010584d:
      *pfVar8 = (float)auVar46;
      pfVar8[1] = fVar47;
      pfVar8[2] = fVar48;
      pfVar8[3] = fVar49;
      pfVar8[4] = (float)auVar42;
      pfVar8[5] = fVar43;
      pfVar8[6] = fVar44;
      pfVar8[7] = fVar45;
      pfVar8[0x1c] = fVar30;
      pfVar8[0x1d] = fVar31;
      pfVar8[0x1e] = fVar32;
      pfVar8[0x1f] = fVar33;
      pfVar8[0x20] = fVar26;
      pfVar8[0x21] = fVar27;
      pfVar8[0x22] = fVar28;
      pfVar8[0x23] = fVar29;
      pfVar8[0x24] = local_f8;
      pfVar8[0x25] = fStack_f4;
      pfVar8[0x26] = fStack_f0;
      pfVar8[0x27] = fStack_ec;
      pfVar8[0x28] = local_e8;
      pfVar8[0x29] = fStack_e4;
      pfVar8[0x2a] = fStack_e0;
      pfVar8[0x2b] = fStack_dc;
      pfVar8[8] = (float)auVar35;
      pfVar8[9] = fVar37;
      pfVar8[10] = fVar40;
      pfVar8[0xb] = fVar41;
      pfVar8[0xc] = fVar58;
      pfVar8[0xd] = fVar59;
      pfVar8[0xe] = fVar60;
      pfVar8[0xf] = fVar61;
      pfVar8[0x10] = fVar54;
      pfVar8[0x11] = fVar55;
      pfVar8[0x12] = fVar56;
      pfVar8[0x13] = fVar57;
      pfVar8[0x14] = fVar50;
      pfVar8[0x15] = fVar51;
      pfVar8[0x16] = fVar52;
      pfVar8[0x17] = fVar53;
      pfVar8[0x18] = fVar34;
      pfVar8[0x19] = fVar36;
      pfVar8[0x1a] = fVar38;
      pfVar8[0x1b] = fVar39;
      uStack_180._0_4_ = (undefined4)local_148[1];
      uStack_180 = CONCAT44((int)*(undefined8 *)(this + 8),(undefined4)uStack_180);
      uVar10 = uStack_180;
      local_188 = local_138;
      uStack_180._0_4_ = (undefined4)uStack_130;
      uStack_180 = CONCAT44(1,(undefined4)uStack_180);
      LOCK();
      pBVar1 = param_1 + 0x88;
      iVar3 = *(int *)pBVar1;
      *(int *)pBVar1 = *(int *)pBVar1 + 1;
      UNLOCK();
      puVar9 = (undefined8 *)((long)iVar3 * 0x40 + *(long *)(param_1 + 0x58));
      puVar9[4] = uVar20;
      *(undefined4 *)(puVar9 + 5) = 0;
      *puVar9 = local_148[0];
      puVar9[1] = uVar10;
      puVar9[2] = local_138;
      puVar9[3] = uStack_180;
    } while (uVar24 < (ulong)(local_100 - local_108));
  }
  pvVar23 = local_160;
  if (local_158 != (void *)0x0) {
    if ((ulong)((long)local_160 << 5) < 0x1c00000) {
      embree::alignedFree(local_158);
    }
    else {
      embree::os_free(local_158,(long)local_160 << 5,local_170[0]);
    }
  }
  if (pvVar23 != (vector_t *)0x0) {
    (**(code **)*local_178)(local_178,(long)pvVar23 * -0x20,1);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::setupLargeBuildRefBuilder(unsigned long, embree::TriangleMesh const*) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::
setupLargeBuildRefBuilder
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *this,ulong param_1,
          TriangleMesh *param_2)

{
  TriangleMesh TVar1;
  void *pvVar2;
  TriangleMesh *pTVar3;
  long *plVar4;
  char cVar5;
  byte bVar6;
  PrimitiveType *pPVar7;
  long *plVar8;
  undefined8 *puVar9;
  long lVar10;
  uint uVar11;
  long *plVar12;
  
  if (*(long *)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8) != 0) {
    plVar8 = *(long **)(*(long *)(this + 0x10) + param_1 * 8);
    cVar5 = (**(code **)(*plVar8 + 0x18))(plVar8,(byte)param_2[0x3e] & 7);
    if (((cVar5 == '\0') && (lVar10 = *(long *)(*(long *)(this + 0x10) + param_1 * 8), lVar10 != 0))
       && (lVar10 = __dynamic_cast(lVar10,&RefBuilderBase::typeinfo,&RefBuilderLarge::typeinfo),
          lVar10 != 0)) {
      return;
    }
    plVar8 = *(long **)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8);
    if (plVar8 != (long *)0x0) {
      (**(code **)(*plVar8 + 8))();
    }
  }
  pPVar7 = (PrimitiveType *)embree::alignedMalloc(0x240,0x10);
  embree::BVHN<4>::BVHN(pPVar7,(Scene *)&TriangleMi<4>::type);
  *(PrimitiveType **)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8) = pPVar7;
  pvVar2 = *(void **)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8);
  pTVar3 = *(TriangleMesh **)(*(long *)(*(long *)(this + 0x30) + 0x1e0) + param_1 * 8);
  if ((pTVar3 == (TriangleMesh *)0x0) || (pTVar3[0x3c] != (TriangleMesh)0x14)) {
LAB_0010607d:
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar11 = (uint)param_1;
  if (this[0xa0] == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>)0x0) {
    bVar6 = (byte)pTVar3[0x3e] & 7;
    if (2 < bVar6) {
      if (bVar6 != 3) goto LAB_0010607d;
      plVar8 = (long *)embree::sse2::BVH4Triangle4iMeshRefitSAH(pvVar2,pTVar3,uVar11,0);
      goto LAB_00105ec1;
    }
    if (bVar6 != 0) {
      plVar8 = (long *)embree::sse2::BVH4Triangle4iMeshBuilderSAH(pvVar2,pTVar3,uVar11,0);
      goto LAB_00105ec1;
    }
  }
  plVar8 = (long *)embree::sse2::BVH4Triangle4iMeshBuilderMortonGeneral(pvVar2,pTVar3,uVar11,0);
LAB_00105ec1:
  plVar12 = (long *)(param_1 * 8 + *(long *)(this + 0x10));
  puVar9 = (undefined8 *)operator_new(0x20);
  TVar1 = param_2[0x3e];
  if (plVar8 == (long *)0x0) {
    puVar9[1] = param_1;
    *puVar9 = &PTR__RefBuilderLarge_00143788;
    puVar9[2] = 0;
    *(uint *)(puVar9 + 3) = (byte)TVar1 & 7;
    plVar8 = (long *)*plVar12;
    *plVar12 = (long)puVar9;
    if (plVar8 != (long *)0x0) {
                    /* WARNING: Could not recover jumptable at 0x00106033. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar8 + 8))();
      return;
    }
  }
  else {
    if (*(code **)(*plVar8 + 0x10) == RefCount::refInc) {
      LOCK();
      plVar8[1] = plVar8[1] + 1;
      UNLOCK();
      *puVar9 = &PTR__RefBuilderLarge_00143788;
      puVar9[1] = param_1;
      puVar9[2] = plVar8;
    }
    else {
      (**(code **)(*plVar8 + 0x10))(plVar8);
      puVar9[1] = param_1;
      *puVar9 = &PTR__RefBuilderLarge_00143788;
      puVar9[2] = plVar8;
    }
    if (*(code **)(*plVar8 + 0x10) == RefCount::refInc) {
      LOCK();
      plVar8[1] = plVar8[1] + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*plVar8 + 0x10))(plVar8);
    }
    *(uint *)(puVar9 + 3) = (byte)TVar1 & 7;
    plVar4 = (long *)*plVar12;
    *plVar12 = (long)puVar9;
    if (plVar4 != (long *)0x0) {
      (**(code **)(*plVar4 + 8))();
    }
    if (*(code **)(*plVar8 + 0x18) != RefCount::refDec) {
                    /* WARNING: Could not recover jumptable at 0x00106049. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar8 + 0x18))(plVar8);
      return;
    }
    LOCK();
    plVar12 = plVar8 + 1;
    *plVar12 = *plVar12 + -1;
    UNLOCK();
    if (*plVar12 == 0) {
                    /* WARNING: Could not recover jumptable at 0x00105f7d. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar8 + 8))(plVar8);
      return;
    }
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::setupLargeBuildRefBuilder(unsigned long, embree::TriangleMesh const*) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::
setupLargeBuildRefBuilder
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *this,ulong param_1,
          TriangleMesh *param_2)

{
  TriangleMesh TVar1;
  void *pvVar2;
  TriangleMesh *pTVar3;
  long *plVar4;
  char cVar5;
  byte bVar6;
  PrimitiveType *pPVar7;
  long *plVar8;
  undefined8 *puVar9;
  long lVar10;
  uint uVar11;
  long *plVar12;
  
  if (*(long *)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8) != 0) {
    plVar8 = *(long **)(*(long *)(this + 0x10) + param_1 * 8);
    cVar5 = (**(code **)(*plVar8 + 0x18))(plVar8,(byte)param_2[0x3e] & 7);
    if (((cVar5 == '\0') && (lVar10 = *(long *)(*(long *)(this + 0x10) + param_1 * 8), lVar10 != 0))
       && (lVar10 = __dynamic_cast(lVar10,&RefBuilderBase::typeinfo,&RefBuilderLarge::typeinfo),
          lVar10 != 0)) {
      return;
    }
    plVar8 = *(long **)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8);
    if (plVar8 != (long *)0x0) {
      (**(code **)(*plVar8 + 8))();
    }
  }
  pPVar7 = (PrimitiveType *)embree::alignedMalloc(0x240,0x10);
  embree::BVHN<4>::BVHN(pPVar7,(Scene *)&TriangleMv<4>::type);
  *(PrimitiveType **)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8) = pPVar7;
  pvVar2 = *(void **)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8);
  pTVar3 = *(TriangleMesh **)(*(long *)(*(long *)(this + 0x30) + 0x1e0) + param_1 * 8);
  if ((pTVar3 == (TriangleMesh *)0x0) || (pTVar3[0x3c] != (TriangleMesh)0x14)) {
LAB_0010634d:
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar11 = (uint)param_1;
  if (this[0xa0] == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>)0x0) {
    bVar6 = (byte)pTVar3[0x3e] & 7;
    if (2 < bVar6) {
      if (bVar6 != 3) goto LAB_0010634d;
      plVar8 = (long *)embree::sse2::BVH4Triangle4vMeshRefitSAH(pvVar2,pTVar3,uVar11,0);
      goto LAB_00106191;
    }
    if (bVar6 != 0) {
      plVar8 = (long *)embree::sse2::BVH4Triangle4vMeshBuilderSAH(pvVar2,pTVar3,uVar11,0);
      goto LAB_00106191;
    }
  }
  plVar8 = (long *)embree::sse2::BVH4Triangle4vMeshBuilderMortonGeneral(pvVar2,pTVar3,uVar11,0);
LAB_00106191:
  plVar12 = (long *)(param_1 * 8 + *(long *)(this + 0x10));
  puVar9 = (undefined8 *)operator_new(0x20);
  TVar1 = param_2[0x3e];
  if (plVar8 == (long *)0x0) {
    puVar9[1] = param_1;
    *puVar9 = &PTR__RefBuilderLarge_001437e8;
    puVar9[2] = 0;
    *(uint *)(puVar9 + 3) = (byte)TVar1 & 7;
    plVar8 = (long *)*plVar12;
    *plVar12 = (long)puVar9;
    if (plVar8 != (long *)0x0) {
                    /* WARNING: Could not recover jumptable at 0x00106303. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar8 + 8))();
      return;
    }
  }
  else {
    if (*(code **)(*plVar8 + 0x10) == RefCount::refInc) {
      LOCK();
      plVar8[1] = plVar8[1] + 1;
      UNLOCK();
      *puVar9 = &PTR__RefBuilderLarge_001437e8;
      puVar9[1] = param_1;
      puVar9[2] = plVar8;
    }
    else {
      (**(code **)(*plVar8 + 0x10))(plVar8);
      puVar9[1] = param_1;
      *puVar9 = &PTR__RefBuilderLarge_001437e8;
      puVar9[2] = plVar8;
    }
    if (*(code **)(*plVar8 + 0x10) == RefCount::refInc) {
      LOCK();
      plVar8[1] = plVar8[1] + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*plVar8 + 0x10))(plVar8);
    }
    *(uint *)(puVar9 + 3) = (byte)TVar1 & 7;
    plVar4 = (long *)*plVar12;
    *plVar12 = (long)puVar9;
    if (plVar4 != (long *)0x0) {
      (**(code **)(*plVar4 + 8))();
    }
    if (*(code **)(*plVar8 + 0x18) != RefCount::refDec) {
                    /* WARNING: Could not recover jumptable at 0x00106319. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar8 + 0x18))(plVar8);
      return;
    }
    LOCK();
    plVar12 = plVar8 + 1;
    *plVar12 = *plVar12 + -1;
    UNLOCK();
    if (*plVar12 == 0) {
                    /* WARNING: Could not recover jumptable at 0x0010624d. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar8 + 8))(plVar8);
      return;
    }
  }
  return;
}



/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::setupLargeBuildRefBuilder(unsigned long, embree::TriangleMesh const*) */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::
setupLargeBuildRefBuilder
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *this,ulong param_1,
          TriangleMesh *param_2)

{
  TriangleMesh TVar1;
  void *pvVar2;
  TriangleMesh *pTVar3;
  long *plVar4;
  char cVar5;
  byte bVar6;
  PrimitiveType *pPVar7;
  long *plVar8;
  undefined8 *puVar9;
  long lVar10;
  uint uVar11;
  long *plVar12;
  
  if (*(long *)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8) != 0) {
    plVar8 = *(long **)(*(long *)(this + 0x10) + param_1 * 8);
    cVar5 = (**(code **)(*plVar8 + 0x18))(plVar8,(byte)param_2[0x3e] & 7);
    if (((cVar5 == '\0') && (lVar10 = *(long *)(*(long *)(this + 0x10) + param_1 * 8), lVar10 != 0))
       && (lVar10 = __dynamic_cast(lVar10,&RefBuilderBase::typeinfo,&RefBuilderLarge::typeinfo),
          lVar10 != 0)) {
      return;
    }
    plVar8 = *(long **)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8);
    if (plVar8 != (long *)0x0) {
      (**(code **)(*plVar8 + 8))();
    }
  }
  pPVar7 = (PrimitiveType *)embree::alignedMalloc(0x240,0x10);
  embree::BVHN<4>::BVHN(pPVar7,(Scene *)&TriangleM<4>::type);
  *(PrimitiveType **)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8) = pPVar7;
  pvVar2 = *(void **)(*(long *)(*(long *)(this + 0x28) + 0x200) + param_1 * 8);
  pTVar3 = *(TriangleMesh **)(*(long *)(*(long *)(this + 0x30) + 0x1e0) + param_1 * 8);
  if ((pTVar3 == (TriangleMesh *)0x0) || (pTVar3[0x3c] != (TriangleMesh)0x14)) {
LAB_0010661d:
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar11 = (uint)param_1;
  if (this[0xa0] == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>)0x0) {
    bVar6 = (byte)pTVar3[0x3e] & 7;
    if (2 < bVar6) {
      if (bVar6 != 3) goto LAB_0010661d;
      plVar8 = (long *)embree::sse2::BVH4Triangle4MeshRefitSAH(pvVar2,pTVar3,uVar11,0);
      goto LAB_00106461;
    }
    if (bVar6 != 0) {
      plVar8 = (long *)embree::sse2::BVH4Triangle4MeshBuilderSAH(pvVar2,pTVar3,uVar11,0);
      goto LAB_00106461;
    }
  }
  plVar8 = (long *)embree::sse2::BVH4Triangle4MeshBuilderMortonGeneral(pvVar2,pTVar3,uVar11,0);
LAB_00106461:
  plVar12 = (long *)(param_1 * 8 + *(long *)(this + 0x10));
  puVar9 = (undefined8 *)operator_new(0x20);
  TVar1 = param_2[0x3e];
  if (plVar8 == (long *)0x0) {
    puVar9[1] = param_1;
    *puVar9 = &PTR__RefBuilderLarge_00143848;
    puVar9[2] = 0;
    *(uint *)(puVar9 + 3) = (byte)TVar1 & 7;
    plVar8 = (long *)*plVar12;
    *plVar12 = (long)puVar9;
    if (plVar8 != (long *)0x0) {
                    /* WARNING: Could not recover jumptable at 0x001065d3. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar8 + 8))();
      return;
    }
  }
  else {
    if (*(code **)(*plVar8 + 0x10) == RefCount::refInc) {
      LOCK();
      plVar8[1] = plVar8[1] + 1;
      UNLOCK();
      *puVar9 = &PTR__RefBuilderLarge_00143848;
      puVar9[1] = param_1;
      puVar9[2] = plVar8;
    }
    else {
      (**(code **)(*plVar8 + 0x10))(plVar8);
      puVar9[1] = param_1;
      *puVar9 = &PTR__RefBuilderLarge_00143848;
      puVar9[2] = plVar8;
    }
    if (*(code **)(*plVar8 + 0x10) == RefCount::refInc) {
      LOCK();
      plVar8[1] = plVar8[1] + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*plVar8 + 0x10))(plVar8);
    }
    *(uint *)(puVar9 + 3) = (byte)TVar1 & 7;
    plVar4 = (long *)*plVar12;
    *plVar12 = (long)puVar9;
    if (plVar4 != (long *)0x0) {
      (**(code **)(*plVar4 + 8))();
    }
    if (*(code **)(*plVar8 + 0x18) != RefCount::refDec) {
                    /* WARNING: Could not recover jumptable at 0x001065e9. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar8 + 0x18))(plVar8);
      return;
    }
    LOCK();
    plVar12 = plVar8 + 1;
    *plVar12 = *plVar12 + -1;
    UNLOCK();
    if (*plVar12 == 0) {
                    /* WARNING: Could not recover jumptable at 0x0010651d. Too many branches */
                    /* WARNING: Treating indirect jump as call */
      (**(code **)(*plVar8 + 8))(plVar8);
      return;
    }
  }
  return;
}



/* std::vector<embree::BVHN<4>*, std::allocator<embree::BVHN<4>*> >::_M_default_append(unsigned
   long) */

void __thiscall
std::vector<embree::BVHN<4>*,std::allocator<embree::BVHN<4>*>>::_M_default_append
          (vector<embree::BVHN<4>*,std::allocator<embree::BVHN<4>*>> *this,ulong param_1)

{
  ulong uVar1;
  ulong uVar2;
  void *__dest;
  void *pvVar3;
  undefined8 *__s;
  size_t sVar4;
  undefined8 *puVar5;
  
  if (param_1 == 0) {
    return;
  }
  puVar5 = *(undefined8 **)(this + 8);
  pvVar3 = *(void **)this;
  if (param_1 <= (ulong)(*(long *)(this + 0x10) - (long)puVar5 >> 3)) {
    *puVar5 = 0;
    __s = puVar5 + 1;
    if (param_1 - 1 != 0) {
      sVar4 = (long)__s + ((param_1 - 1) * 8 - (long)puVar5) + -8;
      pvVar3 = memset(__s,0,sVar4);
      __s = (undefined8 *)((long)pvVar3 + sVar4);
    }
    *(undefined8 **)(this + 8) = __s;
    return;
  }
  sVar4 = (long)puVar5 - (long)pvVar3;
  uVar2 = (long)sVar4 >> 3;
  if (0xfffffffffffffff - uVar2 < param_1) {
                    /* WARNING: Subroutine does not return */
    std::__throw_length_error("vector::_M_default_append");
  }
  uVar1 = param_1 + uVar2;
  if (uVar2 < param_1) {
    uVar2 = 0xfffffffffffffff;
    if (uVar1 < 0x1000000000000000) {
      uVar2 = uVar1;
    }
    uVar2 = uVar2 * 8;
    __dest = operator_new(uVar2);
    puVar5 = (undefined8 *)((long)__dest + sVar4);
    *puVar5 = 0;
    if (param_1 - 1 != 0) goto LAB_001066f5;
LAB_00106709:
    if (sVar4 == 0) goto LAB_00106712;
  }
  else {
    uVar2 = uVar2 * 2;
    if (0xfffffffffffffff < uVar2) {
      uVar2 = 0xfffffffffffffff;
    }
    uVar2 = uVar2 * 8;
    __dest = operator_new(uVar2);
    puVar5 = (undefined8 *)((long)__dest + sVar4);
    *puVar5 = 0;
    if (param_1 != 1) {
LAB_001066f5:
      memset(puVar5 + 1,0,(param_1 - 1) * 8);
      goto LAB_00106709;
    }
  }
  memmove(__dest,pvVar3,sVar4);
LAB_00106712:
  if (pvVar3 != (void *)0x0) {
    operator_delete(pvVar3,*(long *)(this + 0x10) - (long)pvVar3);
  }
  *(void **)this = __dest;
  *(void **)(this + 8) = (void *)((long)__dest + uVar1 * 8);
  *(ulong *)(this + 0x10) = (long)__dest + uVar2;
  return;
}



/* std::vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::RefBuilderBase, std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::RefBuilderBase> >,
   std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::RefBuilderBase, std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::RefBuilderBase> > > >::_M_default_append(unsigned
   long) */

void __thiscall
std::
vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase>>>>
::_M_default_append(vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase>>>>
                    *this,ulong param_1)

{
  ulong uVar1;
  undefined8 *__s;
  undefined8 *puVar2;
  undefined8 uVar3;
  ulong uVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  undefined8 *puVar8;
  ulong uVar9;
  
  if (param_1 == 0) {
    return;
  }
  __s = *(undefined8 **)(this + 8);
  puVar2 = *(undefined8 **)this;
  if (param_1 <= (ulong)(*(long *)(this + 0x10) - (long)__s >> 3)) {
    memset(__s,0,param_1 * 8);
    *(undefined8 **)(this + 8) = __s + param_1;
    return;
  }
  uVar4 = (long)__s - (long)puVar2 >> 3;
  if (param_1 <= 0xfffffffffffffff - uVar4) {
    uVar1 = param_1 + uVar4;
    uVar9 = 0xfffffffffffffff;
    if (uVar1 < 0x1000000000000000) {
      uVar9 = uVar1;
    }
    if ((param_1 <= uVar4) && (uVar9 = uVar4 * 2, 0xfffffffffffffff < uVar9)) {
      uVar9 = 0xfffffffffffffff;
    }
    puVar5 = (undefined8 *)operator_new(uVar9 * 8);
    memset((void *)((long)puVar5 + ((long)__s - (long)puVar2)),0,param_1 * 8);
    if (puVar2 != __s) {
      puVar6 = puVar5;
      puVar8 = puVar2;
      do {
        uVar3 = *puVar8;
        puVar7 = puVar6 + 1;
        puVar8 = puVar8 + 1;
        *puVar6 = uVar3;
        puVar6 = puVar7;
      } while (puVar7 != (undefined8 *)(((long)__s - (long)puVar2) + (long)puVar5));
    }
    if (puVar2 != (undefined8 *)0x0) {
      operator_delete(puVar2,*(long *)(this + 0x10) - (long)puVar2);
    }
    *(undefined8 **)this = puVar5;
    *(undefined8 **)(this + 8) = puVar5 + uVar1;
    *(undefined8 **)(this + 0x10) = puVar5 + uVar9;
    return;
  }
                    /* WARNING: Subroutine does not return */
  std::__throw_length_error("vector::_M_default_append");
}



/* std::vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::RefBuilderBase, std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::RefBuilderBase> >,
   std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::RefBuilderBase, std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::RefBuilderBase> > > >::_M_default_append(unsigned
   long) */

void __thiscall
std::
vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase>>>>
::_M_default_append(vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase>>>>
                    *this,ulong param_1)

{
  ulong uVar1;
  undefined8 *__s;
  undefined8 *puVar2;
  undefined8 uVar3;
  ulong uVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  undefined8 *puVar8;
  ulong uVar9;
  
  if (param_1 == 0) {
    return;
  }
  __s = *(undefined8 **)(this + 8);
  puVar2 = *(undefined8 **)this;
  if (param_1 <= (ulong)(*(long *)(this + 0x10) - (long)__s >> 3)) {
    memset(__s,0,param_1 * 8);
    *(undefined8 **)(this + 8) = __s + param_1;
    return;
  }
  uVar4 = (long)__s - (long)puVar2 >> 3;
  if (param_1 <= 0xfffffffffffffff - uVar4) {
    uVar1 = param_1 + uVar4;
    uVar9 = 0xfffffffffffffff;
    if (uVar1 < 0x1000000000000000) {
      uVar9 = uVar1;
    }
    if ((param_1 <= uVar4) && (uVar9 = uVar4 * 2, 0xfffffffffffffff < uVar9)) {
      uVar9 = 0xfffffffffffffff;
    }
    puVar5 = (undefined8 *)operator_new(uVar9 * 8);
    memset((void *)((long)puVar5 + ((long)__s - (long)puVar2)),0,param_1 * 8);
    if (puVar2 != __s) {
      puVar6 = puVar5;
      puVar8 = puVar2;
      do {
        uVar3 = *puVar8;
        puVar7 = puVar6 + 1;
        puVar8 = puVar8 + 1;
        *puVar6 = uVar3;
        puVar6 = puVar7;
      } while (puVar7 != (undefined8 *)(((long)__s - (long)puVar2) + (long)puVar5));
    }
    if (puVar2 != (undefined8 *)0x0) {
      operator_delete(puVar2,*(long *)(this + 0x10) - (long)puVar2);
    }
    *(undefined8 **)this = puVar5;
    *(undefined8 **)(this + 8) = puVar5 + uVar1;
    *(undefined8 **)(this + 0x10) = puVar5 + uVar9;
    return;
  }
                    /* WARNING: Subroutine does not return */
  std::__throw_length_error("vector::_M_default_append");
}



/* std::vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::RefBuilderBase, std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::RefBuilderBase> >,
   std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::RefBuilderBase, std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::RefBuilderBase> > > >::_M_default_append(unsigned
   long) */

void __thiscall
std::
vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase>>>>
::_M_default_append(vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase>>>>
                    *this,ulong param_1)

{
  ulong uVar1;
  undefined8 *__s;
  undefined8 *puVar2;
  undefined8 uVar3;
  ulong uVar4;
  undefined8 *puVar5;
  undefined8 *puVar6;
  undefined8 *puVar7;
  undefined8 *puVar8;
  ulong uVar9;
  
  if (param_1 == 0) {
    return;
  }
  __s = *(undefined8 **)(this + 8);
  puVar2 = *(undefined8 **)this;
  if (param_1 <= (ulong)(*(long *)(this + 0x10) - (long)__s >> 3)) {
    memset(__s,0,param_1 * 8);
    *(undefined8 **)(this + 8) = __s + param_1;
    return;
  }
  uVar4 = (long)__s - (long)puVar2 >> 3;
  if (param_1 <= 0xfffffffffffffff - uVar4) {
    uVar1 = param_1 + uVar4;
    uVar9 = 0xfffffffffffffff;
    if (uVar1 < 0x1000000000000000) {
      uVar9 = uVar1;
    }
    if ((param_1 <= uVar4) && (uVar9 = uVar4 * 2, 0xfffffffffffffff < uVar9)) {
      uVar9 = 0xfffffffffffffff;
    }
    puVar5 = (undefined8 *)operator_new(uVar9 * 8);
    memset((void *)((long)puVar5 + ((long)__s - (long)puVar2)),0,param_1 * 8);
    if (puVar2 != __s) {
      puVar6 = puVar5;
      puVar8 = puVar2;
      do {
        uVar3 = *puVar8;
        puVar7 = puVar6 + 1;
        puVar8 = puVar8 + 1;
        *puVar6 = uVar3;
        puVar6 = puVar7;
      } while (puVar7 != (undefined8 *)(((long)__s - (long)puVar2) + (long)puVar5));
    }
    if (puVar2 != (undefined8 *)0x0) {
      operator_delete(puVar2,*(long *)(this + 0x10) - (long)puVar2);
    }
    *(undefined8 **)this = puVar5;
    *(undefined8 **)(this + 8) = puVar5 + uVar1;
    *(undefined8 **)(this + 0x10) = puVar5 + uVar9;
    return;
  }
                    /* WARNING: Subroutine does not return */
  std::__throw_length_error("vector::_M_default_append");
}



/* WARNING: Removing unreachable block (ram,0x00107025) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143878;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  long lVar8;
  long lVar9;
  ulong uVar10;
  TaskScheduler *pTVar11;
  long *plVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar13 = *(ulong *)(this + 8);
  uVar10 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar13 - uVar10) {
    uStack_40 = *(undefined8 *)(this + 0x20);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    uVar13 = uVar13 + uVar10 >> 1;
    local_58 = uVar13;
    uStack_50 = uVar10;
    local_48 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_58,pTVar4,uVar13 - uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_0010755e;
      lVar5 = *(long *)(lVar8 + 0xc00c0);
      uVar2 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010755e;
      *(ulong *)(lVar8 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar8 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_00143878;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[5] = local_38;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar6 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar3;
      *(long *)(lVar9 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar4;
      *(long *)(lVar9 + 0x68) = lVar5;
      *(ulong *)(lVar9 + 0x70) = uVar13 - uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_88 = *(long *)(this + 8);
    uStack_70 = *(undefined8 *)(this + 0x20);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    local_78 = *(undefined8 *)(this + 0x18);
    uVar10 = local_88 - uVar13;
    uStack_80 = uVar13;
    local_68 = pTVar4;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_88,pTVar4,uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) {
LAB_0010755e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar8 + 0xc00c0);
      uVar13 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar13) goto LAB_0010755e;
      *(ulong *)(lVar8 + 0xc00c0) = uVar13;
      puVar3 = (undefined8 *)(lVar8 + 0x40090 + uVar13);
      *puVar3 = &PTR_execute_00143878;
      puVar3[1] = local_88;
      puVar3[2] = uStack_80;
      puVar3[5] = local_68;
      puVar3[3] = local_78;
      puVar3[4] = uStack_70;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar6 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar3;
      *(long *)(lVar9 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar4;
      *(long *)(lVar9 + 0x68) = lVar5;
      *(ulong *)(lVar9 + 0x70) = uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    for (; uVar10 < uVar13; uVar10 = uVar10 + 1) {
      lVar8 = *(long *)(this + 0x20);
      while( true ) {
        lVar5 = uVar10 * 8;
        plVar12 = (long *)(*(long *)(lVar8 + 0x10) + lVar5);
        plVar7 = (long *)*plVar12;
        *plVar12 = 0;
        if (plVar7 != (long *)0x0) {
          (**(code **)(*plVar7 + 8))();
        }
        lVar8 = *(long *)(this + 0x20);
        plVar7 = *(long **)(*(long *)(*(long *)(lVar8 + 0x28) + 0x200) + lVar5);
        if (plVar7 != (long *)0x0) break;
        uVar10 = uVar10 + 1;
        if (uVar13 <= uVar10) goto LAB_001074bf;
      }
      (**(code **)(*plVar7 + 8))();
      *(undefined8 *)(*(long *)(*(long *)(*(long *)(this + 0x20) + 0x28) + 0x200) + lVar5) = 0;
    }
LAB_001074bf:
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00107945) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143890;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *this_00;
  TriangleMesh *pTVar6;
  long *plVar7;
  long lVar8;
  long lVar9;
  undefined8 *puVar10;
  TaskScheduler *pTVar11;
  long *plVar12;
  ulong uVar13;
  ulong uVar14;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  TaskGroupContext *local_48;
  long local_40;
  
  uVar14 = *(ulong *)(this + 8);
  uVar13 = *(ulong *)(this + 0x10);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar14 - uVar13 <= *(ulong *)(this + 0x18)) {
joined_r0x00107d79:
    if (uVar13 < uVar14) {
      do {
        this_00 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> **)
                   (this + 0x20);
        pTVar6 = *(TriangleMesh **)(*(long *)(*(long *)(this_00 + 0x30) + 0x1e0) + uVar13 * 8);
        if (((pTVar6 != (TriangleMesh *)0x0) && (pTVar6[0x3c] == (TriangleMesh)0x14)) &&
           (*(int *)(pTVar6 + 0x24) == 1)) {
          if (4 < *(uint *)(pTVar6 + 0x20)) goto code_r0x00107deb;
          plVar12 = (long *)(uVar13 * 8 + *(long *)(this_00 + 0x10));
          if ((*plVar12 == 0) ||
             (lVar8 = __dynamic_cast(*plVar12,&sse2::
                                               BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>
                                               ::RefBuilderBase::typeinfo,
                                     &sse2::
                                      BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>
                                      ::RefBuilderSmall::typeinfo,0), lVar8 == 0)) {
            puVar10 = (undefined8 *)operator_new(0x10);
            *puVar10 = &PTR__RefBuilderSmall_00143758;
            puVar10[1] = uVar13;
            plVar7 = (long *)*plVar12;
            *plVar12 = (long)puVar10;
            if (plVar7 != (long *)0x0) {
              (**(code **)(*plVar7 + 8))();
            }
          }
        }
        uVar13 = uVar13 + 1;
        if (uVar14 <= uVar13) break;
      } while( true );
    }
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
    goto LAB_00107edb;
  }
  uStack_50 = *(undefined8 *)(this + 0x20);
  pTVar3 = *(TaskGroupContext **)(this + 0x28);
  uVar14 = uVar14 + uVar13 >> 1;
  local_68 = uVar14;
  uStack_60 = uVar13;
  local_58 = *(ulong *)(this + 0x18);
  local_48 = pTVar3;
  lVar8 = embree::TaskScheduler::thread();
  if (lVar8 == 0) {
    pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (pTVar11,(_lambda___1_ *)&local_68,pTVar3,uVar14 - uVar13,true);
  }
  else {
    if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_00107ee0;
    lVar4 = *(long *)(lVar8 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (0x80000 < uVar2) goto LAB_00107ee0;
    *(ulong *)(lVar8 + 0xc00c0) = uVar2;
    puVar10 = (undefined8 *)(lVar8 + 0x40090 + uVar2);
    *puVar10 = &PTR_execute_00143890;
    puVar10[1] = local_68;
    puVar10[2] = uStack_60;
    puVar10[5] = local_48;
    puVar10[3] = local_58;
    puVar10[4] = uStack_50;
    lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
    piVar1 = (int *)(lVar8 + 0x40 + lVar9);
    lVar5 = *(long *)(lVar8 + 0xc0100);
    *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
    *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
    lVar9 = lVar9 + lVar8;
    *(undefined8 **)(lVar9 + 0x50) = puVar10;
    *(long *)(lVar9 + 0x58) = lVar5;
    *(TaskGroupContext **)(lVar9 + 0x60) = pTVar3;
    *(long *)(lVar9 + 0x68) = lVar4;
    *(ulong *)(lVar9 + 0x70) = uVar14 - uVar13;
    if (lVar5 != 0) {
      LOCK();
      *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
      UNLOCK();
    }
    LOCK();
    if (*piVar1 == 0) {
      *piVar1 = 1;
    }
    UNLOCK();
    LOCK();
    *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
    UNLOCK();
    if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
      LOCK();
      *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
      UNLOCK();
    }
  }
  local_88 = *(undefined8 *)(this + 0x18);
  local_98 = *(long *)(this + 8);
  pTVar3 = *(TaskGroupContext **)(this + 0x28);
  uStack_80 = *(undefined8 *)(this + 0x20);
  uVar13 = local_98 - uVar14;
  uStack_90 = uVar14;
  local_78 = pTVar3;
  lVar8 = embree::TaskScheduler::thread();
  if (lVar8 == 0) {
    pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (pTVar11,(_lambda___1_ *)&local_98,pTVar3,uVar13,true);
LAB_00107d3c:
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
LAB_00107edb:
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  if (*(ulong *)(lVar8 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar8 + 0xc00c0);
    uVar14 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar14 < 0x80001) {
      *(ulong *)(lVar8 + 0xc00c0) = uVar14;
      puVar10 = (undefined8 *)(lVar8 + 0x40090 + uVar14);
      *puVar10 = &PTR_execute_00143890;
      puVar10[1] = local_98;
      puVar10[2] = uStack_90;
      puVar10[5] = local_78;
      puVar10[3] = local_88;
      puVar10[4] = uStack_80;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar5 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar10;
      *(long *)(lVar9 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar3;
      *(long *)(lVar9 + 0x68) = lVar4;
      *(ulong *)(lVar9 + 0x70) = uVar13;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_00107d3c;
    }
  }
LAB_00107ee0:
                    /* WARNING: Subroutine does not return */
  abort();
code_r0x00107deb:
  sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::setupLargeBuildRefBuilder
            (this_00,uVar13,pTVar6);
  uVar13 = uVar13 + 1;
  goto joined_r0x00107d79;
}



/* WARNING: Removing unreachable block (ram,0x001082c5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_001438a8;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::range<unsigned_long>const&)#3}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::range<unsigned_long>const&)#3}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  TaskScheduler *pTVar9;
  ulong uVar10;
  ulong uVar11;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar11 = *(ulong *)(this + 8);
  uVar10 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar11 - uVar10) {
    uStack_40 = *(undefined8 *)(this + 0x20);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    uVar11 = uVar11 + uVar10 >> 1;
    local_58 = uVar11;
    uStack_50 = uVar10;
    local_48 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_58,pTVar4,uVar11 - uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_001087d6;
      lVar5 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_001087d6;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar7 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_001438a8;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[5] = local_38;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar6 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar3;
      *(long *)(lVar8 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar4;
      *(long *)(lVar8 + 0x68) = lVar5;
      *(ulong *)(lVar8 + 0x70) = uVar11 - uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_78 = *(undefined8 *)(this + 0x18);
    local_88 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    uStack_70 = *(undefined8 *)(this + 0x20);
    uVar10 = local_88 - uVar11;
    uStack_80 = uVar11;
    local_68 = pTVar4;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_88,pTVar4,uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_001087d6:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar7 + 0xc00c0);
      uVar11 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar11) goto LAB_001087d6;
      *(ulong *)(lVar7 + 0xc00c0) = uVar11;
      puVar3 = (undefined8 *)(lVar7 + 0x40090 + uVar11);
      *puVar3 = &PTR_execute_001438a8;
      puVar3[1] = local_88;
      puVar3[2] = uStack_80;
      puVar3[5] = local_68;
      puVar3[3] = local_78;
      puVar3[4] = uStack_70;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar6 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar3;
      *(long *)(lVar8 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar4;
      *(long *)(lVar8 + 0x68) = lVar5;
      *(ulong *)(lVar8 + 0x70) = uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    for (; uVar10 < uVar11; uVar10 = uVar10 + 1) {
      lVar7 = *(long *)(*(long *)(*(long *)(*(long *)(this + 0x20) + 0x30) + 0x1e0) + uVar10 * 8);
      if ((((lVar7 != 0) && (*(char *)(lVar7 + 0x3c) == '\x14')) &&
          ((*(byte *)(lVar7 + 0x3e) & 0x20) != 0)) && (*(int *)(lVar7 + 0x24) == 1)) {
        (**(code **)(**(long **)(*(long *)(*(long *)(this + 0x20) + 0x10) + uVar10 * 8) + 0x10))();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00108bb5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_001438c0;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  long lVar8;
  long lVar9;
  ulong uVar10;
  TaskScheduler *pTVar11;
  long *plVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar13 = *(ulong *)(this + 8);
  uVar10 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar13 - uVar10) {
    uStack_40 = *(undefined8 *)(this + 0x20);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    uVar13 = uVar13 + uVar10 >> 1;
    local_58 = uVar13;
    uStack_50 = uVar10;
    local_48 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_58,pTVar4,uVar13 - uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_001090ee;
      lVar5 = *(long *)(lVar8 + 0xc00c0);
      uVar2 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_001090ee;
      *(ulong *)(lVar8 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar8 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_001438c0;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[5] = local_38;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar6 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar3;
      *(long *)(lVar9 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar4;
      *(long *)(lVar9 + 0x68) = lVar5;
      *(ulong *)(lVar9 + 0x70) = uVar13 - uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_88 = *(long *)(this + 8);
    uStack_70 = *(undefined8 *)(this + 0x20);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    local_78 = *(undefined8 *)(this + 0x18);
    uVar10 = local_88 - uVar13;
    uStack_80 = uVar13;
    local_68 = pTVar4;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_88,pTVar4,uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) {
LAB_001090ee:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar8 + 0xc00c0);
      uVar13 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar13) goto LAB_001090ee;
      *(ulong *)(lVar8 + 0xc00c0) = uVar13;
      puVar3 = (undefined8 *)(lVar8 + 0x40090 + uVar13);
      *puVar3 = &PTR_execute_001438c0;
      puVar3[1] = local_88;
      puVar3[2] = uStack_80;
      puVar3[5] = local_68;
      puVar3[3] = local_78;
      puVar3[4] = uStack_70;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar6 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar3;
      *(long *)(lVar9 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar4;
      *(long *)(lVar9 + 0x68) = lVar5;
      *(ulong *)(lVar9 + 0x70) = uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    for (; uVar10 < uVar13; uVar10 = uVar10 + 1) {
      lVar8 = *(long *)(this + 0x20);
      while( true ) {
        lVar5 = uVar10 * 8;
        plVar12 = (long *)(*(long *)(lVar8 + 0x10) + lVar5);
        plVar7 = (long *)*plVar12;
        *plVar12 = 0;
        if (plVar7 != (long *)0x0) {
          (**(code **)(*plVar7 + 8))();
        }
        lVar8 = *(long *)(this + 0x20);
        plVar7 = *(long **)(*(long *)(*(long *)(lVar8 + 0x28) + 0x200) + lVar5);
        if (plVar7 != (long *)0x0) break;
        uVar10 = uVar10 + 1;
        if (uVar13 <= uVar10) goto LAB_0010904f;
      }
      (**(code **)(*plVar7 + 8))();
      *(undefined8 *)(*(long *)(*(long *)(*(long *)(this + 0x20) + 0x28) + 0x200) + lVar5) = 0;
    }
LAB_0010904f:
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x001094d5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_001438d8;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *this_00;
  TriangleMesh *pTVar6;
  long *plVar7;
  long lVar8;
  long lVar9;
  undefined8 *puVar10;
  TaskScheduler *pTVar11;
  long *plVar12;
  ulong uVar13;
  ulong uVar14;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  TaskGroupContext *local_48;
  long local_40;
  
  uVar14 = *(ulong *)(this + 8);
  uVar13 = *(ulong *)(this + 0x10);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar14 - uVar13 <= *(ulong *)(this + 0x18)) {
joined_r0x00109909:
    if (uVar13 < uVar14) {
      do {
        this_00 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> **)
                   (this + 0x20);
        pTVar6 = *(TriangleMesh **)(*(long *)(*(long *)(this_00 + 0x30) + 0x1e0) + uVar13 * 8);
        if (((pTVar6 != (TriangleMesh *)0x0) && (pTVar6[0x3c] == (TriangleMesh)0x14)) &&
           (*(int *)(pTVar6 + 0x24) == 1)) {
          if (4 < *(uint *)(pTVar6 + 0x20)) goto code_r0x0010997b;
          plVar12 = (long *)(uVar13 * 8 + *(long *)(this_00 + 0x10));
          if ((*plVar12 == 0) ||
             (lVar8 = __dynamic_cast(*plVar12,&sse2::
                                               BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>
                                               ::RefBuilderBase::typeinfo,
                                     &sse2::
                                      BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>
                                      ::RefBuilderSmall::typeinfo,0), lVar8 == 0)) {
            puVar10 = (undefined8 *)operator_new(0x10);
            *puVar10 = &PTR__RefBuilderSmall_001437b8;
            puVar10[1] = uVar13;
            plVar7 = (long *)*plVar12;
            *plVar12 = (long)puVar10;
            if (plVar7 != (long *)0x0) {
              (**(code **)(*plVar7 + 8))();
            }
          }
        }
        uVar13 = uVar13 + 1;
        if (uVar14 <= uVar13) break;
      } while( true );
    }
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
    goto LAB_00109a6b;
  }
  uStack_50 = *(undefined8 *)(this + 0x20);
  pTVar3 = *(TaskGroupContext **)(this + 0x28);
  uVar14 = uVar14 + uVar13 >> 1;
  local_68 = uVar14;
  uStack_60 = uVar13;
  local_58 = *(ulong *)(this + 0x18);
  local_48 = pTVar3;
  lVar8 = embree::TaskScheduler::thread();
  if (lVar8 == 0) {
    pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (pTVar11,(_lambda___1_ *)&local_68,pTVar3,uVar14 - uVar13,true);
  }
  else {
    if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_00109a70;
    lVar4 = *(long *)(lVar8 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (0x80000 < uVar2) goto LAB_00109a70;
    *(ulong *)(lVar8 + 0xc00c0) = uVar2;
    puVar10 = (undefined8 *)(lVar8 + 0x40090 + uVar2);
    *puVar10 = &PTR_execute_001438d8;
    puVar10[1] = local_68;
    puVar10[2] = uStack_60;
    puVar10[5] = local_48;
    puVar10[3] = local_58;
    puVar10[4] = uStack_50;
    lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
    piVar1 = (int *)(lVar8 + 0x40 + lVar9);
    lVar5 = *(long *)(lVar8 + 0xc0100);
    *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
    *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
    lVar9 = lVar9 + lVar8;
    *(undefined8 **)(lVar9 + 0x50) = puVar10;
    *(long *)(lVar9 + 0x58) = lVar5;
    *(TaskGroupContext **)(lVar9 + 0x60) = pTVar3;
    *(long *)(lVar9 + 0x68) = lVar4;
    *(ulong *)(lVar9 + 0x70) = uVar14 - uVar13;
    if (lVar5 != 0) {
      LOCK();
      *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
      UNLOCK();
    }
    LOCK();
    if (*piVar1 == 0) {
      *piVar1 = 1;
    }
    UNLOCK();
    LOCK();
    *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
    UNLOCK();
    if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
      LOCK();
      *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
      UNLOCK();
    }
  }
  local_88 = *(undefined8 *)(this + 0x18);
  local_98 = *(long *)(this + 8);
  pTVar3 = *(TaskGroupContext **)(this + 0x28);
  uStack_80 = *(undefined8 *)(this + 0x20);
  uVar13 = local_98 - uVar14;
  uStack_90 = uVar14;
  local_78 = pTVar3;
  lVar8 = embree::TaskScheduler::thread();
  if (lVar8 == 0) {
    pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (pTVar11,(_lambda___1_ *)&local_98,pTVar3,uVar13,true);
LAB_001098cc:
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
LAB_00109a6b:
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  if (*(ulong *)(lVar8 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar8 + 0xc00c0);
    uVar14 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar14 < 0x80001) {
      *(ulong *)(lVar8 + 0xc00c0) = uVar14;
      puVar10 = (undefined8 *)(lVar8 + 0x40090 + uVar14);
      *puVar10 = &PTR_execute_001438d8;
      puVar10[1] = local_98;
      puVar10[2] = uStack_90;
      puVar10[5] = local_78;
      puVar10[3] = local_88;
      puVar10[4] = uStack_80;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar5 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar10;
      *(long *)(lVar9 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar3;
      *(long *)(lVar9 + 0x68) = lVar4;
      *(ulong *)(lVar9 + 0x70) = uVar13;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_001098cc;
    }
  }
LAB_00109a70:
                    /* WARNING: Subroutine does not return */
  abort();
code_r0x0010997b:
  sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::setupLargeBuildRefBuilder
            (this_00,uVar13,pTVar6);
  uVar13 = uVar13 + 1;
  goto joined_r0x00109909;
}



/* WARNING: Removing unreachable block (ram,0x00109e55) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_001438f0;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::range<unsigned_long>const&)#3}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::range<unsigned_long>const&)#3}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  TaskScheduler *pTVar9;
  ulong uVar10;
  ulong uVar11;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar11 = *(ulong *)(this + 8);
  uVar10 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar11 - uVar10) {
    uStack_40 = *(undefined8 *)(this + 0x20);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    uVar11 = uVar11 + uVar10 >> 1;
    local_58 = uVar11;
    uStack_50 = uVar10;
    local_48 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_58,pTVar4,uVar11 - uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_0010a366;
      lVar5 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010a366;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar7 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_001438f0;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[5] = local_38;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar6 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar3;
      *(long *)(lVar8 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar4;
      *(long *)(lVar8 + 0x68) = lVar5;
      *(ulong *)(lVar8 + 0x70) = uVar11 - uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_78 = *(undefined8 *)(this + 0x18);
    local_88 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    uStack_70 = *(undefined8 *)(this + 0x20);
    uVar10 = local_88 - uVar11;
    uStack_80 = uVar11;
    local_68 = pTVar4;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_88,pTVar4,uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_0010a366:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar7 + 0xc00c0);
      uVar11 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar11) goto LAB_0010a366;
      *(ulong *)(lVar7 + 0xc00c0) = uVar11;
      puVar3 = (undefined8 *)(lVar7 + 0x40090 + uVar11);
      *puVar3 = &PTR_execute_001438f0;
      puVar3[1] = local_88;
      puVar3[2] = uStack_80;
      puVar3[5] = local_68;
      puVar3[3] = local_78;
      puVar3[4] = uStack_70;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar6 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar3;
      *(long *)(lVar8 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar4;
      *(long *)(lVar8 + 0x68) = lVar5;
      *(ulong *)(lVar8 + 0x70) = uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    for (; uVar10 < uVar11; uVar10 = uVar10 + 1) {
      lVar7 = *(long *)(*(long *)(*(long *)(*(long *)(this + 0x20) + 0x30) + 0x1e0) + uVar10 * 8);
      if ((((lVar7 != 0) && (*(char *)(lVar7 + 0x3c) == '\x14')) &&
          ((*(byte *)(lVar7 + 0x3e) & 0x20) != 0)) && (*(int *)(lVar7 + 0x24) == 1)) {
        (**(code **)(**(long **)(*(long *)(*(long *)(this + 0x20) + 0x10) + uVar10 * 8) + 0x10))();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0010a745) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143908;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long *plVar7;
  long lVar8;
  long lVar9;
  ulong uVar10;
  TaskScheduler *pTVar11;
  long *plVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar13 = *(ulong *)(this + 8);
  uVar10 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar13 - uVar10) {
    uStack_40 = *(undefined8 *)(this + 0x20);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    uVar13 = uVar13 + uVar10 >> 1;
    local_58 = uVar13;
    uStack_50 = uVar10;
    local_48 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_58,pTVar4,uVar13 - uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_0010ac7e;
      lVar5 = *(long *)(lVar8 + 0xc00c0);
      uVar2 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010ac7e;
      *(ulong *)(lVar8 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar8 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_00143908;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[5] = local_38;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar6 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar3;
      *(long *)(lVar9 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar4;
      *(long *)(lVar9 + 0x68) = lVar5;
      *(ulong *)(lVar9 + 0x70) = uVar13 - uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_88 = *(long *)(this + 8);
    uStack_70 = *(undefined8 *)(this + 0x20);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    local_78 = *(undefined8 *)(this + 0x18);
    uVar10 = local_88 - uVar13;
    uStack_80 = uVar13;
    local_68 = pTVar4;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_88,pTVar4,uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) {
LAB_0010ac7e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar8 + 0xc00c0);
      uVar13 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar13) goto LAB_0010ac7e;
      *(ulong *)(lVar8 + 0xc00c0) = uVar13;
      puVar3 = (undefined8 *)(lVar8 + 0x40090 + uVar13);
      *puVar3 = &PTR_execute_00143908;
      puVar3[1] = local_88;
      puVar3[2] = uStack_80;
      puVar3[5] = local_68;
      puVar3[3] = local_78;
      puVar3[4] = uStack_70;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar6 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar3;
      *(long *)(lVar9 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar4;
      *(long *)(lVar9 + 0x68) = lVar5;
      *(ulong *)(lVar9 + 0x70) = uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    for (; uVar10 < uVar13; uVar10 = uVar10 + 1) {
      lVar8 = *(long *)(this + 0x20);
      while( true ) {
        lVar5 = uVar10 * 8;
        plVar12 = (long *)(*(long *)(lVar8 + 0x10) + lVar5);
        plVar7 = (long *)*plVar12;
        *plVar12 = 0;
        if (plVar7 != (long *)0x0) {
          (**(code **)(*plVar7 + 8))();
        }
        lVar8 = *(long *)(this + 0x20);
        plVar7 = *(long **)(*(long *)(*(long *)(lVar8 + 0x28) + 0x200) + lVar5);
        if (plVar7 != (long *)0x0) break;
        uVar10 = uVar10 + 1;
        if (uVar13 <= uVar10) goto LAB_0010abdf;
      }
      (**(code **)(*plVar7 + 8))();
      *(undefined8 *)(*(long *)(*(long *)(*(long *)(this + 0x20) + 0x28) + 0x200) + lVar5) = 0;
    }
LAB_0010abdf:
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0010b065) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143920;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *this_00;
  TriangleMesh *pTVar6;
  long *plVar7;
  long lVar8;
  long lVar9;
  undefined8 *puVar10;
  TaskScheduler *pTVar11;
  long *plVar12;
  ulong uVar13;
  ulong uVar14;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  TaskGroupContext *local_48;
  long local_40;
  
  uVar14 = *(ulong *)(this + 8);
  uVar13 = *(ulong *)(this + 0x10);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar14 - uVar13 <= *(ulong *)(this + 0x18)) {
joined_r0x0010b499:
    if (uVar13 < uVar14) {
      do {
        this_00 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> **)
                   (this + 0x20);
        pTVar6 = *(TriangleMesh **)(*(long *)(*(long *)(this_00 + 0x30) + 0x1e0) + uVar13 * 8);
        if (((pTVar6 != (TriangleMesh *)0x0) && (pTVar6[0x3c] == (TriangleMesh)0x14)) &&
           (*(int *)(pTVar6 + 0x24) == 1)) {
          if (4 < *(uint *)(pTVar6 + 0x20)) goto code_r0x0010b50b;
          plVar12 = (long *)(uVar13 * 8 + *(long *)(this_00 + 0x10));
          if ((*plVar12 == 0) ||
             (lVar8 = __dynamic_cast(*plVar12,&sse2::
                                               BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>
                                               ::RefBuilderBase::typeinfo,
                                     &sse2::
                                      BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>
                                      ::RefBuilderSmall::typeinfo,0), lVar8 == 0)) {
            puVar10 = (undefined8 *)operator_new(0x10);
            *puVar10 = &PTR__RefBuilderSmall_00143818;
            puVar10[1] = uVar13;
            plVar7 = (long *)*plVar12;
            *plVar12 = (long)puVar10;
            if (plVar7 != (long *)0x0) {
              (**(code **)(*plVar7 + 8))();
            }
          }
        }
        uVar13 = uVar13 + 1;
        if (uVar14 <= uVar13) break;
      } while( true );
    }
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
    goto LAB_0010b5fb;
  }
  uStack_50 = *(undefined8 *)(this + 0x20);
  pTVar3 = *(TaskGroupContext **)(this + 0x28);
  uVar14 = uVar14 + uVar13 >> 1;
  local_68 = uVar14;
  uStack_60 = uVar13;
  local_58 = *(ulong *)(this + 0x18);
  local_48 = pTVar3;
  lVar8 = embree::TaskScheduler::thread();
  if (lVar8 == 0) {
    pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (pTVar11,(_lambda___1_ *)&local_68,pTVar3,uVar14 - uVar13,true);
  }
  else {
    if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_0010b600;
    lVar4 = *(long *)(lVar8 + 0xc00c0);
    uVar2 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (0x80000 < uVar2) goto LAB_0010b600;
    *(ulong *)(lVar8 + 0xc00c0) = uVar2;
    puVar10 = (undefined8 *)(lVar8 + 0x40090 + uVar2);
    *puVar10 = &PTR_execute_00143920;
    puVar10[1] = local_68;
    puVar10[2] = uStack_60;
    puVar10[5] = local_48;
    puVar10[3] = local_58;
    puVar10[4] = uStack_50;
    lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
    piVar1 = (int *)(lVar8 + 0x40 + lVar9);
    lVar5 = *(long *)(lVar8 + 0xc0100);
    *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
    *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
    lVar9 = lVar9 + lVar8;
    *(undefined8 **)(lVar9 + 0x50) = puVar10;
    *(long *)(lVar9 + 0x58) = lVar5;
    *(TaskGroupContext **)(lVar9 + 0x60) = pTVar3;
    *(long *)(lVar9 + 0x68) = lVar4;
    *(ulong *)(lVar9 + 0x70) = uVar14 - uVar13;
    if (lVar5 != 0) {
      LOCK();
      *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
      UNLOCK();
    }
    LOCK();
    if (*piVar1 == 0) {
      *piVar1 = 1;
    }
    UNLOCK();
    LOCK();
    *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
    UNLOCK();
    if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
      LOCK();
      *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
      UNLOCK();
    }
  }
  local_88 = *(undefined8 *)(this + 0x18);
  local_98 = *(long *)(this + 8);
  pTVar3 = *(TaskGroupContext **)(this + 0x28);
  uStack_80 = *(undefined8 *)(this + 0x20);
  uVar13 = local_98 - uVar14;
  uStack_90 = uVar14;
  local_78 = pTVar3;
  lVar8 = embree::TaskScheduler::thread();
  if (lVar8 == 0) {
    pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
    spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
              (pTVar11,(_lambda___1_ *)&local_98,pTVar3,uVar13,true);
LAB_0010b45c:
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
LAB_0010b5fb:
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  if (*(ulong *)(lVar8 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(lVar8 + 0xc00c0);
    uVar14 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar14 < 0x80001) {
      *(ulong *)(lVar8 + 0xc00c0) = uVar14;
      puVar10 = (undefined8 *)(lVar8 + 0x40090 + uVar14);
      *puVar10 = &PTR_execute_00143920;
      puVar10[1] = local_98;
      puVar10[2] = uStack_90;
      puVar10[5] = local_78;
      puVar10[3] = local_88;
      puVar10[4] = uStack_80;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar8 + 0x40 + lVar9);
      lVar5 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar10;
      *(long *)(lVar9 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar9 + 0x60) = pTVar3;
      *(long *)(lVar9 + 0x68) = lVar4;
      *(ulong *)(lVar9 + 0x70) = uVar13;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
      goto LAB_0010b45c;
    }
  }
LAB_0010b600:
                    /* WARNING: Subroutine does not return */
  abort();
code_r0x0010b50b:
  sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::setupLargeBuildRefBuilder
            (this_00,uVar13,pTVar6);
  uVar13 = uVar13 + 1;
  goto joined_r0x0010b499;
}



/* WARNING: Removing unreachable block (ram,0x0010b9e5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143938;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3}>(unsigned long, unsigned long,
   unsigned long, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#3} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::range<unsigned_long>const&)#3}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::range<unsigned_long>const&)#3}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  TaskScheduler *pTVar9;
  ulong uVar10;
  ulong uVar11;
  long in_FS_OFFSET;
  long local_88;
  ulong uStack_80;
  undefined8 local_78;
  undefined8 uStack_70;
  TaskGroupContext *local_68;
  ulong local_58;
  ulong uStack_50;
  ulong local_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar11 = *(ulong *)(this + 8);
  uVar10 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar11 - uVar10) {
    uStack_40 = *(undefined8 *)(this + 0x20);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    uVar11 = uVar11 + uVar10 >> 1;
    local_58 = uVar11;
    uStack_50 = uVar10;
    local_48 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_58,pTVar4,uVar11 - uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_0010bef6;
      lVar5 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010bef6;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar7 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_00143938;
      puVar3[1] = local_58;
      puVar3[2] = uStack_50;
      puVar3[5] = local_38;
      puVar3[3] = local_48;
      puVar3[4] = uStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar6 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar3;
      *(long *)(lVar8 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar4;
      *(long *)(lVar8 + 0x68) = lVar5;
      *(ulong *)(lVar8 + 0x70) = uVar11 - uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_78 = *(undefined8 *)(this + 0x18);
    local_88 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x28);
    uStack_70 = *(undefined8 *)(this + 0x20);
    uVar10 = local_88 - uVar11;
    uStack_80 = uVar11;
    local_68 = pTVar4;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar9 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar9,(_lambda___1_ *)&local_88,pTVar4,uVar10,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_0010bef6:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar7 + 0xc00c0);
      uVar11 = lVar5 + 0x30 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar11) goto LAB_0010bef6;
      *(ulong *)(lVar7 + 0xc00c0) = uVar11;
      puVar3 = (undefined8 *)(lVar7 + 0x40090 + uVar11);
      *puVar3 = &PTR_execute_00143938;
      puVar3[1] = local_88;
      puVar3[2] = uStack_80;
      puVar3[5] = local_68;
      puVar3[3] = local_78;
      puVar3[4] = uStack_70;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar6 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar3;
      *(long *)(lVar8 + 0x58) = lVar6;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar4;
      *(long *)(lVar8 + 0x68) = lVar5;
      *(ulong *)(lVar8 + 0x70) = uVar10;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    for (; uVar10 < uVar11; uVar10 = uVar10 + 1) {
      lVar7 = *(long *)(*(long *)(*(long *)(*(long *)(this + 0x20) + 0x30) + 0x1e0) + uVar10 * 8);
      if ((((lVar7 != 0) && (*(char *)(lVar7 + 0x3c) == '\x14')) &&
          ((*(byte *)(lVar7 + 0x3e) & 0x20) != 0)) && (*(int *)(lVar7 + 0x24) == 1)) {
        (**(code **)(**(long **)(*(long *)(*(long *)(this + 0x20) + 0x10) + uVar10 * 8) + 0x10))();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::sequential_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long) */

PrimInfoExtRange *
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
::sequential_object_find(PrimInfoExtRange *param_1,ulong param_2)

{
  bool bVar1;
  ulong uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  long lVar9;
  long lVar10;
  undefined1 (*pauVar11) [16];
  undefined1 (*pauVar12) [16];
  long lVar13;
  uint in_ECX;
  undefined4 uVar14;
  long in_RDX;
  ulong uVar15;
  float *pfVar16;
  undefined1 (*pauVar17) [16];
  long lVar18;
  ulong uVar19;
  undefined1 (*pauVar20) [16];
  ulong uVar21;
  long in_FS_OFFSET;
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  uint uVar25;
  int iVar26;
  uint uVar29;
  uint uVar31;
  undefined1 auVar27 [16];
  int iVar30;
  int iVar32;
  int iVar33;
  undefined1 auVar28 [16];
  uint uVar34;
  uint uVar38;
  uint uVar39;
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  float fVar43;
  float fVar44;
  undefined1 auVar42 [16];
  undefined1 auVar45 [16];
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  undefined1 auVar46 [16];
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  uint uVar57;
  uint uVar58;
  undefined1 auVar55 [16];
  undefined1 auVar56 [16];
  undefined1 auVar59 [16];
  uint local_12e0;
  uint uStack_12dc;
  uint uStack_12d8;
  uint uStack_12d4;
  undefined1 local_12d0 [16];
  undefined1 local_12c0 [16];
  undefined1 local_12b0 [16];
  undefined1 local_12a0 [16];
  undefined1 local_1290 [16];
  float local_1280 [124];
  float local_1090 [4];
  int local_1080 [128];
  int local_e80 [4];
  undefined1 local_e70 [16];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2896];
  undefined1 local_2e0 [80];
  int local_290 [4];
  int local_280 [142];
  long local_48;
  
  auVar23._0_8_ = CONCAT44(_LC8,_LC8);
  auVar23._8_4_ = _LC8;
  auVar23._12_4_ = _LC8;
  auVar24._0_8_ = CONCAT44(_LC6,_LC6);
  auVar24._8_4_ = _LC6;
  auVar24._12_4_ = _LC6;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pauVar20 = (undefined1 (*) [16])local_e80;
  pauVar12 = (undefined1 (*) [16])local_280;
  do {
    pauVar20[4] = auVar23;
    pauVar11 = pauVar20 + 6;
    pauVar20[5] = auVar24;
    pauVar20[2] = auVar23;
    pauVar20[3] = auVar24;
    *pauVar20 = auVar23;
    pauVar20[1] = auVar24;
    *pauVar12 = (undefined1  [16])0x0;
    pauVar20 = pauVar11;
    pauVar12 = pauVar12 + 1;
  } while ((undefined1 (*) [16])local_280 != pauVar11);
  fVar47 = *(float *)(in_RDX + 0x20);
  fVar48 = *(float *)(in_RDX + 0x24);
  uVar7 = *(undefined8 *)(in_RDX + 0x20);
  fVar49 = *(float *)(in_RDX + 0x28);
  uVar8 = *(undefined8 *)(in_RDX + 0x28);
  auVar27._0_4_ = *(float *)(in_RDX + 0x30) - fVar47;
  auVar27._4_4_ = *(float *)(in_RDX + 0x34) - fVar48;
  auVar27._8_4_ = *(float *)(in_RDX + 0x38) - fVar49;
  auVar27._12_4_ = *(float *)(in_RDX + 0x3c) - *(float *)(in_RDX + 0x2c);
  auVar35._4_4_ = _LC11;
  auVar35._0_4_ = _LC11;
  auVar35._8_4_ = _LC11;
  auVar35._12_4_ = _LC11;
  pauVar20 = (undefined1 (*) [16])(*(long *)(in_RDX + 0x40) * 0x40 + *(long *)param_2);
  auVar35 = maxps(auVar35,auVar27);
  auVar36._4_4_ = _LC13;
  auVar36._0_4_ = _LC13;
  auVar36._8_4_ = _LC13;
  auVar36._12_4_ = _LC13;
  auVar27 = divps(auVar36,auVar35);
  bVar1 = _LC11 < auVar35._12_4_;
  fVar51 = (float)(-(uint)(_LC11 < auVar35._0_4_) & auVar27._0_4_);
  fVar53 = (float)(-(uint)(_LC11 < auVar35._4_4_) & auVar27._4_4_);
  fVar54 = (float)(-(uint)(_LC11 < auVar35._8_4_) & auVar27._8_4_);
  uVar21 = *(long *)(in_RDX + 0x48) - *(long *)(in_RDX + 0x40);
  if (uVar21 != 0) {
    if (uVar21 != 1) {
      pauVar12 = pauVar20;
      do {
        auVar36 = pauVar12[1];
        auVar35 = *pauVar12;
        auVar37 = pauVar12[4];
        pauVar11 = pauVar12 + 8;
        uVar25 = (uint)(((auVar36._0_4_ + auVar35._0_4_) - fVar47) * fVar51 + _LC15);
        uVar29 = (uint)(((auVar36._4_4_ + auVar35._4_4_) - fVar48) * fVar53 + _LC15);
        uVar31 = (uint)(((auVar36._8_4_ + auVar35._8_4_) - fVar49) * fVar54 + _LC15);
        uVar34 = -(uint)((int)uVar25 < (int)__LC17);
        uVar38 = -(uint)((int)uVar29 < (int)_UNK_00144104);
        uVar39 = -(uint)((int)uVar31 < (int)_UNK_00144108);
        uVar25 = uVar25 & uVar34 | ~uVar34 & __LC17;
        uVar29 = uVar29 & uVar38 | ~uVar38 & _UNK_00144104;
        uVar34 = uVar31 & uVar39 | ~uVar39 & _UNK_00144108;
        auVar40 = pauVar12[5];
        uVar15 = (ulong)(~-(uint)((int)uVar25 < 0) & uVar25);
        pauVar17 = (undefined1 (*) [16])local_e80 + uVar15 * 6;
        uVar25 = (uint)(((auVar40._0_4_ + auVar37._0_4_) - fVar47) * fVar51 + _LC15);
        uVar31 = (uint)(((auVar40._4_4_ + auVar37._4_4_) - fVar48) * fVar53 + _LC15);
        uVar38 = (uint)(((auVar40._8_4_ + auVar37._8_4_) - fVar49) * fVar54 + _LC15);
        uVar39 = -(uint)((int)uVar25 < (int)__LC17);
        uVar57 = -(uint)((int)uVar31 < (int)_UNK_00144104);
        uVar58 = -(uint)((int)uVar38 < (int)_UNK_00144108);
        uVar25 = uVar39 & uVar25 | ~uVar39 & __LC17;
        uVar31 = uVar57 & uVar31 | ~uVar57 & _UNK_00144104;
        uVar38 = uVar58 & uVar38 | ~uVar58 & _UNK_00144108;
        auVar55 = minps(*pauVar17,auVar35);
        *pauVar17 = auVar55;
        auVar55 = maxps(*(undefined1 (*) [16])(local_e70 + uVar15 * 0x60),auVar36);
        *(undefined1 (*) [16])(local_e70 + uVar15 * 0x60) = auVar55;
        uVar19 = (ulong)(~-(uint)((int)uVar29 < 0) & uVar29);
        lVar18 = uVar19 * 0x60;
        auVar55 = minps(*(undefined1 (*) [16])(local_e60 + lVar18),auVar35);
        *(undefined1 (*) [16])(local_e60 + lVar18) = auVar55;
        auVar55 = maxps(*(undefined1 (*) [16])(local_e50 + lVar18),auVar36);
        *(undefined1 (*) [16])(local_e50 + lVar18) = auVar55;
        uVar2 = (ulong)(~-(uint)((int)uVar34 < 0) & uVar34);
        lVar18 = uVar2 * 0x60;
        auVar35 = minps(*(undefined1 (*) [16])(local_e40 + lVar18),auVar35);
        *(undefined1 (*) [16])(local_e40 + lVar18) = auVar35;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e30 + lVar18),auVar36);
        *(undefined1 (*) [16])(local_e30 + lVar18) = auVar36;
        iVar26 = *(int *)(pauVar12[1] + 0xc);
        local_e80[(uVar15 + 0xc0) * 4] = local_e80[(uVar15 + 0xc0) * 4] + iVar26;
        uVar15 = (ulong)(~-(uint)((int)uVar25 < 0) & uVar25);
        local_280[uVar2 * 4 + 2] = local_280[uVar2 * 4 + 2] + iVar26;
        local_280[uVar19 * 4 + 1] = local_280[uVar19 * 4 + 1] + iVar26;
        pauVar17 = (undefined1 (*) [16])local_e80 + uVar15 * 6;
        auVar36 = minps(*pauVar17,auVar37);
        *pauVar17 = auVar36;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e70 + uVar15 * 0x60),auVar40);
        *(undefined1 (*) [16])(local_e70 + uVar15 * 0x60) = auVar36;
        uVar19 = (ulong)(~-(uint)((int)uVar31 < 0) & uVar31);
        lVar18 = uVar19 * 0x60;
        auVar36 = minps(*(undefined1 (*) [16])(local_e60 + lVar18),auVar37);
        *(undefined1 (*) [16])(local_e60 + lVar18) = auVar36;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e50 + lVar18),auVar40);
        *(undefined1 (*) [16])(local_e50 + lVar18) = auVar36;
        uVar2 = (ulong)(~-(uint)((int)uVar38 < 0) & uVar38);
        lVar18 = uVar2 * 0x60;
        auVar36 = minps(*(undefined1 (*) [16])(local_e40 + lVar18),auVar37);
        *(undefined1 (*) [16])(local_e40 + lVar18) = auVar36;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e30 + lVar18),auVar40);
        *(undefined1 (*) [16])(local_e30 + lVar18) = auVar36;
        iVar26 = *(int *)(pauVar12[5] + 0xc);
        local_e80[(uVar15 + 0xc0) * 4] = local_e80[(uVar15 + 0xc0) * 4] + iVar26;
        local_280[uVar19 * 4 + 1] = local_280[uVar19 * 4 + 1] + iVar26;
        local_280[uVar2 * 4 + 2] = local_280[uVar2 * 4 + 2] + iVar26;
        pauVar12 = pauVar11;
      } while (pauVar20 + (uVar21 - 2 >> 1) * 8 + 8 != pauVar11);
      uVar19 = (uVar21 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar21 <= uVar19) goto LAB_0010c24f;
      pauVar20 = pauVar20 + uVar19 * 4;
    }
    auVar36 = pauVar20[1];
    auVar35 = *pauVar20;
    iVar26 = *(int *)(pauVar20[1] + 0xc);
    uVar25 = (uint)(((auVar36._0_4_ + auVar35._0_4_) - fVar47) * fVar51 + _LC15);
    uVar29 = (uint)(((auVar36._4_4_ + auVar35._4_4_) - fVar48) * fVar53 + _LC15);
    uVar31 = (uint)(((auVar36._8_4_ + auVar35._8_4_) - fVar49) * fVar54 + _LC15);
    uVar34 = -(uint)((int)uVar25 < (int)__LC17);
    uVar38 = -(uint)((int)uVar29 < (int)_UNK_00144104);
    uVar39 = -(uint)((int)uVar31 < (int)_UNK_00144108);
    uVar25 = uVar34 & uVar25 | ~uVar34 & __LC17;
    uVar29 = uVar38 & uVar29 | ~uVar38 & _UNK_00144104;
    uVar31 = uVar39 & uVar31 | ~uVar39 & _UNK_00144108;
    lVar18 = (long)(int)(~-(uint)((int)uVar25 < 0) & uVar25);
    pauVar20 = (undefined1 (*) [16])local_e80 + lVar18 * 6;
    local_e80[(lVar18 + 0xc0) * 4] = local_e80[(lVar18 + 0xc0) * 4] + iVar26;
    auVar37 = minps(*pauVar20,auVar35);
    *pauVar20 = auVar37;
    auVar37 = maxps(*(undefined1 (*) [16])(local_e70 + lVar18 * 0x60),auVar36);
    *(undefined1 (*) [16])(local_e70 + lVar18 * 0x60) = auVar37;
    lVar18 = (long)(int)(~-(uint)((int)uVar29 < 0) & uVar29);
    lVar13 = lVar18 * 0x60;
    local_280[lVar18 * 4 + 1] = local_280[lVar18 * 4 + 1] + iVar26;
    auVar37 = minps(*(undefined1 (*) [16])(local_e60 + lVar13),auVar35);
    *(undefined1 (*) [16])(local_e60 + lVar13) = auVar37;
    auVar37 = maxps(*(undefined1 (*) [16])(local_e50 + lVar13),auVar36);
    *(undefined1 (*) [16])(local_e50 + lVar13) = auVar37;
    lVar18 = (long)(int)(~-(uint)((int)uVar31 < 0) & uVar31);
    lVar13 = lVar18 * 0x60;
    local_280[lVar18 * 4 + 2] = local_280[lVar18 * 4 + 2] + iVar26;
    auVar35 = minps(*(undefined1 (*) [16])(local_e40 + lVar13),auVar35);
    *(undefined1 (*) [16])(local_e40 + lVar13) = auVar35;
    auVar36 = maxps(*(undefined1 (*) [16])(local_e30 + lVar13),auVar36);
    *(undefined1 (*) [16])(local_e30 + lVar13) = auVar36;
  }
LAB_0010c24f:
  lVar18 = 0x1f0;
  auVar45._8_4_ = _LC6;
  auVar45._0_8_ = auVar24._0_8_;
  auVar45._12_4_ = _LC6;
  auVar42._8_4_ = _LC8;
  auVar42._0_8_ = auVar23._0_8_;
  auVar42._12_4_ = _LC8;
  auVar41._8_4_ = _LC6;
  auVar41._0_8_ = auVar24._0_8_;
  auVar41._12_4_ = _LC6;
  auVar55._8_4_ = _LC8;
  auVar55._0_8_ = auVar23._0_8_;
  auVar55._12_4_ = _LC8;
  auVar40._8_4_ = _LC6;
  auVar40._0_8_ = auVar24._0_8_;
  auVar40._12_4_ = _LC6;
  auVar37._8_4_ = _LC8;
  auVar37._0_8_ = auVar23._0_8_;
  auVar37._12_4_ = _LC8;
  iVar26 = 0;
  iVar30 = 0;
  iVar32 = 0;
  iVar33 = 0;
  pauVar20 = (undefined1 (*) [16])local_2e0;
  pfVar16 = local_1090;
  do {
    pauVar12 = pauVar20;
    auVar40 = maxps(auVar40,pauVar12[1]);
    auVar37 = minps(auVar37,*pauVar12);
    pauVar20 = pauVar12 + -6;
    iVar3 = *(int *)(*(undefined1 (*) [16])local_280 + lVar18);
    iVar4 = *(int *)((long)local_280 + lVar18 + 4);
    iVar5 = *(int *)((long)local_280 + lVar18 + 8);
    iVar6 = *(int *)((long)local_280 + lVar18 + 0xc);
    auVar41 = maxps(auVar41,pauVar12[3]);
    pfVar16[3] = 0.0;
    auVar55 = minps(auVar55,pauVar12[2]);
    auVar45 = maxps(auVar45,pauVar12[5]);
    iVar26 = iVar3 + iVar26;
    iVar30 = iVar4 + iVar30;
    iVar32 = iVar5 + iVar32;
    iVar33 = iVar6 + iVar33;
    auVar42 = minps(auVar42,pauVar12[4]);
    fVar47 = auVar40._4_4_ - auVar37._4_4_;
    fVar49 = auVar40._8_4_ - auVar37._8_4_;
    *(int *)((long)local_1080 + lVar18) = iVar26;
    *(int *)((long)local_1080 + lVar18 + 4) = iVar30;
    *(int *)((long)local_1080 + lVar18 + 8) = iVar32;
    *(int *)((long)local_1080 + lVar18 + 0xc) = iVar33;
    lVar18 = lVar18 + -0x10;
    fVar48 = auVar41._4_4_ - auVar55._4_4_;
    fVar50 = auVar41._8_4_ - auVar55._8_4_;
    *pfVar16 = (fVar47 + fVar49) * (auVar40._0_4_ - auVar37._0_4_) + fVar47 * fVar49;
    fVar47 = auVar45._4_4_ - auVar42._4_4_;
    fVar49 = auVar45._8_4_ - auVar42._8_4_;
    pfVar16[1] = (fVar48 + fVar50) * (auVar41._0_4_ - auVar55._0_4_) + fVar48 * fVar50;
    pfVar16[2] = (fVar47 + fVar49) * (auVar45._0_4_ - auVar42._0_4_) + fVar47 * fVar49;
    pfVar16 = pfVar16 + -4;
  } while ((undefined1 (*) [16])local_e80 != pauVar20);
  auVar46._8_4_ = _LC6;
  auVar46._0_8_ = auVar24._0_8_;
  auVar46._12_4_ = _LC6;
  iVar26 = (1 << ((byte)in_ECX & 0x1f)) + -1;
  uVar21 = (ulong)in_ECX;
  auVar56._8_4_ = _LC6;
  auVar56._0_8_ = auVar24._0_8_;
  auVar56._12_4_ = _LC6;
  lVar18 = 0x10;
  auVar59._8_4_ = _LC6;
  auVar59._0_8_ = auVar24._0_8_;
  auVar59._12_4_ = _LC6;
  local_1290 = (undefined1  [16])0x0;
  local_12a0 = (undefined1  [16])0x0;
  local_12d0 = auVar23;
  local_12c0 = auVar23;
  local_12b0 = auVar23;
  local_12e0 = __LC20;
  uStack_12dc = _UNK_001440e4;
  uStack_12d8 = _UNK_001440e8;
  uStack_12d4 = _UNK_001440ec;
  do {
    auVar59 = maxps(auVar59,pauVar20[5]);
    pauVar11 = pauVar20 + 6;
    local_12d0 = minps(local_12d0,pauVar20[4]);
    auVar46 = maxps(auVar46,pauVar20[1]);
    auVar56 = maxps(auVar56,pauVar20[3]);
    local_12b0 = minps(local_12b0,*pauVar20);
    fVar47 = auVar59._4_4_ - local_12d0._4_4_;
    fVar48 = auVar59._8_4_ - local_12d0._8_4_;
    local_12c0 = minps(local_12c0,pauVar20[2]);
    local_12a0._0_4_ = local_12a0._0_4_ + *(int *)((long)local_290 + lVar18);
    local_12a0._4_4_ = local_12a0._4_4_ + *(int *)((long)local_290 + lVar18 + 4);
    local_12a0._8_4_ = local_12a0._8_4_ + *(int *)((long)local_290 + lVar18 + 8);
    local_12a0._12_4_ = local_12a0._12_4_ + *(int *)((long)local_290 + lVar18 + 0xc);
    fVar43 = auVar46._4_4_ - local_12b0._4_4_;
    fVar44 = auVar46._8_4_ - local_12b0._8_4_;
    fVar49 = auVar56._4_4_ - local_12c0._4_4_;
    fVar50 = auVar56._8_4_ - local_12c0._8_4_;
    uVar38 = (uint)(local_12a0._0_4_ + iVar26) >> uVar21;
    uVar39 = (uint)(local_12a0._4_4_ + iVar26) >> uVar21;
    uVar57 = (uint)(local_12a0._8_4_ + iVar26) >> uVar21;
    uVar58 = (uint)(local_12a0._12_4_ + iVar26) >> uVar21;
    fVar52 = fVar47 * fVar48 + (fVar47 + fVar48) * (auVar59._0_4_ - local_12d0._0_4_);
    uVar25 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18)) >> uVar21;
    uVar29 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18 + 4)) >> uVar21;
    uVar31 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18 + 8)) >> uVar21;
    uVar34 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18 + 0xc)) >> uVar21;
    pfVar16 = (float *)((long)local_1280 + lVar18);
    lVar13 = lVar18 + 4;
    lVar9 = lVar18 + 8;
    lVar10 = lVar18 + 0xc;
    lVar18 = lVar18 + 0x10;
    fVar47 = ((float)(int)(uVar25 & _LC25) + (float)((int)uVar25 >> 0x1f & __LC19)) * *pfVar16 +
             ((fVar43 + fVar44) * (auVar46._0_4_ - local_12b0._0_4_) + fVar43 * fVar44) *
             ((float)(int)(uVar38 & _LC25) + (float)((int)uVar38 >> 0x1f & __LC19));
    fVar48 = ((float)(int)(uVar29 & _UNK_00144114) + (float)((int)uVar29 >> 0x1f & _UNK_00144124)) *
             *(float *)((long)local_1280 + lVar13) +
             ((fVar49 + fVar50) * (auVar56._0_4_ - local_12c0._0_4_) + fVar49 * fVar50) *
             ((float)(int)(uVar39 & _UNK_00144114) + (float)((int)uVar39 >> 0x1f & _UNK_00144124));
    fVar49 = ((float)(int)(uVar31 & _UNK_00144118) + (float)((int)uVar31 >> 0x1f & _UNK_00144128)) *
             *(float *)((long)local_1280 + lVar9) +
             fVar52 * ((float)(int)(uVar57 & _UNK_00144118) +
                      (float)((int)uVar57 >> 0x1f & _UNK_00144128));
    fVar50 = ((float)(int)(uVar34 & _UNK_0014411c) + (float)((int)uVar34 >> 0x1f & _UNK_0014412c)) *
             *(float *)((long)local_1280 + lVar10) +
             fVar52 * ((float)(int)(uVar58 & _UNK_0014411c) +
                      (float)((int)uVar58 >> 0x1f & _UNK_0014412c));
    uVar25 = -(uint)(fVar47 < auVar23._0_4_);
    uVar29 = -(uint)(fVar48 < auVar23._4_4_);
    uVar31 = -(uint)(fVar49 < auVar23._8_4_);
    uVar34 = -(uint)(fVar50 < auVar23._12_4_);
    local_1290._0_4_ = local_12e0 & uVar25 | ~uVar25 & local_1290._0_4_;
    local_1290._4_4_ = uStack_12dc & uVar29 | ~uVar29 & local_1290._4_4_;
    local_1290._8_4_ = uStack_12d8 & uVar31 | ~uVar31 & local_1290._8_4_;
    auVar22._4_4_ = uVar29 & (uint)fVar48;
    auVar22._0_4_ = uVar25 & (uint)fVar47;
    auVar28._0_4_ = ~uVar25 & (uint)auVar23._0_4_;
    auVar28._4_4_ = ~uVar29 & (uint)auVar23._4_4_;
    auVar28._8_4_ = ~uVar31 & (uint)auVar23._8_4_;
    auVar28._12_4_ = ~uVar34 & (uint)auVar23._12_4_;
    auVar22._8_4_ = uVar31 & (uint)fVar49;
    auVar22._12_4_ = uVar34 & (uint)fVar50;
    local_1290._12_4_ = uStack_12d4 & uVar34 | ~uVar34 & local_1290._12_4_;
    auVar23 = auVar22 | auVar28;
    pauVar20 = pauVar11;
    local_12e0 = local_12e0 + __LC20;
    uStack_12dc = uStack_12dc + _UNK_001440e4;
    uStack_12d8 = uStack_12d8 + _UNK_001440e8;
    uStack_12d4 = uStack_12d4 + _UNK_001440ec;
  } while (pauVar11 != pauVar12 + 0xb4);
  fVar47 = auVar23._4_4_;
  fVar48 = auVar23._8_4_;
  if (((fVar51 == 0.0) || (_LC21 < auVar23._0_4_)) || (uVar14 = 0, local_1290._0_4_ == 0)) {
    auVar23 = ZEXT416(_LC8);
    local_1290._0_4_ = 0;
    uVar14 = 0xffffffff;
  }
  fVar49 = auVar23._0_4_;
  if (((fVar53 != 0.0) && (fVar47 < fVar49)) && (local_1290._4_4_ != 0)) {
    uVar14 = 1;
    local_1290._0_4_ = local_1290._4_4_;
    fVar49 = fVar47;
  }
  if (((fVar54 != 0.0) && (fVar48 < fVar49)) && (local_1290._8_4_ != 0)) {
    uVar14 = 2;
    local_1290._0_4_ = local_1290._8_4_;
    fVar49 = fVar48;
  }
  *(undefined4 *)(param_1 + 4) = uVar14;
  *(undefined4 *)(param_1 + 8) = local_1290._0_4_;
  *(undefined4 *)(param_1 + 0xc) = 0;
  *(undefined8 *)(param_1 + 0x10) = 0x20;
  *(float *)param_1 = fVar49;
  *(undefined8 *)(param_1 + 0x20) = uVar7;
  *(undefined8 *)(param_1 + 0x28) = uVar8;
  *(float *)(param_1 + 0x30) = fVar51;
  *(float *)(param_1 + 0x34) = fVar53;
  *(float *)(param_1 + 0x38) = fVar54;
  *(uint *)(param_1 + 0x3c) = -(uint)bVar1 & auVar27._12_4_;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::sequential_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long) */

PrimInfoExtRange *
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
::sequential_object_find(PrimInfoExtRange *param_1,ulong param_2)

{
  bool bVar1;
  ulong uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  long lVar9;
  long lVar10;
  undefined1 (*pauVar11) [16];
  undefined1 (*pauVar12) [16];
  long lVar13;
  uint in_ECX;
  undefined4 uVar14;
  long in_RDX;
  ulong uVar15;
  float *pfVar16;
  undefined1 (*pauVar17) [16];
  long lVar18;
  ulong uVar19;
  undefined1 (*pauVar20) [16];
  ulong uVar21;
  long in_FS_OFFSET;
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  uint uVar25;
  int iVar26;
  uint uVar29;
  uint uVar31;
  undefined1 auVar27 [16];
  int iVar30;
  int iVar32;
  int iVar33;
  undefined1 auVar28 [16];
  uint uVar34;
  uint uVar38;
  uint uVar39;
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  float fVar43;
  float fVar44;
  undefined1 auVar42 [16];
  undefined1 auVar45 [16];
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  undefined1 auVar46 [16];
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  uint uVar57;
  uint uVar58;
  undefined1 auVar55 [16];
  undefined1 auVar56 [16];
  undefined1 auVar59 [16];
  uint local_12e0;
  uint uStack_12dc;
  uint uStack_12d8;
  uint uStack_12d4;
  undefined1 local_12d0 [16];
  undefined1 local_12c0 [16];
  undefined1 local_12b0 [16];
  undefined1 local_12a0 [16];
  undefined1 local_1290 [16];
  float local_1280 [124];
  float local_1090 [4];
  int local_1080 [128];
  int local_e80 [4];
  undefined1 local_e70 [16];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2896];
  undefined1 local_2e0 [80];
  int local_290 [4];
  int local_280 [142];
  long local_48;
  
  auVar23._0_8_ = CONCAT44(_LC8,_LC8);
  auVar23._8_4_ = _LC8;
  auVar23._12_4_ = _LC8;
  auVar24._0_8_ = CONCAT44(_LC6,_LC6);
  auVar24._8_4_ = _LC6;
  auVar24._12_4_ = _LC6;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pauVar20 = (undefined1 (*) [16])local_e80;
  pauVar12 = (undefined1 (*) [16])local_280;
  do {
    pauVar20[4] = auVar23;
    pauVar11 = pauVar20 + 6;
    pauVar20[5] = auVar24;
    pauVar20[2] = auVar23;
    pauVar20[3] = auVar24;
    *pauVar20 = auVar23;
    pauVar20[1] = auVar24;
    *pauVar12 = (undefined1  [16])0x0;
    pauVar20 = pauVar11;
    pauVar12 = pauVar12 + 1;
  } while ((undefined1 (*) [16])local_280 != pauVar11);
  fVar47 = *(float *)(in_RDX + 0x20);
  fVar48 = *(float *)(in_RDX + 0x24);
  uVar7 = *(undefined8 *)(in_RDX + 0x20);
  fVar49 = *(float *)(in_RDX + 0x28);
  uVar8 = *(undefined8 *)(in_RDX + 0x28);
  auVar27._0_4_ = *(float *)(in_RDX + 0x30) - fVar47;
  auVar27._4_4_ = *(float *)(in_RDX + 0x34) - fVar48;
  auVar27._8_4_ = *(float *)(in_RDX + 0x38) - fVar49;
  auVar27._12_4_ = *(float *)(in_RDX + 0x3c) - *(float *)(in_RDX + 0x2c);
  auVar35._4_4_ = _LC11;
  auVar35._0_4_ = _LC11;
  auVar35._8_4_ = _LC11;
  auVar35._12_4_ = _LC11;
  pauVar20 = (undefined1 (*) [16])(*(long *)(in_RDX + 0x40) * 0x40 + *(long *)param_2);
  auVar35 = maxps(auVar35,auVar27);
  auVar36._4_4_ = _LC13;
  auVar36._0_4_ = _LC13;
  auVar36._8_4_ = _LC13;
  auVar36._12_4_ = _LC13;
  auVar27 = divps(auVar36,auVar35);
  bVar1 = _LC11 < auVar35._12_4_;
  fVar51 = (float)(-(uint)(_LC11 < auVar35._0_4_) & auVar27._0_4_);
  fVar53 = (float)(-(uint)(_LC11 < auVar35._4_4_) & auVar27._4_4_);
  fVar54 = (float)(-(uint)(_LC11 < auVar35._8_4_) & auVar27._8_4_);
  uVar21 = *(long *)(in_RDX + 0x48) - *(long *)(in_RDX + 0x40);
  if (uVar21 != 0) {
    if (uVar21 != 1) {
      pauVar12 = pauVar20;
      do {
        auVar36 = pauVar12[1];
        auVar35 = *pauVar12;
        auVar37 = pauVar12[4];
        pauVar11 = pauVar12 + 8;
        uVar25 = (uint)(((auVar36._0_4_ + auVar35._0_4_) - fVar47) * fVar51 + _LC15);
        uVar29 = (uint)(((auVar36._4_4_ + auVar35._4_4_) - fVar48) * fVar53 + _LC15);
        uVar31 = (uint)(((auVar36._8_4_ + auVar35._8_4_) - fVar49) * fVar54 + _LC15);
        uVar34 = -(uint)((int)uVar25 < (int)__LC17);
        uVar38 = -(uint)((int)uVar29 < (int)_UNK_00144104);
        uVar39 = -(uint)((int)uVar31 < (int)_UNK_00144108);
        uVar25 = uVar25 & uVar34 | ~uVar34 & __LC17;
        uVar29 = uVar29 & uVar38 | ~uVar38 & _UNK_00144104;
        uVar34 = uVar31 & uVar39 | ~uVar39 & _UNK_00144108;
        auVar40 = pauVar12[5];
        uVar15 = (ulong)(~-(uint)((int)uVar25 < 0) & uVar25);
        pauVar17 = (undefined1 (*) [16])local_e80 + uVar15 * 6;
        uVar25 = (uint)(((auVar40._0_4_ + auVar37._0_4_) - fVar47) * fVar51 + _LC15);
        uVar31 = (uint)(((auVar40._4_4_ + auVar37._4_4_) - fVar48) * fVar53 + _LC15);
        uVar38 = (uint)(((auVar40._8_4_ + auVar37._8_4_) - fVar49) * fVar54 + _LC15);
        uVar39 = -(uint)((int)uVar25 < (int)__LC17);
        uVar57 = -(uint)((int)uVar31 < (int)_UNK_00144104);
        uVar58 = -(uint)((int)uVar38 < (int)_UNK_00144108);
        uVar25 = uVar39 & uVar25 | ~uVar39 & __LC17;
        uVar31 = uVar57 & uVar31 | ~uVar57 & _UNK_00144104;
        uVar38 = uVar58 & uVar38 | ~uVar58 & _UNK_00144108;
        auVar55 = minps(*pauVar17,auVar35);
        *pauVar17 = auVar55;
        auVar55 = maxps(*(undefined1 (*) [16])(local_e70 + uVar15 * 0x60),auVar36);
        *(undefined1 (*) [16])(local_e70 + uVar15 * 0x60) = auVar55;
        uVar19 = (ulong)(~-(uint)((int)uVar29 < 0) & uVar29);
        lVar18 = uVar19 * 0x60;
        auVar55 = minps(*(undefined1 (*) [16])(local_e60 + lVar18),auVar35);
        *(undefined1 (*) [16])(local_e60 + lVar18) = auVar55;
        auVar55 = maxps(*(undefined1 (*) [16])(local_e50 + lVar18),auVar36);
        *(undefined1 (*) [16])(local_e50 + lVar18) = auVar55;
        uVar2 = (ulong)(~-(uint)((int)uVar34 < 0) & uVar34);
        lVar18 = uVar2 * 0x60;
        auVar35 = minps(*(undefined1 (*) [16])(local_e40 + lVar18),auVar35);
        *(undefined1 (*) [16])(local_e40 + lVar18) = auVar35;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e30 + lVar18),auVar36);
        *(undefined1 (*) [16])(local_e30 + lVar18) = auVar36;
        iVar26 = *(int *)(pauVar12[1] + 0xc);
        local_e80[(uVar15 + 0xc0) * 4] = local_e80[(uVar15 + 0xc0) * 4] + iVar26;
        uVar15 = (ulong)(~-(uint)((int)uVar25 < 0) & uVar25);
        local_280[uVar2 * 4 + 2] = local_280[uVar2 * 4 + 2] + iVar26;
        local_280[uVar19 * 4 + 1] = local_280[uVar19 * 4 + 1] + iVar26;
        pauVar17 = (undefined1 (*) [16])local_e80 + uVar15 * 6;
        auVar36 = minps(*pauVar17,auVar37);
        *pauVar17 = auVar36;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e70 + uVar15 * 0x60),auVar40);
        *(undefined1 (*) [16])(local_e70 + uVar15 * 0x60) = auVar36;
        uVar19 = (ulong)(~-(uint)((int)uVar31 < 0) & uVar31);
        lVar18 = uVar19 * 0x60;
        auVar36 = minps(*(undefined1 (*) [16])(local_e60 + lVar18),auVar37);
        *(undefined1 (*) [16])(local_e60 + lVar18) = auVar36;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e50 + lVar18),auVar40);
        *(undefined1 (*) [16])(local_e50 + lVar18) = auVar36;
        uVar2 = (ulong)(~-(uint)((int)uVar38 < 0) & uVar38);
        lVar18 = uVar2 * 0x60;
        auVar36 = minps(*(undefined1 (*) [16])(local_e40 + lVar18),auVar37);
        *(undefined1 (*) [16])(local_e40 + lVar18) = auVar36;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e30 + lVar18),auVar40);
        *(undefined1 (*) [16])(local_e30 + lVar18) = auVar36;
        iVar26 = *(int *)(pauVar12[5] + 0xc);
        local_e80[(uVar15 + 0xc0) * 4] = local_e80[(uVar15 + 0xc0) * 4] + iVar26;
        local_280[uVar19 * 4 + 1] = local_280[uVar19 * 4 + 1] + iVar26;
        local_280[uVar2 * 4 + 2] = local_280[uVar2 * 4 + 2] + iVar26;
        pauVar12 = pauVar11;
      } while (pauVar20 + (uVar21 - 2 >> 1) * 8 + 8 != pauVar11);
      uVar19 = (uVar21 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar21 <= uVar19) goto LAB_0010cb7f;
      pauVar20 = pauVar20 + uVar19 * 4;
    }
    auVar36 = pauVar20[1];
    auVar35 = *pauVar20;
    iVar26 = *(int *)(pauVar20[1] + 0xc);
    uVar25 = (uint)(((auVar36._0_4_ + auVar35._0_4_) - fVar47) * fVar51 + _LC15);
    uVar29 = (uint)(((auVar36._4_4_ + auVar35._4_4_) - fVar48) * fVar53 + _LC15);
    uVar31 = (uint)(((auVar36._8_4_ + auVar35._8_4_) - fVar49) * fVar54 + _LC15);
    uVar34 = -(uint)((int)uVar25 < (int)__LC17);
    uVar38 = -(uint)((int)uVar29 < (int)_UNK_00144104);
    uVar39 = -(uint)((int)uVar31 < (int)_UNK_00144108);
    uVar25 = uVar34 & uVar25 | ~uVar34 & __LC17;
    uVar29 = uVar38 & uVar29 | ~uVar38 & _UNK_00144104;
    uVar31 = uVar39 & uVar31 | ~uVar39 & _UNK_00144108;
    lVar18 = (long)(int)(~-(uint)((int)uVar25 < 0) & uVar25);
    pauVar20 = (undefined1 (*) [16])local_e80 + lVar18 * 6;
    local_e80[(lVar18 + 0xc0) * 4] = local_e80[(lVar18 + 0xc0) * 4] + iVar26;
    auVar37 = minps(*pauVar20,auVar35);
    *pauVar20 = auVar37;
    auVar37 = maxps(*(undefined1 (*) [16])(local_e70 + lVar18 * 0x60),auVar36);
    *(undefined1 (*) [16])(local_e70 + lVar18 * 0x60) = auVar37;
    lVar18 = (long)(int)(~-(uint)((int)uVar29 < 0) & uVar29);
    lVar13 = lVar18 * 0x60;
    local_280[lVar18 * 4 + 1] = local_280[lVar18 * 4 + 1] + iVar26;
    auVar37 = minps(*(undefined1 (*) [16])(local_e60 + lVar13),auVar35);
    *(undefined1 (*) [16])(local_e60 + lVar13) = auVar37;
    auVar37 = maxps(*(undefined1 (*) [16])(local_e50 + lVar13),auVar36);
    *(undefined1 (*) [16])(local_e50 + lVar13) = auVar37;
    lVar18 = (long)(int)(~-(uint)((int)uVar31 < 0) & uVar31);
    lVar13 = lVar18 * 0x60;
    local_280[lVar18 * 4 + 2] = local_280[lVar18 * 4 + 2] + iVar26;
    auVar35 = minps(*(undefined1 (*) [16])(local_e40 + lVar13),auVar35);
    *(undefined1 (*) [16])(local_e40 + lVar13) = auVar35;
    auVar36 = maxps(*(undefined1 (*) [16])(local_e30 + lVar13),auVar36);
    *(undefined1 (*) [16])(local_e30 + lVar13) = auVar36;
  }
LAB_0010cb7f:
  lVar18 = 0x1f0;
  auVar45._8_4_ = _LC6;
  auVar45._0_8_ = auVar24._0_8_;
  auVar45._12_4_ = _LC6;
  auVar42._8_4_ = _LC8;
  auVar42._0_8_ = auVar23._0_8_;
  auVar42._12_4_ = _LC8;
  auVar41._8_4_ = _LC6;
  auVar41._0_8_ = auVar24._0_8_;
  auVar41._12_4_ = _LC6;
  auVar55._8_4_ = _LC8;
  auVar55._0_8_ = auVar23._0_8_;
  auVar55._12_4_ = _LC8;
  auVar40._8_4_ = _LC6;
  auVar40._0_8_ = auVar24._0_8_;
  auVar40._12_4_ = _LC6;
  auVar37._8_4_ = _LC8;
  auVar37._0_8_ = auVar23._0_8_;
  auVar37._12_4_ = _LC8;
  iVar26 = 0;
  iVar30 = 0;
  iVar32 = 0;
  iVar33 = 0;
  pauVar20 = (undefined1 (*) [16])local_2e0;
  pfVar16 = local_1090;
  do {
    pauVar12 = pauVar20;
    auVar40 = maxps(auVar40,pauVar12[1]);
    auVar37 = minps(auVar37,*pauVar12);
    pauVar20 = pauVar12 + -6;
    iVar3 = *(int *)(*(undefined1 (*) [16])local_280 + lVar18);
    iVar4 = *(int *)((long)local_280 + lVar18 + 4);
    iVar5 = *(int *)((long)local_280 + lVar18 + 8);
    iVar6 = *(int *)((long)local_280 + lVar18 + 0xc);
    auVar41 = maxps(auVar41,pauVar12[3]);
    pfVar16[3] = 0.0;
    auVar55 = minps(auVar55,pauVar12[2]);
    auVar45 = maxps(auVar45,pauVar12[5]);
    iVar26 = iVar3 + iVar26;
    iVar30 = iVar4 + iVar30;
    iVar32 = iVar5 + iVar32;
    iVar33 = iVar6 + iVar33;
    auVar42 = minps(auVar42,pauVar12[4]);
    fVar47 = auVar40._4_4_ - auVar37._4_4_;
    fVar49 = auVar40._8_4_ - auVar37._8_4_;
    *(int *)((long)local_1080 + lVar18) = iVar26;
    *(int *)((long)local_1080 + lVar18 + 4) = iVar30;
    *(int *)((long)local_1080 + lVar18 + 8) = iVar32;
    *(int *)((long)local_1080 + lVar18 + 0xc) = iVar33;
    lVar18 = lVar18 + -0x10;
    fVar48 = auVar41._4_4_ - auVar55._4_4_;
    fVar50 = auVar41._8_4_ - auVar55._8_4_;
    *pfVar16 = (fVar47 + fVar49) * (auVar40._0_4_ - auVar37._0_4_) + fVar47 * fVar49;
    fVar47 = auVar45._4_4_ - auVar42._4_4_;
    fVar49 = auVar45._8_4_ - auVar42._8_4_;
    pfVar16[1] = (fVar48 + fVar50) * (auVar41._0_4_ - auVar55._0_4_) + fVar48 * fVar50;
    pfVar16[2] = (fVar47 + fVar49) * (auVar45._0_4_ - auVar42._0_4_) + fVar47 * fVar49;
    pfVar16 = pfVar16 + -4;
  } while ((undefined1 (*) [16])local_e80 != pauVar20);
  auVar46._8_4_ = _LC6;
  auVar46._0_8_ = auVar24._0_8_;
  auVar46._12_4_ = _LC6;
  iVar26 = (1 << ((byte)in_ECX & 0x1f)) + -1;
  uVar21 = (ulong)in_ECX;
  auVar56._8_4_ = _LC6;
  auVar56._0_8_ = auVar24._0_8_;
  auVar56._12_4_ = _LC6;
  lVar18 = 0x10;
  auVar59._8_4_ = _LC6;
  auVar59._0_8_ = auVar24._0_8_;
  auVar59._12_4_ = _LC6;
  local_1290 = (undefined1  [16])0x0;
  local_12a0 = (undefined1  [16])0x0;
  local_12d0 = auVar23;
  local_12c0 = auVar23;
  local_12b0 = auVar23;
  local_12e0 = __LC20;
  uStack_12dc = _UNK_001440e4;
  uStack_12d8 = _UNK_001440e8;
  uStack_12d4 = _UNK_001440ec;
  do {
    auVar59 = maxps(auVar59,pauVar20[5]);
    pauVar11 = pauVar20 + 6;
    local_12d0 = minps(local_12d0,pauVar20[4]);
    auVar46 = maxps(auVar46,pauVar20[1]);
    auVar56 = maxps(auVar56,pauVar20[3]);
    local_12b0 = minps(local_12b0,*pauVar20);
    fVar47 = auVar59._4_4_ - local_12d0._4_4_;
    fVar48 = auVar59._8_4_ - local_12d0._8_4_;
    local_12c0 = minps(local_12c0,pauVar20[2]);
    local_12a0._0_4_ = local_12a0._0_4_ + *(int *)((long)local_290 + lVar18);
    local_12a0._4_4_ = local_12a0._4_4_ + *(int *)((long)local_290 + lVar18 + 4);
    local_12a0._8_4_ = local_12a0._8_4_ + *(int *)((long)local_290 + lVar18 + 8);
    local_12a0._12_4_ = local_12a0._12_4_ + *(int *)((long)local_290 + lVar18 + 0xc);
    fVar43 = auVar46._4_4_ - local_12b0._4_4_;
    fVar44 = auVar46._8_4_ - local_12b0._8_4_;
    fVar49 = auVar56._4_4_ - local_12c0._4_4_;
    fVar50 = auVar56._8_4_ - local_12c0._8_4_;
    uVar38 = (uint)(local_12a0._0_4_ + iVar26) >> uVar21;
    uVar39 = (uint)(local_12a0._4_4_ + iVar26) >> uVar21;
    uVar57 = (uint)(local_12a0._8_4_ + iVar26) >> uVar21;
    uVar58 = (uint)(local_12a0._12_4_ + iVar26) >> uVar21;
    fVar52 = fVar47 * fVar48 + (fVar47 + fVar48) * (auVar59._0_4_ - local_12d0._0_4_);
    uVar25 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18)) >> uVar21;
    uVar29 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18 + 4)) >> uVar21;
    uVar31 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18 + 8)) >> uVar21;
    uVar34 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18 + 0xc)) >> uVar21;
    pfVar16 = (float *)((long)local_1280 + lVar18);
    lVar13 = lVar18 + 4;
    lVar9 = lVar18 + 8;
    lVar10 = lVar18 + 0xc;
    lVar18 = lVar18 + 0x10;
    fVar47 = ((float)(int)(uVar25 & _LC25) + (float)((int)uVar25 >> 0x1f & __LC19)) * *pfVar16 +
             ((fVar43 + fVar44) * (auVar46._0_4_ - local_12b0._0_4_) + fVar43 * fVar44) *
             ((float)(int)(uVar38 & _LC25) + (float)((int)uVar38 >> 0x1f & __LC19));
    fVar48 = ((float)(int)(uVar29 & _UNK_00144114) + (float)((int)uVar29 >> 0x1f & _UNK_00144124)) *
             *(float *)((long)local_1280 + lVar13) +
             ((fVar49 + fVar50) * (auVar56._0_4_ - local_12c0._0_4_) + fVar49 * fVar50) *
             ((float)(int)(uVar39 & _UNK_00144114) + (float)((int)uVar39 >> 0x1f & _UNK_00144124));
    fVar49 = ((float)(int)(uVar31 & _UNK_00144118) + (float)((int)uVar31 >> 0x1f & _UNK_00144128)) *
             *(float *)((long)local_1280 + lVar9) +
             fVar52 * ((float)(int)(uVar57 & _UNK_00144118) +
                      (float)((int)uVar57 >> 0x1f & _UNK_00144128));
    fVar50 = ((float)(int)(uVar34 & _UNK_0014411c) + (float)((int)uVar34 >> 0x1f & _UNK_0014412c)) *
             *(float *)((long)local_1280 + lVar10) +
             fVar52 * ((float)(int)(uVar58 & _UNK_0014411c) +
                      (float)((int)uVar58 >> 0x1f & _UNK_0014412c));
    uVar25 = -(uint)(fVar47 < auVar23._0_4_);
    uVar29 = -(uint)(fVar48 < auVar23._4_4_);
    uVar31 = -(uint)(fVar49 < auVar23._8_4_);
    uVar34 = -(uint)(fVar50 < auVar23._12_4_);
    local_1290._0_4_ = local_12e0 & uVar25 | ~uVar25 & local_1290._0_4_;
    local_1290._4_4_ = uStack_12dc & uVar29 | ~uVar29 & local_1290._4_4_;
    local_1290._8_4_ = uStack_12d8 & uVar31 | ~uVar31 & local_1290._8_4_;
    auVar22._4_4_ = uVar29 & (uint)fVar48;
    auVar22._0_4_ = uVar25 & (uint)fVar47;
    auVar28._0_4_ = ~uVar25 & (uint)auVar23._0_4_;
    auVar28._4_4_ = ~uVar29 & (uint)auVar23._4_4_;
    auVar28._8_4_ = ~uVar31 & (uint)auVar23._8_4_;
    auVar28._12_4_ = ~uVar34 & (uint)auVar23._12_4_;
    auVar22._8_4_ = uVar31 & (uint)fVar49;
    auVar22._12_4_ = uVar34 & (uint)fVar50;
    local_1290._12_4_ = uStack_12d4 & uVar34 | ~uVar34 & local_1290._12_4_;
    auVar23 = auVar22 | auVar28;
    pauVar20 = pauVar11;
    local_12e0 = local_12e0 + __LC20;
    uStack_12dc = uStack_12dc + _UNK_001440e4;
    uStack_12d8 = uStack_12d8 + _UNK_001440e8;
    uStack_12d4 = uStack_12d4 + _UNK_001440ec;
  } while (pauVar11 != pauVar12 + 0xb4);
  fVar47 = auVar23._4_4_;
  fVar48 = auVar23._8_4_;
  if (((fVar51 == 0.0) || (_LC21 < auVar23._0_4_)) || (uVar14 = 0, local_1290._0_4_ == 0)) {
    auVar23 = ZEXT416(_LC8);
    local_1290._0_4_ = 0;
    uVar14 = 0xffffffff;
  }
  fVar49 = auVar23._0_4_;
  if (((fVar53 != 0.0) && (fVar47 < fVar49)) && (local_1290._4_4_ != 0)) {
    uVar14 = 1;
    local_1290._0_4_ = local_1290._4_4_;
    fVar49 = fVar47;
  }
  if (((fVar54 != 0.0) && (fVar48 < fVar49)) && (local_1290._8_4_ != 0)) {
    uVar14 = 2;
    local_1290._0_4_ = local_1290._8_4_;
    fVar49 = fVar48;
  }
  *(undefined4 *)(param_1 + 4) = uVar14;
  *(undefined4 *)(param_1 + 8) = local_1290._0_4_;
  *(undefined4 *)(param_1 + 0xc) = 0;
  *(undefined8 *)(param_1 + 0x10) = 0x20;
  *(float *)param_1 = fVar49;
  *(undefined8 *)(param_1 + 0x20) = uVar7;
  *(undefined8 *)(param_1 + 0x28) = uVar8;
  *(float *)(param_1 + 0x30) = fVar51;
  *(float *)(param_1 + 0x34) = fVar53;
  *(float *)(param_1 + 0x38) = fVar54;
  *(uint *)(param_1 + 0x3c) = -(uint)bVar1 & auVar27._12_4_;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::sequential_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long) */

PrimInfoExtRange *
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
::sequential_object_find(PrimInfoExtRange *param_1,ulong param_2)

{
  bool bVar1;
  ulong uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  long lVar9;
  long lVar10;
  undefined1 (*pauVar11) [16];
  undefined1 (*pauVar12) [16];
  long lVar13;
  uint in_ECX;
  undefined4 uVar14;
  long in_RDX;
  ulong uVar15;
  float *pfVar16;
  undefined1 (*pauVar17) [16];
  long lVar18;
  ulong uVar19;
  undefined1 (*pauVar20) [16];
  ulong uVar21;
  long in_FS_OFFSET;
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  undefined1 auVar24 [16];
  uint uVar25;
  int iVar26;
  uint uVar29;
  uint uVar31;
  undefined1 auVar27 [16];
  int iVar30;
  int iVar32;
  int iVar33;
  undefined1 auVar28 [16];
  uint uVar34;
  uint uVar38;
  uint uVar39;
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  float fVar43;
  float fVar44;
  undefined1 auVar42 [16];
  undefined1 auVar45 [16];
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  undefined1 auVar46 [16];
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  uint uVar57;
  uint uVar58;
  undefined1 auVar55 [16];
  undefined1 auVar56 [16];
  undefined1 auVar59 [16];
  uint local_12e0;
  uint uStack_12dc;
  uint uStack_12d8;
  uint uStack_12d4;
  undefined1 local_12d0 [16];
  undefined1 local_12c0 [16];
  undefined1 local_12b0 [16];
  undefined1 local_12a0 [16];
  undefined1 local_1290 [16];
  float local_1280 [124];
  float local_1090 [4];
  int local_1080 [128];
  int local_e80 [4];
  undefined1 local_e70 [16];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2896];
  undefined1 local_2e0 [80];
  int local_290 [4];
  int local_280 [142];
  long local_48;
  
  auVar23._0_8_ = CONCAT44(_LC8,_LC8);
  auVar23._8_4_ = _LC8;
  auVar23._12_4_ = _LC8;
  auVar24._0_8_ = CONCAT44(_LC6,_LC6);
  auVar24._8_4_ = _LC6;
  auVar24._12_4_ = _LC6;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pauVar20 = (undefined1 (*) [16])local_e80;
  pauVar12 = (undefined1 (*) [16])local_280;
  do {
    pauVar20[4] = auVar23;
    pauVar11 = pauVar20 + 6;
    pauVar20[5] = auVar24;
    pauVar20[2] = auVar23;
    pauVar20[3] = auVar24;
    *pauVar20 = auVar23;
    pauVar20[1] = auVar24;
    *pauVar12 = (undefined1  [16])0x0;
    pauVar20 = pauVar11;
    pauVar12 = pauVar12 + 1;
  } while ((undefined1 (*) [16])local_280 != pauVar11);
  fVar47 = *(float *)(in_RDX + 0x20);
  fVar48 = *(float *)(in_RDX + 0x24);
  uVar7 = *(undefined8 *)(in_RDX + 0x20);
  fVar49 = *(float *)(in_RDX + 0x28);
  uVar8 = *(undefined8 *)(in_RDX + 0x28);
  auVar27._0_4_ = *(float *)(in_RDX + 0x30) - fVar47;
  auVar27._4_4_ = *(float *)(in_RDX + 0x34) - fVar48;
  auVar27._8_4_ = *(float *)(in_RDX + 0x38) - fVar49;
  auVar27._12_4_ = *(float *)(in_RDX + 0x3c) - *(float *)(in_RDX + 0x2c);
  auVar35._4_4_ = _LC11;
  auVar35._0_4_ = _LC11;
  auVar35._8_4_ = _LC11;
  auVar35._12_4_ = _LC11;
  pauVar20 = (undefined1 (*) [16])(*(long *)(in_RDX + 0x40) * 0x40 + *(long *)param_2);
  auVar35 = maxps(auVar35,auVar27);
  auVar36._4_4_ = _LC13;
  auVar36._0_4_ = _LC13;
  auVar36._8_4_ = _LC13;
  auVar36._12_4_ = _LC13;
  auVar27 = divps(auVar36,auVar35);
  bVar1 = _LC11 < auVar35._12_4_;
  fVar51 = (float)(-(uint)(_LC11 < auVar35._0_4_) & auVar27._0_4_);
  fVar53 = (float)(-(uint)(_LC11 < auVar35._4_4_) & auVar27._4_4_);
  fVar54 = (float)(-(uint)(_LC11 < auVar35._8_4_) & auVar27._8_4_);
  uVar21 = *(long *)(in_RDX + 0x48) - *(long *)(in_RDX + 0x40);
  if (uVar21 != 0) {
    if (uVar21 != 1) {
      pauVar12 = pauVar20;
      do {
        auVar36 = pauVar12[1];
        auVar35 = *pauVar12;
        auVar37 = pauVar12[4];
        pauVar11 = pauVar12 + 8;
        uVar25 = (uint)(((auVar36._0_4_ + auVar35._0_4_) - fVar47) * fVar51 + _LC15);
        uVar29 = (uint)(((auVar36._4_4_ + auVar35._4_4_) - fVar48) * fVar53 + _LC15);
        uVar31 = (uint)(((auVar36._8_4_ + auVar35._8_4_) - fVar49) * fVar54 + _LC15);
        uVar34 = -(uint)((int)uVar25 < (int)__LC17);
        uVar38 = -(uint)((int)uVar29 < (int)_UNK_00144104);
        uVar39 = -(uint)((int)uVar31 < (int)_UNK_00144108);
        uVar25 = uVar25 & uVar34 | ~uVar34 & __LC17;
        uVar29 = uVar29 & uVar38 | ~uVar38 & _UNK_00144104;
        uVar34 = uVar31 & uVar39 | ~uVar39 & _UNK_00144108;
        auVar40 = pauVar12[5];
        uVar15 = (ulong)(~-(uint)((int)uVar25 < 0) & uVar25);
        pauVar17 = (undefined1 (*) [16])local_e80 + uVar15 * 6;
        uVar25 = (uint)(((auVar40._0_4_ + auVar37._0_4_) - fVar47) * fVar51 + _LC15);
        uVar31 = (uint)(((auVar40._4_4_ + auVar37._4_4_) - fVar48) * fVar53 + _LC15);
        uVar38 = (uint)(((auVar40._8_4_ + auVar37._8_4_) - fVar49) * fVar54 + _LC15);
        uVar39 = -(uint)((int)uVar25 < (int)__LC17);
        uVar57 = -(uint)((int)uVar31 < (int)_UNK_00144104);
        uVar58 = -(uint)((int)uVar38 < (int)_UNK_00144108);
        uVar25 = uVar39 & uVar25 | ~uVar39 & __LC17;
        uVar31 = uVar57 & uVar31 | ~uVar57 & _UNK_00144104;
        uVar38 = uVar58 & uVar38 | ~uVar58 & _UNK_00144108;
        auVar55 = minps(*pauVar17,auVar35);
        *pauVar17 = auVar55;
        auVar55 = maxps(*(undefined1 (*) [16])(local_e70 + uVar15 * 0x60),auVar36);
        *(undefined1 (*) [16])(local_e70 + uVar15 * 0x60) = auVar55;
        uVar19 = (ulong)(~-(uint)((int)uVar29 < 0) & uVar29);
        lVar18 = uVar19 * 0x60;
        auVar55 = minps(*(undefined1 (*) [16])(local_e60 + lVar18),auVar35);
        *(undefined1 (*) [16])(local_e60 + lVar18) = auVar55;
        auVar55 = maxps(*(undefined1 (*) [16])(local_e50 + lVar18),auVar36);
        *(undefined1 (*) [16])(local_e50 + lVar18) = auVar55;
        uVar2 = (ulong)(~-(uint)((int)uVar34 < 0) & uVar34);
        lVar18 = uVar2 * 0x60;
        auVar35 = minps(*(undefined1 (*) [16])(local_e40 + lVar18),auVar35);
        *(undefined1 (*) [16])(local_e40 + lVar18) = auVar35;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e30 + lVar18),auVar36);
        *(undefined1 (*) [16])(local_e30 + lVar18) = auVar36;
        iVar26 = *(int *)(pauVar12[1] + 0xc);
        local_e80[(uVar15 + 0xc0) * 4] = local_e80[(uVar15 + 0xc0) * 4] + iVar26;
        uVar15 = (ulong)(~-(uint)((int)uVar25 < 0) & uVar25);
        local_280[uVar2 * 4 + 2] = local_280[uVar2 * 4 + 2] + iVar26;
        local_280[uVar19 * 4 + 1] = local_280[uVar19 * 4 + 1] + iVar26;
        pauVar17 = (undefined1 (*) [16])local_e80 + uVar15 * 6;
        auVar36 = minps(*pauVar17,auVar37);
        *pauVar17 = auVar36;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e70 + uVar15 * 0x60),auVar40);
        *(undefined1 (*) [16])(local_e70 + uVar15 * 0x60) = auVar36;
        uVar19 = (ulong)(~-(uint)((int)uVar31 < 0) & uVar31);
        lVar18 = uVar19 * 0x60;
        auVar36 = minps(*(undefined1 (*) [16])(local_e60 + lVar18),auVar37);
        *(undefined1 (*) [16])(local_e60 + lVar18) = auVar36;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e50 + lVar18),auVar40);
        *(undefined1 (*) [16])(local_e50 + lVar18) = auVar36;
        uVar2 = (ulong)(~-(uint)((int)uVar38 < 0) & uVar38);
        lVar18 = uVar2 * 0x60;
        auVar36 = minps(*(undefined1 (*) [16])(local_e40 + lVar18),auVar37);
        *(undefined1 (*) [16])(local_e40 + lVar18) = auVar36;
        auVar36 = maxps(*(undefined1 (*) [16])(local_e30 + lVar18),auVar40);
        *(undefined1 (*) [16])(local_e30 + lVar18) = auVar36;
        iVar26 = *(int *)(pauVar12[5] + 0xc);
        local_e80[(uVar15 + 0xc0) * 4] = local_e80[(uVar15 + 0xc0) * 4] + iVar26;
        local_280[uVar19 * 4 + 1] = local_280[uVar19 * 4 + 1] + iVar26;
        local_280[uVar2 * 4 + 2] = local_280[uVar2 * 4 + 2] + iVar26;
        pauVar12 = pauVar11;
      } while (pauVar20 + (uVar21 - 2 >> 1) * 8 + 8 != pauVar11);
      uVar19 = (uVar21 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar21 <= uVar19) goto LAB_0010d4af;
      pauVar20 = pauVar20 + uVar19 * 4;
    }
    auVar36 = pauVar20[1];
    auVar35 = *pauVar20;
    iVar26 = *(int *)(pauVar20[1] + 0xc);
    uVar25 = (uint)(((auVar36._0_4_ + auVar35._0_4_) - fVar47) * fVar51 + _LC15);
    uVar29 = (uint)(((auVar36._4_4_ + auVar35._4_4_) - fVar48) * fVar53 + _LC15);
    uVar31 = (uint)(((auVar36._8_4_ + auVar35._8_4_) - fVar49) * fVar54 + _LC15);
    uVar34 = -(uint)((int)uVar25 < (int)__LC17);
    uVar38 = -(uint)((int)uVar29 < (int)_UNK_00144104);
    uVar39 = -(uint)((int)uVar31 < (int)_UNK_00144108);
    uVar25 = uVar34 & uVar25 | ~uVar34 & __LC17;
    uVar29 = uVar38 & uVar29 | ~uVar38 & _UNK_00144104;
    uVar31 = uVar39 & uVar31 | ~uVar39 & _UNK_00144108;
    lVar18 = (long)(int)(~-(uint)((int)uVar25 < 0) & uVar25);
    pauVar20 = (undefined1 (*) [16])local_e80 + lVar18 * 6;
    local_e80[(lVar18 + 0xc0) * 4] = local_e80[(lVar18 + 0xc0) * 4] + iVar26;
    auVar37 = minps(*pauVar20,auVar35);
    *pauVar20 = auVar37;
    auVar37 = maxps(*(undefined1 (*) [16])(local_e70 + lVar18 * 0x60),auVar36);
    *(undefined1 (*) [16])(local_e70 + lVar18 * 0x60) = auVar37;
    lVar18 = (long)(int)(~-(uint)((int)uVar29 < 0) & uVar29);
    lVar13 = lVar18 * 0x60;
    local_280[lVar18 * 4 + 1] = local_280[lVar18 * 4 + 1] + iVar26;
    auVar37 = minps(*(undefined1 (*) [16])(local_e60 + lVar13),auVar35);
    *(undefined1 (*) [16])(local_e60 + lVar13) = auVar37;
    auVar37 = maxps(*(undefined1 (*) [16])(local_e50 + lVar13),auVar36);
    *(undefined1 (*) [16])(local_e50 + lVar13) = auVar37;
    lVar18 = (long)(int)(~-(uint)((int)uVar31 < 0) & uVar31);
    lVar13 = lVar18 * 0x60;
    local_280[lVar18 * 4 + 2] = local_280[lVar18 * 4 + 2] + iVar26;
    auVar35 = minps(*(undefined1 (*) [16])(local_e40 + lVar13),auVar35);
    *(undefined1 (*) [16])(local_e40 + lVar13) = auVar35;
    auVar36 = maxps(*(undefined1 (*) [16])(local_e30 + lVar13),auVar36);
    *(undefined1 (*) [16])(local_e30 + lVar13) = auVar36;
  }
LAB_0010d4af:
  lVar18 = 0x1f0;
  auVar45._8_4_ = _LC6;
  auVar45._0_8_ = auVar24._0_8_;
  auVar45._12_4_ = _LC6;
  auVar42._8_4_ = _LC8;
  auVar42._0_8_ = auVar23._0_8_;
  auVar42._12_4_ = _LC8;
  auVar41._8_4_ = _LC6;
  auVar41._0_8_ = auVar24._0_8_;
  auVar41._12_4_ = _LC6;
  auVar55._8_4_ = _LC8;
  auVar55._0_8_ = auVar23._0_8_;
  auVar55._12_4_ = _LC8;
  auVar40._8_4_ = _LC6;
  auVar40._0_8_ = auVar24._0_8_;
  auVar40._12_4_ = _LC6;
  auVar37._8_4_ = _LC8;
  auVar37._0_8_ = auVar23._0_8_;
  auVar37._12_4_ = _LC8;
  iVar26 = 0;
  iVar30 = 0;
  iVar32 = 0;
  iVar33 = 0;
  pauVar20 = (undefined1 (*) [16])local_2e0;
  pfVar16 = local_1090;
  do {
    pauVar12 = pauVar20;
    auVar40 = maxps(auVar40,pauVar12[1]);
    auVar37 = minps(auVar37,*pauVar12);
    pauVar20 = pauVar12 + -6;
    iVar3 = *(int *)(*(undefined1 (*) [16])local_280 + lVar18);
    iVar4 = *(int *)((long)local_280 + lVar18 + 4);
    iVar5 = *(int *)((long)local_280 + lVar18 + 8);
    iVar6 = *(int *)((long)local_280 + lVar18 + 0xc);
    auVar41 = maxps(auVar41,pauVar12[3]);
    pfVar16[3] = 0.0;
    auVar55 = minps(auVar55,pauVar12[2]);
    auVar45 = maxps(auVar45,pauVar12[5]);
    iVar26 = iVar3 + iVar26;
    iVar30 = iVar4 + iVar30;
    iVar32 = iVar5 + iVar32;
    iVar33 = iVar6 + iVar33;
    auVar42 = minps(auVar42,pauVar12[4]);
    fVar47 = auVar40._4_4_ - auVar37._4_4_;
    fVar49 = auVar40._8_4_ - auVar37._8_4_;
    *(int *)((long)local_1080 + lVar18) = iVar26;
    *(int *)((long)local_1080 + lVar18 + 4) = iVar30;
    *(int *)((long)local_1080 + lVar18 + 8) = iVar32;
    *(int *)((long)local_1080 + lVar18 + 0xc) = iVar33;
    lVar18 = lVar18 + -0x10;
    fVar48 = auVar41._4_4_ - auVar55._4_4_;
    fVar50 = auVar41._8_4_ - auVar55._8_4_;
    *pfVar16 = (fVar47 + fVar49) * (auVar40._0_4_ - auVar37._0_4_) + fVar47 * fVar49;
    fVar47 = auVar45._4_4_ - auVar42._4_4_;
    fVar49 = auVar45._8_4_ - auVar42._8_4_;
    pfVar16[1] = (fVar48 + fVar50) * (auVar41._0_4_ - auVar55._0_4_) + fVar48 * fVar50;
    pfVar16[2] = (fVar47 + fVar49) * (auVar45._0_4_ - auVar42._0_4_) + fVar47 * fVar49;
    pfVar16 = pfVar16 + -4;
  } while ((undefined1 (*) [16])local_e80 != pauVar20);
  auVar46._8_4_ = _LC6;
  auVar46._0_8_ = auVar24._0_8_;
  auVar46._12_4_ = _LC6;
  iVar26 = (1 << ((byte)in_ECX & 0x1f)) + -1;
  uVar21 = (ulong)in_ECX;
  auVar56._8_4_ = _LC6;
  auVar56._0_8_ = auVar24._0_8_;
  auVar56._12_4_ = _LC6;
  lVar18 = 0x10;
  auVar59._8_4_ = _LC6;
  auVar59._0_8_ = auVar24._0_8_;
  auVar59._12_4_ = _LC6;
  local_1290 = (undefined1  [16])0x0;
  local_12a0 = (undefined1  [16])0x0;
  local_12d0 = auVar23;
  local_12c0 = auVar23;
  local_12b0 = auVar23;
  local_12e0 = __LC20;
  uStack_12dc = _UNK_001440e4;
  uStack_12d8 = _UNK_001440e8;
  uStack_12d4 = _UNK_001440ec;
  do {
    auVar59 = maxps(auVar59,pauVar20[5]);
    pauVar11 = pauVar20 + 6;
    local_12d0 = minps(local_12d0,pauVar20[4]);
    auVar46 = maxps(auVar46,pauVar20[1]);
    auVar56 = maxps(auVar56,pauVar20[3]);
    local_12b0 = minps(local_12b0,*pauVar20);
    fVar47 = auVar59._4_4_ - local_12d0._4_4_;
    fVar48 = auVar59._8_4_ - local_12d0._8_4_;
    local_12c0 = minps(local_12c0,pauVar20[2]);
    local_12a0._0_4_ = local_12a0._0_4_ + *(int *)((long)local_290 + lVar18);
    local_12a0._4_4_ = local_12a0._4_4_ + *(int *)((long)local_290 + lVar18 + 4);
    local_12a0._8_4_ = local_12a0._8_4_ + *(int *)((long)local_290 + lVar18 + 8);
    local_12a0._12_4_ = local_12a0._12_4_ + *(int *)((long)local_290 + lVar18 + 0xc);
    fVar43 = auVar46._4_4_ - local_12b0._4_4_;
    fVar44 = auVar46._8_4_ - local_12b0._8_4_;
    fVar49 = auVar56._4_4_ - local_12c0._4_4_;
    fVar50 = auVar56._8_4_ - local_12c0._8_4_;
    uVar38 = (uint)(local_12a0._0_4_ + iVar26) >> uVar21;
    uVar39 = (uint)(local_12a0._4_4_ + iVar26) >> uVar21;
    uVar57 = (uint)(local_12a0._8_4_ + iVar26) >> uVar21;
    uVar58 = (uint)(local_12a0._12_4_ + iVar26) >> uVar21;
    fVar52 = fVar47 * fVar48 + (fVar47 + fVar48) * (auVar59._0_4_ - local_12d0._0_4_);
    uVar25 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18)) >> uVar21;
    uVar29 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18 + 4)) >> uVar21;
    uVar31 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18 + 8)) >> uVar21;
    uVar34 = (uint)(iVar26 + *(int *)((long)local_1080 + lVar18 + 0xc)) >> uVar21;
    pfVar16 = (float *)((long)local_1280 + lVar18);
    lVar13 = lVar18 + 4;
    lVar9 = lVar18 + 8;
    lVar10 = lVar18 + 0xc;
    lVar18 = lVar18 + 0x10;
    fVar47 = ((float)(int)(uVar25 & _LC25) + (float)((int)uVar25 >> 0x1f & __LC19)) * *pfVar16 +
             ((fVar43 + fVar44) * (auVar46._0_4_ - local_12b0._0_4_) + fVar43 * fVar44) *
             ((float)(int)(uVar38 & _LC25) + (float)((int)uVar38 >> 0x1f & __LC19));
    fVar48 = ((float)(int)(uVar29 & _UNK_00144114) + (float)((int)uVar29 >> 0x1f & _UNK_00144124)) *
             *(float *)((long)local_1280 + lVar13) +
             ((fVar49 + fVar50) * (auVar56._0_4_ - local_12c0._0_4_) + fVar49 * fVar50) *
             ((float)(int)(uVar39 & _UNK_00144114) + (float)((int)uVar39 >> 0x1f & _UNK_00144124));
    fVar49 = ((float)(int)(uVar31 & _UNK_00144118) + (float)((int)uVar31 >> 0x1f & _UNK_00144128)) *
             *(float *)((long)local_1280 + lVar9) +
             fVar52 * ((float)(int)(uVar57 & _UNK_00144118) +
                      (float)((int)uVar57 >> 0x1f & _UNK_00144128));
    fVar50 = ((float)(int)(uVar34 & _UNK_0014411c) + (float)((int)uVar34 >> 0x1f & _UNK_0014412c)) *
             *(float *)((long)local_1280 + lVar10) +
             fVar52 * ((float)(int)(uVar58 & _UNK_0014411c) +
                      (float)((int)uVar58 >> 0x1f & _UNK_0014412c));
    uVar25 = -(uint)(fVar47 < auVar23._0_4_);
    uVar29 = -(uint)(fVar48 < auVar23._4_4_);
    uVar31 = -(uint)(fVar49 < auVar23._8_4_);
    uVar34 = -(uint)(fVar50 < auVar23._12_4_);
    local_1290._0_4_ = local_12e0 & uVar25 | ~uVar25 & local_1290._0_4_;
    local_1290._4_4_ = uStack_12dc & uVar29 | ~uVar29 & local_1290._4_4_;
    local_1290._8_4_ = uStack_12d8 & uVar31 | ~uVar31 & local_1290._8_4_;
    auVar22._4_4_ = uVar29 & (uint)fVar48;
    auVar22._0_4_ = uVar25 & (uint)fVar47;
    auVar28._0_4_ = ~uVar25 & (uint)auVar23._0_4_;
    auVar28._4_4_ = ~uVar29 & (uint)auVar23._4_4_;
    auVar28._8_4_ = ~uVar31 & (uint)auVar23._8_4_;
    auVar28._12_4_ = ~uVar34 & (uint)auVar23._12_4_;
    auVar22._8_4_ = uVar31 & (uint)fVar49;
    auVar22._12_4_ = uVar34 & (uint)fVar50;
    local_1290._12_4_ = uStack_12d4 & uVar34 | ~uVar34 & local_1290._12_4_;
    auVar23 = auVar22 | auVar28;
    pauVar20 = pauVar11;
    local_12e0 = local_12e0 + __LC20;
    uStack_12dc = uStack_12dc + _UNK_001440e4;
    uStack_12d8 = uStack_12d8 + _UNK_001440e8;
    uStack_12d4 = uStack_12d4 + _UNK_001440ec;
  } while (pauVar11 != pauVar12 + 0xb4);
  fVar47 = auVar23._4_4_;
  fVar48 = auVar23._8_4_;
  if (((fVar51 == 0.0) || (_LC21 < auVar23._0_4_)) || (uVar14 = 0, local_1290._0_4_ == 0)) {
    auVar23 = ZEXT416(_LC8);
    local_1290._0_4_ = 0;
    uVar14 = 0xffffffff;
  }
  fVar49 = auVar23._0_4_;
  if (((fVar53 != 0.0) && (fVar47 < fVar49)) && (local_1290._4_4_ != 0)) {
    uVar14 = 1;
    local_1290._0_4_ = local_1290._4_4_;
    fVar49 = fVar47;
  }
  if (((fVar54 != 0.0) && (fVar48 < fVar49)) && (local_1290._8_4_ != 0)) {
    uVar14 = 2;
    local_1290._0_4_ = local_1290._8_4_;
    fVar49 = fVar48;
  }
  *(undefined4 *)(param_1 + 4) = uVar14;
  *(undefined4 *)(param_1 + 8) = local_1290._0_4_;
  *(undefined4 *)(param_1 + 0xc) = 0;
  *(undefined8 *)(param_1 + 0x10) = 0x20;
  *(float *)param_1 = fVar49;
  *(undefined8 *)(param_1 + 0x20) = uVar7;
  *(undefined8 *)(param_1 + 0x28) = uVar8;
  *(float *)(param_1 + 0x30) = fVar51;
  *(float *)(param_1 + 0x34) = fVar53;
  *(float *)(param_1 + 0x38) = fVar54;
  *(uint *)(param_1 + 0x3c) = -(uint)bVar1 & auVar27._12_4_;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> > embree::parallel_reduce_internal<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::parallel_reduce<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::build()::{lambda(embree::range<unsigned long>
   const&)#4}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}>(unsigned long, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::build()::{lambda(embree::range<unsigned long>
   const&)#4} const&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}
   const&)::{lambda(embree::range<unsigned long>)#1}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}>(unsigned long, unsigned long,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::parallel_reduce<unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#4}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}>(unsigned long, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::build()::{lambda(embree::range<unsigned long>
   const&)#4} const&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}
   const&)::{lambda(embree::range<unsigned long>)#1} const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::parallel_reduce<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>(unsigned_long,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_const&)::_lambda(embree::range<unsigned_long>)_1_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,PrimInfoT_conflict *param_5
                ,_lambda_embree__range<unsigned_long>__1_ *param_6,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
                *param_7)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  undefined1 (*pauVar8) [16];
  undefined1 (*pauVar9) [16];
  undefined8 uVar10;
  long lVar11;
  long in_FS_OFFSET;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  ulong local_2108;
  ulong local_2100;
  ulong local_20f8 [2];
  ulong local_20e8;
  ulong *local_20e0;
  ulong *local_20d8;
  ulong *local_20d0;
  undefined1 (*local_20c8) [16];
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
  *local_20c0;
  ulong local_20b0;
  undefined8 uStack_20a8;
  undefined8 local_20a0;
  ulong **ppuStack_2098;
  ulong *local_2090;
  undefined1 local_2080 [8160];
  undefined1 (*local_a0) [16];
  ulong local_98;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2108 = param_4;
  local_2100 = param_3;
  local_20f8[0] = param_2;
  uVar5 = embree::TaskScheduler::threadCount();
  if (0x200 < local_20f8[0]) {
    local_20f8[0] = 0x200;
  }
  if (uVar5 < local_20f8[0]) {
    local_20f8[0] = uVar5;
  }
  local_98 = local_20f8[0];
  if (local_20f8[0] * 0x50 < 0x2001) {
    local_a0 = (undefined1 (*) [16])local_2080;
  }
  else {
    local_a0 = (undefined1 (*) [16])embree::alignedMalloc(local_20f8[0] * 0x50,0x40);
  }
  uVar5 = local_20f8[0];
  local_20e0 = &local_2100;
  local_20d8 = &local_2108;
  local_20d0 = local_20f8;
  local_20c0 = param_7;
  local_20c8 = (undefined1 (*) [16])local_2080;
  if (local_20f8[0] == 0) {
    uVar10 = *(undefined8 *)(param_6 + 8);
    *(undefined8 *)param_1 = *(undefined8 *)param_6;
    *(undefined8 *)(param_1 + 8) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x18);
    *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_6 + 0x10);
    *(undefined8 *)(param_1 + 0x18) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x28);
    *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_6 + 0x20);
    *(undefined8 *)(param_1 + 0x28) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x38);
    *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_6 + 0x30);
    *(undefined8 *)(param_1 + 0x38) = uVar10;
    *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_6 + 0x40);
    *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_6 + 0x48);
  }
  else {
    ppuStack_2098 = &local_20e0;
    uStack_20a8 = 0;
    local_20a0 = 1;
    local_20e8 = 0;
    local_20b0 = local_20f8[0];
    local_2090 = &local_20e8;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar10 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_15parallel_reduceImS9_ZNS_4sse219BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMiILi4EEEE5buildEvEUlRKNS_5rangeImEEE2_ZNSG_5buildEvEUlRKS9_SN_E3_EET0_T_SQ_RKSP_RKT1_RKT2_EUlSI_E_SO_EESP_SQ_SQ_SQ_SQ_SS_SV_SY_EUlmE_EEvSQ_SS_EUlSK_E_EEvSQ_SQ_SQ_SS_PNS0_16TaskGroupContextEEUlvE_EEvRKSQ_S13_mb
                (uVar10,&local_20b0,&local_20e8,uVar5,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_0010e39e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar11 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar11 + 0x30 + (ulong)(-(int)lVar11 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010e39e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = 0x143950;
      puVar3[1] = local_20b0;
      puVar3[2] = uStack_20a8;
      puVar3[3] = local_20a0;
      puVar3[4] = ppuStack_2098;
      puVar3[5] = local_2090;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_20e8;
      *(long *)(lVar7 + 0x68) = lVar11;
      *(ulong *)(lVar7 + 0x70) = uVar5;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_20e8 != 0) {
      local_20b0 = local_20e8;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20b0);
      goto LAB_0010e399;
    }
    auVar12 = *(undefined1 (*) [16])param_6;
    *(undefined1 (*) [16])param_1 = auVar12;
    auVar13 = *(undefined1 (*) [16])(param_6 + 0x10);
    *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
    auVar14 = *(undefined1 (*) [16])(param_6 + 0x20);
    *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
    auVar15 = *(undefined1 (*) [16])(param_6 + 0x30);
    *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
    lVar6 = *(long *)(param_6 + 0x40);
    lVar11 = *(long *)(param_6 + 0x48);
    *(long *)(param_1 + 0x40) = lVar6;
    *(long *)(param_1 + 0x48) = lVar11;
    if (local_20f8[0] != 0) {
      pauVar8 = local_a0;
      do {
        auVar12 = minps(auVar12,*pauVar8);
        auVar13 = maxps(auVar13,pauVar8[1]);
        pauVar9 = pauVar8 + 5;
        auVar14 = minps(auVar14,pauVar8[2]);
        auVar15 = maxps(auVar15,pauVar8[3]);
        lVar6 = lVar6 + *(long *)pauVar8[4];
        lVar11 = lVar11 + *(long *)(pauVar8[4] + 8);
        *(long *)(param_1 + 0x48) = lVar11;
        *(long *)(param_1 + 0x40) = lVar6;
        *(undefined1 (*) [16])param_1 = auVar12;
        *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
        *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
        *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
        pauVar8 = pauVar9;
      } while (local_a0 + local_20f8[0] * 5 != pauVar9);
    }
  }
  if (local_a0 != (undefined1 (*) [16])local_2080) {
    embree::alignedFree(local_a0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
LAB_0010e399:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> > embree::parallel_reduce_internal<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::parallel_reduce<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::build()::{lambda(embree::range<unsigned long>
   const&)#4}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}>(unsigned long, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::build()::{lambda(embree::range<unsigned long>
   const&)#4} const&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}
   const&)::{lambda(embree::range<unsigned long>)#1}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}>(unsigned long, unsigned long,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::parallel_reduce<unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#4}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}>(unsigned long, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::build()::{lambda(embree::range<unsigned long>
   const&)#4} const&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}
   const&)::{lambda(embree::range<unsigned long>)#1} const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::parallel_reduce<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>(unsigned_long,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_const&)::_lambda(embree::range<unsigned_long>)_1_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,PrimInfoT_conflict *param_5
                ,_lambda_embree__range<unsigned_long>__1_ *param_6,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
                *param_7)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  undefined1 (*pauVar8) [16];
  undefined1 (*pauVar9) [16];
  undefined8 uVar10;
  long lVar11;
  long in_FS_OFFSET;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  ulong local_2108;
  ulong local_2100;
  ulong local_20f8 [2];
  ulong local_20e8;
  ulong *local_20e0;
  ulong *local_20d8;
  ulong *local_20d0;
  undefined1 (*local_20c8) [16];
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
  *local_20c0;
  ulong local_20b0;
  undefined8 uStack_20a8;
  undefined8 local_20a0;
  ulong **ppuStack_2098;
  ulong *local_2090;
  undefined1 local_2080 [8160];
  undefined1 (*local_a0) [16];
  ulong local_98;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2108 = param_4;
  local_2100 = param_3;
  local_20f8[0] = param_2;
  uVar5 = embree::TaskScheduler::threadCount();
  if (0x200 < local_20f8[0]) {
    local_20f8[0] = 0x200;
  }
  if (uVar5 < local_20f8[0]) {
    local_20f8[0] = uVar5;
  }
  local_98 = local_20f8[0];
  if (local_20f8[0] * 0x50 < 0x2001) {
    local_a0 = (undefined1 (*) [16])local_2080;
  }
  else {
    local_a0 = (undefined1 (*) [16])embree::alignedMalloc(local_20f8[0] * 0x50,0x40);
  }
  uVar5 = local_20f8[0];
  local_20e0 = &local_2100;
  local_20d8 = &local_2108;
  local_20d0 = local_20f8;
  local_20c0 = param_7;
  local_20c8 = (undefined1 (*) [16])local_2080;
  if (local_20f8[0] == 0) {
    uVar10 = *(undefined8 *)(param_6 + 8);
    *(undefined8 *)param_1 = *(undefined8 *)param_6;
    *(undefined8 *)(param_1 + 8) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x18);
    *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_6 + 0x10);
    *(undefined8 *)(param_1 + 0x18) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x28);
    *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_6 + 0x20);
    *(undefined8 *)(param_1 + 0x28) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x38);
    *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_6 + 0x30);
    *(undefined8 *)(param_1 + 0x38) = uVar10;
    *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_6 + 0x40);
    *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_6 + 0x48);
  }
  else {
    ppuStack_2098 = &local_20e0;
    uStack_20a8 = 0;
    local_20a0 = 1;
    local_20e8 = 0;
    local_20b0 = local_20f8[0];
    local_2090 = &local_20e8;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar10 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_15parallel_reduceImS9_ZNS_4sse219BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMvILi4EEEE5buildEvEUlRKNS_5rangeImEEE2_ZNSG_5buildEvEUlRKS9_SN_E3_EET0_T_SQ_RKSP_RKT1_RKT2_EUlSI_E_SO_EESP_SQ_SQ_SQ_SQ_SS_SV_SY_EUlmE_EEvSQ_SS_EUlSK_E_EEvSQ_SQ_SQ_SS_PNS0_16TaskGroupContextEEUlvE_EEvRKSQ_S13_mb
                (uVar10,&local_20b0,&local_20e8,uVar5,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_0010f10e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar11 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar11 + 0x30 + (ulong)(-(int)lVar11 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010f10e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = 0x143968;
      puVar3[1] = local_20b0;
      puVar3[2] = uStack_20a8;
      puVar3[3] = local_20a0;
      puVar3[4] = ppuStack_2098;
      puVar3[5] = local_2090;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_20e8;
      *(long *)(lVar7 + 0x68) = lVar11;
      *(ulong *)(lVar7 + 0x70) = uVar5;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_20e8 != 0) {
      local_20b0 = local_20e8;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20b0);
      goto LAB_0010f109;
    }
    auVar12 = *(undefined1 (*) [16])param_6;
    *(undefined1 (*) [16])param_1 = auVar12;
    auVar13 = *(undefined1 (*) [16])(param_6 + 0x10);
    *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
    auVar14 = *(undefined1 (*) [16])(param_6 + 0x20);
    *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
    auVar15 = *(undefined1 (*) [16])(param_6 + 0x30);
    *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
    lVar6 = *(long *)(param_6 + 0x40);
    lVar11 = *(long *)(param_6 + 0x48);
    *(long *)(param_1 + 0x40) = lVar6;
    *(long *)(param_1 + 0x48) = lVar11;
    if (local_20f8[0] != 0) {
      pauVar8 = local_a0;
      do {
        auVar12 = minps(auVar12,*pauVar8);
        auVar13 = maxps(auVar13,pauVar8[1]);
        pauVar9 = pauVar8 + 5;
        auVar14 = minps(auVar14,pauVar8[2]);
        auVar15 = maxps(auVar15,pauVar8[3]);
        lVar6 = lVar6 + *(long *)pauVar8[4];
        lVar11 = lVar11 + *(long *)(pauVar8[4] + 8);
        *(long *)(param_1 + 0x48) = lVar11;
        *(long *)(param_1 + 0x40) = lVar6;
        *(undefined1 (*) [16])param_1 = auVar12;
        *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
        *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
        *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
        pauVar8 = pauVar9;
      } while (local_a0 + local_20f8[0] * 5 != pauVar9);
    }
  }
  if (local_a0 != (undefined1 (*) [16])local_2080) {
    embree::alignedFree(local_a0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
LAB_0010f109:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> > embree::parallel_reduce_internal<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::parallel_reduce<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::build()::{lambda(embree::range<unsigned long>
   const&)#4}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}>(unsigned long, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::build()::{lambda(embree::range<unsigned long>
   const&)#4} const&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}
   const&)::{lambda(embree::range<unsigned long>)#1}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}>(unsigned long, unsigned long,
   unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::parallel_reduce<unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::range<unsigned long> const&)#4}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}>(unsigned long, unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::build()::{lambda(embree::range<unsigned long>
   const&)#4} const&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5}
   const&)::{lambda(embree::range<unsigned long>)#1} const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#5} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::parallel_reduce<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>(unsigned_long,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_const&)::_lambda(embree::range<unsigned_long>)_1_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,PrimInfoT_conflict *param_5
                ,_lambda_embree__range<unsigned_long>__1_ *param_6,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
                *param_7)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  undefined1 (*pauVar8) [16];
  undefined1 (*pauVar9) [16];
  undefined8 uVar10;
  long lVar11;
  long in_FS_OFFSET;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  ulong local_2108;
  ulong local_2100;
  ulong local_20f8 [2];
  ulong local_20e8;
  ulong *local_20e0;
  ulong *local_20d8;
  ulong *local_20d0;
  undefined1 (*local_20c8) [16];
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
  *local_20c0;
  ulong local_20b0;
  undefined8 uStack_20a8;
  undefined8 local_20a0;
  ulong **ppuStack_2098;
  ulong *local_2090;
  undefined1 local_2080 [8160];
  undefined1 (*local_a0) [16];
  ulong local_98;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2108 = param_4;
  local_2100 = param_3;
  local_20f8[0] = param_2;
  uVar5 = embree::TaskScheduler::threadCount();
  if (0x200 < local_20f8[0]) {
    local_20f8[0] = 0x200;
  }
  if (uVar5 < local_20f8[0]) {
    local_20f8[0] = uVar5;
  }
  local_98 = local_20f8[0];
  if (local_20f8[0] * 0x50 < 0x2001) {
    local_a0 = (undefined1 (*) [16])local_2080;
  }
  else {
    local_a0 = (undefined1 (*) [16])embree::alignedMalloc(local_20f8[0] * 0x50,0x40);
  }
  uVar5 = local_20f8[0];
  local_20e0 = &local_2100;
  local_20d8 = &local_2108;
  local_20d0 = local_20f8;
  local_20c0 = param_7;
  local_20c8 = (undefined1 (*) [16])local_2080;
  if (local_20f8[0] == 0) {
    uVar10 = *(undefined8 *)(param_6 + 8);
    *(undefined8 *)param_1 = *(undefined8 *)param_6;
    *(undefined8 *)(param_1 + 8) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x18);
    *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_6 + 0x10);
    *(undefined8 *)(param_1 + 0x18) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x28);
    *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_6 + 0x20);
    *(undefined8 *)(param_1 + 0x28) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x38);
    *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_6 + 0x30);
    *(undefined8 *)(param_1 + 0x38) = uVar10;
    *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_6 + 0x40);
    *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_6 + 0x48);
  }
  else {
    ppuStack_2098 = &local_20e0;
    uStack_20a8 = 0;
    local_20a0 = 1;
    local_20e8 = 0;
    local_20b0 = local_20f8[0];
    local_2090 = &local_20e8;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar10 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_15parallel_reduceImS9_ZNS_4sse219BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_9TriangleMILi4EEEE5buildEvEUlRKNS_5rangeImEEE2_ZNSG_5buildEvEUlRKS9_SN_E3_EET0_T_SQ_RKSP_RKT1_RKT2_EUlSI_E_SO_EESP_SQ_SQ_SQ_SQ_SS_SV_SY_EUlmE_EEvSQ_SS_EUlSK_E_EEvSQ_SQ_SQ_SS_PNS0_16TaskGroupContextEEUlvE_EEvRKSQ_S13_mb
                (uVar10,&local_20b0,&local_20e8,uVar5,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_0010fe7e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar11 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar11 + 0x30 + (ulong)(-(int)lVar11 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0010fe7e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = 0x143980;
      puVar3[1] = local_20b0;
      puVar3[2] = uStack_20a8;
      puVar3[3] = local_20a0;
      puVar3[4] = ppuStack_2098;
      puVar3[5] = local_2090;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_20e8;
      *(long *)(lVar7 + 0x68) = lVar11;
      *(ulong *)(lVar7 + 0x70) = uVar5;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_20e8 != 0) {
      local_20b0 = local_20e8;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20b0);
      goto LAB_0010fe79;
    }
    auVar12 = *(undefined1 (*) [16])param_6;
    *(undefined1 (*) [16])param_1 = auVar12;
    auVar13 = *(undefined1 (*) [16])(param_6 + 0x10);
    *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
    auVar14 = *(undefined1 (*) [16])(param_6 + 0x20);
    *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
    auVar15 = *(undefined1 (*) [16])(param_6 + 0x30);
    *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
    lVar6 = *(long *)(param_6 + 0x40);
    lVar11 = *(long *)(param_6 + 0x48);
    *(long *)(param_1 + 0x40) = lVar6;
    *(long *)(param_1 + 0x48) = lVar11;
    if (local_20f8[0] != 0) {
      pauVar8 = local_a0;
      do {
        auVar12 = minps(auVar12,*pauVar8);
        auVar13 = maxps(auVar13,pauVar8[1]);
        pauVar9 = pauVar8 + 5;
        auVar14 = minps(auVar14,pauVar8[2]);
        auVar15 = maxps(auVar15,pauVar8[3]);
        lVar6 = lVar6 + *(long *)pauVar8[4];
        lVar11 = lVar11 + *(long *)(pauVar8[4] + 8);
        *(long *)(param_1 + 0x48) = lVar11;
        *(long *)(param_1 + 0x40) = lVar6;
        *(undefined1 (*) [16])param_1 = auVar12;
        *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
        *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
        *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
        pauVar8 = pauVar9;
      } while (local_a0 + local_20f8[0] * 5 != pauVar9);
    }
  }
  if (local_a0 != (undefined1 (*) [16])local_2080) {
    embree::alignedFree(local_a0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
LAB_0010fe79:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* unsigned long embree::parallel_reduce_internal<unsigned long, unsigned long,
   embree::parallel_reduce<unsigned long, unsigned long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::resizeRefsList()::{lambda(embree::range<unsigned
   long> const&)#1}, std::plus<unsigned long> >(unsigned long, unsigned long, unsigned long const&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::resizeRefsList()::{lambda(embree::range<unsigned long> const&)#1} const&, std::plus<unsigned
   long> const&)::{lambda(embree::range<unsigned long>)#1}, std::plus<unsigned long> >(unsigned
   long, unsigned long, unsigned long, unsigned long, unsigned long const&,
   embree::parallel_reduce<unsigned long, unsigned long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::resizeRefsList()::{lambda(embree::range<unsigned
   long> const&)#1}, std::plus<unsigned long> >(unsigned long, unsigned long, unsigned long const&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::resizeRefsList()::{lambda(embree::range<unsigned long> const&)#1} const&, std::plus<unsigned
   long> const&)::{lambda(embree::range<unsigned long>)#1} const&, std::plus<unsigned long> const&)
   [clone .isra.0] */

ulong embree::
      parallel_reduce_internal<unsigned_long,unsigned_long,embree::parallel_reduce<unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_,std::plus<unsigned_long>>(unsigned_long,unsigned_long,unsigned_long_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_const&,std::plus<unsigned_long>const&)::_lambda(embree::range<unsigned_long>)_1_,std::plus<unsigned_long>>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,ulong *param_5,
                _lambda_embree__range<unsigned_long>__1_ *param_6,plus *param_7)

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  ulong uVar10;
  long in_FS_OFFSET;
  ulong local_2148;
  ulong local_2140;
  ulong local_2138 [2];
  ulong local_2128;
  ulong *local_2120;
  ulong *local_2118;
  ulong *local_2110;
  long *local_2108;
  ulong *local_2100;
  ulong local_20f0;
  undefined8 uStack_20e8;
  undefined8 local_20e0;
  undefined8 **ppuStack_20d8;
  ulong *local_20d0;
  long local_20c0 [1024];
  long *local_c0;
  ulong local_b8;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2148 = param_3;
  local_2140 = param_2;
  local_2138[0] = param_1;
  uVar5 = embree::TaskScheduler::threadCount();
  if (local_2138[0] < uVar5) {
    uVar5 = local_2138[0];
  }
  local_2120 = &local_2140;
  local_2118 = &local_2148;
  local_2110 = local_2138;
  uVar10 = 0x200;
  if (uVar5 < 0x201) {
    uVar10 = uVar5;
  }
  local_2138[0] = uVar10;
  local_2108 = local_20c0;
  local_2100 = param_5;
  local_c0 = local_20c0;
  local_b8 = uVar10;
  if (uVar5 == 0) {
    uVar5 = *(ulong *)param_4;
  }
  else {
    ppuStack_20d8 = &local_2120;
    uStack_20e8 = 0;
    local_20e0 = 1;
    local_2128 = 0;
    local_20f0 = uVar10;
    local_20d0 = &local_2128;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar9 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImmZNS_15parallel_reduceImmZNS_4sse219BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMiILi4EEEE14resizeRefsListEvEUlRKNS_5rangeImEEE_St4plusImEEET0_T_SK_RKSJ_RKT1_RKT2_EUlSD_E_SI_EESJ_SK_SK_SK_SK_SM_SP_SS_EUlmE_EEvSK_SM_EUlSF_E_EEvSK_SK_SK_SM_PNS0_16TaskGroupContextEEUlvE_EEvRKSK_SX_mb
                (uVar9,&local_20f0,&local_2128,uVar10,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_00110b13:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar6 + 0xc00c0);
      uVar5 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar5) goto LAB_00110b13;
      *(ulong *)(lVar6 + 0xc00c0) = uVar5;
      puVar2 = (undefined8 *)(lVar6 + 0x40090 + uVar5);
      *puVar2 = 0x143998;
      puVar2[1] = local_20f0;
      puVar2[2] = uStack_20e8;
      puVar2[3] = local_20e0;
      puVar2[4] = ppuStack_20d8;
      puVar2[5] = local_20d0;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar2;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_2128;
      *(long *)(lVar7 + 0x68) = lVar3;
      *(ulong *)(lVar7 + 0x70) = uVar10;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2128 != 0) {
      local_20f0 = local_2128;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20f0);
      goto LAB_00110b0e;
    }
    uVar5 = *(ulong *)param_4;
    if (local_2138[0] != 0) {
      plVar8 = local_c0;
      do {
        uVar5 = uVar5 + *plVar8;
        plVar8 = plVar8 + 1;
      } while (local_c0 + local_2138[0] != plVar8);
    }
  }
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
LAB_00110b0e:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned long,
   unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2}
   const&)::{lambda(unsigned long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::range<unsigned_long>const&)#1},embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,emb...embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&)#2}const&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined1 auVar1 [16];
  int iVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  undefined8 uVar21;
  undefined8 uVar22;
  ulong uVar23;
  undefined8 *puVar24;
  long lVar25;
  ulong uVar26;
  ulong uVar27;
  uint uVar28;
  undefined1 (*pauVar29) [16];
  undefined1 (*pauVar30) [16];
  ulong uVar31;
  long lVar32;
  undefined8 *puVar33;
  undefined1 (*pauVar34) [16];
  long in_FS_OFFSET;
  bool bVar35;
  uint uVar36;
  uint uVar37;
  uint uVar38;
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  uint uVar41;
  uint uVar43;
  uint uVar44;
  undefined1 auVar42 [16];
  uint uVar46;
  uint uVar47;
  undefined1 auVar45 [16];
  int local_e80 [4];
  undefined1 local_e70 [16];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2992];
  undefined1 local_280 [4];
  int aiStack_27c [125];
  undefined8 local_88;
  long local_48;
  
  puVar24 = *(undefined8 **)(this + 0x20);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar32 = **(long **)this;
  lVar25 = **(long **)(this + 8) - lVar32;
  uVar31 = lVar25 * param_1;
  uVar27 = **(ulong **)(this + 0x10);
  uVar23 = uVar31 / uVar27;
  pauVar34 = (undefined1 (*) [16])local_280;
  pauVar30 = (undefined1 (*) [16])local_e80;
  do {
    *(undefined4 *)pauVar30[4] = _LC8;
    *(undefined4 *)(pauVar30[4] + 4) = _LC8;
    *(undefined4 *)(pauVar30[4] + 8) = _LC8;
    *(undefined4 *)(pauVar30[4] + 0xc) = _LC8;
    pauVar29 = pauVar30 + 6;
    *(undefined4 *)pauVar30[5] = _LC6;
    *(undefined4 *)(pauVar30[5] + 4) = _LC6;
    *(undefined4 *)(pauVar30[5] + 8) = _LC6;
    *(undefined4 *)(pauVar30[5] + 0xc) = _LC6;
    *(undefined4 *)pauVar30[2] = _LC8;
    *(undefined4 *)(pauVar30[2] + 4) = _LC8;
    *(undefined4 *)(pauVar30[2] + 8) = _LC8;
    *(undefined4 *)(pauVar30[2] + 0xc) = _LC8;
    *(undefined4 *)pauVar30[3] = _LC6;
    *(undefined4 *)(pauVar30[3] + 4) = _LC6;
    *(undefined4 *)(pauVar30[3] + 8) = _LC6;
    *(undefined4 *)(pauVar30[3] + 0xc) = _LC6;
    *(undefined4 *)*pauVar30 = _LC8;
    *(undefined4 *)(*pauVar30 + 4) = _LC8;
    *(undefined4 *)(*pauVar30 + 8) = _LC8;
    *(undefined4 *)(*pauVar30 + 0xc) = _LC8;
    *(undefined4 *)pauVar30[1] = _LC6;
    *(undefined4 *)(pauVar30[1] + 4) = _LC6;
    *(undefined4 *)(pauVar30[1] + 8) = _LC6;
    *(undefined4 *)(pauVar30[1] + 0xc) = _LC6;
    *pauVar34 = (undefined1  [16])0x0;
    pauVar34 = pauVar34 + 1;
    pauVar30 = pauVar29;
  } while ((undefined1 (*) [16])local_280 != pauVar29);
  puVar33 = (undefined8 *)puVar24[1];
  pauVar34 = (undefined1 (*) [16])((lVar32 + uVar23) * 0x40 + *(long *)*puVar24);
  uVar23 = (lVar25 + uVar31) / uVar27 - uVar23;
  if (uVar23 != 0) {
    fVar3 = *(float *)(puVar33 + 2);
    fVar4 = *(float *)((long)puVar33 + 0x14);
    fVar5 = *(float *)(puVar33 + 3);
    fVar6 = *(float *)(puVar33 + 4);
    fVar7 = *(float *)((long)puVar33 + 0x24);
    fVar8 = *(float *)(puVar33 + 5);
    uVar28 = (int)*puVar33 - 1;
    if (uVar23 != 1) {
      pauVar30 = pauVar34;
      do {
        auVar40 = pauVar30[1];
        auVar42 = *pauVar30;
        auVar39 = pauVar30[4];
        uVar36 = (uint)(((auVar40._0_4_ + auVar42._0_4_) - fVar3) * fVar6 + _LC15);
        uVar37 = (uint)(((auVar40._4_4_ + auVar42._4_4_) - fVar4) * fVar7 + _LC15);
        uVar38 = (uint)(((auVar40._8_4_ + auVar42._8_4_) - fVar5) * fVar8 + _LC15);
        uVar41 = -(uint)((int)uVar36 < (int)uVar28);
        uVar43 = -(uint)((int)uVar37 < (int)uVar28);
        uVar44 = -(uint)((int)uVar38 < (int)uVar28);
        uVar36 = uVar36 & uVar41 | ~uVar41 & uVar28;
        uVar37 = uVar37 & uVar43 | ~uVar43 & uVar28;
        uVar41 = uVar38 & uVar44 | ~uVar44 & uVar28;
        auVar1 = pauVar30[5];
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        uVar36 = (uint)(((auVar1._0_4_ + auVar39._0_4_) - fVar3) * fVar6 + _LC15);
        uVar38 = (uint)(((auVar1._4_4_ + auVar39._4_4_) - fVar4) * fVar7 + _LC15);
        uVar43 = (uint)(((auVar1._8_4_ + auVar39._8_4_) - fVar5) * fVar8 + _LC15);
        uVar44 = -(uint)((int)uVar36 < (int)uVar28);
        uVar46 = -(uint)((int)uVar38 < (int)uVar28);
        uVar47 = -(uint)((int)uVar43 < (int)uVar28);
        uVar36 = uVar44 & uVar36 | ~uVar44 & uVar28;
        uVar38 = uVar46 & uVar38 | ~uVar46 & uVar28;
        uVar43 = uVar47 & uVar43 | ~uVar47 & uVar28;
        auVar45 = minps(*(undefined1 (*) [16])(local_e80 + uVar26 * 0x18),auVar42);
        *(undefined1 (*) [16])(local_e80 + uVar26 * 0x18) = auVar45;
        auVar45 = maxps(*(undefined1 (*) [16])(local_e70 + uVar26 * 0x60),auVar40);
        *(undefined1 (*) [16])(local_e70 + uVar26 * 0x60) = auVar45;
        uVar27 = (ulong)(~-(uint)((int)uVar37 < 0) & uVar37);
        lVar32 = uVar27 * 0x60;
        auVar45 = minps(*(undefined1 (*) [16])(local_e60 + lVar32),auVar42);
        *(undefined1 (*) [16])(local_e60 + lVar32) = auVar45;
        auVar45 = maxps(*(undefined1 (*) [16])(local_e50 + lVar32),auVar40);
        *(undefined1 (*) [16])(local_e50 + lVar32) = auVar45;
        uVar31 = (ulong)(~-(uint)((int)uVar41 < 0) & uVar41);
        lVar32 = uVar31 * 0x60;
        auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar32),auVar42);
        auVar40 = maxps(*(undefined1 (*) [16])(local_e30 + lVar32),auVar40);
        *(undefined1 (*) [16])(local_e40 + lVar32) = auVar42;
        *(undefined1 (*) [16])(local_e30 + lVar32) = auVar40;
        iVar2 = *(int *)(pauVar30[1] + 0xc);
        local_e80[(uVar26 + 0xc0) * 4] = local_e80[(uVar26 + 0xc0) * 4] + iVar2;
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        aiStack_27c[uVar31 * 4 + 1] = aiStack_27c[uVar31 * 4 + 1] + iVar2;
        aiStack_27c[uVar27 * 4] = aiStack_27c[uVar27 * 4] + iVar2;
        auVar40 = minps(*(undefined1 (*) [16])(local_e80 + uVar26 * 0x18),auVar39);
        *(undefined1 (*) [16])(local_e80 + uVar26 * 0x18) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(local_e70 + uVar26 * 0x60),auVar1);
        *(undefined1 (*) [16])(local_e70 + uVar26 * 0x60) = auVar40;
        uVar27 = (ulong)(~-(uint)((int)uVar38 < 0) & uVar38);
        lVar32 = uVar27 * 0x60;
        auVar40 = minps(*(undefined1 (*) [16])(local_e60 + lVar32),auVar39);
        *(undefined1 (*) [16])(local_e60 + lVar32) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(local_e50 + lVar32),auVar1);
        *(undefined1 (*) [16])(local_e50 + lVar32) = auVar40;
        uVar31 = (ulong)(~-(uint)((int)uVar43 < 0) & uVar43);
        lVar32 = uVar31 * 0x60;
        auVar40 = minps(*(undefined1 (*) [16])(local_e40 + lVar32),auVar39);
        *(undefined1 (*) [16])(local_e40 + lVar32) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(local_e30 + lVar32),auVar1);
        *(undefined1 (*) [16])(local_e30 + lVar32) = auVar40;
        iVar2 = *(int *)(pauVar30[5] + 0xc);
        local_e80[(uVar26 + 0xc0) * 4] = local_e80[(uVar26 + 0xc0) * 4] + iVar2;
        aiStack_27c[uVar27 * 4] = aiStack_27c[uVar27 * 4] + iVar2;
        aiStack_27c[uVar31 * 4 + 1] = aiStack_27c[uVar31 * 4 + 1] + iVar2;
        bVar35 = pauVar30 != pauVar34 + (uVar23 - 2 >> 1) * 8;
        pauVar30 = pauVar30 + 8;
      } while (bVar35);
      uVar27 = (uVar23 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar23 <= uVar27) goto LAB_00111267;
      pauVar34 = pauVar34 + uVar27 * 4;
    }
    auVar40 = pauVar34[1];
    auVar42 = *pauVar34;
    iVar2 = *(int *)(pauVar34[1] + 0xc);
    uVar36 = (uint)(((auVar40._0_4_ + auVar42._0_4_) - fVar3) * fVar6 + _LC15);
    uVar37 = (uint)(((auVar40._4_4_ + auVar42._4_4_) - fVar4) * fVar7 + _LC15);
    uVar38 = (uint)(((auVar40._8_4_ + auVar42._8_4_) - fVar5) * fVar8 + _LC15);
    uVar41 = -(uint)((int)uVar36 < (int)uVar28);
    uVar43 = -(uint)((int)uVar37 < (int)uVar28);
    uVar44 = -(uint)((int)uVar38 < (int)uVar28);
    uVar36 = uVar41 & uVar36 | ~uVar41 & uVar28;
    uVar37 = uVar43 & uVar37 | ~uVar43 & uVar28;
    uVar28 = uVar44 & uVar38 | ~uVar44 & uVar28;
    lVar32 = (long)(int)(~-(uint)((int)uVar36 < 0) & uVar36);
    local_e80[(lVar32 + 0xc0) * 4] = local_e80[(lVar32 + 0xc0) * 4] + iVar2;
    auVar39 = minps(*(undefined1 (*) [16])(local_e80 + lVar32 * 0x18),auVar42);
    *(undefined1 (*) [16])(local_e80 + lVar32 * 0x18) = auVar39;
    auVar39 = maxps(*(undefined1 (*) [16])(local_e70 + lVar32 * 0x60),auVar40);
    *(undefined1 (*) [16])(local_e70 + lVar32 * 0x60) = auVar39;
    lVar32 = (long)(int)(~-(uint)((int)uVar37 < 0) & uVar37);
    lVar25 = lVar32 * 0x60;
    aiStack_27c[lVar32 * 4] = aiStack_27c[lVar32 * 4] + iVar2;
    auVar39 = minps(*(undefined1 (*) [16])(local_e60 + lVar25),auVar42);
    *(undefined1 (*) [16])(local_e60 + lVar25) = auVar39;
    auVar39 = maxps(*(undefined1 (*) [16])(local_e50 + lVar25),auVar40);
    *(undefined1 (*) [16])(local_e50 + lVar25) = auVar39;
    lVar32 = (long)(int)(~-(uint)((int)uVar28 < 0) & uVar28);
    lVar25 = lVar32 * 0x60;
    aiStack_27c[lVar32 * 4 + 1] = aiStack_27c[lVar32 * 4 + 1] + iVar2;
    auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar25),auVar42);
    *(undefined1 (*) [16])(local_e40 + lVar25) = auVar42;
    auVar40 = maxps(*(undefined1 (*) [16])(local_e30 + lVar25),auVar40);
    *(undefined1 (*) [16])(local_e30 + lVar25) = auVar40;
  }
LAB_00111267:
  puVar33 = (undefined8 *)(param_1 * 0xe00 + *(long *)(*(long *)(this + 0x18) + 0x1c00));
  puVar24 = puVar33;
  pauVar34 = (undefined1 (*) [16])local_e80;
  do {
    uVar17 = *(undefined8 *)(*pauVar34 + 8);
    uVar9 = *(undefined4 *)pauVar34[1];
    uVar10 = *(undefined4 *)(pauVar34[1] + 4);
    uVar11 = *(undefined4 *)(pauVar34[1] + 8);
    uVar12 = *(undefined4 *)(pauVar34[1] + 0xc);
    pauVar30 = pauVar34 + 6;
    uVar18 = *(undefined8 *)pauVar34[2];
    uVar19 = *(undefined8 *)(pauVar34[2] + 8);
    uVar20 = *(undefined8 *)pauVar34[3];
    uVar21 = *(undefined8 *)(pauVar34[3] + 8);
    *puVar24 = *(undefined8 *)*pauVar34;
    puVar24[1] = uVar17;
    uVar17 = *(undefined8 *)pauVar34[4];
    uVar22 = *(undefined8 *)(pauVar34[4] + 8);
    uVar13 = *(undefined4 *)pauVar34[5];
    uVar14 = *(undefined4 *)(pauVar34[5] + 4);
    uVar15 = *(undefined4 *)(pauVar34[5] + 8);
    uVar16 = *(undefined4 *)(pauVar34[5] + 0xc);
    *(undefined4 *)(puVar24 + 2) = uVar9;
    *(undefined4 *)((long)puVar24 + 0x14) = uVar10;
    *(undefined4 *)(puVar24 + 3) = uVar11;
    *(undefined4 *)((long)puVar24 + 0x1c) = uVar12;
    puVar24[4] = uVar18;
    puVar24[5] = uVar19;
    puVar24[6] = uVar20;
    puVar24[7] = uVar21;
    puVar24[8] = uVar17;
    puVar24[9] = uVar22;
    *(undefined4 *)(puVar24 + 10) = uVar13;
    *(undefined4 *)((long)puVar24 + 0x54) = uVar14;
    *(undefined4 *)(puVar24 + 0xb) = uVar15;
    *(undefined4 *)((long)puVar24 + 0x5c) = uVar16;
    puVar24 = puVar24 + 0xc;
    pauVar34 = pauVar30;
  } while (pauVar30 != (undefined1 (*) [16])local_280);
  puVar33[0x180] = *(undefined8 *)*pauVar30;
  puVar33[0x1bf] = local_88;
  lVar32 = (long)puVar33 + (0xc00 - (long)((ulong)(puVar33 + 0x181) & 0xfffffffffffffff8));
  puVar24 = (undefined8 *)((long)pauVar30 - lVar32);
  puVar33 = (undefined8 *)((ulong)(puVar33 + 0x181) & 0xfffffffffffffff8);
  for (uVar27 = (ulong)((int)lVar32 + 0x200U >> 3); uVar27 != 0; uVar27 = uVar27 - 1) {
    *puVar33 = *puVar24;
    puVar24 = puVar24 + 1;
    puVar33 = puVar33 + 1;
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00111805) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embre___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  char cVar14;
  long lVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar15 = embree::TaskScheduler::allocThreadIndex();
  pTVar16 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar16 = lVar15;
  pTVar20 = pTVar16 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar17 = pTVar18 + 0x80;
    *(undefined4 *)(pTVar18 + 0x40) = 0;
    pTVar18 = pTVar17;
  } while (pTVar16 + 0x40040 != pTVar17);
  *(undefined8 *)(pTVar16 + 0x40040) = 0;
  *(undefined8 *)(pTVar16 + 0x40080) = 0;
  *(undefined8 *)(pTVar16 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar16 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar16 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar15 * 8) = pTVar16;
  UNLOCK();
  local_48 = pTVar16;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar16);
  if (*(ulong *)(pTVar16 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar16 + 0xc00c0);
    uVar3 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar16 + 0xc00c0) = uVar3;
      pTVar17 = pTVar16 + uVar3 + 0x40080;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar17 = &PTR_execute_001439b0;
      uVar5 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar17 + 8) = uVar8;
      *(undefined8 *)(pTVar17 + 0x10) = uVar9;
      *(undefined8 *)(pTVar17 + 0x18) = uVar10;
      *(undefined8 *)(pTVar17 + 0x20) = uVar11;
      *(undefined8 *)(pTVar17 + 0x38) = uVar5;
      *(undefined8 *)(pTVar17 + 0x28) = uVar12;
      *(undefined8 *)(pTVar17 + 0x30) = uVar13;
      lVar19 = *(long *)(pTVar16 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar16 + 0xc0100);
      pTVar16[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar16 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar16 + lVar19 + 0x50) = pTVar17;
      *(long *)(pTVar16 + lVar19 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar16 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar16 + lVar19 + 0x68) = lVar4;
      *(ulong *)(pTVar16 + lVar19 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar16 + 0x40080) = *(long *)(pTVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar16 + 0x40080) - 1U <= *(ulong *)(pTVar16 + 0x40040)) {
        LOCK();
        *(long *)(pTVar16 + 0x40040) = *(long *)(pTVar16 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar17 = local_48 + 8;
            *(long *)pTVar17 = *(long *)pTVar17 + -1;
            UNLOCK();
            if (*(long *)pTVar17 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar14 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar16);
      } while (cVar14 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar15 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar16 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar16 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar16);
            return;
          }
        }
      }
      else {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* unsigned long embree::parallel_reduce_internal<unsigned long, unsigned long,
   embree::parallel_reduce<unsigned long, unsigned long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::resizeRefsList()::{lambda(embree::range<unsigned
   long> const&)#1}, std::plus<unsigned long> >(unsigned long, unsigned long, unsigned long const&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::resizeRefsList()::{lambda(embree::range<unsigned long> const&)#1} const&, std::plus<unsigned
   long> const&)::{lambda(embree::range<unsigned long>)#1}, std::plus<unsigned long> >(unsigned
   long, unsigned long, unsigned long, unsigned long, unsigned long const&,
   embree::parallel_reduce<unsigned long, unsigned long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::resizeRefsList()::{lambda(embree::range<unsigned
   long> const&)#1}, std::plus<unsigned long> >(unsigned long, unsigned long, unsigned long const&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::resizeRefsList()::{lambda(embree::range<unsigned long> const&)#1} const&, std::plus<unsigned
   long> const&)::{lambda(embree::range<unsigned long>)#1} const&, std::plus<unsigned long> const&)
   [clone .isra.0] */

ulong embree::
      parallel_reduce_internal<unsigned_long,unsigned_long,embree::parallel_reduce<unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_,std::plus<unsigned_long>>(unsigned_long,unsigned_long,unsigned_long_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_const&,std::plus<unsigned_long>const&)::_lambda(embree::range<unsigned_long>)_1_,std::plus<unsigned_long>>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,ulong *param_5,
                _lambda_embree__range<unsigned_long>__1_ *param_6,plus *param_7)

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  ulong uVar10;
  long in_FS_OFFSET;
  ulong local_2148;
  ulong local_2140;
  ulong local_2138 [2];
  ulong local_2128;
  ulong *local_2120;
  ulong *local_2118;
  ulong *local_2110;
  long *local_2108;
  ulong *local_2100;
  ulong local_20f0;
  undefined8 uStack_20e8;
  undefined8 local_20e0;
  undefined8 **ppuStack_20d8;
  ulong *local_20d0;
  long local_20c0 [1024];
  long *local_c0;
  ulong local_b8;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2148 = param_3;
  local_2140 = param_2;
  local_2138[0] = param_1;
  uVar5 = embree::TaskScheduler::threadCount();
  if (local_2138[0] < uVar5) {
    uVar5 = local_2138[0];
  }
  local_2120 = &local_2140;
  local_2118 = &local_2148;
  local_2110 = local_2138;
  uVar10 = 0x200;
  if (uVar5 < 0x201) {
    uVar10 = uVar5;
  }
  local_2138[0] = uVar10;
  local_2108 = local_20c0;
  local_2100 = param_5;
  local_c0 = local_20c0;
  local_b8 = uVar10;
  if (uVar5 == 0) {
    uVar5 = *(ulong *)param_4;
  }
  else {
    ppuStack_20d8 = &local_2120;
    uStack_20e8 = 0;
    local_20e0 = 1;
    local_2128 = 0;
    local_20f0 = uVar10;
    local_20d0 = &local_2128;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar9 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImmZNS_15parallel_reduceImmZNS_4sse219BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMvILi4EEEE14resizeRefsListEvEUlRKNS_5rangeImEEE_St4plusImEEET0_T_SK_RKSJ_RKT1_RKT2_EUlSD_E_SI_EESJ_SK_SK_SK_SK_SM_SP_SS_EUlmE_EEvSK_SM_EUlSF_E_EEvSK_SK_SK_SM_PNS0_16TaskGroupContextEEUlvE_EEvRKSK_SX_mb
                (uVar9,&local_20f0,&local_2128,uVar10,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_001121a3:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar6 + 0xc00c0);
      uVar5 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar5) goto LAB_001121a3;
      *(ulong *)(lVar6 + 0xc00c0) = uVar5;
      puVar2 = (undefined8 *)(lVar6 + 0x40090 + uVar5);
      *puVar2 = 0x1439c8;
      puVar2[1] = local_20f0;
      puVar2[2] = uStack_20e8;
      puVar2[3] = local_20e0;
      puVar2[4] = ppuStack_20d8;
      puVar2[5] = local_20d0;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar2;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_2128;
      *(long *)(lVar7 + 0x68) = lVar3;
      *(ulong *)(lVar7 + 0x70) = uVar10;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2128 != 0) {
      local_20f0 = local_2128;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20f0);
      goto LAB_0011219e;
    }
    uVar5 = *(ulong *)param_4;
    if (local_2138[0] != 0) {
      plVar8 = local_c0;
      do {
        uVar5 = uVar5 + *plVar8;
        plVar8 = plVar8 + 1;
      } while (local_c0 + local_2138[0] != plVar8);
    }
  }
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
LAB_0011219e:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned long,
   unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2}
   const&)::{lambda(unsigned long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::range<unsigned_long>const&)#1},embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,emb...embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&)#2}const&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined1 auVar1 [16];
  int iVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  undefined8 uVar21;
  undefined8 uVar22;
  ulong uVar23;
  undefined8 *puVar24;
  long lVar25;
  ulong uVar26;
  ulong uVar27;
  uint uVar28;
  undefined1 (*pauVar29) [16];
  undefined1 (*pauVar30) [16];
  ulong uVar31;
  long lVar32;
  undefined8 *puVar33;
  undefined1 (*pauVar34) [16];
  long in_FS_OFFSET;
  bool bVar35;
  uint uVar36;
  uint uVar37;
  uint uVar38;
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  uint uVar41;
  uint uVar43;
  uint uVar44;
  undefined1 auVar42 [16];
  uint uVar46;
  uint uVar47;
  undefined1 auVar45 [16];
  int local_e80 [4];
  undefined1 local_e70 [16];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2992];
  undefined1 local_280 [4];
  int aiStack_27c [125];
  undefined8 local_88;
  long local_48;
  
  puVar24 = *(undefined8 **)(this + 0x20);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar32 = **(long **)this;
  lVar25 = **(long **)(this + 8) - lVar32;
  uVar31 = lVar25 * param_1;
  uVar27 = **(ulong **)(this + 0x10);
  uVar23 = uVar31 / uVar27;
  pauVar34 = (undefined1 (*) [16])local_280;
  pauVar30 = (undefined1 (*) [16])local_e80;
  do {
    *(undefined4 *)pauVar30[4] = _LC8;
    *(undefined4 *)(pauVar30[4] + 4) = _LC8;
    *(undefined4 *)(pauVar30[4] + 8) = _LC8;
    *(undefined4 *)(pauVar30[4] + 0xc) = _LC8;
    pauVar29 = pauVar30 + 6;
    *(undefined4 *)pauVar30[5] = _LC6;
    *(undefined4 *)(pauVar30[5] + 4) = _LC6;
    *(undefined4 *)(pauVar30[5] + 8) = _LC6;
    *(undefined4 *)(pauVar30[5] + 0xc) = _LC6;
    *(undefined4 *)pauVar30[2] = _LC8;
    *(undefined4 *)(pauVar30[2] + 4) = _LC8;
    *(undefined4 *)(pauVar30[2] + 8) = _LC8;
    *(undefined4 *)(pauVar30[2] + 0xc) = _LC8;
    *(undefined4 *)pauVar30[3] = _LC6;
    *(undefined4 *)(pauVar30[3] + 4) = _LC6;
    *(undefined4 *)(pauVar30[3] + 8) = _LC6;
    *(undefined4 *)(pauVar30[3] + 0xc) = _LC6;
    *(undefined4 *)*pauVar30 = _LC8;
    *(undefined4 *)(*pauVar30 + 4) = _LC8;
    *(undefined4 *)(*pauVar30 + 8) = _LC8;
    *(undefined4 *)(*pauVar30 + 0xc) = _LC8;
    *(undefined4 *)pauVar30[1] = _LC6;
    *(undefined4 *)(pauVar30[1] + 4) = _LC6;
    *(undefined4 *)(pauVar30[1] + 8) = _LC6;
    *(undefined4 *)(pauVar30[1] + 0xc) = _LC6;
    *pauVar34 = (undefined1  [16])0x0;
    pauVar34 = pauVar34 + 1;
    pauVar30 = pauVar29;
  } while ((undefined1 (*) [16])local_280 != pauVar29);
  puVar33 = (undefined8 *)puVar24[1];
  pauVar34 = (undefined1 (*) [16])((lVar32 + uVar23) * 0x40 + *(long *)*puVar24);
  uVar23 = (lVar25 + uVar31) / uVar27 - uVar23;
  if (uVar23 != 0) {
    fVar3 = *(float *)(puVar33 + 2);
    fVar4 = *(float *)((long)puVar33 + 0x14);
    fVar5 = *(float *)(puVar33 + 3);
    fVar6 = *(float *)(puVar33 + 4);
    fVar7 = *(float *)((long)puVar33 + 0x24);
    fVar8 = *(float *)(puVar33 + 5);
    uVar28 = (int)*puVar33 - 1;
    if (uVar23 != 1) {
      pauVar30 = pauVar34;
      do {
        auVar40 = pauVar30[1];
        auVar42 = *pauVar30;
        auVar39 = pauVar30[4];
        uVar36 = (uint)(((auVar40._0_4_ + auVar42._0_4_) - fVar3) * fVar6 + _LC15);
        uVar37 = (uint)(((auVar40._4_4_ + auVar42._4_4_) - fVar4) * fVar7 + _LC15);
        uVar38 = (uint)(((auVar40._8_4_ + auVar42._8_4_) - fVar5) * fVar8 + _LC15);
        uVar41 = -(uint)((int)uVar36 < (int)uVar28);
        uVar43 = -(uint)((int)uVar37 < (int)uVar28);
        uVar44 = -(uint)((int)uVar38 < (int)uVar28);
        uVar36 = uVar36 & uVar41 | ~uVar41 & uVar28;
        uVar37 = uVar37 & uVar43 | ~uVar43 & uVar28;
        uVar41 = uVar38 & uVar44 | ~uVar44 & uVar28;
        auVar1 = pauVar30[5];
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        uVar36 = (uint)(((auVar1._0_4_ + auVar39._0_4_) - fVar3) * fVar6 + _LC15);
        uVar38 = (uint)(((auVar1._4_4_ + auVar39._4_4_) - fVar4) * fVar7 + _LC15);
        uVar43 = (uint)(((auVar1._8_4_ + auVar39._8_4_) - fVar5) * fVar8 + _LC15);
        uVar44 = -(uint)((int)uVar36 < (int)uVar28);
        uVar46 = -(uint)((int)uVar38 < (int)uVar28);
        uVar47 = -(uint)((int)uVar43 < (int)uVar28);
        uVar36 = uVar44 & uVar36 | ~uVar44 & uVar28;
        uVar38 = uVar46 & uVar38 | ~uVar46 & uVar28;
        uVar43 = uVar47 & uVar43 | ~uVar47 & uVar28;
        auVar45 = minps(*(undefined1 (*) [16])(local_e80 + uVar26 * 0x18),auVar42);
        *(undefined1 (*) [16])(local_e80 + uVar26 * 0x18) = auVar45;
        auVar45 = maxps(*(undefined1 (*) [16])(local_e70 + uVar26 * 0x60),auVar40);
        *(undefined1 (*) [16])(local_e70 + uVar26 * 0x60) = auVar45;
        uVar27 = (ulong)(~-(uint)((int)uVar37 < 0) & uVar37);
        lVar32 = uVar27 * 0x60;
        auVar45 = minps(*(undefined1 (*) [16])(local_e60 + lVar32),auVar42);
        *(undefined1 (*) [16])(local_e60 + lVar32) = auVar45;
        auVar45 = maxps(*(undefined1 (*) [16])(local_e50 + lVar32),auVar40);
        *(undefined1 (*) [16])(local_e50 + lVar32) = auVar45;
        uVar31 = (ulong)(~-(uint)((int)uVar41 < 0) & uVar41);
        lVar32 = uVar31 * 0x60;
        auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar32),auVar42);
        auVar40 = maxps(*(undefined1 (*) [16])(local_e30 + lVar32),auVar40);
        *(undefined1 (*) [16])(local_e40 + lVar32) = auVar42;
        *(undefined1 (*) [16])(local_e30 + lVar32) = auVar40;
        iVar2 = *(int *)(pauVar30[1] + 0xc);
        local_e80[(uVar26 + 0xc0) * 4] = local_e80[(uVar26 + 0xc0) * 4] + iVar2;
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        aiStack_27c[uVar31 * 4 + 1] = aiStack_27c[uVar31 * 4 + 1] + iVar2;
        aiStack_27c[uVar27 * 4] = aiStack_27c[uVar27 * 4] + iVar2;
        auVar40 = minps(*(undefined1 (*) [16])(local_e80 + uVar26 * 0x18),auVar39);
        *(undefined1 (*) [16])(local_e80 + uVar26 * 0x18) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(local_e70 + uVar26 * 0x60),auVar1);
        *(undefined1 (*) [16])(local_e70 + uVar26 * 0x60) = auVar40;
        uVar27 = (ulong)(~-(uint)((int)uVar38 < 0) & uVar38);
        lVar32 = uVar27 * 0x60;
        auVar40 = minps(*(undefined1 (*) [16])(local_e60 + lVar32),auVar39);
        *(undefined1 (*) [16])(local_e60 + lVar32) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(local_e50 + lVar32),auVar1);
        *(undefined1 (*) [16])(local_e50 + lVar32) = auVar40;
        uVar31 = (ulong)(~-(uint)((int)uVar43 < 0) & uVar43);
        lVar32 = uVar31 * 0x60;
        auVar40 = minps(*(undefined1 (*) [16])(local_e40 + lVar32),auVar39);
        *(undefined1 (*) [16])(local_e40 + lVar32) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(local_e30 + lVar32),auVar1);
        *(undefined1 (*) [16])(local_e30 + lVar32) = auVar40;
        iVar2 = *(int *)(pauVar30[5] + 0xc);
        local_e80[(uVar26 + 0xc0) * 4] = local_e80[(uVar26 + 0xc0) * 4] + iVar2;
        aiStack_27c[uVar27 * 4] = aiStack_27c[uVar27 * 4] + iVar2;
        aiStack_27c[uVar31 * 4 + 1] = aiStack_27c[uVar31 * 4 + 1] + iVar2;
        bVar35 = pauVar30 != pauVar34 + (uVar23 - 2 >> 1) * 8;
        pauVar30 = pauVar30 + 8;
      } while (bVar35);
      uVar27 = (uVar23 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar23 <= uVar27) goto LAB_001128f7;
      pauVar34 = pauVar34 + uVar27 * 4;
    }
    auVar40 = pauVar34[1];
    auVar42 = *pauVar34;
    iVar2 = *(int *)(pauVar34[1] + 0xc);
    uVar36 = (uint)(((auVar40._0_4_ + auVar42._0_4_) - fVar3) * fVar6 + _LC15);
    uVar37 = (uint)(((auVar40._4_4_ + auVar42._4_4_) - fVar4) * fVar7 + _LC15);
    uVar38 = (uint)(((auVar40._8_4_ + auVar42._8_4_) - fVar5) * fVar8 + _LC15);
    uVar41 = -(uint)((int)uVar36 < (int)uVar28);
    uVar43 = -(uint)((int)uVar37 < (int)uVar28);
    uVar44 = -(uint)((int)uVar38 < (int)uVar28);
    uVar36 = uVar41 & uVar36 | ~uVar41 & uVar28;
    uVar37 = uVar43 & uVar37 | ~uVar43 & uVar28;
    uVar28 = uVar44 & uVar38 | ~uVar44 & uVar28;
    lVar32 = (long)(int)(~-(uint)((int)uVar36 < 0) & uVar36);
    local_e80[(lVar32 + 0xc0) * 4] = local_e80[(lVar32 + 0xc0) * 4] + iVar2;
    auVar39 = minps(*(undefined1 (*) [16])(local_e80 + lVar32 * 0x18),auVar42);
    *(undefined1 (*) [16])(local_e80 + lVar32 * 0x18) = auVar39;
    auVar39 = maxps(*(undefined1 (*) [16])(local_e70 + lVar32 * 0x60),auVar40);
    *(undefined1 (*) [16])(local_e70 + lVar32 * 0x60) = auVar39;
    lVar32 = (long)(int)(~-(uint)((int)uVar37 < 0) & uVar37);
    lVar25 = lVar32 * 0x60;
    aiStack_27c[lVar32 * 4] = aiStack_27c[lVar32 * 4] + iVar2;
    auVar39 = minps(*(undefined1 (*) [16])(local_e60 + lVar25),auVar42);
    *(undefined1 (*) [16])(local_e60 + lVar25) = auVar39;
    auVar39 = maxps(*(undefined1 (*) [16])(local_e50 + lVar25),auVar40);
    *(undefined1 (*) [16])(local_e50 + lVar25) = auVar39;
    lVar32 = (long)(int)(~-(uint)((int)uVar28 < 0) & uVar28);
    lVar25 = lVar32 * 0x60;
    aiStack_27c[lVar32 * 4 + 1] = aiStack_27c[lVar32 * 4 + 1] + iVar2;
    auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar25),auVar42);
    *(undefined1 (*) [16])(local_e40 + lVar25) = auVar42;
    auVar40 = maxps(*(undefined1 (*) [16])(local_e30 + lVar25),auVar40);
    *(undefined1 (*) [16])(local_e30 + lVar25) = auVar40;
  }
LAB_001128f7:
  puVar33 = (undefined8 *)(param_1 * 0xe00 + *(long *)(*(long *)(this + 0x18) + 0x1c00));
  puVar24 = puVar33;
  pauVar34 = (undefined1 (*) [16])local_e80;
  do {
    uVar17 = *(undefined8 *)(*pauVar34 + 8);
    uVar9 = *(undefined4 *)pauVar34[1];
    uVar10 = *(undefined4 *)(pauVar34[1] + 4);
    uVar11 = *(undefined4 *)(pauVar34[1] + 8);
    uVar12 = *(undefined4 *)(pauVar34[1] + 0xc);
    pauVar30 = pauVar34 + 6;
    uVar18 = *(undefined8 *)pauVar34[2];
    uVar19 = *(undefined8 *)(pauVar34[2] + 8);
    uVar20 = *(undefined8 *)pauVar34[3];
    uVar21 = *(undefined8 *)(pauVar34[3] + 8);
    *puVar24 = *(undefined8 *)*pauVar34;
    puVar24[1] = uVar17;
    uVar17 = *(undefined8 *)pauVar34[4];
    uVar22 = *(undefined8 *)(pauVar34[4] + 8);
    uVar13 = *(undefined4 *)pauVar34[5];
    uVar14 = *(undefined4 *)(pauVar34[5] + 4);
    uVar15 = *(undefined4 *)(pauVar34[5] + 8);
    uVar16 = *(undefined4 *)(pauVar34[5] + 0xc);
    *(undefined4 *)(puVar24 + 2) = uVar9;
    *(undefined4 *)((long)puVar24 + 0x14) = uVar10;
    *(undefined4 *)(puVar24 + 3) = uVar11;
    *(undefined4 *)((long)puVar24 + 0x1c) = uVar12;
    puVar24[4] = uVar18;
    puVar24[5] = uVar19;
    puVar24[6] = uVar20;
    puVar24[7] = uVar21;
    puVar24[8] = uVar17;
    puVar24[9] = uVar22;
    *(undefined4 *)(puVar24 + 10) = uVar13;
    *(undefined4 *)((long)puVar24 + 0x54) = uVar14;
    *(undefined4 *)(puVar24 + 0xb) = uVar15;
    *(undefined4 *)((long)puVar24 + 0x5c) = uVar16;
    puVar24 = puVar24 + 0xc;
    pauVar34 = pauVar30;
  } while (pauVar30 != (undefined1 (*) [16])local_280);
  puVar33[0x180] = *(undefined8 *)*pauVar30;
  puVar33[0x1bf] = local_88;
  lVar32 = (long)puVar33 + (0xc00 - (long)((ulong)(puVar33 + 0x181) & 0xfffffffffffffff8));
  puVar24 = (undefined8 *)((long)pauVar30 - lVar32);
  puVar33 = (undefined8 *)((ulong)(puVar33 + 0x181) & 0xfffffffffffffff8);
  for (uVar27 = (ulong)((int)lVar32 + 0x200U >> 3); uVar27 != 0; uVar27 = uVar27 - 1) {
    *puVar33 = *puVar24;
    puVar24 = puVar24 + 1;
    puVar33 = puVar33 + 1;
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00112e95) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embre___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  char cVar14;
  long lVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar15 = embree::TaskScheduler::allocThreadIndex();
  pTVar16 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar16 = lVar15;
  pTVar20 = pTVar16 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar17 = pTVar18 + 0x80;
    *(undefined4 *)(pTVar18 + 0x40) = 0;
    pTVar18 = pTVar17;
  } while (pTVar16 + 0x40040 != pTVar17);
  *(undefined8 *)(pTVar16 + 0x40040) = 0;
  *(undefined8 *)(pTVar16 + 0x40080) = 0;
  *(undefined8 *)(pTVar16 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar16 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar16 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar15 * 8) = pTVar16;
  UNLOCK();
  local_48 = pTVar16;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar16);
  if (*(ulong *)(pTVar16 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar16 + 0xc00c0);
    uVar3 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar16 + 0xc00c0) = uVar3;
      pTVar17 = pTVar16 + uVar3 + 0x40080;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar17 = &PTR_execute_001439e0;
      uVar5 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar17 + 8) = uVar8;
      *(undefined8 *)(pTVar17 + 0x10) = uVar9;
      *(undefined8 *)(pTVar17 + 0x18) = uVar10;
      *(undefined8 *)(pTVar17 + 0x20) = uVar11;
      *(undefined8 *)(pTVar17 + 0x38) = uVar5;
      *(undefined8 *)(pTVar17 + 0x28) = uVar12;
      *(undefined8 *)(pTVar17 + 0x30) = uVar13;
      lVar19 = *(long *)(pTVar16 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar16 + 0xc0100);
      pTVar16[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar16 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar16 + lVar19 + 0x50) = pTVar17;
      *(long *)(pTVar16 + lVar19 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar16 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar16 + lVar19 + 0x68) = lVar4;
      *(ulong *)(pTVar16 + lVar19 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar16 + 0x40080) = *(long *)(pTVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar16 + 0x40080) - 1U <= *(ulong *)(pTVar16 + 0x40040)) {
        LOCK();
        *(long *)(pTVar16 + 0x40040) = *(long *)(pTVar16 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar17 = local_48 + 8;
            *(long *)pTVar17 = *(long *)pTVar17 + -1;
            UNLOCK();
            if (*(long *)pTVar17 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar14 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar16);
      } while (cVar14 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar15 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar16 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar16 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar16);
            return;
          }
        }
      }
      else {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* unsigned long embree::parallel_reduce_internal<unsigned long, unsigned long,
   embree::parallel_reduce<unsigned long, unsigned long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::resizeRefsList()::{lambda(embree::range<unsigned
   long> const&)#1}, std::plus<unsigned long> >(unsigned long, unsigned long, unsigned long const&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::resizeRefsList()::{lambda(embree::range<unsigned long> const&)#1} const&, std::plus<unsigned
   long> const&)::{lambda(embree::range<unsigned long>)#1}, std::plus<unsigned long> >(unsigned
   long, unsigned long, unsigned long, unsigned long, unsigned long const&,
   embree::parallel_reduce<unsigned long, unsigned long, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::resizeRefsList()::{lambda(embree::range<unsigned
   long> const&)#1}, std::plus<unsigned long> >(unsigned long, unsigned long, unsigned long const&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::resizeRefsList()::{lambda(embree::range<unsigned long> const&)#1} const&, std::plus<unsigned
   long> const&)::{lambda(embree::range<unsigned long>)#1} const&, std::plus<unsigned long> const&)
   [clone .isra.0] */

ulong embree::
      parallel_reduce_internal<unsigned_long,unsigned_long,embree::parallel_reduce<unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_,std::plus<unsigned_long>>(unsigned_long,unsigned_long,unsigned_long_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_const&,std::plus<unsigned_long>const&)::_lambda(embree::range<unsigned_long>)_1_,std::plus<unsigned_long>>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,ulong *param_5,
                _lambda_embree__range<unsigned_long>__1_ *param_6,plus *param_7)

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  ulong uVar10;
  long in_FS_OFFSET;
  ulong local_2148;
  ulong local_2140;
  ulong local_2138 [2];
  ulong local_2128;
  ulong *local_2120;
  ulong *local_2118;
  ulong *local_2110;
  long *local_2108;
  ulong *local_2100;
  ulong local_20f0;
  undefined8 uStack_20e8;
  undefined8 local_20e0;
  undefined8 **ppuStack_20d8;
  ulong *local_20d0;
  long local_20c0 [1024];
  long *local_c0;
  ulong local_b8;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2148 = param_3;
  local_2140 = param_2;
  local_2138[0] = param_1;
  uVar5 = embree::TaskScheduler::threadCount();
  if (local_2138[0] < uVar5) {
    uVar5 = local_2138[0];
  }
  local_2120 = &local_2140;
  local_2118 = &local_2148;
  local_2110 = local_2138;
  uVar10 = 0x200;
  if (uVar5 < 0x201) {
    uVar10 = uVar5;
  }
  local_2138[0] = uVar10;
  local_2108 = local_20c0;
  local_2100 = param_5;
  local_c0 = local_20c0;
  local_b8 = uVar10;
  if (uVar5 == 0) {
    uVar5 = *(ulong *)param_4;
  }
  else {
    ppuStack_20d8 = &local_2120;
    uStack_20e8 = 0;
    local_20e0 = 1;
    local_2128 = 0;
    local_20f0 = uVar10;
    local_20d0 = &local_2128;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar9 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImmZNS_15parallel_reduceImmZNS_4sse219BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_9TriangleMILi4EEEE14resizeRefsListEvEUlRKNS_5rangeImEEE_St4plusImEEET0_T_SK_RKSJ_RKT1_RKT2_EUlSD_E_SI_EESJ_SK_SK_SK_SK_SM_SP_SS_EUlmE_EEvSK_SM_EUlSF_E_EEvSK_SK_SK_SM_PNS0_16TaskGroupContextEEUlvE_EEvRKSK_SX_mb
                (uVar9,&local_20f0,&local_2128,uVar10,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_00113833:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar6 + 0xc00c0);
      uVar5 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar5) goto LAB_00113833;
      *(ulong *)(lVar6 + 0xc00c0) = uVar5;
      puVar2 = (undefined8 *)(lVar6 + 0x40090 + uVar5);
      *puVar2 = 0x1439f8;
      puVar2[1] = local_20f0;
      puVar2[2] = uStack_20e8;
      puVar2[3] = local_20e0;
      puVar2[4] = ppuStack_20d8;
      puVar2[5] = local_20d0;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar2;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_2128;
      *(long *)(lVar7 + 0x68) = lVar3;
      *(ulong *)(lVar7 + 0x70) = uVar10;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2128 != 0) {
      local_20f0 = local_2128;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20f0);
      goto LAB_0011382e;
    }
    uVar5 = *(ulong *)param_4;
    if (local_2138[0] != 0) {
      plVar8 = local_c0;
      do {
        uVar5 = uVar5 + *plVar8;
        plVar8 = plVar8 + 1;
      } while (local_c0 + local_2138[0] != plVar8);
    }
  }
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
LAB_0011382e:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned long,
   unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2}
   const&)::{lambda(unsigned long)#1}::TEMPNAMEPLACEHOLDERVALUE(unsigned long) const */

void __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::{lambda(embree::range<unsigned_long>const&)#1},embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::Tr...,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&)#2}const&)
::{lambda(unsigned_long)#1}::operator()(_lambda_unsigned_long__1_ *this,ulong param_1)

{
  undefined1 auVar1 [16];
  int iVar2;
  float fVar3;
  float fVar4;
  float fVar5;
  float fVar6;
  float fVar7;
  float fVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  undefined8 uVar21;
  undefined8 uVar22;
  ulong uVar23;
  undefined8 *puVar24;
  long lVar25;
  ulong uVar26;
  ulong uVar27;
  uint uVar28;
  undefined1 (*pauVar29) [16];
  undefined1 (*pauVar30) [16];
  ulong uVar31;
  long lVar32;
  undefined8 *puVar33;
  undefined1 (*pauVar34) [16];
  long in_FS_OFFSET;
  bool bVar35;
  uint uVar36;
  uint uVar37;
  uint uVar38;
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  uint uVar41;
  uint uVar43;
  uint uVar44;
  undefined1 auVar42 [16];
  uint uVar46;
  uint uVar47;
  undefined1 auVar45 [16];
  int local_e80 [4];
  undefined1 local_e70 [16];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2992];
  undefined1 local_280 [4];
  int aiStack_27c [125];
  undefined8 local_88;
  long local_48;
  
  puVar24 = *(undefined8 **)(this + 0x20);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar32 = **(long **)this;
  lVar25 = **(long **)(this + 8) - lVar32;
  uVar31 = lVar25 * param_1;
  uVar27 = **(ulong **)(this + 0x10);
  uVar23 = uVar31 / uVar27;
  pauVar34 = (undefined1 (*) [16])local_280;
  pauVar30 = (undefined1 (*) [16])local_e80;
  do {
    *(undefined4 *)pauVar30[4] = _LC8;
    *(undefined4 *)(pauVar30[4] + 4) = _LC8;
    *(undefined4 *)(pauVar30[4] + 8) = _LC8;
    *(undefined4 *)(pauVar30[4] + 0xc) = _LC8;
    pauVar29 = pauVar30 + 6;
    *(undefined4 *)pauVar30[5] = _LC6;
    *(undefined4 *)(pauVar30[5] + 4) = _LC6;
    *(undefined4 *)(pauVar30[5] + 8) = _LC6;
    *(undefined4 *)(pauVar30[5] + 0xc) = _LC6;
    *(undefined4 *)pauVar30[2] = _LC8;
    *(undefined4 *)(pauVar30[2] + 4) = _LC8;
    *(undefined4 *)(pauVar30[2] + 8) = _LC8;
    *(undefined4 *)(pauVar30[2] + 0xc) = _LC8;
    *(undefined4 *)pauVar30[3] = _LC6;
    *(undefined4 *)(pauVar30[3] + 4) = _LC6;
    *(undefined4 *)(pauVar30[3] + 8) = _LC6;
    *(undefined4 *)(pauVar30[3] + 0xc) = _LC6;
    *(undefined4 *)*pauVar30 = _LC8;
    *(undefined4 *)(*pauVar30 + 4) = _LC8;
    *(undefined4 *)(*pauVar30 + 8) = _LC8;
    *(undefined4 *)(*pauVar30 + 0xc) = _LC8;
    *(undefined4 *)pauVar30[1] = _LC6;
    *(undefined4 *)(pauVar30[1] + 4) = _LC6;
    *(undefined4 *)(pauVar30[1] + 8) = _LC6;
    *(undefined4 *)(pauVar30[1] + 0xc) = _LC6;
    *pauVar34 = (undefined1  [16])0x0;
    pauVar34 = pauVar34 + 1;
    pauVar30 = pauVar29;
  } while ((undefined1 (*) [16])local_280 != pauVar29);
  puVar33 = (undefined8 *)puVar24[1];
  pauVar34 = (undefined1 (*) [16])((lVar32 + uVar23) * 0x40 + *(long *)*puVar24);
  uVar23 = (lVar25 + uVar31) / uVar27 - uVar23;
  if (uVar23 != 0) {
    fVar3 = *(float *)(puVar33 + 2);
    fVar4 = *(float *)((long)puVar33 + 0x14);
    fVar5 = *(float *)(puVar33 + 3);
    fVar6 = *(float *)(puVar33 + 4);
    fVar7 = *(float *)((long)puVar33 + 0x24);
    fVar8 = *(float *)(puVar33 + 5);
    uVar28 = (int)*puVar33 - 1;
    if (uVar23 != 1) {
      pauVar30 = pauVar34;
      do {
        auVar40 = pauVar30[1];
        auVar42 = *pauVar30;
        auVar39 = pauVar30[4];
        uVar36 = (uint)(((auVar40._0_4_ + auVar42._0_4_) - fVar3) * fVar6 + _LC15);
        uVar37 = (uint)(((auVar40._4_4_ + auVar42._4_4_) - fVar4) * fVar7 + _LC15);
        uVar38 = (uint)(((auVar40._8_4_ + auVar42._8_4_) - fVar5) * fVar8 + _LC15);
        uVar41 = -(uint)((int)uVar36 < (int)uVar28);
        uVar43 = -(uint)((int)uVar37 < (int)uVar28);
        uVar44 = -(uint)((int)uVar38 < (int)uVar28);
        uVar36 = uVar36 & uVar41 | ~uVar41 & uVar28;
        uVar37 = uVar37 & uVar43 | ~uVar43 & uVar28;
        uVar41 = uVar38 & uVar44 | ~uVar44 & uVar28;
        auVar1 = pauVar30[5];
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        uVar36 = (uint)(((auVar1._0_4_ + auVar39._0_4_) - fVar3) * fVar6 + _LC15);
        uVar38 = (uint)(((auVar1._4_4_ + auVar39._4_4_) - fVar4) * fVar7 + _LC15);
        uVar43 = (uint)(((auVar1._8_4_ + auVar39._8_4_) - fVar5) * fVar8 + _LC15);
        uVar44 = -(uint)((int)uVar36 < (int)uVar28);
        uVar46 = -(uint)((int)uVar38 < (int)uVar28);
        uVar47 = -(uint)((int)uVar43 < (int)uVar28);
        uVar36 = uVar44 & uVar36 | ~uVar44 & uVar28;
        uVar38 = uVar46 & uVar38 | ~uVar46 & uVar28;
        uVar43 = uVar47 & uVar43 | ~uVar47 & uVar28;
        auVar45 = minps(*(undefined1 (*) [16])(local_e80 + uVar26 * 0x18),auVar42);
        *(undefined1 (*) [16])(local_e80 + uVar26 * 0x18) = auVar45;
        auVar45 = maxps(*(undefined1 (*) [16])(local_e70 + uVar26 * 0x60),auVar40);
        *(undefined1 (*) [16])(local_e70 + uVar26 * 0x60) = auVar45;
        uVar27 = (ulong)(~-(uint)((int)uVar37 < 0) & uVar37);
        lVar32 = uVar27 * 0x60;
        auVar45 = minps(*(undefined1 (*) [16])(local_e60 + lVar32),auVar42);
        *(undefined1 (*) [16])(local_e60 + lVar32) = auVar45;
        auVar45 = maxps(*(undefined1 (*) [16])(local_e50 + lVar32),auVar40);
        *(undefined1 (*) [16])(local_e50 + lVar32) = auVar45;
        uVar31 = (ulong)(~-(uint)((int)uVar41 < 0) & uVar41);
        lVar32 = uVar31 * 0x60;
        auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar32),auVar42);
        auVar40 = maxps(*(undefined1 (*) [16])(local_e30 + lVar32),auVar40);
        *(undefined1 (*) [16])(local_e40 + lVar32) = auVar42;
        *(undefined1 (*) [16])(local_e30 + lVar32) = auVar40;
        iVar2 = *(int *)(pauVar30[1] + 0xc);
        local_e80[(uVar26 + 0xc0) * 4] = local_e80[(uVar26 + 0xc0) * 4] + iVar2;
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        aiStack_27c[uVar31 * 4 + 1] = aiStack_27c[uVar31 * 4 + 1] + iVar2;
        aiStack_27c[uVar27 * 4] = aiStack_27c[uVar27 * 4] + iVar2;
        auVar40 = minps(*(undefined1 (*) [16])(local_e80 + uVar26 * 0x18),auVar39);
        *(undefined1 (*) [16])(local_e80 + uVar26 * 0x18) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(local_e70 + uVar26 * 0x60),auVar1);
        *(undefined1 (*) [16])(local_e70 + uVar26 * 0x60) = auVar40;
        uVar27 = (ulong)(~-(uint)((int)uVar38 < 0) & uVar38);
        lVar32 = uVar27 * 0x60;
        auVar40 = minps(*(undefined1 (*) [16])(local_e60 + lVar32),auVar39);
        *(undefined1 (*) [16])(local_e60 + lVar32) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(local_e50 + lVar32),auVar1);
        *(undefined1 (*) [16])(local_e50 + lVar32) = auVar40;
        uVar31 = (ulong)(~-(uint)((int)uVar43 < 0) & uVar43);
        lVar32 = uVar31 * 0x60;
        auVar40 = minps(*(undefined1 (*) [16])(local_e40 + lVar32),auVar39);
        *(undefined1 (*) [16])(local_e40 + lVar32) = auVar40;
        auVar40 = maxps(*(undefined1 (*) [16])(local_e30 + lVar32),auVar1);
        *(undefined1 (*) [16])(local_e30 + lVar32) = auVar40;
        iVar2 = *(int *)(pauVar30[5] + 0xc);
        local_e80[(uVar26 + 0xc0) * 4] = local_e80[(uVar26 + 0xc0) * 4] + iVar2;
        aiStack_27c[uVar27 * 4] = aiStack_27c[uVar27 * 4] + iVar2;
        aiStack_27c[uVar31 * 4 + 1] = aiStack_27c[uVar31 * 4 + 1] + iVar2;
        bVar35 = pauVar30 != pauVar34 + (uVar23 - 2 >> 1) * 8;
        pauVar30 = pauVar30 + 8;
      } while (bVar35);
      uVar27 = (uVar23 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar23 <= uVar27) goto LAB_00113f87;
      pauVar34 = pauVar34 + uVar27 * 4;
    }
    auVar40 = pauVar34[1];
    auVar42 = *pauVar34;
    iVar2 = *(int *)(pauVar34[1] + 0xc);
    uVar36 = (uint)(((auVar40._0_4_ + auVar42._0_4_) - fVar3) * fVar6 + _LC15);
    uVar37 = (uint)(((auVar40._4_4_ + auVar42._4_4_) - fVar4) * fVar7 + _LC15);
    uVar38 = (uint)(((auVar40._8_4_ + auVar42._8_4_) - fVar5) * fVar8 + _LC15);
    uVar41 = -(uint)((int)uVar36 < (int)uVar28);
    uVar43 = -(uint)((int)uVar37 < (int)uVar28);
    uVar44 = -(uint)((int)uVar38 < (int)uVar28);
    uVar36 = uVar41 & uVar36 | ~uVar41 & uVar28;
    uVar37 = uVar43 & uVar37 | ~uVar43 & uVar28;
    uVar28 = uVar44 & uVar38 | ~uVar44 & uVar28;
    lVar32 = (long)(int)(~-(uint)((int)uVar36 < 0) & uVar36);
    local_e80[(lVar32 + 0xc0) * 4] = local_e80[(lVar32 + 0xc0) * 4] + iVar2;
    auVar39 = minps(*(undefined1 (*) [16])(local_e80 + lVar32 * 0x18),auVar42);
    *(undefined1 (*) [16])(local_e80 + lVar32 * 0x18) = auVar39;
    auVar39 = maxps(*(undefined1 (*) [16])(local_e70 + lVar32 * 0x60),auVar40);
    *(undefined1 (*) [16])(local_e70 + lVar32 * 0x60) = auVar39;
    lVar32 = (long)(int)(~-(uint)((int)uVar37 < 0) & uVar37);
    lVar25 = lVar32 * 0x60;
    aiStack_27c[lVar32 * 4] = aiStack_27c[lVar32 * 4] + iVar2;
    auVar39 = minps(*(undefined1 (*) [16])(local_e60 + lVar25),auVar42);
    *(undefined1 (*) [16])(local_e60 + lVar25) = auVar39;
    auVar39 = maxps(*(undefined1 (*) [16])(local_e50 + lVar25),auVar40);
    *(undefined1 (*) [16])(local_e50 + lVar25) = auVar39;
    lVar32 = (long)(int)(~-(uint)((int)uVar28 < 0) & uVar28);
    lVar25 = lVar32 * 0x60;
    aiStack_27c[lVar32 * 4 + 1] = aiStack_27c[lVar32 * 4 + 1] + iVar2;
    auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar25),auVar42);
    *(undefined1 (*) [16])(local_e40 + lVar25) = auVar42;
    auVar40 = maxps(*(undefined1 (*) [16])(local_e30 + lVar25),auVar40);
    *(undefined1 (*) [16])(local_e30 + lVar25) = auVar40;
  }
LAB_00113f87:
  puVar33 = (undefined8 *)(param_1 * 0xe00 + *(long *)(*(long *)(this + 0x18) + 0x1c00));
  puVar24 = puVar33;
  pauVar34 = (undefined1 (*) [16])local_e80;
  do {
    uVar17 = *(undefined8 *)(*pauVar34 + 8);
    uVar9 = *(undefined4 *)pauVar34[1];
    uVar10 = *(undefined4 *)(pauVar34[1] + 4);
    uVar11 = *(undefined4 *)(pauVar34[1] + 8);
    uVar12 = *(undefined4 *)(pauVar34[1] + 0xc);
    pauVar30 = pauVar34 + 6;
    uVar18 = *(undefined8 *)pauVar34[2];
    uVar19 = *(undefined8 *)(pauVar34[2] + 8);
    uVar20 = *(undefined8 *)pauVar34[3];
    uVar21 = *(undefined8 *)(pauVar34[3] + 8);
    *puVar24 = *(undefined8 *)*pauVar34;
    puVar24[1] = uVar17;
    uVar17 = *(undefined8 *)pauVar34[4];
    uVar22 = *(undefined8 *)(pauVar34[4] + 8);
    uVar13 = *(undefined4 *)pauVar34[5];
    uVar14 = *(undefined4 *)(pauVar34[5] + 4);
    uVar15 = *(undefined4 *)(pauVar34[5] + 8);
    uVar16 = *(undefined4 *)(pauVar34[5] + 0xc);
    *(undefined4 *)(puVar24 + 2) = uVar9;
    *(undefined4 *)((long)puVar24 + 0x14) = uVar10;
    *(undefined4 *)(puVar24 + 3) = uVar11;
    *(undefined4 *)((long)puVar24 + 0x1c) = uVar12;
    puVar24[4] = uVar18;
    puVar24[5] = uVar19;
    puVar24[6] = uVar20;
    puVar24[7] = uVar21;
    puVar24[8] = uVar17;
    puVar24[9] = uVar22;
    *(undefined4 *)(puVar24 + 10) = uVar13;
    *(undefined4 *)((long)puVar24 + 0x54) = uVar14;
    *(undefined4 *)(puVar24 + 0xb) = uVar15;
    *(undefined4 *)((long)puVar24 + 0x5c) = uVar16;
    puVar24 = puVar24 + 0xc;
    pauVar34 = pauVar30;
  } while (pauVar30 != (undefined1 (*) [16])local_280);
  puVar33[0x180] = *(undefined8 *)*pauVar30;
  puVar33[0x1bf] = local_88;
  lVar32 = (long)puVar33 + (0xc00 - (long)((ulong)(puVar33 + 0x181) & 0xfffffffffffffff8));
  puVar24 = (undefined8 *)((long)pauVar30 - lVar32);
  puVar33 = (undefined8 *)((ulong)(puVar33 + 0x181) & 0xfffffffffffffff8);
  for (uVar27 = (ulong)((int)lVar32 + 0x200U >> 3); uVar27 != 0; uVar27 = uVar27 - 1) {
    *puVar33 = *puVar24;
    puVar24 = puVar24 + 1;
    puVar33 = puVar33 + 1;
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00114525) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::Tr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  char cVar14;
  long lVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  Thread *pTVar18;
  long lVar19;
  Thread *pTVar20;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar15 = embree::TaskScheduler::allocThreadIndex();
  pTVar16 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar16 = lVar15;
  pTVar20 = pTVar16 + 0x40;
  pTVar18 = pTVar20;
  do {
    *(undefined4 *)pTVar18 = 0;
    pTVar17 = pTVar18 + 0x80;
    *(undefined4 *)(pTVar18 + 0x40) = 0;
    pTVar18 = pTVar17;
  } while (pTVar16 + 0x40040 != pTVar17);
  *(undefined8 *)(pTVar16 + 0x40040) = 0;
  *(undefined8 *)(pTVar16 + 0x40080) = 0;
  *(undefined8 *)(pTVar16 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar16 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar16 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar15 * 8) = pTVar16;
  UNLOCK();
  local_48 = pTVar16;
  pTVar18 = (Thread *)embree::TaskScheduler::swapThread(pTVar16);
  if (*(ulong *)(pTVar16 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar16 + 0xc00c0);
    uVar3 = lVar4 + 0x40 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar16 + 0xc00c0) = uVar3;
      pTVar17 = pTVar16 + uVar3 + 0x40080;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      uVar12 = *(undefined8 *)(param_1 + 0x20);
      uVar13 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar17 = &PTR_execute_00143a10;
      uVar5 = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(pTVar17 + 8) = uVar8;
      *(undefined8 *)(pTVar17 + 0x10) = uVar9;
      *(undefined8 *)(pTVar17 + 0x18) = uVar10;
      *(undefined8 *)(pTVar17 + 0x20) = uVar11;
      *(undefined8 *)(pTVar17 + 0x38) = uVar5;
      *(undefined8 *)(pTVar17 + 0x28) = uVar12;
      *(undefined8 *)(pTVar17 + 0x30) = uVar13;
      lVar19 = *(long *)(pTVar16 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar16 + 0xc0100);
      pTVar16[lVar19 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar16 + lVar19 + 0x44) = 1;
      *(Thread **)(pTVar16 + lVar19 + 0x50) = pTVar17;
      *(long *)(pTVar16 + lVar19 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar16 + lVar19 + 0x60) = param_2;
      *(long *)(pTVar16 + lVar19 + 0x68) = lVar4;
      *(ulong *)(pTVar16 + lVar19 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar20 + lVar19) == 0) {
        *(undefined4 *)(pTVar20 + lVar19) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar16 + 0x40080) = *(long *)(pTVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar16 + 0x40080) - 1U <= *(ulong *)(pTVar16 + 0x40040)) {
        LOCK();
        *(long *)(pTVar16 + 0x40040) = *(long *)(pTVar16 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar17 = local_48 + 8;
            *(long *)pTVar17 = *(long *)pTVar17 + -1;
            UNLOCK();
            if (*(long *)pTVar17 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar14 = embree::TaskScheduler::TaskQueue::execute_local(pTVar20,(Task *)pTVar16);
      } while (cVar14 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar15 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar18);
      pTVar20 = *(Thread **)param_2;
      if (pTVar20 != (Thread *)0x0) {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar20 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar20 == (Thread *)0x0) {
        if (pTVar16 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar16 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar16);
            return;
          }
        }
      }
      else {
        local_48 = pTVar20;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__heap_select<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*, __gnu_cxx::__ops::_Iter_less_iter) */

void std::
     __heap_select<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined4 *param_2,undefined4 *param_3)

{
  long lVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 *puVar5;
  long lVar6;
  long in_FS_OFFSET;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (0x40 < (long)param_2 - (long)param_1) {
    lVar6 = (((long)param_2 - (long)param_1 >> 6) + -2) / 2;
    while (__adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
                     (), lVar6 != 0) {
      lVar6 = lVar6 + -1;
    }
  }
  if (param_2 < param_3) {
    do {
      while ((float)param_1[10] <= (float)param_2[10]) {
        param_2 = param_2 + 0x10;
        if (param_3 <= param_2) goto LAB_001147cf;
      }
      uVar2 = param_1[1];
      uVar3 = param_1[2];
      uVar4 = param_1[3];
      puVar5 = param_2 + 0x10;
      *param_2 = *param_1;
      param_2[1] = uVar2;
      param_2[2] = uVar3;
      param_2[3] = uVar4;
      uVar2 = param_1[5];
      uVar3 = param_1[6];
      uVar4 = param_1[7];
      param_2[4] = param_1[4];
      param_2[5] = uVar2;
      param_2[6] = uVar3;
      param_2[7] = uVar4;
      *(undefined8 *)(param_2 + 8) = *(undefined8 *)(param_1 + 8);
      param_2[10] = param_1[10];
      __adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
                ();
      param_2 = puVar5;
    } while (puVar5 < param_3);
  }
LAB_001147cf:
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x00114bd5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar19 = pTVar15 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar16 = pTVar17 + 0x80;
    *(undefined4 *)(pTVar17 + 0x40) = 0;
    pTVar17 = pTVar16;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar16 = pTVar15 + uVar3 + 0x40088;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar16 = &PTR_execute_00143a28;
      *(undefined8 *)(pTVar16 + 8) = uVar7;
      *(undefined8 *)(pTVar16 + 0x10) = uVar8;
      *(undefined8 *)(pTVar16 + 0x18) = uVar9;
      *(undefined8 *)(pTVar16 + 0x20) = uVar10;
      *(undefined8 *)(pTVar16 + 0x28) = uVar11;
      *(undefined8 *)(pTVar16 + 0x30) = uVar12;
      lVar18 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar18 + 0x50) = pTVar16;
      *(long *)(pTVar15 + lVar18 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar15 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar18 + 0x68) = lVar4;
      *(ulong *)(pTVar15 + lVar18 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar16 = local_48 + 8;
            *(long *)pTVar16 = *(long *)pTVar16 + -1;
            UNLOCK();
            if (*(long *)pTVar16 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar15 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
      }
      else {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long lVar8;
  ulong uVar9;
  undefined8 *puVar10;
  TaskScheduler *pTVar11;
  undefined8 *puVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 uStack_78;
  TaskGroupContext *pTStack_70;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  TaskGroupContext *pTStack_40;
  long local_30;
  
  uVar13 = *(ulong *)(this + 8);
  uVar9 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar13 - uVar9) {
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uVar13 = uVar13 + uVar9 >> 1;
    local_68 = uVar13;
    uStack_60 = uVar9;
    local_58 = *(ulong *)(this + 0x18);
    pTStack_40 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_68,pTVar3,uVar13 - uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_001150ee;
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar2) goto LAB_001150ee;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar2);
      *puVar10 = &PTR_execute_00143a28;
      puVar10[1] = local_68;
      puVar10[2] = uStack_60;
      puVar10[3] = local_58;
      puVar10[4] = uStack_50;
      puVar10[5] = uStack_48;
      puVar10[6] = pTStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar13 - uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(long *)(this + 8);
    local_88 = *(undefined8 *)(this + 0x18);
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_80 = *(undefined8 *)(this + 0x20);
    uStack_78 = *(undefined8 *)(this + 0x28);
    uVar9 = local_98 - uVar13;
    uStack_90 = uVar13;
    pTStack_70 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_98,pTVar3,uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_001150ee:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar13 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar13) goto LAB_001150ee;
      *(ulong *)(lVar7 + 0xc00c0) = uVar13;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar13);
      *puVar10 = &PTR_execute_00143a28;
      puVar10[1] = local_98;
      puVar10[2] = uStack_90;
      puVar10[3] = local_88;
      puVar10[4] = uStack_80;
      puVar10[5] = uStack_78;
      puVar10[6] = pTStack_70;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar9 < uVar13) {
      do {
        lVar7 = **(long **)(this + 0x28) + uVar9;
        puVar12 = (undefined8 *)(uVar9 * 0x40 + **(long **)(this + 0x20));
        uVar9 = uVar9 + 1;
        uVar6 = puVar12[1];
        puVar10 = (undefined8 *)(**(long **)(this + 0x20) + lVar7 * 0x40);
        *puVar10 = *puVar12;
        puVar10[1] = uVar6;
        uVar6 = puVar12[3];
        puVar10[2] = puVar12[2];
        puVar10[3] = uVar6;
        puVar10[4] = puVar12[4];
        *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar12 + 5);
      } while (uVar13 != uVar9);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x001154d5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar19 = pTVar15 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar16 = pTVar17 + 0x80;
    *(undefined4 *)(pTVar17 + 0x40) = 0;
    pTVar17 = pTVar16;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar16 = pTVar15 + uVar3 + 0x40088;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar16 = &PTR_execute_00143a40;
      *(undefined8 *)(pTVar16 + 8) = uVar7;
      *(undefined8 *)(pTVar16 + 0x10) = uVar8;
      *(undefined8 *)(pTVar16 + 0x18) = uVar9;
      *(undefined8 *)(pTVar16 + 0x20) = uVar10;
      *(undefined8 *)(pTVar16 + 0x28) = uVar11;
      *(undefined8 *)(pTVar16 + 0x30) = uVar12;
      lVar18 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar18 + 0x50) = pTVar16;
      *(long *)(pTVar15 + lVar18 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar15 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar18 + 0x68) = lVar4;
      *(ulong *)(pTVar15 + lVar18 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar16 = local_48 + 8;
            *(long *)pTVar16 = *(long *)pTVar16 + -1;
            UNLOCK();
            if (*(long *)pTVar16 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar15 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
      }
      else {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long lVar8;
  ulong uVar9;
  undefined8 *puVar10;
  TaskScheduler *pTVar11;
  undefined8 *puVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 uStack_78;
  TaskGroupContext *pTStack_70;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  TaskGroupContext *pTStack_40;
  long local_30;
  
  uVar13 = *(ulong *)(this + 8);
  uVar9 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar13 - uVar9) {
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uVar13 = uVar13 + uVar9 >> 1;
    local_68 = uVar13;
    uStack_60 = uVar9;
    local_58 = *(ulong *)(this + 0x18);
    pTStack_40 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_68,pTVar3,uVar13 - uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_001159ee;
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar2) goto LAB_001159ee;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar2);
      *puVar10 = &PTR_execute_00143a40;
      puVar10[1] = local_68;
      puVar10[2] = uStack_60;
      puVar10[3] = local_58;
      puVar10[4] = uStack_50;
      puVar10[5] = uStack_48;
      puVar10[6] = pTStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar13 - uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(long *)(this + 8);
    local_88 = *(undefined8 *)(this + 0x18);
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_80 = *(undefined8 *)(this + 0x20);
    uStack_78 = *(undefined8 *)(this + 0x28);
    uVar9 = local_98 - uVar13;
    uStack_90 = uVar13;
    pTStack_70 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_98,pTVar3,uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_001159ee:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar13 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar13) goto LAB_001159ee;
      *(ulong *)(lVar7 + 0xc00c0) = uVar13;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar13);
      *puVar10 = &PTR_execute_00143a40;
      puVar10[1] = local_98;
      puVar10[2] = uStack_90;
      puVar10[3] = local_88;
      puVar10[4] = uStack_80;
      puVar10[5] = uStack_78;
      puVar10[6] = pTStack_70;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar9 < uVar13) {
      do {
        lVar7 = **(long **)(this + 0x28) + uVar9;
        puVar12 = (undefined8 *)(uVar9 * 0x40 + **(long **)(this + 0x20));
        uVar9 = uVar9 + 1;
        uVar6 = puVar12[1];
        puVar10 = (undefined8 *)(**(long **)(this + 0x20) + lVar7 * 0x40);
        *puVar10 = *puVar12;
        puVar10[1] = uVar6;
        uVar6 = puVar12[3];
        puVar10[2] = puVar12[2];
        puVar10[3] = uVar6;
        puVar10[4] = puVar12[4];
        *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar12 + 5);
      } while (uVar13 != uVar9);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(unsigned
   long)#8}>::createLargeLeaf(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > const&, embree::FastAllocator::CachedAllocator) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(unsigned_long)#8}>
::createLargeLeaf(ulong *param_1,ulong *param_2)

{
  int *piVar1;
  long *plVar2;
  long lVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined1 (*pauVar6) [16];
  undefined1 (*pauVar7) [16];
  ulong uVar8;
  long lVar9;
  TaskGroupContext *pTVar10;
  TaskScheduler *pTVar11;
  undefined8 uVar12;
  undefined8 *puVar13;
  ulong uVar14;
  ulong uVar15;
  ulong uVar16;
  undefined4 unaff_EBX;
  ulong *puVar17;
  undefined8 unaff_RBP;
  ulong uVar18;
  ulong uVar19;
  ulong uVar20;
  undefined8 *puVar21;
  long lVar22;
  undefined8 *puVar23;
  long lVar24;
  undefined4 unaff_R12D;
  ulong uVar25;
  long lVar26;
  ulong uVar27;
  long in_FS_OFFSET;
  byte bVar28;
  float fVar29;
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  ulong local_978;
  ulong local_938;
  ulong local_848;
  ulong local_840;
  ulong local_838;
  ulong local_830;
  ulong local_828;
  ulong uStack_820;
  undefined8 local_818;
  long *plStack_810;
  ulong *local_808;
  TaskGroupContext *pTStack_800;
  ulong local_7f8;
  ulong uStack_7f0;
  undefined8 local_7e8;
  long *plStack_7e0;
  ulong *local_7d8;
  TaskGroupContext *apTStack_7d0 [17];
  ulong local_748;
  bool local_740 [8];
  undefined8 local_738;
  ulong uStack_730;
  undefined8 local_728;
  ulong auStack_720 [4];
  ulong uStack_700;
  ulong local_6f8;
  ulong uStack_6f0;
  ulong local_6e8;
  undefined1 local_6d0;
  undefined4 local_6c8;
  undefined4 uStack_6c4;
  undefined4 uStack_6c0;
  undefined4 local_6b8;
  undefined4 uStack_6b4;
  undefined4 uStack_6b0;
  long local_688;
  long local_680;
  undefined1 local_660;
  undefined4 local_658;
  undefined4 local_654;
  undefined4 local_650;
  undefined4 local_648;
  undefined4 local_644;
  undefined4 local_640;
  long local_618;
  long local_610;
  undefined1 local_5f0;
  undefined4 local_5e8;
  undefined4 local_5e4;
  undefined4 local_5e0;
  undefined4 local_5d8;
  undefined4 local_5d4;
  undefined4 local_5d0;
  long local_5a8;
  long local_5a0;
  undefined1 local_580;
  undefined4 local_578;
  undefined4 local_574;
  undefined4 local_570;
  undefined4 local_568;
  undefined4 local_564;
  undefined4 local_560;
  long local_538;
  long local_530;
  undefined1 local_510;
  undefined4 local_508;
  undefined4 local_504;
  undefined4 local_500;
  undefined4 local_4f8;
  undefined4 local_4f4;
  undefined4 local_4f0;
  long local_4c8;
  long local_4c0;
  undefined1 local_4a0;
  undefined4 local_498;
  undefined4 local_494;
  undefined4 local_490;
  undefined4 local_488;
  undefined4 local_484;
  undefined4 local_480;
  long local_458;
  long local_450;
  undefined1 local_430;
  undefined4 local_428;
  undefined4 local_424;
  undefined4 local_420;
  undefined4 local_418;
  undefined4 local_414;
  undefined4 local_410;
  long local_3e8;
  long local_3e0;
  undefined1 local_3c0;
  undefined4 local_3b8;
  undefined4 local_3b4;
  undefined4 local_3b0;
  undefined4 local_3a8;
  undefined4 local_3a4;
  undefined4 local_3a0;
  long local_378;
  long local_370;
  undefined1 local_350;
  undefined4 local_348;
  undefined4 local_344;
  undefined4 local_340;
  undefined4 local_338;
  undefined4 local_334;
  undefined4 local_330;
  long local_308;
  long local_300;
  undefined1 local_2e0;
  undefined4 local_2d8;
  undefined4 local_2d4;
  undefined4 local_2d0;
  undefined4 local_2c8;
  undefined4 local_2c4;
  undefined4 local_2c0;
  long local_298;
  long local_290;
  undefined1 local_270;
  undefined4 local_268;
  undefined4 local_264;
  undefined4 local_260;
  undefined4 local_258;
  undefined4 local_254;
  undefined4 local_250;
  long local_228;
  long local_220;
  undefined1 local_200;
  undefined4 local_1f8;
  undefined4 local_1f4;
  undefined4 local_1f0;
  undefined4 local_1e8;
  undefined4 local_1e4;
  undefined4 local_1e0;
  long local_1b8;
  long local_1b0;
  undefined1 local_190;
  undefined4 local_188;
  undefined4 local_184;
  undefined4 local_180;
  undefined4 local_178;
  undefined4 local_174;
  undefined4 local_170;
  long local_148;
  long local_140;
  undefined1 local_120;
  undefined4 local_118;
  undefined4 local_114;
  undefined4 local_110;
  undefined4 local_108;
  undefined4 local_104;
  undefined4 local_100;
  long local_d8;
  long local_d0;
  undefined1 local_b0;
  undefined4 local_a8;
  undefined4 local_a4;
  undefined4 local_a0;
  undefined4 local_98;
  undefined4 local_94;
  undefined4 local_90;
  long local_68;
  long local_60;
  long local_40;
  undefined4 local_38;
  undefined4 local_34;
  
  uVar5 = _LC8;
  uVar4 = _LC6;
  bVar28 = 0;
  uVar19 = *param_2;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1[1] < uVar19) {
LAB_00117941:
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar16 = param_2[0xb];
  if (uVar16 - param_2[10] <= param_1[4]) {
    puVar13 = *(undefined8 **)(param_2[10] * 0x40 + param_1[8] + 0x20);
    goto LAB_00115a6d;
  }
  local_740[0] = SUB81(param_2[1],0);
  local_728 = param_2[4];
  auStack_720[0] = param_2[5];
  local_738 = param_2[2];
  uStack_730 = param_2[3];
  auStack_720[1] = param_2[6];
  auStack_720[2] = param_2[7];
  local_6e8 = param_2[0xc];
  local_6f8 = param_2[10];
  uStack_6f0 = param_2[0xb];
  auStack_720[3] = param_2[8];
  uStack_700 = param_2[9];
  local_748 = uVar19;
  if (param_1[4] < uStack_6f0 - local_6f8) {
    lVar26 = 0;
    uVar25 = 1;
    puVar17 = &local_748;
    do {
      plVar2 = (long *)param_1[9];
      uVar16 = auStack_720[lVar26 * 0xe + 5];
      uVar15 = auStack_720[lVar26 * 0xe + 6];
      uVar18 = uVar16 + uVar15 >> 1;
      if (uVar16 < uVar18) {
        auVar39._4_4_ = uVar5;
        auVar39._0_4_ = uVar5;
        auVar39._8_4_ = uVar5;
        auVar39._12_4_ = uVar5;
        auVar36._4_4_ = uVar4;
        auVar36._0_4_ = uVar4;
        auVar36._8_4_ = uVar4;
        auVar36._12_4_ = uVar4;
        auVar37._4_4_ = uVar5;
        auVar37._0_4_ = uVar5;
        auVar37._8_4_ = uVar5;
        auVar37._12_4_ = uVar5;
        auVar38._4_4_ = uVar4;
        auVar38._0_4_ = uVar4;
        auVar38._8_4_ = uVar4;
        auVar38._12_4_ = uVar4;
        pauVar7 = (undefined1 (*) [16])(uVar16 * 0x40 + *plVar2);
        do {
          auVar30._0_4_ = *(float *)pauVar7[1] + *(float *)*pauVar7;
          auVar30._4_4_ = *(float *)(pauVar7[1] + 4) + *(float *)(*pauVar7 + 4);
          auVar30._8_4_ = *(float *)(pauVar7[1] + 8) + *(float *)(*pauVar7 + 8);
          auVar30._12_4_ = *(float *)(pauVar7[1] + 0xc) + *(float *)(*pauVar7 + 0xc);
          pauVar6 = pauVar7 + 4;
          auVar39 = minps(auVar39,*pauVar7);
          auVar38 = maxps(auVar38,pauVar7[1]);
          auVar37 = minps(auVar37,auVar30);
          auVar36 = maxps(auVar36,auVar30);
          pauVar7 = pauVar6;
        } while (pauVar6 != (undefined1 (*) [16])(*plVar2 + uVar18 * 0x40));
        lVar22 = uVar18 - uVar16;
      }
      else {
        auVar39._4_4_ = uVar5;
        auVar39._0_4_ = uVar5;
        auVar39._8_4_ = uVar5;
        auVar39._12_4_ = uVar5;
        auVar36._4_4_ = uVar4;
        auVar36._0_4_ = uVar4;
        auVar36._8_4_ = uVar4;
        auVar36._12_4_ = uVar4;
        auVar37._4_4_ = uVar5;
        auVar37._0_4_ = uVar5;
        auVar37._8_4_ = uVar5;
        auVar37._12_4_ = uVar5;
        lVar22 = 0;
        auVar38._4_4_ = uVar4;
        auVar38._0_4_ = uVar4;
        auVar38._8_4_ = uVar4;
        auVar38._12_4_ = uVar4;
      }
      if (uVar18 < uVar15) {
        auVar34._4_4_ = uVar4;
        auVar34._0_4_ = uVar4;
        auVar34._8_4_ = uVar4;
        auVar34._12_4_ = uVar4;
        auVar33._4_4_ = uVar5;
        auVar33._0_4_ = uVar5;
        auVar33._8_4_ = uVar5;
        auVar33._12_4_ = uVar5;
        auVar32._4_4_ = uVar4;
        auVar32._0_4_ = uVar4;
        auVar32._8_4_ = uVar4;
        auVar32._12_4_ = uVar4;
        auVar35._4_4_ = uVar5;
        auVar35._0_4_ = uVar5;
        auVar35._8_4_ = uVar5;
        auVar35._12_4_ = uVar5;
        pauVar7 = (undefined1 (*) [16])(uVar18 * 0x40 + *plVar2);
        do {
          auVar31._0_4_ = *(float *)pauVar7[1] + *(float *)*pauVar7;
          auVar31._4_4_ = *(float *)(pauVar7[1] + 4) + *(float *)(*pauVar7 + 4);
          auVar31._8_4_ = *(float *)(pauVar7[1] + 8) + *(float *)(*pauVar7 + 8);
          auVar31._12_4_ = *(float *)(pauVar7[1] + 0xc) + *(float *)(*pauVar7 + 0xc);
          pauVar6 = pauVar7 + 4;
          auVar35 = minps(auVar35,*pauVar7);
          auVar34 = maxps(auVar34,pauVar7[1]);
          auVar33 = minps(auVar33,auVar31);
          auVar32 = maxps(auVar32,auVar31);
          pauVar7 = pauVar6;
        } while (pauVar6 != (undefined1 (*) [16])(*plVar2 + uVar15 * 0x40));
        lVar24 = uVar15 - uVar18;
      }
      else {
        auVar34._4_4_ = uVar4;
        auVar34._0_4_ = uVar4;
        auVar34._8_4_ = uVar4;
        auVar34._12_4_ = uVar4;
        auVar33._4_4_ = uVar5;
        auVar33._0_4_ = uVar5;
        auVar33._8_4_ = uVar5;
        auVar33._12_4_ = uVar5;
        auVar32._4_4_ = uVar4;
        auVar32._0_4_ = uVar4;
        auVar32._8_4_ = uVar4;
        auVar32._12_4_ = uVar4;
        lVar24 = 0;
        auVar35._4_4_ = uVar5;
        auVar35._0_4_ = uVar5;
        auVar35._8_4_ = uVar5;
        auVar35._12_4_ = uVar5;
      }
      local_978 = auStack_720[lVar26 * 0xe + 7];
      uVar8 = local_978;
      uVar20 = uVar18;
      local_938 = uVar18;
      if (uVar15 != local_978) {
        uVar8 = local_978 - uVar15;
        fVar29 = ((float)lVar22 / (float)(ulong)(lVar24 + lVar22)) * (float)uVar8;
        if ((float)((uint)fVar29 & _LC23) < _LC22) {
          fVar29 = (float)((uint)(float)(int)fVar29 | ~_LC23 & (uint)fVar29);
        }
        if (__LC24 <= fVar29) {
          uVar27 = (long)(fVar29 - __LC24) ^ 0x8000000000000000;
        }
        else {
          uVar27 = (ulong)fVar29;
        }
        if (uVar8 < uVar27) {
          uVar27 = uVar8;
        }
        local_978 = local_978 - uVar27;
        local_938 = uVar18 + uVar27;
        uVar14 = uVar15 - uVar18;
        uVar8 = uVar15;
        local_848 = uVar27;
        local_840 = uVar14;
        if (uVar27 != 0) {
          if (uVar27 < uVar14) {
            local_808 = &local_840;
            local_838 = 0;
            local_818 = 0x40;
            local_828 = local_938;
            uStack_820 = uVar18;
            plStack_810 = plVar2;
            pTStack_800 = (TaskGroupContext *)&local_838;
            lVar22 = embree::TaskScheduler::thread();
            if (lVar22 == 0) {
              pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
              TaskScheduler::
              spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                        (pTVar11,(_lambda___1_ *)&local_828,(TaskGroupContext *)&local_838,uVar27,
                         true);
            }
            else {
              if (0xfff < *(ulong *)(lVar22 + 0x40080)) goto LAB_00117941;
              lVar24 = *(long *)(lVar22 + 0xc00c0);
              uVar8 = lVar24 + 0x38 + (ulong)(-(int)lVar24 & 0x3f);
              if (0x80000 < uVar8) goto LAB_00117941;
              puVar13 = (undefined8 *)(lVar22 + 0x40088 + uVar8);
              *(ulong *)(lVar22 + 0xc00c0) = uVar8;
              puVar13[1] = local_828;
              puVar13[2] = uStack_820;
              *puVar13 = &PTR_execute_00143a28;
              puVar13[3] = local_818;
              puVar13[4] = plStack_810;
              puVar13[5] = local_808;
              puVar13[6] = pTStack_800;
              lVar9 = *(long *)(lVar22 + 0x40080) * 0x40;
              piVar1 = (int *)(lVar22 + 0x40 + lVar9);
              lVar3 = *(long *)(lVar22 + 0xc0100);
              *(undefined4 *)(lVar22 + 0x44 + lVar9) = 1;
              *(undefined1 *)(lVar22 + 0x48 + lVar9) = 1;
              lVar9 = lVar9 + lVar22;
              *(undefined8 **)(lVar9 + 0x50) = puVar13;
              *(long *)(lVar9 + 0x58) = lVar3;
              *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_838;
              *(long *)(lVar9 + 0x68) = lVar24;
              *(ulong *)(lVar9 + 0x70) = uVar27;
              if (lVar3 != 0) {
                LOCK();
                *(int *)(lVar3 + 4) = *(int *)(lVar3 + 4) + 1;
                UNLOCK();
              }
              LOCK();
              if (*piVar1 == 0) {
                *piVar1 = 1;
              }
              UNLOCK();
              LOCK();
              *(long *)(lVar22 + 0x40080) = *(long *)(lVar22 + 0x40080) + 1;
              UNLOCK();
              if (*(long *)(lVar22 + 0x40080) - 1U <= *(ulong *)(lVar22 + 0x40040)) {
                LOCK();
                *(long *)(lVar22 + 0x40040) = *(long *)(lVar22 + 0x40080) + -1;
                UNLOCK();
              }
            }
            embree::TaskScheduler::wait();
            uVar8 = local_838;
          }
          else {
            local_7d8 = &local_848;
            local_830 = 0;
            local_7e8 = 0x40;
            local_7f8 = uVar15;
            uStack_7f0 = uVar18;
            plStack_7e0 = plVar2;
            apTStack_7d0[0] = (TaskGroupContext *)&local_830;
            lVar22 = embree::TaskScheduler::thread();
            if (lVar22 == 0) {
              pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
              TaskScheduler::
              spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                        (pTVar11,(_lambda___1_ *)&local_7f8,(TaskGroupContext *)&local_830,uVar14,
                         true);
            }
            else {
              if (0xfff < *(ulong *)(lVar22 + 0x40080)) goto LAB_00117941;
              lVar24 = *(long *)(lVar22 + 0xc00c0);
              uVar8 = lVar24 + 0x38 + (ulong)(-(int)lVar24 & 0x3f);
              if (0x80000 < uVar8) goto LAB_00117941;
              puVar13 = (undefined8 *)(lVar22 + 0x40088 + uVar8);
              *(ulong *)(lVar22 + 0xc00c0) = uVar8;
              *puVar13 = &PTR_execute_00143a40;
              puVar13[1] = local_7f8;
              puVar13[2] = uStack_7f0;
              puVar13[3] = local_7e8;
              puVar13[4] = plStack_7e0;
              puVar13[5] = local_7d8;
              puVar13[6] = apTStack_7d0[0];
              lVar9 = *(long *)(lVar22 + 0x40080) * 0x40;
              piVar1 = (int *)(lVar22 + 0x40 + lVar9);
              lVar3 = *(long *)(lVar22 + 0xc0100);
              *(undefined4 *)(lVar22 + 0x44 + lVar9) = 1;
              *(undefined1 *)(lVar22 + 0x48 + lVar9) = 1;
              lVar9 = lVar9 + lVar22;
              *(undefined8 **)(lVar9 + 0x50) = puVar13;
              *(long *)(lVar9 + 0x58) = lVar3;
              *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_830;
              *(long *)(lVar9 + 0x68) = lVar24;
              *(ulong *)(lVar9 + 0x70) = uVar14;
              if (lVar3 != 0) {
                LOCK();
                *(int *)(lVar3 + 4) = *(int *)(lVar3 + 4) + 1;
                UNLOCK();
              }
              LOCK();
              if (*piVar1 == 0) {
                *piVar1 = 1;
              }
              UNLOCK();
              LOCK();
              *(long *)(lVar22 + 0x40080) = *(long *)(lVar22 + 0x40080) + 1;
              UNLOCK();
              if (*(long *)(lVar22 + 0x40080) - 1U <= *(ulong *)(lVar22 + 0x40040)) {
                LOCK();
                *(long *)(lVar22 + 0x40040) = *(long *)(lVar22 + 0x40080) + -1;
                UNLOCK();
              }
            }
            embree::TaskScheduler::wait();
            uVar8 = local_830;
          }
          if (uVar8 != 0) {
            local_7f8 = uVar8;
            std::__exception_ptr::exception_ptr::_M_addref();
            std::rethrow_exception(&local_7f8);
            goto LAB_0011793c;
          }
          local_978 = local_978 + local_848;
          uVar8 = uVar15 + local_848;
          uVar20 = uVar18 + local_848;
        }
      }
      uVar25 = uVar25 + 1;
      *(ulong *)(local_740 + lVar26 * 0x70 + -8) = *puVar17;
      local_740[lVar26 * 0x70] = SUB81(puVar17[1],0);
      uVar15 = puVar17[3];
      (&local_738)[lVar26 * 0xe] = puVar17[2];
      (&uStack_730)[lVar26 * 0xe] = uVar15;
      uVar15 = puVar17[5];
      (&local_728)[lVar26 * 0xe] = puVar17[4];
      auStack_720[lVar26 * 0xe] = uVar15;
      uVar15 = puVar17[7];
      auStack_720[lVar26 * 0xe + 1] = puVar17[6];
      auStack_720[lVar26 * 0xe + 2] = uVar15;
      uVar15 = puVar17[9];
      auStack_720[lVar26 * 0xe + 3] = puVar17[8];
      auStack_720[lVar26 * 0xe + 4] = uVar15;
      uVar15 = puVar17[0xb];
      auStack_720[lVar26 * 0xe + 5] = puVar17[10];
      auStack_720[lVar26 * 0xe + 6] = uVar15;
      auStack_720[lVar26 * 0xe + 7] = puVar17[0xc];
      *puVar17 = uVar19 + 1;
      puVar17[0xc] = local_938;
      *(undefined1 *)(puVar17 + 1) = 0;
      *(undefined1 (*) [16])(puVar17 + 2) = auVar39;
      *(undefined1 (*) [16])(puVar17 + 4) = auVar38;
      *(undefined1 (*) [16])(puVar17 + 6) = auVar37;
      *(undefined1 (*) [16])(puVar17 + 8) = auVar36;
      puVar17[10] = uVar16;
      puVar17[0xb] = uVar18;
      puVar17[0xe] = uVar19 + 1;
      *(undefined1 *)(puVar17 + 0xf) = 0;
      *(undefined1 (*) [16])(puVar17 + 0x10) = auVar35;
      *(undefined1 (*) [16])(puVar17 + 0x12) = auVar34;
      *(undefined1 (*) [16])(puVar17 + 0x14) = auVar33;
      *(undefined1 (*) [16])(puVar17 + 0x16) = auVar32;
      puVar17[0x18] = uVar20;
      puVar17[0x19] = uVar8;
      puVar17[0x1a] = local_978;
      if (*param_1 <= uVar25) {
        uVar19 = param_1[7];
        if (param_2[0xb] - param_2[10] <= uVar19) goto LAB_0011697c;
        local_740[0] = uStack_6f0 - local_6f8 <= uVar19;
        goto LAB_0011732f;
      }
      uVar19 = param_1[4];
      lVar26 = 0;
      uVar16 = uStack_6f0 - local_6f8;
      if (uVar16 <= uVar19) {
        uVar16 = 0;
        lVar26 = -1;
      }
      uVar15 = uVar16;
      if (uVar16 <= uVar19) {
        uVar15 = uVar19;
      }
      if (uVar15 < (ulong)(local_680 - local_688)) {
        lVar26 = 1;
        uVar16 = local_680 - local_688;
        if (uVar25 != 2) {
LAB_0011616a:
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_610 - local_618)) {
            lVar26 = 2;
            uVar16 = local_610 - local_618;
            if (uVar25 == 3) goto LAB_00116420;
          }
          else if (uVar25 == 3) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_5a0 - local_5a8)) {
            lVar26 = 3;
            uVar16 = local_5a0 - local_5a8;
            if (uVar25 == 4) goto LAB_00116420;
          }
          else if (uVar25 == 4) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_530 - local_538)) {
            lVar26 = 4;
            uVar16 = local_530 - local_538;
            if (uVar25 == 5) goto LAB_00116420;
          }
          else if (uVar25 == 5) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_4c0 - local_4c8)) {
            lVar26 = 5;
            uVar16 = local_4c0 - local_4c8;
            if (uVar25 == 6) goto LAB_00116420;
          }
          else if (uVar25 == 6) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_450 - local_458)) {
            lVar26 = 6;
            uVar16 = local_450 - local_458;
            if (uVar25 == 7) goto LAB_00116420;
          }
          else if (uVar25 == 7) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_3e0 - local_3e8)) {
            lVar26 = 7;
            uVar16 = local_3e0 - local_3e8;
            if (uVar25 == 8) goto LAB_00116420;
          }
          else if (uVar25 == 8) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_370 - local_378)) {
            lVar26 = 8;
            uVar16 = local_370 - local_378;
            if (uVar25 == 9) goto LAB_00116420;
          }
          else if (uVar25 == 9) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_300 - local_308)) {
            lVar26 = 9;
            uVar16 = local_300 - local_308;
            if (uVar25 == 10) goto LAB_00116420;
          }
          else if (uVar25 == 10) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_290 - local_298)) {
            lVar26 = 10;
            uVar16 = local_290 - local_298;
            if (uVar25 == 0xb) goto LAB_00116420;
          }
          else if (uVar25 == 0xb) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_220 - local_228)) {
            lVar26 = 0xb;
            uVar16 = local_220 - local_228;
            if (uVar25 == 0xc) goto LAB_00116420;
          }
          else if (uVar25 == 0xc) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_1b0 - local_1b8)) {
            lVar26 = 0xc;
            uVar16 = local_1b0 - local_1b8;
            if (uVar25 == 0xd) goto LAB_00116420;
          }
          else if (uVar25 == 0xd) goto LAB_00116810;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_140 - local_148)) {
            lVar26 = 0xd;
            uVar16 = local_140 - local_148;
            if (uVar25 == 0xe) goto LAB_00116420;
          }
          else if (uVar25 == 0xe) goto LAB_00116810;
          uVar15 = local_d0 - local_d8;
          if (uVar16 <= uVar19) {
            uVar16 = uVar19;
          }
          if (uVar16 < uVar15) {
            if (uVar25 == 0x10) {
              if (uVar15 <= uVar19) {
                uVar15 = uVar19;
              }
              lVar26 = (ulong)(uVar15 < (ulong)(local_60 - local_68)) + 0xe;
            }
            else {
              uVar25 = 0xf;
              lVar26 = 0xe;
            }
          }
          else {
            if ((uVar25 != 0x10) || ((ulong)(local_60 - local_68) <= uVar16)) goto LAB_00116810;
            lVar26 = 0xf;
          }
        }
      }
      else {
        if (uVar25 != 2) goto LAB_0011616a;
LAB_00116810:
        if (lVar26 == -1) goto code_r0x0011681a;
      }
LAB_00116420:
      uVar19 = *param_2;
      puVar17 = puVar17 + 0xe;
    } while( true );
  }
  uVar25 = 1;
LAB_001172f9:
  uVar19 = param_1[7];
  if ((uVar19 < uVar16 - param_2[10]) &&
     (local_740[0] = uStack_6f0 - local_6f8 <= uVar19, uVar25 != 1)) {
LAB_0011732f:
    local_6d0 = (ulong)(local_680 - local_688) <= uVar19;
    if (((uVar25 != 2) &&
        (((local_660 = (ulong)(local_610 - local_618) <= uVar19, uVar25 != 3 &&
          (local_5f0 = (ulong)(local_5a0 - local_5a8) <= uVar19, uVar25 != 4)) &&
         (local_580 = (ulong)(local_530 - local_538) <= uVar19, uVar25 != 5)))) &&
       ((((local_510 = (ulong)(local_4c0 - local_4c8) <= uVar19, uVar25 != 6 &&
          (local_4a0 = (ulong)(local_450 - local_458) <= uVar19, uVar25 != 7)) &&
         (local_430 = (ulong)(local_3e0 - local_3e8) <= uVar19, uVar25 != 8)) &&
        (((local_3c0 = (ulong)(local_370 - local_378) <= uVar19, uVar25 != 9 &&
          (local_350 = (ulong)(local_300 - local_308) <= uVar19, uVar25 != 10)) &&
         (((local_2e0 = (ulong)(local_290 - local_298) <= uVar19, uVar25 != 0xb &&
           (((local_270 = (ulong)(local_220 - local_228) <= uVar19, uVar25 != 0xc &&
             (local_200 = (ulong)(local_1b0 - local_1b8) <= uVar19, uVar25 != 0xd)) &&
            (local_190 = (ulong)(local_140 - local_148) <= uVar19, uVar25 != 0xe)))) &&
          (local_120 = (ulong)(local_d0 - local_d8) <= uVar19, uVar25 != 0xf)))))))) {
      local_b0 = (ulong)(local_60 - local_68) <= uVar19;
    }
  }
LAB_0011697c:
  local_828 = 0x80;
  uVar19 = *in_stack_00000010;
  if (in_stack_00000008 != *(FastAllocator **)(uVar19 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar19 + 8) != 0) {
      LOCK();
      plVar2 = (long *)(*(long *)(uVar19 + 8) + 0x118);
      *plVar2 = *plVar2 + *(long *)(uVar19 + 0xa8) + *(long *)(uVar19 + 0x68);
      UNLOCK();
      LOCK();
      plVar2 = (long *)(*(long *)(uVar19 + 8) + 0x120);
      *plVar2 = *plVar2 + (((*(long *)(uVar19 + 0x98) + *(long *)(uVar19 + 0x58)) -
                           *(long *)(uVar19 + 0x50)) - *(long *)(uVar19 + 0x90));
      UNLOCK();
      LOCK();
      plVar2 = (long *)(*(long *)(uVar19 + 8) + 0x128);
      *plVar2 = *plVar2 + *(long *)(uVar19 + 0xb0) + *(long *)(uVar19 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar19 + 0x48) = 0;
    *(undefined8 *)(uVar19 + 0x58) = 0;
    *(undefined8 *)(uVar19 + 0x50) = 0;
    *(undefined8 *)(uVar19 + 0x68) = 0;
    *(undefined8 *)(uVar19 + 0x70) = 0;
    *(undefined8 *)(uVar19 + 0x60) = 0;
    if (in_stack_00000008 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar19 + 0x88) = 0;
      uVar12 = 0;
      *(undefined8 *)(uVar19 + 0x98) = 0;
      *(undefined8 *)(uVar19 + 0x90) = 0;
      *(undefined8 *)(uVar19 + 0xa8) = 0;
      *(undefined8 *)(uVar19 + 0xb0) = 0;
    }
    else {
      uVar12 = *(undefined8 *)(in_stack_00000008 + 0x10);
      *(undefined8 *)(uVar19 + 0x88) = 0;
      *(undefined8 *)(uVar19 + 0x98) = 0;
      *(undefined8 *)(uVar19 + 0x60) = uVar12;
      *(undefined8 *)(uVar19 + 0x90) = 0;
      *(undefined8 *)(uVar19 + 0xa8) = 0;
      *(undefined8 *)(uVar19 + 0xb0) = 0;
      *(undefined8 *)(uVar19 + 0xa0) = 0;
      uVar12 = *(undefined8 *)(in_stack_00000008 + 0x10);
    }
    *(undefined8 *)(uVar19 + 0xa0) = uVar12;
    LOCK();
    *(FastAllocator **)(uVar19 + 8) = in_stack_00000008;
    UNLOCK();
    local_7f8 = uVar19;
    embree::MutexSys::lock();
    puVar17 = *(ulong **)(in_stack_00000008 + 0x138);
    if (puVar17 == *(ulong **)(in_stack_00000008 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(in_stack_00000008 + 0x130),puVar17,&local_7f8);
    }
    else {
      *puVar17 = uVar19;
      *(long *)(in_stack_00000008 + 0x138) = *(long *)(in_stack_00000008 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar16 = in_stack_00000010[2];
  in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
  uVar15 = (ulong)(-(int)uVar16 & 0xf);
  uVar19 = uVar16 + 0x80 + uVar15;
  in_stack_00000010[2] = uVar19;
  if (in_stack_00000010[3] < uVar19) {
    in_stack_00000010[2] = uVar16;
    if (in_stack_00000010[4] < 0x200) {
      puVar13 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_828,0x40,false);
    }
    else {
      local_7f8 = in_stack_00000010[4];
      puVar13 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_7f8,0x40,true);
      in_stack_00000010[1] = (ulong)puVar13;
      uVar19 = in_stack_00000010[2];
      in_stack_00000010[2] = 0x80;
      in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar19;
      in_stack_00000010[3] = local_7f8;
      if (local_7f8 < 0x80) {
        in_stack_00000010[2] = 0;
        local_7f8 = in_stack_00000010[4];
        puVar13 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_7f8,0x40,false);
        in_stack_00000010[1] = (ulong)puVar13;
        uVar19 = in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar19;
        in_stack_00000010[3] = local_7f8;
        if (local_7f8 < 0x80) {
          puVar13 = (undefined8 *)0x0;
          in_stack_00000010[2] = 0;
        }
      }
    }
  }
  else {
    in_stack_00000010[6] = in_stack_00000010[6] + uVar15;
    puVar13 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar19);
  }
  *(undefined4 *)(puVar13 + 4) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x24) = uVar5;
  *(undefined4 *)(puVar13 + 5) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x2c) = uVar5;
  *(undefined4 *)(puVar13 + 8) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x44) = uVar5;
  *(undefined4 *)(puVar13 + 9) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x4c) = uVar5;
  *(undefined4 *)(puVar13 + 4) = (undefined4)local_738;
  *(undefined4 *)(puVar13 + 0xc) = uVar5;
  *(undefined4 *)((long)puVar13 + 100) = uVar5;
  *(undefined4 *)(puVar13 + 0xd) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x6c) = uVar5;
  *(undefined4 *)(puVar13 + 8) = local_738._4_4_;
  *(undefined4 *)(puVar13 + 6) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x34) = uVar4;
  *(undefined4 *)(puVar13 + 7) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x3c) = uVar4;
  *(undefined4 *)(puVar13 + 0xc) = (undefined4)uStack_730;
  *(undefined4 *)(puVar13 + 10) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x54) = uVar4;
  *(undefined4 *)(puVar13 + 0xb) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x5c) = uVar4;
  *(undefined4 *)(puVar13 + 6) = (undefined4)local_728;
  *(undefined4 *)(puVar13 + 0xe) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x74) = uVar4;
  *(undefined4 *)(puVar13 + 0xf) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x7c) = uVar4;
  *(undefined4 *)(puVar13 + 10) = local_728._4_4_;
  *puVar13 = 8;
  puVar13[1] = 8;
  puVar13[2] = 8;
  puVar13[3] = 8;
  *(undefined4 *)(puVar13 + 0xe) = (undefined4)auStack_720[0];
  if (uVar25 != 1) {
    *(undefined4 *)((long)puVar13 + 0x24) = local_6c8;
    *(undefined4 *)((long)puVar13 + 0x44) = uStack_6c4;
    *(undefined4 *)((long)puVar13 + 100) = uStack_6c0;
    *(undefined4 *)((long)puVar13 + 0x34) = local_6b8;
    *(undefined4 *)((long)puVar13 + 0x54) = uStack_6b4;
    *(undefined4 *)((long)puVar13 + 0x74) = uStack_6b0;
    if (uVar25 != 2) {
      *(undefined4 *)(puVar13 + 5) = local_658;
      *(undefined4 *)(puVar13 + 9) = local_654;
      *(undefined4 *)(puVar13 + 0xd) = local_650;
      *(undefined4 *)(puVar13 + 7) = local_648;
      *(undefined4 *)(puVar13 + 0xb) = local_644;
      *(undefined4 *)(puVar13 + 0xf) = local_640;
      if (uVar25 != 3) {
        *(undefined4 *)((long)puVar13 + 0x2c) = local_5e8;
        *(undefined4 *)((long)puVar13 + 0x4c) = local_5e4;
        *(undefined4 *)((long)puVar13 + 0x6c) = local_5e0;
        *(undefined4 *)((long)puVar13 + 0x3c) = local_5d8;
        *(undefined4 *)((long)puVar13 + 0x5c) = local_5d4;
        *(undefined4 *)((long)puVar13 + 0x7c) = local_5d0;
        if (uVar25 != 4) {
          *(undefined4 *)(puVar13 + 6) = local_578;
          *(undefined4 *)(puVar13 + 10) = local_574;
          *(undefined4 *)(puVar13 + 0xe) = local_570;
          *(undefined4 *)(puVar13 + 8) = local_568;
          *(undefined4 *)(puVar13 + 0xc) = local_564;
          *(undefined4 *)(puVar13 + 0x10) = local_560;
          if (uVar25 != 5) {
            *(undefined4 *)((long)puVar13 + 0x34) = local_508;
            *(undefined4 *)((long)puVar13 + 0x54) = local_504;
            *(undefined4 *)((long)puVar13 + 0x74) = local_500;
            *(undefined4 *)((long)puVar13 + 0x44) = local_4f8;
            *(undefined4 *)((long)puVar13 + 100) = local_4f4;
            *(undefined4 *)((long)puVar13 + 0x84) = local_4f0;
            if (uVar25 != 6) {
              *(undefined4 *)(puVar13 + 7) = local_498;
              *(undefined4 *)(puVar13 + 0xb) = local_494;
              *(undefined4 *)(puVar13 + 0xf) = local_490;
              *(undefined4 *)(puVar13 + 9) = local_488;
              *(undefined4 *)(puVar13 + 0xd) = local_484;
              *(undefined4 *)(puVar13 + 0x11) = local_480;
              if (uVar25 != 7) {
                *(undefined4 *)((long)puVar13 + 0x3c) = local_428;
                *(undefined4 *)((long)puVar13 + 0x5c) = local_424;
                *(undefined4 *)((long)puVar13 + 0x7c) = local_420;
                *(undefined4 *)((long)puVar13 + 0x4c) = local_418;
                *(undefined4 *)((long)puVar13 + 0x6c) = local_414;
                *(undefined4 *)((long)puVar13 + 0x8c) = local_410;
                if (uVar25 != 8) {
                  *(undefined4 *)(puVar13 + 8) = local_3b8;
                  *(undefined4 *)(puVar13 + 0xc) = local_3b4;
                  *(undefined4 *)(puVar13 + 0x10) = local_3b0;
                  *(undefined4 *)(puVar13 + 10) = local_3a8;
                  *(undefined4 *)(puVar13 + 0xe) = local_3a4;
                  *(undefined4 *)(puVar13 + 0x12) = local_3a0;
                  if (uVar25 != 9) {
                    *(undefined4 *)((long)puVar13 + 0x44) = local_348;
                    *(undefined4 *)((long)puVar13 + 100) = local_344;
                    *(undefined4 *)((long)puVar13 + 0x84) = local_340;
                    *(undefined4 *)((long)puVar13 + 0x54) = local_338;
                    *(undefined4 *)((long)puVar13 + 0x74) = local_334;
                    *(undefined4 *)((long)puVar13 + 0x94) = local_330;
                    if (uVar25 != 10) {
                      *(undefined4 *)(puVar13 + 9) = local_2d8;
                      *(undefined4 *)(puVar13 + 0xd) = local_2d4;
                      *(undefined4 *)(puVar13 + 0x11) = local_2d0;
                      *(undefined4 *)(puVar13 + 0xb) = local_2c8;
                      *(undefined4 *)(puVar13 + 0xf) = local_2c4;
                      *(undefined4 *)(puVar13 + 0x13) = local_2c0;
                      if (uVar25 != 0xb) {
                        *(undefined4 *)((long)puVar13 + 0x4c) = local_268;
                        *(undefined4 *)((long)puVar13 + 0x6c) = local_264;
                        *(undefined4 *)((long)puVar13 + 0x8c) = local_260;
                        *(undefined4 *)((long)puVar13 + 0x5c) = local_258;
                        *(undefined4 *)((long)puVar13 + 0x7c) = local_254;
                        *(undefined4 *)((long)puVar13 + 0x9c) = local_250;
                        if (uVar25 != 0xc) {
                          *(undefined4 *)(puVar13 + 10) = local_1f8;
                          *(undefined4 *)(puVar13 + 0xe) = local_1f4;
                          *(undefined4 *)(puVar13 + 0x12) = local_1f0;
                          *(undefined4 *)(puVar13 + 0xc) = local_1e8;
                          *(undefined4 *)(puVar13 + 0x10) = local_1e4;
                          *(undefined4 *)(puVar13 + 0x14) = local_1e0;
                          if (uVar25 != 0xd) {
                            *(undefined4 *)((long)puVar13 + 0x54) = local_188;
                            *(undefined4 *)((long)puVar13 + 0x74) = local_184;
                            *(undefined4 *)((long)puVar13 + 0x94) = local_180;
                            *(undefined4 *)((long)puVar13 + 100) = local_178;
                            *(undefined4 *)((long)puVar13 + 0x84) = local_174;
                            *(undefined4 *)((long)puVar13 + 0xa4) = local_170;
                            if (uVar25 != 0xe) {
                              *(undefined4 *)(puVar13 + 0xb) = local_118;
                              *(undefined4 *)(puVar13 + 0xf) = local_114;
                              *(undefined4 *)(puVar13 + 0x13) = local_110;
                              *(undefined4 *)(puVar13 + 0xd) = local_108;
                              *(undefined4 *)(puVar13 + 0x11) = local_104;
                              *(undefined4 *)(puVar13 + 0x15) = local_100;
                              if (uVar25 != 0xf) {
                                *(undefined4 *)((long)puVar13 + 0x5c) = local_a8;
                                *(undefined4 *)((long)puVar13 + 0x7c) = local_a4;
                                *(undefined4 *)((long)puVar13 + 0x9c) = local_a0;
                                *(undefined4 *)((long)puVar13 + 0x6c) = local_98;
                                *(undefined4 *)((long)puVar13 + 0x8c) = local_94;
                                *(undefined4 *)((long)puVar13 + 0xac) = local_90;
                                if (uVar25 == 0x11) {
                                  *(undefined4 *)(puVar13 + 0x10) = local_34;
                                  *(undefined4 *)(puVar13 + 0x14) = unaff_EBX;
                                  *(undefined4 *)(puVar13 + 0xc) = local_38;
                                  *(int *)(puVar13 + 0xe) = (int)unaff_RBP;
                                  *(int *)(puVar13 + 0x12) = (int)((ulong)unaff_RBP >> 0x20);
                                  *(undefined4 *)(puVar13 + 0x16) = unaff_R12D;
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  uVar19 = 0;
  puVar17 = &local_748;
  do {
    pTVar10 = (TaskGroupContext *)createLargeLeaf(param_1,puVar17);
    apTStack_7d0[uVar19 + 1] = pTVar10;
    uVar19 = uVar19 + 1;
    puVar17 = puVar17 + 0xe;
  } while (uVar19 != uVar25);
  *puVar13 = apTStack_7d0[1];
  uVar16 = uVar19 * 8 & 0xffffffff;
  *(undefined8 *)((long)puVar13 + (uVar16 - 8)) = *(undefined8 *)((long)apTStack_7d0 + uVar16);
  lVar26 = (long)puVar13 - (long)((ulong)(puVar13 + 1) & 0xfffffffffffffff8);
  puVar21 = (undefined8 *)((long)apTStack_7d0 + (8 - lVar26));
  puVar23 = (undefined8 *)((ulong)(puVar13 + 1) & 0xfffffffffffffff8);
  for (uVar19 = (ulong)((uint)((int)(uVar19 * 8) + (int)lVar26) >> 3); uVar19 != 0;
      uVar19 = uVar19 - 1) {
    *puVar23 = *puVar21;
    puVar21 = puVar21 + (ulong)bVar28 * -2 + 1;
    puVar23 = puVar23 + (ulong)bVar28 * -2 + 1;
  }
LAB_00115a6d:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar13;
  }
LAB_0011793c:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
code_r0x0011681a:
  uVar16 = param_2[0xb];
  goto LAB_001172f9;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >&) */

void std::
     __make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
               (BuildRecordT *param_1,BuildRecordT *param_2,_Iter_comp_iter *param_3)

{
  long lVar1;
  long lVar2;
  long in_FS_OFFSET;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (0x70 < (long)param_2 - (long)param_1) {
    lVar2 = (((long)param_2 - (long)param_1 >> 4) * 0x6db6db6db6db6db7 + -2) / 2;
    while( true ) {
      __adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                ();
      if (lVar2 == 0) break;
      lVar2 = lVar2 + -1;
    }
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void 
   std::__introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*, long,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >
   >(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*,
   embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >*, long,
   __gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > > >) */

void std::
     __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
               (BuildRecordT *param_1,BuildRecordT *param_2,long param_3)

{
  BuildRecordT *pBVar1;
  BuildRecordT *pBVar2;
  BuildRecordT BVar3;
  undefined8 uVar4;
  long lVar5;
  long lVar6;
  undefined8 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  undefined4 uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 uVar15;
  undefined4 uVar16;
  undefined4 uVar17;
  undefined4 uVar18;
  undefined4 uVar19;
  undefined4 uVar20;
  undefined4 uVar21;
  undefined4 uVar22;
  undefined4 uVar23;
  undefined8 uVar24;
  long lVar25;
  BuildRecordT *pBVar26;
  BuildRecordT *pBVar27;
  ulong uVar28;
  ulong uVar29;
  BuildRecordT *pBVar30;
  long lVar31;
  ulong uVar32;
  long lVar33;
  long lVar34;
  BuildRecordT *pBVar35;
  long in_FS_OFFSET;
  undefined8 local_b8;
  BuildRecordT local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined8 local_58;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar25 = (long)param_2 - (long)param_1;
  if (0x700 < lVar25) {
    pBVar30 = param_1 + 0x70;
    pBVar35 = param_2;
    if (param_3 == 0) {
      __make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                (param_1,param_2,(_Iter_comp_iter *)&local_b8);
    }
    else {
      do {
        uVar4 = *(undefined8 *)param_1;
        param_3 = param_3 + -1;
        BVar3 = param_1[8];
        uVar28 = *(long *)(param_1 + 200) - *(long *)(param_1 + 0xc0);
        uVar8 = *(undefined4 *)(param_1 + 0x10);
        uVar9 = *(undefined4 *)(param_1 + 0x14);
        uVar10 = *(undefined4 *)(param_1 + 0x18);
        uVar11 = *(undefined4 *)(param_1 + 0x1c);
        uVar12 = *(undefined4 *)(param_1 + 0x20);
        uVar13 = *(undefined4 *)(param_1 + 0x24);
        uVar14 = *(undefined4 *)(param_1 + 0x28);
        uVar15 = *(undefined4 *)(param_1 + 0x2c);
        uVar16 = *(undefined4 *)(param_1 + 0x30);
        uVar17 = *(undefined4 *)(param_1 + 0x34);
        uVar18 = *(undefined4 *)(param_1 + 0x38);
        uVar19 = *(undefined4 *)(param_1 + 0x3c);
        uVar20 = *(undefined4 *)(param_1 + 0x40);
        uVar21 = *(undefined4 *)(param_1 + 0x44);
        uVar22 = *(undefined4 *)(param_1 + 0x48);
        uVar23 = *(undefined4 *)(param_1 + 0x4c);
        lVar5 = *(long *)(param_1 + 0x50);
        lVar6 = *(long *)(param_1 + 0x58);
        uVar7 = *(undefined8 *)(param_1 + 0x60);
        uVar32 = *(long *)(pBVar35 + -0x18) - *(long *)(pBVar35 + -0x20);
        pBVar26 = param_1 + ((lVar25 >> 4) * 0x6db6db6db6db6db7 >> 1) * 0x70;
        uVar29 = *(long *)(pBVar26 + 0x58) - *(long *)(pBVar26 + 0x50);
        pBVar27 = pBVar35;
        param_2 = pBVar30;
        if (uVar29 < uVar28) {
          if (uVar32 < uVar29) {
            *(undefined8 *)param_1 = *(undefined8 *)pBVar26;
            param_1[8] = pBVar26[8];
            uVar24 = *(undefined8 *)(pBVar26 + 0x18);
            *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar26 + 0x10);
            *(undefined8 *)(param_1 + 0x18) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x28);
            *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar26 + 0x20);
            *(undefined8 *)(param_1 + 0x28) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x38);
            *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar26 + 0x30);
            *(undefined8 *)(param_1 + 0x38) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x48);
            *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar26 + 0x40);
            *(undefined8 *)(param_1 + 0x48) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x58);
            *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar26 + 0x50);
            *(undefined8 *)(param_1 + 0x58) = uVar24;
LAB_00117b6f:
            *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(pBVar26 + 0x60);
            *(undefined8 *)pBVar26 = uVar4;
            pBVar26[8] = BVar3;
            *(long *)(pBVar26 + 0x50) = lVar5;
            *(long *)(pBVar26 + 0x58) = lVar6;
            *(undefined8 *)(pBVar26 + 0x60) = uVar7;
            *(undefined4 *)(pBVar26 + 0x10) = uVar8;
            *(undefined4 *)(pBVar26 + 0x14) = uVar9;
            *(undefined4 *)(pBVar26 + 0x18) = uVar10;
            *(undefined4 *)(pBVar26 + 0x1c) = uVar11;
            *(undefined4 *)(pBVar26 + 0x20) = uVar12;
            *(undefined4 *)(pBVar26 + 0x24) = uVar13;
            *(undefined4 *)(pBVar26 + 0x28) = uVar14;
            *(undefined4 *)(pBVar26 + 0x2c) = uVar15;
            *(undefined4 *)(pBVar26 + 0x30) = uVar16;
            *(undefined4 *)(pBVar26 + 0x34) = uVar17;
            *(undefined4 *)(pBVar26 + 0x38) = uVar18;
            *(undefined4 *)(pBVar26 + 0x3c) = uVar19;
            *(undefined4 *)(pBVar26 + 0x40) = uVar20;
            *(undefined4 *)(pBVar26 + 0x44) = uVar21;
            *(undefined4 *)(pBVar26 + 0x48) = uVar22;
            *(undefined4 *)(pBVar26 + 0x4c) = uVar23;
            lVar31 = *(long *)(param_1 + 0xc0);
            lVar25 = *(long *)(param_1 + 200);
            lVar33 = *(long *)(pBVar35 + -0x18);
            lVar34 = *(long *)(pBVar35 + -0x20);
          }
          else {
            if (uVar28 <= uVar32) {
              *(undefined8 *)param_1 = *(undefined8 *)(param_1 + 0x70);
              *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_1 + 0x80);
              *(undefined8 *)(param_1 + 0x18) = *(undefined8 *)(param_1 + 0x88);
              *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_1 + 0x90);
              *(undefined8 *)(param_1 + 0x28) = *(undefined8 *)(param_1 + 0x98);
              param_1[8] = param_1[0x78];
              *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_1 + 0xa0);
              *(undefined8 *)(param_1 + 0x38) = *(undefined8 *)(param_1 + 0xa8);
              *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_1 + 0xb0);
              *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_1 + 0xb8);
              *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(param_1 + 0xc0);
              *(undefined8 *)(param_1 + 0x58) = *(undefined8 *)(param_1 + 200);
              goto LAB_00117d4d;
            }
            *(undefined8 *)param_1 = *(undefined8 *)(pBVar35 + -0x70);
            param_1[8] = pBVar35[-0x68];
            uVar24 = *(undefined8 *)(pBVar35 + -0x58);
            *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar35 + -0x60);
            *(undefined8 *)(param_1 + 0x18) = uVar24;
            uVar24 = *(undefined8 *)(pBVar35 + -0x48);
            *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar35 + -0x50);
            *(undefined8 *)(param_1 + 0x28) = uVar24;
            uVar24 = *(undefined8 *)(pBVar35 + -0x38);
            *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar35 + -0x40);
            *(undefined8 *)(param_1 + 0x38) = uVar24;
            uVar24 = *(undefined8 *)(pBVar35 + -0x28);
            *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar35 + -0x30);
            *(undefined8 *)(param_1 + 0x48) = uVar24;
            uVar24 = *(undefined8 *)(pBVar35 + -0x18);
            *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar35 + -0x20);
            *(undefined8 *)(param_1 + 0x58) = uVar24;
LAB_00117f44:
            *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(pBVar35 + -0x10);
            *(undefined8 *)(pBVar35 + -0x10) = uVar7;
            *(undefined8 *)(pBVar35 + -0x70) = uVar4;
            pBVar35[-0x68] = BVar3;
            *(long *)(pBVar35 + -0x20) = lVar5;
            *(long *)(pBVar35 + -0x18) = lVar6;
            *(undefined4 *)(pBVar35 + -0x60) = uVar8;
            *(undefined4 *)(pBVar35 + -0x5c) = uVar9;
            *(undefined4 *)(pBVar35 + -0x58) = uVar10;
            *(undefined4 *)(pBVar35 + -0x54) = uVar11;
            *(undefined4 *)(pBVar35 + -0x50) = uVar12;
            *(undefined4 *)(pBVar35 + -0x4c) = uVar13;
            *(undefined4 *)(pBVar35 + -0x48) = uVar14;
            *(undefined4 *)(pBVar35 + -0x44) = uVar15;
            *(undefined4 *)(pBVar35 + -0x40) = uVar16;
            *(undefined4 *)(pBVar35 + -0x3c) = uVar17;
            *(undefined4 *)(pBVar35 + -0x38) = uVar18;
            *(undefined4 *)(pBVar35 + -0x34) = uVar19;
            *(undefined4 *)(pBVar35 + -0x30) = uVar20;
            *(undefined4 *)(pBVar35 + -0x2c) = uVar21;
            *(undefined4 *)(pBVar35 + -0x28) = uVar22;
            *(undefined4 *)(pBVar35 + -0x24) = uVar23;
            lVar31 = *(long *)(param_1 + 0xc0);
            lVar25 = *(long *)(param_1 + 200);
            lVar33 = lVar6;
            lVar34 = lVar5;
          }
        }
        else {
          if (uVar28 <= uVar32) {
            if (uVar32 < uVar29) {
              *(undefined8 *)param_1 = *(undefined8 *)(pBVar35 + -0x70);
              param_1[8] = pBVar35[-0x68];
              uVar24 = *(undefined8 *)(pBVar35 + -0x58);
              *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar35 + -0x60);
              *(undefined8 *)(param_1 + 0x18) = uVar24;
              uVar24 = *(undefined8 *)(pBVar35 + -0x48);
              *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar35 + -0x50);
              *(undefined8 *)(param_1 + 0x28) = uVar24;
              uVar24 = *(undefined8 *)(pBVar35 + -0x38);
              *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar35 + -0x40);
              *(undefined8 *)(param_1 + 0x38) = uVar24;
              uVar24 = *(undefined8 *)(pBVar35 + -0x28);
              *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar35 + -0x30);
              *(undefined8 *)(param_1 + 0x48) = uVar24;
              uVar24 = *(undefined8 *)(pBVar35 + -0x18);
              *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar35 + -0x20);
              *(undefined8 *)(param_1 + 0x58) = uVar24;
              goto LAB_00117f44;
            }
            *(undefined8 *)param_1 = *(undefined8 *)pBVar26;
            param_1[8] = pBVar26[8];
            uVar24 = *(undefined8 *)(pBVar26 + 0x18);
            *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(pBVar26 + 0x10);
            *(undefined8 *)(param_1 + 0x18) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x28);
            *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(pBVar26 + 0x20);
            *(undefined8 *)(param_1 + 0x28) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x38);
            *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(pBVar26 + 0x30);
            *(undefined8 *)(param_1 + 0x38) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x48);
            *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(pBVar26 + 0x40);
            *(undefined8 *)(param_1 + 0x48) = uVar24;
            uVar24 = *(undefined8 *)(pBVar26 + 0x58);
            *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(pBVar26 + 0x50);
            *(undefined8 *)(param_1 + 0x58) = uVar24;
            goto LAB_00117b6f;
          }
          *(undefined8 *)param_1 = *(undefined8 *)(param_1 + 0x70);
          *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_1 + 0x80);
          *(undefined8 *)(param_1 + 0x18) = *(undefined8 *)(param_1 + 0x88);
          *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_1 + 0x90);
          *(undefined8 *)(param_1 + 0x28) = *(undefined8 *)(param_1 + 0x98);
          param_1[8] = param_1[0x78];
          *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_1 + 0xa0);
          *(undefined8 *)(param_1 + 0x38) = *(undefined8 *)(param_1 + 0xa8);
          *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_1 + 0xb0);
          *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_1 + 0xb8);
          *(undefined8 *)(param_1 + 0x50) = *(undefined8 *)(param_1 + 0xc0);
          *(undefined8 *)(param_1 + 0x58) = *(undefined8 *)(param_1 + 200);
LAB_00117d4d:
          *(undefined8 *)(param_1 + 0x70) = uVar4;
          param_1[0x78] = BVar3;
          *(undefined8 *)(param_1 + 0x60) = *(undefined8 *)(param_1 + 0xd0);
          *(long *)(param_1 + 0xc0) = lVar5;
          *(long *)(param_1 + 200) = lVar6;
          *(undefined8 *)(param_1 + 0xd0) = uVar7;
          *(undefined4 *)(param_1 + 0x80) = uVar8;
          *(undefined4 *)(param_1 + 0x84) = uVar9;
          *(undefined4 *)(param_1 + 0x88) = uVar10;
          *(undefined4 *)(param_1 + 0x8c) = uVar11;
          *(undefined4 *)(param_1 + 0x90) = uVar12;
          *(undefined4 *)(param_1 + 0x94) = uVar13;
          *(undefined4 *)(param_1 + 0x98) = uVar14;
          *(undefined4 *)(param_1 + 0x9c) = uVar15;
          *(undefined4 *)(param_1 + 0xa0) = uVar16;
          *(undefined4 *)(param_1 + 0xa4) = uVar17;
          *(undefined4 *)(param_1 + 0xa8) = uVar18;
          *(undefined4 *)(param_1 + 0xac) = uVar19;
          *(undefined4 *)(param_1 + 0xb0) = uVar20;
          *(undefined4 *)(param_1 + 0xb4) = uVar21;
          *(undefined4 *)(param_1 + 0xb8) = uVar22;
          *(undefined4 *)(param_1 + 0xbc) = uVar23;
          lVar33 = *(long *)(pBVar35 + -0x18);
          lVar34 = *(long *)(pBVar35 + -0x20);
          lVar31 = lVar5;
          lVar25 = lVar6;
        }
        while( true ) {
          uVar28 = lVar25 - lVar31;
          while ((ulong)(*(long *)(param_1 + 0x58) - *(long *)(param_1 + 0x50)) < uVar28) {
            lVar25 = *(long *)(param_2 + 200);
            lVar31 = *(long *)(param_2 + 0xc0);
            param_2 = param_2 + 0x70;
            uVar28 = lVar25 - lVar31;
          }
          uVar28 = lVar33 - lVar34;
          pBVar26 = pBVar27;
          while (pBVar27 = pBVar26 + -0x70,
                uVar28 < (ulong)(*(long *)(param_1 + 0x58) - *(long *)(param_1 + 0x50))) {
            uVar28 = *(long *)(pBVar26 + -0x88) - *(long *)(pBVar26 + -0x90);
            pBVar26 = pBVar27;
          }
          if (pBVar27 <= param_2) break;
          uVar4 = *(undefined8 *)param_2;
          BVar3 = param_2[8];
          uVar8 = *(undefined4 *)(param_2 + 0x10);
          uVar9 = *(undefined4 *)(param_2 + 0x14);
          uVar10 = *(undefined4 *)(param_2 + 0x18);
          uVar11 = *(undefined4 *)(param_2 + 0x1c);
          uVar12 = *(undefined4 *)(param_2 + 0x20);
          uVar13 = *(undefined4 *)(param_2 + 0x24);
          uVar14 = *(undefined4 *)(param_2 + 0x28);
          uVar15 = *(undefined4 *)(param_2 + 0x2c);
          uVar16 = *(undefined4 *)(param_2 + 0x30);
          uVar17 = *(undefined4 *)(param_2 + 0x34);
          uVar18 = *(undefined4 *)(param_2 + 0x38);
          uVar19 = *(undefined4 *)(param_2 + 0x3c);
          *(undefined8 *)param_2 = *(undefined8 *)pBVar27;
          uVar20 = *(undefined4 *)(param_2 + 0x40);
          uVar21 = *(undefined4 *)(param_2 + 0x44);
          uVar22 = *(undefined4 *)(param_2 + 0x48);
          uVar23 = *(undefined4 *)(param_2 + 0x4c);
          uVar7 = *(undefined8 *)(param_2 + 0x60);
          param_2[8] = pBVar26[-0x68];
          uVar24 = *(undefined8 *)(pBVar26 + -0x58);
          *(undefined8 *)(param_2 + 0x10) = *(undefined8 *)(pBVar26 + -0x60);
          *(undefined8 *)(param_2 + 0x18) = uVar24;
          uVar24 = *(undefined8 *)(pBVar26 + -0x48);
          *(undefined8 *)(param_2 + 0x20) = *(undefined8 *)(pBVar26 + -0x50);
          *(undefined8 *)(param_2 + 0x28) = uVar24;
          uVar24 = *(undefined8 *)(pBVar26 + -0x38);
          *(undefined8 *)(param_2 + 0x30) = *(undefined8 *)(pBVar26 + -0x40);
          *(undefined8 *)(param_2 + 0x38) = uVar24;
          uVar24 = *(undefined8 *)(pBVar26 + -0x28);
          *(undefined8 *)(param_2 + 0x40) = *(undefined8 *)(pBVar26 + -0x30);
          *(undefined8 *)(param_2 + 0x48) = uVar24;
          uVar24 = *(undefined8 *)(pBVar26 + -0x18);
          *(undefined8 *)(param_2 + 0x50) = *(undefined8 *)(pBVar26 + -0x20);
          *(undefined8 *)(param_2 + 0x58) = uVar24;
          *(undefined8 *)(param_2 + 0x60) = *(undefined8 *)(pBVar26 + -0x10);
          *(long *)(pBVar26 + -0x20) = lVar31;
          *(long *)(pBVar26 + -0x18) = lVar25;
          *(undefined8 *)pBVar27 = uVar4;
          pBVar26[-0x68] = BVar3;
          *(undefined8 *)(pBVar26 + -0x10) = uVar7;
          *(undefined4 *)(pBVar26 + -0x60) = uVar8;
          *(undefined4 *)(pBVar26 + -0x5c) = uVar9;
          *(undefined4 *)(pBVar26 + -0x58) = uVar10;
          *(undefined4 *)(pBVar26 + -0x54) = uVar11;
          *(undefined4 *)(pBVar26 + -0x50) = uVar12;
          *(undefined4 *)(pBVar26 + -0x4c) = uVar13;
          *(undefined4 *)(pBVar26 + -0x48) = uVar14;
          *(undefined4 *)(pBVar26 + -0x44) = uVar15;
          *(undefined4 *)(pBVar26 + -0x40) = uVar16;
          *(undefined4 *)(pBVar26 + -0x3c) = uVar17;
          *(undefined4 *)(pBVar26 + -0x38) = uVar18;
          *(undefined4 *)(pBVar26 + -0x34) = uVar19;
          *(undefined4 *)(pBVar26 + -0x30) = uVar20;
          *(undefined4 *)(pBVar26 + -0x2c) = uVar21;
          *(undefined4 *)(pBVar26 + -0x28) = uVar22;
          *(undefined4 *)(pBVar26 + -0x24) = uVar23;
          pBVar1 = param_2 + 200;
          pBVar2 = param_2 + 0xc0;
          param_2 = param_2 + 0x70;
          lVar31 = *(long *)pBVar2;
          lVar25 = *(long *)pBVar1;
          lVar33 = *(long *)(pBVar26 + -0x88);
          lVar34 = *(long *)(pBVar26 + -0x90);
        }
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                  (param_2,pBVar35,param_3);
        lVar25 = (long)param_2 - (long)param_1;
        if (lVar25 < 0x701) goto LAB_00117e82;
        pBVar35 = param_2;
      } while (param_3 != 0);
      __make_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                (param_1,param_2,(_Iter_comp_iter *)&local_b8);
    }
    do {
      local_b8 = *(undefined8 *)(param_2 + -0x70);
      pBVar30 = param_2 + -0x70;
      local_b0 = param_2[-0x68];
      local_a8 = *(undefined4 *)(param_2 + -0x60);
      uStack_a4 = *(undefined4 *)(param_2 + -0x5c);
      uStack_a0 = *(undefined4 *)(param_2 + -0x58);
      uStack_9c = *(undefined4 *)(param_2 + -0x54);
      local_98 = *(undefined4 *)(param_2 + -0x50);
      uStack_94 = *(undefined4 *)(param_2 + -0x4c);
      uStack_90 = *(undefined4 *)(param_2 + -0x48);
      uStack_8c = *(undefined4 *)(param_2 + -0x44);
      local_88 = *(undefined4 *)(param_2 + -0x40);
      uStack_84 = *(undefined4 *)(param_2 + -0x3c);
      uStack_80 = *(undefined4 *)(param_2 + -0x38);
      uStack_7c = *(undefined4 *)(param_2 + -0x34);
      *(undefined8 *)pBVar30 = *(undefined8 *)param_1;
      local_78 = *(undefined4 *)(param_2 + -0x30);
      uStack_74 = *(undefined4 *)(param_2 + -0x2c);
      uStack_70 = *(undefined4 *)(param_2 + -0x28);
      uStack_6c = *(undefined4 *)(param_2 + -0x24);
      local_68 = *(undefined8 *)(param_2 + -0x20);
      local_60 = *(undefined8 *)(param_2 + -0x18);
      param_2[-0x68] = param_1[8];
      uVar4 = *(undefined8 *)(param_1 + 0x18);
      local_58 = *(undefined8 *)(param_2 + -0x10);
      *(undefined8 *)(param_2 + -0x60) = *(undefined8 *)(param_1 + 0x10);
      *(undefined8 *)(param_2 + -0x58) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x28);
      *(undefined8 *)(param_2 + -0x50) = *(undefined8 *)(param_1 + 0x20);
      *(undefined8 *)(param_2 + -0x48) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x38);
      *(undefined8 *)(param_2 + -0x40) = *(undefined8 *)(param_1 + 0x30);
      *(undefined8 *)(param_2 + -0x38) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x48);
      *(undefined8 *)(param_2 + -0x30) = *(undefined8 *)(param_1 + 0x40);
      *(undefined8 *)(param_2 + -0x28) = uVar4;
      uVar4 = *(undefined8 *)(param_1 + 0x58);
      *(undefined8 *)(param_2 + -0x20) = *(undefined8 *)(param_1 + 0x50);
      *(undefined8 *)(param_2 + -0x18) = uVar4;
      *(undefined8 *)(param_2 + -0x10) = *(undefined8 *)(param_1 + 0x60);
      __adjust_heap<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                (param_1,0,((long)pBVar30 - (long)param_1 >> 4) * 0x6db6db6db6db6db7,&local_b8);
      param_2 = pBVar30;
    } while (0x70 < (long)pBVar30 - (long)param_1);
  }
LAB_00117e82:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__heap_select<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*, __gnu_cxx::__ops::_Iter_less_iter) */

void std::
     __heap_select<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined4 *param_2,undefined4 *param_3)

{
  long lVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 *puVar5;
  long lVar6;
  long in_FS_OFFSET;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (0x40 < (long)param_2 - (long)param_1) {
    lVar6 = (((long)param_2 - (long)param_1 >> 6) + -2) / 2;
    while (__adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
                     (), lVar6 != 0) {
      lVar6 = lVar6 + -1;
    }
  }
  if (param_2 < param_3) {
    do {
      while ((float)param_1[10] <= (float)param_2[10]) {
        param_2 = param_2 + 0x10;
        if (param_3 <= param_2) goto LAB_0011817f;
      }
      uVar2 = param_1[1];
      uVar3 = param_1[2];
      uVar4 = param_1[3];
      puVar5 = param_2 + 0x10;
      *param_2 = *param_1;
      param_2[1] = uVar2;
      param_2[2] = uVar3;
      param_2[3] = uVar4;
      uVar2 = param_1[5];
      uVar3 = param_1[6];
      uVar4 = param_1[7];
      param_2[4] = param_1[4];
      param_2[5] = uVar2;
      param_2[6] = uVar3;
      param_2[7] = uVar4;
      *(undefined8 *)(param_2 + 8) = *(undefined8 *)(param_1 + 8);
      param_2[10] = param_1[10];
      __adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
                ();
      param_2 = puVar5;
    } while (puVar5 < param_3);
  }
LAB_0011817f:
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x00118585) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar19 = pTVar15 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar16 = pTVar17 + 0x80;
    *(undefined4 *)(pTVar17 + 0x40) = 0;
    pTVar17 = pTVar16;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar16 = pTVar15 + uVar3 + 0x40088;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar16 = &PTR_execute_00143a58;
      *(undefined8 *)(pTVar16 + 8) = uVar7;
      *(undefined8 *)(pTVar16 + 0x10) = uVar8;
      *(undefined8 *)(pTVar16 + 0x18) = uVar9;
      *(undefined8 *)(pTVar16 + 0x20) = uVar10;
      *(undefined8 *)(pTVar16 + 0x28) = uVar11;
      *(undefined8 *)(pTVar16 + 0x30) = uVar12;
      lVar18 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar18 + 0x50) = pTVar16;
      *(long *)(pTVar15 + lVar18 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar15 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar18 + 0x68) = lVar4;
      *(ulong *)(pTVar15 + lVar18 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar16 = local_48 + 8;
            *(long *)pTVar16 = *(long *)pTVar16 + -1;
            UNLOCK();
            if (*(long *)pTVar16 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar15 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
      }
      else {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#1}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long lVar8;
  ulong uVar9;
  undefined8 *puVar10;
  TaskScheduler *pTVar11;
  undefined8 *puVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 uStack_78;
  TaskGroupContext *pTStack_70;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  TaskGroupContext *pTStack_40;
  long local_30;
  
  uVar13 = *(ulong *)(this + 8);
  uVar9 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar13 - uVar9) {
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uVar13 = uVar13 + uVar9 >> 1;
    local_68 = uVar13;
    uStack_60 = uVar9;
    local_58 = *(ulong *)(this + 0x18);
    pTStack_40 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_68,pTVar3,uVar13 - uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_00118a9e;
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar2) goto LAB_00118a9e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar2);
      *puVar10 = &PTR_execute_00143a58;
      puVar10[1] = local_68;
      puVar10[2] = uStack_60;
      puVar10[3] = local_58;
      puVar10[4] = uStack_50;
      puVar10[5] = uStack_48;
      puVar10[6] = pTStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar13 - uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(long *)(this + 8);
    local_88 = *(undefined8 *)(this + 0x18);
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_80 = *(undefined8 *)(this + 0x20);
    uStack_78 = *(undefined8 *)(this + 0x28);
    uVar9 = local_98 - uVar13;
    uStack_90 = uVar13;
    pTStack_70 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_98,pTVar3,uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_00118a9e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar13 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar13) goto LAB_00118a9e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar13;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar13);
      *puVar10 = &PTR_execute_00143a58;
      puVar10[1] = local_98;
      puVar10[2] = uStack_90;
      puVar10[3] = local_88;
      puVar10[4] = uStack_80;
      puVar10[5] = uStack_78;
      puVar10[6] = pTStack_70;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar9 < uVar13) {
      do {
        lVar7 = **(long **)(this + 0x28) + uVar9;
        puVar12 = (undefined8 *)(uVar9 * 0x40 + **(long **)(this + 0x20));
        uVar9 = uVar9 + 1;
        uVar6 = puVar12[1];
        puVar10 = (undefined8 *)(**(long **)(this + 0x20) + lVar7 * 0x40);
        *puVar10 = *puVar12;
        puVar10[1] = uVar6;
        uVar6 = puVar12[3];
        puVar10[2] = puVar12[2];
        puVar10[3] = uVar6;
        puVar10[4] = puVar12[4];
        *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar12 + 5);
      } while (uVar13 != uVar9);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00118e85) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar19 = pTVar15 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar16 = pTVar17 + 0x80;
    *(undefined4 *)(pTVar17 + 0x40) = 0;
    pTVar17 = pTVar16;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar16 = pTVar15 + uVar3 + 0x40088;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar16 = &PTR_execute_00143a70;
      *(undefined8 *)(pTVar16 + 8) = uVar7;
      *(undefined8 *)(pTVar16 + 0x10) = uVar8;
      *(undefined8 *)(pTVar16 + 0x18) = uVar9;
      *(undefined8 *)(pTVar16 + 0x20) = uVar10;
      *(undefined8 *)(pTVar16 + 0x28) = uVar11;
      *(undefined8 *)(pTVar16 + 0x30) = uVar12;
      lVar18 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar18 + 0x50) = pTVar16;
      *(long *)(pTVar15 + lVar18 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar15 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar18 + 0x68) = lVar4;
      *(ulong *)(pTVar15 + lVar18 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar16 = local_48 + 8;
            *(long *)pTVar16 = *(long *)pTVar16 + -1;
            UNLOCK();
            if (*(long *)pTVar16 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar15 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
      }
      else {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long>
   const&)#2}>(unsigned long, unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long lVar8;
  ulong uVar9;
  undefined8 *puVar10;
  TaskScheduler *pTVar11;
  undefined8 *puVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 uStack_78;
  TaskGroupContext *pTStack_70;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  TaskGroupContext *pTStack_40;
  long local_30;
  
  uVar13 = *(ulong *)(this + 8);
  uVar9 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar13 - uVar9) {
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uVar13 = uVar13 + uVar9 >> 1;
    local_68 = uVar13;
    uStack_60 = uVar9;
    local_58 = *(ulong *)(this + 0x18);
    pTStack_40 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_68,pTVar3,uVar13 - uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_0011939e;
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0011939e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar2);
      *puVar10 = &PTR_execute_00143a70;
      puVar10[1] = local_68;
      puVar10[2] = uStack_60;
      puVar10[3] = local_58;
      puVar10[4] = uStack_50;
      puVar10[5] = uStack_48;
      puVar10[6] = pTStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar13 - uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(long *)(this + 8);
    local_88 = *(undefined8 *)(this + 0x18);
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_80 = *(undefined8 *)(this + 0x20);
    uStack_78 = *(undefined8 *)(this + 0x28);
    uVar9 = local_98 - uVar13;
    uStack_90 = uVar13;
    pTStack_70 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_98,pTVar3,uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_0011939e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar13 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar13) goto LAB_0011939e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar13;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar13);
      *puVar10 = &PTR_execute_00143a70;
      puVar10[1] = local_98;
      puVar10[2] = uStack_90;
      puVar10[3] = local_88;
      puVar10[4] = uStack_80;
      puVar10[5] = uStack_78;
      puVar10[6] = pTStack_70;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar9 < uVar13) {
      do {
        lVar7 = **(long **)(this + 0x28) + uVar9;
        puVar12 = (undefined8 *)(uVar9 * 0x40 + **(long **)(this + 0x20));
        uVar9 = uVar9 + 1;
        uVar6 = puVar12[1];
        puVar10 = (undefined8 *)(**(long **)(this + 0x20) + lVar7 * 0x40);
        *puVar10 = *puVar12;
        puVar10[1] = uVar6;
        uVar6 = puVar12[3];
        puVar10[2] = puVar12[2];
        puVar10[3] = uVar6;
        puVar10[4] = puVar12[4];
        *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar12 + 5);
      } while (uVar13 != uVar9);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(unsigned
   long)#8}>::createLargeLeaf(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > const&, embree::FastAllocator::CachedAllocator) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(unsigned_long)#8}>
::createLargeLeaf(ulong *param_1,ulong *param_2)

{
  int *piVar1;
  long *plVar2;
  long lVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined1 (*pauVar6) [16];
  undefined1 (*pauVar7) [16];
  ulong uVar8;
  long lVar9;
  TaskGroupContext *pTVar10;
  TaskScheduler *pTVar11;
  undefined8 uVar12;
  undefined8 *puVar13;
  ulong uVar14;
  ulong uVar15;
  ulong uVar16;
  undefined4 unaff_EBX;
  ulong *puVar17;
  undefined8 unaff_RBP;
  ulong uVar18;
  ulong uVar19;
  ulong uVar20;
  undefined8 *puVar21;
  long lVar22;
  undefined8 *puVar23;
  long lVar24;
  undefined4 unaff_R12D;
  ulong uVar25;
  long lVar26;
  ulong uVar27;
  long in_FS_OFFSET;
  byte bVar28;
  float fVar29;
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  ulong local_978;
  ulong local_938;
  ulong local_848;
  ulong local_840;
  ulong local_838;
  ulong local_830;
  ulong local_828;
  ulong uStack_820;
  undefined8 local_818;
  long *plStack_810;
  ulong *local_808;
  TaskGroupContext *pTStack_800;
  ulong local_7f8;
  ulong uStack_7f0;
  undefined8 local_7e8;
  long *plStack_7e0;
  ulong *local_7d8;
  TaskGroupContext *apTStack_7d0 [17];
  ulong local_748;
  bool local_740 [8];
  undefined8 local_738;
  ulong uStack_730;
  undefined8 local_728;
  ulong auStack_720 [4];
  ulong uStack_700;
  ulong local_6f8;
  ulong uStack_6f0;
  ulong local_6e8;
  undefined1 local_6d0;
  undefined4 local_6c8;
  undefined4 uStack_6c4;
  undefined4 uStack_6c0;
  undefined4 local_6b8;
  undefined4 uStack_6b4;
  undefined4 uStack_6b0;
  long local_688;
  long local_680;
  undefined1 local_660;
  undefined4 local_658;
  undefined4 local_654;
  undefined4 local_650;
  undefined4 local_648;
  undefined4 local_644;
  undefined4 local_640;
  long local_618;
  long local_610;
  undefined1 local_5f0;
  undefined4 local_5e8;
  undefined4 local_5e4;
  undefined4 local_5e0;
  undefined4 local_5d8;
  undefined4 local_5d4;
  undefined4 local_5d0;
  long local_5a8;
  long local_5a0;
  undefined1 local_580;
  undefined4 local_578;
  undefined4 local_574;
  undefined4 local_570;
  undefined4 local_568;
  undefined4 local_564;
  undefined4 local_560;
  long local_538;
  long local_530;
  undefined1 local_510;
  undefined4 local_508;
  undefined4 local_504;
  undefined4 local_500;
  undefined4 local_4f8;
  undefined4 local_4f4;
  undefined4 local_4f0;
  long local_4c8;
  long local_4c0;
  undefined1 local_4a0;
  undefined4 local_498;
  undefined4 local_494;
  undefined4 local_490;
  undefined4 local_488;
  undefined4 local_484;
  undefined4 local_480;
  long local_458;
  long local_450;
  undefined1 local_430;
  undefined4 local_428;
  undefined4 local_424;
  undefined4 local_420;
  undefined4 local_418;
  undefined4 local_414;
  undefined4 local_410;
  long local_3e8;
  long local_3e0;
  undefined1 local_3c0;
  undefined4 local_3b8;
  undefined4 local_3b4;
  undefined4 local_3b0;
  undefined4 local_3a8;
  undefined4 local_3a4;
  undefined4 local_3a0;
  long local_378;
  long local_370;
  undefined1 local_350;
  undefined4 local_348;
  undefined4 local_344;
  undefined4 local_340;
  undefined4 local_338;
  undefined4 local_334;
  undefined4 local_330;
  long local_308;
  long local_300;
  undefined1 local_2e0;
  undefined4 local_2d8;
  undefined4 local_2d4;
  undefined4 local_2d0;
  undefined4 local_2c8;
  undefined4 local_2c4;
  undefined4 local_2c0;
  long local_298;
  long local_290;
  undefined1 local_270;
  undefined4 local_268;
  undefined4 local_264;
  undefined4 local_260;
  undefined4 local_258;
  undefined4 local_254;
  undefined4 local_250;
  long local_228;
  long local_220;
  undefined1 local_200;
  undefined4 local_1f8;
  undefined4 local_1f4;
  undefined4 local_1f0;
  undefined4 local_1e8;
  undefined4 local_1e4;
  undefined4 local_1e0;
  long local_1b8;
  long local_1b0;
  undefined1 local_190;
  undefined4 local_188;
  undefined4 local_184;
  undefined4 local_180;
  undefined4 local_178;
  undefined4 local_174;
  undefined4 local_170;
  long local_148;
  long local_140;
  undefined1 local_120;
  undefined4 local_118;
  undefined4 local_114;
  undefined4 local_110;
  undefined4 local_108;
  undefined4 local_104;
  undefined4 local_100;
  long local_d8;
  long local_d0;
  undefined1 local_b0;
  undefined4 local_a8;
  undefined4 local_a4;
  undefined4 local_a0;
  undefined4 local_98;
  undefined4 local_94;
  undefined4 local_90;
  long local_68;
  long local_60;
  long local_40;
  undefined4 local_38;
  undefined4 local_34;
  
  uVar5 = _LC8;
  uVar4 = _LC6;
  bVar28 = 0;
  uVar19 = *param_2;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1[1] < uVar19) {
LAB_0011b2f1:
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar16 = param_2[0xb];
  if (uVar16 - param_2[10] <= param_1[4]) {
    puVar13 = *(undefined8 **)(param_2[10] * 0x40 + param_1[8] + 0x20);
    goto LAB_0011941d;
  }
  local_740[0] = SUB81(param_2[1],0);
  local_728 = param_2[4];
  auStack_720[0] = param_2[5];
  local_738 = param_2[2];
  uStack_730 = param_2[3];
  auStack_720[1] = param_2[6];
  auStack_720[2] = param_2[7];
  local_6e8 = param_2[0xc];
  local_6f8 = param_2[10];
  uStack_6f0 = param_2[0xb];
  auStack_720[3] = param_2[8];
  uStack_700 = param_2[9];
  local_748 = uVar19;
  if (param_1[4] < uStack_6f0 - local_6f8) {
    lVar26 = 0;
    uVar25 = 1;
    puVar17 = &local_748;
    do {
      plVar2 = (long *)param_1[9];
      uVar16 = auStack_720[lVar26 * 0xe + 5];
      uVar15 = auStack_720[lVar26 * 0xe + 6];
      uVar18 = uVar16 + uVar15 >> 1;
      if (uVar16 < uVar18) {
        auVar39._4_4_ = uVar5;
        auVar39._0_4_ = uVar5;
        auVar39._8_4_ = uVar5;
        auVar39._12_4_ = uVar5;
        auVar36._4_4_ = uVar4;
        auVar36._0_4_ = uVar4;
        auVar36._8_4_ = uVar4;
        auVar36._12_4_ = uVar4;
        auVar37._4_4_ = uVar5;
        auVar37._0_4_ = uVar5;
        auVar37._8_4_ = uVar5;
        auVar37._12_4_ = uVar5;
        auVar38._4_4_ = uVar4;
        auVar38._0_4_ = uVar4;
        auVar38._8_4_ = uVar4;
        auVar38._12_4_ = uVar4;
        pauVar7 = (undefined1 (*) [16])(uVar16 * 0x40 + *plVar2);
        do {
          auVar30._0_4_ = *(float *)pauVar7[1] + *(float *)*pauVar7;
          auVar30._4_4_ = *(float *)(pauVar7[1] + 4) + *(float *)(*pauVar7 + 4);
          auVar30._8_4_ = *(float *)(pauVar7[1] + 8) + *(float *)(*pauVar7 + 8);
          auVar30._12_4_ = *(float *)(pauVar7[1] + 0xc) + *(float *)(*pauVar7 + 0xc);
          pauVar6 = pauVar7 + 4;
          auVar39 = minps(auVar39,*pauVar7);
          auVar38 = maxps(auVar38,pauVar7[1]);
          auVar37 = minps(auVar37,auVar30);
          auVar36 = maxps(auVar36,auVar30);
          pauVar7 = pauVar6;
        } while (pauVar6 != (undefined1 (*) [16])(*plVar2 + uVar18 * 0x40));
        lVar22 = uVar18 - uVar16;
      }
      else {
        auVar39._4_4_ = uVar5;
        auVar39._0_4_ = uVar5;
        auVar39._8_4_ = uVar5;
        auVar39._12_4_ = uVar5;
        auVar36._4_4_ = uVar4;
        auVar36._0_4_ = uVar4;
        auVar36._8_4_ = uVar4;
        auVar36._12_4_ = uVar4;
        auVar37._4_4_ = uVar5;
        auVar37._0_4_ = uVar5;
        auVar37._8_4_ = uVar5;
        auVar37._12_4_ = uVar5;
        lVar22 = 0;
        auVar38._4_4_ = uVar4;
        auVar38._0_4_ = uVar4;
        auVar38._8_4_ = uVar4;
        auVar38._12_4_ = uVar4;
      }
      if (uVar18 < uVar15) {
        auVar34._4_4_ = uVar4;
        auVar34._0_4_ = uVar4;
        auVar34._8_4_ = uVar4;
        auVar34._12_4_ = uVar4;
        auVar33._4_4_ = uVar5;
        auVar33._0_4_ = uVar5;
        auVar33._8_4_ = uVar5;
        auVar33._12_4_ = uVar5;
        auVar32._4_4_ = uVar4;
        auVar32._0_4_ = uVar4;
        auVar32._8_4_ = uVar4;
        auVar32._12_4_ = uVar4;
        auVar35._4_4_ = uVar5;
        auVar35._0_4_ = uVar5;
        auVar35._8_4_ = uVar5;
        auVar35._12_4_ = uVar5;
        pauVar7 = (undefined1 (*) [16])(uVar18 * 0x40 + *plVar2);
        do {
          auVar31._0_4_ = *(float *)pauVar7[1] + *(float *)*pauVar7;
          auVar31._4_4_ = *(float *)(pauVar7[1] + 4) + *(float *)(*pauVar7 + 4);
          auVar31._8_4_ = *(float *)(pauVar7[1] + 8) + *(float *)(*pauVar7 + 8);
          auVar31._12_4_ = *(float *)(pauVar7[1] + 0xc) + *(float *)(*pauVar7 + 0xc);
          pauVar6 = pauVar7 + 4;
          auVar35 = minps(auVar35,*pauVar7);
          auVar34 = maxps(auVar34,pauVar7[1]);
          auVar33 = minps(auVar33,auVar31);
          auVar32 = maxps(auVar32,auVar31);
          pauVar7 = pauVar6;
        } while (pauVar6 != (undefined1 (*) [16])(*plVar2 + uVar15 * 0x40));
        lVar24 = uVar15 - uVar18;
      }
      else {
        auVar34._4_4_ = uVar4;
        auVar34._0_4_ = uVar4;
        auVar34._8_4_ = uVar4;
        auVar34._12_4_ = uVar4;
        auVar33._4_4_ = uVar5;
        auVar33._0_4_ = uVar5;
        auVar33._8_4_ = uVar5;
        auVar33._12_4_ = uVar5;
        auVar32._4_4_ = uVar4;
        auVar32._0_4_ = uVar4;
        auVar32._8_4_ = uVar4;
        auVar32._12_4_ = uVar4;
        lVar24 = 0;
        auVar35._4_4_ = uVar5;
        auVar35._0_4_ = uVar5;
        auVar35._8_4_ = uVar5;
        auVar35._12_4_ = uVar5;
      }
      local_978 = auStack_720[lVar26 * 0xe + 7];
      uVar8 = local_978;
      uVar20 = uVar18;
      local_938 = uVar18;
      if (uVar15 != local_978) {
        uVar8 = local_978 - uVar15;
        fVar29 = ((float)lVar22 / (float)(ulong)(lVar24 + lVar22)) * (float)uVar8;
        if ((float)((uint)fVar29 & _LC23) < _LC22) {
          fVar29 = (float)((uint)(float)(int)fVar29 | ~_LC23 & (uint)fVar29);
        }
        if (__LC24 <= fVar29) {
          uVar27 = (long)(fVar29 - __LC24) ^ 0x8000000000000000;
        }
        else {
          uVar27 = (ulong)fVar29;
        }
        if (uVar8 < uVar27) {
          uVar27 = uVar8;
        }
        local_978 = local_978 - uVar27;
        local_938 = uVar18 + uVar27;
        uVar14 = uVar15 - uVar18;
        uVar8 = uVar15;
        local_848 = uVar27;
        local_840 = uVar14;
        if (uVar27 != 0) {
          if (uVar27 < uVar14) {
            local_808 = &local_840;
            local_838 = 0;
            local_818 = 0x40;
            local_828 = local_938;
            uStack_820 = uVar18;
            plStack_810 = plVar2;
            pTStack_800 = (TaskGroupContext *)&local_838;
            lVar22 = embree::TaskScheduler::thread();
            if (lVar22 == 0) {
              pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
              TaskScheduler::
              spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                        (pTVar11,(_lambda___1_ *)&local_828,(TaskGroupContext *)&local_838,uVar27,
                         true);
            }
            else {
              if (0xfff < *(ulong *)(lVar22 + 0x40080)) goto LAB_0011b2f1;
              lVar24 = *(long *)(lVar22 + 0xc00c0);
              uVar8 = lVar24 + 0x38 + (ulong)(-(int)lVar24 & 0x3f);
              if (0x80000 < uVar8) goto LAB_0011b2f1;
              puVar13 = (undefined8 *)(lVar22 + 0x40088 + uVar8);
              *(ulong *)(lVar22 + 0xc00c0) = uVar8;
              puVar13[1] = local_828;
              puVar13[2] = uStack_820;
              *puVar13 = &PTR_execute_00143a58;
              puVar13[3] = local_818;
              puVar13[4] = plStack_810;
              puVar13[5] = local_808;
              puVar13[6] = pTStack_800;
              lVar9 = *(long *)(lVar22 + 0x40080) * 0x40;
              piVar1 = (int *)(lVar22 + 0x40 + lVar9);
              lVar3 = *(long *)(lVar22 + 0xc0100);
              *(undefined4 *)(lVar22 + 0x44 + lVar9) = 1;
              *(undefined1 *)(lVar22 + 0x48 + lVar9) = 1;
              lVar9 = lVar9 + lVar22;
              *(undefined8 **)(lVar9 + 0x50) = puVar13;
              *(long *)(lVar9 + 0x58) = lVar3;
              *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_838;
              *(long *)(lVar9 + 0x68) = lVar24;
              *(ulong *)(lVar9 + 0x70) = uVar27;
              if (lVar3 != 0) {
                LOCK();
                *(int *)(lVar3 + 4) = *(int *)(lVar3 + 4) + 1;
                UNLOCK();
              }
              LOCK();
              if (*piVar1 == 0) {
                *piVar1 = 1;
              }
              UNLOCK();
              LOCK();
              *(long *)(lVar22 + 0x40080) = *(long *)(lVar22 + 0x40080) + 1;
              UNLOCK();
              if (*(long *)(lVar22 + 0x40080) - 1U <= *(ulong *)(lVar22 + 0x40040)) {
                LOCK();
                *(long *)(lVar22 + 0x40040) = *(long *)(lVar22 + 0x40080) + -1;
                UNLOCK();
              }
            }
            embree::TaskScheduler::wait();
            uVar8 = local_838;
          }
          else {
            local_7d8 = &local_848;
            local_830 = 0;
            local_7e8 = 0x40;
            local_7f8 = uVar15;
            uStack_7f0 = uVar18;
            plStack_7e0 = plVar2;
            apTStack_7d0[0] = (TaskGroupContext *)&local_830;
            lVar22 = embree::TaskScheduler::thread();
            if (lVar22 == 0) {
              pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
              TaskScheduler::
              spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                        (pTVar11,(_lambda___1_ *)&local_7f8,(TaskGroupContext *)&local_830,uVar14,
                         true);
            }
            else {
              if (0xfff < *(ulong *)(lVar22 + 0x40080)) goto LAB_0011b2f1;
              lVar24 = *(long *)(lVar22 + 0xc00c0);
              uVar8 = lVar24 + 0x38 + (ulong)(-(int)lVar24 & 0x3f);
              if (0x80000 < uVar8) goto LAB_0011b2f1;
              puVar13 = (undefined8 *)(lVar22 + 0x40088 + uVar8);
              *(ulong *)(lVar22 + 0xc00c0) = uVar8;
              *puVar13 = &PTR_execute_00143a70;
              puVar13[1] = local_7f8;
              puVar13[2] = uStack_7f0;
              puVar13[3] = local_7e8;
              puVar13[4] = plStack_7e0;
              puVar13[5] = local_7d8;
              puVar13[6] = apTStack_7d0[0];
              lVar9 = *(long *)(lVar22 + 0x40080) * 0x40;
              piVar1 = (int *)(lVar22 + 0x40 + lVar9);
              lVar3 = *(long *)(lVar22 + 0xc0100);
              *(undefined4 *)(lVar22 + 0x44 + lVar9) = 1;
              *(undefined1 *)(lVar22 + 0x48 + lVar9) = 1;
              lVar9 = lVar9 + lVar22;
              *(undefined8 **)(lVar9 + 0x50) = puVar13;
              *(long *)(lVar9 + 0x58) = lVar3;
              *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_830;
              *(long *)(lVar9 + 0x68) = lVar24;
              *(ulong *)(lVar9 + 0x70) = uVar14;
              if (lVar3 != 0) {
                LOCK();
                *(int *)(lVar3 + 4) = *(int *)(lVar3 + 4) + 1;
                UNLOCK();
              }
              LOCK();
              if (*piVar1 == 0) {
                *piVar1 = 1;
              }
              UNLOCK();
              LOCK();
              *(long *)(lVar22 + 0x40080) = *(long *)(lVar22 + 0x40080) + 1;
              UNLOCK();
              if (*(long *)(lVar22 + 0x40080) - 1U <= *(ulong *)(lVar22 + 0x40040)) {
                LOCK();
                *(long *)(lVar22 + 0x40040) = *(long *)(lVar22 + 0x40080) + -1;
                UNLOCK();
              }
            }
            embree::TaskScheduler::wait();
            uVar8 = local_830;
          }
          if (uVar8 != 0) {
            local_7f8 = uVar8;
            std::__exception_ptr::exception_ptr::_M_addref();
            std::rethrow_exception(&local_7f8);
            goto LAB_0011b2ec;
          }
          local_978 = local_978 + local_848;
          uVar8 = uVar15 + local_848;
          uVar20 = uVar18 + local_848;
        }
      }
      uVar25 = uVar25 + 1;
      *(ulong *)(local_740 + lVar26 * 0x70 + -8) = *puVar17;
      local_740[lVar26 * 0x70] = SUB81(puVar17[1],0);
      uVar15 = puVar17[3];
      (&local_738)[lVar26 * 0xe] = puVar17[2];
      (&uStack_730)[lVar26 * 0xe] = uVar15;
      uVar15 = puVar17[5];
      (&local_728)[lVar26 * 0xe] = puVar17[4];
      auStack_720[lVar26 * 0xe] = uVar15;
      uVar15 = puVar17[7];
      auStack_720[lVar26 * 0xe + 1] = puVar17[6];
      auStack_720[lVar26 * 0xe + 2] = uVar15;
      uVar15 = puVar17[9];
      auStack_720[lVar26 * 0xe + 3] = puVar17[8];
      auStack_720[lVar26 * 0xe + 4] = uVar15;
      uVar15 = puVar17[0xb];
      auStack_720[lVar26 * 0xe + 5] = puVar17[10];
      auStack_720[lVar26 * 0xe + 6] = uVar15;
      auStack_720[lVar26 * 0xe + 7] = puVar17[0xc];
      *puVar17 = uVar19 + 1;
      puVar17[0xc] = local_938;
      *(undefined1 *)(puVar17 + 1) = 0;
      *(undefined1 (*) [16])(puVar17 + 2) = auVar39;
      *(undefined1 (*) [16])(puVar17 + 4) = auVar38;
      *(undefined1 (*) [16])(puVar17 + 6) = auVar37;
      *(undefined1 (*) [16])(puVar17 + 8) = auVar36;
      puVar17[10] = uVar16;
      puVar17[0xb] = uVar18;
      puVar17[0xe] = uVar19 + 1;
      *(undefined1 *)(puVar17 + 0xf) = 0;
      *(undefined1 (*) [16])(puVar17 + 0x10) = auVar35;
      *(undefined1 (*) [16])(puVar17 + 0x12) = auVar34;
      *(undefined1 (*) [16])(puVar17 + 0x14) = auVar33;
      *(undefined1 (*) [16])(puVar17 + 0x16) = auVar32;
      puVar17[0x18] = uVar20;
      puVar17[0x19] = uVar8;
      puVar17[0x1a] = local_978;
      if (*param_1 <= uVar25) {
        uVar19 = param_1[7];
        if (param_2[0xb] - param_2[10] <= uVar19) goto LAB_0011a32c;
        local_740[0] = uStack_6f0 - local_6f8 <= uVar19;
        goto LAB_0011acdf;
      }
      uVar19 = param_1[4];
      lVar26 = 0;
      uVar16 = uStack_6f0 - local_6f8;
      if (uVar16 <= uVar19) {
        uVar16 = 0;
        lVar26 = -1;
      }
      uVar15 = uVar16;
      if (uVar16 <= uVar19) {
        uVar15 = uVar19;
      }
      if (uVar15 < (ulong)(local_680 - local_688)) {
        lVar26 = 1;
        uVar16 = local_680 - local_688;
        if (uVar25 != 2) {
LAB_00119b1a:
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_610 - local_618)) {
            lVar26 = 2;
            uVar16 = local_610 - local_618;
            if (uVar25 == 3) goto LAB_00119dd0;
          }
          else if (uVar25 == 3) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_5a0 - local_5a8)) {
            lVar26 = 3;
            uVar16 = local_5a0 - local_5a8;
            if (uVar25 == 4) goto LAB_00119dd0;
          }
          else if (uVar25 == 4) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_530 - local_538)) {
            lVar26 = 4;
            uVar16 = local_530 - local_538;
            if (uVar25 == 5) goto LAB_00119dd0;
          }
          else if (uVar25 == 5) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_4c0 - local_4c8)) {
            lVar26 = 5;
            uVar16 = local_4c0 - local_4c8;
            if (uVar25 == 6) goto LAB_00119dd0;
          }
          else if (uVar25 == 6) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_450 - local_458)) {
            lVar26 = 6;
            uVar16 = local_450 - local_458;
            if (uVar25 == 7) goto LAB_00119dd0;
          }
          else if (uVar25 == 7) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_3e0 - local_3e8)) {
            lVar26 = 7;
            uVar16 = local_3e0 - local_3e8;
            if (uVar25 == 8) goto LAB_00119dd0;
          }
          else if (uVar25 == 8) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_370 - local_378)) {
            lVar26 = 8;
            uVar16 = local_370 - local_378;
            if (uVar25 == 9) goto LAB_00119dd0;
          }
          else if (uVar25 == 9) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_300 - local_308)) {
            lVar26 = 9;
            uVar16 = local_300 - local_308;
            if (uVar25 == 10) goto LAB_00119dd0;
          }
          else if (uVar25 == 10) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_290 - local_298)) {
            lVar26 = 10;
            uVar16 = local_290 - local_298;
            if (uVar25 == 0xb) goto LAB_00119dd0;
          }
          else if (uVar25 == 0xb) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_220 - local_228)) {
            lVar26 = 0xb;
            uVar16 = local_220 - local_228;
            if (uVar25 == 0xc) goto LAB_00119dd0;
          }
          else if (uVar25 == 0xc) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_1b0 - local_1b8)) {
            lVar26 = 0xc;
            uVar16 = local_1b0 - local_1b8;
            if (uVar25 == 0xd) goto LAB_00119dd0;
          }
          else if (uVar25 == 0xd) goto LAB_0011a1c0;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_140 - local_148)) {
            lVar26 = 0xd;
            uVar16 = local_140 - local_148;
            if (uVar25 == 0xe) goto LAB_00119dd0;
          }
          else if (uVar25 == 0xe) goto LAB_0011a1c0;
          uVar15 = local_d0 - local_d8;
          if (uVar16 <= uVar19) {
            uVar16 = uVar19;
          }
          if (uVar16 < uVar15) {
            if (uVar25 == 0x10) {
              if (uVar15 <= uVar19) {
                uVar15 = uVar19;
              }
              lVar26 = (ulong)(uVar15 < (ulong)(local_60 - local_68)) + 0xe;
            }
            else {
              uVar25 = 0xf;
              lVar26 = 0xe;
            }
          }
          else {
            if ((uVar25 != 0x10) || ((ulong)(local_60 - local_68) <= uVar16)) goto LAB_0011a1c0;
            lVar26 = 0xf;
          }
        }
      }
      else {
        if (uVar25 != 2) goto LAB_00119b1a;
LAB_0011a1c0:
        if (lVar26 == -1) goto code_r0x0011a1ca;
      }
LAB_00119dd0:
      uVar19 = *param_2;
      puVar17 = puVar17 + 0xe;
    } while( true );
  }
  uVar25 = 1;
LAB_0011aca9:
  uVar19 = param_1[7];
  if ((uVar19 < uVar16 - param_2[10]) &&
     (local_740[0] = uStack_6f0 - local_6f8 <= uVar19, uVar25 != 1)) {
LAB_0011acdf:
    local_6d0 = (ulong)(local_680 - local_688) <= uVar19;
    if (((uVar25 != 2) &&
        (((local_660 = (ulong)(local_610 - local_618) <= uVar19, uVar25 != 3 &&
          (local_5f0 = (ulong)(local_5a0 - local_5a8) <= uVar19, uVar25 != 4)) &&
         (local_580 = (ulong)(local_530 - local_538) <= uVar19, uVar25 != 5)))) &&
       ((((local_510 = (ulong)(local_4c0 - local_4c8) <= uVar19, uVar25 != 6 &&
          (local_4a0 = (ulong)(local_450 - local_458) <= uVar19, uVar25 != 7)) &&
         (local_430 = (ulong)(local_3e0 - local_3e8) <= uVar19, uVar25 != 8)) &&
        (((local_3c0 = (ulong)(local_370 - local_378) <= uVar19, uVar25 != 9 &&
          (local_350 = (ulong)(local_300 - local_308) <= uVar19, uVar25 != 10)) &&
         (((local_2e0 = (ulong)(local_290 - local_298) <= uVar19, uVar25 != 0xb &&
           (((local_270 = (ulong)(local_220 - local_228) <= uVar19, uVar25 != 0xc &&
             (local_200 = (ulong)(local_1b0 - local_1b8) <= uVar19, uVar25 != 0xd)) &&
            (local_190 = (ulong)(local_140 - local_148) <= uVar19, uVar25 != 0xe)))) &&
          (local_120 = (ulong)(local_d0 - local_d8) <= uVar19, uVar25 != 0xf)))))))) {
      local_b0 = (ulong)(local_60 - local_68) <= uVar19;
    }
  }
LAB_0011a32c:
  local_828 = 0x80;
  uVar19 = *in_stack_00000010;
  if (in_stack_00000008 != *(FastAllocator **)(uVar19 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar19 + 8) != 0) {
      LOCK();
      plVar2 = (long *)(*(long *)(uVar19 + 8) + 0x118);
      *plVar2 = *plVar2 + *(long *)(uVar19 + 0xa8) + *(long *)(uVar19 + 0x68);
      UNLOCK();
      LOCK();
      plVar2 = (long *)(*(long *)(uVar19 + 8) + 0x120);
      *plVar2 = *plVar2 + (((*(long *)(uVar19 + 0x98) + *(long *)(uVar19 + 0x58)) -
                           *(long *)(uVar19 + 0x50)) - *(long *)(uVar19 + 0x90));
      UNLOCK();
      LOCK();
      plVar2 = (long *)(*(long *)(uVar19 + 8) + 0x128);
      *plVar2 = *plVar2 + *(long *)(uVar19 + 0xb0) + *(long *)(uVar19 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar19 + 0x48) = 0;
    *(undefined8 *)(uVar19 + 0x58) = 0;
    *(undefined8 *)(uVar19 + 0x50) = 0;
    *(undefined8 *)(uVar19 + 0x68) = 0;
    *(undefined8 *)(uVar19 + 0x70) = 0;
    *(undefined8 *)(uVar19 + 0x60) = 0;
    if (in_stack_00000008 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar19 + 0x88) = 0;
      uVar12 = 0;
      *(undefined8 *)(uVar19 + 0x98) = 0;
      *(undefined8 *)(uVar19 + 0x90) = 0;
      *(undefined8 *)(uVar19 + 0xa8) = 0;
      *(undefined8 *)(uVar19 + 0xb0) = 0;
    }
    else {
      uVar12 = *(undefined8 *)(in_stack_00000008 + 0x10);
      *(undefined8 *)(uVar19 + 0x88) = 0;
      *(undefined8 *)(uVar19 + 0x98) = 0;
      *(undefined8 *)(uVar19 + 0x60) = uVar12;
      *(undefined8 *)(uVar19 + 0x90) = 0;
      *(undefined8 *)(uVar19 + 0xa8) = 0;
      *(undefined8 *)(uVar19 + 0xb0) = 0;
      *(undefined8 *)(uVar19 + 0xa0) = 0;
      uVar12 = *(undefined8 *)(in_stack_00000008 + 0x10);
    }
    *(undefined8 *)(uVar19 + 0xa0) = uVar12;
    LOCK();
    *(FastAllocator **)(uVar19 + 8) = in_stack_00000008;
    UNLOCK();
    local_7f8 = uVar19;
    embree::MutexSys::lock();
    puVar17 = *(ulong **)(in_stack_00000008 + 0x138);
    if (puVar17 == *(ulong **)(in_stack_00000008 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(in_stack_00000008 + 0x130),puVar17,&local_7f8);
    }
    else {
      *puVar17 = uVar19;
      *(long *)(in_stack_00000008 + 0x138) = *(long *)(in_stack_00000008 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar16 = in_stack_00000010[2];
  in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
  uVar15 = (ulong)(-(int)uVar16 & 0xf);
  uVar19 = uVar16 + 0x80 + uVar15;
  in_stack_00000010[2] = uVar19;
  if (in_stack_00000010[3] < uVar19) {
    in_stack_00000010[2] = uVar16;
    if (in_stack_00000010[4] < 0x200) {
      puVar13 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_828,0x40,false);
    }
    else {
      local_7f8 = in_stack_00000010[4];
      puVar13 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_7f8,0x40,true);
      in_stack_00000010[1] = (ulong)puVar13;
      uVar19 = in_stack_00000010[2];
      in_stack_00000010[2] = 0x80;
      in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar19;
      in_stack_00000010[3] = local_7f8;
      if (local_7f8 < 0x80) {
        in_stack_00000010[2] = 0;
        local_7f8 = in_stack_00000010[4];
        puVar13 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_7f8,0x40,false);
        in_stack_00000010[1] = (ulong)puVar13;
        uVar19 = in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar19;
        in_stack_00000010[3] = local_7f8;
        if (local_7f8 < 0x80) {
          puVar13 = (undefined8 *)0x0;
          in_stack_00000010[2] = 0;
        }
      }
    }
  }
  else {
    in_stack_00000010[6] = in_stack_00000010[6] + uVar15;
    puVar13 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar19);
  }
  *(undefined4 *)(puVar13 + 4) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x24) = uVar5;
  *(undefined4 *)(puVar13 + 5) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x2c) = uVar5;
  *(undefined4 *)(puVar13 + 8) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x44) = uVar5;
  *(undefined4 *)(puVar13 + 9) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x4c) = uVar5;
  *(undefined4 *)(puVar13 + 4) = (undefined4)local_738;
  *(undefined4 *)(puVar13 + 0xc) = uVar5;
  *(undefined4 *)((long)puVar13 + 100) = uVar5;
  *(undefined4 *)(puVar13 + 0xd) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x6c) = uVar5;
  *(undefined4 *)(puVar13 + 8) = local_738._4_4_;
  *(undefined4 *)(puVar13 + 6) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x34) = uVar4;
  *(undefined4 *)(puVar13 + 7) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x3c) = uVar4;
  *(undefined4 *)(puVar13 + 0xc) = (undefined4)uStack_730;
  *(undefined4 *)(puVar13 + 10) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x54) = uVar4;
  *(undefined4 *)(puVar13 + 0xb) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x5c) = uVar4;
  *(undefined4 *)(puVar13 + 6) = (undefined4)local_728;
  *(undefined4 *)(puVar13 + 0xe) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x74) = uVar4;
  *(undefined4 *)(puVar13 + 0xf) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x7c) = uVar4;
  *(undefined4 *)(puVar13 + 10) = local_728._4_4_;
  *puVar13 = 8;
  puVar13[1] = 8;
  puVar13[2] = 8;
  puVar13[3] = 8;
  *(undefined4 *)(puVar13 + 0xe) = (undefined4)auStack_720[0];
  if (uVar25 != 1) {
    *(undefined4 *)((long)puVar13 + 0x24) = local_6c8;
    *(undefined4 *)((long)puVar13 + 0x44) = uStack_6c4;
    *(undefined4 *)((long)puVar13 + 100) = uStack_6c0;
    *(undefined4 *)((long)puVar13 + 0x34) = local_6b8;
    *(undefined4 *)((long)puVar13 + 0x54) = uStack_6b4;
    *(undefined4 *)((long)puVar13 + 0x74) = uStack_6b0;
    if (uVar25 != 2) {
      *(undefined4 *)(puVar13 + 5) = local_658;
      *(undefined4 *)(puVar13 + 9) = local_654;
      *(undefined4 *)(puVar13 + 0xd) = local_650;
      *(undefined4 *)(puVar13 + 7) = local_648;
      *(undefined4 *)(puVar13 + 0xb) = local_644;
      *(undefined4 *)(puVar13 + 0xf) = local_640;
      if (uVar25 != 3) {
        *(undefined4 *)((long)puVar13 + 0x2c) = local_5e8;
        *(undefined4 *)((long)puVar13 + 0x4c) = local_5e4;
        *(undefined4 *)((long)puVar13 + 0x6c) = local_5e0;
        *(undefined4 *)((long)puVar13 + 0x3c) = local_5d8;
        *(undefined4 *)((long)puVar13 + 0x5c) = local_5d4;
        *(undefined4 *)((long)puVar13 + 0x7c) = local_5d0;
        if (uVar25 != 4) {
          *(undefined4 *)(puVar13 + 6) = local_578;
          *(undefined4 *)(puVar13 + 10) = local_574;
          *(undefined4 *)(puVar13 + 0xe) = local_570;
          *(undefined4 *)(puVar13 + 8) = local_568;
          *(undefined4 *)(puVar13 + 0xc) = local_564;
          *(undefined4 *)(puVar13 + 0x10) = local_560;
          if (uVar25 != 5) {
            *(undefined4 *)((long)puVar13 + 0x34) = local_508;
            *(undefined4 *)((long)puVar13 + 0x54) = local_504;
            *(undefined4 *)((long)puVar13 + 0x74) = local_500;
            *(undefined4 *)((long)puVar13 + 0x44) = local_4f8;
            *(undefined4 *)((long)puVar13 + 100) = local_4f4;
            *(undefined4 *)((long)puVar13 + 0x84) = local_4f0;
            if (uVar25 != 6) {
              *(undefined4 *)(puVar13 + 7) = local_498;
              *(undefined4 *)(puVar13 + 0xb) = local_494;
              *(undefined4 *)(puVar13 + 0xf) = local_490;
              *(undefined4 *)(puVar13 + 9) = local_488;
              *(undefined4 *)(puVar13 + 0xd) = local_484;
              *(undefined4 *)(puVar13 + 0x11) = local_480;
              if (uVar25 != 7) {
                *(undefined4 *)((long)puVar13 + 0x3c) = local_428;
                *(undefined4 *)((long)puVar13 + 0x5c) = local_424;
                *(undefined4 *)((long)puVar13 + 0x7c) = local_420;
                *(undefined4 *)((long)puVar13 + 0x4c) = local_418;
                *(undefined4 *)((long)puVar13 + 0x6c) = local_414;
                *(undefined4 *)((long)puVar13 + 0x8c) = local_410;
                if (uVar25 != 8) {
                  *(undefined4 *)(puVar13 + 8) = local_3b8;
                  *(undefined4 *)(puVar13 + 0xc) = local_3b4;
                  *(undefined4 *)(puVar13 + 0x10) = local_3b0;
                  *(undefined4 *)(puVar13 + 10) = local_3a8;
                  *(undefined4 *)(puVar13 + 0xe) = local_3a4;
                  *(undefined4 *)(puVar13 + 0x12) = local_3a0;
                  if (uVar25 != 9) {
                    *(undefined4 *)((long)puVar13 + 0x44) = local_348;
                    *(undefined4 *)((long)puVar13 + 100) = local_344;
                    *(undefined4 *)((long)puVar13 + 0x84) = local_340;
                    *(undefined4 *)((long)puVar13 + 0x54) = local_338;
                    *(undefined4 *)((long)puVar13 + 0x74) = local_334;
                    *(undefined4 *)((long)puVar13 + 0x94) = local_330;
                    if (uVar25 != 10) {
                      *(undefined4 *)(puVar13 + 9) = local_2d8;
                      *(undefined4 *)(puVar13 + 0xd) = local_2d4;
                      *(undefined4 *)(puVar13 + 0x11) = local_2d0;
                      *(undefined4 *)(puVar13 + 0xb) = local_2c8;
                      *(undefined4 *)(puVar13 + 0xf) = local_2c4;
                      *(undefined4 *)(puVar13 + 0x13) = local_2c0;
                      if (uVar25 != 0xb) {
                        *(undefined4 *)((long)puVar13 + 0x4c) = local_268;
                        *(undefined4 *)((long)puVar13 + 0x6c) = local_264;
                        *(undefined4 *)((long)puVar13 + 0x8c) = local_260;
                        *(undefined4 *)((long)puVar13 + 0x5c) = local_258;
                        *(undefined4 *)((long)puVar13 + 0x7c) = local_254;
                        *(undefined4 *)((long)puVar13 + 0x9c) = local_250;
                        if (uVar25 != 0xc) {
                          *(undefined4 *)(puVar13 + 10) = local_1f8;
                          *(undefined4 *)(puVar13 + 0xe) = local_1f4;
                          *(undefined4 *)(puVar13 + 0x12) = local_1f0;
                          *(undefined4 *)(puVar13 + 0xc) = local_1e8;
                          *(undefined4 *)(puVar13 + 0x10) = local_1e4;
                          *(undefined4 *)(puVar13 + 0x14) = local_1e0;
                          if (uVar25 != 0xd) {
                            *(undefined4 *)((long)puVar13 + 0x54) = local_188;
                            *(undefined4 *)((long)puVar13 + 0x74) = local_184;
                            *(undefined4 *)((long)puVar13 + 0x94) = local_180;
                            *(undefined4 *)((long)puVar13 + 100) = local_178;
                            *(undefined4 *)((long)puVar13 + 0x84) = local_174;
                            *(undefined4 *)((long)puVar13 + 0xa4) = local_170;
                            if (uVar25 != 0xe) {
                              *(undefined4 *)(puVar13 + 0xb) = local_118;
                              *(undefined4 *)(puVar13 + 0xf) = local_114;
                              *(undefined4 *)(puVar13 + 0x13) = local_110;
                              *(undefined4 *)(puVar13 + 0xd) = local_108;
                              *(undefined4 *)(puVar13 + 0x11) = local_104;
                              *(undefined4 *)(puVar13 + 0x15) = local_100;
                              if (uVar25 != 0xf) {
                                *(undefined4 *)((long)puVar13 + 0x5c) = local_a8;
                                *(undefined4 *)((long)puVar13 + 0x7c) = local_a4;
                                *(undefined4 *)((long)puVar13 + 0x9c) = local_a0;
                                *(undefined4 *)((long)puVar13 + 0x6c) = local_98;
                                *(undefined4 *)((long)puVar13 + 0x8c) = local_94;
                                *(undefined4 *)((long)puVar13 + 0xac) = local_90;
                                if (uVar25 == 0x11) {
                                  *(undefined4 *)(puVar13 + 0x10) = local_34;
                                  *(undefined4 *)(puVar13 + 0x14) = unaff_EBX;
                                  *(undefined4 *)(puVar13 + 0xc) = local_38;
                                  *(int *)(puVar13 + 0xe) = (int)unaff_RBP;
                                  *(int *)(puVar13 + 0x12) = (int)((ulong)unaff_RBP >> 0x20);
                                  *(undefined4 *)(puVar13 + 0x16) = unaff_R12D;
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  uVar19 = 0;
  puVar17 = &local_748;
  do {
    pTVar10 = (TaskGroupContext *)createLargeLeaf(param_1,puVar17);
    apTStack_7d0[uVar19 + 1] = pTVar10;
    uVar19 = uVar19 + 1;
    puVar17 = puVar17 + 0xe;
  } while (uVar19 != uVar25);
  *puVar13 = apTStack_7d0[1];
  uVar16 = uVar19 * 8 & 0xffffffff;
  *(undefined8 *)((long)puVar13 + (uVar16 - 8)) = *(undefined8 *)((long)apTStack_7d0 + uVar16);
  lVar26 = (long)puVar13 - (long)((ulong)(puVar13 + 1) & 0xfffffffffffffff8);
  puVar21 = (undefined8 *)((long)apTStack_7d0 + (8 - lVar26));
  puVar23 = (undefined8 *)((ulong)(puVar13 + 1) & 0xfffffffffffffff8);
  for (uVar19 = (ulong)((uint)((int)(uVar19 * 8) + (int)lVar26) >> 3); uVar19 != 0;
      uVar19 = uVar19 - 1) {
    *puVar23 = *puVar21;
    puVar21 = puVar21 + (ulong)bVar28 * -2 + 1;
    puVar23 = puVar23 + (ulong)bVar28 * -2 + 1;
  }
LAB_0011941d:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar13;
  }
LAB_0011b2ec:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
code_r0x0011a1ca:
  uVar16 = param_2[0xb];
  goto LAB_0011aca9;
}



/* WARNING: Unknown calling convention -- yet parameter storage is locked */
/* void std::__heap_select<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*,
   __gnu_cxx::__ops::_Iter_less_iter>(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*, __gnu_cxx::__ops::_Iter_less_iter) */

void std::
     __heap_select<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
               (undefined4 *param_1,undefined4 *param_2,undefined4 *param_3)

{
  long lVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 *puVar5;
  long lVar6;
  long in_FS_OFFSET;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (0x40 < (long)param_2 - (long)param_1) {
    lVar6 = (((long)param_2 - (long)param_1 >> 6) + -2) / 2;
    while (__adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
                     (), lVar6 != 0) {
      lVar6 = lVar6 + -1;
    }
  }
  if (param_2 < param_3) {
    do {
      while ((float)param_1[10] <= (float)param_2[10]) {
        param_2 = param_2 + 0x10;
        if (param_3 <= param_2) goto LAB_0011b43f;
      }
      uVar2 = param_1[1];
      uVar3 = param_1[2];
      uVar4 = param_1[3];
      puVar5 = param_2 + 0x10;
      *param_2 = *param_1;
      param_2[1] = uVar2;
      param_2[2] = uVar3;
      param_2[3] = uVar4;
      uVar2 = param_1[5];
      uVar3 = param_1[6];
      uVar4 = param_1[7];
      param_2[4] = param_1[4];
      param_2[5] = uVar2;
      param_2[6] = uVar3;
      param_2[7] = uVar4;
      *(undefined8 *)(param_2 + 8) = *(undefined8 *)(param_1 + 8);
      param_2[10] = param_1[10];
      __adjust_heap<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,__gnu_cxx::__ops::_Iter_less_iter>
                ();
      param_2 = puVar5;
    } while (puVar5 < param_3);
  }
LAB_0011b43f:
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}



/* WARNING: Removing unreachable block (ram,0x0011b845) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar19 = pTVar15 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar16 = pTVar17 + 0x80;
    *(undefined4 *)(pTVar17 + 0x40) = 0;
    pTVar17 = pTVar16;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar16 = pTVar15 + uVar3 + 0x40088;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar16 = &PTR_execute_00143a88;
      *(undefined8 *)(pTVar16 + 8) = uVar7;
      *(undefined8 *)(pTVar16 + 0x10) = uVar8;
      *(undefined8 *)(pTVar16 + 0x18) = uVar9;
      *(undefined8 *)(pTVar16 + 0x20) = uVar10;
      *(undefined8 *)(pTVar16 + 0x28) = uVar11;
      *(undefined8 *)(pTVar16 + 0x30) = uVar12;
      lVar18 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar18 + 0x50) = pTVar16;
      *(long *)(pTVar15 + lVar18 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar15 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar18 + 0x68) = lVar4;
      *(ulong *)(pTVar15 + lVar18 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar16 = local_48 + 8;
            *(long *)pTVar16 = *(long *)pTVar16 + -1;
            UNLOCK();
            if (*(long *)pTVar16 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar15 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
      }
      else {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long lVar8;
  ulong uVar9;
  undefined8 *puVar10;
  TaskScheduler *pTVar11;
  undefined8 *puVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 uStack_78;
  TaskGroupContext *pTStack_70;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  TaskGroupContext *pTStack_40;
  long local_30;
  
  uVar13 = *(ulong *)(this + 8);
  uVar9 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar13 - uVar9) {
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uVar13 = uVar13 + uVar9 >> 1;
    local_68 = uVar13;
    uStack_60 = uVar9;
    local_58 = *(ulong *)(this + 0x18);
    pTStack_40 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_68,pTVar3,uVar13 - uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_0011bd5e;
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0011bd5e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar2);
      *puVar10 = &PTR_execute_00143a88;
      puVar10[1] = local_68;
      puVar10[2] = uStack_60;
      puVar10[3] = local_58;
      puVar10[4] = uStack_50;
      puVar10[5] = uStack_48;
      puVar10[6] = pTStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar13 - uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(long *)(this + 8);
    local_88 = *(undefined8 *)(this + 0x18);
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_80 = *(undefined8 *)(this + 0x20);
    uStack_78 = *(undefined8 *)(this + 0x28);
    uVar9 = local_98 - uVar13;
    uStack_90 = uVar13;
    pTStack_70 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_98,pTVar3,uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_0011bd5e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar13 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar13) goto LAB_0011bd5e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar13;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar13);
      *puVar10 = &PTR_execute_00143a88;
      puVar10[1] = local_98;
      puVar10[2] = uStack_90;
      puVar10[3] = local_88;
      puVar10[4] = uStack_80;
      puVar10[5] = uStack_78;
      puVar10[6] = pTStack_70;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar9 < uVar13) {
      do {
        lVar7 = **(long **)(this + 0x28) + uVar9;
        puVar12 = (undefined8 *)(uVar9 * 0x40 + **(long **)(this + 0x20));
        uVar9 = uVar9 + 1;
        uVar6 = puVar12[1];
        puVar10 = (undefined8 *)(**(long **)(this + 0x20) + lVar7 * 0x40);
        *puVar10 = *puVar12;
        puVar10[1] = uVar6;
        uVar6 = puVar12[3];
        puVar10[2] = puVar12[2];
        puVar10[3] = uVar6;
        puVar10[4] = puVar12[4];
        *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar12 + 5);
      } while (uVar13 != uVar9);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0011c145) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  char cVar13;
  long lVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  Thread *pTVar17;
  long lVar18;
  Thread *pTVar19;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar14 = embree::TaskScheduler::allocThreadIndex();
  pTVar15 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar15 = lVar14;
  pTVar19 = pTVar15 + 0x40;
  pTVar17 = pTVar19;
  do {
    *(undefined4 *)pTVar17 = 0;
    pTVar16 = pTVar17 + 0x80;
    *(undefined4 *)(pTVar17 + 0x40) = 0;
    pTVar17 = pTVar16;
  } while (pTVar15 + 0x40040 != pTVar16);
  *(undefined8 *)(pTVar15 + 0x40040) = 0;
  *(undefined8 *)(pTVar15 + 0x40080) = 0;
  *(undefined8 *)(pTVar15 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar15 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar15 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar14 * 8) = pTVar15;
  UNLOCK();
  local_48 = pTVar15;
  pTVar17 = (Thread *)embree::TaskScheduler::swapThread(pTVar15);
  if (*(ulong *)(pTVar15 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar15 + 0xc00c0);
    uVar3 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar15 + 0xc00c0) = uVar3;
      pTVar16 = pTVar15 + uVar3 + 0x40088;
      uVar7 = *(undefined8 *)param_1;
      uVar8 = *(undefined8 *)(param_1 + 8);
      uVar9 = *(undefined8 *)(param_1 + 0x10);
      uVar10 = *(undefined8 *)(param_1 + 0x18);
      uVar11 = *(undefined8 *)(param_1 + 0x20);
      uVar12 = *(undefined8 *)(param_1 + 0x28);
      *(undefined ***)pTVar16 = &PTR_execute_00143aa0;
      *(undefined8 *)(pTVar16 + 8) = uVar7;
      *(undefined8 *)(pTVar16 + 0x10) = uVar8;
      *(undefined8 *)(pTVar16 + 0x18) = uVar9;
      *(undefined8 *)(pTVar16 + 0x20) = uVar10;
      *(undefined8 *)(pTVar16 + 0x28) = uVar11;
      *(undefined8 *)(pTVar16 + 0x30) = uVar12;
      lVar18 = *(long *)(pTVar15 + 0x40080) * 0x40;
      lVar5 = *(long *)(pTVar15 + 0xc0100);
      pTVar15[lVar18 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar15 + lVar18 + 0x44) = 1;
      *(Thread **)(pTVar15 + lVar18 + 0x50) = pTVar16;
      *(long *)(pTVar15 + lVar18 + 0x58) = lVar5;
      *(TaskGroupContext **)(pTVar15 + lVar18 + 0x60) = param_2;
      *(long *)(pTVar15 + lVar18 + 0x68) = lVar4;
      *(ulong *)(pTVar15 + lVar18 + 0x70) = param_3;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar19 + lVar18) == 0) {
        *(undefined4 *)(pTVar19 + lVar18) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar15 + 0x40080) = *(long *)(pTVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar15 + 0x40080) - 1U <= *(ulong *)(pTVar15 + 0x40040)) {
        LOCK();
        *(long *)(pTVar15 + 0x40040) = *(long *)(pTVar15 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar16 = local_48 + 8;
            *(long *)pTVar16 = *(long *)pTVar16 + -1;
            UNLOCK();
            if (*(long *)pTVar16 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar13 = embree::TaskScheduler::TaskQueue::execute_local(pTVar19,(Task *)pTVar15);
      } while (cVar13 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar14 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar17);
      pTVar19 = *(Thread **)param_2;
      if (pTVar19 != (Thread *)0x0) {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar19 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar19 == (Thread *)0x0) {
        if (pTVar15 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar6 = *(long **)(pTVar15 + 0xc0108);
          if (plVar6 != (long *)0x0) {
            if (*(code **)(*plVar6 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar6 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar6 + 8))();
              }
            }
            else {
              (**(code **)(*plVar6 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar15);
            return;
          }
        }
      }
      else {
        local_48 = pTVar19;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2}>(unsigned long,
   unsigned long, unsigned long,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned long> const&)#2} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned_long>const&)#2}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long lVar5;
  undefined8 uVar6;
  long lVar7;
  long lVar8;
  ulong uVar9;
  undefined8 *puVar10;
  TaskScheduler *pTVar11;
  undefined8 *puVar12;
  ulong uVar13;
  long in_FS_OFFSET;
  long local_98;
  ulong uStack_90;
  undefined8 local_88;
  undefined8 uStack_80;
  undefined8 uStack_78;
  TaskGroupContext *pTStack_70;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  TaskGroupContext *pTStack_40;
  long local_30;
  
  uVar13 = *(ulong *)(this + 8);
  uVar9 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar13 - uVar9) {
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uVar13 = uVar13 + uVar9 >> 1;
    local_68 = uVar13;
    uStack_60 = uVar9;
    local_58 = *(ulong *)(this + 0x18);
    pTStack_40 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_68,pTVar3,uVar13 - uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) goto LAB_0011c65e;
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar2 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0011c65e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar2;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar2);
      *puVar10 = &PTR_execute_00143aa0;
      puVar10[1] = local_68;
      puVar10[2] = uStack_60;
      puVar10[3] = local_58;
      puVar10[4] = uStack_50;
      puVar10[5] = uStack_48;
      puVar10[6] = pTStack_40;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar13 - uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(long *)(this + 8);
    local_88 = *(undefined8 *)(this + 0x18);
    pTVar3 = *(TaskGroupContext **)(this + 0x30);
    uStack_80 = *(undefined8 *)(this + 0x20);
    uStack_78 = *(undefined8 *)(this + 0x28);
    uVar9 = local_98 - uVar13;
    uStack_90 = uVar13;
    pTStack_70 = pTVar3;
    lVar7 = embree::TaskScheduler::thread();
    if (lVar7 == 0) {
      pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar11,(_lambda___1_ *)&local_98,pTVar3,uVar9,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar7 + 0x40080)) {
LAB_0011c65e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar4 = *(long *)(lVar7 + 0xc00c0);
      uVar13 = lVar4 + 0x38 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar13) goto LAB_0011c65e;
      *(ulong *)(lVar7 + 0xc00c0) = uVar13;
      puVar10 = (undefined8 *)(lVar7 + 0x40088 + uVar13);
      *puVar10 = &PTR_execute_00143aa0;
      puVar10[1] = local_98;
      puVar10[2] = uStack_90;
      puVar10[3] = local_88;
      puVar10[4] = uStack_80;
      puVar10[5] = uStack_78;
      puVar10[6] = pTStack_70;
      lVar8 = *(long *)(lVar7 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar7 + 0x40 + lVar8);
      lVar5 = *(long *)(lVar7 + 0xc0100);
      *(undefined4 *)(lVar7 + 0x44 + lVar8) = 1;
      *(undefined1 *)(lVar7 + 0x48 + lVar8) = 1;
      lVar8 = lVar8 + lVar7;
      *(undefined8 **)(lVar8 + 0x50) = puVar10;
      *(long *)(lVar8 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar8 + 0x60) = pTVar3;
      *(long *)(lVar8 + 0x68) = lVar4;
      *(ulong *)(lVar8 + 0x70) = uVar9;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar7 + 0x40080) = *(long *)(lVar7 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar7 + 0x40080) - 1U <= *(ulong *)(lVar7 + 0x40040)) {
        LOCK();
        *(long *)(lVar7 + 0x40040) = *(long *)(lVar7 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    if (uVar9 < uVar13) {
      do {
        lVar7 = **(long **)(this + 0x28) + uVar9;
        puVar12 = (undefined8 *)(uVar9 * 0x40 + **(long **)(this + 0x20));
        uVar9 = uVar9 + 1;
        uVar6 = puVar12[1];
        puVar10 = (undefined8 *)(**(long **)(this + 0x20) + lVar7 * 0x40);
        *puVar10 = *puVar12;
        puVar10[1] = uVar6;
        uVar6 = puVar12[3];
        puVar10[2] = puVar12[2];
        puVar10[3] = uVar6;
        puVar10[4] = puVar12[4];
        *(undefined4 *)(puVar10 + 5) = *(undefined4 *)(puVar12 + 5);
      } while (uVar13 != uVar9);
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(unsigned
   long)#8}>::createLargeLeaf(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> > const&, embree::FastAllocator::CachedAllocator) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(unsigned_long)#8}>
::createLargeLeaf(ulong *param_1,ulong *param_2)

{
  int *piVar1;
  long *plVar2;
  long lVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined1 (*pauVar6) [16];
  undefined1 (*pauVar7) [16];
  ulong uVar8;
  long lVar9;
  TaskGroupContext *pTVar10;
  TaskScheduler *pTVar11;
  undefined8 uVar12;
  undefined8 *puVar13;
  ulong uVar14;
  ulong uVar15;
  ulong uVar16;
  undefined4 unaff_EBX;
  ulong *puVar17;
  undefined8 unaff_RBP;
  ulong uVar18;
  ulong uVar19;
  ulong uVar20;
  undefined8 *puVar21;
  long lVar22;
  undefined8 *puVar23;
  long lVar24;
  undefined4 unaff_R12D;
  ulong uVar25;
  long lVar26;
  ulong uVar27;
  long in_FS_OFFSET;
  byte bVar28;
  float fVar29;
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  ulong local_978;
  ulong local_938;
  ulong local_848;
  ulong local_840;
  ulong local_838;
  ulong local_830;
  ulong local_828;
  ulong uStack_820;
  undefined8 local_818;
  long *plStack_810;
  ulong *local_808;
  TaskGroupContext *pTStack_800;
  ulong local_7f8;
  ulong uStack_7f0;
  undefined8 local_7e8;
  long *plStack_7e0;
  ulong *local_7d8;
  TaskGroupContext *apTStack_7d0 [17];
  ulong local_748;
  bool local_740 [8];
  undefined8 local_738;
  ulong uStack_730;
  undefined8 local_728;
  ulong auStack_720 [4];
  ulong uStack_700;
  ulong local_6f8;
  ulong uStack_6f0;
  ulong local_6e8;
  undefined1 local_6d0;
  undefined4 local_6c8;
  undefined4 uStack_6c4;
  undefined4 uStack_6c0;
  undefined4 local_6b8;
  undefined4 uStack_6b4;
  undefined4 uStack_6b0;
  long local_688;
  long local_680;
  undefined1 local_660;
  undefined4 local_658;
  undefined4 local_654;
  undefined4 local_650;
  undefined4 local_648;
  undefined4 local_644;
  undefined4 local_640;
  long local_618;
  long local_610;
  undefined1 local_5f0;
  undefined4 local_5e8;
  undefined4 local_5e4;
  undefined4 local_5e0;
  undefined4 local_5d8;
  undefined4 local_5d4;
  undefined4 local_5d0;
  long local_5a8;
  long local_5a0;
  undefined1 local_580;
  undefined4 local_578;
  undefined4 local_574;
  undefined4 local_570;
  undefined4 local_568;
  undefined4 local_564;
  undefined4 local_560;
  long local_538;
  long local_530;
  undefined1 local_510;
  undefined4 local_508;
  undefined4 local_504;
  undefined4 local_500;
  undefined4 local_4f8;
  undefined4 local_4f4;
  undefined4 local_4f0;
  long local_4c8;
  long local_4c0;
  undefined1 local_4a0;
  undefined4 local_498;
  undefined4 local_494;
  undefined4 local_490;
  undefined4 local_488;
  undefined4 local_484;
  undefined4 local_480;
  long local_458;
  long local_450;
  undefined1 local_430;
  undefined4 local_428;
  undefined4 local_424;
  undefined4 local_420;
  undefined4 local_418;
  undefined4 local_414;
  undefined4 local_410;
  long local_3e8;
  long local_3e0;
  undefined1 local_3c0;
  undefined4 local_3b8;
  undefined4 local_3b4;
  undefined4 local_3b0;
  undefined4 local_3a8;
  undefined4 local_3a4;
  undefined4 local_3a0;
  long local_378;
  long local_370;
  undefined1 local_350;
  undefined4 local_348;
  undefined4 local_344;
  undefined4 local_340;
  undefined4 local_338;
  undefined4 local_334;
  undefined4 local_330;
  long local_308;
  long local_300;
  undefined1 local_2e0;
  undefined4 local_2d8;
  undefined4 local_2d4;
  undefined4 local_2d0;
  undefined4 local_2c8;
  undefined4 local_2c4;
  undefined4 local_2c0;
  long local_298;
  long local_290;
  undefined1 local_270;
  undefined4 local_268;
  undefined4 local_264;
  undefined4 local_260;
  undefined4 local_258;
  undefined4 local_254;
  undefined4 local_250;
  long local_228;
  long local_220;
  undefined1 local_200;
  undefined4 local_1f8;
  undefined4 local_1f4;
  undefined4 local_1f0;
  undefined4 local_1e8;
  undefined4 local_1e4;
  undefined4 local_1e0;
  long local_1b8;
  long local_1b0;
  undefined1 local_190;
  undefined4 local_188;
  undefined4 local_184;
  undefined4 local_180;
  undefined4 local_178;
  undefined4 local_174;
  undefined4 local_170;
  long local_148;
  long local_140;
  undefined1 local_120;
  undefined4 local_118;
  undefined4 local_114;
  undefined4 local_110;
  undefined4 local_108;
  undefined4 local_104;
  undefined4 local_100;
  long local_d8;
  long local_d0;
  undefined1 local_b0;
  undefined4 local_a8;
  undefined4 local_a4;
  undefined4 local_a0;
  undefined4 local_98;
  undefined4 local_94;
  undefined4 local_90;
  long local_68;
  long local_60;
  long local_40;
  undefined4 local_38;
  undefined4 local_34;
  
  uVar5 = _LC8;
  uVar4 = _LC6;
  bVar28 = 0;
  uVar19 = *param_2;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1[1] < uVar19) {
LAB_0011e5b1:
                    /* WARNING: Subroutine does not return */
    abort();
  }
  uVar16 = param_2[0xb];
  if (uVar16 - param_2[10] <= param_1[4]) {
    puVar13 = *(undefined8 **)(param_2[10] * 0x40 + param_1[8] + 0x20);
    goto LAB_0011c6dd;
  }
  local_740[0] = SUB81(param_2[1],0);
  local_728 = param_2[4];
  auStack_720[0] = param_2[5];
  local_738 = param_2[2];
  uStack_730 = param_2[3];
  auStack_720[1] = param_2[6];
  auStack_720[2] = param_2[7];
  local_6e8 = param_2[0xc];
  local_6f8 = param_2[10];
  uStack_6f0 = param_2[0xb];
  auStack_720[3] = param_2[8];
  uStack_700 = param_2[9];
  local_748 = uVar19;
  if (param_1[4] < uStack_6f0 - local_6f8) {
    lVar26 = 0;
    uVar25 = 1;
    puVar17 = &local_748;
    do {
      plVar2 = (long *)param_1[9];
      uVar16 = auStack_720[lVar26 * 0xe + 5];
      uVar15 = auStack_720[lVar26 * 0xe + 6];
      uVar18 = uVar16 + uVar15 >> 1;
      if (uVar16 < uVar18) {
        auVar39._4_4_ = uVar5;
        auVar39._0_4_ = uVar5;
        auVar39._8_4_ = uVar5;
        auVar39._12_4_ = uVar5;
        auVar36._4_4_ = uVar4;
        auVar36._0_4_ = uVar4;
        auVar36._8_4_ = uVar4;
        auVar36._12_4_ = uVar4;
        auVar37._4_4_ = uVar5;
        auVar37._0_4_ = uVar5;
        auVar37._8_4_ = uVar5;
        auVar37._12_4_ = uVar5;
        auVar38._4_4_ = uVar4;
        auVar38._0_4_ = uVar4;
        auVar38._8_4_ = uVar4;
        auVar38._12_4_ = uVar4;
        pauVar7 = (undefined1 (*) [16])(uVar16 * 0x40 + *plVar2);
        do {
          auVar30._0_4_ = *(float *)pauVar7[1] + *(float *)*pauVar7;
          auVar30._4_4_ = *(float *)(pauVar7[1] + 4) + *(float *)(*pauVar7 + 4);
          auVar30._8_4_ = *(float *)(pauVar7[1] + 8) + *(float *)(*pauVar7 + 8);
          auVar30._12_4_ = *(float *)(pauVar7[1] + 0xc) + *(float *)(*pauVar7 + 0xc);
          pauVar6 = pauVar7 + 4;
          auVar39 = minps(auVar39,*pauVar7);
          auVar38 = maxps(auVar38,pauVar7[1]);
          auVar37 = minps(auVar37,auVar30);
          auVar36 = maxps(auVar36,auVar30);
          pauVar7 = pauVar6;
        } while (pauVar6 != (undefined1 (*) [16])(*plVar2 + uVar18 * 0x40));
        lVar22 = uVar18 - uVar16;
      }
      else {
        auVar39._4_4_ = uVar5;
        auVar39._0_4_ = uVar5;
        auVar39._8_4_ = uVar5;
        auVar39._12_4_ = uVar5;
        auVar36._4_4_ = uVar4;
        auVar36._0_4_ = uVar4;
        auVar36._8_4_ = uVar4;
        auVar36._12_4_ = uVar4;
        auVar37._4_4_ = uVar5;
        auVar37._0_4_ = uVar5;
        auVar37._8_4_ = uVar5;
        auVar37._12_4_ = uVar5;
        lVar22 = 0;
        auVar38._4_4_ = uVar4;
        auVar38._0_4_ = uVar4;
        auVar38._8_4_ = uVar4;
        auVar38._12_4_ = uVar4;
      }
      if (uVar18 < uVar15) {
        auVar34._4_4_ = uVar4;
        auVar34._0_4_ = uVar4;
        auVar34._8_4_ = uVar4;
        auVar34._12_4_ = uVar4;
        auVar33._4_4_ = uVar5;
        auVar33._0_4_ = uVar5;
        auVar33._8_4_ = uVar5;
        auVar33._12_4_ = uVar5;
        auVar32._4_4_ = uVar4;
        auVar32._0_4_ = uVar4;
        auVar32._8_4_ = uVar4;
        auVar32._12_4_ = uVar4;
        auVar35._4_4_ = uVar5;
        auVar35._0_4_ = uVar5;
        auVar35._8_4_ = uVar5;
        auVar35._12_4_ = uVar5;
        pauVar7 = (undefined1 (*) [16])(uVar18 * 0x40 + *plVar2);
        do {
          auVar31._0_4_ = *(float *)pauVar7[1] + *(float *)*pauVar7;
          auVar31._4_4_ = *(float *)(pauVar7[1] + 4) + *(float *)(*pauVar7 + 4);
          auVar31._8_4_ = *(float *)(pauVar7[1] + 8) + *(float *)(*pauVar7 + 8);
          auVar31._12_4_ = *(float *)(pauVar7[1] + 0xc) + *(float *)(*pauVar7 + 0xc);
          pauVar6 = pauVar7 + 4;
          auVar35 = minps(auVar35,*pauVar7);
          auVar34 = maxps(auVar34,pauVar7[1]);
          auVar33 = minps(auVar33,auVar31);
          auVar32 = maxps(auVar32,auVar31);
          pauVar7 = pauVar6;
        } while (pauVar6 != (undefined1 (*) [16])(*plVar2 + uVar15 * 0x40));
        lVar24 = uVar15 - uVar18;
      }
      else {
        auVar34._4_4_ = uVar4;
        auVar34._0_4_ = uVar4;
        auVar34._8_4_ = uVar4;
        auVar34._12_4_ = uVar4;
        auVar33._4_4_ = uVar5;
        auVar33._0_4_ = uVar5;
        auVar33._8_4_ = uVar5;
        auVar33._12_4_ = uVar5;
        auVar32._4_4_ = uVar4;
        auVar32._0_4_ = uVar4;
        auVar32._8_4_ = uVar4;
        auVar32._12_4_ = uVar4;
        lVar24 = 0;
        auVar35._4_4_ = uVar5;
        auVar35._0_4_ = uVar5;
        auVar35._8_4_ = uVar5;
        auVar35._12_4_ = uVar5;
      }
      local_978 = auStack_720[lVar26 * 0xe + 7];
      uVar8 = local_978;
      uVar20 = uVar18;
      local_938 = uVar18;
      if (uVar15 != local_978) {
        uVar8 = local_978 - uVar15;
        fVar29 = ((float)lVar22 / (float)(ulong)(lVar24 + lVar22)) * (float)uVar8;
        if ((float)((uint)fVar29 & _LC23) < _LC22) {
          fVar29 = (float)((uint)(float)(int)fVar29 | ~_LC23 & (uint)fVar29);
        }
        if (__LC24 <= fVar29) {
          uVar27 = (long)(fVar29 - __LC24) ^ 0x8000000000000000;
        }
        else {
          uVar27 = (ulong)fVar29;
        }
        if (uVar8 < uVar27) {
          uVar27 = uVar8;
        }
        local_978 = local_978 - uVar27;
        local_938 = uVar18 + uVar27;
        uVar14 = uVar15 - uVar18;
        uVar8 = uVar15;
        local_848 = uVar27;
        local_840 = uVar14;
        if (uVar27 != 0) {
          if (uVar27 < uVar14) {
            local_808 = &local_840;
            local_838 = 0;
            local_818 = 0x40;
            local_828 = local_938;
            uStack_820 = uVar18;
            plStack_810 = plVar2;
            pTStack_800 = (TaskGroupContext *)&local_838;
            lVar22 = embree::TaskScheduler::thread();
            if (lVar22 == 0) {
              pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
              TaskScheduler::
              spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                        (pTVar11,(_lambda___1_ *)&local_828,(TaskGroupContext *)&local_838,uVar27,
                         true);
            }
            else {
              if (0xfff < *(ulong *)(lVar22 + 0x40080)) goto LAB_0011e5b1;
              lVar24 = *(long *)(lVar22 + 0xc00c0);
              uVar8 = lVar24 + 0x38 + (ulong)(-(int)lVar24 & 0x3f);
              if (0x80000 < uVar8) goto LAB_0011e5b1;
              puVar13 = (undefined8 *)(lVar22 + 0x40088 + uVar8);
              *(ulong *)(lVar22 + 0xc00c0) = uVar8;
              puVar13[1] = local_828;
              puVar13[2] = uStack_820;
              *puVar13 = &PTR_execute_00143a88;
              puVar13[3] = local_818;
              puVar13[4] = plStack_810;
              puVar13[5] = local_808;
              puVar13[6] = pTStack_800;
              lVar9 = *(long *)(lVar22 + 0x40080) * 0x40;
              piVar1 = (int *)(lVar22 + 0x40 + lVar9);
              lVar3 = *(long *)(lVar22 + 0xc0100);
              *(undefined4 *)(lVar22 + 0x44 + lVar9) = 1;
              *(undefined1 *)(lVar22 + 0x48 + lVar9) = 1;
              lVar9 = lVar9 + lVar22;
              *(undefined8 **)(lVar9 + 0x50) = puVar13;
              *(long *)(lVar9 + 0x58) = lVar3;
              *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_838;
              *(long *)(lVar9 + 0x68) = lVar24;
              *(ulong *)(lVar9 + 0x70) = uVar27;
              if (lVar3 != 0) {
                LOCK();
                *(int *)(lVar3 + 4) = *(int *)(lVar3 + 4) + 1;
                UNLOCK();
              }
              LOCK();
              if (*piVar1 == 0) {
                *piVar1 = 1;
              }
              UNLOCK();
              LOCK();
              *(long *)(lVar22 + 0x40080) = *(long *)(lVar22 + 0x40080) + 1;
              UNLOCK();
              if (*(long *)(lVar22 + 0x40080) - 1U <= *(ulong *)(lVar22 + 0x40040)) {
                LOCK();
                *(long *)(lVar22 + 0x40040) = *(long *)(lVar22 + 0x40080) + -1;
                UNLOCK();
              }
            }
            embree::TaskScheduler::wait();
            uVar8 = local_838;
          }
          else {
            local_7d8 = &local_848;
            local_830 = 0;
            local_7e8 = 0x40;
            local_7f8 = uVar15;
            uStack_7f0 = uVar18;
            plStack_7e0 = plVar2;
            apTStack_7d0[0] = (TaskGroupContext *)&local_830;
            lVar22 = embree::TaskScheduler::thread();
            if (lVar22 == 0) {
              pTVar11 = (TaskScheduler *)embree::TaskScheduler::instance();
              TaskScheduler::
              spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                        (pTVar11,(_lambda___1_ *)&local_7f8,(TaskGroupContext *)&local_830,uVar14,
                         true);
            }
            else {
              if (0xfff < *(ulong *)(lVar22 + 0x40080)) goto LAB_0011e5b1;
              lVar24 = *(long *)(lVar22 + 0xc00c0);
              uVar8 = lVar24 + 0x38 + (ulong)(-(int)lVar24 & 0x3f);
              if (0x80000 < uVar8) goto LAB_0011e5b1;
              puVar13 = (undefined8 *)(lVar22 + 0x40088 + uVar8);
              *(ulong *)(lVar22 + 0xc00c0) = uVar8;
              *puVar13 = &PTR_execute_00143aa0;
              puVar13[1] = local_7f8;
              puVar13[2] = uStack_7f0;
              puVar13[3] = local_7e8;
              puVar13[4] = plStack_7e0;
              puVar13[5] = local_7d8;
              puVar13[6] = apTStack_7d0[0];
              lVar9 = *(long *)(lVar22 + 0x40080) * 0x40;
              piVar1 = (int *)(lVar22 + 0x40 + lVar9);
              lVar3 = *(long *)(lVar22 + 0xc0100);
              *(undefined4 *)(lVar22 + 0x44 + lVar9) = 1;
              *(undefined1 *)(lVar22 + 0x48 + lVar9) = 1;
              lVar9 = lVar9 + lVar22;
              *(undefined8 **)(lVar9 + 0x50) = puVar13;
              *(long *)(lVar9 + 0x58) = lVar3;
              *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_830;
              *(long *)(lVar9 + 0x68) = lVar24;
              *(ulong *)(lVar9 + 0x70) = uVar14;
              if (lVar3 != 0) {
                LOCK();
                *(int *)(lVar3 + 4) = *(int *)(lVar3 + 4) + 1;
                UNLOCK();
              }
              LOCK();
              if (*piVar1 == 0) {
                *piVar1 = 1;
              }
              UNLOCK();
              LOCK();
              *(long *)(lVar22 + 0x40080) = *(long *)(lVar22 + 0x40080) + 1;
              UNLOCK();
              if (*(long *)(lVar22 + 0x40080) - 1U <= *(ulong *)(lVar22 + 0x40040)) {
                LOCK();
                *(long *)(lVar22 + 0x40040) = *(long *)(lVar22 + 0x40080) + -1;
                UNLOCK();
              }
            }
            embree::TaskScheduler::wait();
            uVar8 = local_830;
          }
          if (uVar8 != 0) {
            local_7f8 = uVar8;
            std::__exception_ptr::exception_ptr::_M_addref();
            std::rethrow_exception(&local_7f8);
            goto LAB_0011e5ac;
          }
          local_978 = local_978 + local_848;
          uVar8 = uVar15 + local_848;
          uVar20 = uVar18 + local_848;
        }
      }
      uVar25 = uVar25 + 1;
      *(ulong *)(local_740 + lVar26 * 0x70 + -8) = *puVar17;
      local_740[lVar26 * 0x70] = SUB81(puVar17[1],0);
      uVar15 = puVar17[3];
      (&local_738)[lVar26 * 0xe] = puVar17[2];
      (&uStack_730)[lVar26 * 0xe] = uVar15;
      uVar15 = puVar17[5];
      (&local_728)[lVar26 * 0xe] = puVar17[4];
      auStack_720[lVar26 * 0xe] = uVar15;
      uVar15 = puVar17[7];
      auStack_720[lVar26 * 0xe + 1] = puVar17[6];
      auStack_720[lVar26 * 0xe + 2] = uVar15;
      uVar15 = puVar17[9];
      auStack_720[lVar26 * 0xe + 3] = puVar17[8];
      auStack_720[lVar26 * 0xe + 4] = uVar15;
      uVar15 = puVar17[0xb];
      auStack_720[lVar26 * 0xe + 5] = puVar17[10];
      auStack_720[lVar26 * 0xe + 6] = uVar15;
      auStack_720[lVar26 * 0xe + 7] = puVar17[0xc];
      *puVar17 = uVar19 + 1;
      puVar17[0xc] = local_938;
      *(undefined1 *)(puVar17 + 1) = 0;
      *(undefined1 (*) [16])(puVar17 + 2) = auVar39;
      *(undefined1 (*) [16])(puVar17 + 4) = auVar38;
      *(undefined1 (*) [16])(puVar17 + 6) = auVar37;
      *(undefined1 (*) [16])(puVar17 + 8) = auVar36;
      puVar17[10] = uVar16;
      puVar17[0xb] = uVar18;
      puVar17[0xe] = uVar19 + 1;
      *(undefined1 *)(puVar17 + 0xf) = 0;
      *(undefined1 (*) [16])(puVar17 + 0x10) = auVar35;
      *(undefined1 (*) [16])(puVar17 + 0x12) = auVar34;
      *(undefined1 (*) [16])(puVar17 + 0x14) = auVar33;
      *(undefined1 (*) [16])(puVar17 + 0x16) = auVar32;
      puVar17[0x18] = uVar20;
      puVar17[0x19] = uVar8;
      puVar17[0x1a] = local_978;
      if (*param_1 <= uVar25) {
        uVar19 = param_1[7];
        if (param_2[0xb] - param_2[10] <= uVar19) goto LAB_0011d5ec;
        local_740[0] = uStack_6f0 - local_6f8 <= uVar19;
        goto LAB_0011df9f;
      }
      uVar19 = param_1[4];
      lVar26 = 0;
      uVar16 = uStack_6f0 - local_6f8;
      if (uVar16 <= uVar19) {
        uVar16 = 0;
        lVar26 = -1;
      }
      uVar15 = uVar16;
      if (uVar16 <= uVar19) {
        uVar15 = uVar19;
      }
      if (uVar15 < (ulong)(local_680 - local_688)) {
        lVar26 = 1;
        uVar16 = local_680 - local_688;
        if (uVar25 != 2) {
LAB_0011cdda:
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_610 - local_618)) {
            lVar26 = 2;
            uVar16 = local_610 - local_618;
            if (uVar25 == 3) goto LAB_0011d090;
          }
          else if (uVar25 == 3) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_5a0 - local_5a8)) {
            lVar26 = 3;
            uVar16 = local_5a0 - local_5a8;
            if (uVar25 == 4) goto LAB_0011d090;
          }
          else if (uVar25 == 4) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_530 - local_538)) {
            lVar26 = 4;
            uVar16 = local_530 - local_538;
            if (uVar25 == 5) goto LAB_0011d090;
          }
          else if (uVar25 == 5) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_4c0 - local_4c8)) {
            lVar26 = 5;
            uVar16 = local_4c0 - local_4c8;
            if (uVar25 == 6) goto LAB_0011d090;
          }
          else if (uVar25 == 6) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_450 - local_458)) {
            lVar26 = 6;
            uVar16 = local_450 - local_458;
            if (uVar25 == 7) goto LAB_0011d090;
          }
          else if (uVar25 == 7) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_3e0 - local_3e8)) {
            lVar26 = 7;
            uVar16 = local_3e0 - local_3e8;
            if (uVar25 == 8) goto LAB_0011d090;
          }
          else if (uVar25 == 8) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_370 - local_378)) {
            lVar26 = 8;
            uVar16 = local_370 - local_378;
            if (uVar25 == 9) goto LAB_0011d090;
          }
          else if (uVar25 == 9) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_300 - local_308)) {
            lVar26 = 9;
            uVar16 = local_300 - local_308;
            if (uVar25 == 10) goto LAB_0011d090;
          }
          else if (uVar25 == 10) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_290 - local_298)) {
            lVar26 = 10;
            uVar16 = local_290 - local_298;
            if (uVar25 == 0xb) goto LAB_0011d090;
          }
          else if (uVar25 == 0xb) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_220 - local_228)) {
            lVar26 = 0xb;
            uVar16 = local_220 - local_228;
            if (uVar25 == 0xc) goto LAB_0011d090;
          }
          else if (uVar25 == 0xc) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_1b0 - local_1b8)) {
            lVar26 = 0xc;
            uVar16 = local_1b0 - local_1b8;
            if (uVar25 == 0xd) goto LAB_0011d090;
          }
          else if (uVar25 == 0xd) goto LAB_0011d480;
          uVar15 = uVar16;
          if (uVar16 <= uVar19) {
            uVar15 = uVar19;
          }
          if (uVar15 < (ulong)(local_140 - local_148)) {
            lVar26 = 0xd;
            uVar16 = local_140 - local_148;
            if (uVar25 == 0xe) goto LAB_0011d090;
          }
          else if (uVar25 == 0xe) goto LAB_0011d480;
          uVar15 = local_d0 - local_d8;
          if (uVar16 <= uVar19) {
            uVar16 = uVar19;
          }
          if (uVar16 < uVar15) {
            if (uVar25 == 0x10) {
              if (uVar15 <= uVar19) {
                uVar15 = uVar19;
              }
              lVar26 = (ulong)(uVar15 < (ulong)(local_60 - local_68)) + 0xe;
            }
            else {
              uVar25 = 0xf;
              lVar26 = 0xe;
            }
          }
          else {
            if ((uVar25 != 0x10) || ((ulong)(local_60 - local_68) <= uVar16)) goto LAB_0011d480;
            lVar26 = 0xf;
          }
        }
      }
      else {
        if (uVar25 != 2) goto LAB_0011cdda;
LAB_0011d480:
        if (lVar26 == -1) goto code_r0x0011d48a;
      }
LAB_0011d090:
      uVar19 = *param_2;
      puVar17 = puVar17 + 0xe;
    } while( true );
  }
  uVar25 = 1;
LAB_0011df69:
  uVar19 = param_1[7];
  if ((uVar19 < uVar16 - param_2[10]) &&
     (local_740[0] = uStack_6f0 - local_6f8 <= uVar19, uVar25 != 1)) {
LAB_0011df9f:
    local_6d0 = (ulong)(local_680 - local_688) <= uVar19;
    if (((uVar25 != 2) &&
        (((local_660 = (ulong)(local_610 - local_618) <= uVar19, uVar25 != 3 &&
          (local_5f0 = (ulong)(local_5a0 - local_5a8) <= uVar19, uVar25 != 4)) &&
         (local_580 = (ulong)(local_530 - local_538) <= uVar19, uVar25 != 5)))) &&
       ((((local_510 = (ulong)(local_4c0 - local_4c8) <= uVar19, uVar25 != 6 &&
          (local_4a0 = (ulong)(local_450 - local_458) <= uVar19, uVar25 != 7)) &&
         (local_430 = (ulong)(local_3e0 - local_3e8) <= uVar19, uVar25 != 8)) &&
        (((local_3c0 = (ulong)(local_370 - local_378) <= uVar19, uVar25 != 9 &&
          (local_350 = (ulong)(local_300 - local_308) <= uVar19, uVar25 != 10)) &&
         (((local_2e0 = (ulong)(local_290 - local_298) <= uVar19, uVar25 != 0xb &&
           (((local_270 = (ulong)(local_220 - local_228) <= uVar19, uVar25 != 0xc &&
             (local_200 = (ulong)(local_1b0 - local_1b8) <= uVar19, uVar25 != 0xd)) &&
            (local_190 = (ulong)(local_140 - local_148) <= uVar19, uVar25 != 0xe)))) &&
          (local_120 = (ulong)(local_d0 - local_d8) <= uVar19, uVar25 != 0xf)))))))) {
      local_b0 = (ulong)(local_60 - local_68) <= uVar19;
    }
  }
LAB_0011d5ec:
  local_828 = 0x80;
  uVar19 = *in_stack_00000010;
  if (in_stack_00000008 != *(FastAllocator **)(uVar19 + 8)) {
    embree::MutexSys::lock();
    if (*(long *)(uVar19 + 8) != 0) {
      LOCK();
      plVar2 = (long *)(*(long *)(uVar19 + 8) + 0x118);
      *plVar2 = *plVar2 + *(long *)(uVar19 + 0xa8) + *(long *)(uVar19 + 0x68);
      UNLOCK();
      LOCK();
      plVar2 = (long *)(*(long *)(uVar19 + 8) + 0x120);
      *plVar2 = *plVar2 + (((*(long *)(uVar19 + 0x98) + *(long *)(uVar19 + 0x58)) -
                           *(long *)(uVar19 + 0x50)) - *(long *)(uVar19 + 0x90));
      UNLOCK();
      LOCK();
      plVar2 = (long *)(*(long *)(uVar19 + 8) + 0x128);
      *plVar2 = *plVar2 + *(long *)(uVar19 + 0xb0) + *(long *)(uVar19 + 0x70);
      UNLOCK();
    }
    *(undefined8 *)(uVar19 + 0x48) = 0;
    *(undefined8 *)(uVar19 + 0x58) = 0;
    *(undefined8 *)(uVar19 + 0x50) = 0;
    *(undefined8 *)(uVar19 + 0x68) = 0;
    *(undefined8 *)(uVar19 + 0x70) = 0;
    *(undefined8 *)(uVar19 + 0x60) = 0;
    if (in_stack_00000008 == (FastAllocator *)0x0) {
      *(undefined8 *)(uVar19 + 0x88) = 0;
      uVar12 = 0;
      *(undefined8 *)(uVar19 + 0x98) = 0;
      *(undefined8 *)(uVar19 + 0x90) = 0;
      *(undefined8 *)(uVar19 + 0xa8) = 0;
      *(undefined8 *)(uVar19 + 0xb0) = 0;
    }
    else {
      uVar12 = *(undefined8 *)(in_stack_00000008 + 0x10);
      *(undefined8 *)(uVar19 + 0x88) = 0;
      *(undefined8 *)(uVar19 + 0x98) = 0;
      *(undefined8 *)(uVar19 + 0x60) = uVar12;
      *(undefined8 *)(uVar19 + 0x90) = 0;
      *(undefined8 *)(uVar19 + 0xa8) = 0;
      *(undefined8 *)(uVar19 + 0xb0) = 0;
      *(undefined8 *)(uVar19 + 0xa0) = 0;
      uVar12 = *(undefined8 *)(in_stack_00000008 + 0x10);
    }
    *(undefined8 *)(uVar19 + 0xa0) = uVar12;
    LOCK();
    *(FastAllocator **)(uVar19 + 8) = in_stack_00000008;
    UNLOCK();
    local_7f8 = uVar19;
    embree::MutexSys::lock();
    puVar17 = *(ulong **)(in_stack_00000008 + 0x138);
    if (puVar17 == *(ulong **)(in_stack_00000008 + 0x140)) {
      std::
      vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
      ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                  *)(in_stack_00000008 + 0x130),puVar17,&local_7f8);
    }
    else {
      *puVar17 = uVar19;
      *(long *)(in_stack_00000008 + 0x138) = *(long *)(in_stack_00000008 + 0x138) + 8;
    }
    embree::MutexSys::unlock();
    embree::MutexSys::unlock();
  }
  uVar16 = in_stack_00000010[2];
  in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
  uVar15 = (ulong)(-(int)uVar16 & 0xf);
  uVar19 = uVar16 + 0x80 + uVar15;
  in_stack_00000010[2] = uVar19;
  if (in_stack_00000010[3] < uVar19) {
    in_stack_00000010[2] = uVar16;
    if (in_stack_00000010[4] < 0x200) {
      puVar13 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_828,0x40,false);
    }
    else {
      local_7f8 = in_stack_00000010[4];
      puVar13 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_7f8,0x40,true);
      in_stack_00000010[1] = (ulong)puVar13;
      uVar19 = in_stack_00000010[2];
      in_stack_00000010[2] = 0x80;
      in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar19;
      in_stack_00000010[3] = local_7f8;
      if (local_7f8 < 0x80) {
        in_stack_00000010[2] = 0;
        local_7f8 = in_stack_00000010[4];
        puVar13 = (undefined8 *)FastAllocator::malloc(in_stack_00000008,&local_7f8,0x40,false);
        in_stack_00000010[1] = (ulong)puVar13;
        uVar19 = in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - uVar19;
        in_stack_00000010[3] = local_7f8;
        if (local_7f8 < 0x80) {
          puVar13 = (undefined8 *)0x0;
          in_stack_00000010[2] = 0;
        }
      }
    }
  }
  else {
    in_stack_00000010[6] = in_stack_00000010[6] + uVar15;
    puVar13 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar19);
  }
  *(undefined4 *)(puVar13 + 4) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x24) = uVar5;
  *(undefined4 *)(puVar13 + 5) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x2c) = uVar5;
  *(undefined4 *)(puVar13 + 8) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x44) = uVar5;
  *(undefined4 *)(puVar13 + 9) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x4c) = uVar5;
  *(undefined4 *)(puVar13 + 4) = (undefined4)local_738;
  *(undefined4 *)(puVar13 + 0xc) = uVar5;
  *(undefined4 *)((long)puVar13 + 100) = uVar5;
  *(undefined4 *)(puVar13 + 0xd) = uVar5;
  *(undefined4 *)((long)puVar13 + 0x6c) = uVar5;
  *(undefined4 *)(puVar13 + 8) = local_738._4_4_;
  *(undefined4 *)(puVar13 + 6) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x34) = uVar4;
  *(undefined4 *)(puVar13 + 7) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x3c) = uVar4;
  *(undefined4 *)(puVar13 + 0xc) = (undefined4)uStack_730;
  *(undefined4 *)(puVar13 + 10) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x54) = uVar4;
  *(undefined4 *)(puVar13 + 0xb) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x5c) = uVar4;
  *(undefined4 *)(puVar13 + 6) = (undefined4)local_728;
  *(undefined4 *)(puVar13 + 0xe) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x74) = uVar4;
  *(undefined4 *)(puVar13 + 0xf) = uVar4;
  *(undefined4 *)((long)puVar13 + 0x7c) = uVar4;
  *(undefined4 *)(puVar13 + 10) = local_728._4_4_;
  *puVar13 = 8;
  puVar13[1] = 8;
  puVar13[2] = 8;
  puVar13[3] = 8;
  *(undefined4 *)(puVar13 + 0xe) = (undefined4)auStack_720[0];
  if (uVar25 != 1) {
    *(undefined4 *)((long)puVar13 + 0x24) = local_6c8;
    *(undefined4 *)((long)puVar13 + 0x44) = uStack_6c4;
    *(undefined4 *)((long)puVar13 + 100) = uStack_6c0;
    *(undefined4 *)((long)puVar13 + 0x34) = local_6b8;
    *(undefined4 *)((long)puVar13 + 0x54) = uStack_6b4;
    *(undefined4 *)((long)puVar13 + 0x74) = uStack_6b0;
    if (uVar25 != 2) {
      *(undefined4 *)(puVar13 + 5) = local_658;
      *(undefined4 *)(puVar13 + 9) = local_654;
      *(undefined4 *)(puVar13 + 0xd) = local_650;
      *(undefined4 *)(puVar13 + 7) = local_648;
      *(undefined4 *)(puVar13 + 0xb) = local_644;
      *(undefined4 *)(puVar13 + 0xf) = local_640;
      if (uVar25 != 3) {
        *(undefined4 *)((long)puVar13 + 0x2c) = local_5e8;
        *(undefined4 *)((long)puVar13 + 0x4c) = local_5e4;
        *(undefined4 *)((long)puVar13 + 0x6c) = local_5e0;
        *(undefined4 *)((long)puVar13 + 0x3c) = local_5d8;
        *(undefined4 *)((long)puVar13 + 0x5c) = local_5d4;
        *(undefined4 *)((long)puVar13 + 0x7c) = local_5d0;
        if (uVar25 != 4) {
          *(undefined4 *)(puVar13 + 6) = local_578;
          *(undefined4 *)(puVar13 + 10) = local_574;
          *(undefined4 *)(puVar13 + 0xe) = local_570;
          *(undefined4 *)(puVar13 + 8) = local_568;
          *(undefined4 *)(puVar13 + 0xc) = local_564;
          *(undefined4 *)(puVar13 + 0x10) = local_560;
          if (uVar25 != 5) {
            *(undefined4 *)((long)puVar13 + 0x34) = local_508;
            *(undefined4 *)((long)puVar13 + 0x54) = local_504;
            *(undefined4 *)((long)puVar13 + 0x74) = local_500;
            *(undefined4 *)((long)puVar13 + 0x44) = local_4f8;
            *(undefined4 *)((long)puVar13 + 100) = local_4f4;
            *(undefined4 *)((long)puVar13 + 0x84) = local_4f0;
            if (uVar25 != 6) {
              *(undefined4 *)(puVar13 + 7) = local_498;
              *(undefined4 *)(puVar13 + 0xb) = local_494;
              *(undefined4 *)(puVar13 + 0xf) = local_490;
              *(undefined4 *)(puVar13 + 9) = local_488;
              *(undefined4 *)(puVar13 + 0xd) = local_484;
              *(undefined4 *)(puVar13 + 0x11) = local_480;
              if (uVar25 != 7) {
                *(undefined4 *)((long)puVar13 + 0x3c) = local_428;
                *(undefined4 *)((long)puVar13 + 0x5c) = local_424;
                *(undefined4 *)((long)puVar13 + 0x7c) = local_420;
                *(undefined4 *)((long)puVar13 + 0x4c) = local_418;
                *(undefined4 *)((long)puVar13 + 0x6c) = local_414;
                *(undefined4 *)((long)puVar13 + 0x8c) = local_410;
                if (uVar25 != 8) {
                  *(undefined4 *)(puVar13 + 8) = local_3b8;
                  *(undefined4 *)(puVar13 + 0xc) = local_3b4;
                  *(undefined4 *)(puVar13 + 0x10) = local_3b0;
                  *(undefined4 *)(puVar13 + 10) = local_3a8;
                  *(undefined4 *)(puVar13 + 0xe) = local_3a4;
                  *(undefined4 *)(puVar13 + 0x12) = local_3a0;
                  if (uVar25 != 9) {
                    *(undefined4 *)((long)puVar13 + 0x44) = local_348;
                    *(undefined4 *)((long)puVar13 + 100) = local_344;
                    *(undefined4 *)((long)puVar13 + 0x84) = local_340;
                    *(undefined4 *)((long)puVar13 + 0x54) = local_338;
                    *(undefined4 *)((long)puVar13 + 0x74) = local_334;
                    *(undefined4 *)((long)puVar13 + 0x94) = local_330;
                    if (uVar25 != 10) {
                      *(undefined4 *)(puVar13 + 9) = local_2d8;
                      *(undefined4 *)(puVar13 + 0xd) = local_2d4;
                      *(undefined4 *)(puVar13 + 0x11) = local_2d0;
                      *(undefined4 *)(puVar13 + 0xb) = local_2c8;
                      *(undefined4 *)(puVar13 + 0xf) = local_2c4;
                      *(undefined4 *)(puVar13 + 0x13) = local_2c0;
                      if (uVar25 != 0xb) {
                        *(undefined4 *)((long)puVar13 + 0x4c) = local_268;
                        *(undefined4 *)((long)puVar13 + 0x6c) = local_264;
                        *(undefined4 *)((long)puVar13 + 0x8c) = local_260;
                        *(undefined4 *)((long)puVar13 + 0x5c) = local_258;
                        *(undefined4 *)((long)puVar13 + 0x7c) = local_254;
                        *(undefined4 *)((long)puVar13 + 0x9c) = local_250;
                        if (uVar25 != 0xc) {
                          *(undefined4 *)(puVar13 + 10) = local_1f8;
                          *(undefined4 *)(puVar13 + 0xe) = local_1f4;
                          *(undefined4 *)(puVar13 + 0x12) = local_1f0;
                          *(undefined4 *)(puVar13 + 0xc) = local_1e8;
                          *(undefined4 *)(puVar13 + 0x10) = local_1e4;
                          *(undefined4 *)(puVar13 + 0x14) = local_1e0;
                          if (uVar25 != 0xd) {
                            *(undefined4 *)((long)puVar13 + 0x54) = local_188;
                            *(undefined4 *)((long)puVar13 + 0x74) = local_184;
                            *(undefined4 *)((long)puVar13 + 0x94) = local_180;
                            *(undefined4 *)((long)puVar13 + 100) = local_178;
                            *(undefined4 *)((long)puVar13 + 0x84) = local_174;
                            *(undefined4 *)((long)puVar13 + 0xa4) = local_170;
                            if (uVar25 != 0xe) {
                              *(undefined4 *)(puVar13 + 0xb) = local_118;
                              *(undefined4 *)(puVar13 + 0xf) = local_114;
                              *(undefined4 *)(puVar13 + 0x13) = local_110;
                              *(undefined4 *)(puVar13 + 0xd) = local_108;
                              *(undefined4 *)(puVar13 + 0x11) = local_104;
                              *(undefined4 *)(puVar13 + 0x15) = local_100;
                              if (uVar25 != 0xf) {
                                *(undefined4 *)((long)puVar13 + 0x5c) = local_a8;
                                *(undefined4 *)((long)puVar13 + 0x7c) = local_a4;
                                *(undefined4 *)((long)puVar13 + 0x9c) = local_a0;
                                *(undefined4 *)((long)puVar13 + 0x6c) = local_98;
                                *(undefined4 *)((long)puVar13 + 0x8c) = local_94;
                                *(undefined4 *)((long)puVar13 + 0xac) = local_90;
                                if (uVar25 == 0x11) {
                                  *(undefined4 *)(puVar13 + 0x10) = local_34;
                                  *(undefined4 *)(puVar13 + 0x14) = unaff_EBX;
                                  *(undefined4 *)(puVar13 + 0xc) = local_38;
                                  *(int *)(puVar13 + 0xe) = (int)unaff_RBP;
                                  *(int *)(puVar13 + 0x12) = (int)((ulong)unaff_RBP >> 0x20);
                                  *(undefined4 *)(puVar13 + 0x16) = unaff_R12D;
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  uVar19 = 0;
  puVar17 = &local_748;
  do {
    pTVar10 = (TaskGroupContext *)createLargeLeaf(param_1,puVar17);
    apTStack_7d0[uVar19 + 1] = pTVar10;
    uVar19 = uVar19 + 1;
    puVar17 = puVar17 + 0xe;
  } while (uVar19 != uVar25);
  *puVar13 = apTStack_7d0[1];
  uVar16 = uVar19 * 8 & 0xffffffff;
  *(undefined8 *)((long)puVar13 + (uVar16 - 8)) = *(undefined8 *)((long)apTStack_7d0 + uVar16);
  lVar26 = (long)puVar13 - (long)((ulong)(puVar13 + 1) & 0xfffffffffffffff8);
  puVar21 = (undefined8 *)((long)apTStack_7d0 + (8 - lVar26));
  puVar23 = (undefined8 *)((ulong)(puVar13 + 1) & 0xfffffffffffffff8);
  for (uVar19 = (ulong)((uint)((int)(uVar19 * 8) + (int)lVar26) >> 3); uVar19 != 0;
      uVar19 = uVar19 - 1) {
    *puVar23 = *puVar21;
    puVar21 = puVar21 + (ulong)bVar28 * -2 + 1;
    puVar23 = puVar23 + (ulong)bVar28 * -2 + 1;
  }
LAB_0011c6dd:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar13;
  }
LAB_0011e5ac:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
code_r0x0011d48a:
  uVar16 = param_2[0xb];
  goto LAB_0011df69;
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> > embree::parallel_reduce_internal<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned
   long> const&)#1}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   > const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned long, unsigned
   long, unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned
   long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   > const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_2_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,PrimInfoT_conflict *param_5
                ,_lambda_embree__range<unsigned_long>_const___1_ *param_6,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___2_
                *param_7)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  undefined1 (*pauVar8) [16];
  undefined1 (*pauVar9) [16];
  undefined8 uVar10;
  long lVar11;
  long in_FS_OFFSET;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  ulong local_2108;
  ulong local_2100;
  ulong local_20f8 [2];
  ulong local_20e8;
  ulong *local_20e0;
  ulong *local_20d8;
  ulong *local_20d0;
  undefined1 (*local_20c8) [16];
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___2_
  *local_20c0;
  ulong local_20b0;
  undefined8 uStack_20a8;
  undefined8 local_20a0;
  ulong **ppuStack_2098;
  ulong *local_2090;
  undefined1 local_2080 [8160];
  undefined1 (*local_a0) [16];
  ulong local_98;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2108 = param_4;
  local_2100 = param_3;
  local_20f8[0] = param_2;
  uVar5 = embree::TaskScheduler::threadCount();
  if (0x200 < local_20f8[0]) {
    local_20f8[0] = 0x200;
  }
  if (uVar5 < local_20f8[0]) {
    local_20f8[0] = uVar5;
  }
  local_98 = local_20f8[0];
  if (local_20f8[0] * 0x50 < 0x2001) {
    local_a0 = (undefined1 (*) [16])local_2080;
  }
  else {
    local_a0 = (undefined1 (*) [16])embree::alignedMalloc(local_20f8[0] * 0x50,0x40);
  }
  uVar5 = local_20f8[0];
  local_20e0 = &local_2100;
  local_20d8 = &local_2108;
  local_20d0 = local_20f8;
  local_20c0 = param_7;
  local_20c8 = (undefined1 (*) [16])local_2080;
  if (local_20f8[0] == 0) {
    uVar10 = *(undefined8 *)(param_6 + 8);
    *(undefined8 *)param_1 = *(undefined8 *)param_6;
    *(undefined8 *)(param_1 + 8) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x18);
    *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_6 + 0x10);
    *(undefined8 *)(param_1 + 0x18) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x28);
    *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_6 + 0x20);
    *(undefined8 *)(param_1 + 0x28) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x38);
    *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_6 + 0x30);
    *(undefined8 *)(param_1 + 0x38) = uVar10;
    *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_6 + 0x40);
    *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_6 + 0x48);
  }
  else {
    ppuStack_2098 = &local_20e0;
    uStack_20a8 = 0;
    local_20a0 = 1;
    local_20e8 = 0;
    local_20b0 = local_20f8[0];
    local_2090 = &local_20e8;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar10 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse226HeuristicArrayOpenMergeSAHIZNSA_19BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMiILi4EEEE5buildEvEUlRNSG_8BuildRefEPSH_E5_SH_Lm32EE22openNodesBasedOnExtendERNSA_16PrimInfoExtRangeEEUlRKNS_5rangeImEEE_ZNSL_22openNodesBasedOnExtendESN_EUlRKS9_SU_E0_EET0_T_SX_SX_SX_RKSW_RKT1_RKT2_EUlmE_EEvSX_SZ_EUlSR_E_EEvSX_SX_SX_SZ_PNS0_16TaskGroupContextEEUlvE_EEvRKSX_S19_mb
                (uVar10,&local_20b0,&local_20e8,uVar5,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_0011f8de:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar11 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar11 + 0x30 + (ulong)(-(int)lVar11 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0011f8de;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = 0x143ab8;
      puVar3[1] = local_20b0;
      puVar3[2] = uStack_20a8;
      puVar3[3] = local_20a0;
      puVar3[4] = ppuStack_2098;
      puVar3[5] = local_2090;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_20e8;
      *(long *)(lVar7 + 0x68) = lVar11;
      *(ulong *)(lVar7 + 0x70) = uVar5;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_20e8 != 0) {
      local_20b0 = local_20e8;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20b0);
      goto LAB_0011f8d9;
    }
    auVar12 = *(undefined1 (*) [16])param_6;
    *(undefined1 (*) [16])param_1 = auVar12;
    auVar13 = *(undefined1 (*) [16])(param_6 + 0x10);
    *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
    auVar14 = *(undefined1 (*) [16])(param_6 + 0x20);
    *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
    auVar15 = *(undefined1 (*) [16])(param_6 + 0x30);
    *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
    lVar6 = *(long *)(param_6 + 0x40);
    lVar11 = *(long *)(param_6 + 0x48);
    *(long *)(param_1 + 0x40) = lVar6;
    *(long *)(param_1 + 0x48) = lVar11;
    if (local_20f8[0] != 0) {
      pauVar8 = local_a0;
      do {
        auVar12 = minps(auVar12,*pauVar8);
        auVar13 = maxps(auVar13,pauVar8[1]);
        pauVar9 = pauVar8 + 5;
        auVar14 = minps(auVar14,pauVar8[2]);
        auVar15 = maxps(auVar15,pauVar8[3]);
        lVar6 = lVar6 + *(long *)pauVar8[4];
        lVar11 = lVar11 + *(long *)(pauVar8[4] + 8);
        *(long *)(param_1 + 0x48) = lVar11;
        *(long *)(param_1 + 0x40) = lVar6;
        *(undefined1 (*) [16])param_1 = auVar12;
        *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
        *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
        *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
        pauVar8 = pauVar9;
      } while (local_a0 + local_20f8[0] * 5 != pauVar9);
    }
  }
  if (local_a0 != (undefined1 (*) [16])local_2080) {
    embree::alignedFree(local_a0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
LAB_0011f8d9:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&) */

void __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
::openNodesBasedOnExtend
          (HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
           *this,PrimInfoExtRange *param_1)

{
  ulong *puVar1;
  ulong uVar2;
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  undefined1 auVar8 [16];
  undefined1 auVar9 [16];
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  undefined1 auVar16 [16];
  undefined8 *puVar17;
  float *pfVar18;
  long lVar19;
  ulong uVar20;
  ulong uVar21;
  ulong uVar22;
  long lVar23;
  undefined1 (*pauVar24) [16];
  ulong uVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar30;
  undefined1 auVar29 [16];
  undefined1 auVar31 [16];
  long local_350;
  long local_348;
  long local_340;
  float local_338;
  undefined1 local_330 [8];
  float fStack_328;
  float fStack_324;
  long *local_320;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
  *local_318;
  long *local_310;
  long *local_308;
  undefined1 local_300 [16];
  undefined1 local_2f0 [16];
  undefined1 local_2e0 [16];
  undefined1 local_2d0 [16];
  undefined8 local_2c0;
  undefined8 local_2b8;
  undefined1 local_2b0 [8];
  float fStack_2a8;
  float fStack_2a4;
  undefined1 local_2a0 [16];
  undefined1 local_290 [16];
  undefined1 local_280 [16];
  undefined8 local_270;
  undefined8 local_268;
  float local_260;
  float fStack_25c;
  float fStack_258;
  float fStack_254;
  float local_250;
  float fStack_24c;
  float fStack_248;
  float fStack_244;
  ulong local_240;
  float local_238;
  float local_220;
  float fStack_21c;
  float fStack_218;
  float fStack_214;
  float local_210;
  float fStack_20c;
  float fStack_208;
  float fStack_204;
  ulong local_200;
  float local_1f8;
  float local_1e0;
  float fStack_1dc;
  float fStack_1d8;
  float fStack_1d4;
  float local_1d0;
  float fStack_1cc;
  float fStack_1c8;
  float fStack_1c4;
  ulong local_1c0;
  float local_1b8;
  float local_1a0;
  float fStack_19c;
  float fStack_198;
  float fStack_194;
  float local_190;
  float fStack_18c;
  float fStack_188;
  float fStack_184;
  ulong local_180;
  float local_178;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2b0._4_4_ = *(float *)(param_1 + 0x14) - *(float *)(param_1 + 4);
  local_2b0._0_4_ = *(float *)(param_1 + 0x10) - *(float *)param_1;
  fStack_2a8 = *(float *)(param_1 + 0x18) - *(float *)(param_1 + 8);
  fStack_2a4 = *(float *)(param_1 + 0x1c) - *(float *)(param_1 + 0xc);
  fVar26 = (float)((uint)(*(float *)(param_1 + 0x10) - *(float *)param_1) & _LC25);
  fVar27 = (float)((uint)(*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4)) & _LC25);
  fVar28 = (float)((uint)(*(float *)(param_1 + 0x18) - *(float *)(param_1 + 8)) & _LC25);
  if (fVar26 <= fVar27) {
    lVar23 = 4;
    if (fVar27 <= fVar28) {
      lVar23 = 8;
    }
    local_340 = 1;
    if (fVar27 <= fVar28) {
      local_340 = 2;
    }
  }
  else {
    uVar20 = (ulong)(fVar26 <= fVar28);
    local_340 = uVar20 * 2;
    lVar23 = uVar20 * 8;
  }
  local_338 = _LC28 / *(float *)(local_2b0 + lVar23);
  local_350 = *(long *)(param_1 + 0x48);
  LOCK();
  local_348 = 0;
  UNLOCK();
  uVar20 = *(ulong *)(param_1 + 0x48);
  local_2b0._4_4_ = _LC8;
  local_2b0._0_4_ = _LC8;
  fStack_2a8 = (float)_LC8;
  fStack_2a4 = (float)_LC8;
  local_2a0._4_4_ = _LC6;
  local_2a0._0_4_ = _LC6;
  local_2a0._8_4_ = _LC6;
  local_2a0._12_4_ = _LC6;
  local_318 = this;
  local_310 = &local_348;
  local_308 = &local_350;
  uVar21 = *(ulong *)(param_1 + 0x40);
  local_320 = &local_340;
  uVar22 = (uVar20 + 0x7f) - uVar21 >> 7;
  local_270 = 0;
  local_268 = 0;
  local_290 = _local_2b0;
  local_280 = local_2a0;
  if (uVar22 == 1) {
    local_2c0 = 0;
    local_2b8 = 0;
    local_300 = _local_2b0;
    local_2f0 = local_2a0;
    local_2e0 = _local_2b0;
    local_2d0 = local_2a0;
    if (uVar21 < uVar20) {
      do {
        lVar23 = uVar21 * 0x40;
        pfVar18 = (float *)(*(long *)local_318 + lVar23);
        puVar1 = *(ulong **)(pfVar18 + 8);
        uVar22 = (ulong)((uint)puVar1 & 8);
        if (((ulong)puVar1 & 8) == 0) {
          local_330._4_4_ = pfVar18[5] - pfVar18[1];
          local_330._0_4_ = pfVar18[4] - *pfVar18;
          fStack_328 = pfVar18[6] - pfVar18[2];
          fStack_324 = pfVar18[7] - pfVar18[3];
          if (__LC26 < *(float *)(local_330 + *local_320 * 4) * *(float *)(local_320 + 1)) {
            fVar26 = pfVar18[3];
            fVar27 = (float)((uint)pfVar18[7] >> 2);
            if (fVar27 == 0.0) {
              fVar27 = 1.4013e-45;
            }
            uVar25 = *puVar1;
            if (uVar25 == 8) {
              uVar2 = puVar1[1];
              uVar25 = 1;
            }
            else {
              local_330._4_4_ = *(undefined4 *)(puVar1 + 10);
              fStack_328 = *(float *)(puVar1 + 0xe);
              local_330._0_4_ = *(undefined4 *)(puVar1 + 6);
              fStack_324 = fVar27;
              if ((uVar25 & 8) == 0) {
                fVar28 = (float)local_330._4_4_ - *(float *)(puVar1 + 8);
                fVar30 = fStack_328 - *(float *)(puVar1 + 0xc);
                fVar28 = (fVar28 + fVar30) * ((float)local_330._0_4_ - *(float *)(puVar1 + 4)) +
                         fVar28 * fVar30;
                local_238 = fVar28 + fVar28;
              }
              else {
                local_238 = 0.0;
              }
              uVar2 = puVar1[1];
              local_240 = uVar25;
              uVar22 = 1;
              uVar25 = 2;
              local_260 = *(float *)(puVar1 + 4);
              fStack_25c = *(float *)(puVar1 + 8);
              fStack_258 = *(float *)(puVar1 + 0xc);
              fStack_254 = fVar26;
              local_250 = (float)local_330._0_4_;
              fStack_24c = (float)local_330._4_4_;
              fStack_248 = fStack_328;
              fStack_244 = fVar27;
            }
            if (uVar2 != 8) {
              local_330._4_4_ = *(float *)((long)puVar1 + 0x54);
              fStack_328 = *(float *)((long)puVar1 + 0x74);
              local_330._0_4_ = *(float *)((long)puVar1 + 0x34);
              fStack_324 = fVar27;
              if ((uVar2 & 8) == 0) {
                fVar28 = (float)local_330._4_4_ - *(float *)((long)puVar1 + 0x44);
                fVar30 = fStack_328 - *(float *)((long)puVar1 + 100);
                fVar28 = (fVar28 + fVar30) *
                         ((float)local_330._0_4_ - *(float *)((long)puVar1 + 0x24)) +
                         fVar28 * fVar30;
                local_1f8 = fVar28 + fVar28;
              }
              else {
                local_1f8 = 0.0;
              }
              local_200 = uVar2;
              local_220 = *(float *)((long)puVar1 + 0x24);
              fStack_21c = *(float *)((long)puVar1 + 0x44);
              fStack_218 = *(float *)((long)puVar1 + 100);
              fStack_214 = fVar26;
              local_210 = (float)local_330._0_4_;
              fStack_20c = (float)local_330._4_4_;
              fStack_208 = fStack_328;
              fStack_204 = fVar27;
              uVar22 = uVar25;
            }
            uVar25 = puVar1[2];
            uVar2 = puVar1[3];
            if (uVar25 == 8) {
              uVar25 = uVar22;
              if (uVar2 != 8) goto LAB_0011fcaa;
              LOCK();
              lVar19 = *local_310;
              *local_310 = *local_310 + (uVar22 - 1);
              UNLOCK();
              if (uVar22 != 0) goto LAB_0011fd35;
              puVar17 = (undefined8 *)(lVar23 + *(long *)local_318);
              *puVar17 = CONCAT44(fStack_25c,local_260);
              puVar17[1] = CONCAT44(fStack_254,fStack_258);
              puVar17[4] = local_240;
              puVar17[2] = CONCAT44(fStack_24c,local_250);
              puVar17[3] = CONCAT44(fStack_244,fStack_248);
              *(float *)(puVar17 + 5) = local_238;
            }
            else {
              local_330._4_4_ = *(undefined4 *)(puVar1 + 0xb);
              fStack_328 = *(float *)(puVar1 + 0xf);
              local_330._0_4_ = *(undefined4 *)(puVar1 + 7);
              fStack_324 = fVar27;
              if ((uVar25 & 8) == 0) {
                fVar28 = (float)local_330._4_4_ - *(float *)(puVar1 + 9);
                fVar30 = fStack_328 - *(float *)(puVar1 + 0xd);
                fVar28 = (fVar28 + fVar30) * ((float)local_330._0_4_ - *(float *)(puVar1 + 5)) +
                         fVar28 * fVar30;
                local_1b8 = fVar28 + fVar28;
              }
              else {
                local_1b8 = 0.0;
              }
              local_1c0 = uVar25;
              local_1e0 = *(float *)(puVar1 + 5);
              fStack_1dc = *(float *)(puVar1 + 9);
              fStack_1d8 = *(float *)(puVar1 + 0xd);
              fStack_1d4 = fVar26;
              local_1d0 = (float)local_330._0_4_;
              fStack_1cc = (float)local_330._4_4_;
              fStack_1c8 = fStack_328;
              fStack_1c4 = fVar27;
              uVar25 = uVar22 + 1;
              if (uVar2 == 8) {
                LOCK();
                lVar19 = *local_310;
                *local_310 = *local_310 + uVar22;
                UNLOCK();
                uVar22 = uVar22 + 1;
              }
              else {
LAB_0011fcaa:
                local_330._4_4_ = *(float *)((long)puVar1 + 0x5c);
                fStack_328 = *(float *)((long)puVar1 + 0x7c);
                local_330._0_4_ = *(float *)((long)puVar1 + 0x3c);
                fStack_324 = fVar27;
                if ((uVar2 & 8) == 0) {
                  fVar28 = (float)local_330._4_4_ - *(float *)((long)puVar1 + 0x4c);
                  fVar30 = fStack_328 - *(float *)((long)puVar1 + 0x6c);
                  fVar28 = (fVar28 + fVar30) *
                           ((float)local_330._0_4_ - *(float *)((long)puVar1 + 0x2c)) +
                           fVar28 * fVar30;
                  local_178 = fVar28 + fVar28;
                }
                else {
                  local_178 = 0.0;
                }
                local_180 = uVar2;
                local_1a0 = *(float *)((long)puVar1 + 0x2c);
                fStack_19c = *(float *)((long)puVar1 + 0x4c);
                fStack_198 = *(float *)((long)puVar1 + 0x6c);
                fStack_194 = fVar26;
                local_190 = (float)local_330._0_4_;
                fStack_18c = (float)local_330._4_4_;
                fStack_188 = fStack_328;
                fStack_184 = fVar27;
                LOCK();
                lVar19 = *local_310;
                *local_310 = *local_310 + uVar25;
                UNLOCK();
                uVar22 = uVar25 + 1;
              }
LAB_0011fd35:
              auVar9._4_4_ = fStack_25c;
              auVar9._0_4_ = local_260;
              auVar9._8_4_ = fStack_258;
              auVar9._12_4_ = fStack_254;
              auVar10._4_4_ = fStack_24c;
              auVar10._0_4_ = local_250;
              auVar10._8_4_ = fStack_248;
              auVar10._12_4_ = fStack_244;
              local_300 = minps(local_300,auVar9);
              local_2f0 = maxps(local_2f0,auVar10);
              auVar29._4_4_ = fStack_25c + fStack_24c;
              auVar29._0_4_ = local_260 + local_250;
              auVar29._8_4_ = fStack_258 + fStack_248;
              auVar29._12_4_ = fStack_254 + fStack_244;
              local_2e0 = minps(local_2e0,auVar29);
              auVar31._4_4_ = fStack_25c + fStack_24c;
              auVar31._0_4_ = local_260 + local_250;
              auVar31._8_4_ = fStack_258 + fStack_248;
              auVar31._12_4_ = fStack_254 + fStack_244;
              local_2d0 = maxps(local_2d0,auVar31);
              if (uVar22 != 1) {
                auVar11._4_4_ = fStack_21c;
                auVar11._0_4_ = local_220;
                auVar11._8_4_ = fStack_218;
                auVar11._12_4_ = fStack_214;
                local_300 = minps(local_300,auVar11);
                auVar12._4_4_ = fStack_20c;
                auVar12._0_4_ = local_210;
                auVar12._8_4_ = fStack_208;
                auVar12._12_4_ = fStack_204;
                local_2f0 = maxps(local_2f0,auVar12);
                auVar3._4_4_ = fStack_21c + fStack_20c;
                auVar3._0_4_ = local_220 + local_210;
                auVar3._8_4_ = fStack_218 + fStack_208;
                auVar3._12_4_ = fStack_214 + fStack_204;
                local_2e0 = minps(local_2e0,auVar3);
                auVar4._4_4_ = fStack_21c + fStack_20c;
                auVar4._0_4_ = local_220 + local_210;
                auVar4._8_4_ = fStack_218 + fStack_208;
                auVar4._12_4_ = fStack_214 + fStack_204;
                local_2d0 = maxps(local_2d0,auVar4);
                if (uVar22 != 2) {
                  auVar13._4_4_ = fStack_1dc;
                  auVar13._0_4_ = local_1e0;
                  auVar13._8_4_ = fStack_1d8;
                  auVar13._12_4_ = fStack_1d4;
                  local_300 = minps(local_300,auVar13);
                  auVar14._4_4_ = fStack_1cc;
                  auVar14._0_4_ = local_1d0;
                  auVar14._8_4_ = fStack_1c8;
                  auVar14._12_4_ = fStack_1c4;
                  local_2f0 = maxps(local_2f0,auVar14);
                  auVar5._4_4_ = fStack_1dc + fStack_1cc;
                  auVar5._0_4_ = local_1e0 + local_1d0;
                  auVar5._8_4_ = fStack_1d8 + fStack_1c8;
                  auVar5._12_4_ = fStack_1d4 + fStack_1c4;
                  local_2e0 = minps(local_2e0,auVar5);
                  auVar6._4_4_ = fStack_1dc + fStack_1cc;
                  auVar6._0_4_ = local_1e0 + local_1d0;
                  auVar6._8_4_ = fStack_1d8 + fStack_1c8;
                  auVar6._12_4_ = fStack_1d4 + fStack_1c4;
                  local_2d0 = maxps(local_2d0,auVar6);
                  if (uVar22 == 4) {
                    auVar15._4_4_ = fStack_19c;
                    auVar15._0_4_ = local_1a0;
                    auVar15._8_4_ = fStack_198;
                    auVar15._12_4_ = fStack_194;
                    local_300 = minps(local_300,auVar15);
                    auVar16._4_4_ = fStack_18c;
                    auVar16._0_4_ = local_190;
                    auVar16._8_4_ = fStack_188;
                    auVar16._12_4_ = fStack_184;
                    local_2f0 = maxps(local_2f0,auVar16);
                    auVar7._4_4_ = fStack_18c + fStack_19c;
                    auVar7._0_4_ = local_190 + local_1a0;
                    auVar7._8_4_ = fStack_188 + fStack_198;
                    auVar7._12_4_ = fStack_184 + fStack_194;
                    local_2e0 = minps(local_2e0,auVar7);
                    auVar8._4_4_ = fStack_18c + fStack_19c;
                    auVar8._0_4_ = local_190 + local_1a0;
                    auVar8._8_4_ = fStack_188 + fStack_198;
                    auVar8._12_4_ = fStack_184 + fStack_194;
                    local_2d0 = maxps(local_2d0,auVar8);
                  }
                }
              }
              pauVar24 = (undefined1 (*) [16])(lVar23 + *(long *)local_318);
              *(ulong *)pauVar24[2] = local_240;
              *pauVar24 = auVar9;
              pauVar24[1] = auVar10;
              *(float *)(pauVar24[2] + 8) = local_238;
              if (uVar22 != 1) {
                puVar17 = (undefined8 *)((*local_308 + lVar19) * 0x40 + *(long *)local_318);
                *puVar17 = CONCAT44(fStack_21c,local_220);
                puVar17[1] = CONCAT44(fStack_214,fStack_218);
                puVar17[4] = local_200;
                puVar17[2] = CONCAT44(fStack_20c,local_210);
                puVar17[3] = CONCAT44(fStack_204,fStack_208);
                *(float *)(puVar17 + 5) = local_1f8;
                if (uVar22 != 2) {
                  puVar17 = (undefined8 *)
                            (*(long *)local_318 + -0x40 + (lVar19 + 2 + *local_308) * 0x40);
                  *puVar17 = CONCAT44(fStack_1dc,local_1e0);
                  puVar17[1] = CONCAT44(fStack_1d4,fStack_1d8);
                  puVar17[4] = local_1c0;
                  puVar17[2] = CONCAT44(fStack_1cc,local_1d0);
                  puVar17[3] = CONCAT44(fStack_1c4,fStack_1c8);
                  *(float *)(puVar17 + 5) = local_1b8;
                  if (uVar22 == 4) {
                    puVar17 = (undefined8 *)
                              (*(long *)local_318 + -0x40 + (lVar19 + 3 + *local_308) * 0x40);
                    *puVar17 = CONCAT44(fStack_19c,local_1a0);
                    puVar17[1] = CONCAT44(fStack_194,fStack_198);
                    puVar17[4] = local_180;
                    puVar17[2] = CONCAT44(fStack_18c,local_190);
                    puVar17[3] = CONCAT44(fStack_184,fStack_188);
                    *(float *)(puVar17 + 5) = local_178;
                  }
                }
              }
            }
          }
        }
        uVar21 = uVar21 + 1;
      } while (uVar20 != uVar21);
    }
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_2_>
              ((ulong)local_300,uVar22,uVar21,uVar20,(PrimInfoT_conflict *)0x80,
               (_lambda_embree__range<unsigned_long>_const___1_ *)local_2b0,
               (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___2_
                *)&local_320);
  }
  auVar31 = minps(*(undefined1 (*) [16])(param_1 + 0x20),local_2e0);
  auVar29 = maxps(*(undefined1 (*) [16])(param_1 + 0x30),local_2d0);
  *(undefined1 (*) [16])(param_1 + 0x20) = auVar31;
  *(undefined1 (*) [16])(param_1 + 0x30) = auVar29;
  *(long *)(param_1 + 0x48) = *(long *)(param_1 + 0x48) + local_348;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00120535) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143ad0;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)#1},embree::sse2::HeuristicA...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined8 *puVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  long *plVar8;
  long *plVar9;
  long *plVar10;
  uint *puVar11;
  undefined8 uVar12;
  long lVar13;
  long lVar14;
  ulong uVar15;
  long lVar16;
  long lVar17;
  undefined1 (*pauVar18) [16];
  TaskScheduler *pTVar19;
  undefined1 (*pauVar20) [16];
  undefined1 (*pauVar21) [16];
  int iVar22;
  long lVar23;
  uint uVar24;
  TaskGroupContext *pTVar25;
  ulong uVar26;
  long in_FS_OFFSET;
  undefined4 uVar27;
  undefined4 uVar29;
  undefined4 uVar30;
  undefined1 auVar28 [16];
  undefined4 uVar31;
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 local_f0 [16];
  undefined1 local_e0 [16];
  long local_d0;
  ulong uStack_c8;
  undefined8 local_c0;
  undefined8 uStack_b8;
  TaskGroupContext *local_b0;
  ulong local_a0;
  long lStack_98;
  ulong local_90;
  long *plStack_88;
  TaskGroupContext *local_80;
  long local_48;
  
  lVar16 = *(long *)(this + 0x10);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  plVar8 = *(long **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar16)) {
    pTVar25 = *(TaskGroupContext **)(this + 0x28);
    uVar26 = (ulong)(*(long *)(this + 8) + lVar16) >> 1;
    local_a0 = uVar26;
    lStack_98 = lVar16;
    local_90 = *(ulong *)(this + 0x18);
    plStack_88 = plVar8;
    local_80 = pTVar25;
    lVar13 = embree::TaskScheduler::thread();
    if (lVar13 == 0) {
      pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar19,(_lambda___1_ *)&local_a0,pTVar25,uVar26 - lVar16,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar13 + 0x40080)) goto LAB_00120cf9;
      lVar23 = *(long *)(lVar13 + 0xc00c0);
      uVar15 = lVar23 + 0x30 + (ulong)(-(int)lVar23 & 0x3f);
      if (0x80000 < uVar15) goto LAB_00120cf9;
      *(ulong *)(lVar13 + 0xc00c0) = uVar15;
      puVar2 = (undefined8 *)(lVar13 + 0x40090 + uVar15);
      *puVar2 = &PTR_execute_00143ad0;
      puVar2[1] = local_a0;
      puVar2[2] = lStack_98;
      puVar2[5] = local_80;
      puVar2[3] = local_90;
      puVar2[4] = plStack_88;
      lVar14 = *(long *)(lVar13 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar13 + 0x40 + lVar14);
      lVar17 = *(long *)(lVar13 + 0xc0100);
      *(undefined4 *)(lVar13 + 0x44 + lVar14) = 1;
      *(undefined1 *)(lVar13 + 0x48 + lVar14) = 1;
      lVar14 = lVar14 + lVar13;
      *(undefined8 **)(lVar14 + 0x50) = puVar2;
      *(long *)(lVar14 + 0x58) = lVar17;
      *(TaskGroupContext **)(lVar14 + 0x60) = pTVar25;
      *(long *)(lVar14 + 0x68) = lVar23;
      *(ulong *)(lVar14 + 0x70) = uVar26 - lVar16;
      if (lVar17 != 0) {
        LOCK();
        *(int *)(lVar17 + 4) = *(int *)(lVar17 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar13 + 0x40080) = *(long *)(lVar13 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar13 + 0x40080) - 1U <= *(ulong *)(lVar13 + 0x40040)) {
        LOCK();
        *(long *)(lVar13 + 0x40040) = *(long *)(lVar13 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_c0 = *(undefined8 *)(this + 0x18);
    local_d0 = *(long *)(this + 8);
    pTVar25 = *(TaskGroupContext **)(this + 0x28);
    uStack_b8 = *(undefined8 *)(this + 0x20);
    uVar15 = local_d0 - uVar26;
    uStack_c8 = uVar26;
    local_b0 = pTVar25;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar19,(_lambda___1_ *)&local_d0,pTVar25,uVar15,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) {
LAB_00120cf9:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar13 = *(long *)(lVar16 + 0xc00c0);
      uVar26 = lVar13 + 0x30 + (ulong)(-(int)lVar13 & 0x3f);
      if (0x80000 < uVar26) goto LAB_00120cf9;
      *(ulong *)(lVar16 + 0xc00c0) = uVar26;
      puVar2 = (undefined8 *)(lVar16 + 0x40090 + uVar26);
      *puVar2 = &PTR_execute_00143ad0;
      puVar2[1] = local_d0;
      puVar2[2] = uStack_c8;
      puVar2[5] = local_b0;
      puVar2[3] = local_c0;
      puVar2[4] = uStack_b8;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar23 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar2;
      *(long *)(lVar17 + 0x58) = lVar23;
      *(TaskGroupContext **)(lVar17 + 0x60) = pTVar25;
      *(long *)(lVar17 + 0x68) = lVar13;
      *(ulong *)(lVar17 + 0x70) = uVar15;
      if (lVar23 != 0) {
        LOCK();
        *(int *)(lVar23 + 4) = *(int *)(lVar23 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar9 = (long *)*plVar8;
    auVar38._0_8_ = CONCAT44(_LC6,_LC6);
    auVar38._8_4_ = _LC6;
    auVar38._12_4_ = _LC6;
    lVar13 = *plVar9;
    plVar10 = (long *)plVar9[2];
    auVar39._0_8_ = CONCAT44(_LC8,_LC8);
    auVar39._8_4_ = _LC8;
    auVar39._12_4_ = _LC8;
    lVar17 = 0;
    pTVar25 = (TaskGroupContext *)(lVar16 * plVar9[1]);
    auVar34._8_4_ = _LC6;
    auVar34._0_8_ = auVar38._0_8_;
    auVar34._12_4_ = _LC6;
    auVar40._8_4_ = _LC6;
    auVar40._0_8_ = auVar38._0_8_;
    auVar40._12_4_ = _LC6;
    auVar36._8_4_ = _LC8;
    auVar36._0_8_ = auVar39._0_8_;
    auVar36._12_4_ = _LC8;
    uVar26 = (ulong)pTVar25 / (ulong)plVar9[6];
    lVar23 = 1;
    pauVar20 = (undefined1 (*) [16])
               (lVar13 + -0x40 + ((ulong)(pTVar25 + plVar9[1]) / (ulong)plVar9[6]) * 0x40);
    pauVar18 = (undefined1 (*) [16])(uVar26 * 0x40 + lVar13);
    uVar27 = _LC8;
    uVar29 = _LC8;
    uVar30 = _LC8;
    uVar31 = _LC8;
    local_f0 = auVar38;
    local_e0 = auVar39;
    while( true ) {
      if (pauVar20 < pauVar18) break;
      auVar5 = pauVar18[1];
      auVar6 = *pauVar18;
      lVar14 = *plVar10;
      auVar32._0_4_ = auVar5._0_4_ + auVar6._0_4_;
      auVar32._4_4_ = auVar5._4_4_ + auVar6._4_4_;
      auVar32._8_4_ = auVar5._8_4_ + auVar6._8_4_;
      auVar32._12_4_ = auVar5._12_4_ + auVar6._12_4_;
      piVar1 = (int *)plVar10[1];
      puVar11 = (uint *)plVar10[2];
      auVar28._0_4_ =
           -(uint)((int)((auVar32._0_4_ - *(float *)(lVar14 + 0x20)) * *(float *)(lVar14 + 0x30) +
                        _LC15) < *piVar1) & *puVar11;
      auVar28._4_4_ =
           -(uint)((int)((auVar32._4_4_ - *(float *)(lVar14 + 0x24)) * *(float *)(lVar14 + 0x34) +
                        _UNK_001440f4) < piVar1[1]) & puVar11[1];
      auVar28._8_4_ =
           -(uint)((int)((auVar32._8_4_ - *(float *)(lVar14 + 0x28)) * *(float *)(lVar14 + 0x38) +
                        _UNK_001440f8) < piVar1[2]) & puVar11[2];
      auVar28._12_4_ =
           -(uint)((int)((auVar32._12_4_ - *(float *)(lVar14 + 0x2c)) * *(float *)(lVar14 + 0x3c) +
                        _UNK_001440fc) < piVar1[3]) & puVar11[3];
      iVar22 = movmskps((int)puVar11,auVar28);
      if (iVar22 == 0) {
        auVar37._4_4_ = uVar29;
        auVar37._0_4_ = uVar27;
        auVar37._8_4_ = uVar30;
        auVar37._12_4_ = uVar31;
        pauVar21 = pauVar20;
        while( true ) {
          auVar28 = pauVar21[1];
          auVar7 = *pauVar21;
          lVar17 = lVar17 + 1;
          pauVar20 = pauVar21 + -4;
          auVar35._0_4_ = auVar28._0_4_ + auVar7._0_4_;
          auVar35._4_4_ = auVar28._4_4_ + auVar7._4_4_;
          auVar35._8_4_ = auVar28._8_4_ + auVar7._8_4_;
          auVar35._12_4_ = auVar28._12_4_ + auVar7._12_4_;
          auVar33._0_4_ =
               -(uint)((int)((auVar35._0_4_ - *(float *)(lVar14 + 0x20)) * *(float *)(lVar14 + 0x30)
                            + _LC15) < *piVar1) & *puVar11;
          auVar33._4_4_ =
               -(uint)((int)((auVar35._4_4_ - *(float *)(lVar14 + 0x24)) * *(float *)(lVar14 + 0x34)
                            + _UNK_001440f4) < piVar1[1]) & puVar11[1];
          auVar33._8_4_ =
               -(uint)((int)((auVar35._8_4_ - *(float *)(lVar14 + 0x28)) * *(float *)(lVar14 + 0x38)
                            + _UNK_001440f8) < piVar1[2]) & puVar11[2];
          auVar33._12_4_ =
               -(uint)((int)((auVar35._12_4_ - *(float *)(lVar14 + 0x2c)) *
                             *(float *)(lVar14 + 0x3c) + _UNK_001440fc) < piVar1[3]) & puVar11[3];
          uVar24 = movmskps((int)pTVar25,auVar33);
          pTVar25 = (TaskGroupContext *)(ulong)uVar24;
          if (uVar24 != 0) break;
          auVar37 = minps(auVar37,auVar7);
          local_f0 = maxps(local_f0,auVar28);
          auVar39 = minps(auVar39,auVar35);
          auVar38 = maxps(auVar38,auVar35);
          pauVar21 = pauVar20;
          if (pauVar20 < pauVar18) {
            uVar27 = auVar37._0_4_;
            uVar29 = auVar37._4_4_;
            uVar30 = auVar37._8_4_;
            uVar31 = auVar37._12_4_;
            goto LAB_00120a8c;
          }
        }
        pTVar25 = *(TaskGroupContext **)pauVar18[2];
        *pauVar18 = auVar7;
        auVar34 = maxps(auVar34,auVar35);
        local_e0 = minps(local_e0,auVar35);
        auVar40 = maxps(auVar40,auVar28);
        auVar28 = minps(auVar37,auVar6);
        auVar39 = minps(auVar39,auVar32);
        auVar38 = maxps(auVar38,auVar32);
        local_f0 = maxps(local_f0,auVar5);
        uVar12 = *(undefined8 *)(pauVar21[1] + 8);
        auVar36 = minps(auVar36,auVar7);
        uVar27 = auVar28._0_4_;
        uVar29 = auVar28._4_4_;
        uVar30 = auVar28._8_4_;
        uVar31 = auVar28._12_4_;
        uVar4 = *(undefined4 *)(pauVar18[2] + 8);
        *(undefined8 *)pauVar18[1] = *(undefined8 *)pauVar21[1];
        *(undefined8 *)(pauVar18[1] + 8) = uVar12;
        *(undefined8 *)pauVar18[2] = *(undefined8 *)pauVar21[2];
        *(undefined4 *)(pauVar18[2] + 8) = *(undefined4 *)(pauVar21[2] + 8);
        *pauVar21 = auVar6;
        pauVar21[1] = auVar5;
        *(undefined4 *)(pauVar21[2] + 8) = uVar4;
        *(TaskGroupContext **)pauVar21[2] = pTVar25;
        local_80 = pTVar25;
      }
      else {
        auVar36 = minps(auVar36,auVar6);
        auVar40 = maxps(auVar40,auVar5);
        auVar34 = maxps(auVar34,auVar32);
        local_e0 = minps(local_e0,auVar32);
      }
      pauVar18 = pauVar18 + 4;
      lVar23 = lVar23 + 1;
    }
LAB_00120a8c:
    *(ulong *)(*plVar8 + 0x40 + lVar16 * 8) = uVar26;
    *(ulong *)(*plVar8 + 0x280 + lVar16 * 8) = ((long)pauVar18 - lVar13 >> 6) - uVar26;
    lVar16 = lVar16 * 0x50;
    pauVar20 = (undefined1 (*) [16])(*plVar8 + 0xcc0 + lVar16);
    lVar13 = *plVar8 + lVar16;
    pauVar20[3] = auVar34;
    *pauVar20 = auVar36;
    pauVar20[1] = auVar40;
    *(undefined8 *)pauVar20[2] = local_e0._0_8_;
    *(undefined8 *)(pauVar20[2] + 8) = local_e0._8_8_;
    *(undefined8 *)(lVar13 + 0xd00) = 0;
    *(long *)(lVar13 + 0xd08) = lVar23 + -1;
    puVar3 = (undefined4 *)(*plVar8 + 0x20c0 + lVar16);
    lVar16 = lVar16 + *plVar8;
    *puVar3 = uVar27;
    puVar3[1] = uVar29;
    puVar3[2] = uVar30;
    puVar3[3] = uVar31;
    *(undefined8 *)(puVar3 + 4) = local_f0._0_8_;
    *(undefined8 *)(puVar3 + 6) = local_f0._8_8_;
    *(undefined1 (*) [16])(puVar3 + 8) = auVar39;
    *(undefined1 (*) [16])(puVar3 + 0xc) = auVar38;
    *(undefined8 *)(lVar16 + 0x2100) = 0;
    *(long *)(lVar16 + 0x2108) = lVar17;
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x001210d5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143ae8;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* unsigned long embree::parallel_partitioning<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3}>(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef*, unsigned long, unsigned long,
   embree::EmptyTy const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2} const&, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&, unsigned long) */

ulong embree::
      parallel_partitioning<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::____:PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                (BuildRef *param_1,ulong param_2,ulong param_3,EmptyTy *param_4,
                PrimInfoT_conflict *param_5,PrimInfoT_conflict *param_6,
                _lambda_embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>_>__BuildRef_const___1_
                *param_7,_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>_>__BuildRef_const___2_
                         *param_8,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                *param_9,ulong param_10)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  undefined4 uVar4;
  long lVar5;
  uint *puVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  bool bVar12;
  float fVar13;
  PrimInfoT_conflict **ppPVar14;
  PrimInfoT_conflict *pPVar15;
  long lVar16;
  long lVar17;
  undefined1 (*pauVar18) [16];
  PrimInfoT_conflict **ppPVar19;
  long lVar20;
  PrimInfoT_conflict *pPVar21;
  TaskScheduler *pTVar22;
  int iVar23;
  PrimInfoT_conflict **ppPVar24;
  uint uVar25;
  long in_R11;
  PrimInfoT_conflict *pPVar26;
  long in_FS_OFFSET;
  undefined1 auVar27 [16];
  undefined1 auVar28 [16];
  undefined1 auVar29 [16];
  int iVar30;
  int iVar33;
  int iVar34;
  int iVar35;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar36 [16];
  uint uVar37;
  uint uVar38;
  uint uVar39;
  float fVar40;
  float fVar41;
  float fVar42;
  float fVar43;
  float fVar44;
  float fVar45;
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  PrimInfoT_conflict *local_128;
  long local_120;
  long local_118;
  PrimInfoT_conflict *local_110;
  PrimInfoT_conflict *local_108;
  PrimInfoT_conflict *local_100;
  PrimInfoT_conflict **local_f8;
  PrimInfoT_conflict **local_f0;
  PrimInfoT_conflict **local_e8;
  long *local_e0;
  long *local_d8;
  PrimInfoT_conflict *local_d0;
  PrimInfoT_conflict *pPStack_c8;
  undefined8 local_c0;
  PrimInfoT_conflict ***pppPStack_b8;
  TaskGroupContext *local_b0;
  PrimInfoT_conflict *local_a0;
  PrimInfoT_conflict *pPStack_98;
  undefined8 local_90;
  PrimInfoT_conflict ***pppPStack_88;
  TaskGroupContext *local_80;
  long local_48;
  
  fVar13 = _LC15;
  pPVar26 = (PrimInfoT_conflict *)(param_3 - param_2);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_128 = (PrimInfoT_conflict *)(param_1 + param_2 * 0x40);
  if (pPVar26 < param_10) {
    pPVar26 = (PrimInfoT_conflict *)(param_1 + param_3 * 0x40 + -0x40);
    for (; local_128 <= pPVar26; local_128 = local_128 + 0x40) {
      auVar27 = *(undefined1 (*) [16])(local_128 + 0x10);
      auVar28 = *(undefined1 (*) [16])local_128;
      lVar16 = *(long *)param_7;
      fVar48 = auVar27._0_4_ + auVar28._0_4_;
      fVar49 = auVar27._4_4_ + auVar28._4_4_;
      fVar50 = auVar27._8_4_ + auVar28._8_4_;
      fVar51 = auVar27._12_4_ + auVar28._12_4_;
      fVar44 = *(float *)(lVar16 + 0x20);
      fVar45 = *(float *)(lVar16 + 0x24);
      fVar46 = *(float *)(lVar16 + 0x28);
      fVar47 = *(float *)(lVar16 + 0x2c);
      fVar40 = *(float *)(lVar16 + 0x30);
      fVar41 = *(float *)(lVar16 + 0x34);
      fVar42 = *(float *)(lVar16 + 0x38);
      fVar43 = *(float *)(lVar16 + 0x3c);
      piVar1 = *(int **)(param_7 + 8);
      iVar30 = *piVar1;
      iVar33 = piVar1[1];
      iVar34 = piVar1[2];
      iVar35 = piVar1[3];
      puVar6 = *(uint **)(param_7 + 0x10);
      uVar25 = *puVar6;
      uVar37 = puVar6[1];
      uVar38 = puVar6[2];
      uVar39 = puVar6[3];
      auVar32._0_4_ = -(uint)((int)((fVar48 - fVar44) * fVar40 + fVar13) < iVar30) & uVar25;
      auVar32._4_4_ = -(uint)((int)((fVar49 - fVar45) * fVar41 + fVar13) < iVar33) & uVar37;
      auVar32._8_4_ = -(uint)((int)((fVar50 - fVar46) * fVar42 + fVar13) < iVar34) & uVar38;
      auVar32._12_4_ = -(uint)((int)((fVar51 - fVar47) * fVar43 + fVar13) < iVar35) & uVar39;
      iVar23 = movmskps((int)puVar6,auVar32);
      pPVar15 = pPVar26;
      if (iVar23 == 0) {
        while( true ) {
          auVar27 = *(undefined1 (*) [16])(pPVar15 + 0x10);
          auVar28 = *(undefined1 (*) [16])pPVar15;
          pPVar26 = pPVar15 + -0x40;
          auVar36._0_4_ = auVar27._0_4_ + auVar28._0_4_;
          auVar36._4_4_ = auVar27._4_4_ + auVar28._4_4_;
          auVar36._8_4_ = auVar27._8_4_ + auVar28._8_4_;
          auVar36._12_4_ = auVar27._12_4_ + auVar28._12_4_;
          auVar31._0_4_ =
               -(uint)((int)((auVar36._0_4_ - fVar44) * fVar40 + fVar13) < iVar30) & uVar25;
          auVar31._4_4_ =
               -(uint)((int)((auVar36._4_4_ - fVar45) * fVar41 + fVar13) < iVar33) & uVar37;
          auVar31._8_4_ =
               -(uint)((int)((auVar36._8_4_ - fVar46) * fVar42 + fVar13) < iVar34) & uVar38;
          auVar31._12_4_ =
               -(uint)((int)((auVar36._12_4_ - fVar47) * fVar43 + fVar13) < iVar35) & uVar39;
          uVar25 = movmskps((int)param_9,auVar31);
          param_9 = (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                     *)(ulong)uVar25;
          if (uVar25 != 0) break;
          *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + 1;
          auVar28 = minps(*(undefined1 (*) [16])param_6,auVar28);
          *(undefined1 (*) [16])param_6 = auVar28;
          auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar27);
          *(undefined1 (*) [16])(param_6 + 0x10) = auVar27;
          auVar27 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar36);
          *(undefined1 (*) [16])(param_6 + 0x20) = auVar27;
          auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar36);
          *(undefined1 (*) [16])(param_6 + 0x30) = auVar27;
          if (pPVar26 < local_128) goto LAB_001219cb;
          lVar16 = *(long *)param_7;
          fVar44 = *(float *)(lVar16 + 0x20);
          fVar45 = *(float *)(lVar16 + 0x24);
          fVar46 = *(float *)(lVar16 + 0x28);
          fVar47 = *(float *)(lVar16 + 0x2c);
          fVar40 = *(float *)(lVar16 + 0x30);
          fVar41 = *(float *)(lVar16 + 0x34);
          fVar42 = *(float *)(lVar16 + 0x38);
          fVar43 = *(float *)(lVar16 + 0x3c);
          piVar1 = *(int **)(param_7 + 8);
          iVar30 = *piVar1;
          iVar33 = piVar1[1];
          iVar34 = piVar1[2];
          iVar35 = piVar1[3];
          puVar6 = *(uint **)(param_7 + 0x10);
          uVar25 = *puVar6;
          uVar37 = puVar6[1];
          uVar38 = puVar6[2];
          uVar39 = puVar6[3];
          pPVar15 = pPVar26;
        }
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + 1;
        auVar28 = minps(*(undefined1 (*) [16])param_5,auVar28);
        *(undefined1 (*) [16])param_5 = auVar28;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar27);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar27;
        auVar27 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar36);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar36);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar27;
        auVar27 = *(undefined1 (*) [16])local_128;
        auVar28 = *(undefined1 (*) [16])(local_128 + 0x10);
        *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + 1;
        auVar32 = minps(*(undefined1 (*) [16])param_6,auVar27);
        *(undefined1 (*) [16])param_6 = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar28);
        auVar29._0_4_ = auVar28._0_4_ + auVar27._0_4_;
        auVar29._4_4_ = auVar28._4_4_ + auVar27._4_4_;
        auVar29._8_4_ = auVar28._8_4_ + auVar27._8_4_;
        auVar29._12_4_ = auVar28._12_4_ + auVar27._12_4_;
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar32;
        auVar27 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar29);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar29);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar27;
        uVar7 = *(undefined8 *)(pPVar15 + 8);
        uVar8 = *(undefined8 *)local_128;
        uVar9 = *(undefined8 *)(local_128 + 8);
        uVar10 = *(undefined8 *)(local_128 + 0x10);
        uVar11 = *(undefined8 *)(local_128 + 0x18);
        param_9 = *(_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                    **)(local_128 + 0x20);
        *(undefined8 *)local_128 = *(undefined8 *)pPVar15;
        *(undefined8 *)(local_128 + 8) = uVar7;
        uVar7 = *(undefined8 *)(pPVar15 + 0x18);
        uVar4 = *(undefined4 *)(local_128 + 0x28);
        *(undefined8 *)(local_128 + 0x10) = *(undefined8 *)(pPVar15 + 0x10);
        *(undefined8 *)(local_128 + 0x18) = uVar7;
        *(undefined8 *)(local_128 + 0x20) = *(undefined8 *)(pPVar15 + 0x20);
        *(undefined4 *)(local_128 + 0x28) = *(undefined4 *)(pPVar15 + 0x28);
        *(_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
          **)(pPVar15 + 0x20) = param_9;
        *(undefined8 *)pPVar15 = uVar8;
        *(undefined8 *)(pPVar15 + 8) = uVar9;
        *(undefined8 *)(pPVar15 + 0x10) = uVar10;
        *(undefined8 *)(pPVar15 + 0x18) = uVar11;
        *(undefined4 *)(pPVar15 + 0x28) = uVar4;
        local_80 = (TaskGroupContext *)param_9;
      }
      else {
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + 1;
        auVar28 = minps(*(undefined1 (*) [16])param_5,auVar28);
        *(undefined1 (*) [16])param_5 = auVar28;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar27);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar27;
        auVar27._4_4_ = fVar49;
        auVar27._0_4_ = fVar48;
        auVar27._8_4_ = fVar50;
        auVar27._12_4_ = fVar51;
        auVar27 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar27);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar27;
        auVar28._4_4_ = fVar49;
        auVar28._0_4_ = fVar48;
        auVar28._8_4_ = fVar50;
        auVar28._12_4_ = fVar51;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar28);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar27;
      }
    }
LAB_001219cb:
    pPVar26 = (PrimInfoT_conflict *)((long)local_128 - (long)param_1 >> 6);
    goto LAB_00121365;
  }
  ppPVar14 = (PrimInfoT_conflict **)embree::alignedMalloc(0x34c0,0x40);
  ppPVar14[5] = (PrimInfoT_conflict *)param_4;
  *ppPVar14 = local_128;
  ppPVar14[2] = (PrimInfoT_conflict *)param_7;
  ppPVar14[1] = pPVar26;
  ppPVar14[3] = (PrimInfoT_conflict *)param_8;
  ppPVar14[4] = (PrimInfoT_conflict *)param_9;
  pPVar15 = (PrimInfoT_conflict *)embree::TaskScheduler::threadCount();
  pPVar26 = (PrimInfoT_conflict *)((ulong)(pPVar26 + (param_10 - 1)) / param_10);
  if ((PrimInfoT_conflict *)0x40 < pPVar26) {
    pPVar26 = (PrimInfoT_conflict *)0x40;
  }
  if (pPVar26 <= pPVar15) {
    pPVar15 = pPVar26;
  }
  ppPVar14[6] = pPVar15;
  local_f8 = ppPVar14;
  if (pPVar15 == (PrimInfoT_conflict *)0x0) {
    ppPVar14[0x50] = (PrimInfoT_conflict *)0x0;
    ppPVar14[8] = ppPVar14[1];
  }
  else {
    pppPStack_b8 = &local_f8;
    pPStack_c8 = (PrimInfoT_conflict *)0x0;
    local_c0 = 1;
    local_100 = (PrimInfoT_conflict *)0x0;
    local_d0 = pPVar15;
    local_b0 = (TaskGroupContext *)&local_100;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar22 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar22,(_lambda___1_ *)&local_d0,(TaskGroupContext *)&local_100,(ulong)pPVar15,
                 true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) {
LAB_00121bd8:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar20 = *(long *)(lVar16 + 0xc00c0);
      uVar2 = lVar20 + 0x30 + (ulong)(-(int)lVar20 & 0x3f);
      if (0x80000 < uVar2) goto LAB_00121bd8;
      *(ulong *)(lVar16 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar16 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_00143ad0;
      puVar3[1] = local_d0;
      puVar3[2] = pPStack_c8;
      puVar3[5] = local_b0;
      puVar3[3] = local_c0;
      puVar3[4] = pppPStack_b8;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar5 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar3;
      *(long *)(lVar17 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar17 + 0x60) = (TaskGroupContext *)&local_100;
      *(long *)(lVar17 + 0x68) = lVar20;
      *(PrimInfoT_conflict **)(lVar17 + 0x70) = pPVar15;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    pPVar21 = local_100;
    if (local_100 != (PrimInfoT_conflict *)0x0) goto LAB_001218bb;
    pPVar26 = ppPVar14[6];
    pPVar15 = ppPVar14[1];
    ppPVar14[(long)(pPVar26 + 0x50)] = (PrimInfoT_conflict *)0x0;
    ppPVar14[(long)(pPVar26 + 8)] = pPVar15;
    if (pPVar26 != (PrimInfoT_conflict *)0x0) {
      pPVar26 = (PrimInfoT_conflict *)0x0;
      pauVar18 = (undefined1 (*) [16])(ppPVar14 + 0x198);
      do {
        auVar27 = minps(*(undefined1 (*) [16])param_5,*pauVar18);
        pPVar26 = pPVar26 + 1;
        *(undefined1 (*) [16])param_5 = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),pauVar18[1]);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar27;
        auVar27 = minps(*(undefined1 (*) [16])(param_5 + 0x20),pauVar18[2]);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),pauVar18[3]);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar27;
        *(long *)(param_5 + 0x40) = *(long *)(param_5 + 0x40) + *(long *)pauVar18[4];
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + *(long *)(pauVar18[4] + 8);
        auVar27 = minps(*(undefined1 (*) [16])param_6,pauVar18[0x140]);
        *(undefined1 (*) [16])param_6 = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),pauVar18[0x141]);
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar27;
        auVar27 = minps(*(undefined1 (*) [16])(param_6 + 0x20),pauVar18[0x142]);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),pauVar18[0x143]);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar27;
        *(long *)(param_6 + 0x40) = *(long *)(param_6 + 0x40) + *(long *)pauVar18[0x144];
        *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + *(long *)(pauVar18[0x144] + 8);
        pPVar15 = ppPVar14[6];
        pauVar18 = pauVar18 + 5;
      } while (pPVar26 < pPVar15);
      pPVar26 = ppPVar14[0x50];
      param_5 = pPVar26;
      if ((PrimInfoT_conflict *)0x1 < pPVar15) {
        ppPVar19 = ppPVar14 + 0x51;
        do {
          param_5 = param_5 + (long)*ppPVar19;
          ppPVar19 = ppPVar19 + 1;
        } while (ppPVar14 + (long)(pPVar15 + 0x50) != ppPVar19);
        pPVar21 = ppPVar14[1];
LAB_0012162e:
        local_110 = (PrimInfoT_conflict *)0x0;
        local_118 = 0;
        local_120 = 0;
        ppPVar19 = ppPVar14 + 8;
        bVar12 = false;
        local_128 = (PrimInfoT_conflict *)0x0;
        param_6 = (PrimInfoT_conflict *)0x0;
        lVar16 = 0;
        ppPVar24 = ppPVar19;
        lVar20 = 0;
        do {
          local_a0 = *ppPVar24;
          pPStack_98 = pPVar26 + (long)local_a0;
          pPStack_c8 = ppPVar24[1];
          if ((long)param_5 <= (long)ppPVar24[1]) {
            pPStack_c8 = param_5;
          }
          local_d0 = (PrimInfoT_conflict *)0x0;
          if (-1 < (long)pPStack_98) {
            local_d0 = pPStack_98;
          }
          if ((long)pPVar21 < (long)pPStack_98) {
            pPStack_98 = pPVar21;
          }
          if ((long)local_a0 < (long)param_5) {
            local_a0 = param_5;
          }
          in_R11 = lVar20;
          if ((long)local_d0 < (long)pPStack_c8) {
            local_128 = (PrimInfoT_conflict *)0x1;
            param_6 = param_6 + ((long)pPStack_c8 - (long)local_d0);
            in_R11 = lVar20 + 1;
            ppPVar14[lVar20 * 2 + 0x98] = local_d0;
            (ppPVar14 + lVar20 * 2 + 0x98)[1] = pPStack_c8;
          }
          if ((long)local_a0 < (long)pPStack_98) {
            lVar20 = lVar16 + 1;
            ppPVar14[lVar16 * 2 + 0x118] = local_a0;
            (ppPVar14 + lVar16 * 2 + 0x118)[1] = pPStack_98;
            lVar16 = lVar20;
            if (ppPVar24 + 1 == ppPVar19 + (long)pPVar15) goto LAB_001218e3;
            bVar12 = true;
          }
          else {
            lVar20 = lVar16;
            if (ppPVar19 + (long)pPVar15 == ppPVar24 + 1) goto code_r0x00121710;
          }
          pPVar26 = ppPVar24[0x49];
          lVar16 = lVar20;
          ppPVar24 = ppPVar24 + 1;
          lVar20 = in_R11;
        } while( true );
      }
      pPVar21 = ppPVar14[1];
      local_120 = 0;
      local_118 = 0;
      local_110 = (PrimInfoT_conflict *)0x0;
      if (pPVar15 != (PrimInfoT_conflict *)0x0) goto LAB_0012162e;
      goto LAB_00121350;
    }
  }
  pPVar26 = ppPVar14[0x50];
  goto LAB_00121350;
code_r0x00121710:
  if (bVar12) goto LAB_001218e3;
  while ((pPVar26 = param_5, (char)local_128 != '\0' &&
         (local_120 = in_R11, local_110 = param_6, param_6 != (PrimInfoT_conflict *)0x0))) {
    local_f0 = &local_110;
    local_e0 = &local_120;
    local_d8 = &local_118;
    pppPStack_88 = &local_f0;
    pPStack_98 = (PrimInfoT_conflict *)0x0;
    local_90 = 1;
    local_108 = (PrimInfoT_conflict *)0x0;
    local_e8 = ppPVar14;
    local_a0 = pPVar15;
    local_80 = (TaskGroupContext *)&local_108;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar22 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar22,(_lambda___1_ *)&local_a0,(TaskGroupContext *)&local_108,(ulong)pPVar15,
                 true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) goto LAB_00121bd8;
      lVar20 = *(long *)(lVar16 + 0xc00c0);
      uVar2 = lVar20 + 0x30 + (ulong)(-(int)lVar20 & 0x3f);
      if (0x80000 < uVar2) goto LAB_00121bd8;
      *(ulong *)(lVar16 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar16 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_00143ae8;
      puVar3[1] = local_a0;
      puVar3[2] = pPStack_98;
      puVar3[3] = local_90;
      puVar3[4] = pppPStack_88;
      puVar3[5] = local_80;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar5 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar3;
      *(long *)(lVar17 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar17 + 0x60) = (TaskGroupContext *)&local_108;
      *(long *)(lVar17 + 0x68) = lVar20;
      *(PrimInfoT_conflict **)(lVar17 + 0x70) = pPVar15;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    pPVar21 = local_108;
    if (local_108 == (PrimInfoT_conflict *)0x0) break;
LAB_001218bb:
    ppPVar14 = &local_a0;
    local_a0 = pPVar21;
    std::__exception_ptr::exception_ptr::_M_addref();
    lVar16 = std::rethrow_exception(ppPVar14);
LAB_001218e3:
    local_118 = lVar16;
  }
LAB_00121350:
  if (ppPVar14 != (PrimInfoT_conflict **)0x0) {
    embree::alignedFree(ppPVar14);
  }
  pPVar26 = pPVar26 + param_2;
LAB_00121365:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return (ulong)pPVar26;
}



/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&, embree::sse2::PrimInfoExtRange&) */

long __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
::parallel_object_split
          (HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
           *this,BinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  ulong uVar1;
  ulong uVar2;
  long lVar3;
  ulong uVar4;
  long in_FS_OFFSET;
  EmptyTy local_11b;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>_>__BuildRef_const___2_
  local_11a;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
  local_119;
  BinSplit *local_118;
  undefined4 *local_110;
  undefined8 *local_108;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  long local_b8;
  long local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined4 local_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined8 local_48;
  undefined8 uStack_40;
  long local_30;
  
  uVar1 = *(ulong *)(param_2 + 0x48);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_58 = *(undefined4 *)(param_1 + 8);
  uVar2 = *(ulong *)(param_2 + 0x40);
  local_b8 = 0;
  lVar3 = (long)(1 << ((byte)*(undefined4 *)(param_1 + 4) & 0x1f));
  local_e8 = _LC6;
  uStack_e4 = _LC6;
  uStack_e0 = _LC6;
  uStack_dc = _LC6;
  local_48 = (&mm_lookupmask_ps)[lVar3 * 2];
  uStack_40 = *(undefined8 *)(embree::Scene::progressMonitor + lVar3 * 0x10);
  local_c8 = _LC6;
  uStack_c4 = _LC6;
  uStack_c0 = _LC6;
  uStack_bc = _LC6;
  local_110 = &local_58;
  local_98 = _LC6;
  uStack_94 = _LC6;
  uStack_90 = _LC6;
  uStack_8c = _LC6;
  local_78 = _LC6;
  uStack_74 = _LC6;
  uStack_70 = _LC6;
  uStack_6c = _LC6;
  local_f8 = _LC8;
  uStack_f4 = _LC8;
  uStack_f0 = _LC8;
  uStack_ec = _LC8;
  local_d8 = _LC8;
  uStack_d4 = _LC8;
  uStack_d0 = _LC8;
  uStack_cc = _LC8;
  local_a8 = _LC8;
  uStack_a4 = _LC8;
  uStack_a0 = _LC8;
  uStack_9c = _LC8;
  local_88 = _LC8;
  uStack_84 = _LC8;
  uStack_80 = _LC8;
  uStack_7c = _LC8;
  local_b0 = 0;
  local_68 = 0;
  local_60 = 0;
  local_108 = &local_48;
  local_118 = param_1;
  uStack_54 = local_58;
  uStack_50 = local_58;
  uStack_4c = local_58;
  uVar4 = parallel_partitioning<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::____:PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                    (*(BuildRef **)this,uVar2,uVar1,&local_11b,(PrimInfoT_conflict *)&local_f8,
                     (PrimInfoT_conflict *)&local_a8,
                     (_lambda_embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>_>__BuildRef_const___1_
                      *)&local_118,&local_11a,&local_119,0x80);
  *(ulong *)(param_3 + 0x40) = uVar2;
  *(ulong *)(param_3 + 0x48) = uVar4;
  *(ulong *)(param_3 + 0x50) = uVar4;
  *(ulong *)param_3 = CONCAT44(uStack_f4,local_f8);
  *(ulong *)(param_3 + 8) = CONCAT44(uStack_ec,uStack_f0);
  *(ulong *)(param_3 + 0x10) = CONCAT44(uStack_e4,local_e8);
  *(ulong *)(param_3 + 0x18) = CONCAT44(uStack_dc,uStack_e0);
  *(undefined4 *)(param_3 + 0x20) = local_d8;
  *(undefined4 *)(param_3 + 0x24) = uStack_d4;
  *(undefined4 *)(param_3 + 0x28) = uStack_d0;
  *(undefined4 *)(param_3 + 0x2c) = uStack_cc;
  *(undefined4 *)(param_3 + 0x30) = local_c8;
  *(undefined4 *)(param_3 + 0x34) = uStack_c4;
  *(undefined4 *)(param_3 + 0x38) = uStack_c0;
  *(undefined4 *)(param_3 + 0x3c) = uStack_bc;
  *(ulong *)(param_4 + 0x40) = uVar4;
  *(ulong *)(param_4 + 0x48) = uVar1;
  *(ulong *)(param_4 + 0x50) = uVar1;
  *(ulong *)param_4 = CONCAT44(uStack_a4,local_a8);
  *(ulong *)(param_4 + 8) = CONCAT44(uStack_9c,uStack_a0);
  *(undefined4 *)(param_4 + 0x10) = local_98;
  *(undefined4 *)(param_4 + 0x14) = uStack_94;
  *(undefined4 *)(param_4 + 0x18) = uStack_90;
  *(undefined4 *)(param_4 + 0x1c) = uStack_8c;
  *(undefined4 *)(param_4 + 0x20) = local_88;
  *(undefined4 *)(param_4 + 0x24) = uStack_84;
  *(undefined4 *)(param_4 + 0x28) = uStack_80;
  *(undefined4 *)(param_4 + 0x2c) = uStack_7c;
  *(undefined4 *)(param_4 + 0x30) = local_78;
  *(undefined4 *)(param_4 + 0x34) = uStack_74;
  *(undefined4 *)(param_4 + 0x38) = uStack_70;
  *(undefined4 *)(param_4 + 0x3c) = uStack_6c;
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_b0 - local_b8;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&, embree::sse2::PrimInfoExtRange&) */

void __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
::split(HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
        *this,BinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
       PrimInfoExtRange *param_4)

{
  undefined8 *puVar1;
  int *piVar2;
  undefined4 uVar3;
  float fVar4;
  int iVar5;
  ulong uVar6;
  undefined8 uVar7;
  long lVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 *puVar13;
  undefined1 (*pauVar14) [16];
  undefined1 (*pauVar15) [16];
  ulong uVar16;
  long *plVar17;
  long lVar18;
  TaskScheduler *pTVar19;
  uint uVar20;
  undefined1 (*pauVar21) [16];
  ulong uVar22;
  long lVar23;
  undefined8 *puVar24;
  ulong uVar25;
  long **in_R10;
  long lVar26;
  long *plVar27;
  long *unaff_R14;
  long in_FS_OFFSET;
  float fVar28;
  undefined1 auVar29 [16];
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  undefined1 auVar45 [16];
  undefined1 auVar46 [16];
  undefined1 auVar47 [16];
  undefined1 local_210 [16];
  undefined1 local_200 [16];
  uint local_1f0;
  uint uStack_1ec;
  uint uStack_1e8;
  uint uStack_1e4;
  long *local_1d0;
  long *plStack_1c8;
  long lStack_1c0;
  long local_1b8;
  long *local_1b0;
  long *local_1a8;
  long local_1a0;
  long local_198;
  long lStack_190;
  long lStack_188;
  undefined8 uStack_180;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
  *pHStack_178;
  long **pplStack_170;
  TaskGroupContext *pTStack_168;
  long *local_160;
  long lStack_158;
  undefined8 local_150;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
  *pHStack_148;
  long **local_140;
  TaskGroupContext *pTStack_138;
  long local_130;
  long lStack_128;
  undefined8 local_120;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
  *pHStack_118;
  long **local_110;
  TaskGroupContext *pTStack_108;
  long local_100;
  long lStack_f8;
  undefined8 local_f0;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
  *pHStack_e8;
  long **local_e0;
  TaskGroupContext *pTStack_d8;
  undefined8 local_b0;
  undefined8 uStack_a8;
  undefined8 local_a0;
  undefined8 uStack_98;
  undefined8 local_90;
  undefined8 uStack_88;
  undefined8 local_80;
  undefined8 uStack_78;
  ulong local_70;
  ulong local_68;
  ulong local_60;
  long local_48;
  
  local_b0 = *(undefined8 *)param_2;
  uStack_a8 = *(undefined8 *)(param_2 + 8);
  local_90 = *(undefined8 *)(param_2 + 0x20);
  uStack_88 = *(undefined8 *)(param_2 + 0x28);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  uVar16 = *(ulong *)(param_2 + 0x40);
  uVar6 = *(ulong *)(param_2 + 0x48);
  local_a0 = *(undefined8 *)(param_2 + 0x10);
  uStack_98 = *(undefined8 *)(param_2 + 0x18);
  uVar25 = *(ulong *)(param_2 + 0x50);
  uVar20 = *(uint *)(param_1 + 4);
  pauVar15 = (undefined1 (*) [16])(ulong)uVar20;
  local_80 = *(undefined8 *)(param_2 + 0x30);
  uStack_78 = *(undefined8 *)(param_2 + 0x38);
  local_70 = uVar16;
  local_68 = uVar6;
  local_60 = uVar25;
  if (uVar20 != 0xffffffff) {
    if (uVar6 - uVar16 < 0x400) {
      iVar5 = *(int *)(param_1 + 8);
      unaff_R14 = *(long **)this;
      lVar26 = 0;
      lVar23 = 1;
      auVar41._0_8_ = CONCAT44(_LC6,_LC6);
      auVar41._8_4_ = _LC6;
      auVar41._12_4_ = _LC6;
      auVar42._0_8_ = CONCAT44(_LC8,_LC8);
      auVar42._8_4_ = _LC8;
      auVar42._12_4_ = _LC8;
      auVar37 = *(undefined1 (*) [16])(&mm_lookupmask_ps + (long)(1 << ((byte)uVar20 & 0x1f)) * 2);
      auVar43._8_4_ = _LC6;
      auVar43._0_8_ = auVar41._0_8_;
      auVar43._12_4_ = _LC6;
      auVar44._8_4_ = _LC8;
      auVar44._0_8_ = auVar42._0_8_;
      auVar44._12_4_ = _LC8;
      auVar45._8_4_ = _LC6;
      auVar45._0_8_ = auVar41._0_8_;
      auVar45._12_4_ = _LC6;
      auVar46._8_4_ = _LC8;
      auVar46._0_8_ = auVar42._0_8_;
      auVar46._12_4_ = _LC8;
      pauVar21 = (undefined1 (*) [16])(unaff_R14 + uVar6 * 8 + -8);
      local_210 = auVar41;
      local_200 = auVar42;
      for (pauVar14 = (undefined1 (*) [16])(unaff_R14 + uVar16 * 8); pauVar14 <= pauVar21;
          pauVar14 = pauVar14 + 4) {
        auVar38 = pauVar14[1];
        auVar39 = *pauVar14;
        auVar30._0_4_ = auVar38._0_4_ + auVar39._0_4_;
        auVar30._4_4_ = auVar38._4_4_ + auVar39._4_4_;
        auVar30._8_4_ = auVar38._8_4_ + auVar39._8_4_;
        auVar30._12_4_ = auVar38._12_4_ + auVar39._12_4_;
        local_1f0 = auVar37._0_4_;
        uStack_1ec = auVar37._4_4_;
        uStack_1e8 = auVar37._8_4_;
        uStack_1e4 = auVar37._12_4_;
        auVar33._0_4_ =
             -(uint)((int)((auVar30._0_4_ - *(float *)(param_1 + 0x20)) * *(float *)(param_1 + 0x30)
                          + _LC15) < iVar5) & local_1f0;
        auVar33._4_4_ =
             -(uint)((int)((auVar30._4_4_ - *(float *)(param_1 + 0x24)) * *(float *)(param_1 + 0x34)
                          + _UNK_001440f4) < iVar5) & uStack_1ec;
        auVar33._8_4_ =
             -(uint)((int)((auVar30._8_4_ - *(float *)(param_1 + 0x28)) * *(float *)(param_1 + 0x38)
                          + _UNK_001440f8) < iVar5) & uStack_1e8;
        auVar33._12_4_ =
             -(uint)((int)((auVar30._12_4_ - *(float *)(param_1 + 0x2c)) *
                           *(float *)(param_1 + 0x3c) + _UNK_001440fc) < iVar5) & uStack_1e4;
        uVar20 = movmskps((int)pauVar15,auVar33);
        pauVar15 = (undefined1 (*) [16])(ulong)uVar20;
        if (uVar20 == 0) {
          while( true ) {
            pauVar15 = pauVar21;
            auVar40 = pauVar15[1];
            auVar36 = *pauVar15;
            lVar26 = lVar26 + 1;
            pauVar21 = pauVar15 + -4;
            auVar34._0_4_ = auVar40._0_4_ + auVar36._0_4_;
            auVar34._4_4_ = auVar40._4_4_ + auVar36._4_4_;
            auVar34._8_4_ = auVar40._8_4_ + auVar36._8_4_;
            auVar34._12_4_ = auVar40._12_4_ + auVar36._12_4_;
            auVar31._0_4_ =
                 -(uint)((int)((auVar34._0_4_ - *(float *)(param_1 + 0x20)) *
                               *(float *)(param_1 + 0x30) + _LC15) < iVar5) & local_1f0;
            auVar31._4_4_ =
                 -(uint)((int)((auVar34._4_4_ - *(float *)(param_1 + 0x24)) *
                               *(float *)(param_1 + 0x34) + _UNK_001440f4) < iVar5) & uStack_1ec;
            auVar31._8_4_ =
                 -(uint)((int)((auVar34._8_4_ - *(float *)(param_1 + 0x28)) *
                               *(float *)(param_1 + 0x38) + _UNK_001440f8) < iVar5) & uStack_1e8;
            auVar31._12_4_ =
                 -(uint)((int)((auVar34._12_4_ - *(float *)(param_1 + 0x2c)) *
                               *(float *)(param_1 + 0x3c) + _UNK_001440fc) < iVar5) & uStack_1e4;
            uVar20 = movmskps((int)in_R10,auVar31);
            in_R10 = (long **)(ulong)uVar20;
            if (uVar20 != 0) break;
            local_200 = minps(local_200,auVar36);
            local_210 = maxps(local_210,auVar40);
            auVar42 = minps(auVar42,auVar34);
            auVar41 = maxps(auVar41,auVar34);
            if (pauVar21 < pauVar14) goto LAB_00121f77;
          }
          in_R10 = *(long ***)pauVar14[2];
          auVar45 = maxps(auVar45,auVar40);
          auVar46 = minps(auVar46,auVar36);
          auVar44 = minps(auVar44,auVar34);
          local_210 = maxps(local_210,auVar38);
          *pauVar14 = auVar36;
          auVar42 = minps(auVar42,auVar30);
          auVar41 = maxps(auVar41,auVar30);
          local_200 = minps(local_200,auVar39);
          auVar43 = maxps(auVar43,auVar34);
          pauVar14[1] = pauVar15[1];
          uVar3 = *(undefined4 *)(pauVar14[2] + 8);
          *(undefined8 *)pauVar14[2] = *(undefined8 *)pauVar15[2];
          *(undefined4 *)(pauVar14[2] + 8) = *(undefined4 *)(pauVar15[2] + 8);
          *pauVar15 = auVar39;
          pauVar15[1] = auVar38;
          *(undefined4 *)(pauVar15[2] + 8) = uVar3;
          *(long ***)pauVar15[2] = in_R10;
          local_e0 = in_R10;
        }
        else {
          auVar46 = minps(auVar46,auVar39);
          auVar45 = maxps(auVar45,auVar38);
          auVar44 = minps(auVar44,auVar30);
          auVar43 = maxps(auVar43,auVar30);
        }
        lVar23 = lVar23 + 1;
      }
LAB_00121f77:
      *(ulong *)(param_3 + 0x40) = uVar16;
      auVar47._8_8_ = lVar26;
      auVar47._0_8_ = lVar23 + -1;
      lVar23 = (long)pauVar14 - (long)unaff_R14 >> 6;
      *(undefined1 (*) [16])param_3 = auVar46;
      *(long *)(param_3 + 0x48) = lVar23;
      *(long *)(param_3 + 0x50) = lVar23;
      *(undefined1 (*) [16])(param_3 + 0x10) = auVar45;
      *(undefined1 (*) [16])(param_3 + 0x20) = auVar44;
      *(undefined1 (*) [16])(param_3 + 0x30) = auVar43;
      *(long *)(param_4 + 0x40) = lVar23;
      *(ulong *)(param_4 + 0x48) = uVar6;
      *(ulong *)(param_4 + 0x50) = uVar6;
      *(undefined8 *)param_4 = local_200._0_8_;
      *(undefined8 *)(param_4 + 8) = local_200._8_8_;
      *(undefined8 *)(param_4 + 0x10) = local_210._0_8_;
      *(undefined8 *)(param_4 + 0x18) = local_210._8_8_;
      *(undefined1 (*) [16])(param_4 + 0x20) = auVar42;
      *(undefined1 (*) [16])(param_4 + 0x30) = auVar41;
    }
    else {
      auVar47 = parallel_object_split(this,param_1,(PrimInfoExtRange *)&local_b0,param_3,param_4);
    }
    if (uVar6 != uVar25) {
      uVar25 = uVar25 - uVar6;
      fVar28 = ((float)auVar47._0_8_ / (float)(auVar47._8_8_ + auVar47._0_8_)) * (float)uVar25;
      if ((float)((uint)fVar28 & _LC25) < _LC22) {
        fVar28 = (float)((uint)(float)(int)fVar28 | ~_LC25 & (uint)fVar28);
      }
      if (__LC24 <= fVar28) {
        uVar16 = (long)(fVar28 - __LC24) ^ 0x8000000000000000;
      }
      else {
        uVar16 = (ulong)fVar28;
      }
      if (uVar25 < uVar16) {
        uVar16 = uVar25;
      }
      *(ulong *)(param_3 + 0x50) = *(long *)(param_3 + 0x48) + uVar16;
      lVar23 = *(long *)(param_4 + 0x48);
      *(ulong *)(param_4 + 0x50) = (uVar25 + lVar23) - uVar16;
      plVar17 = (long *)(*(long *)(param_3 + 0x50) - *(long *)(param_3 + 0x48));
      lVar26 = *(long *)(param_4 + 0x40);
      plVar27 = (long *)(lVar23 - lVar26);
      local_1b0 = plVar17;
      local_1a8 = plVar27;
      if (plVar17 == (long *)0x0) goto LAB_00121fd8;
      if (plVar17 < plVar27) {
        local_130 = (long)plVar17 + lVar26;
        local_110 = &local_1a8;
        local_1a0 = 0;
        local_120 = 0x40;
        lStack_128 = lVar26;
        pHStack_118 = this;
        pTStack_108 = (TaskGroupContext *)&local_1a0;
        lVar23 = embree::TaskScheduler::thread();
        if (lVar23 == 0) {
          pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
          TaskScheduler::
          spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                    (pTVar19,(_lambda___1_ *)&local_130,(TaskGroupContext *)&local_1a0,
                     (ulong)plVar17,true);
        }
        else {
          if (0xfff < *(ulong *)(lVar23 + 0x40080)) goto LAB_00122dc2;
          lVar26 = *(long *)(lVar23 + 0xc00c0);
          uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
          if (0x80000 < uVar16) goto LAB_00122dc2;
          *(ulong *)(lVar23 + 0xc00c0) = uVar16;
          puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
          *puVar24 = &PTR_execute_00143a28;
          puVar24[1] = local_130;
          puVar24[2] = lStack_128;
          puVar24[3] = local_120;
          puVar24[4] = pHStack_118;
          puVar24[5] = local_110;
          puVar24[6] = pTStack_108;
          lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
          piVar2 = (int *)(lVar23 + 0x40 + lVar18);
          lVar8 = *(long *)(lVar23 + 0xc0100);
          *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
          *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
          lVar18 = lVar18 + lVar23;
          *(undefined8 **)(lVar18 + 0x50) = puVar24;
          *(long *)(lVar18 + 0x58) = lVar8;
          *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&local_1a0;
          *(long *)(lVar18 + 0x68) = lVar26;
          *(long **)(lVar18 + 0x70) = plVar17;
          if (lVar8 != 0) {
            LOCK();
            *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
            UNLOCK();
          }
          LOCK();
          if (*piVar2 == 0) {
            *piVar2 = 1;
          }
          UNLOCK();
          LOCK();
          *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
          UNLOCK();
          plVar17 = (long *)(lVar23 + 0x40040);
          if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
            LOCK();
            *plVar17 = *(long *)(lVar23 + 0x40080) + -1;
            UNLOCK();
          }
        }
        embree::TaskScheduler::wait();
        lVar26 = local_1a0;
        lVar23 = local_100;
      }
      else {
        local_e0 = &local_1b0;
        local_f0 = 0x40;
        local_198 = 0;
        local_100 = lVar23;
        lStack_f8 = lVar26;
        pHStack_e8 = this;
        pTStack_d8 = (TaskGroupContext *)&local_198;
        lVar23 = embree::TaskScheduler::thread();
        if (lVar23 == 0) {
          pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
          TaskScheduler::
          spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                    (pTVar19,(_lambda___1_ *)&local_100,(TaskGroupContext *)&local_198,
                     (ulong)plVar27,true);
        }
        else {
          if (0xfff < *(ulong *)(lVar23 + 0x40080)) goto LAB_00122dc2;
          lVar26 = *(long *)(lVar23 + 0xc00c0);
          uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
          if (0x80000 < uVar16) goto LAB_00122dc2;
          *(ulong *)(lVar23 + 0xc00c0) = uVar16;
          puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
          *puVar24 = &PTR_execute_00143a40;
          puVar24[1] = local_100;
          puVar24[2] = lStack_f8;
          puVar24[3] = local_f0;
          puVar24[4] = pHStack_e8;
          puVar24[5] = local_e0;
          puVar24[6] = pTStack_d8;
          lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
          piVar2 = (int *)(lVar23 + 0x40 + lVar18);
          lVar8 = *(long *)(lVar23 + 0xc0100);
          *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
          *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
          lVar18 = lVar18 + lVar23;
          *(undefined8 **)(lVar18 + 0x50) = puVar24;
          *(long *)(lVar18 + 0x58) = lVar8;
          *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&local_198;
          *(long *)(lVar18 + 0x68) = lVar26;
          *(long **)(lVar18 + 0x70) = plVar27;
          if (lVar8 != 0) {
            LOCK();
            *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
            UNLOCK();
          }
          LOCK();
          if (*piVar2 == 0) {
            *piVar2 = 1;
          }
          UNLOCK();
          LOCK();
          *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
          UNLOCK();
          plVar27 = (long *)(lVar23 + 0x40040);
          if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
            LOCK();
            *plVar27 = *(long *)(lVar23 + 0x40080) + -1;
            UNLOCK();
          }
        }
        embree::TaskScheduler::wait();
        plVar17 = plVar27;
        lVar26 = local_198;
        lVar23 = local_100;
      }
      local_100 = lVar26;
      if (local_100 == 0) {
        *(long *)(param_4 + 0x40) = *(long *)(param_4 + 0x40) + (long)local_1b0;
        *(long *)(param_4 + 0x48) = *(long *)(param_4 + 0x48) + (long)local_1b0;
        *(long *)(param_4 + 0x50) = *(long *)(param_4 + 0x50) + (long)local_1b0;
        local_100 = lVar23;
      }
      else {
        do {
          param_4 = (PrimInfoExtRange *)&local_100;
          std::__exception_ptr::exception_ptr::_M_addref();
          lVar23 = std::rethrow_exception(param_4);
LAB_00122b28:
          local_140 = &local_1d0;
          local_1b8 = 0;
          local_150 = 0x40;
          local_160 = plVar17;
          lStack_158 = lVar23;
          pHStack_148 = this;
          pTStack_138 = (TaskGroupContext *)&local_1b8;
          lVar23 = embree::TaskScheduler::thread();
          if (lVar23 == 0) {
            pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
            plVar17 = unaff_R14;
            TaskScheduler::
            spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                      (pTVar19,(_lambda___1_ *)&local_160,(TaskGroupContext *)&local_1b8,
                       (ulong)unaff_R14,true);
          }
          else {
            if (0xfff < *(ulong *)(lVar23 + 0x40080)) goto LAB_00122dc2;
            lVar26 = *(long *)(lVar23 + 0xc00c0);
            uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
            if (0x80000 < uVar16) goto LAB_00122dc2;
            *(ulong *)(lVar23 + 0xc00c0) = uVar16;
            puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
            *puVar24 = &PTR_execute_00143a40;
            puVar24[1] = local_160;
            puVar24[2] = lStack_158;
            puVar24[3] = local_150;
            puVar24[4] = pHStack_148;
            puVar24[5] = local_140;
            puVar24[6] = pTStack_138;
            lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
            piVar2 = (int *)(lVar23 + 0x40 + lVar18);
            lVar8 = *(long *)(lVar23 + 0xc0100);
            *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
            *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
            lVar18 = lVar18 + lVar23;
            *(undefined8 **)(lVar18 + 0x50) = puVar24;
            *(long *)(lVar18 + 0x58) = lVar8;
            *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&local_1b8;
            *(long *)(lVar18 + 0x68) = lVar26;
            *(long **)(lVar18 + 0x70) = unaff_R14;
            if (lVar8 != 0) {
              LOCK();
              *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
              UNLOCK();
            }
            LOCK();
            if (*piVar2 == 0) {
              *piVar2 = 1;
            }
            UNLOCK();
            LOCK();
            *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
            UNLOCK();
            plVar17 = (long *)(lVar23 + 0x40040);
            if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
              LOCK();
              *plVar17 = *(long *)(lVar23 + 0x40080) + -1;
              UNLOCK();
            }
          }
          embree::TaskScheduler::wait();
          lVar26 = local_1b8;
          lVar23 = local_100;
joined_r0x001225ac:
          local_100 = lVar26;
        } while (local_100 != 0);
        *(long *)(param_4 + 0x40) = *(long *)(param_4 + 0x40) + (long)local_1d0;
        *(long *)(param_4 + 0x48) = *(long *)(param_4 + 0x48) + (long)local_1d0;
        *(long *)(param_4 + 0x50) = *(long *)(param_4 + 0x50) + (long)local_1d0;
        local_100 = lVar23;
      }
    }
    goto LAB_00121fd8;
  }
  lVar23 = uVar6 * 0x40;
  puVar1 = (undefined8 *)(*(long *)this + lVar23);
  puVar24 = (undefined8 *)(*(long *)this + uVar16 * 0x40);
  if (puVar1 != puVar24) {
    lVar26 = lVar23 + uVar16 * -0x40;
    uVar22 = lVar26 >> 6;
    if (uVar22 == 0) {
      std::
      __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar24,puVar1,0xfffffffffffffffe);
    }
    else {
      lVar8 = 0x3f;
      if (uVar22 != 0) {
        for (; uVar22 >> lVar8 == 0; lVar8 = lVar8 + -1) {
        }
      }
      std::
      __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar24,puVar1,(long)(int)lVar8 * 2);
      if (0x400 < lVar26) {
        puVar24 = puVar24 + 0x80;
        std::
        __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
                  ();
        for (; puVar1 != puVar24; puVar24 = puVar24 + 8) {
          fVar28 = *(float *)(puVar24 + 5);
          uVar9 = *puVar24;
          uVar10 = puVar24[1];
          uVar11 = puVar24[2];
          uVar12 = puVar24[3];
          uVar7 = puVar24[4];
          fVar4 = *(float *)(puVar24 + -3);
          puVar13 = puVar24;
          while (fVar28 < fVar4) {
            *puVar13 = puVar13[-8];
            puVar13[1] = puVar13[-7];
            puVar13[4] = puVar13[-4];
            puVar13[2] = puVar13[-6];
            puVar13[3] = puVar13[-5];
            *(undefined4 *)(puVar13 + 5) = *(undefined4 *)(puVar13 + -3);
            fVar4 = *(float *)(puVar13 + -0xb);
            puVar13 = puVar13 + -8;
          }
          puVar13[4] = uVar7;
          *puVar13 = uVar9;
          puVar13[1] = uVar10;
          puVar13[2] = uVar11;
          puVar13[3] = uVar12;
          *(float *)(puVar13 + 5) = fVar28;
        }
        goto LAB_00122261;
      }
    }
    std::
    __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
              (puVar24);
  }
LAB_00122261:
  uVar22 = uVar16 + uVar6 >> 1;
  if (uVar16 < uVar22) {
    auVar38._8_4_ = _LC8;
    auVar38._0_8_ = CONCAT44(_LC8,_LC8);
    auVar38._12_4_ = _LC8;
    auVar40._8_4_ = _LC8;
    auVar40._0_8_ = CONCAT44(_LC8,_LC8);
    auVar40._12_4_ = _LC8;
    auVar37._8_4_ = _LC6;
    auVar37._0_8_ = CONCAT44(_LC6,_LC6);
    auVar37._12_4_ = _LC6;
    auVar39._8_4_ = _LC6;
    auVar39._0_8_ = CONCAT44(_LC6,_LC6);
    auVar39._12_4_ = _LC6;
    pauVar15 = (undefined1 (*) [16])(uVar16 * 0x40 + *(long *)this);
    do {
      auVar36._0_4_ = *(float *)pauVar15[1] + *(float *)*pauVar15;
      auVar36._4_4_ = *(float *)(pauVar15[1] + 4) + *(float *)(*pauVar15 + 4);
      auVar36._8_4_ = *(float *)(pauVar15[1] + 8) + *(float *)(*pauVar15 + 8);
      auVar36._12_4_ = *(float *)(pauVar15[1] + 0xc) + *(float *)(*pauVar15 + 0xc);
      pauVar21 = pauVar15 + 4;
      auVar40 = minps(auVar40,*pauVar15);
      auVar39 = maxps(auVar39,pauVar15[1]);
      auVar38 = minps(auVar38,auVar36);
      auVar37 = maxps(auVar37,auVar36);
      pauVar15 = pauVar21;
    } while ((undefined1 (*) [16])(*(long *)this + uVar22 * 0x40) != pauVar21);
    lVar26 = uVar22 - uVar16;
  }
  else {
    lVar26 = 0;
    auVar38._8_4_ = _LC8;
    auVar38._0_8_ = CONCAT44(_LC8,_LC8);
    auVar38._12_4_ = _LC8;
    auVar40._8_4_ = _LC8;
    auVar40._0_8_ = CONCAT44(_LC8,_LC8);
    auVar40._12_4_ = _LC8;
    auVar37._8_4_ = _LC6;
    auVar37._0_8_ = CONCAT44(_LC6,_LC6);
    auVar37._12_4_ = _LC6;
    auVar39._8_4_ = _LC6;
    auVar39._0_8_ = CONCAT44(_LC6,_LC6);
    auVar39._12_4_ = _LC6;
  }
  auVar35._4_4_ = _LC6;
  auVar35._0_4_ = _LC6;
  auVar32._4_4_ = _LC8;
  auVar32._0_4_ = _LC8;
  auVar35._8_4_ = _LC6;
  auVar32._8_4_ = _LC8;
  auVar35._12_4_ = _LC6;
  auVar32._12_4_ = _LC8;
  auVar36 = auVar35;
  auVar47 = auVar32;
  if (uVar22 < uVar6) {
    pauVar15 = (undefined1 (*) [16])(uVar22 * 0x40 + *(long *)this);
    do {
      auVar29._0_4_ = *(float *)pauVar15[1] + *(float *)*pauVar15;
      auVar29._4_4_ = *(float *)(pauVar15[1] + 4) + *(float *)(*pauVar15 + 4);
      auVar29._8_4_ = *(float *)(pauVar15[1] + 8) + *(float *)(*pauVar15 + 8);
      auVar29._12_4_ = *(float *)(pauVar15[1] + 0xc) + *(float *)(*pauVar15 + 0xc);
      pauVar21 = pauVar15 + 4;
      auVar47 = minps(auVar47,*pauVar15);
      auVar35 = maxps(auVar35,pauVar15[1]);
      auVar32 = minps(auVar32,auVar29);
      auVar36 = maxps(auVar36,auVar29);
      pauVar15 = pauVar21;
    } while (pauVar21 != (undefined1 (*) [16])(*(long *)this + lVar23));
    lVar23 = uVar6 - uVar22;
  }
  else {
    lVar23 = 0;
  }
  *(ulong *)(param_3 + 0x40) = uVar16;
  *(ulong *)(param_3 + 0x48) = uVar22;
  *(ulong *)(param_3 + 0x50) = uVar22;
  *(undefined1 (*) [16])param_3 = auVar40;
  *(undefined1 (*) [16])(param_3 + 0x10) = auVar39;
  *(undefined1 (*) [16])(param_3 + 0x20) = auVar38;
  *(undefined1 (*) [16])(param_3 + 0x30) = auVar37;
  *(ulong *)(param_4 + 0x40) = uVar22;
  *(ulong *)(param_4 + 0x48) = uVar6;
  *(ulong *)(param_4 + 0x50) = uVar6;
  *(undefined1 (*) [16])param_4 = auVar47;
  *(undefined1 (*) [16])(param_4 + 0x10) = auVar35;
  *(undefined1 (*) [16])(param_4 + 0x20) = auVar32;
  *(undefined1 (*) [16])(param_4 + 0x30) = auVar36;
  if (uVar6 != uVar25) {
    uVar25 = uVar25 - uVar6;
    fVar28 = ((float)lVar26 / (float)(ulong)(lVar26 + lVar23)) * (float)uVar25;
    if ((float)((uint)fVar28 & _LC25) < _LC22) {
      fVar28 = (float)((uint)(float)(int)fVar28 | ~_LC25 & (uint)fVar28);
    }
    if (__LC24 <= fVar28) {
      uVar16 = (long)(fVar28 - __LC24) ^ 0x8000000000000000;
    }
    else {
      uVar16 = (ulong)fVar28;
    }
    if (uVar25 < uVar16) {
      uVar16 = uVar25;
    }
    *(ulong *)(param_3 + 0x50) = uVar16 + *(long *)(param_3 + 0x48);
    plVar17 = *(long **)(param_4 + 0x48);
    *(ulong *)(param_4 + 0x50) = (long)plVar17 + (uVar25 - uVar16);
    lVar23 = *(long *)(param_4 + 0x40);
    plVar27 = (long *)(*(long *)(param_3 + 0x50) - *(long *)(param_3 + 0x48));
    unaff_R14 = (long *)((long)plVar17 - lVar23);
    local_1d0 = plVar27;
    plStack_1c8 = unaff_R14;
    if (plVar27 != (long *)0x0) {
      if (unaff_R14 <= plVar27) goto LAB_00122b28;
      lStack_190 = (long)plVar27 + lVar23;
      pplStack_170 = &plStack_1c8;
      lStack_1c0 = 0;
      uStack_180 = 0x40;
      lStack_188 = lVar23;
      pHStack_178 = this;
      pTStack_168 = (TaskGroupContext *)&lStack_1c0;
      lVar23 = embree::TaskScheduler::thread();
      if (lVar23 != 0) {
        if (*(ulong *)(lVar23 + 0x40080) < 0x1000) {
          lVar26 = *(long *)(lVar23 + 0xc00c0);
          uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
          if (uVar16 < 0x80001) {
            puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
            *(ulong *)(lVar23 + 0xc00c0) = uVar16;
            puVar24[1] = lStack_190;
            puVar24[2] = lStack_188;
            *puVar24 = &PTR_execute_00143a28;
            puVar24[3] = uStack_180;
            puVar24[4] = pHStack_178;
            puVar24[5] = pplStack_170;
            puVar24[6] = pTStack_168;
            lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
            piVar2 = (int *)(lVar23 + 0x40 + lVar18);
            lVar8 = *(long *)(lVar23 + 0xc0100);
            *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
            *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
            lVar18 = lVar18 + lVar23;
            *(undefined8 **)(lVar18 + 0x50) = puVar24;
            *(long *)(lVar18 + 0x58) = lVar8;
            *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&lStack_1c0;
            *(long *)(lVar18 + 0x68) = lVar26;
            *(long **)(lVar18 + 0x70) = plVar27;
            if (lVar8 != 0) {
              LOCK();
              *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
              UNLOCK();
            }
            LOCK();
            if (*piVar2 == 0) {
              *piVar2 = 1;
            }
            UNLOCK();
            LOCK();
            *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
            UNLOCK();
            plVar27 = (long *)(lVar23 + 0x40040);
            if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
              LOCK();
              *plVar27 = *(long *)(lVar23 + 0x40080) + -1;
              UNLOCK();
            }
            goto LAB_0012259c;
          }
        }
LAB_00122dc2:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar19,(_lambda___1_ *)&lStack_190,(TaskGroupContext *)&lStack_1c0,(ulong)plVar27,
                 true);
LAB_0012259c:
      embree::TaskScheduler::wait();
      plVar17 = plVar27;
      lVar26 = lStack_1c0;
      lVar23 = local_100;
      goto joined_r0x001225ac;
    }
  }
LAB_00121fd8:
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)#1},embree::sse2::HeuristicA...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined4 uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long *plVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  long *plVar11;
  long lVar12;
  long lVar13;
  ulong uVar14;
  long lVar15;
  long lVar16;
  ulong uVar17;
  TaskScheduler *pTVar18;
  undefined8 *puVar19;
  undefined8 *puVar20;
  undefined8 *puVar21;
  ulong uVar22;
  ulong uVar23;
  ulong uVar24;
  undefined8 *puVar25;
  ulong uVar26;
  long *plVar27;
  long *plVar28;
  long in_FS_OFFSET;
  long local_d0;
  ulong uStack_c8;
  undefined8 local_c0;
  undefined8 uStack_b8;
  TaskGroupContext *local_b0;
  ulong local_a0;
  long lStack_98;
  ulong local_90;
  undefined8 *puStack_88;
  TaskGroupContext *local_80;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar15 = *(long *)(this + 0x10);
  puVar21 = *(undefined8 **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar15)) {
    pTVar3 = *(TaskGroupContext **)(this + 0x28);
    uVar26 = (ulong)(*(long *)(this + 8) + lVar15) >> 1;
    local_a0 = uVar26;
    lStack_98 = lVar15;
    local_90 = *(ulong *)(this + 0x18);
    puStack_88 = puVar21;
    local_80 = pTVar3;
    lVar12 = embree::TaskScheduler::thread();
    if (lVar12 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)&local_a0,pTVar3,uVar26 - lVar15,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar12 + 0x40080)) goto LAB_0012333c;
      lVar4 = *(long *)(lVar12 + 0xc00c0);
      uVar14 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar14) goto LAB_0012333c;
      *(ulong *)(lVar12 + 0xc00c0) = uVar14;
      puVar21 = (undefined8 *)(lVar12 + 0x40090 + uVar14);
      *puVar21 = &PTR_execute_00143ae8;
      puVar21[1] = local_a0;
      puVar21[2] = lStack_98;
      puVar21[5] = local_80;
      puVar21[3] = local_90;
      puVar21[4] = puStack_88;
      lVar13 = *(long *)(lVar12 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar12 + 0x40 + lVar13);
      lVar16 = *(long *)(lVar12 + 0xc0100);
      *(undefined4 *)(lVar12 + 0x44 + lVar13) = 1;
      *(undefined1 *)(lVar12 + 0x48 + lVar13) = 1;
      lVar13 = lVar13 + lVar12;
      *(undefined8 **)(lVar13 + 0x50) = puVar21;
      *(long *)(lVar13 + 0x58) = lVar16;
      *(TaskGroupContext **)(lVar13 + 0x60) = pTVar3;
      *(long *)(lVar13 + 0x68) = lVar4;
      *(ulong *)(lVar13 + 0x70) = uVar26 - lVar15;
      if (lVar16 != 0) {
        LOCK();
        *(int *)(lVar16 + 4) = *(int *)(lVar16 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar12 + 0x40080) = *(long *)(lVar12 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar12 + 0x40080) - 1U <= *(ulong *)(lVar12 + 0x40040)) {
        LOCK();
        *(long *)(lVar12 + 0x40040) = *(long *)(lVar12 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_c0 = *(undefined8 *)(this + 0x18);
    local_d0 = *(long *)(this + 8);
    pTVar3 = *(TaskGroupContext **)(this + 0x28);
    uStack_b8 = *(undefined8 *)(this + 0x20);
    uVar14 = local_d0 - uVar26;
    uStack_c8 = uVar26;
    local_b0 = pTVar3;
    lVar15 = embree::TaskScheduler::thread();
    if (lVar15 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)&local_d0,pTVar3,uVar14,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar15 + 0x40080)) {
LAB_0012333c:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar12 = *(long *)(lVar15 + 0xc00c0);
      uVar26 = lVar12 + 0x30 + (ulong)(-(int)lVar12 & 0x3f);
      if (0x80000 < uVar26) goto LAB_0012333c;
      *(ulong *)(lVar15 + 0xc00c0) = uVar26;
      puVar21 = (undefined8 *)(lVar15 + 0x40090 + uVar26);
      *puVar21 = &PTR_execute_00143ae8;
      puVar21[1] = local_d0;
      puVar21[2] = uStack_c8;
      puVar21[5] = local_b0;
      puVar21[3] = local_c0;
      puVar21[4] = uStack_b8;
      lVar16 = *(long *)(lVar15 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar15 + 0x40 + lVar16);
      lVar4 = *(long *)(lVar15 + 0xc0100);
      *(undefined4 *)(lVar15 + 0x44 + lVar16) = 1;
      *(undefined1 *)(lVar15 + 0x48 + lVar16) = 1;
      lVar16 = lVar16 + lVar15;
      *(undefined8 **)(lVar16 + 0x50) = puVar21;
      *(long *)(lVar16 + 0x58) = lVar4;
      *(TaskGroupContext **)(lVar16 + 0x60) = pTVar3;
      *(long *)(lVar16 + 0x68) = lVar12;
      *(ulong *)(lVar16 + 0x70) = uVar14;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar15 + 0x40080) = *(long *)(lVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar15 + 0x40080) - 1U <= *(ulong *)(lVar15 + 0x40040)) {
        LOCK();
        *(long *)(lVar15 + 0x40040) = *(long *)(lVar15 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar5 = (long *)puVar21[1];
    lVar12 = plVar5[0x98];
    uVar17 = lVar15 * *(long *)*puVar21;
    uVar14 = plVar5[0x99] - lVar12;
    uVar26 = uVar17 / (ulong)plVar5[6];
    uVar23 = uVar26;
    if (uVar26 < uVar14) {
      plVar27 = plVar5 + 0x98;
    }
    else {
      plVar28 = plVar5 + 0x9a;
      do {
        plVar27 = plVar28;
        lVar12 = *plVar27;
        uVar23 = uVar23 - uVar14;
        uVar14 = plVar27[1] - lVar12;
        plVar28 = plVar27 + 2;
      } while (uVar14 <= uVar23);
    }
    lVar15 = plVar5[0x118];
    uVar24 = plVar5[0x119] - lVar15;
    uVar22 = uVar26;
    if (uVar26 < uVar24) {
      plVar28 = plVar5 + 0x118;
    }
    else {
      plVar11 = plVar5 + 0x11a;
      do {
        plVar28 = plVar11;
        lVar15 = *plVar28;
        uVar22 = uVar22 - uVar24;
        uVar24 = plVar28[1] - lVar15;
        plVar11 = plVar28 + 2;
      } while (uVar24 <= uVar22);
    }
    uVar14 = uVar14 - uVar23;
    uVar26 = (*(long *)*puVar21 + uVar17) / (ulong)plVar5[6] - uVar26;
    uVar24 = uVar24 - uVar22;
    puVar21 = (undefined8 *)(*plVar5 + (lVar12 + uVar23) * 0x40);
    puVar25 = (undefined8 *)(*plVar5 + (lVar15 + uVar22) * 0x40);
    uVar23 = uVar26;
    if (uVar14 <= uVar26) {
      uVar23 = uVar14;
    }
    if (uVar24 < uVar23) {
      uVar23 = uVar24;
    }
    if (uVar26 != 0) {
joined_r0x00123188:
      if (uVar24 == 0) {
        uVar24 = plVar28[3] - plVar28[2];
        puVar25 = (undefined8 *)(plVar28[2] * 0x40 + *plVar5);
        uVar23 = uVar26;
        if (uVar24 <= uVar26) {
          uVar23 = uVar24;
        }
        if (uVar14 < uVar23) {
          uVar23 = uVar14;
        }
        plVar28 = plVar28 + 2;
      }
      uVar26 = uVar26 - uVar23;
      uVar14 = uVar14 - uVar23;
      uVar24 = uVar24 - uVar23;
      puVar19 = puVar21;
      puVar20 = puVar25;
      uVar17 = uVar23;
      if (uVar23 != 0) {
        do {
          uVar6 = puVar20[1];
          uVar7 = *puVar19;
          uVar8 = puVar19[1];
          uVar9 = puVar19[2];
          uVar10 = puVar19[3];
          local_80 = (TaskGroupContext *)puVar19[4];
          *puVar19 = *puVar20;
          puVar19[1] = uVar6;
          uVar6 = puVar20[3];
          uVar2 = *(undefined4 *)(puVar19 + 5);
          puVar19[2] = puVar20[2];
          puVar19[3] = uVar6;
          puVar19[4] = puVar20[4];
          *(undefined4 *)(puVar19 + 5) = *(undefined4 *)(puVar20 + 5);
          puVar20[4] = local_80;
          *puVar20 = uVar7;
          puVar20[1] = uVar8;
          puVar20[2] = uVar9;
          puVar20[3] = uVar10;
          *(undefined4 *)(puVar20 + 5) = uVar2;
          uVar17 = uVar17 - 1;
          puVar19 = puVar19 + 8;
          puVar20 = puVar20 + 8;
        } while (uVar17 != 0);
        puVar25 = puVar25 + uVar23 * 8;
        puVar21 = puVar21 + uVar23 * 8;
        if (uVar26 == 0) goto LAB_00123258;
      }
      if (uVar14 == 0) {
        uVar14 = plVar27[3] - plVar27[2];
        puVar21 = (undefined8 *)(plVar27[2] * 0x40 + *plVar5);
        uVar23 = uVar24;
        if (uVar26 <= uVar24) {
          uVar23 = uVar26;
        }
        if (uVar14 < uVar23) {
          uVar23 = uVar14;
        }
        plVar27 = plVar27 + 2;
      }
      else {
        uVar23 = 0;
      }
      goto joined_r0x00123188;
    }
LAB_00123258:
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> > embree::parallel_reduce_internal<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned
   long> const&)#1}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   > const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned long, unsigned
   long, unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned
   long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   > const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_2_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,PrimInfoT_conflict *param_5
                ,_lambda_embree__range<unsigned_long>_const___1_ *param_6,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___2_
                *param_7)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  undefined1 (*pauVar8) [16];
  undefined1 (*pauVar9) [16];
  undefined8 uVar10;
  long lVar11;
  long in_FS_OFFSET;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  ulong local_2108;
  ulong local_2100;
  ulong local_20f8 [2];
  ulong local_20e8;
  ulong *local_20e0;
  ulong *local_20d8;
  ulong *local_20d0;
  undefined1 (*local_20c8) [16];
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___2_
  *local_20c0;
  ulong local_20b0;
  undefined8 uStack_20a8;
  undefined8 local_20a0;
  ulong **ppuStack_2098;
  ulong *local_2090;
  undefined1 local_2080 [8160];
  undefined1 (*local_a0) [16];
  ulong local_98;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2108 = param_4;
  local_2100 = param_3;
  local_20f8[0] = param_2;
  uVar5 = embree::TaskScheduler::threadCount();
  if (0x200 < local_20f8[0]) {
    local_20f8[0] = 0x200;
  }
  if (uVar5 < local_20f8[0]) {
    local_20f8[0] = uVar5;
  }
  local_98 = local_20f8[0];
  if (local_20f8[0] * 0x50 < 0x2001) {
    local_a0 = (undefined1 (*) [16])local_2080;
  }
  else {
    local_a0 = (undefined1 (*) [16])embree::alignedMalloc(local_20f8[0] * 0x50,0x40);
  }
  uVar5 = local_20f8[0];
  local_20e0 = &local_2100;
  local_20d8 = &local_2108;
  local_20d0 = local_20f8;
  local_20c0 = param_7;
  local_20c8 = (undefined1 (*) [16])local_2080;
  if (local_20f8[0] == 0) {
    uVar10 = *(undefined8 *)(param_6 + 8);
    *(undefined8 *)param_1 = *(undefined8 *)param_6;
    *(undefined8 *)(param_1 + 8) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x18);
    *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_6 + 0x10);
    *(undefined8 *)(param_1 + 0x18) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x28);
    *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_6 + 0x20);
    *(undefined8 *)(param_1 + 0x28) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x38);
    *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_6 + 0x30);
    *(undefined8 *)(param_1 + 0x38) = uVar10;
    *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_6 + 0x40);
    *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_6 + 0x48);
  }
  else {
    ppuStack_2098 = &local_20e0;
    uStack_20a8 = 0;
    local_20a0 = 1;
    local_20e8 = 0;
    local_20b0 = local_20f8[0];
    local_2090 = &local_20e8;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar10 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse226HeuristicArrayOpenMergeSAHIZNSA_19BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMvILi4EEEE5buildEvEUlRNSG_8BuildRefEPSH_E5_SH_Lm32EE22openNodesBasedOnExtendERNSA_16PrimInfoExtRangeEEUlRKNS_5rangeImEEE_ZNSL_22openNodesBasedOnExtendESN_EUlRKS9_SU_E0_EET0_T_SX_SX_SX_RKSW_RKT1_RKT2_EUlmE_EEvSX_SZ_EUlSR_E_EEvSX_SX_SX_SZ_PNS0_16TaskGroupContextEEUlvE_EEvRKSX_S19_mb
                (uVar10,&local_20b0,&local_20e8,uVar5,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_0012466e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar11 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar11 + 0x30 + (ulong)(-(int)lVar11 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0012466e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = 0x143b00;
      puVar3[1] = local_20b0;
      puVar3[2] = uStack_20a8;
      puVar3[3] = local_20a0;
      puVar3[4] = ppuStack_2098;
      puVar3[5] = local_2090;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_20e8;
      *(long *)(lVar7 + 0x68) = lVar11;
      *(ulong *)(lVar7 + 0x70) = uVar5;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_20e8 != 0) {
      local_20b0 = local_20e8;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20b0);
      goto LAB_00124669;
    }
    auVar12 = *(undefined1 (*) [16])param_6;
    *(undefined1 (*) [16])param_1 = auVar12;
    auVar13 = *(undefined1 (*) [16])(param_6 + 0x10);
    *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
    auVar14 = *(undefined1 (*) [16])(param_6 + 0x20);
    *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
    auVar15 = *(undefined1 (*) [16])(param_6 + 0x30);
    *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
    lVar6 = *(long *)(param_6 + 0x40);
    lVar11 = *(long *)(param_6 + 0x48);
    *(long *)(param_1 + 0x40) = lVar6;
    *(long *)(param_1 + 0x48) = lVar11;
    if (local_20f8[0] != 0) {
      pauVar8 = local_a0;
      do {
        auVar12 = minps(auVar12,*pauVar8);
        auVar13 = maxps(auVar13,pauVar8[1]);
        pauVar9 = pauVar8 + 5;
        auVar14 = minps(auVar14,pauVar8[2]);
        auVar15 = maxps(auVar15,pauVar8[3]);
        lVar6 = lVar6 + *(long *)pauVar8[4];
        lVar11 = lVar11 + *(long *)(pauVar8[4] + 8);
        *(long *)(param_1 + 0x48) = lVar11;
        *(long *)(param_1 + 0x40) = lVar6;
        *(undefined1 (*) [16])param_1 = auVar12;
        *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
        *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
        *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
        pauVar8 = pauVar9;
      } while (local_a0 + local_20f8[0] * 5 != pauVar9);
    }
  }
  if (local_a0 != (undefined1 (*) [16])local_2080) {
    embree::alignedFree(local_a0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
LAB_00124669:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&) */

void __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
::openNodesBasedOnExtend
          (HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
           *this,PrimInfoExtRange *param_1)

{
  ulong *puVar1;
  ulong uVar2;
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  undefined1 auVar8 [16];
  undefined1 auVar9 [16];
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  undefined1 auVar16 [16];
  undefined8 *puVar17;
  float *pfVar18;
  long lVar19;
  ulong uVar20;
  ulong uVar21;
  ulong uVar22;
  long lVar23;
  undefined1 (*pauVar24) [16];
  ulong uVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar30;
  undefined1 auVar29 [16];
  undefined1 auVar31 [16];
  long local_350;
  long local_348;
  long local_340;
  float local_338;
  undefined1 local_330 [8];
  float fStack_328;
  float fStack_324;
  long *local_320;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
  *local_318;
  long *local_310;
  long *local_308;
  undefined1 local_300 [16];
  undefined1 local_2f0 [16];
  undefined1 local_2e0 [16];
  undefined1 local_2d0 [16];
  undefined8 local_2c0;
  undefined8 local_2b8;
  undefined1 local_2b0 [8];
  float fStack_2a8;
  float fStack_2a4;
  undefined1 local_2a0 [16];
  undefined1 local_290 [16];
  undefined1 local_280 [16];
  undefined8 local_270;
  undefined8 local_268;
  float local_260;
  float fStack_25c;
  float fStack_258;
  float fStack_254;
  float local_250;
  float fStack_24c;
  float fStack_248;
  float fStack_244;
  ulong local_240;
  float local_238;
  float local_220;
  float fStack_21c;
  float fStack_218;
  float fStack_214;
  float local_210;
  float fStack_20c;
  float fStack_208;
  float fStack_204;
  ulong local_200;
  float local_1f8;
  float local_1e0;
  float fStack_1dc;
  float fStack_1d8;
  float fStack_1d4;
  float local_1d0;
  float fStack_1cc;
  float fStack_1c8;
  float fStack_1c4;
  ulong local_1c0;
  float local_1b8;
  float local_1a0;
  float fStack_19c;
  float fStack_198;
  float fStack_194;
  float local_190;
  float fStack_18c;
  float fStack_188;
  float fStack_184;
  ulong local_180;
  float local_178;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2b0._4_4_ = *(float *)(param_1 + 0x14) - *(float *)(param_1 + 4);
  local_2b0._0_4_ = *(float *)(param_1 + 0x10) - *(float *)param_1;
  fStack_2a8 = *(float *)(param_1 + 0x18) - *(float *)(param_1 + 8);
  fStack_2a4 = *(float *)(param_1 + 0x1c) - *(float *)(param_1 + 0xc);
  fVar26 = (float)((uint)(*(float *)(param_1 + 0x10) - *(float *)param_1) & _LC25);
  fVar27 = (float)((uint)(*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4)) & _LC25);
  fVar28 = (float)((uint)(*(float *)(param_1 + 0x18) - *(float *)(param_1 + 8)) & _LC25);
  if (fVar26 <= fVar27) {
    lVar23 = 4;
    if (fVar27 <= fVar28) {
      lVar23 = 8;
    }
    local_340 = 1;
    if (fVar27 <= fVar28) {
      local_340 = 2;
    }
  }
  else {
    uVar20 = (ulong)(fVar26 <= fVar28);
    local_340 = uVar20 * 2;
    lVar23 = uVar20 * 8;
  }
  local_338 = _LC28 / *(float *)(local_2b0 + lVar23);
  local_350 = *(long *)(param_1 + 0x48);
  LOCK();
  local_348 = 0;
  UNLOCK();
  uVar20 = *(ulong *)(param_1 + 0x48);
  local_2b0._4_4_ = _LC8;
  local_2b0._0_4_ = _LC8;
  fStack_2a8 = (float)_LC8;
  fStack_2a4 = (float)_LC8;
  local_2a0._4_4_ = _LC6;
  local_2a0._0_4_ = _LC6;
  local_2a0._8_4_ = _LC6;
  local_2a0._12_4_ = _LC6;
  local_318 = this;
  local_310 = &local_348;
  local_308 = &local_350;
  uVar21 = *(ulong *)(param_1 + 0x40);
  local_320 = &local_340;
  uVar22 = (uVar20 + 0x7f) - uVar21 >> 7;
  local_270 = 0;
  local_268 = 0;
  local_290 = _local_2b0;
  local_280 = local_2a0;
  if (uVar22 == 1) {
    local_2c0 = 0;
    local_2b8 = 0;
    local_300 = _local_2b0;
    local_2f0 = local_2a0;
    local_2e0 = _local_2b0;
    local_2d0 = local_2a0;
    if (uVar21 < uVar20) {
      do {
        lVar23 = uVar21 * 0x40;
        pfVar18 = (float *)(*(long *)local_318 + lVar23);
        puVar1 = *(ulong **)(pfVar18 + 8);
        uVar22 = (ulong)((uint)puVar1 & 8);
        if (((ulong)puVar1 & 8) == 0) {
          local_330._4_4_ = pfVar18[5] - pfVar18[1];
          local_330._0_4_ = pfVar18[4] - *pfVar18;
          fStack_328 = pfVar18[6] - pfVar18[2];
          fStack_324 = pfVar18[7] - pfVar18[3];
          if (__LC26 < *(float *)(local_330 + *local_320 * 4) * *(float *)(local_320 + 1)) {
            fVar26 = pfVar18[3];
            fVar27 = (float)((uint)pfVar18[7] >> 2);
            if (fVar27 == 0.0) {
              fVar27 = 1.4013e-45;
            }
            uVar25 = *puVar1;
            if (uVar25 == 8) {
              uVar2 = puVar1[1];
              uVar25 = 1;
            }
            else {
              local_330._4_4_ = *(undefined4 *)(puVar1 + 10);
              fStack_328 = *(float *)(puVar1 + 0xe);
              local_330._0_4_ = *(undefined4 *)(puVar1 + 6);
              fStack_324 = fVar27;
              if ((uVar25 & 8) == 0) {
                fVar28 = (float)local_330._4_4_ - *(float *)(puVar1 + 8);
                fVar30 = fStack_328 - *(float *)(puVar1 + 0xc);
                fVar28 = (fVar28 + fVar30) * ((float)local_330._0_4_ - *(float *)(puVar1 + 4)) +
                         fVar28 * fVar30;
                local_238 = fVar28 + fVar28;
              }
              else {
                local_238 = 0.0;
              }
              uVar2 = puVar1[1];
              local_240 = uVar25;
              uVar22 = 1;
              uVar25 = 2;
              local_260 = *(float *)(puVar1 + 4);
              fStack_25c = *(float *)(puVar1 + 8);
              fStack_258 = *(float *)(puVar1 + 0xc);
              fStack_254 = fVar26;
              local_250 = (float)local_330._0_4_;
              fStack_24c = (float)local_330._4_4_;
              fStack_248 = fStack_328;
              fStack_244 = fVar27;
            }
            if (uVar2 != 8) {
              local_330._4_4_ = *(float *)((long)puVar1 + 0x54);
              fStack_328 = *(float *)((long)puVar1 + 0x74);
              local_330._0_4_ = *(float *)((long)puVar1 + 0x34);
              fStack_324 = fVar27;
              if ((uVar2 & 8) == 0) {
                fVar28 = (float)local_330._4_4_ - *(float *)((long)puVar1 + 0x44);
                fVar30 = fStack_328 - *(float *)((long)puVar1 + 100);
                fVar28 = (fVar28 + fVar30) *
                         ((float)local_330._0_4_ - *(float *)((long)puVar1 + 0x24)) +
                         fVar28 * fVar30;
                local_1f8 = fVar28 + fVar28;
              }
              else {
                local_1f8 = 0.0;
              }
              local_200 = uVar2;
              local_220 = *(float *)((long)puVar1 + 0x24);
              fStack_21c = *(float *)((long)puVar1 + 0x44);
              fStack_218 = *(float *)((long)puVar1 + 100);
              fStack_214 = fVar26;
              local_210 = (float)local_330._0_4_;
              fStack_20c = (float)local_330._4_4_;
              fStack_208 = fStack_328;
              fStack_204 = fVar27;
              uVar22 = uVar25;
            }
            uVar25 = puVar1[2];
            uVar2 = puVar1[3];
            if (uVar25 == 8) {
              uVar25 = uVar22;
              if (uVar2 != 8) goto LAB_00124a3a;
              LOCK();
              lVar19 = *local_310;
              *local_310 = *local_310 + (uVar22 - 1);
              UNLOCK();
              if (uVar22 != 0) goto LAB_00124ac5;
              puVar17 = (undefined8 *)(lVar23 + *(long *)local_318);
              *puVar17 = CONCAT44(fStack_25c,local_260);
              puVar17[1] = CONCAT44(fStack_254,fStack_258);
              puVar17[4] = local_240;
              puVar17[2] = CONCAT44(fStack_24c,local_250);
              puVar17[3] = CONCAT44(fStack_244,fStack_248);
              *(float *)(puVar17 + 5) = local_238;
            }
            else {
              local_330._4_4_ = *(undefined4 *)(puVar1 + 0xb);
              fStack_328 = *(float *)(puVar1 + 0xf);
              local_330._0_4_ = *(undefined4 *)(puVar1 + 7);
              fStack_324 = fVar27;
              if ((uVar25 & 8) == 0) {
                fVar28 = (float)local_330._4_4_ - *(float *)(puVar1 + 9);
                fVar30 = fStack_328 - *(float *)(puVar1 + 0xd);
                fVar28 = (fVar28 + fVar30) * ((float)local_330._0_4_ - *(float *)(puVar1 + 5)) +
                         fVar28 * fVar30;
                local_1b8 = fVar28 + fVar28;
              }
              else {
                local_1b8 = 0.0;
              }
              local_1c0 = uVar25;
              local_1e0 = *(float *)(puVar1 + 5);
              fStack_1dc = *(float *)(puVar1 + 9);
              fStack_1d8 = *(float *)(puVar1 + 0xd);
              fStack_1d4 = fVar26;
              local_1d0 = (float)local_330._0_4_;
              fStack_1cc = (float)local_330._4_4_;
              fStack_1c8 = fStack_328;
              fStack_1c4 = fVar27;
              uVar25 = uVar22 + 1;
              if (uVar2 == 8) {
                LOCK();
                lVar19 = *local_310;
                *local_310 = *local_310 + uVar22;
                UNLOCK();
                uVar22 = uVar22 + 1;
              }
              else {
LAB_00124a3a:
                local_330._4_4_ = *(float *)((long)puVar1 + 0x5c);
                fStack_328 = *(float *)((long)puVar1 + 0x7c);
                local_330._0_4_ = *(float *)((long)puVar1 + 0x3c);
                fStack_324 = fVar27;
                if ((uVar2 & 8) == 0) {
                  fVar28 = (float)local_330._4_4_ - *(float *)((long)puVar1 + 0x4c);
                  fVar30 = fStack_328 - *(float *)((long)puVar1 + 0x6c);
                  fVar28 = (fVar28 + fVar30) *
                           ((float)local_330._0_4_ - *(float *)((long)puVar1 + 0x2c)) +
                           fVar28 * fVar30;
                  local_178 = fVar28 + fVar28;
                }
                else {
                  local_178 = 0.0;
                }
                local_180 = uVar2;
                local_1a0 = *(float *)((long)puVar1 + 0x2c);
                fStack_19c = *(float *)((long)puVar1 + 0x4c);
                fStack_198 = *(float *)((long)puVar1 + 0x6c);
                fStack_194 = fVar26;
                local_190 = (float)local_330._0_4_;
                fStack_18c = (float)local_330._4_4_;
                fStack_188 = fStack_328;
                fStack_184 = fVar27;
                LOCK();
                lVar19 = *local_310;
                *local_310 = *local_310 + uVar25;
                UNLOCK();
                uVar22 = uVar25 + 1;
              }
LAB_00124ac5:
              auVar9._4_4_ = fStack_25c;
              auVar9._0_4_ = local_260;
              auVar9._8_4_ = fStack_258;
              auVar9._12_4_ = fStack_254;
              auVar10._4_4_ = fStack_24c;
              auVar10._0_4_ = local_250;
              auVar10._8_4_ = fStack_248;
              auVar10._12_4_ = fStack_244;
              local_300 = minps(local_300,auVar9);
              local_2f0 = maxps(local_2f0,auVar10);
              auVar29._4_4_ = fStack_25c + fStack_24c;
              auVar29._0_4_ = local_260 + local_250;
              auVar29._8_4_ = fStack_258 + fStack_248;
              auVar29._12_4_ = fStack_254 + fStack_244;
              local_2e0 = minps(local_2e0,auVar29);
              auVar31._4_4_ = fStack_25c + fStack_24c;
              auVar31._0_4_ = local_260 + local_250;
              auVar31._8_4_ = fStack_258 + fStack_248;
              auVar31._12_4_ = fStack_254 + fStack_244;
              local_2d0 = maxps(local_2d0,auVar31);
              if (uVar22 != 1) {
                auVar11._4_4_ = fStack_21c;
                auVar11._0_4_ = local_220;
                auVar11._8_4_ = fStack_218;
                auVar11._12_4_ = fStack_214;
                local_300 = minps(local_300,auVar11);
                auVar12._4_4_ = fStack_20c;
                auVar12._0_4_ = local_210;
                auVar12._8_4_ = fStack_208;
                auVar12._12_4_ = fStack_204;
                local_2f0 = maxps(local_2f0,auVar12);
                auVar3._4_4_ = fStack_21c + fStack_20c;
                auVar3._0_4_ = local_220 + local_210;
                auVar3._8_4_ = fStack_218 + fStack_208;
                auVar3._12_4_ = fStack_214 + fStack_204;
                local_2e0 = minps(local_2e0,auVar3);
                auVar4._4_4_ = fStack_21c + fStack_20c;
                auVar4._0_4_ = local_220 + local_210;
                auVar4._8_4_ = fStack_218 + fStack_208;
                auVar4._12_4_ = fStack_214 + fStack_204;
                local_2d0 = maxps(local_2d0,auVar4);
                if (uVar22 != 2) {
                  auVar13._4_4_ = fStack_1dc;
                  auVar13._0_4_ = local_1e0;
                  auVar13._8_4_ = fStack_1d8;
                  auVar13._12_4_ = fStack_1d4;
                  local_300 = minps(local_300,auVar13);
                  auVar14._4_4_ = fStack_1cc;
                  auVar14._0_4_ = local_1d0;
                  auVar14._8_4_ = fStack_1c8;
                  auVar14._12_4_ = fStack_1c4;
                  local_2f0 = maxps(local_2f0,auVar14);
                  auVar5._4_4_ = fStack_1dc + fStack_1cc;
                  auVar5._0_4_ = local_1e0 + local_1d0;
                  auVar5._8_4_ = fStack_1d8 + fStack_1c8;
                  auVar5._12_4_ = fStack_1d4 + fStack_1c4;
                  local_2e0 = minps(local_2e0,auVar5);
                  auVar6._4_4_ = fStack_1dc + fStack_1cc;
                  auVar6._0_4_ = local_1e0 + local_1d0;
                  auVar6._8_4_ = fStack_1d8 + fStack_1c8;
                  auVar6._12_4_ = fStack_1d4 + fStack_1c4;
                  local_2d0 = maxps(local_2d0,auVar6);
                  if (uVar22 == 4) {
                    auVar15._4_4_ = fStack_19c;
                    auVar15._0_4_ = local_1a0;
                    auVar15._8_4_ = fStack_198;
                    auVar15._12_4_ = fStack_194;
                    local_300 = minps(local_300,auVar15);
                    auVar16._4_4_ = fStack_18c;
                    auVar16._0_4_ = local_190;
                    auVar16._8_4_ = fStack_188;
                    auVar16._12_4_ = fStack_184;
                    local_2f0 = maxps(local_2f0,auVar16);
                    auVar7._4_4_ = fStack_18c + fStack_19c;
                    auVar7._0_4_ = local_190 + local_1a0;
                    auVar7._8_4_ = fStack_188 + fStack_198;
                    auVar7._12_4_ = fStack_184 + fStack_194;
                    local_2e0 = minps(local_2e0,auVar7);
                    auVar8._4_4_ = fStack_18c + fStack_19c;
                    auVar8._0_4_ = local_190 + local_1a0;
                    auVar8._8_4_ = fStack_188 + fStack_198;
                    auVar8._12_4_ = fStack_184 + fStack_194;
                    local_2d0 = maxps(local_2d0,auVar8);
                  }
                }
              }
              pauVar24 = (undefined1 (*) [16])(lVar23 + *(long *)local_318);
              *(ulong *)pauVar24[2] = local_240;
              *pauVar24 = auVar9;
              pauVar24[1] = auVar10;
              *(float *)(pauVar24[2] + 8) = local_238;
              if (uVar22 != 1) {
                puVar17 = (undefined8 *)((*local_308 + lVar19) * 0x40 + *(long *)local_318);
                *puVar17 = CONCAT44(fStack_21c,local_220);
                puVar17[1] = CONCAT44(fStack_214,fStack_218);
                puVar17[4] = local_200;
                puVar17[2] = CONCAT44(fStack_20c,local_210);
                puVar17[3] = CONCAT44(fStack_204,fStack_208);
                *(float *)(puVar17 + 5) = local_1f8;
                if (uVar22 != 2) {
                  puVar17 = (undefined8 *)
                            (*(long *)local_318 + -0x40 + (lVar19 + 2 + *local_308) * 0x40);
                  *puVar17 = CONCAT44(fStack_1dc,local_1e0);
                  puVar17[1] = CONCAT44(fStack_1d4,fStack_1d8);
                  puVar17[4] = local_1c0;
                  puVar17[2] = CONCAT44(fStack_1cc,local_1d0);
                  puVar17[3] = CONCAT44(fStack_1c4,fStack_1c8);
                  *(float *)(puVar17 + 5) = local_1b8;
                  if (uVar22 == 4) {
                    puVar17 = (undefined8 *)
                              (*(long *)local_318 + -0x40 + (lVar19 + 3 + *local_308) * 0x40);
                    *puVar17 = CONCAT44(fStack_19c,local_1a0);
                    puVar17[1] = CONCAT44(fStack_194,fStack_198);
                    puVar17[4] = local_180;
                    puVar17[2] = CONCAT44(fStack_18c,local_190);
                    puVar17[3] = CONCAT44(fStack_184,fStack_188);
                    *(float *)(puVar17 + 5) = local_178;
                  }
                }
              }
            }
          }
        }
        uVar21 = uVar21 + 1;
      } while (uVar20 != uVar21);
    }
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_2_>
              ((ulong)local_300,uVar22,uVar21,uVar20,(PrimInfoT_conflict *)0x80,
               (_lambda_embree__range<unsigned_long>_const___1_ *)local_2b0,
               (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___2_
                *)&local_320);
  }
  auVar31 = minps(*(undefined1 (*) [16])(param_1 + 0x20),local_2e0);
  auVar29 = maxps(*(undefined1 (*) [16])(param_1 + 0x30),local_2d0);
  *(undefined1 (*) [16])(param_1 + 0x20) = auVar31;
  *(undefined1 (*) [16])(param_1 + 0x30) = auVar29;
  *(long *)(param_1 + 0x48) = *(long *)(param_1 + 0x48) + local_348;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x001252c5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143b18;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)#1},embree::sse2::HeuristicA...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined8 *puVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  long *plVar8;
  long *plVar9;
  long *plVar10;
  uint *puVar11;
  undefined8 uVar12;
  long lVar13;
  long lVar14;
  ulong uVar15;
  long lVar16;
  long lVar17;
  undefined1 (*pauVar18) [16];
  TaskScheduler *pTVar19;
  undefined1 (*pauVar20) [16];
  undefined1 (*pauVar21) [16];
  int iVar22;
  long lVar23;
  uint uVar24;
  TaskGroupContext *pTVar25;
  ulong uVar26;
  long in_FS_OFFSET;
  undefined4 uVar27;
  undefined4 uVar29;
  undefined4 uVar30;
  undefined1 auVar28 [16];
  undefined4 uVar31;
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 local_f0 [16];
  undefined1 local_e0 [16];
  long local_d0;
  ulong uStack_c8;
  undefined8 local_c0;
  undefined8 uStack_b8;
  TaskGroupContext *local_b0;
  ulong local_a0;
  long lStack_98;
  ulong local_90;
  long *plStack_88;
  TaskGroupContext *local_80;
  long local_48;
  
  lVar16 = *(long *)(this + 0x10);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  plVar8 = *(long **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar16)) {
    pTVar25 = *(TaskGroupContext **)(this + 0x28);
    uVar26 = (ulong)(*(long *)(this + 8) + lVar16) >> 1;
    local_a0 = uVar26;
    lStack_98 = lVar16;
    local_90 = *(ulong *)(this + 0x18);
    plStack_88 = plVar8;
    local_80 = pTVar25;
    lVar13 = embree::TaskScheduler::thread();
    if (lVar13 == 0) {
      pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar19,(_lambda___1_ *)&local_a0,pTVar25,uVar26 - lVar16,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar13 + 0x40080)) goto LAB_00125a89;
      lVar23 = *(long *)(lVar13 + 0xc00c0);
      uVar15 = lVar23 + 0x30 + (ulong)(-(int)lVar23 & 0x3f);
      if (0x80000 < uVar15) goto LAB_00125a89;
      *(ulong *)(lVar13 + 0xc00c0) = uVar15;
      puVar2 = (undefined8 *)(lVar13 + 0x40090 + uVar15);
      *puVar2 = &PTR_execute_00143b18;
      puVar2[1] = local_a0;
      puVar2[2] = lStack_98;
      puVar2[5] = local_80;
      puVar2[3] = local_90;
      puVar2[4] = plStack_88;
      lVar14 = *(long *)(lVar13 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar13 + 0x40 + lVar14);
      lVar17 = *(long *)(lVar13 + 0xc0100);
      *(undefined4 *)(lVar13 + 0x44 + lVar14) = 1;
      *(undefined1 *)(lVar13 + 0x48 + lVar14) = 1;
      lVar14 = lVar14 + lVar13;
      *(undefined8 **)(lVar14 + 0x50) = puVar2;
      *(long *)(lVar14 + 0x58) = lVar17;
      *(TaskGroupContext **)(lVar14 + 0x60) = pTVar25;
      *(long *)(lVar14 + 0x68) = lVar23;
      *(ulong *)(lVar14 + 0x70) = uVar26 - lVar16;
      if (lVar17 != 0) {
        LOCK();
        *(int *)(lVar17 + 4) = *(int *)(lVar17 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar13 + 0x40080) = *(long *)(lVar13 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar13 + 0x40080) - 1U <= *(ulong *)(lVar13 + 0x40040)) {
        LOCK();
        *(long *)(lVar13 + 0x40040) = *(long *)(lVar13 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_c0 = *(undefined8 *)(this + 0x18);
    local_d0 = *(long *)(this + 8);
    pTVar25 = *(TaskGroupContext **)(this + 0x28);
    uStack_b8 = *(undefined8 *)(this + 0x20);
    uVar15 = local_d0 - uVar26;
    uStack_c8 = uVar26;
    local_b0 = pTVar25;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar19,(_lambda___1_ *)&local_d0,pTVar25,uVar15,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) {
LAB_00125a89:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar13 = *(long *)(lVar16 + 0xc00c0);
      uVar26 = lVar13 + 0x30 + (ulong)(-(int)lVar13 & 0x3f);
      if (0x80000 < uVar26) goto LAB_00125a89;
      *(ulong *)(lVar16 + 0xc00c0) = uVar26;
      puVar2 = (undefined8 *)(lVar16 + 0x40090 + uVar26);
      *puVar2 = &PTR_execute_00143b18;
      puVar2[1] = local_d0;
      puVar2[2] = uStack_c8;
      puVar2[5] = local_b0;
      puVar2[3] = local_c0;
      puVar2[4] = uStack_b8;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar23 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar2;
      *(long *)(lVar17 + 0x58) = lVar23;
      *(TaskGroupContext **)(lVar17 + 0x60) = pTVar25;
      *(long *)(lVar17 + 0x68) = lVar13;
      *(ulong *)(lVar17 + 0x70) = uVar15;
      if (lVar23 != 0) {
        LOCK();
        *(int *)(lVar23 + 4) = *(int *)(lVar23 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar9 = (long *)*plVar8;
    auVar38._0_8_ = CONCAT44(_LC6,_LC6);
    auVar38._8_4_ = _LC6;
    auVar38._12_4_ = _LC6;
    lVar13 = *plVar9;
    plVar10 = (long *)plVar9[2];
    auVar39._0_8_ = CONCAT44(_LC8,_LC8);
    auVar39._8_4_ = _LC8;
    auVar39._12_4_ = _LC8;
    lVar17 = 0;
    pTVar25 = (TaskGroupContext *)(lVar16 * plVar9[1]);
    auVar34._8_4_ = _LC6;
    auVar34._0_8_ = auVar38._0_8_;
    auVar34._12_4_ = _LC6;
    auVar40._8_4_ = _LC6;
    auVar40._0_8_ = auVar38._0_8_;
    auVar40._12_4_ = _LC6;
    auVar36._8_4_ = _LC8;
    auVar36._0_8_ = auVar39._0_8_;
    auVar36._12_4_ = _LC8;
    uVar26 = (ulong)pTVar25 / (ulong)plVar9[6];
    lVar23 = 1;
    pauVar20 = (undefined1 (*) [16])
               (lVar13 + -0x40 + ((ulong)(pTVar25 + plVar9[1]) / (ulong)plVar9[6]) * 0x40);
    pauVar18 = (undefined1 (*) [16])(uVar26 * 0x40 + lVar13);
    uVar27 = _LC8;
    uVar29 = _LC8;
    uVar30 = _LC8;
    uVar31 = _LC8;
    local_f0 = auVar38;
    local_e0 = auVar39;
    while( true ) {
      if (pauVar20 < pauVar18) break;
      auVar5 = pauVar18[1];
      auVar6 = *pauVar18;
      lVar14 = *plVar10;
      auVar32._0_4_ = auVar5._0_4_ + auVar6._0_4_;
      auVar32._4_4_ = auVar5._4_4_ + auVar6._4_4_;
      auVar32._8_4_ = auVar5._8_4_ + auVar6._8_4_;
      auVar32._12_4_ = auVar5._12_4_ + auVar6._12_4_;
      piVar1 = (int *)plVar10[1];
      puVar11 = (uint *)plVar10[2];
      auVar28._0_4_ =
           -(uint)((int)((auVar32._0_4_ - *(float *)(lVar14 + 0x20)) * *(float *)(lVar14 + 0x30) +
                        _LC15) < *piVar1) & *puVar11;
      auVar28._4_4_ =
           -(uint)((int)((auVar32._4_4_ - *(float *)(lVar14 + 0x24)) * *(float *)(lVar14 + 0x34) +
                        _UNK_001440f4) < piVar1[1]) & puVar11[1];
      auVar28._8_4_ =
           -(uint)((int)((auVar32._8_4_ - *(float *)(lVar14 + 0x28)) * *(float *)(lVar14 + 0x38) +
                        _UNK_001440f8) < piVar1[2]) & puVar11[2];
      auVar28._12_4_ =
           -(uint)((int)((auVar32._12_4_ - *(float *)(lVar14 + 0x2c)) * *(float *)(lVar14 + 0x3c) +
                        _UNK_001440fc) < piVar1[3]) & puVar11[3];
      iVar22 = movmskps((int)puVar11,auVar28);
      if (iVar22 == 0) {
        auVar37._4_4_ = uVar29;
        auVar37._0_4_ = uVar27;
        auVar37._8_4_ = uVar30;
        auVar37._12_4_ = uVar31;
        pauVar21 = pauVar20;
        while( true ) {
          auVar28 = pauVar21[1];
          auVar7 = *pauVar21;
          lVar17 = lVar17 + 1;
          pauVar20 = pauVar21 + -4;
          auVar35._0_4_ = auVar28._0_4_ + auVar7._0_4_;
          auVar35._4_4_ = auVar28._4_4_ + auVar7._4_4_;
          auVar35._8_4_ = auVar28._8_4_ + auVar7._8_4_;
          auVar35._12_4_ = auVar28._12_4_ + auVar7._12_4_;
          auVar33._0_4_ =
               -(uint)((int)((auVar35._0_4_ - *(float *)(lVar14 + 0x20)) * *(float *)(lVar14 + 0x30)
                            + _LC15) < *piVar1) & *puVar11;
          auVar33._4_4_ =
               -(uint)((int)((auVar35._4_4_ - *(float *)(lVar14 + 0x24)) * *(float *)(lVar14 + 0x34)
                            + _UNK_001440f4) < piVar1[1]) & puVar11[1];
          auVar33._8_4_ =
               -(uint)((int)((auVar35._8_4_ - *(float *)(lVar14 + 0x28)) * *(float *)(lVar14 + 0x38)
                            + _UNK_001440f8) < piVar1[2]) & puVar11[2];
          auVar33._12_4_ =
               -(uint)((int)((auVar35._12_4_ - *(float *)(lVar14 + 0x2c)) *
                             *(float *)(lVar14 + 0x3c) + _UNK_001440fc) < piVar1[3]) & puVar11[3];
          uVar24 = movmskps((int)pTVar25,auVar33);
          pTVar25 = (TaskGroupContext *)(ulong)uVar24;
          if (uVar24 != 0) break;
          auVar37 = minps(auVar37,auVar7);
          local_f0 = maxps(local_f0,auVar28);
          auVar39 = minps(auVar39,auVar35);
          auVar38 = maxps(auVar38,auVar35);
          pauVar21 = pauVar20;
          if (pauVar20 < pauVar18) {
            uVar27 = auVar37._0_4_;
            uVar29 = auVar37._4_4_;
            uVar30 = auVar37._8_4_;
            uVar31 = auVar37._12_4_;
            goto LAB_0012581c;
          }
        }
        pTVar25 = *(TaskGroupContext **)pauVar18[2];
        *pauVar18 = auVar7;
        auVar34 = maxps(auVar34,auVar35);
        local_e0 = minps(local_e0,auVar35);
        auVar40 = maxps(auVar40,auVar28);
        auVar28 = minps(auVar37,auVar6);
        auVar39 = minps(auVar39,auVar32);
        auVar38 = maxps(auVar38,auVar32);
        local_f0 = maxps(local_f0,auVar5);
        uVar12 = *(undefined8 *)(pauVar21[1] + 8);
        auVar36 = minps(auVar36,auVar7);
        uVar27 = auVar28._0_4_;
        uVar29 = auVar28._4_4_;
        uVar30 = auVar28._8_4_;
        uVar31 = auVar28._12_4_;
        uVar4 = *(undefined4 *)(pauVar18[2] + 8);
        *(undefined8 *)pauVar18[1] = *(undefined8 *)pauVar21[1];
        *(undefined8 *)(pauVar18[1] + 8) = uVar12;
        *(undefined8 *)pauVar18[2] = *(undefined8 *)pauVar21[2];
        *(undefined4 *)(pauVar18[2] + 8) = *(undefined4 *)(pauVar21[2] + 8);
        *pauVar21 = auVar6;
        pauVar21[1] = auVar5;
        *(undefined4 *)(pauVar21[2] + 8) = uVar4;
        *(TaskGroupContext **)pauVar21[2] = pTVar25;
        local_80 = pTVar25;
      }
      else {
        auVar36 = minps(auVar36,auVar6);
        auVar40 = maxps(auVar40,auVar5);
        auVar34 = maxps(auVar34,auVar32);
        local_e0 = minps(local_e0,auVar32);
      }
      pauVar18 = pauVar18 + 4;
      lVar23 = lVar23 + 1;
    }
LAB_0012581c:
    *(ulong *)(*plVar8 + 0x40 + lVar16 * 8) = uVar26;
    *(ulong *)(*plVar8 + 0x280 + lVar16 * 8) = ((long)pauVar18 - lVar13 >> 6) - uVar26;
    lVar16 = lVar16 * 0x50;
    pauVar20 = (undefined1 (*) [16])(*plVar8 + 0xcc0 + lVar16);
    lVar13 = *plVar8 + lVar16;
    pauVar20[3] = auVar34;
    *pauVar20 = auVar36;
    pauVar20[1] = auVar40;
    *(undefined8 *)pauVar20[2] = local_e0._0_8_;
    *(undefined8 *)(pauVar20[2] + 8) = local_e0._8_8_;
    *(undefined8 *)(lVar13 + 0xd00) = 0;
    *(long *)(lVar13 + 0xd08) = lVar23 + -1;
    puVar3 = (undefined4 *)(*plVar8 + 0x20c0 + lVar16);
    lVar16 = lVar16 + *plVar8;
    *puVar3 = uVar27;
    puVar3[1] = uVar29;
    puVar3[2] = uVar30;
    puVar3[3] = uVar31;
    *(undefined8 *)(puVar3 + 4) = local_f0._0_8_;
    *(undefined8 *)(puVar3 + 6) = local_f0._8_8_;
    *(undefined1 (*) [16])(puVar3 + 8) = auVar39;
    *(undefined1 (*) [16])(puVar3 + 0xc) = auVar38;
    *(undefined8 *)(lVar16 + 0x2100) = 0;
    *(long *)(lVar16 + 0x2108) = lVar17;
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x00125e65) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143b30;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* unsigned long embree::parallel_partitioning<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3}>(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef*, unsigned long, unsigned long,
   embree::EmptyTy const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2} const&, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&, unsigned long) */

ulong embree::
      parallel_partitioning<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::____:PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                (BuildRef *param_1,ulong param_2,ulong param_3,EmptyTy *param_4,
                PrimInfoT_conflict *param_5,PrimInfoT_conflict *param_6,
                _lambda_embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>_>__BuildRef_const___1_
                *param_7,_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>_>__BuildRef_const___2_
                         *param_8,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                *param_9,ulong param_10)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  undefined4 uVar4;
  long lVar5;
  uint *puVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  bool bVar12;
  float fVar13;
  PrimInfoT_conflict **ppPVar14;
  PrimInfoT_conflict *pPVar15;
  long lVar16;
  long lVar17;
  undefined1 (*pauVar18) [16];
  PrimInfoT_conflict **ppPVar19;
  long lVar20;
  PrimInfoT_conflict *pPVar21;
  TaskScheduler *pTVar22;
  int iVar23;
  PrimInfoT_conflict **ppPVar24;
  uint uVar25;
  long in_R11;
  PrimInfoT_conflict *pPVar26;
  long in_FS_OFFSET;
  undefined1 auVar27 [16];
  undefined1 auVar28 [16];
  undefined1 auVar29 [16];
  int iVar30;
  int iVar33;
  int iVar34;
  int iVar35;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar36 [16];
  uint uVar37;
  uint uVar38;
  uint uVar39;
  float fVar40;
  float fVar41;
  float fVar42;
  float fVar43;
  float fVar44;
  float fVar45;
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  PrimInfoT_conflict *local_128;
  long local_120;
  long local_118;
  PrimInfoT_conflict *local_110;
  PrimInfoT_conflict *local_108;
  PrimInfoT_conflict *local_100;
  PrimInfoT_conflict **local_f8;
  PrimInfoT_conflict **local_f0;
  PrimInfoT_conflict **local_e8;
  long *local_e0;
  long *local_d8;
  PrimInfoT_conflict *local_d0;
  PrimInfoT_conflict *pPStack_c8;
  undefined8 local_c0;
  PrimInfoT_conflict ***pppPStack_b8;
  TaskGroupContext *local_b0;
  PrimInfoT_conflict *local_a0;
  PrimInfoT_conflict *pPStack_98;
  undefined8 local_90;
  PrimInfoT_conflict ***pppPStack_88;
  TaskGroupContext *local_80;
  long local_48;
  
  fVar13 = _LC15;
  pPVar26 = (PrimInfoT_conflict *)(param_3 - param_2);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_128 = (PrimInfoT_conflict *)(param_1 + param_2 * 0x40);
  if (pPVar26 < param_10) {
    pPVar26 = (PrimInfoT_conflict *)(param_1 + param_3 * 0x40 + -0x40);
    for (; local_128 <= pPVar26; local_128 = local_128 + 0x40) {
      auVar27 = *(undefined1 (*) [16])(local_128 + 0x10);
      auVar28 = *(undefined1 (*) [16])local_128;
      lVar16 = *(long *)param_7;
      fVar48 = auVar27._0_4_ + auVar28._0_4_;
      fVar49 = auVar27._4_4_ + auVar28._4_4_;
      fVar50 = auVar27._8_4_ + auVar28._8_4_;
      fVar51 = auVar27._12_4_ + auVar28._12_4_;
      fVar44 = *(float *)(lVar16 + 0x20);
      fVar45 = *(float *)(lVar16 + 0x24);
      fVar46 = *(float *)(lVar16 + 0x28);
      fVar47 = *(float *)(lVar16 + 0x2c);
      fVar40 = *(float *)(lVar16 + 0x30);
      fVar41 = *(float *)(lVar16 + 0x34);
      fVar42 = *(float *)(lVar16 + 0x38);
      fVar43 = *(float *)(lVar16 + 0x3c);
      piVar1 = *(int **)(param_7 + 8);
      iVar30 = *piVar1;
      iVar33 = piVar1[1];
      iVar34 = piVar1[2];
      iVar35 = piVar1[3];
      puVar6 = *(uint **)(param_7 + 0x10);
      uVar25 = *puVar6;
      uVar37 = puVar6[1];
      uVar38 = puVar6[2];
      uVar39 = puVar6[3];
      auVar32._0_4_ = -(uint)((int)((fVar48 - fVar44) * fVar40 + fVar13) < iVar30) & uVar25;
      auVar32._4_4_ = -(uint)((int)((fVar49 - fVar45) * fVar41 + fVar13) < iVar33) & uVar37;
      auVar32._8_4_ = -(uint)((int)((fVar50 - fVar46) * fVar42 + fVar13) < iVar34) & uVar38;
      auVar32._12_4_ = -(uint)((int)((fVar51 - fVar47) * fVar43 + fVar13) < iVar35) & uVar39;
      iVar23 = movmskps((int)puVar6,auVar32);
      pPVar15 = pPVar26;
      if (iVar23 == 0) {
        while( true ) {
          auVar27 = *(undefined1 (*) [16])(pPVar15 + 0x10);
          auVar28 = *(undefined1 (*) [16])pPVar15;
          pPVar26 = pPVar15 + -0x40;
          auVar36._0_4_ = auVar27._0_4_ + auVar28._0_4_;
          auVar36._4_4_ = auVar27._4_4_ + auVar28._4_4_;
          auVar36._8_4_ = auVar27._8_4_ + auVar28._8_4_;
          auVar36._12_4_ = auVar27._12_4_ + auVar28._12_4_;
          auVar31._0_4_ =
               -(uint)((int)((auVar36._0_4_ - fVar44) * fVar40 + fVar13) < iVar30) & uVar25;
          auVar31._4_4_ =
               -(uint)((int)((auVar36._4_4_ - fVar45) * fVar41 + fVar13) < iVar33) & uVar37;
          auVar31._8_4_ =
               -(uint)((int)((auVar36._8_4_ - fVar46) * fVar42 + fVar13) < iVar34) & uVar38;
          auVar31._12_4_ =
               -(uint)((int)((auVar36._12_4_ - fVar47) * fVar43 + fVar13) < iVar35) & uVar39;
          uVar25 = movmskps((int)param_9,auVar31);
          param_9 = (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                     *)(ulong)uVar25;
          if (uVar25 != 0) break;
          *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + 1;
          auVar28 = minps(*(undefined1 (*) [16])param_6,auVar28);
          *(undefined1 (*) [16])param_6 = auVar28;
          auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar27);
          *(undefined1 (*) [16])(param_6 + 0x10) = auVar27;
          auVar27 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar36);
          *(undefined1 (*) [16])(param_6 + 0x20) = auVar27;
          auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar36);
          *(undefined1 (*) [16])(param_6 + 0x30) = auVar27;
          if (pPVar26 < local_128) goto LAB_0012675b;
          lVar16 = *(long *)param_7;
          fVar44 = *(float *)(lVar16 + 0x20);
          fVar45 = *(float *)(lVar16 + 0x24);
          fVar46 = *(float *)(lVar16 + 0x28);
          fVar47 = *(float *)(lVar16 + 0x2c);
          fVar40 = *(float *)(lVar16 + 0x30);
          fVar41 = *(float *)(lVar16 + 0x34);
          fVar42 = *(float *)(lVar16 + 0x38);
          fVar43 = *(float *)(lVar16 + 0x3c);
          piVar1 = *(int **)(param_7 + 8);
          iVar30 = *piVar1;
          iVar33 = piVar1[1];
          iVar34 = piVar1[2];
          iVar35 = piVar1[3];
          puVar6 = *(uint **)(param_7 + 0x10);
          uVar25 = *puVar6;
          uVar37 = puVar6[1];
          uVar38 = puVar6[2];
          uVar39 = puVar6[3];
          pPVar15 = pPVar26;
        }
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + 1;
        auVar28 = minps(*(undefined1 (*) [16])param_5,auVar28);
        *(undefined1 (*) [16])param_5 = auVar28;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar27);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar27;
        auVar27 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar36);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar36);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar27;
        auVar27 = *(undefined1 (*) [16])local_128;
        auVar28 = *(undefined1 (*) [16])(local_128 + 0x10);
        *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + 1;
        auVar32 = minps(*(undefined1 (*) [16])param_6,auVar27);
        *(undefined1 (*) [16])param_6 = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar28);
        auVar29._0_4_ = auVar28._0_4_ + auVar27._0_4_;
        auVar29._4_4_ = auVar28._4_4_ + auVar27._4_4_;
        auVar29._8_4_ = auVar28._8_4_ + auVar27._8_4_;
        auVar29._12_4_ = auVar28._12_4_ + auVar27._12_4_;
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar32;
        auVar27 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar29);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar29);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar27;
        uVar7 = *(undefined8 *)(pPVar15 + 8);
        uVar8 = *(undefined8 *)local_128;
        uVar9 = *(undefined8 *)(local_128 + 8);
        uVar10 = *(undefined8 *)(local_128 + 0x10);
        uVar11 = *(undefined8 *)(local_128 + 0x18);
        param_9 = *(_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                    **)(local_128 + 0x20);
        *(undefined8 *)local_128 = *(undefined8 *)pPVar15;
        *(undefined8 *)(local_128 + 8) = uVar7;
        uVar7 = *(undefined8 *)(pPVar15 + 0x18);
        uVar4 = *(undefined4 *)(local_128 + 0x28);
        *(undefined8 *)(local_128 + 0x10) = *(undefined8 *)(pPVar15 + 0x10);
        *(undefined8 *)(local_128 + 0x18) = uVar7;
        *(undefined8 *)(local_128 + 0x20) = *(undefined8 *)(pPVar15 + 0x20);
        *(undefined4 *)(local_128 + 0x28) = *(undefined4 *)(pPVar15 + 0x28);
        *(_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
          **)(pPVar15 + 0x20) = param_9;
        *(undefined8 *)pPVar15 = uVar8;
        *(undefined8 *)(pPVar15 + 8) = uVar9;
        *(undefined8 *)(pPVar15 + 0x10) = uVar10;
        *(undefined8 *)(pPVar15 + 0x18) = uVar11;
        *(undefined4 *)(pPVar15 + 0x28) = uVar4;
        local_80 = (TaskGroupContext *)param_9;
      }
      else {
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + 1;
        auVar28 = minps(*(undefined1 (*) [16])param_5,auVar28);
        *(undefined1 (*) [16])param_5 = auVar28;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar27);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar27;
        auVar27._4_4_ = fVar49;
        auVar27._0_4_ = fVar48;
        auVar27._8_4_ = fVar50;
        auVar27._12_4_ = fVar51;
        auVar27 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar27);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar27;
        auVar28._4_4_ = fVar49;
        auVar28._0_4_ = fVar48;
        auVar28._8_4_ = fVar50;
        auVar28._12_4_ = fVar51;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar28);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar27;
      }
    }
LAB_0012675b:
    pPVar26 = (PrimInfoT_conflict *)((long)local_128 - (long)param_1 >> 6);
    goto LAB_001260f5;
  }
  ppPVar14 = (PrimInfoT_conflict **)embree::alignedMalloc(0x34c0,0x40);
  ppPVar14[5] = (PrimInfoT_conflict *)param_4;
  *ppPVar14 = local_128;
  ppPVar14[2] = (PrimInfoT_conflict *)param_7;
  ppPVar14[1] = pPVar26;
  ppPVar14[3] = (PrimInfoT_conflict *)param_8;
  ppPVar14[4] = (PrimInfoT_conflict *)param_9;
  pPVar15 = (PrimInfoT_conflict *)embree::TaskScheduler::threadCount();
  pPVar26 = (PrimInfoT_conflict *)((ulong)(pPVar26 + (param_10 - 1)) / param_10);
  if ((PrimInfoT_conflict *)0x40 < pPVar26) {
    pPVar26 = (PrimInfoT_conflict *)0x40;
  }
  if (pPVar26 <= pPVar15) {
    pPVar15 = pPVar26;
  }
  ppPVar14[6] = pPVar15;
  local_f8 = ppPVar14;
  if (pPVar15 == (PrimInfoT_conflict *)0x0) {
    ppPVar14[0x50] = (PrimInfoT_conflict *)0x0;
    ppPVar14[8] = ppPVar14[1];
  }
  else {
    pppPStack_b8 = &local_f8;
    pPStack_c8 = (PrimInfoT_conflict *)0x0;
    local_c0 = 1;
    local_100 = (PrimInfoT_conflict *)0x0;
    local_d0 = pPVar15;
    local_b0 = (TaskGroupContext *)&local_100;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar22 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar22,(_lambda___1_ *)&local_d0,(TaskGroupContext *)&local_100,(ulong)pPVar15,
                 true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) {
LAB_00126968:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar20 = *(long *)(lVar16 + 0xc00c0);
      uVar2 = lVar20 + 0x30 + (ulong)(-(int)lVar20 & 0x3f);
      if (0x80000 < uVar2) goto LAB_00126968;
      *(ulong *)(lVar16 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar16 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_00143b18;
      puVar3[1] = local_d0;
      puVar3[2] = pPStack_c8;
      puVar3[5] = local_b0;
      puVar3[3] = local_c0;
      puVar3[4] = pppPStack_b8;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar5 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar3;
      *(long *)(lVar17 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar17 + 0x60) = (TaskGroupContext *)&local_100;
      *(long *)(lVar17 + 0x68) = lVar20;
      *(PrimInfoT_conflict **)(lVar17 + 0x70) = pPVar15;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    pPVar21 = local_100;
    if (local_100 != (PrimInfoT_conflict *)0x0) goto LAB_0012664b;
    pPVar26 = ppPVar14[6];
    pPVar15 = ppPVar14[1];
    ppPVar14[(long)(pPVar26 + 0x50)] = (PrimInfoT_conflict *)0x0;
    ppPVar14[(long)(pPVar26 + 8)] = pPVar15;
    if (pPVar26 != (PrimInfoT_conflict *)0x0) {
      pPVar26 = (PrimInfoT_conflict *)0x0;
      pauVar18 = (undefined1 (*) [16])(ppPVar14 + 0x198);
      do {
        auVar27 = minps(*(undefined1 (*) [16])param_5,*pauVar18);
        pPVar26 = pPVar26 + 1;
        *(undefined1 (*) [16])param_5 = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),pauVar18[1]);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar27;
        auVar27 = minps(*(undefined1 (*) [16])(param_5 + 0x20),pauVar18[2]);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),pauVar18[3]);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar27;
        *(long *)(param_5 + 0x40) = *(long *)(param_5 + 0x40) + *(long *)pauVar18[4];
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + *(long *)(pauVar18[4] + 8);
        auVar27 = minps(*(undefined1 (*) [16])param_6,pauVar18[0x140]);
        *(undefined1 (*) [16])param_6 = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),pauVar18[0x141]);
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar27;
        auVar27 = minps(*(undefined1 (*) [16])(param_6 + 0x20),pauVar18[0x142]);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),pauVar18[0x143]);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar27;
        *(long *)(param_6 + 0x40) = *(long *)(param_6 + 0x40) + *(long *)pauVar18[0x144];
        *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + *(long *)(pauVar18[0x144] + 8);
        pPVar15 = ppPVar14[6];
        pauVar18 = pauVar18 + 5;
      } while (pPVar26 < pPVar15);
      pPVar26 = ppPVar14[0x50];
      param_5 = pPVar26;
      if ((PrimInfoT_conflict *)0x1 < pPVar15) {
        ppPVar19 = ppPVar14 + 0x51;
        do {
          param_5 = param_5 + (long)*ppPVar19;
          ppPVar19 = ppPVar19 + 1;
        } while (ppPVar14 + (long)(pPVar15 + 0x50) != ppPVar19);
        pPVar21 = ppPVar14[1];
LAB_001263be:
        local_110 = (PrimInfoT_conflict *)0x0;
        local_118 = 0;
        local_120 = 0;
        ppPVar19 = ppPVar14 + 8;
        bVar12 = false;
        local_128 = (PrimInfoT_conflict *)0x0;
        param_6 = (PrimInfoT_conflict *)0x0;
        lVar16 = 0;
        ppPVar24 = ppPVar19;
        lVar20 = 0;
        do {
          local_a0 = *ppPVar24;
          pPStack_98 = pPVar26 + (long)local_a0;
          pPStack_c8 = ppPVar24[1];
          if ((long)param_5 <= (long)ppPVar24[1]) {
            pPStack_c8 = param_5;
          }
          local_d0 = (PrimInfoT_conflict *)0x0;
          if (-1 < (long)pPStack_98) {
            local_d0 = pPStack_98;
          }
          if ((long)pPVar21 < (long)pPStack_98) {
            pPStack_98 = pPVar21;
          }
          if ((long)local_a0 < (long)param_5) {
            local_a0 = param_5;
          }
          in_R11 = lVar20;
          if ((long)local_d0 < (long)pPStack_c8) {
            local_128 = (PrimInfoT_conflict *)0x1;
            param_6 = param_6 + ((long)pPStack_c8 - (long)local_d0);
            in_R11 = lVar20 + 1;
            ppPVar14[lVar20 * 2 + 0x98] = local_d0;
            (ppPVar14 + lVar20 * 2 + 0x98)[1] = pPStack_c8;
          }
          if ((long)local_a0 < (long)pPStack_98) {
            lVar20 = lVar16 + 1;
            ppPVar14[lVar16 * 2 + 0x118] = local_a0;
            (ppPVar14 + lVar16 * 2 + 0x118)[1] = pPStack_98;
            lVar16 = lVar20;
            if (ppPVar24 + 1 == ppPVar19 + (long)pPVar15) goto LAB_00126673;
            bVar12 = true;
          }
          else {
            lVar20 = lVar16;
            if (ppPVar19 + (long)pPVar15 == ppPVar24 + 1) goto code_r0x001264a0;
          }
          pPVar26 = ppPVar24[0x49];
          lVar16 = lVar20;
          ppPVar24 = ppPVar24 + 1;
          lVar20 = in_R11;
        } while( true );
      }
      pPVar21 = ppPVar14[1];
      local_120 = 0;
      local_118 = 0;
      local_110 = (PrimInfoT_conflict *)0x0;
      if (pPVar15 != (PrimInfoT_conflict *)0x0) goto LAB_001263be;
      goto LAB_001260e0;
    }
  }
  pPVar26 = ppPVar14[0x50];
  goto LAB_001260e0;
code_r0x001264a0:
  if (bVar12) goto LAB_00126673;
  while ((pPVar26 = param_5, (char)local_128 != '\0' &&
         (local_120 = in_R11, local_110 = param_6, param_6 != (PrimInfoT_conflict *)0x0))) {
    local_f0 = &local_110;
    local_e0 = &local_120;
    local_d8 = &local_118;
    pppPStack_88 = &local_f0;
    pPStack_98 = (PrimInfoT_conflict *)0x0;
    local_90 = 1;
    local_108 = (PrimInfoT_conflict *)0x0;
    local_e8 = ppPVar14;
    local_a0 = pPVar15;
    local_80 = (TaskGroupContext *)&local_108;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar22 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar22,(_lambda___1_ *)&local_a0,(TaskGroupContext *)&local_108,(ulong)pPVar15,
                 true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) goto LAB_00126968;
      lVar20 = *(long *)(lVar16 + 0xc00c0);
      uVar2 = lVar20 + 0x30 + (ulong)(-(int)lVar20 & 0x3f);
      if (0x80000 < uVar2) goto LAB_00126968;
      *(ulong *)(lVar16 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar16 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_00143b30;
      puVar3[1] = local_a0;
      puVar3[2] = pPStack_98;
      puVar3[3] = local_90;
      puVar3[4] = pppPStack_88;
      puVar3[5] = local_80;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar5 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar3;
      *(long *)(lVar17 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar17 + 0x60) = (TaskGroupContext *)&local_108;
      *(long *)(lVar17 + 0x68) = lVar20;
      *(PrimInfoT_conflict **)(lVar17 + 0x70) = pPVar15;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    pPVar21 = local_108;
    if (local_108 == (PrimInfoT_conflict *)0x0) break;
LAB_0012664b:
    ppPVar14 = &local_a0;
    local_a0 = pPVar21;
    std::__exception_ptr::exception_ptr::_M_addref();
    lVar16 = std::rethrow_exception(ppPVar14);
LAB_00126673:
    local_118 = lVar16;
  }
LAB_001260e0:
  if (ppPVar14 != (PrimInfoT_conflict **)0x0) {
    embree::alignedFree(ppPVar14);
  }
  pPVar26 = pPVar26 + param_2;
LAB_001260f5:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return (ulong)pPVar26;
}



/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&, embree::sse2::PrimInfoExtRange&) */

long __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
::parallel_object_split
          (HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
           *this,BinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  ulong uVar1;
  ulong uVar2;
  long lVar3;
  ulong uVar4;
  long in_FS_OFFSET;
  EmptyTy local_11b;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>_>__BuildRef_const___2_
  local_11a;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
  local_119;
  BinSplit *local_118;
  undefined4 *local_110;
  undefined8 *local_108;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  long local_b8;
  long local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined4 local_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined8 local_48;
  undefined8 uStack_40;
  long local_30;
  
  uVar1 = *(ulong *)(param_2 + 0x48);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_58 = *(undefined4 *)(param_1 + 8);
  uVar2 = *(ulong *)(param_2 + 0x40);
  local_b8 = 0;
  lVar3 = (long)(1 << ((byte)*(undefined4 *)(param_1 + 4) & 0x1f));
  local_e8 = _LC6;
  uStack_e4 = _LC6;
  uStack_e0 = _LC6;
  uStack_dc = _LC6;
  local_48 = (&mm_lookupmask_ps)[lVar3 * 2];
  uStack_40 = *(undefined8 *)(embree::Scene::progressMonitor + lVar3 * 0x10);
  local_c8 = _LC6;
  uStack_c4 = _LC6;
  uStack_c0 = _LC6;
  uStack_bc = _LC6;
  local_110 = &local_58;
  local_98 = _LC6;
  uStack_94 = _LC6;
  uStack_90 = _LC6;
  uStack_8c = _LC6;
  local_78 = _LC6;
  uStack_74 = _LC6;
  uStack_70 = _LC6;
  uStack_6c = _LC6;
  local_f8 = _LC8;
  uStack_f4 = _LC8;
  uStack_f0 = _LC8;
  uStack_ec = _LC8;
  local_d8 = _LC8;
  uStack_d4 = _LC8;
  uStack_d0 = _LC8;
  uStack_cc = _LC8;
  local_a8 = _LC8;
  uStack_a4 = _LC8;
  uStack_a0 = _LC8;
  uStack_9c = _LC8;
  local_88 = _LC8;
  uStack_84 = _LC8;
  uStack_80 = _LC8;
  uStack_7c = _LC8;
  local_b0 = 0;
  local_68 = 0;
  local_60 = 0;
  local_108 = &local_48;
  local_118 = param_1;
  uStack_54 = local_58;
  uStack_50 = local_58;
  uStack_4c = local_58;
  uVar4 = parallel_partitioning<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::____:PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                    (*(BuildRef **)this,uVar2,uVar1,&local_11b,(PrimInfoT_conflict *)&local_f8,
                     (PrimInfoT_conflict *)&local_a8,
                     (_lambda_embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>_>__BuildRef_const___1_
                      *)&local_118,&local_11a,&local_119,0x80);
  *(ulong *)(param_3 + 0x40) = uVar2;
  *(ulong *)(param_3 + 0x48) = uVar4;
  *(ulong *)(param_3 + 0x50) = uVar4;
  *(ulong *)param_3 = CONCAT44(uStack_f4,local_f8);
  *(ulong *)(param_3 + 8) = CONCAT44(uStack_ec,uStack_f0);
  *(ulong *)(param_3 + 0x10) = CONCAT44(uStack_e4,local_e8);
  *(ulong *)(param_3 + 0x18) = CONCAT44(uStack_dc,uStack_e0);
  *(undefined4 *)(param_3 + 0x20) = local_d8;
  *(undefined4 *)(param_3 + 0x24) = uStack_d4;
  *(undefined4 *)(param_3 + 0x28) = uStack_d0;
  *(undefined4 *)(param_3 + 0x2c) = uStack_cc;
  *(undefined4 *)(param_3 + 0x30) = local_c8;
  *(undefined4 *)(param_3 + 0x34) = uStack_c4;
  *(undefined4 *)(param_3 + 0x38) = uStack_c0;
  *(undefined4 *)(param_3 + 0x3c) = uStack_bc;
  *(ulong *)(param_4 + 0x40) = uVar4;
  *(ulong *)(param_4 + 0x48) = uVar1;
  *(ulong *)(param_4 + 0x50) = uVar1;
  *(ulong *)param_4 = CONCAT44(uStack_a4,local_a8);
  *(ulong *)(param_4 + 8) = CONCAT44(uStack_9c,uStack_a0);
  *(undefined4 *)(param_4 + 0x10) = local_98;
  *(undefined4 *)(param_4 + 0x14) = uStack_94;
  *(undefined4 *)(param_4 + 0x18) = uStack_90;
  *(undefined4 *)(param_4 + 0x1c) = uStack_8c;
  *(undefined4 *)(param_4 + 0x20) = local_88;
  *(undefined4 *)(param_4 + 0x24) = uStack_84;
  *(undefined4 *)(param_4 + 0x28) = uStack_80;
  *(undefined4 *)(param_4 + 0x2c) = uStack_7c;
  *(undefined4 *)(param_4 + 0x30) = local_78;
  *(undefined4 *)(param_4 + 0x34) = uStack_74;
  *(undefined4 *)(param_4 + 0x38) = uStack_70;
  *(undefined4 *)(param_4 + 0x3c) = uStack_6c;
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_b0 - local_b8;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange const&,
   embree::sse2::PrimInfoExtRange&, embree::sse2::PrimInfoExtRange&) */

void __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
::split(HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
        *this,BinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
       PrimInfoExtRange *param_4)

{
  undefined8 *puVar1;
  int *piVar2;
  undefined4 uVar3;
  float fVar4;
  int iVar5;
  ulong uVar6;
  undefined8 uVar7;
  long lVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 *puVar13;
  undefined1 (*pauVar14) [16];
  undefined1 (*pauVar15) [16];
  ulong uVar16;
  long *plVar17;
  long lVar18;
  TaskScheduler *pTVar19;
  uint uVar20;
  undefined1 (*pauVar21) [16];
  ulong uVar22;
  long lVar23;
  undefined8 *puVar24;
  ulong uVar25;
  long **in_R10;
  long lVar26;
  long *plVar27;
  long *unaff_R14;
  long in_FS_OFFSET;
  float fVar28;
  undefined1 auVar29 [16];
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  undefined1 auVar45 [16];
  undefined1 auVar46 [16];
  undefined1 auVar47 [16];
  undefined1 local_210 [16];
  undefined1 local_200 [16];
  uint local_1f0;
  uint uStack_1ec;
  uint uStack_1e8;
  uint uStack_1e4;
  long *local_1d0;
  long *plStack_1c8;
  long lStack_1c0;
  long local_1b8;
  long *local_1b0;
  long *local_1a8;
  long local_1a0;
  long local_198;
  long lStack_190;
  long lStack_188;
  undefined8 uStack_180;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
  *pHStack_178;
  long **pplStack_170;
  TaskGroupContext *pTStack_168;
  long *local_160;
  long lStack_158;
  undefined8 local_150;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
  *pHStack_148;
  long **local_140;
  TaskGroupContext *pTStack_138;
  long local_130;
  long lStack_128;
  undefined8 local_120;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
  *pHStack_118;
  long **local_110;
  TaskGroupContext *pTStack_108;
  long local_100;
  long lStack_f8;
  undefined8 local_f0;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
  *pHStack_e8;
  long **local_e0;
  TaskGroupContext *pTStack_d8;
  undefined8 local_b0;
  undefined8 uStack_a8;
  undefined8 local_a0;
  undefined8 uStack_98;
  undefined8 local_90;
  undefined8 uStack_88;
  undefined8 local_80;
  undefined8 uStack_78;
  ulong local_70;
  ulong local_68;
  ulong local_60;
  long local_48;
  
  local_b0 = *(undefined8 *)param_2;
  uStack_a8 = *(undefined8 *)(param_2 + 8);
  local_90 = *(undefined8 *)(param_2 + 0x20);
  uStack_88 = *(undefined8 *)(param_2 + 0x28);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  uVar16 = *(ulong *)(param_2 + 0x40);
  uVar6 = *(ulong *)(param_2 + 0x48);
  local_a0 = *(undefined8 *)(param_2 + 0x10);
  uStack_98 = *(undefined8 *)(param_2 + 0x18);
  uVar25 = *(ulong *)(param_2 + 0x50);
  uVar20 = *(uint *)(param_1 + 4);
  pauVar15 = (undefined1 (*) [16])(ulong)uVar20;
  local_80 = *(undefined8 *)(param_2 + 0x30);
  uStack_78 = *(undefined8 *)(param_2 + 0x38);
  local_70 = uVar16;
  local_68 = uVar6;
  local_60 = uVar25;
  if (uVar20 != 0xffffffff) {
    if (uVar6 - uVar16 < 0x400) {
      iVar5 = *(int *)(param_1 + 8);
      unaff_R14 = *(long **)this;
      lVar26 = 0;
      lVar23 = 1;
      auVar41._0_8_ = CONCAT44(_LC6,_LC6);
      auVar41._8_4_ = _LC6;
      auVar41._12_4_ = _LC6;
      auVar42._0_8_ = CONCAT44(_LC8,_LC8);
      auVar42._8_4_ = _LC8;
      auVar42._12_4_ = _LC8;
      auVar37 = *(undefined1 (*) [16])(&mm_lookupmask_ps + (long)(1 << ((byte)uVar20 & 0x1f)) * 2);
      auVar43._8_4_ = _LC6;
      auVar43._0_8_ = auVar41._0_8_;
      auVar43._12_4_ = _LC6;
      auVar44._8_4_ = _LC8;
      auVar44._0_8_ = auVar42._0_8_;
      auVar44._12_4_ = _LC8;
      auVar45._8_4_ = _LC6;
      auVar45._0_8_ = auVar41._0_8_;
      auVar45._12_4_ = _LC6;
      auVar46._8_4_ = _LC8;
      auVar46._0_8_ = auVar42._0_8_;
      auVar46._12_4_ = _LC8;
      pauVar21 = (undefined1 (*) [16])(unaff_R14 + uVar6 * 8 + -8);
      local_210 = auVar41;
      local_200 = auVar42;
      for (pauVar14 = (undefined1 (*) [16])(unaff_R14 + uVar16 * 8); pauVar14 <= pauVar21;
          pauVar14 = pauVar14 + 4) {
        auVar38 = pauVar14[1];
        auVar39 = *pauVar14;
        auVar30._0_4_ = auVar38._0_4_ + auVar39._0_4_;
        auVar30._4_4_ = auVar38._4_4_ + auVar39._4_4_;
        auVar30._8_4_ = auVar38._8_4_ + auVar39._8_4_;
        auVar30._12_4_ = auVar38._12_4_ + auVar39._12_4_;
        local_1f0 = auVar37._0_4_;
        uStack_1ec = auVar37._4_4_;
        uStack_1e8 = auVar37._8_4_;
        uStack_1e4 = auVar37._12_4_;
        auVar33._0_4_ =
             -(uint)((int)((auVar30._0_4_ - *(float *)(param_1 + 0x20)) * *(float *)(param_1 + 0x30)
                          + _LC15) < iVar5) & local_1f0;
        auVar33._4_4_ =
             -(uint)((int)((auVar30._4_4_ - *(float *)(param_1 + 0x24)) * *(float *)(param_1 + 0x34)
                          + _UNK_001440f4) < iVar5) & uStack_1ec;
        auVar33._8_4_ =
             -(uint)((int)((auVar30._8_4_ - *(float *)(param_1 + 0x28)) * *(float *)(param_1 + 0x38)
                          + _UNK_001440f8) < iVar5) & uStack_1e8;
        auVar33._12_4_ =
             -(uint)((int)((auVar30._12_4_ - *(float *)(param_1 + 0x2c)) *
                           *(float *)(param_1 + 0x3c) + _UNK_001440fc) < iVar5) & uStack_1e4;
        uVar20 = movmskps((int)pauVar15,auVar33);
        pauVar15 = (undefined1 (*) [16])(ulong)uVar20;
        if (uVar20 == 0) {
          while( true ) {
            pauVar15 = pauVar21;
            auVar40 = pauVar15[1];
            auVar36 = *pauVar15;
            lVar26 = lVar26 + 1;
            pauVar21 = pauVar15 + -4;
            auVar34._0_4_ = auVar40._0_4_ + auVar36._0_4_;
            auVar34._4_4_ = auVar40._4_4_ + auVar36._4_4_;
            auVar34._8_4_ = auVar40._8_4_ + auVar36._8_4_;
            auVar34._12_4_ = auVar40._12_4_ + auVar36._12_4_;
            auVar31._0_4_ =
                 -(uint)((int)((auVar34._0_4_ - *(float *)(param_1 + 0x20)) *
                               *(float *)(param_1 + 0x30) + _LC15) < iVar5) & local_1f0;
            auVar31._4_4_ =
                 -(uint)((int)((auVar34._4_4_ - *(float *)(param_1 + 0x24)) *
                               *(float *)(param_1 + 0x34) + _UNK_001440f4) < iVar5) & uStack_1ec;
            auVar31._8_4_ =
                 -(uint)((int)((auVar34._8_4_ - *(float *)(param_1 + 0x28)) *
                               *(float *)(param_1 + 0x38) + _UNK_001440f8) < iVar5) & uStack_1e8;
            auVar31._12_4_ =
                 -(uint)((int)((auVar34._12_4_ - *(float *)(param_1 + 0x2c)) *
                               *(float *)(param_1 + 0x3c) + _UNK_001440fc) < iVar5) & uStack_1e4;
            uVar20 = movmskps((int)in_R10,auVar31);
            in_R10 = (long **)(ulong)uVar20;
            if (uVar20 != 0) break;
            local_200 = minps(local_200,auVar36);
            local_210 = maxps(local_210,auVar40);
            auVar42 = minps(auVar42,auVar34);
            auVar41 = maxps(auVar41,auVar34);
            if (pauVar21 < pauVar14) goto LAB_00126d07;
          }
          in_R10 = *(long ***)pauVar14[2];
          auVar45 = maxps(auVar45,auVar40);
          auVar46 = minps(auVar46,auVar36);
          auVar44 = minps(auVar44,auVar34);
          local_210 = maxps(local_210,auVar38);
          *pauVar14 = auVar36;
          auVar42 = minps(auVar42,auVar30);
          auVar41 = maxps(auVar41,auVar30);
          local_200 = minps(local_200,auVar39);
          auVar43 = maxps(auVar43,auVar34);
          pauVar14[1] = pauVar15[1];
          uVar3 = *(undefined4 *)(pauVar14[2] + 8);
          *(undefined8 *)pauVar14[2] = *(undefined8 *)pauVar15[2];
          *(undefined4 *)(pauVar14[2] + 8) = *(undefined4 *)(pauVar15[2] + 8);
          *pauVar15 = auVar39;
          pauVar15[1] = auVar38;
          *(undefined4 *)(pauVar15[2] + 8) = uVar3;
          *(long ***)pauVar15[2] = in_R10;
          local_e0 = in_R10;
        }
        else {
          auVar46 = minps(auVar46,auVar39);
          auVar45 = maxps(auVar45,auVar38);
          auVar44 = minps(auVar44,auVar30);
          auVar43 = maxps(auVar43,auVar30);
        }
        lVar23 = lVar23 + 1;
      }
LAB_00126d07:
      *(ulong *)(param_3 + 0x40) = uVar16;
      auVar47._8_8_ = lVar26;
      auVar47._0_8_ = lVar23 + -1;
      lVar23 = (long)pauVar14 - (long)unaff_R14 >> 6;
      *(undefined1 (*) [16])param_3 = auVar46;
      *(long *)(param_3 + 0x48) = lVar23;
      *(long *)(param_3 + 0x50) = lVar23;
      *(undefined1 (*) [16])(param_3 + 0x10) = auVar45;
      *(undefined1 (*) [16])(param_3 + 0x20) = auVar44;
      *(undefined1 (*) [16])(param_3 + 0x30) = auVar43;
      *(long *)(param_4 + 0x40) = lVar23;
      *(ulong *)(param_4 + 0x48) = uVar6;
      *(ulong *)(param_4 + 0x50) = uVar6;
      *(undefined8 *)param_4 = local_200._0_8_;
      *(undefined8 *)(param_4 + 8) = local_200._8_8_;
      *(undefined8 *)(param_4 + 0x10) = local_210._0_8_;
      *(undefined8 *)(param_4 + 0x18) = local_210._8_8_;
      *(undefined1 (*) [16])(param_4 + 0x20) = auVar42;
      *(undefined1 (*) [16])(param_4 + 0x30) = auVar41;
    }
    else {
      auVar47 = parallel_object_split(this,param_1,(PrimInfoExtRange *)&local_b0,param_3,param_4);
    }
    if (uVar6 != uVar25) {
      uVar25 = uVar25 - uVar6;
      fVar28 = ((float)auVar47._0_8_ / (float)(auVar47._8_8_ + auVar47._0_8_)) * (float)uVar25;
      if ((float)((uint)fVar28 & _LC25) < _LC22) {
        fVar28 = (float)((uint)(float)(int)fVar28 | ~_LC25 & (uint)fVar28);
      }
      if (__LC24 <= fVar28) {
        uVar16 = (long)(fVar28 - __LC24) ^ 0x8000000000000000;
      }
      else {
        uVar16 = (ulong)fVar28;
      }
      if (uVar25 < uVar16) {
        uVar16 = uVar25;
      }
      *(ulong *)(param_3 + 0x50) = *(long *)(param_3 + 0x48) + uVar16;
      lVar23 = *(long *)(param_4 + 0x48);
      *(ulong *)(param_4 + 0x50) = (uVar25 + lVar23) - uVar16;
      plVar17 = (long *)(*(long *)(param_3 + 0x50) - *(long *)(param_3 + 0x48));
      lVar26 = *(long *)(param_4 + 0x40);
      plVar27 = (long *)(lVar23 - lVar26);
      local_1b0 = plVar17;
      local_1a8 = plVar27;
      if (plVar17 == (long *)0x0) goto LAB_00126d68;
      if (plVar17 < plVar27) {
        local_130 = (long)plVar17 + lVar26;
        local_110 = &local_1a8;
        local_1a0 = 0;
        local_120 = 0x40;
        lStack_128 = lVar26;
        pHStack_118 = this;
        pTStack_108 = (TaskGroupContext *)&local_1a0;
        lVar23 = embree::TaskScheduler::thread();
        if (lVar23 == 0) {
          pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
          TaskScheduler::
          spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                    (pTVar19,(_lambda___1_ *)&local_130,(TaskGroupContext *)&local_1a0,
                     (ulong)plVar17,true);
        }
        else {
          if (0xfff < *(ulong *)(lVar23 + 0x40080)) goto LAB_00127b52;
          lVar26 = *(long *)(lVar23 + 0xc00c0);
          uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
          if (0x80000 < uVar16) goto LAB_00127b52;
          *(ulong *)(lVar23 + 0xc00c0) = uVar16;
          puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
          *puVar24 = &PTR_execute_00143a58;
          puVar24[1] = local_130;
          puVar24[2] = lStack_128;
          puVar24[3] = local_120;
          puVar24[4] = pHStack_118;
          puVar24[5] = local_110;
          puVar24[6] = pTStack_108;
          lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
          piVar2 = (int *)(lVar23 + 0x40 + lVar18);
          lVar8 = *(long *)(lVar23 + 0xc0100);
          *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
          *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
          lVar18 = lVar18 + lVar23;
          *(undefined8 **)(lVar18 + 0x50) = puVar24;
          *(long *)(lVar18 + 0x58) = lVar8;
          *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&local_1a0;
          *(long *)(lVar18 + 0x68) = lVar26;
          *(long **)(lVar18 + 0x70) = plVar17;
          if (lVar8 != 0) {
            LOCK();
            *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
            UNLOCK();
          }
          LOCK();
          if (*piVar2 == 0) {
            *piVar2 = 1;
          }
          UNLOCK();
          LOCK();
          *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
          UNLOCK();
          plVar17 = (long *)(lVar23 + 0x40040);
          if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
            LOCK();
            *plVar17 = *(long *)(lVar23 + 0x40080) + -1;
            UNLOCK();
          }
        }
        embree::TaskScheduler::wait();
        lVar26 = local_1a0;
        lVar23 = local_100;
      }
      else {
        local_e0 = &local_1b0;
        local_f0 = 0x40;
        local_198 = 0;
        local_100 = lVar23;
        lStack_f8 = lVar26;
        pHStack_e8 = this;
        pTStack_d8 = (TaskGroupContext *)&local_198;
        lVar23 = embree::TaskScheduler::thread();
        if (lVar23 == 0) {
          pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
          TaskScheduler::
          spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                    (pTVar19,(_lambda___1_ *)&local_100,(TaskGroupContext *)&local_198,
                     (ulong)plVar27,true);
        }
        else {
          if (0xfff < *(ulong *)(lVar23 + 0x40080)) goto LAB_00127b52;
          lVar26 = *(long *)(lVar23 + 0xc00c0);
          uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
          if (0x80000 < uVar16) goto LAB_00127b52;
          *(ulong *)(lVar23 + 0xc00c0) = uVar16;
          puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
          *puVar24 = &PTR_execute_00143a70;
          puVar24[1] = local_100;
          puVar24[2] = lStack_f8;
          puVar24[3] = local_f0;
          puVar24[4] = pHStack_e8;
          puVar24[5] = local_e0;
          puVar24[6] = pTStack_d8;
          lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
          piVar2 = (int *)(lVar23 + 0x40 + lVar18);
          lVar8 = *(long *)(lVar23 + 0xc0100);
          *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
          *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
          lVar18 = lVar18 + lVar23;
          *(undefined8 **)(lVar18 + 0x50) = puVar24;
          *(long *)(lVar18 + 0x58) = lVar8;
          *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&local_198;
          *(long *)(lVar18 + 0x68) = lVar26;
          *(long **)(lVar18 + 0x70) = plVar27;
          if (lVar8 != 0) {
            LOCK();
            *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
            UNLOCK();
          }
          LOCK();
          if (*piVar2 == 0) {
            *piVar2 = 1;
          }
          UNLOCK();
          LOCK();
          *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
          UNLOCK();
          plVar27 = (long *)(lVar23 + 0x40040);
          if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
            LOCK();
            *plVar27 = *(long *)(lVar23 + 0x40080) + -1;
            UNLOCK();
          }
        }
        embree::TaskScheduler::wait();
        plVar17 = plVar27;
        lVar26 = local_198;
        lVar23 = local_100;
      }
      local_100 = lVar26;
      if (local_100 == 0) {
        *(long *)(param_4 + 0x40) = *(long *)(param_4 + 0x40) + (long)local_1b0;
        *(long *)(param_4 + 0x48) = *(long *)(param_4 + 0x48) + (long)local_1b0;
        *(long *)(param_4 + 0x50) = *(long *)(param_4 + 0x50) + (long)local_1b0;
        local_100 = lVar23;
      }
      else {
        do {
          param_4 = (PrimInfoExtRange *)&local_100;
          std::__exception_ptr::exception_ptr::_M_addref();
          lVar23 = std::rethrow_exception(param_4);
LAB_001278b8:
          local_140 = &local_1d0;
          local_1b8 = 0;
          local_150 = 0x40;
          local_160 = plVar17;
          lStack_158 = lVar23;
          pHStack_148 = this;
          pTStack_138 = (TaskGroupContext *)&local_1b8;
          lVar23 = embree::TaskScheduler::thread();
          if (lVar23 == 0) {
            pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
            plVar17 = unaff_R14;
            TaskScheduler::
            spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                      (pTVar19,(_lambda___1_ *)&local_160,(TaskGroupContext *)&local_1b8,
                       (ulong)unaff_R14,true);
          }
          else {
            if (0xfff < *(ulong *)(lVar23 + 0x40080)) goto LAB_00127b52;
            lVar26 = *(long *)(lVar23 + 0xc00c0);
            uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
            if (0x80000 < uVar16) goto LAB_00127b52;
            *(ulong *)(lVar23 + 0xc00c0) = uVar16;
            puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
            *puVar24 = &PTR_execute_00143a70;
            puVar24[1] = local_160;
            puVar24[2] = lStack_158;
            puVar24[3] = local_150;
            puVar24[4] = pHStack_148;
            puVar24[5] = local_140;
            puVar24[6] = pTStack_138;
            lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
            piVar2 = (int *)(lVar23 + 0x40 + lVar18);
            lVar8 = *(long *)(lVar23 + 0xc0100);
            *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
            *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
            lVar18 = lVar18 + lVar23;
            *(undefined8 **)(lVar18 + 0x50) = puVar24;
            *(long *)(lVar18 + 0x58) = lVar8;
            *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&local_1b8;
            *(long *)(lVar18 + 0x68) = lVar26;
            *(long **)(lVar18 + 0x70) = unaff_R14;
            if (lVar8 != 0) {
              LOCK();
              *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
              UNLOCK();
            }
            LOCK();
            if (*piVar2 == 0) {
              *piVar2 = 1;
            }
            UNLOCK();
            LOCK();
            *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
            UNLOCK();
            plVar17 = (long *)(lVar23 + 0x40040);
            if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
              LOCK();
              *plVar17 = *(long *)(lVar23 + 0x40080) + -1;
              UNLOCK();
            }
          }
          embree::TaskScheduler::wait();
          lVar26 = local_1b8;
          lVar23 = local_100;
joined_r0x0012733c:
          local_100 = lVar26;
        } while (local_100 != 0);
        *(long *)(param_4 + 0x40) = *(long *)(param_4 + 0x40) + (long)local_1d0;
        *(long *)(param_4 + 0x48) = *(long *)(param_4 + 0x48) + (long)local_1d0;
        *(long *)(param_4 + 0x50) = *(long *)(param_4 + 0x50) + (long)local_1d0;
        local_100 = lVar23;
      }
    }
    goto LAB_00126d68;
  }
  lVar23 = uVar6 * 0x40;
  puVar1 = (undefined8 *)(*(long *)this + lVar23);
  puVar24 = (undefined8 *)(*(long *)this + uVar16 * 0x40);
  if (puVar1 != puVar24) {
    lVar26 = lVar23 + uVar16 * -0x40;
    uVar22 = lVar26 >> 6;
    if (uVar22 == 0) {
      std::
      __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar24,puVar1,0xfffffffffffffffe);
    }
    else {
      lVar8 = 0x3f;
      if (uVar22 != 0) {
        for (; uVar22 >> lVar8 == 0; lVar8 = lVar8 + -1) {
        }
      }
      std::
      __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar24,puVar1,(long)(int)lVar8 * 2);
      if (0x400 < lVar26) {
        puVar24 = puVar24 + 0x80;
        std::
        __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
                  ();
        for (; puVar1 != puVar24; puVar24 = puVar24 + 8) {
          fVar28 = *(float *)(puVar24 + 5);
          uVar9 = *puVar24;
          uVar10 = puVar24[1];
          uVar11 = puVar24[2];
          uVar12 = puVar24[3];
          uVar7 = puVar24[4];
          fVar4 = *(float *)(puVar24 + -3);
          puVar13 = puVar24;
          while (fVar28 < fVar4) {
            *puVar13 = puVar13[-8];
            puVar13[1] = puVar13[-7];
            puVar13[4] = puVar13[-4];
            puVar13[2] = puVar13[-6];
            puVar13[3] = puVar13[-5];
            *(undefined4 *)(puVar13 + 5) = *(undefined4 *)(puVar13 + -3);
            fVar4 = *(float *)(puVar13 + -0xb);
            puVar13 = puVar13 + -8;
          }
          puVar13[4] = uVar7;
          *puVar13 = uVar9;
          puVar13[1] = uVar10;
          puVar13[2] = uVar11;
          puVar13[3] = uVar12;
          *(float *)(puVar13 + 5) = fVar28;
        }
        goto LAB_00126ff1;
      }
    }
    std::
    __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
              (puVar24);
  }
LAB_00126ff1:
  uVar22 = uVar16 + uVar6 >> 1;
  if (uVar16 < uVar22) {
    auVar38._8_4_ = _LC8;
    auVar38._0_8_ = CONCAT44(_LC8,_LC8);
    auVar38._12_4_ = _LC8;
    auVar40._8_4_ = _LC8;
    auVar40._0_8_ = CONCAT44(_LC8,_LC8);
    auVar40._12_4_ = _LC8;
    auVar37._8_4_ = _LC6;
    auVar37._0_8_ = CONCAT44(_LC6,_LC6);
    auVar37._12_4_ = _LC6;
    auVar39._8_4_ = _LC6;
    auVar39._0_8_ = CONCAT44(_LC6,_LC6);
    auVar39._12_4_ = _LC6;
    pauVar15 = (undefined1 (*) [16])(uVar16 * 0x40 + *(long *)this);
    do {
      auVar36._0_4_ = *(float *)pauVar15[1] + *(float *)*pauVar15;
      auVar36._4_4_ = *(float *)(pauVar15[1] + 4) + *(float *)(*pauVar15 + 4);
      auVar36._8_4_ = *(float *)(pauVar15[1] + 8) + *(float *)(*pauVar15 + 8);
      auVar36._12_4_ = *(float *)(pauVar15[1] + 0xc) + *(float *)(*pauVar15 + 0xc);
      pauVar21 = pauVar15 + 4;
      auVar40 = minps(auVar40,*pauVar15);
      auVar39 = maxps(auVar39,pauVar15[1]);
      auVar38 = minps(auVar38,auVar36);
      auVar37 = maxps(auVar37,auVar36);
      pauVar15 = pauVar21;
    } while ((undefined1 (*) [16])(*(long *)this + uVar22 * 0x40) != pauVar21);
    lVar26 = uVar22 - uVar16;
  }
  else {
    lVar26 = 0;
    auVar38._8_4_ = _LC8;
    auVar38._0_8_ = CONCAT44(_LC8,_LC8);
    auVar38._12_4_ = _LC8;
    auVar40._8_4_ = _LC8;
    auVar40._0_8_ = CONCAT44(_LC8,_LC8);
    auVar40._12_4_ = _LC8;
    auVar37._8_4_ = _LC6;
    auVar37._0_8_ = CONCAT44(_LC6,_LC6);
    auVar37._12_4_ = _LC6;
    auVar39._8_4_ = _LC6;
    auVar39._0_8_ = CONCAT44(_LC6,_LC6);
    auVar39._12_4_ = _LC6;
  }
  auVar35._4_4_ = _LC6;
  auVar35._0_4_ = _LC6;
  auVar32._4_4_ = _LC8;
  auVar32._0_4_ = _LC8;
  auVar35._8_4_ = _LC6;
  auVar32._8_4_ = _LC8;
  auVar35._12_4_ = _LC6;
  auVar32._12_4_ = _LC8;
  auVar36 = auVar35;
  auVar47 = auVar32;
  if (uVar22 < uVar6) {
    pauVar15 = (undefined1 (*) [16])(uVar22 * 0x40 + *(long *)this);
    do {
      auVar29._0_4_ = *(float *)pauVar15[1] + *(float *)*pauVar15;
      auVar29._4_4_ = *(float *)(pauVar15[1] + 4) + *(float *)(*pauVar15 + 4);
      auVar29._8_4_ = *(float *)(pauVar15[1] + 8) + *(float *)(*pauVar15 + 8);
      auVar29._12_4_ = *(float *)(pauVar15[1] + 0xc) + *(float *)(*pauVar15 + 0xc);
      pauVar21 = pauVar15 + 4;
      auVar47 = minps(auVar47,*pauVar15);
      auVar35 = maxps(auVar35,pauVar15[1]);
      auVar32 = minps(auVar32,auVar29);
      auVar36 = maxps(auVar36,auVar29);
      pauVar15 = pauVar21;
    } while (pauVar21 != (undefined1 (*) [16])(*(long *)this + lVar23));
    lVar23 = uVar6 - uVar22;
  }
  else {
    lVar23 = 0;
  }
  *(ulong *)(param_3 + 0x40) = uVar16;
  *(ulong *)(param_3 + 0x48) = uVar22;
  *(ulong *)(param_3 + 0x50) = uVar22;
  *(undefined1 (*) [16])param_3 = auVar40;
  *(undefined1 (*) [16])(param_3 + 0x10) = auVar39;
  *(undefined1 (*) [16])(param_3 + 0x20) = auVar38;
  *(undefined1 (*) [16])(param_3 + 0x30) = auVar37;
  *(ulong *)(param_4 + 0x40) = uVar22;
  *(ulong *)(param_4 + 0x48) = uVar6;
  *(ulong *)(param_4 + 0x50) = uVar6;
  *(undefined1 (*) [16])param_4 = auVar47;
  *(undefined1 (*) [16])(param_4 + 0x10) = auVar35;
  *(undefined1 (*) [16])(param_4 + 0x20) = auVar32;
  *(undefined1 (*) [16])(param_4 + 0x30) = auVar36;
  if (uVar6 != uVar25) {
    uVar25 = uVar25 - uVar6;
    fVar28 = ((float)lVar26 / (float)(ulong)(lVar26 + lVar23)) * (float)uVar25;
    if ((float)((uint)fVar28 & _LC25) < _LC22) {
      fVar28 = (float)((uint)(float)(int)fVar28 | ~_LC25 & (uint)fVar28);
    }
    if (__LC24 <= fVar28) {
      uVar16 = (long)(fVar28 - __LC24) ^ 0x8000000000000000;
    }
    else {
      uVar16 = (ulong)fVar28;
    }
    if (uVar25 < uVar16) {
      uVar16 = uVar25;
    }
    *(ulong *)(param_3 + 0x50) = uVar16 + *(long *)(param_3 + 0x48);
    plVar17 = *(long **)(param_4 + 0x48);
    *(ulong *)(param_4 + 0x50) = (long)plVar17 + (uVar25 - uVar16);
    lVar23 = *(long *)(param_4 + 0x40);
    plVar27 = (long *)(*(long *)(param_3 + 0x50) - *(long *)(param_3 + 0x48));
    unaff_R14 = (long *)((long)plVar17 - lVar23);
    local_1d0 = plVar27;
    plStack_1c8 = unaff_R14;
    if (plVar27 != (long *)0x0) {
      if (unaff_R14 <= plVar27) goto LAB_001278b8;
      lStack_190 = (long)plVar27 + lVar23;
      pplStack_170 = &plStack_1c8;
      lStack_1c0 = 0;
      uStack_180 = 0x40;
      lStack_188 = lVar23;
      pHStack_178 = this;
      pTStack_168 = (TaskGroupContext *)&lStack_1c0;
      lVar23 = embree::TaskScheduler::thread();
      if (lVar23 != 0) {
        if (*(ulong *)(lVar23 + 0x40080) < 0x1000) {
          lVar26 = *(long *)(lVar23 + 0xc00c0);
          uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
          if (uVar16 < 0x80001) {
            puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
            *(ulong *)(lVar23 + 0xc00c0) = uVar16;
            puVar24[1] = lStack_190;
            puVar24[2] = lStack_188;
            *puVar24 = &PTR_execute_00143a58;
            puVar24[3] = uStack_180;
            puVar24[4] = pHStack_178;
            puVar24[5] = pplStack_170;
            puVar24[6] = pTStack_168;
            lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
            piVar2 = (int *)(lVar23 + 0x40 + lVar18);
            lVar8 = *(long *)(lVar23 + 0xc0100);
            *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
            *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
            lVar18 = lVar18 + lVar23;
            *(undefined8 **)(lVar18 + 0x50) = puVar24;
            *(long *)(lVar18 + 0x58) = lVar8;
            *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&lStack_1c0;
            *(long *)(lVar18 + 0x68) = lVar26;
            *(long **)(lVar18 + 0x70) = plVar27;
            if (lVar8 != 0) {
              LOCK();
              *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
              UNLOCK();
            }
            LOCK();
            if (*piVar2 == 0) {
              *piVar2 = 1;
            }
            UNLOCK();
            LOCK();
            *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
            UNLOCK();
            plVar27 = (long *)(lVar23 + 0x40040);
            if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
              LOCK();
              *plVar27 = *(long *)(lVar23 + 0x40080) + -1;
              UNLOCK();
            }
            goto LAB_0012732c;
          }
        }
LAB_00127b52:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar19,(_lambda___1_ *)&lStack_190,(TaskGroupContext *)&lStack_1c0,(ulong)plVar27,
                 true);
LAB_0012732c:
      embree::TaskScheduler::wait();
      plVar17 = plVar27;
      lVar26 = lStack_1c0;
      lVar23 = local_100;
      goto joined_r0x0012733c;
    }
  }
LAB_00126d68:
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_split(embree::sse2::BinSplit<32ul> const&, embree::sse2::PrimInfoExtRange
   const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)#1},embree::sse2::HeuristicA...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined4 uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long *plVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  long *plVar11;
  long lVar12;
  long lVar13;
  ulong uVar14;
  long lVar15;
  long lVar16;
  ulong uVar17;
  TaskScheduler *pTVar18;
  undefined8 *puVar19;
  undefined8 *puVar20;
  undefined8 *puVar21;
  ulong uVar22;
  ulong uVar23;
  ulong uVar24;
  undefined8 *puVar25;
  ulong uVar26;
  long *plVar27;
  long *plVar28;
  long in_FS_OFFSET;
  long local_d0;
  ulong uStack_c8;
  undefined8 local_c0;
  undefined8 uStack_b8;
  TaskGroupContext *local_b0;
  ulong local_a0;
  long lStack_98;
  ulong local_90;
  undefined8 *puStack_88;
  TaskGroupContext *local_80;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar15 = *(long *)(this + 0x10);
  puVar21 = *(undefined8 **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar15)) {
    pTVar3 = *(TaskGroupContext **)(this + 0x28);
    uVar26 = (ulong)(*(long *)(this + 8) + lVar15) >> 1;
    local_a0 = uVar26;
    lStack_98 = lVar15;
    local_90 = *(ulong *)(this + 0x18);
    puStack_88 = puVar21;
    local_80 = pTVar3;
    lVar12 = embree::TaskScheduler::thread();
    if (lVar12 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)&local_a0,pTVar3,uVar26 - lVar15,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar12 + 0x40080)) goto LAB_001280cc;
      lVar4 = *(long *)(lVar12 + 0xc00c0);
      uVar14 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar14) goto LAB_001280cc;
      *(ulong *)(lVar12 + 0xc00c0) = uVar14;
      puVar21 = (undefined8 *)(lVar12 + 0x40090 + uVar14);
      *puVar21 = &PTR_execute_00143b30;
      puVar21[1] = local_a0;
      puVar21[2] = lStack_98;
      puVar21[5] = local_80;
      puVar21[3] = local_90;
      puVar21[4] = puStack_88;
      lVar13 = *(long *)(lVar12 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar12 + 0x40 + lVar13);
      lVar16 = *(long *)(lVar12 + 0xc0100);
      *(undefined4 *)(lVar12 + 0x44 + lVar13) = 1;
      *(undefined1 *)(lVar12 + 0x48 + lVar13) = 1;
      lVar13 = lVar13 + lVar12;
      *(undefined8 **)(lVar13 + 0x50) = puVar21;
      *(long *)(lVar13 + 0x58) = lVar16;
      *(TaskGroupContext **)(lVar13 + 0x60) = pTVar3;
      *(long *)(lVar13 + 0x68) = lVar4;
      *(ulong *)(lVar13 + 0x70) = uVar26 - lVar15;
      if (lVar16 != 0) {
        LOCK();
        *(int *)(lVar16 + 4) = *(int *)(lVar16 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar12 + 0x40080) = *(long *)(lVar12 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar12 + 0x40080) - 1U <= *(ulong *)(lVar12 + 0x40040)) {
        LOCK();
        *(long *)(lVar12 + 0x40040) = *(long *)(lVar12 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_c0 = *(undefined8 *)(this + 0x18);
    local_d0 = *(long *)(this + 8);
    pTVar3 = *(TaskGroupContext **)(this + 0x28);
    uStack_b8 = *(undefined8 *)(this + 0x20);
    uVar14 = local_d0 - uVar26;
    uStack_c8 = uVar26;
    local_b0 = pTVar3;
    lVar15 = embree::TaskScheduler::thread();
    if (lVar15 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)&local_d0,pTVar3,uVar14,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar15 + 0x40080)) {
LAB_001280cc:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar12 = *(long *)(lVar15 + 0xc00c0);
      uVar26 = lVar12 + 0x30 + (ulong)(-(int)lVar12 & 0x3f);
      if (0x80000 < uVar26) goto LAB_001280cc;
      *(ulong *)(lVar15 + 0xc00c0) = uVar26;
      puVar21 = (undefined8 *)(lVar15 + 0x40090 + uVar26);
      *puVar21 = &PTR_execute_00143b30;
      puVar21[1] = local_d0;
      puVar21[2] = uStack_c8;
      puVar21[5] = local_b0;
      puVar21[3] = local_c0;
      puVar21[4] = uStack_b8;
      lVar16 = *(long *)(lVar15 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar15 + 0x40 + lVar16);
      lVar4 = *(long *)(lVar15 + 0xc0100);
      *(undefined4 *)(lVar15 + 0x44 + lVar16) = 1;
      *(undefined1 *)(lVar15 + 0x48 + lVar16) = 1;
      lVar16 = lVar16 + lVar15;
      *(undefined8 **)(lVar16 + 0x50) = puVar21;
      *(long *)(lVar16 + 0x58) = lVar4;
      *(TaskGroupContext **)(lVar16 + 0x60) = pTVar3;
      *(long *)(lVar16 + 0x68) = lVar12;
      *(ulong *)(lVar16 + 0x70) = uVar14;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar15 + 0x40080) = *(long *)(lVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar15 + 0x40080) - 1U <= *(ulong *)(lVar15 + 0x40040)) {
        LOCK();
        *(long *)(lVar15 + 0x40040) = *(long *)(lVar15 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar5 = (long *)puVar21[1];
    lVar12 = plVar5[0x98];
    uVar17 = lVar15 * *(long *)*puVar21;
    uVar14 = plVar5[0x99] - lVar12;
    uVar26 = uVar17 / (ulong)plVar5[6];
    uVar23 = uVar26;
    if (uVar26 < uVar14) {
      plVar27 = plVar5 + 0x98;
    }
    else {
      plVar28 = plVar5 + 0x9a;
      do {
        plVar27 = plVar28;
        lVar12 = *plVar27;
        uVar23 = uVar23 - uVar14;
        uVar14 = plVar27[1] - lVar12;
        plVar28 = plVar27 + 2;
      } while (uVar14 <= uVar23);
    }
    lVar15 = plVar5[0x118];
    uVar24 = plVar5[0x119] - lVar15;
    uVar22 = uVar26;
    if (uVar26 < uVar24) {
      plVar28 = plVar5 + 0x118;
    }
    else {
      plVar11 = plVar5 + 0x11a;
      do {
        plVar28 = plVar11;
        lVar15 = *plVar28;
        uVar22 = uVar22 - uVar24;
        uVar24 = plVar28[1] - lVar15;
        plVar11 = plVar28 + 2;
      } while (uVar24 <= uVar22);
    }
    uVar14 = uVar14 - uVar23;
    uVar26 = (*(long *)*puVar21 + uVar17) / (ulong)plVar5[6] - uVar26;
    uVar24 = uVar24 - uVar22;
    puVar21 = (undefined8 *)(*plVar5 + (lVar12 + uVar23) * 0x40);
    puVar25 = (undefined8 *)(*plVar5 + (lVar15 + uVar22) * 0x40);
    uVar23 = uVar26;
    if (uVar14 <= uVar26) {
      uVar23 = uVar14;
    }
    if (uVar24 < uVar23) {
      uVar23 = uVar24;
    }
    if (uVar26 != 0) {
joined_r0x00127f18:
      if (uVar24 == 0) {
        uVar24 = plVar28[3] - plVar28[2];
        puVar25 = (undefined8 *)(plVar28[2] * 0x40 + *plVar5);
        uVar23 = uVar26;
        if (uVar24 <= uVar26) {
          uVar23 = uVar24;
        }
        if (uVar14 < uVar23) {
          uVar23 = uVar14;
        }
        plVar28 = plVar28 + 2;
      }
      uVar26 = uVar26 - uVar23;
      uVar14 = uVar14 - uVar23;
      uVar24 = uVar24 - uVar23;
      puVar19 = puVar21;
      puVar20 = puVar25;
      uVar17 = uVar23;
      if (uVar23 != 0) {
        do {
          uVar6 = puVar20[1];
          uVar7 = *puVar19;
          uVar8 = puVar19[1];
          uVar9 = puVar19[2];
          uVar10 = puVar19[3];
          local_80 = (TaskGroupContext *)puVar19[4];
          *puVar19 = *puVar20;
          puVar19[1] = uVar6;
          uVar6 = puVar20[3];
          uVar2 = *(undefined4 *)(puVar19 + 5);
          puVar19[2] = puVar20[2];
          puVar19[3] = uVar6;
          puVar19[4] = puVar20[4];
          *(undefined4 *)(puVar19 + 5) = *(undefined4 *)(puVar20 + 5);
          puVar20[4] = local_80;
          *puVar20 = uVar7;
          puVar20[1] = uVar8;
          puVar20[2] = uVar9;
          puVar20[3] = uVar10;
          *(undefined4 *)(puVar20 + 5) = uVar2;
          uVar17 = uVar17 - 1;
          puVar19 = puVar19 + 8;
          puVar20 = puVar20 + 8;
        } while (uVar17 != 0);
        puVar25 = puVar25 + uVar23 * 8;
        puVar21 = puVar21 + uVar23 * 8;
        if (uVar26 == 0) goto LAB_00127fe8;
      }
      if (uVar14 == 0) {
        uVar14 = plVar27[3] - plVar27[2];
        puVar21 = (undefined8 *)(plVar27[2] * 0x40 + *plVar5);
        uVar23 = uVar24;
        if (uVar26 <= uVar24) {
          uVar23 = uVar26;
        }
        if (uVar14 < uVar23) {
          uVar23 = uVar14;
        }
        plVar27 = plVar27 + 2;
      }
      else {
        uVar23 = 0;
      }
      goto joined_r0x00127f18;
    }
LAB_00127fe8:
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::PrimInfoT<embree::BBox<embree::Vec3fa> > embree::parallel_reduce_internal<unsigned long,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned
   long> const&)#1}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   > const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned long, unsigned
   long, unsigned long, unsigned long, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::range<unsigned
   long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef,
   32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>
   > const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#2} const&) */

ulong embree::
      parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_2_>
                (ulong param_1,ulong param_2,ulong param_3,ulong param_4,PrimInfoT_conflict *param_5
                ,_lambda_embree__range<unsigned_long>_const___1_ *param_6,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___2_
                *param_7)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  long lVar4;
  ulong uVar5;
  long lVar6;
  long lVar7;
  undefined1 (*pauVar8) [16];
  undefined1 (*pauVar9) [16];
  undefined8 uVar10;
  long lVar11;
  long in_FS_OFFSET;
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  ulong local_2108;
  ulong local_2100;
  ulong local_20f8 [2];
  ulong local_20e8;
  ulong *local_20e0;
  ulong *local_20d8;
  ulong *local_20d0;
  undefined1 (*local_20c8) [16];
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___2_
  *local_20c0;
  ulong local_20b0;
  undefined8 uStack_20a8;
  undefined8 local_20a0;
  ulong **ppuStack_2098;
  ulong *local_2090;
  undefined1 local_2080 [8160];
  undefined1 (*local_a0) [16];
  ulong local_98;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2108 = param_4;
  local_2100 = param_3;
  local_20f8[0] = param_2;
  uVar5 = embree::TaskScheduler::threadCount();
  if (0x200 < local_20f8[0]) {
    local_20f8[0] = 0x200;
  }
  if (uVar5 < local_20f8[0]) {
    local_20f8[0] = uVar5;
  }
  local_98 = local_20f8[0];
  if (local_20f8[0] * 0x50 < 0x2001) {
    local_a0 = (undefined1 (*) [16])local_2080;
  }
  else {
    local_a0 = (undefined1 (*) [16])embree::alignedMalloc(local_20f8[0] * 0x50,0x40);
  }
  uVar5 = local_20f8[0];
  local_20e0 = &local_2100;
  local_20d8 = &local_2108;
  local_20d0 = local_20f8;
  local_20c0 = param_7;
  local_20c8 = (undefined1 (*) [16])local_2080;
  if (local_20f8[0] == 0) {
    uVar10 = *(undefined8 *)(param_6 + 8);
    *(undefined8 *)param_1 = *(undefined8 *)param_6;
    *(undefined8 *)(param_1 + 8) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x18);
    *(undefined8 *)(param_1 + 0x10) = *(undefined8 *)(param_6 + 0x10);
    *(undefined8 *)(param_1 + 0x18) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x28);
    *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_6 + 0x20);
    *(undefined8 *)(param_1 + 0x28) = uVar10;
    uVar10 = *(undefined8 *)(param_6 + 0x38);
    *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_6 + 0x30);
    *(undefined8 *)(param_1 + 0x38) = uVar10;
    *(undefined8 *)(param_1 + 0x40) = *(undefined8 *)(param_6 + 0x40);
    *(undefined8 *)(param_1 + 0x48) = *(undefined8 *)(param_6 + 0x48);
  }
  else {
    ppuStack_2098 = &local_20e0;
    uStack_20a8 = 0;
    local_20a0 = 1;
    local_20e8 = 0;
    local_20b0 = local_20f8[0];
    local_2090 = &local_20e8;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      uVar10 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_9PrimInfoTINS_4BBoxINS_6Vec3faEEEEEZNS_4sse226HeuristicArrayOpenMergeSAHIZNSA_19BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_9TriangleMILi4EEEE5buildEvEUlRNSG_8BuildRefEPSH_E5_SH_Lm32EE22openNodesBasedOnExtendERNSA_16PrimInfoExtRangeEEUlRKNS_5rangeImEEE_ZNSL_22openNodesBasedOnExtendESN_EUlRKS9_SU_E0_EET0_T_SX_SX_SX_RKSW_RKT1_RKT2_EUlmE_EEvSX_SZ_EUlSR_E_EEvSX_SX_SX_SZ_PNS0_16TaskGroupContextEEUlvE_EEvRKSX_S19_mb
                (uVar10,&local_20b0,&local_20e8,uVar5,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_001293fe:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar11 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar11 + 0x30 + (ulong)(-(int)lVar11 & 0x3f);
      if (0x80000 < uVar2) goto LAB_001293fe;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40090 + uVar2);
      *puVar3 = 0x143b48;
      puVar3[1] = local_20b0;
      puVar3[2] = uStack_20a8;
      puVar3[3] = local_20a0;
      puVar3[4] = ppuStack_2098;
      puVar3[5] = local_2090;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_20e8;
      *(long *)(lVar7 + 0x68) = lVar11;
      *(ulong *)(lVar7 + 0x70) = uVar5;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_20e8 != 0) {
      local_20b0 = local_20e8;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20b0);
      goto LAB_001293f9;
    }
    auVar12 = *(undefined1 (*) [16])param_6;
    *(undefined1 (*) [16])param_1 = auVar12;
    auVar13 = *(undefined1 (*) [16])(param_6 + 0x10);
    *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
    auVar14 = *(undefined1 (*) [16])(param_6 + 0x20);
    *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
    auVar15 = *(undefined1 (*) [16])(param_6 + 0x30);
    *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
    lVar6 = *(long *)(param_6 + 0x40);
    lVar11 = *(long *)(param_6 + 0x48);
    *(long *)(param_1 + 0x40) = lVar6;
    *(long *)(param_1 + 0x48) = lVar11;
    if (local_20f8[0] != 0) {
      pauVar8 = local_a0;
      do {
        auVar12 = minps(auVar12,*pauVar8);
        auVar13 = maxps(auVar13,pauVar8[1]);
        pauVar9 = pauVar8 + 5;
        auVar14 = minps(auVar14,pauVar8[2]);
        auVar15 = maxps(auVar15,pauVar8[3]);
        lVar6 = lVar6 + *(long *)pauVar8[4];
        lVar11 = lVar11 + *(long *)(pauVar8[4] + 8);
        *(long *)(param_1 + 0x48) = lVar11;
        *(long *)(param_1 + 0x40) = lVar6;
        *(undefined1 (*) [16])param_1 = auVar12;
        *(undefined1 (*) [16])(param_1 + 0x10) = auVar13;
        *(undefined1 (*) [16])(param_1 + 0x20) = auVar14;
        *(undefined1 (*) [16])(param_1 + 0x30) = auVar15;
        pauVar8 = pauVar9;
      } while (local_a0 + local_20f8[0] * 5 != pauVar9);
    }
  }
  if (local_a0 != (undefined1 (*) [16])local_2080) {
    embree::alignedFree(local_a0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
LAB_001293f9:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)
    */

void __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
::openNodesBasedOnExtend
          (HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
           *this,PrimInfoExtRange *param_1)

{
  ulong *puVar1;
  ulong uVar2;
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  undefined1 auVar8 [16];
  undefined1 auVar9 [16];
  undefined1 auVar10 [16];
  undefined1 auVar11 [16];
  undefined1 auVar12 [16];
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  undefined1 auVar16 [16];
  undefined8 *puVar17;
  float *pfVar18;
  long lVar19;
  ulong uVar20;
  ulong uVar21;
  ulong uVar22;
  long lVar23;
  undefined1 (*pauVar24) [16];
  ulong uVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  float fVar30;
  undefined1 auVar29 [16];
  undefined1 auVar31 [16];
  long local_350;
  long local_348;
  long local_340;
  float local_338;
  undefined1 local_330 [8];
  float fStack_328;
  float fStack_324;
  long *local_320;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
  *local_318;
  long *local_310;
  long *local_308;
  undefined1 local_300 [16];
  undefined1 local_2f0 [16];
  undefined1 local_2e0 [16];
  undefined1 local_2d0 [16];
  undefined8 local_2c0;
  undefined8 local_2b8;
  undefined1 local_2b0 [8];
  float fStack_2a8;
  float fStack_2a4;
  undefined1 local_2a0 [16];
  undefined1 local_290 [16];
  undefined1 local_280 [16];
  undefined8 local_270;
  undefined8 local_268;
  float local_260;
  float fStack_25c;
  float fStack_258;
  float fStack_254;
  float local_250;
  float fStack_24c;
  float fStack_248;
  float fStack_244;
  ulong local_240;
  float local_238;
  float local_220;
  float fStack_21c;
  float fStack_218;
  float fStack_214;
  float local_210;
  float fStack_20c;
  float fStack_208;
  float fStack_204;
  ulong local_200;
  float local_1f8;
  float local_1e0;
  float fStack_1dc;
  float fStack_1d8;
  float fStack_1d4;
  float local_1d0;
  float fStack_1cc;
  float fStack_1c8;
  float fStack_1c4;
  ulong local_1c0;
  float local_1b8;
  float local_1a0;
  float fStack_19c;
  float fStack_198;
  float fStack_194;
  float local_190;
  float fStack_18c;
  float fStack_188;
  float fStack_184;
  ulong local_180;
  float local_178;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2b0._4_4_ = *(float *)(param_1 + 0x14) - *(float *)(param_1 + 4);
  local_2b0._0_4_ = *(float *)(param_1 + 0x10) - *(float *)param_1;
  fStack_2a8 = *(float *)(param_1 + 0x18) - *(float *)(param_1 + 8);
  fStack_2a4 = *(float *)(param_1 + 0x1c) - *(float *)(param_1 + 0xc);
  fVar26 = (float)((uint)(*(float *)(param_1 + 0x10) - *(float *)param_1) & _LC25);
  fVar27 = (float)((uint)(*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4)) & _LC25);
  fVar28 = (float)((uint)(*(float *)(param_1 + 0x18) - *(float *)(param_1 + 8)) & _LC25);
  if (fVar26 <= fVar27) {
    lVar23 = 4;
    if (fVar27 <= fVar28) {
      lVar23 = 8;
    }
    local_340 = 1;
    if (fVar27 <= fVar28) {
      local_340 = 2;
    }
  }
  else {
    uVar20 = (ulong)(fVar26 <= fVar28);
    local_340 = uVar20 * 2;
    lVar23 = uVar20 * 8;
  }
  local_338 = _LC28 / *(float *)(local_2b0 + lVar23);
  local_350 = *(long *)(param_1 + 0x48);
  LOCK();
  local_348 = 0;
  UNLOCK();
  uVar20 = *(ulong *)(param_1 + 0x48);
  local_2b0._4_4_ = _LC8;
  local_2b0._0_4_ = _LC8;
  fStack_2a8 = (float)_LC8;
  fStack_2a4 = (float)_LC8;
  local_2a0._4_4_ = _LC6;
  local_2a0._0_4_ = _LC6;
  local_2a0._8_4_ = _LC6;
  local_2a0._12_4_ = _LC6;
  local_318 = this;
  local_310 = &local_348;
  local_308 = &local_350;
  uVar21 = *(ulong *)(param_1 + 0x40);
  local_320 = &local_340;
  uVar22 = (uVar20 + 0x7f) - uVar21 >> 7;
  local_270 = 0;
  local_268 = 0;
  local_290 = _local_2b0;
  local_280 = local_2a0;
  if (uVar22 == 1) {
    local_2c0 = 0;
    local_2b8 = 0;
    local_300 = _local_2b0;
    local_2f0 = local_2a0;
    local_2e0 = _local_2b0;
    local_2d0 = local_2a0;
    if (uVar21 < uVar20) {
      do {
        lVar23 = uVar21 * 0x40;
        pfVar18 = (float *)(*(long *)local_318 + lVar23);
        puVar1 = *(ulong **)(pfVar18 + 8);
        uVar22 = (ulong)((uint)puVar1 & 8);
        if (((ulong)puVar1 & 8) == 0) {
          local_330._4_4_ = pfVar18[5] - pfVar18[1];
          local_330._0_4_ = pfVar18[4] - *pfVar18;
          fStack_328 = pfVar18[6] - pfVar18[2];
          fStack_324 = pfVar18[7] - pfVar18[3];
          if (__LC26 < *(float *)(local_330 + *local_320 * 4) * *(float *)(local_320 + 1)) {
            fVar26 = pfVar18[3];
            fVar27 = (float)((uint)pfVar18[7] >> 2);
            if (fVar27 == 0.0) {
              fVar27 = 1.4013e-45;
            }
            uVar25 = *puVar1;
            if (uVar25 == 8) {
              uVar2 = puVar1[1];
              uVar25 = 1;
            }
            else {
              local_330._4_4_ = *(undefined4 *)(puVar1 + 10);
              fStack_328 = *(float *)(puVar1 + 0xe);
              local_330._0_4_ = *(undefined4 *)(puVar1 + 6);
              fStack_324 = fVar27;
              if ((uVar25 & 8) == 0) {
                fVar28 = (float)local_330._4_4_ - *(float *)(puVar1 + 8);
                fVar30 = fStack_328 - *(float *)(puVar1 + 0xc);
                fVar28 = (fVar28 + fVar30) * ((float)local_330._0_4_ - *(float *)(puVar1 + 4)) +
                         fVar28 * fVar30;
                local_238 = fVar28 + fVar28;
              }
              else {
                local_238 = 0.0;
              }
              uVar2 = puVar1[1];
              local_240 = uVar25;
              uVar22 = 1;
              uVar25 = 2;
              local_260 = *(float *)(puVar1 + 4);
              fStack_25c = *(float *)(puVar1 + 8);
              fStack_258 = *(float *)(puVar1 + 0xc);
              fStack_254 = fVar26;
              local_250 = (float)local_330._0_4_;
              fStack_24c = (float)local_330._4_4_;
              fStack_248 = fStack_328;
              fStack_244 = fVar27;
            }
            if (uVar2 != 8) {
              local_330._4_4_ = *(float *)((long)puVar1 + 0x54);
              fStack_328 = *(float *)((long)puVar1 + 0x74);
              local_330._0_4_ = *(float *)((long)puVar1 + 0x34);
              fStack_324 = fVar27;
              if ((uVar2 & 8) == 0) {
                fVar28 = (float)local_330._4_4_ - *(float *)((long)puVar1 + 0x44);
                fVar30 = fStack_328 - *(float *)((long)puVar1 + 100);
                fVar28 = (fVar28 + fVar30) *
                         ((float)local_330._0_4_ - *(float *)((long)puVar1 + 0x24)) +
                         fVar28 * fVar30;
                local_1f8 = fVar28 + fVar28;
              }
              else {
                local_1f8 = 0.0;
              }
              local_200 = uVar2;
              local_220 = *(float *)((long)puVar1 + 0x24);
              fStack_21c = *(float *)((long)puVar1 + 0x44);
              fStack_218 = *(float *)((long)puVar1 + 100);
              fStack_214 = fVar26;
              local_210 = (float)local_330._0_4_;
              fStack_20c = (float)local_330._4_4_;
              fStack_208 = fStack_328;
              fStack_204 = fVar27;
              uVar22 = uVar25;
            }
            uVar25 = puVar1[2];
            uVar2 = puVar1[3];
            if (uVar25 == 8) {
              uVar25 = uVar22;
              if (uVar2 != 8) goto LAB_001297ca;
              LOCK();
              lVar19 = *local_310;
              *local_310 = *local_310 + (uVar22 - 1);
              UNLOCK();
              if (uVar22 != 0) goto LAB_00129855;
              puVar17 = (undefined8 *)(lVar23 + *(long *)local_318);
              *puVar17 = CONCAT44(fStack_25c,local_260);
              puVar17[1] = CONCAT44(fStack_254,fStack_258);
              puVar17[4] = local_240;
              puVar17[2] = CONCAT44(fStack_24c,local_250);
              puVar17[3] = CONCAT44(fStack_244,fStack_248);
              *(float *)(puVar17 + 5) = local_238;
            }
            else {
              local_330._4_4_ = *(undefined4 *)(puVar1 + 0xb);
              fStack_328 = *(float *)(puVar1 + 0xf);
              local_330._0_4_ = *(undefined4 *)(puVar1 + 7);
              fStack_324 = fVar27;
              if ((uVar25 & 8) == 0) {
                fVar28 = (float)local_330._4_4_ - *(float *)(puVar1 + 9);
                fVar30 = fStack_328 - *(float *)(puVar1 + 0xd);
                fVar28 = (fVar28 + fVar30) * ((float)local_330._0_4_ - *(float *)(puVar1 + 5)) +
                         fVar28 * fVar30;
                local_1b8 = fVar28 + fVar28;
              }
              else {
                local_1b8 = 0.0;
              }
              local_1c0 = uVar25;
              local_1e0 = *(float *)(puVar1 + 5);
              fStack_1dc = *(float *)(puVar1 + 9);
              fStack_1d8 = *(float *)(puVar1 + 0xd);
              fStack_1d4 = fVar26;
              local_1d0 = (float)local_330._0_4_;
              fStack_1cc = (float)local_330._4_4_;
              fStack_1c8 = fStack_328;
              fStack_1c4 = fVar27;
              uVar25 = uVar22 + 1;
              if (uVar2 == 8) {
                LOCK();
                lVar19 = *local_310;
                *local_310 = *local_310 + uVar22;
                UNLOCK();
                uVar22 = uVar22 + 1;
              }
              else {
LAB_001297ca:
                local_330._4_4_ = *(float *)((long)puVar1 + 0x5c);
                fStack_328 = *(float *)((long)puVar1 + 0x7c);
                local_330._0_4_ = *(float *)((long)puVar1 + 0x3c);
                fStack_324 = fVar27;
                if ((uVar2 & 8) == 0) {
                  fVar28 = (float)local_330._4_4_ - *(float *)((long)puVar1 + 0x4c);
                  fVar30 = fStack_328 - *(float *)((long)puVar1 + 0x6c);
                  fVar28 = (fVar28 + fVar30) *
                           ((float)local_330._0_4_ - *(float *)((long)puVar1 + 0x2c)) +
                           fVar28 * fVar30;
                  local_178 = fVar28 + fVar28;
                }
                else {
                  local_178 = 0.0;
                }
                local_180 = uVar2;
                local_1a0 = *(float *)((long)puVar1 + 0x2c);
                fStack_19c = *(float *)((long)puVar1 + 0x4c);
                fStack_198 = *(float *)((long)puVar1 + 0x6c);
                fStack_194 = fVar26;
                local_190 = (float)local_330._0_4_;
                fStack_18c = (float)local_330._4_4_;
                fStack_188 = fStack_328;
                fStack_184 = fVar27;
                LOCK();
                lVar19 = *local_310;
                *local_310 = *local_310 + uVar25;
                UNLOCK();
                uVar22 = uVar25 + 1;
              }
LAB_00129855:
              auVar9._4_4_ = fStack_25c;
              auVar9._0_4_ = local_260;
              auVar9._8_4_ = fStack_258;
              auVar9._12_4_ = fStack_254;
              auVar10._4_4_ = fStack_24c;
              auVar10._0_4_ = local_250;
              auVar10._8_4_ = fStack_248;
              auVar10._12_4_ = fStack_244;
              local_300 = minps(local_300,auVar9);
              local_2f0 = maxps(local_2f0,auVar10);
              auVar29._4_4_ = fStack_25c + fStack_24c;
              auVar29._0_4_ = local_260 + local_250;
              auVar29._8_4_ = fStack_258 + fStack_248;
              auVar29._12_4_ = fStack_254 + fStack_244;
              local_2e0 = minps(local_2e0,auVar29);
              auVar31._4_4_ = fStack_25c + fStack_24c;
              auVar31._0_4_ = local_260 + local_250;
              auVar31._8_4_ = fStack_258 + fStack_248;
              auVar31._12_4_ = fStack_254 + fStack_244;
              local_2d0 = maxps(local_2d0,auVar31);
              if (uVar22 != 1) {
                auVar11._4_4_ = fStack_21c;
                auVar11._0_4_ = local_220;
                auVar11._8_4_ = fStack_218;
                auVar11._12_4_ = fStack_214;
                local_300 = minps(local_300,auVar11);
                auVar12._4_4_ = fStack_20c;
                auVar12._0_4_ = local_210;
                auVar12._8_4_ = fStack_208;
                auVar12._12_4_ = fStack_204;
                local_2f0 = maxps(local_2f0,auVar12);
                auVar3._4_4_ = fStack_21c + fStack_20c;
                auVar3._0_4_ = local_220 + local_210;
                auVar3._8_4_ = fStack_218 + fStack_208;
                auVar3._12_4_ = fStack_214 + fStack_204;
                local_2e0 = minps(local_2e0,auVar3);
                auVar4._4_4_ = fStack_21c + fStack_20c;
                auVar4._0_4_ = local_220 + local_210;
                auVar4._8_4_ = fStack_218 + fStack_208;
                auVar4._12_4_ = fStack_214 + fStack_204;
                local_2d0 = maxps(local_2d0,auVar4);
                if (uVar22 != 2) {
                  auVar13._4_4_ = fStack_1dc;
                  auVar13._0_4_ = local_1e0;
                  auVar13._8_4_ = fStack_1d8;
                  auVar13._12_4_ = fStack_1d4;
                  local_300 = minps(local_300,auVar13);
                  auVar14._4_4_ = fStack_1cc;
                  auVar14._0_4_ = local_1d0;
                  auVar14._8_4_ = fStack_1c8;
                  auVar14._12_4_ = fStack_1c4;
                  local_2f0 = maxps(local_2f0,auVar14);
                  auVar5._4_4_ = fStack_1dc + fStack_1cc;
                  auVar5._0_4_ = local_1e0 + local_1d0;
                  auVar5._8_4_ = fStack_1d8 + fStack_1c8;
                  auVar5._12_4_ = fStack_1d4 + fStack_1c4;
                  local_2e0 = minps(local_2e0,auVar5);
                  auVar6._4_4_ = fStack_1dc + fStack_1cc;
                  auVar6._0_4_ = local_1e0 + local_1d0;
                  auVar6._8_4_ = fStack_1d8 + fStack_1c8;
                  auVar6._12_4_ = fStack_1d4 + fStack_1c4;
                  local_2d0 = maxps(local_2d0,auVar6);
                  if (uVar22 == 4) {
                    auVar15._4_4_ = fStack_19c;
                    auVar15._0_4_ = local_1a0;
                    auVar15._8_4_ = fStack_198;
                    auVar15._12_4_ = fStack_194;
                    local_300 = minps(local_300,auVar15);
                    auVar16._4_4_ = fStack_18c;
                    auVar16._0_4_ = local_190;
                    auVar16._8_4_ = fStack_188;
                    auVar16._12_4_ = fStack_184;
                    local_2f0 = maxps(local_2f0,auVar16);
                    auVar7._4_4_ = fStack_18c + fStack_19c;
                    auVar7._0_4_ = local_190 + local_1a0;
                    auVar7._8_4_ = fStack_188 + fStack_198;
                    auVar7._12_4_ = fStack_184 + fStack_194;
                    local_2e0 = minps(local_2e0,auVar7);
                    auVar8._4_4_ = fStack_18c + fStack_19c;
                    auVar8._0_4_ = local_190 + local_1a0;
                    auVar8._8_4_ = fStack_188 + fStack_198;
                    auVar8._12_4_ = fStack_184 + fStack_194;
                    local_2d0 = maxps(local_2d0,auVar8);
                  }
                }
              }
              pauVar24 = (undefined1 (*) [16])(lVar23 + *(long *)local_318);
              *(ulong *)pauVar24[2] = local_240;
              *pauVar24 = auVar9;
              pauVar24[1] = auVar10;
              *(float *)(pauVar24[2] + 8) = local_238;
              if (uVar22 != 1) {
                puVar17 = (undefined8 *)((*local_308 + lVar19) * 0x40 + *(long *)local_318);
                *puVar17 = CONCAT44(fStack_21c,local_220);
                puVar17[1] = CONCAT44(fStack_214,fStack_218);
                puVar17[4] = local_200;
                puVar17[2] = CONCAT44(fStack_20c,local_210);
                puVar17[3] = CONCAT44(fStack_204,fStack_208);
                *(float *)(puVar17 + 5) = local_1f8;
                if (uVar22 != 2) {
                  puVar17 = (undefined8 *)
                            (*(long *)local_318 + -0x40 + (lVar19 + 2 + *local_308) * 0x40);
                  *puVar17 = CONCAT44(fStack_1dc,local_1e0);
                  puVar17[1] = CONCAT44(fStack_1d4,fStack_1d8);
                  puVar17[4] = local_1c0;
                  puVar17[2] = CONCAT44(fStack_1cc,local_1d0);
                  puVar17[3] = CONCAT44(fStack_1c4,fStack_1c8);
                  *(float *)(puVar17 + 5) = local_1b8;
                  if (uVar22 == 4) {
                    puVar17 = (undefined8 *)
                              (*(long *)local_318 + -0x40 + (lVar19 + 3 + *local_308) * 0x40);
                    *puVar17 = CONCAT44(fStack_19c,local_1a0);
                    puVar17[1] = CONCAT44(fStack_194,fStack_198);
                    puVar17[4] = local_180;
                    puVar17[2] = CONCAT44(fStack_18c,local_190);
                    puVar17[3] = CONCAT44(fStack_184,fStack_188);
                    *(float *)(puVar17 + 5) = local_178;
                  }
                }
              }
            }
          }
        }
        uVar21 = uVar21 + 1;
      } while (uVar20 != uVar21);
    }
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::openNodesBasedOnExtend(embree::sse2::PrimInfoExtRange&)::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_2_>
              ((ulong)local_300,uVar22,uVar21,uVar20,(PrimInfoT_conflict *)0x80,
               (_lambda_embree__range<unsigned_long>_const___1_ *)local_2b0,
               (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___2_
                *)&local_320);
  }
  auVar31 = minps(*(undefined1 (*) [16])(param_1 + 0x20),local_2e0);
  auVar29 = maxps(*(undefined1 (*) [16])(param_1 + 0x30),local_2d0);
  *(undefined1 (*) [16])(param_1 + 0x20) = auVar31;
  *(undefined1 (*) [16])(param_1 + 0x30) = auVar29;
  *(long *)(param_1 + 0x48) = *(long *)(param_1 + 0x48) + local_348;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0012a055) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143b60;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#1}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)#1},embree::sse2::HeuristicArrayOp...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOp___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined8 *puVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  undefined1 auVar5 [16];
  undefined1 auVar6 [16];
  undefined1 auVar7 [16];
  long *plVar8;
  long *plVar9;
  long *plVar10;
  uint *puVar11;
  undefined8 uVar12;
  long lVar13;
  long lVar14;
  ulong uVar15;
  long lVar16;
  long lVar17;
  undefined1 (*pauVar18) [16];
  TaskScheduler *pTVar19;
  undefined1 (*pauVar20) [16];
  undefined1 (*pauVar21) [16];
  int iVar22;
  long lVar23;
  uint uVar24;
  TaskGroupContext *pTVar25;
  ulong uVar26;
  long in_FS_OFFSET;
  undefined4 uVar27;
  undefined4 uVar29;
  undefined4 uVar30;
  undefined1 auVar28 [16];
  undefined4 uVar31;
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 local_f0 [16];
  undefined1 local_e0 [16];
  long local_d0;
  ulong uStack_c8;
  undefined8 local_c0;
  undefined8 uStack_b8;
  TaskGroupContext *local_b0;
  ulong local_a0;
  long lStack_98;
  ulong local_90;
  long *plStack_88;
  TaskGroupContext *local_80;
  long local_48;
  
  lVar16 = *(long *)(this + 0x10);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  plVar8 = *(long **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar16)) {
    pTVar25 = *(TaskGroupContext **)(this + 0x28);
    uVar26 = (ulong)(*(long *)(this + 8) + lVar16) >> 1;
    local_a0 = uVar26;
    lStack_98 = lVar16;
    local_90 = *(ulong *)(this + 0x18);
    plStack_88 = plVar8;
    local_80 = pTVar25;
    lVar13 = embree::TaskScheduler::thread();
    if (lVar13 == 0) {
      pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar19,(_lambda___1_ *)&local_a0,pTVar25,uVar26 - lVar16,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar13 + 0x40080)) goto LAB_0012a819;
      lVar23 = *(long *)(lVar13 + 0xc00c0);
      uVar15 = lVar23 + 0x30 + (ulong)(-(int)lVar23 & 0x3f);
      if (0x80000 < uVar15) goto LAB_0012a819;
      *(ulong *)(lVar13 + 0xc00c0) = uVar15;
      puVar2 = (undefined8 *)(lVar13 + 0x40090 + uVar15);
      *puVar2 = &PTR_execute_00143b60;
      puVar2[1] = local_a0;
      puVar2[2] = lStack_98;
      puVar2[5] = local_80;
      puVar2[3] = local_90;
      puVar2[4] = plStack_88;
      lVar14 = *(long *)(lVar13 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar13 + 0x40 + lVar14);
      lVar17 = *(long *)(lVar13 + 0xc0100);
      *(undefined4 *)(lVar13 + 0x44 + lVar14) = 1;
      *(undefined1 *)(lVar13 + 0x48 + lVar14) = 1;
      lVar14 = lVar14 + lVar13;
      *(undefined8 **)(lVar14 + 0x50) = puVar2;
      *(long *)(lVar14 + 0x58) = lVar17;
      *(TaskGroupContext **)(lVar14 + 0x60) = pTVar25;
      *(long *)(lVar14 + 0x68) = lVar23;
      *(ulong *)(lVar14 + 0x70) = uVar26 - lVar16;
      if (lVar17 != 0) {
        LOCK();
        *(int *)(lVar17 + 4) = *(int *)(lVar17 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar13 + 0x40080) = *(long *)(lVar13 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar13 + 0x40080) - 1U <= *(ulong *)(lVar13 + 0x40040)) {
        LOCK();
        *(long *)(lVar13 + 0x40040) = *(long *)(lVar13 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_c0 = *(undefined8 *)(this + 0x18);
    local_d0 = *(long *)(this + 8);
    pTVar25 = *(TaskGroupContext **)(this + 0x28);
    uStack_b8 = *(undefined8 *)(this + 0x20);
    uVar15 = local_d0 - uVar26;
    uStack_c8 = uVar26;
    local_b0 = pTVar25;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar19,(_lambda___1_ *)&local_d0,pTVar25,uVar15,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) {
LAB_0012a819:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar13 = *(long *)(lVar16 + 0xc00c0);
      uVar26 = lVar13 + 0x30 + (ulong)(-(int)lVar13 & 0x3f);
      if (0x80000 < uVar26) goto LAB_0012a819;
      *(ulong *)(lVar16 + 0xc00c0) = uVar26;
      puVar2 = (undefined8 *)(lVar16 + 0x40090 + uVar26);
      *puVar2 = &PTR_execute_00143b60;
      puVar2[1] = local_d0;
      puVar2[2] = uStack_c8;
      puVar2[5] = local_b0;
      puVar2[3] = local_c0;
      puVar2[4] = uStack_b8;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar23 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar2;
      *(long *)(lVar17 + 0x58) = lVar23;
      *(TaskGroupContext **)(lVar17 + 0x60) = pTVar25;
      *(long *)(lVar17 + 0x68) = lVar13;
      *(ulong *)(lVar17 + 0x70) = uVar15;
      if (lVar23 != 0) {
        LOCK();
        *(int *)(lVar23 + 4) = *(int *)(lVar23 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar9 = (long *)*plVar8;
    auVar38._0_8_ = CONCAT44(_LC6,_LC6);
    auVar38._8_4_ = _LC6;
    auVar38._12_4_ = _LC6;
    lVar13 = *plVar9;
    plVar10 = (long *)plVar9[2];
    auVar39._0_8_ = CONCAT44(_LC8,_LC8);
    auVar39._8_4_ = _LC8;
    auVar39._12_4_ = _LC8;
    lVar17 = 0;
    pTVar25 = (TaskGroupContext *)(lVar16 * plVar9[1]);
    auVar34._8_4_ = _LC6;
    auVar34._0_8_ = auVar38._0_8_;
    auVar34._12_4_ = _LC6;
    auVar40._8_4_ = _LC6;
    auVar40._0_8_ = auVar38._0_8_;
    auVar40._12_4_ = _LC6;
    auVar36._8_4_ = _LC8;
    auVar36._0_8_ = auVar39._0_8_;
    auVar36._12_4_ = _LC8;
    uVar26 = (ulong)pTVar25 / (ulong)plVar9[6];
    lVar23 = 1;
    pauVar20 = (undefined1 (*) [16])
               (lVar13 + -0x40 + ((ulong)(pTVar25 + plVar9[1]) / (ulong)plVar9[6]) * 0x40);
    pauVar18 = (undefined1 (*) [16])(uVar26 * 0x40 + lVar13);
    uVar27 = _LC8;
    uVar29 = _LC8;
    uVar30 = _LC8;
    uVar31 = _LC8;
    local_f0 = auVar38;
    local_e0 = auVar39;
    while( true ) {
      if (pauVar20 < pauVar18) break;
      auVar5 = pauVar18[1];
      auVar6 = *pauVar18;
      lVar14 = *plVar10;
      auVar32._0_4_ = auVar5._0_4_ + auVar6._0_4_;
      auVar32._4_4_ = auVar5._4_4_ + auVar6._4_4_;
      auVar32._8_4_ = auVar5._8_4_ + auVar6._8_4_;
      auVar32._12_4_ = auVar5._12_4_ + auVar6._12_4_;
      piVar1 = (int *)plVar10[1];
      puVar11 = (uint *)plVar10[2];
      auVar28._0_4_ =
           -(uint)((int)((auVar32._0_4_ - *(float *)(lVar14 + 0x20)) * *(float *)(lVar14 + 0x30) +
                        _LC15) < *piVar1) & *puVar11;
      auVar28._4_4_ =
           -(uint)((int)((auVar32._4_4_ - *(float *)(lVar14 + 0x24)) * *(float *)(lVar14 + 0x34) +
                        _UNK_001440f4) < piVar1[1]) & puVar11[1];
      auVar28._8_4_ =
           -(uint)((int)((auVar32._8_4_ - *(float *)(lVar14 + 0x28)) * *(float *)(lVar14 + 0x38) +
                        _UNK_001440f8) < piVar1[2]) & puVar11[2];
      auVar28._12_4_ =
           -(uint)((int)((auVar32._12_4_ - *(float *)(lVar14 + 0x2c)) * *(float *)(lVar14 + 0x3c) +
                        _UNK_001440fc) < piVar1[3]) & puVar11[3];
      iVar22 = movmskps((int)puVar11,auVar28);
      if (iVar22 == 0) {
        auVar37._4_4_ = uVar29;
        auVar37._0_4_ = uVar27;
        auVar37._8_4_ = uVar30;
        auVar37._12_4_ = uVar31;
        pauVar21 = pauVar20;
        while( true ) {
          auVar28 = pauVar21[1];
          auVar7 = *pauVar21;
          lVar17 = lVar17 + 1;
          pauVar20 = pauVar21 + -4;
          auVar35._0_4_ = auVar28._0_4_ + auVar7._0_4_;
          auVar35._4_4_ = auVar28._4_4_ + auVar7._4_4_;
          auVar35._8_4_ = auVar28._8_4_ + auVar7._8_4_;
          auVar35._12_4_ = auVar28._12_4_ + auVar7._12_4_;
          auVar33._0_4_ =
               -(uint)((int)((auVar35._0_4_ - *(float *)(lVar14 + 0x20)) * *(float *)(lVar14 + 0x30)
                            + _LC15) < *piVar1) & *puVar11;
          auVar33._4_4_ =
               -(uint)((int)((auVar35._4_4_ - *(float *)(lVar14 + 0x24)) * *(float *)(lVar14 + 0x34)
                            + _UNK_001440f4) < piVar1[1]) & puVar11[1];
          auVar33._8_4_ =
               -(uint)((int)((auVar35._8_4_ - *(float *)(lVar14 + 0x28)) * *(float *)(lVar14 + 0x38)
                            + _UNK_001440f8) < piVar1[2]) & puVar11[2];
          auVar33._12_4_ =
               -(uint)((int)((auVar35._12_4_ - *(float *)(lVar14 + 0x2c)) *
                             *(float *)(lVar14 + 0x3c) + _UNK_001440fc) < piVar1[3]) & puVar11[3];
          uVar24 = movmskps((int)pTVar25,auVar33);
          pTVar25 = (TaskGroupContext *)(ulong)uVar24;
          if (uVar24 != 0) break;
          auVar37 = minps(auVar37,auVar7);
          local_f0 = maxps(local_f0,auVar28);
          auVar39 = minps(auVar39,auVar35);
          auVar38 = maxps(auVar38,auVar35);
          pauVar21 = pauVar20;
          if (pauVar20 < pauVar18) {
            uVar27 = auVar37._0_4_;
            uVar29 = auVar37._4_4_;
            uVar30 = auVar37._8_4_;
            uVar31 = auVar37._12_4_;
            goto LAB_0012a5ac;
          }
        }
        pTVar25 = *(TaskGroupContext **)pauVar18[2];
        *pauVar18 = auVar7;
        auVar34 = maxps(auVar34,auVar35);
        local_e0 = minps(local_e0,auVar35);
        auVar40 = maxps(auVar40,auVar28);
        auVar28 = minps(auVar37,auVar6);
        auVar39 = minps(auVar39,auVar32);
        auVar38 = maxps(auVar38,auVar32);
        local_f0 = maxps(local_f0,auVar5);
        uVar12 = *(undefined8 *)(pauVar21[1] + 8);
        auVar36 = minps(auVar36,auVar7);
        uVar27 = auVar28._0_4_;
        uVar29 = auVar28._4_4_;
        uVar30 = auVar28._8_4_;
        uVar31 = auVar28._12_4_;
        uVar4 = *(undefined4 *)(pauVar18[2] + 8);
        *(undefined8 *)pauVar18[1] = *(undefined8 *)pauVar21[1];
        *(undefined8 *)(pauVar18[1] + 8) = uVar12;
        *(undefined8 *)pauVar18[2] = *(undefined8 *)pauVar21[2];
        *(undefined4 *)(pauVar18[2] + 8) = *(undefined4 *)(pauVar21[2] + 8);
        *pauVar21 = auVar6;
        pauVar21[1] = auVar5;
        *(undefined4 *)(pauVar21[2] + 8) = uVar4;
        *(TaskGroupContext **)pauVar21[2] = pTVar25;
        local_80 = pTVar25;
      }
      else {
        auVar36 = minps(auVar36,auVar6);
        auVar40 = maxps(auVar40,auVar5);
        auVar34 = maxps(auVar34,auVar32);
        local_e0 = minps(local_e0,auVar32);
      }
      pauVar18 = pauVar18 + 4;
      lVar23 = lVar23 + 1;
    }
LAB_0012a5ac:
    *(ulong *)(*plVar8 + 0x40 + lVar16 * 8) = uVar26;
    *(ulong *)(*plVar8 + 0x280 + lVar16 * 8) = ((long)pauVar18 - lVar13 >> 6) - uVar26;
    lVar16 = lVar16 * 0x50;
    pauVar20 = (undefined1 (*) [16])(*plVar8 + 0xcc0 + lVar16);
    lVar13 = *plVar8 + lVar16;
    pauVar20[3] = auVar34;
    *pauVar20 = auVar36;
    pauVar20[1] = auVar40;
    *(undefined8 *)pauVar20[2] = local_e0._0_8_;
    *(undefined8 *)(pauVar20[2] + 8) = local_e0._8_8_;
    *(undefined8 *)(lVar13 + 0xd00) = 0;
    *(long *)(lVar13 + 0xd08) = lVar23 + -1;
    puVar3 = (undefined4 *)(*plVar8 + 0x20c0 + lVar16);
    lVar16 = lVar16 + *plVar8;
    *puVar3 = uVar27;
    puVar3[1] = uVar29;
    puVar3[2] = uVar30;
    puVar3[3] = uVar31;
    *(undefined8 *)(puVar3 + 4) = local_f0._0_8_;
    *(undefined8 *)(puVar3 + 6) = local_f0._8_8_;
    *(undefined1 (*) [16])(puVar3 + 8) = auVar39;
    *(undefined1 (*) [16])(puVar3 + 0xc) = auVar38;
    *(undefined8 *)(lVar16 + 0x2100) = 0;
    *(long *)(lVar16 + 0x2108) = lVar17;
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Removing unreachable block (ram,0x0012abf5) */
/* void embree::TaskScheduler::spawn_root<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>(embree::TaskScheduler::spawn<unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1} const&,
   embree::TaskScheduler::TaskGroupContext*, unsigned long, bool) */

void __thiscall
embree::TaskScheduler::
spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          (TaskScheduler *this,_lambda___1_ *param_1,TaskGroupContext *param_2,ulong param_3,
          bool param_4)

{
  TaskScheduler *pTVar1;
  long *plVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  long lVar6;
  long *plVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  char cVar12;
  long lVar13;
  Thread *pTVar14;
  Thread *pTVar15;
  Thread *pTVar16;
  long lVar17;
  Thread *pTVar18;
  long in_FS_OFFSET;
  Thread *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4) {
    embree::TaskScheduler::startThreads();
  }
  lVar13 = embree::TaskScheduler::allocThreadIndex();
  pTVar14 = (Thread *)embree::alignedMalloc(0xc0140,0x40);
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
  }
  *(long *)pTVar14 = lVar13;
  pTVar18 = pTVar14 + 0x40;
  pTVar16 = pTVar18;
  do {
    *(undefined4 *)pTVar16 = 0;
    pTVar15 = pTVar16 + 0x80;
    *(undefined4 *)(pTVar16 + 0x40) = 0;
    pTVar16 = pTVar15;
  } while (pTVar14 + 0x40040 != pTVar15);
  *(undefined8 *)(pTVar14 + 0x40040) = 0;
  *(undefined8 *)(pTVar14 + 0x40080) = 0;
  *(undefined8 *)(pTVar14 + 0xc00c0) = 0;
  *(undefined8 *)(pTVar14 + 0xc0100) = 0;
  *(TaskScheduler **)(pTVar14 + 0xc0108) = this;
  if (this != (TaskScheduler *)0x0) {
    if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
      LOCK();
      *(long *)(this + 8) = *(long *)(this + 8) + 1;
      UNLOCK();
    }
    else {
      (**(code **)(*(long *)this + 0x10))(this);
    }
    if (*(code **)(*(long *)this + 0x18) == RefCount::refDec) {
      LOCK();
      pTVar1 = this + 8;
      *(long *)pTVar1 = *(long *)pTVar1 + -1;
      UNLOCK();
      if (*(long *)pTVar1 == 0) {
        (**(code **)(*(long *)this + 8))(this);
      }
    }
    else {
      (**(code **)(*(long *)this + 0x18))(this);
    }
  }
  LOCK();
  *(Thread **)(*(long *)(this + 0x10) + lVar13 * 8) = pTVar14;
  UNLOCK();
  local_48 = pTVar14;
  pTVar16 = (Thread *)embree::TaskScheduler::swapThread(pTVar14);
  if (*(ulong *)(pTVar14 + 0x40080) < 0x1000) {
    lVar4 = *(long *)(pTVar14 + 0xc00c0);
    uVar3 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
    if (uVar3 < 0x80001) {
      *(ulong *)(pTVar14 + 0xc00c0) = uVar3;
      pTVar15 = pTVar14 + uVar3 + 0x40090;
      uVar8 = *(undefined8 *)param_1;
      uVar9 = *(undefined8 *)(param_1 + 8);
      *(undefined ***)pTVar15 = &PTR_execute_00143b78;
      uVar5 = *(undefined8 *)(param_1 + 0x20);
      uVar10 = *(undefined8 *)(param_1 + 0x10);
      uVar11 = *(undefined8 *)(param_1 + 0x18);
      *(undefined8 *)(pTVar15 + 8) = uVar8;
      *(undefined8 *)(pTVar15 + 0x10) = uVar9;
      *(undefined8 *)(pTVar15 + 0x28) = uVar5;
      *(undefined8 *)(pTVar15 + 0x18) = uVar10;
      *(undefined8 *)(pTVar15 + 0x20) = uVar11;
      lVar17 = *(long *)(pTVar14 + 0x40080) * 0x40;
      lVar6 = *(long *)(pTVar14 + 0xc0100);
      pTVar14[lVar17 + 0x48] = (Thread)0x1;
      *(undefined4 *)(pTVar14 + lVar17 + 0x44) = 1;
      *(Thread **)(pTVar14 + lVar17 + 0x50) = pTVar15;
      *(long *)(pTVar14 + lVar17 + 0x58) = lVar6;
      *(TaskGroupContext **)(pTVar14 + lVar17 + 0x60) = param_2;
      *(long *)(pTVar14 + lVar17 + 0x68) = lVar4;
      *(ulong *)(pTVar14 + lVar17 + 0x70) = param_3;
      if (lVar6 != 0) {
        LOCK();
        *(int *)(lVar6 + 4) = *(int *)(lVar6 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)(pTVar18 + lVar17) == 0) {
        *(undefined4 *)(pTVar18 + lVar17) = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(pTVar14 + 0x40080) = *(long *)(pTVar14 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(pTVar14 + 0x40080) - 1U <= *(ulong *)(pTVar14 + 0x40040)) {
        LOCK();
        *(long *)(pTVar14 + 0x40040) = *(long *)(pTVar14 + 0x40080) + -1;
        UNLOCK();
      }
      embree::MutexSys::lock();
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + 1;
      UNLOCK();
      LOCK();
      this[0x38] = (TaskScheduler)0x1;
      UNLOCK();
      embree::ConditionSys::notify_all();
      embree::MutexSys::unlock();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::addScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar15 = local_48 + 8;
            *(long *)pTVar15 = *(long *)pTVar15 + -1;
            UNLOCK();
            if (*(long *)pTVar15 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      do {
        cVar12 = embree::TaskScheduler::TaskQueue::execute_local(pTVar18,(Task *)pTVar14);
      } while (cVar12 != '\0');
      LOCK();
      *(long *)(this + 0x30) = *(long *)(this + 0x30) + -1;
      UNLOCK();
      if (param_4) {
        local_48 = (Thread *)this;
        if (this != (TaskScheduler *)0x0) {
          if (*(code **)(*(long *)this + 0x10) == RefCount::refInc) {
            LOCK();
            *(long *)(this + 8) = *(long *)(this + 8) + 1;
            UNLOCK();
          }
          else {
            (**(code **)(*(long *)this + 0x10))(this);
          }
        }
        embree::TaskScheduler::removeScheduler((Ref *)&local_48);
        if (local_48 != (Thread *)0x0) {
          if (*(code **)(*(long *)local_48 + 0x18) == RefCount::refDec) {
            LOCK();
            pTVar1 = (TaskScheduler *)(local_48 + 8);
            *(long *)pTVar1 = *(long *)pTVar1 + -1;
            UNLOCK();
            if (*(long *)pTVar1 == 0) {
              (**(code **)(*(long *)local_48 + 8))();
            }
          }
          else {
            (**(code **)(*(long *)local_48 + 0x18))();
          }
        }
      }
      local_48 = (Thread *)0x0;
      LOCK();
      *(undefined8 *)(lVar13 * 8 + *(long *)(this + 0x10)) = 0;
      UNLOCK();
      embree::TaskScheduler::swapThread(pTVar16);
      pTVar18 = *(Thread **)param_2;
      if (pTVar18 != (Thread *)0x0) {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        pTVar18 = local_48;
      }
      LOCK();
      *(long *)(this + 0x28) = *(long *)(this + 0x28) + -1;
      UNLOCK();
      while (*(long *)(this + 0x28) != 0) {
        embree::yield();
      }
      local_48 = *(Thread **)param_2;
      *(undefined8 *)param_2 = 0;
      if (local_48 != (Thread *)0x0) {
        std::__exception_ptr::exception_ptr::_M_release();
      }
      if (pTVar18 == (Thread *)0x0) {
        if (pTVar14 == (Thread *)0x0) {
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            return;
          }
        }
        else {
          plVar7 = *(long **)(pTVar14 + 0xc0108);
          if (plVar7 != (long *)0x0) {
            if (*(code **)(*plVar7 + 0x18) == RefCount::refDec) {
              LOCK();
              plVar2 = plVar7 + 1;
              *plVar2 = *plVar2 + -1;
              UNLOCK();
              if (*plVar2 == 0) {
                (**(code **)(*plVar7 + 8))();
              }
            }
            else {
              (**(code **)(*plVar7 + 0x18))();
            }
          }
          if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
            embree::alignedFree(pTVar14);
            return;
          }
        }
      }
      else {
        local_48 = pTVar18;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_48);
      }
                    /* WARNING: Subroutine does not return */
      __stack_chk_fail();
    }
  }
                    /* WARNING: Subroutine does not return */
  abort();
}



/* unsigned long embree::parallel_partitioning<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >, embree::EmptyTy,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3}>(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef*, unsigned long, unsigned long,
   embree::EmptyTy const&, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2} const&, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> > const&)#3} const&, unsigned long) */

ulong embree::
      parallel_partitioning<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(___:PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                (BuildRef *param_1,ulong param_2,ulong param_3,EmptyTy *param_4,
                PrimInfoT_conflict *param_5,PrimInfoT_conflict *param_6,
                _lambda_embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>_>__BuildRef_const___1_
                *param_7,_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>_>__BuildRef_const___2_
                         *param_8,
                _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                *param_9,ulong param_10)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  undefined4 uVar4;
  long lVar5;
  uint *puVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  bool bVar12;
  float fVar13;
  PrimInfoT_conflict **ppPVar14;
  PrimInfoT_conflict *pPVar15;
  long lVar16;
  long lVar17;
  undefined1 (*pauVar18) [16];
  PrimInfoT_conflict **ppPVar19;
  long lVar20;
  PrimInfoT_conflict *pPVar21;
  TaskScheduler *pTVar22;
  int iVar23;
  PrimInfoT_conflict **ppPVar24;
  uint uVar25;
  long in_R11;
  PrimInfoT_conflict *pPVar26;
  long in_FS_OFFSET;
  undefined1 auVar27 [16];
  undefined1 auVar28 [16];
  undefined1 auVar29 [16];
  int iVar30;
  int iVar33;
  int iVar34;
  int iVar35;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar36 [16];
  uint uVar37;
  uint uVar38;
  uint uVar39;
  float fVar40;
  float fVar41;
  float fVar42;
  float fVar43;
  float fVar44;
  float fVar45;
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  PrimInfoT_conflict *local_128;
  long local_120;
  long local_118;
  PrimInfoT_conflict *local_110;
  PrimInfoT_conflict *local_108;
  PrimInfoT_conflict *local_100;
  PrimInfoT_conflict **local_f8;
  PrimInfoT_conflict **local_f0;
  PrimInfoT_conflict **local_e8;
  long *local_e0;
  long *local_d8;
  PrimInfoT_conflict *local_d0;
  PrimInfoT_conflict *pPStack_c8;
  undefined8 local_c0;
  PrimInfoT_conflict ***pppPStack_b8;
  TaskGroupContext *local_b0;
  PrimInfoT_conflict *local_a0;
  PrimInfoT_conflict *pPStack_98;
  undefined8 local_90;
  PrimInfoT_conflict ***pppPStack_88;
  TaskGroupContext *local_80;
  long local_48;
  
  fVar13 = _LC15;
  pPVar26 = (PrimInfoT_conflict *)(param_3 - param_2);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_128 = (PrimInfoT_conflict *)(param_1 + param_2 * 0x40);
  if (pPVar26 < param_10) {
    pPVar26 = (PrimInfoT_conflict *)(param_1 + param_3 * 0x40 + -0x40);
    for (; local_128 <= pPVar26; local_128 = local_128 + 0x40) {
      auVar27 = *(undefined1 (*) [16])(local_128 + 0x10);
      auVar28 = *(undefined1 (*) [16])local_128;
      lVar16 = *(long *)param_7;
      fVar48 = auVar27._0_4_ + auVar28._0_4_;
      fVar49 = auVar27._4_4_ + auVar28._4_4_;
      fVar50 = auVar27._8_4_ + auVar28._8_4_;
      fVar51 = auVar27._12_4_ + auVar28._12_4_;
      fVar44 = *(float *)(lVar16 + 0x20);
      fVar45 = *(float *)(lVar16 + 0x24);
      fVar46 = *(float *)(lVar16 + 0x28);
      fVar47 = *(float *)(lVar16 + 0x2c);
      fVar40 = *(float *)(lVar16 + 0x30);
      fVar41 = *(float *)(lVar16 + 0x34);
      fVar42 = *(float *)(lVar16 + 0x38);
      fVar43 = *(float *)(lVar16 + 0x3c);
      piVar1 = *(int **)(param_7 + 8);
      iVar30 = *piVar1;
      iVar33 = piVar1[1];
      iVar34 = piVar1[2];
      iVar35 = piVar1[3];
      puVar6 = *(uint **)(param_7 + 0x10);
      uVar25 = *puVar6;
      uVar37 = puVar6[1];
      uVar38 = puVar6[2];
      uVar39 = puVar6[3];
      auVar32._0_4_ = -(uint)((int)((fVar48 - fVar44) * fVar40 + fVar13) < iVar30) & uVar25;
      auVar32._4_4_ = -(uint)((int)((fVar49 - fVar45) * fVar41 + fVar13) < iVar33) & uVar37;
      auVar32._8_4_ = -(uint)((int)((fVar50 - fVar46) * fVar42 + fVar13) < iVar34) & uVar38;
      auVar32._12_4_ = -(uint)((int)((fVar51 - fVar47) * fVar43 + fVar13) < iVar35) & uVar39;
      iVar23 = movmskps((int)puVar6,auVar32);
      pPVar15 = pPVar26;
      if (iVar23 == 0) {
        while( true ) {
          auVar27 = *(undefined1 (*) [16])(pPVar15 + 0x10);
          auVar28 = *(undefined1 (*) [16])pPVar15;
          pPVar26 = pPVar15 + -0x40;
          auVar36._0_4_ = auVar27._0_4_ + auVar28._0_4_;
          auVar36._4_4_ = auVar27._4_4_ + auVar28._4_4_;
          auVar36._8_4_ = auVar27._8_4_ + auVar28._8_4_;
          auVar36._12_4_ = auVar27._12_4_ + auVar28._12_4_;
          auVar31._0_4_ =
               -(uint)((int)((auVar36._0_4_ - fVar44) * fVar40 + fVar13) < iVar30) & uVar25;
          auVar31._4_4_ =
               -(uint)((int)((auVar36._4_4_ - fVar45) * fVar41 + fVar13) < iVar33) & uVar37;
          auVar31._8_4_ =
               -(uint)((int)((auVar36._8_4_ - fVar46) * fVar42 + fVar13) < iVar34) & uVar38;
          auVar31._12_4_ =
               -(uint)((int)((auVar36._12_4_ - fVar47) * fVar43 + fVar13) < iVar35) & uVar39;
          uVar25 = movmskps((int)param_9,auVar31);
          param_9 = (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                     *)(ulong)uVar25;
          if (uVar25 != 0) break;
          *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + 1;
          auVar28 = minps(*(undefined1 (*) [16])param_6,auVar28);
          *(undefined1 (*) [16])param_6 = auVar28;
          auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar27);
          *(undefined1 (*) [16])(param_6 + 0x10) = auVar27;
          auVar27 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar36);
          *(undefined1 (*) [16])(param_6 + 0x20) = auVar27;
          auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar36);
          *(undefined1 (*) [16])(param_6 + 0x30) = auVar27;
          if (pPVar26 < local_128) goto LAB_0012b4eb;
          lVar16 = *(long *)param_7;
          fVar44 = *(float *)(lVar16 + 0x20);
          fVar45 = *(float *)(lVar16 + 0x24);
          fVar46 = *(float *)(lVar16 + 0x28);
          fVar47 = *(float *)(lVar16 + 0x2c);
          fVar40 = *(float *)(lVar16 + 0x30);
          fVar41 = *(float *)(lVar16 + 0x34);
          fVar42 = *(float *)(lVar16 + 0x38);
          fVar43 = *(float *)(lVar16 + 0x3c);
          piVar1 = *(int **)(param_7 + 8);
          iVar30 = *piVar1;
          iVar33 = piVar1[1];
          iVar34 = piVar1[2];
          iVar35 = piVar1[3];
          puVar6 = *(uint **)(param_7 + 0x10);
          uVar25 = *puVar6;
          uVar37 = puVar6[1];
          uVar38 = puVar6[2];
          uVar39 = puVar6[3];
          pPVar15 = pPVar26;
        }
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + 1;
        auVar28 = minps(*(undefined1 (*) [16])param_5,auVar28);
        *(undefined1 (*) [16])param_5 = auVar28;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar27);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar27;
        auVar27 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar36);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar36);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar27;
        auVar27 = *(undefined1 (*) [16])local_128;
        auVar28 = *(undefined1 (*) [16])(local_128 + 0x10);
        *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + 1;
        auVar32 = minps(*(undefined1 (*) [16])param_6,auVar27);
        *(undefined1 (*) [16])param_6 = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),auVar28);
        auVar29._0_4_ = auVar28._0_4_ + auVar27._0_4_;
        auVar29._4_4_ = auVar28._4_4_ + auVar27._4_4_;
        auVar29._8_4_ = auVar28._8_4_ + auVar27._8_4_;
        auVar29._12_4_ = auVar28._12_4_ + auVar27._12_4_;
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar32;
        auVar27 = minps(*(undefined1 (*) [16])(param_6 + 0x20),auVar29);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),auVar29);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar27;
        uVar7 = *(undefined8 *)(pPVar15 + 8);
        uVar8 = *(undefined8 *)local_128;
        uVar9 = *(undefined8 *)(local_128 + 8);
        uVar10 = *(undefined8 *)(local_128 + 0x10);
        uVar11 = *(undefined8 *)(local_128 + 0x18);
        param_9 = *(_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
                    **)(local_128 + 0x20);
        *(undefined8 *)local_128 = *(undefined8 *)pPVar15;
        *(undefined8 *)(local_128 + 8) = uVar7;
        uVar7 = *(undefined8 *)(pPVar15 + 0x18);
        uVar4 = *(undefined4 *)(local_128 + 0x28);
        *(undefined8 *)(local_128 + 0x10) = *(undefined8 *)(pPVar15 + 0x10);
        *(undefined8 *)(local_128 + 0x18) = uVar7;
        *(undefined8 *)(local_128 + 0x20) = *(undefined8 *)(pPVar15 + 0x20);
        *(undefined4 *)(local_128 + 0x28) = *(undefined4 *)(pPVar15 + 0x28);
        *(_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
          **)(pPVar15 + 0x20) = param_9;
        *(undefined8 *)pPVar15 = uVar8;
        *(undefined8 *)(pPVar15 + 8) = uVar9;
        *(undefined8 *)(pPVar15 + 0x10) = uVar10;
        *(undefined8 *)(pPVar15 + 0x18) = uVar11;
        *(undefined4 *)(pPVar15 + 0x28) = uVar4;
        local_80 = (TaskGroupContext *)param_9;
      }
      else {
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + 1;
        auVar28 = minps(*(undefined1 (*) [16])param_5,auVar28);
        *(undefined1 (*) [16])param_5 = auVar28;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),auVar27);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar27;
        auVar27._4_4_ = fVar49;
        auVar27._0_4_ = fVar48;
        auVar27._8_4_ = fVar50;
        auVar27._12_4_ = fVar51;
        auVar27 = minps(*(undefined1 (*) [16])(param_5 + 0x20),auVar27);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar27;
        auVar28._4_4_ = fVar49;
        auVar28._0_4_ = fVar48;
        auVar28._8_4_ = fVar50;
        auVar28._12_4_ = fVar51;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),auVar28);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar27;
      }
    }
LAB_0012b4eb:
    pPVar26 = (PrimInfoT_conflict *)((long)local_128 - (long)param_1 >> 6);
    goto LAB_0012ae85;
  }
  ppPVar14 = (PrimInfoT_conflict **)embree::alignedMalloc(0x34c0,0x40);
  ppPVar14[5] = (PrimInfoT_conflict *)param_4;
  *ppPVar14 = local_128;
  ppPVar14[2] = (PrimInfoT_conflict *)param_7;
  ppPVar14[1] = pPVar26;
  ppPVar14[3] = (PrimInfoT_conflict *)param_8;
  ppPVar14[4] = (PrimInfoT_conflict *)param_9;
  pPVar15 = (PrimInfoT_conflict *)embree::TaskScheduler::threadCount();
  pPVar26 = (PrimInfoT_conflict *)((ulong)(pPVar26 + (param_10 - 1)) / param_10);
  if ((PrimInfoT_conflict *)0x40 < pPVar26) {
    pPVar26 = (PrimInfoT_conflict *)0x40;
  }
  if (pPVar26 <= pPVar15) {
    pPVar15 = pPVar26;
  }
  ppPVar14[6] = pPVar15;
  local_f8 = ppPVar14;
  if (pPVar15 == (PrimInfoT_conflict *)0x0) {
    ppPVar14[0x50] = (PrimInfoT_conflict *)0x0;
    ppPVar14[8] = ppPVar14[1];
  }
  else {
    pppPStack_b8 = &local_f8;
    pPStack_c8 = (PrimInfoT_conflict *)0x0;
    local_c0 = 1;
    local_100 = (PrimInfoT_conflict *)0x0;
    local_d0 = pPVar15;
    local_b0 = (TaskGroupContext *)&local_100;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar22 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar22,(_lambda___1_ *)&local_d0,(TaskGroupContext *)&local_100,(ulong)pPVar15,
                 true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) {
LAB_0012b6f8:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar20 = *(long *)(lVar16 + 0xc00c0);
      uVar2 = lVar20 + 0x30 + (ulong)(-(int)lVar20 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0012b6f8;
      *(ulong *)(lVar16 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar16 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_00143b60;
      puVar3[1] = local_d0;
      puVar3[2] = pPStack_c8;
      puVar3[5] = local_b0;
      puVar3[3] = local_c0;
      puVar3[4] = pppPStack_b8;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar5 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar3;
      *(long *)(lVar17 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar17 + 0x60) = (TaskGroupContext *)&local_100;
      *(long *)(lVar17 + 0x68) = lVar20;
      *(PrimInfoT_conflict **)(lVar17 + 0x70) = pPVar15;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    pPVar21 = local_100;
    if (local_100 != (PrimInfoT_conflict *)0x0) goto LAB_0012b3db;
    pPVar26 = ppPVar14[6];
    pPVar15 = ppPVar14[1];
    ppPVar14[(long)(pPVar26 + 0x50)] = (PrimInfoT_conflict *)0x0;
    ppPVar14[(long)(pPVar26 + 8)] = pPVar15;
    if (pPVar26 != (PrimInfoT_conflict *)0x0) {
      pPVar26 = (PrimInfoT_conflict *)0x0;
      pauVar18 = (undefined1 (*) [16])(ppPVar14 + 0x198);
      do {
        auVar27 = minps(*(undefined1 (*) [16])param_5,*pauVar18);
        pPVar26 = pPVar26 + 1;
        *(undefined1 (*) [16])param_5 = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x10),pauVar18[1]);
        *(undefined1 (*) [16])(param_5 + 0x10) = auVar27;
        auVar27 = minps(*(undefined1 (*) [16])(param_5 + 0x20),pauVar18[2]);
        *(undefined1 (*) [16])(param_5 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_5 + 0x30),pauVar18[3]);
        *(undefined1 (*) [16])(param_5 + 0x30) = auVar27;
        *(long *)(param_5 + 0x40) = *(long *)(param_5 + 0x40) + *(long *)pauVar18[4];
        *(long *)(param_5 + 0x48) = *(long *)(param_5 + 0x48) + *(long *)(pauVar18[4] + 8);
        auVar27 = minps(*(undefined1 (*) [16])param_6,pauVar18[0x140]);
        *(undefined1 (*) [16])param_6 = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x10),pauVar18[0x141]);
        *(undefined1 (*) [16])(param_6 + 0x10) = auVar27;
        auVar27 = minps(*(undefined1 (*) [16])(param_6 + 0x20),pauVar18[0x142]);
        *(undefined1 (*) [16])(param_6 + 0x20) = auVar27;
        auVar27 = maxps(*(undefined1 (*) [16])(param_6 + 0x30),pauVar18[0x143]);
        *(undefined1 (*) [16])(param_6 + 0x30) = auVar27;
        *(long *)(param_6 + 0x40) = *(long *)(param_6 + 0x40) + *(long *)pauVar18[0x144];
        *(long *)(param_6 + 0x48) = *(long *)(param_6 + 0x48) + *(long *)(pauVar18[0x144] + 8);
        pPVar15 = ppPVar14[6];
        pauVar18 = pauVar18 + 5;
      } while (pPVar26 < pPVar15);
      pPVar26 = ppPVar14[0x50];
      param_5 = pPVar26;
      if ((PrimInfoT_conflict *)0x1 < pPVar15) {
        ppPVar19 = ppPVar14 + 0x51;
        do {
          param_5 = param_5 + (long)*ppPVar19;
          ppPVar19 = ppPVar19 + 1;
        } while (ppPVar14 + (long)(pPVar15 + 0x50) != ppPVar19);
        pPVar21 = ppPVar14[1];
LAB_0012b14e:
        local_110 = (PrimInfoT_conflict *)0x0;
        local_118 = 0;
        local_120 = 0;
        ppPVar19 = ppPVar14 + 8;
        bVar12 = false;
        local_128 = (PrimInfoT_conflict *)0x0;
        param_6 = (PrimInfoT_conflict *)0x0;
        lVar16 = 0;
        ppPVar24 = ppPVar19;
        lVar20 = 0;
        do {
          local_a0 = *ppPVar24;
          pPStack_98 = pPVar26 + (long)local_a0;
          pPStack_c8 = ppPVar24[1];
          if ((long)param_5 <= (long)ppPVar24[1]) {
            pPStack_c8 = param_5;
          }
          local_d0 = (PrimInfoT_conflict *)0x0;
          if (-1 < (long)pPStack_98) {
            local_d0 = pPStack_98;
          }
          if ((long)pPVar21 < (long)pPStack_98) {
            pPStack_98 = pPVar21;
          }
          if ((long)local_a0 < (long)param_5) {
            local_a0 = param_5;
          }
          in_R11 = lVar20;
          if ((long)local_d0 < (long)pPStack_c8) {
            local_128 = (PrimInfoT_conflict *)0x1;
            param_6 = param_6 + ((long)pPStack_c8 - (long)local_d0);
            in_R11 = lVar20 + 1;
            ppPVar14[lVar20 * 2 + 0x98] = local_d0;
            (ppPVar14 + lVar20 * 2 + 0x98)[1] = pPStack_c8;
          }
          if ((long)local_a0 < (long)pPStack_98) {
            lVar20 = lVar16 + 1;
            ppPVar14[lVar16 * 2 + 0x118] = local_a0;
            (ppPVar14 + lVar16 * 2 + 0x118)[1] = pPStack_98;
            lVar16 = lVar20;
            if (ppPVar24 + 1 == ppPVar19 + (long)pPVar15) goto LAB_0012b403;
            bVar12 = true;
          }
          else {
            lVar20 = lVar16;
            if (ppPVar19 + (long)pPVar15 == ppPVar24 + 1) goto code_r0x0012b230;
          }
          pPVar26 = ppPVar24[0x49];
          lVar16 = lVar20;
          ppPVar24 = ppPVar24 + 1;
          lVar20 = in_R11;
        } while( true );
      }
      pPVar21 = ppPVar14[1];
      local_120 = 0;
      local_118 = 0;
      local_110 = (PrimInfoT_conflict *)0x0;
      if (pPVar15 != (PrimInfoT_conflict *)0x0) goto LAB_0012b14e;
      goto LAB_0012ae70;
    }
  }
  pPVar26 = ppPVar14[0x50];
  goto LAB_0012ae70;
code_r0x0012b230:
  if (bVar12) goto LAB_0012b403;
  while ((pPVar26 = param_5, (char)local_128 != '\0' &&
         (local_120 = in_R11, local_110 = param_6, param_6 != (PrimInfoT_conflict *)0x0))) {
    local_f0 = &local_110;
    local_e0 = &local_120;
    local_d8 = &local_118;
    pppPStack_88 = &local_f0;
    pPStack_98 = (PrimInfoT_conflict *)0x0;
    local_90 = 1;
    local_108 = (PrimInfoT_conflict *)0x0;
    local_e8 = ppPVar14;
    local_a0 = pPVar15;
    local_80 = (TaskGroupContext *)&local_108;
    lVar16 = embree::TaskScheduler::thread();
    if (lVar16 == 0) {
      pTVar22 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar22,(_lambda___1_ *)&local_a0,(TaskGroupContext *)&local_108,(ulong)pPVar15,
                 true);
    }
    else {
      if (0xfff < *(ulong *)(lVar16 + 0x40080)) goto LAB_0012b6f8;
      lVar20 = *(long *)(lVar16 + 0xc00c0);
      uVar2 = lVar20 + 0x30 + (ulong)(-(int)lVar20 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0012b6f8;
      *(ulong *)(lVar16 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar16 + 0x40090 + uVar2);
      *puVar3 = &PTR_execute_00143b78;
      puVar3[1] = local_a0;
      puVar3[2] = pPStack_98;
      puVar3[3] = local_90;
      puVar3[4] = pppPStack_88;
      puVar3[5] = local_80;
      lVar17 = *(long *)(lVar16 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar16 + 0x40 + lVar17);
      lVar5 = *(long *)(lVar16 + 0xc0100);
      *(undefined4 *)(lVar16 + 0x44 + lVar17) = 1;
      *(undefined1 *)(lVar16 + 0x48 + lVar17) = 1;
      lVar17 = lVar17 + lVar16;
      *(undefined8 **)(lVar17 + 0x50) = puVar3;
      *(long *)(lVar17 + 0x58) = lVar5;
      *(TaskGroupContext **)(lVar17 + 0x60) = (TaskGroupContext *)&local_108;
      *(long *)(lVar17 + 0x68) = lVar20;
      *(PrimInfoT_conflict **)(lVar17 + 0x70) = pPVar15;
      if (lVar5 != 0) {
        LOCK();
        *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar16 + 0x40080) = *(long *)(lVar16 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar16 + 0x40080) - 1U <= *(ulong *)(lVar16 + 0x40040)) {
        LOCK();
        *(long *)(lVar16 + 0x40040) = *(long *)(lVar16 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    pPVar21 = local_108;
    if (local_108 == (PrimInfoT_conflict *)0x0) break;
LAB_0012b3db:
    ppPVar14 = &local_a0;
    local_a0 = pPVar21;
    std::__exception_ptr::exception_ptr::_M_addref();
    lVar16 = std::rethrow_exception(ppPVar14);
LAB_0012b403:
    local_118 = lVar16;
  }
LAB_0012ae70:
  if (ppPVar14 != (PrimInfoT_conflict **)0x0) {
    embree::alignedFree(ppPVar14);
  }
  pPVar26 = pPVar26 + param_2;
LAB_0012ae85:
  if (local_48 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return (ulong)pPVar26;
}



/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&) */

long __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
::parallel_object_split
          (HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
           *this,BinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
          PrimInfoExtRange *param_4)

{
  ulong uVar1;
  ulong uVar2;
  long lVar3;
  ulong uVar4;
  long in_FS_OFFSET;
  EmptyTy local_11b;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>_>__BuildRef_const___2_
  local_11a;
  _lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___3_
  local_119;
  BinSplit *local_118;
  undefined4 *local_110;
  undefined8 *local_108;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  long local_b8;
  long local_b0;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  undefined4 uStack_8c;
  undefined4 local_88;
  undefined4 uStack_84;
  undefined4 uStack_80;
  undefined4 uStack_7c;
  undefined4 local_78;
  undefined4 uStack_74;
  undefined4 uStack_70;
  undefined4 uStack_6c;
  undefined8 local_68;
  undefined8 local_60;
  undefined4 local_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined8 local_48;
  undefined8 uStack_40;
  long local_30;
  
  uVar1 = *(ulong *)(param_2 + 0x48);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_58 = *(undefined4 *)(param_1 + 8);
  uVar2 = *(ulong *)(param_2 + 0x40);
  local_b8 = 0;
  lVar3 = (long)(1 << ((byte)*(undefined4 *)(param_1 + 4) & 0x1f));
  local_e8 = _LC6;
  uStack_e4 = _LC6;
  uStack_e0 = _LC6;
  uStack_dc = _LC6;
  local_48 = (&mm_lookupmask_ps)[lVar3 * 2];
  uStack_40 = *(undefined8 *)(embree::Scene::progressMonitor + lVar3 * 0x10);
  local_c8 = _LC6;
  uStack_c4 = _LC6;
  uStack_c0 = _LC6;
  uStack_bc = _LC6;
  local_110 = &local_58;
  local_98 = _LC6;
  uStack_94 = _LC6;
  uStack_90 = _LC6;
  uStack_8c = _LC6;
  local_78 = _LC6;
  uStack_74 = _LC6;
  uStack_70 = _LC6;
  uStack_6c = _LC6;
  local_f8 = _LC8;
  uStack_f4 = _LC8;
  uStack_f0 = _LC8;
  uStack_ec = _LC8;
  local_d8 = _LC8;
  uStack_d4 = _LC8;
  uStack_d0 = _LC8;
  uStack_cc = _LC8;
  local_a8 = _LC8;
  uStack_a4 = _LC8;
  uStack_a0 = _LC8;
  uStack_9c = _LC8;
  local_88 = _LC8;
  uStack_84 = _LC8;
  uStack_80 = _LC8;
  uStack_7c = _LC8;
  local_b0 = 0;
  local_68 = 0;
  local_60 = 0;
  local_108 = &local_48;
  local_118 = param_1;
  uStack_54 = local_58;
  uStack_50 = local_58;
  uStack_4c = local_58;
  uVar4 = parallel_partitioning<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(___:PrimInfoT<embree::BBox<embree::Vec3fa>>&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_3_>
                    (*(BuildRef **)this,uVar2,uVar1,&local_11b,(PrimInfoT_conflict *)&local_f8,
                     (PrimInfoT_conflict *)&local_a8,
                     (_lambda_embree__sse2__BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>_>__BuildRef_const___1_
                      *)&local_118,&local_11a,&local_119,0x80);
  *(ulong *)(param_3 + 0x40) = uVar2;
  *(ulong *)(param_3 + 0x48) = uVar4;
  *(ulong *)(param_3 + 0x50) = uVar4;
  *(ulong *)param_3 = CONCAT44(uStack_f4,local_f8);
  *(ulong *)(param_3 + 8) = CONCAT44(uStack_ec,uStack_f0);
  *(ulong *)(param_3 + 0x10) = CONCAT44(uStack_e4,local_e8);
  *(ulong *)(param_3 + 0x18) = CONCAT44(uStack_dc,uStack_e0);
  *(undefined4 *)(param_3 + 0x20) = local_d8;
  *(undefined4 *)(param_3 + 0x24) = uStack_d4;
  *(undefined4 *)(param_3 + 0x28) = uStack_d0;
  *(undefined4 *)(param_3 + 0x2c) = uStack_cc;
  *(undefined4 *)(param_3 + 0x30) = local_c8;
  *(undefined4 *)(param_3 + 0x34) = uStack_c4;
  *(undefined4 *)(param_3 + 0x38) = uStack_c0;
  *(undefined4 *)(param_3 + 0x3c) = uStack_bc;
  *(ulong *)(param_4 + 0x40) = uVar4;
  *(ulong *)(param_4 + 0x48) = uVar1;
  *(ulong *)(param_4 + 0x50) = uVar1;
  *(ulong *)param_4 = CONCAT44(uStack_a4,local_a8);
  *(ulong *)(param_4 + 8) = CONCAT44(uStack_9c,uStack_a0);
  *(undefined4 *)(param_4 + 0x10) = local_98;
  *(undefined4 *)(param_4 + 0x14) = uStack_94;
  *(undefined4 *)(param_4 + 0x18) = uStack_90;
  *(undefined4 *)(param_4 + 0x1c) = uStack_8c;
  *(undefined4 *)(param_4 + 0x20) = local_88;
  *(undefined4 *)(param_4 + 0x24) = uStack_84;
  *(undefined4 *)(param_4 + 0x28) = uStack_80;
  *(undefined4 *)(param_4 + 0x2c) = uStack_7c;
  *(undefined4 *)(param_4 + 0x30) = local_78;
  *(undefined4 *)(param_4 + 0x34) = uStack_74;
  *(undefined4 *)(param_4 + 0x38) = uStack_70;
  *(undefined4 *)(param_4 + 0x3c) = uStack_6c;
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_b0 - local_b8;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::split(embree::sse2::BinSplit<32ul> const&,
   embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&) */

void __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
::split(HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
        *this,BinSplit *param_1,PrimInfoExtRange *param_2,PrimInfoExtRange *param_3,
       PrimInfoExtRange *param_4)

{
  undefined8 *puVar1;
  int *piVar2;
  undefined4 uVar3;
  float fVar4;
  int iVar5;
  ulong uVar6;
  undefined8 uVar7;
  long lVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 *puVar13;
  undefined1 (*pauVar14) [16];
  undefined1 (*pauVar15) [16];
  ulong uVar16;
  long *plVar17;
  long lVar18;
  TaskScheduler *pTVar19;
  uint uVar20;
  undefined1 (*pauVar21) [16];
  ulong uVar22;
  long lVar23;
  undefined8 *puVar24;
  ulong uVar25;
  long **in_R10;
  long lVar26;
  long *plVar27;
  long *unaff_R14;
  long in_FS_OFFSET;
  float fVar28;
  undefined1 auVar29 [16];
  undefined1 auVar30 [16];
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  undefined1 auVar45 [16];
  undefined1 auVar46 [16];
  undefined1 auVar47 [16];
  undefined1 local_210 [16];
  undefined1 local_200 [16];
  uint local_1f0;
  uint uStack_1ec;
  uint uStack_1e8;
  uint uStack_1e4;
  long *local_1d0;
  long *plStack_1c8;
  long lStack_1c0;
  long local_1b8;
  long *local_1b0;
  long *local_1a8;
  long local_1a0;
  long local_198;
  long lStack_190;
  long lStack_188;
  undefined8 uStack_180;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
  *pHStack_178;
  long **pplStack_170;
  TaskGroupContext *pTStack_168;
  long *local_160;
  long lStack_158;
  undefined8 local_150;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
  *pHStack_148;
  long **local_140;
  TaskGroupContext *pTStack_138;
  long local_130;
  long lStack_128;
  undefined8 local_120;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
  *pHStack_118;
  long **local_110;
  TaskGroupContext *pTStack_108;
  long local_100;
  long lStack_f8;
  undefined8 local_f0;
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
  *pHStack_e8;
  long **local_e0;
  TaskGroupContext *pTStack_d8;
  undefined8 local_b0;
  undefined8 uStack_a8;
  undefined8 local_a0;
  undefined8 uStack_98;
  undefined8 local_90;
  undefined8 uStack_88;
  undefined8 local_80;
  undefined8 uStack_78;
  ulong local_70;
  ulong local_68;
  ulong local_60;
  long local_48;
  
  local_b0 = *(undefined8 *)param_2;
  uStack_a8 = *(undefined8 *)(param_2 + 8);
  local_90 = *(undefined8 *)(param_2 + 0x20);
  uStack_88 = *(undefined8 *)(param_2 + 0x28);
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  uVar16 = *(ulong *)(param_2 + 0x40);
  uVar6 = *(ulong *)(param_2 + 0x48);
  local_a0 = *(undefined8 *)(param_2 + 0x10);
  uStack_98 = *(undefined8 *)(param_2 + 0x18);
  uVar25 = *(ulong *)(param_2 + 0x50);
  uVar20 = *(uint *)(param_1 + 4);
  pauVar15 = (undefined1 (*) [16])(ulong)uVar20;
  local_80 = *(undefined8 *)(param_2 + 0x30);
  uStack_78 = *(undefined8 *)(param_2 + 0x38);
  local_70 = uVar16;
  local_68 = uVar6;
  local_60 = uVar25;
  if (uVar20 != 0xffffffff) {
    if (uVar6 - uVar16 < 0x400) {
      iVar5 = *(int *)(param_1 + 8);
      unaff_R14 = *(long **)this;
      lVar26 = 0;
      lVar23 = 1;
      auVar41._0_8_ = CONCAT44(_LC6,_LC6);
      auVar41._8_4_ = _LC6;
      auVar41._12_4_ = _LC6;
      auVar42._0_8_ = CONCAT44(_LC8,_LC8);
      auVar42._8_4_ = _LC8;
      auVar42._12_4_ = _LC8;
      auVar37 = *(undefined1 (*) [16])(&mm_lookupmask_ps + (long)(1 << ((byte)uVar20 & 0x1f)) * 2);
      auVar43._8_4_ = _LC6;
      auVar43._0_8_ = auVar41._0_8_;
      auVar43._12_4_ = _LC6;
      auVar44._8_4_ = _LC8;
      auVar44._0_8_ = auVar42._0_8_;
      auVar44._12_4_ = _LC8;
      auVar45._8_4_ = _LC6;
      auVar45._0_8_ = auVar41._0_8_;
      auVar45._12_4_ = _LC6;
      auVar46._8_4_ = _LC8;
      auVar46._0_8_ = auVar42._0_8_;
      auVar46._12_4_ = _LC8;
      pauVar21 = (undefined1 (*) [16])(unaff_R14 + uVar6 * 8 + -8);
      local_210 = auVar41;
      local_200 = auVar42;
      for (pauVar14 = (undefined1 (*) [16])(unaff_R14 + uVar16 * 8); pauVar14 <= pauVar21;
          pauVar14 = pauVar14 + 4) {
        auVar38 = pauVar14[1];
        auVar39 = *pauVar14;
        auVar30._0_4_ = auVar38._0_4_ + auVar39._0_4_;
        auVar30._4_4_ = auVar38._4_4_ + auVar39._4_4_;
        auVar30._8_4_ = auVar38._8_4_ + auVar39._8_4_;
        auVar30._12_4_ = auVar38._12_4_ + auVar39._12_4_;
        local_1f0 = auVar37._0_4_;
        uStack_1ec = auVar37._4_4_;
        uStack_1e8 = auVar37._8_4_;
        uStack_1e4 = auVar37._12_4_;
        auVar33._0_4_ =
             -(uint)((int)((auVar30._0_4_ - *(float *)(param_1 + 0x20)) * *(float *)(param_1 + 0x30)
                          + _LC15) < iVar5) & local_1f0;
        auVar33._4_4_ =
             -(uint)((int)((auVar30._4_4_ - *(float *)(param_1 + 0x24)) * *(float *)(param_1 + 0x34)
                          + _UNK_001440f4) < iVar5) & uStack_1ec;
        auVar33._8_4_ =
             -(uint)((int)((auVar30._8_4_ - *(float *)(param_1 + 0x28)) * *(float *)(param_1 + 0x38)
                          + _UNK_001440f8) < iVar5) & uStack_1e8;
        auVar33._12_4_ =
             -(uint)((int)((auVar30._12_4_ - *(float *)(param_1 + 0x2c)) *
                           *(float *)(param_1 + 0x3c) + _UNK_001440fc) < iVar5) & uStack_1e4;
        uVar20 = movmskps((int)pauVar15,auVar33);
        pauVar15 = (undefined1 (*) [16])(ulong)uVar20;
        if (uVar20 == 0) {
          while( true ) {
            pauVar15 = pauVar21;
            auVar40 = pauVar15[1];
            auVar36 = *pauVar15;
            lVar26 = lVar26 + 1;
            pauVar21 = pauVar15 + -4;
            auVar34._0_4_ = auVar40._0_4_ + auVar36._0_4_;
            auVar34._4_4_ = auVar40._4_4_ + auVar36._4_4_;
            auVar34._8_4_ = auVar40._8_4_ + auVar36._8_4_;
            auVar34._12_4_ = auVar40._12_4_ + auVar36._12_4_;
            auVar31._0_4_ =
                 -(uint)((int)((auVar34._0_4_ - *(float *)(param_1 + 0x20)) *
                               *(float *)(param_1 + 0x30) + _LC15) < iVar5) & local_1f0;
            auVar31._4_4_ =
                 -(uint)((int)((auVar34._4_4_ - *(float *)(param_1 + 0x24)) *
                               *(float *)(param_1 + 0x34) + _UNK_001440f4) < iVar5) & uStack_1ec;
            auVar31._8_4_ =
                 -(uint)((int)((auVar34._8_4_ - *(float *)(param_1 + 0x28)) *
                               *(float *)(param_1 + 0x38) + _UNK_001440f8) < iVar5) & uStack_1e8;
            auVar31._12_4_ =
                 -(uint)((int)((auVar34._12_4_ - *(float *)(param_1 + 0x2c)) *
                               *(float *)(param_1 + 0x3c) + _UNK_001440fc) < iVar5) & uStack_1e4;
            uVar20 = movmskps((int)in_R10,auVar31);
            in_R10 = (long **)(ulong)uVar20;
            if (uVar20 != 0) break;
            local_200 = minps(local_200,auVar36);
            local_210 = maxps(local_210,auVar40);
            auVar42 = minps(auVar42,auVar34);
            auVar41 = maxps(auVar41,auVar34);
            if (pauVar21 < pauVar14) goto LAB_0012ba97;
          }
          in_R10 = *(long ***)pauVar14[2];
          auVar45 = maxps(auVar45,auVar40);
          auVar46 = minps(auVar46,auVar36);
          auVar44 = minps(auVar44,auVar34);
          local_210 = maxps(local_210,auVar38);
          *pauVar14 = auVar36;
          auVar42 = minps(auVar42,auVar30);
          auVar41 = maxps(auVar41,auVar30);
          local_200 = minps(local_200,auVar39);
          auVar43 = maxps(auVar43,auVar34);
          pauVar14[1] = pauVar15[1];
          uVar3 = *(undefined4 *)(pauVar14[2] + 8);
          *(undefined8 *)pauVar14[2] = *(undefined8 *)pauVar15[2];
          *(undefined4 *)(pauVar14[2] + 8) = *(undefined4 *)(pauVar15[2] + 8);
          *pauVar15 = auVar39;
          pauVar15[1] = auVar38;
          *(undefined4 *)(pauVar15[2] + 8) = uVar3;
          *(long ***)pauVar15[2] = in_R10;
          local_e0 = in_R10;
        }
        else {
          auVar46 = minps(auVar46,auVar39);
          auVar45 = maxps(auVar45,auVar38);
          auVar44 = minps(auVar44,auVar30);
          auVar43 = maxps(auVar43,auVar30);
        }
        lVar23 = lVar23 + 1;
      }
LAB_0012ba97:
      *(ulong *)(param_3 + 0x40) = uVar16;
      auVar47._8_8_ = lVar26;
      auVar47._0_8_ = lVar23 + -1;
      lVar23 = (long)pauVar14 - (long)unaff_R14 >> 6;
      *(undefined1 (*) [16])param_3 = auVar46;
      *(long *)(param_3 + 0x48) = lVar23;
      *(long *)(param_3 + 0x50) = lVar23;
      *(undefined1 (*) [16])(param_3 + 0x10) = auVar45;
      *(undefined1 (*) [16])(param_3 + 0x20) = auVar44;
      *(undefined1 (*) [16])(param_3 + 0x30) = auVar43;
      *(long *)(param_4 + 0x40) = lVar23;
      *(ulong *)(param_4 + 0x48) = uVar6;
      *(ulong *)(param_4 + 0x50) = uVar6;
      *(undefined8 *)param_4 = local_200._0_8_;
      *(undefined8 *)(param_4 + 8) = local_200._8_8_;
      *(undefined8 *)(param_4 + 0x10) = local_210._0_8_;
      *(undefined8 *)(param_4 + 0x18) = local_210._8_8_;
      *(undefined1 (*) [16])(param_4 + 0x20) = auVar42;
      *(undefined1 (*) [16])(param_4 + 0x30) = auVar41;
    }
    else {
      auVar47 = parallel_object_split(this,param_1,(PrimInfoExtRange *)&local_b0,param_3,param_4);
    }
    if (uVar6 != uVar25) {
      uVar25 = uVar25 - uVar6;
      fVar28 = ((float)auVar47._0_8_ / (float)(auVar47._8_8_ + auVar47._0_8_)) * (float)uVar25;
      if ((float)((uint)fVar28 & _LC25) < _LC22) {
        fVar28 = (float)((uint)(float)(int)fVar28 | ~_LC25 & (uint)fVar28);
      }
      if (__LC24 <= fVar28) {
        uVar16 = (long)(fVar28 - __LC24) ^ 0x8000000000000000;
      }
      else {
        uVar16 = (ulong)fVar28;
      }
      if (uVar25 < uVar16) {
        uVar16 = uVar25;
      }
      *(ulong *)(param_3 + 0x50) = *(long *)(param_3 + 0x48) + uVar16;
      lVar23 = *(long *)(param_4 + 0x48);
      *(ulong *)(param_4 + 0x50) = (uVar25 + lVar23) - uVar16;
      plVar17 = (long *)(*(long *)(param_3 + 0x50) - *(long *)(param_3 + 0x48));
      lVar26 = *(long *)(param_4 + 0x40);
      plVar27 = (long *)(lVar23 - lVar26);
      local_1b0 = plVar17;
      local_1a8 = plVar27;
      if (plVar17 == (long *)0x0) goto LAB_0012baf8;
      if (plVar17 < plVar27) {
        local_130 = (long)plVar17 + lVar26;
        local_110 = &local_1a8;
        local_1a0 = 0;
        local_120 = 0x40;
        lStack_128 = lVar26;
        pHStack_118 = this;
        pTStack_108 = (TaskGroupContext *)&local_1a0;
        lVar23 = embree::TaskScheduler::thread();
        if (lVar23 == 0) {
          pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
          TaskScheduler::
          spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                    (pTVar19,(_lambda___1_ *)&local_130,(TaskGroupContext *)&local_1a0,
                     (ulong)plVar17,true);
        }
        else {
          if (0xfff < *(ulong *)(lVar23 + 0x40080)) goto LAB_0012c8e2;
          lVar26 = *(long *)(lVar23 + 0xc00c0);
          uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
          if (0x80000 < uVar16) goto LAB_0012c8e2;
          *(ulong *)(lVar23 + 0xc00c0) = uVar16;
          puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
          *puVar24 = &PTR_execute_00143a88;
          puVar24[1] = local_130;
          puVar24[2] = lStack_128;
          puVar24[3] = local_120;
          puVar24[4] = pHStack_118;
          puVar24[5] = local_110;
          puVar24[6] = pTStack_108;
          lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
          piVar2 = (int *)(lVar23 + 0x40 + lVar18);
          lVar8 = *(long *)(lVar23 + 0xc0100);
          *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
          *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
          lVar18 = lVar18 + lVar23;
          *(undefined8 **)(lVar18 + 0x50) = puVar24;
          *(long *)(lVar18 + 0x58) = lVar8;
          *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&local_1a0;
          *(long *)(lVar18 + 0x68) = lVar26;
          *(long **)(lVar18 + 0x70) = plVar17;
          if (lVar8 != 0) {
            LOCK();
            *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
            UNLOCK();
          }
          LOCK();
          if (*piVar2 == 0) {
            *piVar2 = 1;
          }
          UNLOCK();
          LOCK();
          *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
          UNLOCK();
          plVar17 = (long *)(lVar23 + 0x40040);
          if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
            LOCK();
            *plVar17 = *(long *)(lVar23 + 0x40080) + -1;
            UNLOCK();
          }
        }
        embree::TaskScheduler::wait();
        lVar26 = local_1a0;
        lVar23 = local_100;
      }
      else {
        local_e0 = &local_1b0;
        local_f0 = 0x40;
        local_198 = 0;
        local_100 = lVar23;
        lStack_f8 = lVar26;
        pHStack_e8 = this;
        pTStack_d8 = (TaskGroupContext *)&local_198;
        lVar23 = embree::TaskScheduler::thread();
        if (lVar23 == 0) {
          pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
          TaskScheduler::
          spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                    (pTVar19,(_lambda___1_ *)&local_100,(TaskGroupContext *)&local_198,
                     (ulong)plVar27,true);
        }
        else {
          if (0xfff < *(ulong *)(lVar23 + 0x40080)) goto LAB_0012c8e2;
          lVar26 = *(long *)(lVar23 + 0xc00c0);
          uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
          if (0x80000 < uVar16) goto LAB_0012c8e2;
          *(ulong *)(lVar23 + 0xc00c0) = uVar16;
          puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
          *puVar24 = &PTR_execute_00143aa0;
          puVar24[1] = local_100;
          puVar24[2] = lStack_f8;
          puVar24[3] = local_f0;
          puVar24[4] = pHStack_e8;
          puVar24[5] = local_e0;
          puVar24[6] = pTStack_d8;
          lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
          piVar2 = (int *)(lVar23 + 0x40 + lVar18);
          lVar8 = *(long *)(lVar23 + 0xc0100);
          *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
          *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
          lVar18 = lVar18 + lVar23;
          *(undefined8 **)(lVar18 + 0x50) = puVar24;
          *(long *)(lVar18 + 0x58) = lVar8;
          *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&local_198;
          *(long *)(lVar18 + 0x68) = lVar26;
          *(long **)(lVar18 + 0x70) = plVar27;
          if (lVar8 != 0) {
            LOCK();
            *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
            UNLOCK();
          }
          LOCK();
          if (*piVar2 == 0) {
            *piVar2 = 1;
          }
          UNLOCK();
          LOCK();
          *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
          UNLOCK();
          plVar27 = (long *)(lVar23 + 0x40040);
          if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
            LOCK();
            *plVar27 = *(long *)(lVar23 + 0x40080) + -1;
            UNLOCK();
          }
        }
        embree::TaskScheduler::wait();
        plVar17 = plVar27;
        lVar26 = local_198;
        lVar23 = local_100;
      }
      local_100 = lVar26;
      if (local_100 == 0) {
        *(long *)(param_4 + 0x40) = *(long *)(param_4 + 0x40) + (long)local_1b0;
        *(long *)(param_4 + 0x48) = *(long *)(param_4 + 0x48) + (long)local_1b0;
        *(long *)(param_4 + 0x50) = *(long *)(param_4 + 0x50) + (long)local_1b0;
        local_100 = lVar23;
      }
      else {
        do {
          param_4 = (PrimInfoExtRange *)&local_100;
          std::__exception_ptr::exception_ptr::_M_addref();
          lVar23 = std::rethrow_exception(param_4);
LAB_0012c648:
          local_140 = &local_1d0;
          local_1b8 = 0;
          local_150 = 0x40;
          local_160 = plVar17;
          lStack_158 = lVar23;
          pHStack_148 = this;
          pTStack_138 = (TaskGroupContext *)&local_1b8;
          lVar23 = embree::TaskScheduler::thread();
          if (lVar23 == 0) {
            pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
            plVar17 = unaff_R14;
            TaskScheduler::
            spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                      (pTVar19,(_lambda___1_ *)&local_160,(TaskGroupContext *)&local_1b8,
                       (ulong)unaff_R14,true);
          }
          else {
            if (0xfff < *(ulong *)(lVar23 + 0x40080)) goto LAB_0012c8e2;
            lVar26 = *(long *)(lVar23 + 0xc00c0);
            uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
            if (0x80000 < uVar16) goto LAB_0012c8e2;
            *(ulong *)(lVar23 + 0xc00c0) = uVar16;
            puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
            *puVar24 = &PTR_execute_00143aa0;
            puVar24[1] = local_160;
            puVar24[2] = lStack_158;
            puVar24[3] = local_150;
            puVar24[4] = pHStack_148;
            puVar24[5] = local_140;
            puVar24[6] = pTStack_138;
            lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
            piVar2 = (int *)(lVar23 + 0x40 + lVar18);
            lVar8 = *(long *)(lVar23 + 0xc0100);
            *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
            *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
            lVar18 = lVar18 + lVar23;
            *(undefined8 **)(lVar18 + 0x50) = puVar24;
            *(long *)(lVar18 + 0x58) = lVar8;
            *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&local_1b8;
            *(long *)(lVar18 + 0x68) = lVar26;
            *(long **)(lVar18 + 0x70) = unaff_R14;
            if (lVar8 != 0) {
              LOCK();
              *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
              UNLOCK();
            }
            LOCK();
            if (*piVar2 == 0) {
              *piVar2 = 1;
            }
            UNLOCK();
            LOCK();
            *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
            UNLOCK();
            plVar17 = (long *)(lVar23 + 0x40040);
            if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
              LOCK();
              *plVar17 = *(long *)(lVar23 + 0x40080) + -1;
              UNLOCK();
            }
          }
          embree::TaskScheduler::wait();
          lVar26 = local_1b8;
          lVar23 = local_100;
joined_r0x0012c0cc:
          local_100 = lVar26;
        } while (local_100 != 0);
        *(long *)(param_4 + 0x40) = *(long *)(param_4 + 0x40) + (long)local_1d0;
        *(long *)(param_4 + 0x48) = *(long *)(param_4 + 0x48) + (long)local_1d0;
        *(long *)(param_4 + 0x50) = *(long *)(param_4 + 0x50) + (long)local_1d0;
        local_100 = lVar23;
      }
    }
    goto LAB_0012baf8;
  }
  lVar23 = uVar6 * 0x40;
  puVar1 = (undefined8 *)(*(long *)this + lVar23);
  puVar24 = (undefined8 *)(*(long *)this + uVar16 * 0x40);
  if (puVar1 != puVar24) {
    lVar26 = lVar23 + uVar16 * -0x40;
    uVar22 = lVar26 >> 6;
    if (uVar22 == 0) {
      std::
      __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar24,puVar1,0xfffffffffffffffe);
    }
    else {
      lVar8 = 0x3f;
      if (uVar22 != 0) {
        for (; uVar22 >> lVar8 == 0; lVar8 = lVar8 + -1) {
        }
      }
      std::
      __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar24,puVar1,(long)(int)lVar8 * 2);
      if (0x400 < lVar26) {
        puVar24 = puVar24 + 0x80;
        std::
        __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
                  ();
        for (; puVar1 != puVar24; puVar24 = puVar24 + 8) {
          fVar28 = *(float *)(puVar24 + 5);
          uVar9 = *puVar24;
          uVar10 = puVar24[1];
          uVar11 = puVar24[2];
          uVar12 = puVar24[3];
          uVar7 = puVar24[4];
          fVar4 = *(float *)(puVar24 + -3);
          puVar13 = puVar24;
          while (fVar28 < fVar4) {
            *puVar13 = puVar13[-8];
            puVar13[1] = puVar13[-7];
            puVar13[4] = puVar13[-4];
            puVar13[2] = puVar13[-6];
            puVar13[3] = puVar13[-5];
            *(undefined4 *)(puVar13 + 5) = *(undefined4 *)(puVar13 + -3);
            fVar4 = *(float *)(puVar13 + -0xb);
            puVar13 = puVar13 + -8;
          }
          puVar13[4] = uVar7;
          *puVar13 = uVar9;
          puVar13[1] = uVar10;
          puVar13[2] = uVar11;
          puVar13[3] = uVar12;
          *(float *)(puVar13 + 5) = fVar28;
        }
        goto LAB_0012bd81;
      }
    }
    std::
    __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
              (puVar24);
  }
LAB_0012bd81:
  uVar22 = uVar16 + uVar6 >> 1;
  if (uVar16 < uVar22) {
    auVar38._8_4_ = _LC8;
    auVar38._0_8_ = CONCAT44(_LC8,_LC8);
    auVar38._12_4_ = _LC8;
    auVar40._8_4_ = _LC8;
    auVar40._0_8_ = CONCAT44(_LC8,_LC8);
    auVar40._12_4_ = _LC8;
    auVar37._8_4_ = _LC6;
    auVar37._0_8_ = CONCAT44(_LC6,_LC6);
    auVar37._12_4_ = _LC6;
    auVar39._8_4_ = _LC6;
    auVar39._0_8_ = CONCAT44(_LC6,_LC6);
    auVar39._12_4_ = _LC6;
    pauVar15 = (undefined1 (*) [16])(uVar16 * 0x40 + *(long *)this);
    do {
      auVar36._0_4_ = *(float *)pauVar15[1] + *(float *)*pauVar15;
      auVar36._4_4_ = *(float *)(pauVar15[1] + 4) + *(float *)(*pauVar15 + 4);
      auVar36._8_4_ = *(float *)(pauVar15[1] + 8) + *(float *)(*pauVar15 + 8);
      auVar36._12_4_ = *(float *)(pauVar15[1] + 0xc) + *(float *)(*pauVar15 + 0xc);
      pauVar21 = pauVar15 + 4;
      auVar40 = minps(auVar40,*pauVar15);
      auVar39 = maxps(auVar39,pauVar15[1]);
      auVar38 = minps(auVar38,auVar36);
      auVar37 = maxps(auVar37,auVar36);
      pauVar15 = pauVar21;
    } while ((undefined1 (*) [16])(*(long *)this + uVar22 * 0x40) != pauVar21);
    lVar26 = uVar22 - uVar16;
  }
  else {
    lVar26 = 0;
    auVar38._8_4_ = _LC8;
    auVar38._0_8_ = CONCAT44(_LC8,_LC8);
    auVar38._12_4_ = _LC8;
    auVar40._8_4_ = _LC8;
    auVar40._0_8_ = CONCAT44(_LC8,_LC8);
    auVar40._12_4_ = _LC8;
    auVar37._8_4_ = _LC6;
    auVar37._0_8_ = CONCAT44(_LC6,_LC6);
    auVar37._12_4_ = _LC6;
    auVar39._8_4_ = _LC6;
    auVar39._0_8_ = CONCAT44(_LC6,_LC6);
    auVar39._12_4_ = _LC6;
  }
  auVar35._4_4_ = _LC6;
  auVar35._0_4_ = _LC6;
  auVar32._4_4_ = _LC8;
  auVar32._0_4_ = _LC8;
  auVar35._8_4_ = _LC6;
  auVar32._8_4_ = _LC8;
  auVar35._12_4_ = _LC6;
  auVar32._12_4_ = _LC8;
  auVar36 = auVar35;
  auVar47 = auVar32;
  if (uVar22 < uVar6) {
    pauVar15 = (undefined1 (*) [16])(uVar22 * 0x40 + *(long *)this);
    do {
      auVar29._0_4_ = *(float *)pauVar15[1] + *(float *)*pauVar15;
      auVar29._4_4_ = *(float *)(pauVar15[1] + 4) + *(float *)(*pauVar15 + 4);
      auVar29._8_4_ = *(float *)(pauVar15[1] + 8) + *(float *)(*pauVar15 + 8);
      auVar29._12_4_ = *(float *)(pauVar15[1] + 0xc) + *(float *)(*pauVar15 + 0xc);
      pauVar21 = pauVar15 + 4;
      auVar47 = minps(auVar47,*pauVar15);
      auVar35 = maxps(auVar35,pauVar15[1]);
      auVar32 = minps(auVar32,auVar29);
      auVar36 = maxps(auVar36,auVar29);
      pauVar15 = pauVar21;
    } while (pauVar21 != (undefined1 (*) [16])(*(long *)this + lVar23));
    lVar23 = uVar6 - uVar22;
  }
  else {
    lVar23 = 0;
  }
  *(ulong *)(param_3 + 0x40) = uVar16;
  *(ulong *)(param_3 + 0x48) = uVar22;
  *(ulong *)(param_3 + 0x50) = uVar22;
  *(undefined1 (*) [16])param_3 = auVar40;
  *(undefined1 (*) [16])(param_3 + 0x10) = auVar39;
  *(undefined1 (*) [16])(param_3 + 0x20) = auVar38;
  *(undefined1 (*) [16])(param_3 + 0x30) = auVar37;
  *(ulong *)(param_4 + 0x40) = uVar22;
  *(ulong *)(param_4 + 0x48) = uVar6;
  *(ulong *)(param_4 + 0x50) = uVar6;
  *(undefined1 (*) [16])param_4 = auVar47;
  *(undefined1 (*) [16])(param_4 + 0x10) = auVar35;
  *(undefined1 (*) [16])(param_4 + 0x20) = auVar32;
  *(undefined1 (*) [16])(param_4 + 0x30) = auVar36;
  if (uVar6 != uVar25) {
    uVar25 = uVar25 - uVar6;
    fVar28 = ((float)lVar26 / (float)(ulong)(lVar26 + lVar23)) * (float)uVar25;
    if ((float)((uint)fVar28 & _LC25) < _LC22) {
      fVar28 = (float)((uint)(float)(int)fVar28 | ~_LC25 & (uint)fVar28);
    }
    if (__LC24 <= fVar28) {
      uVar16 = (long)(fVar28 - __LC24) ^ 0x8000000000000000;
    }
    else {
      uVar16 = (ulong)fVar28;
    }
    if (uVar25 < uVar16) {
      uVar16 = uVar25;
    }
    *(ulong *)(param_3 + 0x50) = uVar16 + *(long *)(param_3 + 0x48);
    plVar17 = *(long **)(param_4 + 0x48);
    *(ulong *)(param_4 + 0x50) = (long)plVar17 + (uVar25 - uVar16);
    lVar23 = *(long *)(param_4 + 0x40);
    plVar27 = (long *)(*(long *)(param_3 + 0x50) - *(long *)(param_3 + 0x48));
    unaff_R14 = (long *)((long)plVar17 - lVar23);
    local_1d0 = plVar27;
    plStack_1c8 = unaff_R14;
    if (plVar27 != (long *)0x0) {
      if (unaff_R14 <= plVar27) goto LAB_0012c648;
      lStack_190 = (long)plVar27 + lVar23;
      pplStack_170 = &plStack_1c8;
      lStack_1c0 = 0;
      uStack_180 = 0x40;
      lStack_188 = lVar23;
      pHStack_178 = this;
      pTStack_168 = (TaskGroupContext *)&lStack_1c0;
      lVar23 = embree::TaskScheduler::thread();
      if (lVar23 != 0) {
        if (*(ulong *)(lVar23 + 0x40080) < 0x1000) {
          lVar26 = *(long *)(lVar23 + 0xc00c0);
          uVar16 = lVar26 + 0x38 + (ulong)(-(int)lVar26 & 0x3f);
          if (uVar16 < 0x80001) {
            puVar24 = (undefined8 *)(lVar23 + 0x40088 + uVar16);
            *(ulong *)(lVar23 + 0xc00c0) = uVar16;
            puVar24[1] = lStack_190;
            puVar24[2] = lStack_188;
            *puVar24 = &PTR_execute_00143a88;
            puVar24[3] = uStack_180;
            puVar24[4] = pHStack_178;
            puVar24[5] = pplStack_170;
            puVar24[6] = pTStack_168;
            lVar18 = *(long *)(lVar23 + 0x40080) * 0x40;
            piVar2 = (int *)(lVar23 + 0x40 + lVar18);
            lVar8 = *(long *)(lVar23 + 0xc0100);
            *(undefined4 *)(lVar23 + 0x44 + lVar18) = 1;
            *(undefined1 *)(lVar23 + 0x48 + lVar18) = 1;
            lVar18 = lVar18 + lVar23;
            *(undefined8 **)(lVar18 + 0x50) = puVar24;
            *(long *)(lVar18 + 0x58) = lVar8;
            *(TaskGroupContext **)(lVar18 + 0x60) = (TaskGroupContext *)&lStack_1c0;
            *(long *)(lVar18 + 0x68) = lVar26;
            *(long **)(lVar18 + 0x70) = plVar27;
            if (lVar8 != 0) {
              LOCK();
              *(int *)(lVar8 + 4) = *(int *)(lVar8 + 4) + 1;
              UNLOCK();
            }
            LOCK();
            if (*piVar2 == 0) {
              *piVar2 = 1;
            }
            UNLOCK();
            LOCK();
            *(long *)(lVar23 + 0x40080) = *(long *)(lVar23 + 0x40080) + 1;
            UNLOCK();
            plVar27 = (long *)(lVar23 + 0x40040);
            if (*(long *)(lVar23 + 0x40080) - 1U <= *(ulong *)(lVar23 + 0x40040)) {
              LOCK();
              *plVar27 = *(long *)(lVar23 + 0x40080) + -1;
              UNLOCK();
            }
            goto LAB_0012c0bc;
          }
        }
LAB_0012c8e2:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      pTVar19 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::moveExtentedRange(embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar19,(_lambda___1_ *)&lStack_190,(TaskGroupContext *)&lStack_1c0,(ulong)plVar27,
                 true);
LAB_0012c0bc:
      embree::TaskScheduler::wait();
      plVar17 = plVar27;
      lVar26 = lStack_1c0;
      lVar23 = local_100;
      goto joined_r0x0012c0cc;
    }
  }
LAB_0012baf8:
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, embree::parallel_for<unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}>(unsigned long,
   embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::PrimInfoT<embree::BBox<embree::Vec3fa> >,
   embree::EmptyTy, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef
   const&)#2}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>
   const&, embree::sse2::PrimInfoExtRange const&, embree::sse2::PrimInfoExtRange&,
   embree::sse2::PrimInfoExtRange&)::{lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >
   const&)#3}>::partition(embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&,
   embree::PrimInfoT<embree::BBox<embree::Vec3fa> >&)::{lambda(unsigned long)#2}
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)#1},embree::sse2::HeuristicArrayOp...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOp___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  undefined4 uVar2;
  TaskGroupContext *pTVar3;
  long lVar4;
  long *plVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  long *plVar11;
  long lVar12;
  long lVar13;
  ulong uVar14;
  long lVar15;
  long lVar16;
  ulong uVar17;
  TaskScheduler *pTVar18;
  undefined8 *puVar19;
  undefined8 *puVar20;
  undefined8 *puVar21;
  ulong uVar22;
  ulong uVar23;
  ulong uVar24;
  undefined8 *puVar25;
  ulong uVar26;
  long *plVar27;
  long *plVar28;
  long in_FS_OFFSET;
  long local_d0;
  ulong uStack_c8;
  undefined8 local_c0;
  undefined8 uStack_b8;
  TaskGroupContext *local_b0;
  ulong local_a0;
  long lStack_98;
  ulong local_90;
  undefined8 *puStack_88;
  TaskGroupContext *local_80;
  long local_48;
  
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  lVar15 = *(long *)(this + 0x10);
  puVar21 = *(undefined8 **)(this + 0x20);
  if (*(ulong *)(this + 0x18) < (ulong)(*(long *)(this + 8) - lVar15)) {
    pTVar3 = *(TaskGroupContext **)(this + 0x28);
    uVar26 = (ulong)(*(long *)(this + 8) + lVar15) >> 1;
    local_a0 = uVar26;
    lStack_98 = lVar15;
    local_90 = *(ulong *)(this + 0x18);
    puStack_88 = puVar21;
    local_80 = pTVar3;
    lVar12 = embree::TaskScheduler::thread();
    if (lVar12 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)&local_a0,pTVar3,uVar26 - lVar15,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar12 + 0x40080)) goto LAB_0012ce5c;
      lVar4 = *(long *)(lVar12 + 0xc00c0);
      uVar14 = lVar4 + 0x30 + (ulong)(-(int)lVar4 & 0x3f);
      if (0x80000 < uVar14) goto LAB_0012ce5c;
      *(ulong *)(lVar12 + 0xc00c0) = uVar14;
      puVar21 = (undefined8 *)(lVar12 + 0x40090 + uVar14);
      *puVar21 = &PTR_execute_00143b78;
      puVar21[1] = local_a0;
      puVar21[2] = lStack_98;
      puVar21[5] = local_80;
      puVar21[3] = local_90;
      puVar21[4] = puStack_88;
      lVar13 = *(long *)(lVar12 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar12 + 0x40 + lVar13);
      lVar16 = *(long *)(lVar12 + 0xc0100);
      *(undefined4 *)(lVar12 + 0x44 + lVar13) = 1;
      *(undefined1 *)(lVar12 + 0x48 + lVar13) = 1;
      lVar13 = lVar13 + lVar12;
      *(undefined8 **)(lVar13 + 0x50) = puVar21;
      *(long *)(lVar13 + 0x58) = lVar16;
      *(TaskGroupContext **)(lVar13 + 0x60) = pTVar3;
      *(long *)(lVar13 + 0x68) = lVar4;
      *(ulong *)(lVar13 + 0x70) = uVar26 - lVar15;
      if (lVar16 != 0) {
        LOCK();
        *(int *)(lVar16 + 4) = *(int *)(lVar16 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar12 + 0x40080) = *(long *)(lVar12 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar12 + 0x40080) - 1U <= *(ulong *)(lVar12 + 0x40040)) {
        LOCK();
        *(long *)(lVar12 + 0x40040) = *(long *)(lVar12 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_c0 = *(undefined8 *)(this + 0x18);
    local_d0 = *(long *)(this + 8);
    pTVar3 = *(TaskGroupContext **)(this + 0x28);
    uStack_b8 = *(undefined8 *)(this + 0x20);
    uVar14 = local_d0 - uVar26;
    uStack_c8 = uVar26;
    local_b0 = pTVar3;
    lVar15 = embree::TaskScheduler::thread();
    if (lVar15 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::parallel_for<unsigned_long,embree::parallel_partition_task<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::EmptyTy,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_split(embree::sse2::BinSplit<32ul>const&,embree::sse2::PrimInfoExtRange_const&,embree::sse2::PrimInfoExtRange&,embree::sse2::PrimInfoExtRange&)::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const&)_1_,embree::sse2::HeuristicArrayOpenMergeSA___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)&local_d0,pTVar3,uVar14,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar15 + 0x40080)) {
LAB_0012ce5c:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar12 = *(long *)(lVar15 + 0xc00c0);
      uVar26 = lVar12 + 0x30 + (ulong)(-(int)lVar12 & 0x3f);
      if (0x80000 < uVar26) goto LAB_0012ce5c;
      *(ulong *)(lVar15 + 0xc00c0) = uVar26;
      puVar21 = (undefined8 *)(lVar15 + 0x40090 + uVar26);
      *puVar21 = &PTR_execute_00143b78;
      puVar21[1] = local_d0;
      puVar21[2] = uStack_c8;
      puVar21[5] = local_b0;
      puVar21[3] = local_c0;
      puVar21[4] = uStack_b8;
      lVar16 = *(long *)(lVar15 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar15 + 0x40 + lVar16);
      lVar4 = *(long *)(lVar15 + 0xc0100);
      *(undefined4 *)(lVar15 + 0x44 + lVar16) = 1;
      *(undefined1 *)(lVar15 + 0x48 + lVar16) = 1;
      lVar16 = lVar16 + lVar15;
      *(undefined8 **)(lVar16 + 0x50) = puVar21;
      *(long *)(lVar16 + 0x58) = lVar4;
      *(TaskGroupContext **)(lVar16 + 0x60) = pTVar3;
      *(long *)(lVar16 + 0x68) = lVar12;
      *(ulong *)(lVar16 + 0x70) = uVar14;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar15 + 0x40080) = *(long *)(lVar15 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar15 + 0x40080) - 1U <= *(ulong *)(lVar15 + 0x40040)) {
        LOCK();
        *(long *)(lVar15 + 0x40040) = *(long *)(lVar15 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    plVar5 = (long *)puVar21[1];
    lVar12 = plVar5[0x98];
    uVar17 = lVar15 * *(long *)*puVar21;
    uVar14 = plVar5[0x99] - lVar12;
    uVar26 = uVar17 / (ulong)plVar5[6];
    uVar23 = uVar26;
    if (uVar26 < uVar14) {
      plVar27 = plVar5 + 0x98;
    }
    else {
      plVar28 = plVar5 + 0x9a;
      do {
        plVar27 = plVar28;
        lVar12 = *plVar27;
        uVar23 = uVar23 - uVar14;
        uVar14 = plVar27[1] - lVar12;
        plVar28 = plVar27 + 2;
      } while (uVar14 <= uVar23);
    }
    lVar15 = plVar5[0x118];
    uVar24 = plVar5[0x119] - lVar15;
    uVar22 = uVar26;
    if (uVar26 < uVar24) {
      plVar28 = plVar5 + 0x118;
    }
    else {
      plVar11 = plVar5 + 0x11a;
      do {
        plVar28 = plVar11;
        lVar15 = *plVar28;
        uVar22 = uVar22 - uVar24;
        uVar24 = plVar28[1] - lVar15;
        plVar11 = plVar28 + 2;
      } while (uVar24 <= uVar22);
    }
    uVar14 = uVar14 - uVar23;
    uVar26 = (*(long *)*puVar21 + uVar17) / (ulong)plVar5[6] - uVar26;
    uVar24 = uVar24 - uVar22;
    puVar21 = (undefined8 *)(*plVar5 + (lVar12 + uVar23) * 0x40);
    puVar25 = (undefined8 *)(*plVar5 + (lVar15 + uVar22) * 0x40);
    uVar23 = uVar26;
    if (uVar14 <= uVar26) {
      uVar23 = uVar14;
    }
    if (uVar24 < uVar23) {
      uVar23 = uVar24;
    }
    if (uVar26 != 0) {
joined_r0x0012cca8:
      if (uVar24 == 0) {
        uVar24 = plVar28[3] - plVar28[2];
        puVar25 = (undefined8 *)(plVar28[2] * 0x40 + *plVar5);
        uVar23 = uVar26;
        if (uVar24 <= uVar26) {
          uVar23 = uVar24;
        }
        if (uVar14 < uVar23) {
          uVar23 = uVar14;
        }
        plVar28 = plVar28 + 2;
      }
      uVar26 = uVar26 - uVar23;
      uVar14 = uVar14 - uVar23;
      uVar24 = uVar24 - uVar23;
      puVar19 = puVar21;
      puVar20 = puVar25;
      uVar17 = uVar23;
      if (uVar23 != 0) {
        do {
          uVar6 = puVar20[1];
          uVar7 = *puVar19;
          uVar8 = puVar19[1];
          uVar9 = puVar19[2];
          uVar10 = puVar19[3];
          local_80 = (TaskGroupContext *)puVar19[4];
          *puVar19 = *puVar20;
          puVar19[1] = uVar6;
          uVar6 = puVar20[3];
          uVar2 = *(undefined4 *)(puVar19 + 5);
          puVar19[2] = puVar20[2];
          puVar19[3] = uVar6;
          puVar19[4] = puVar20[4];
          *(undefined4 *)(puVar19 + 5) = *(undefined4 *)(puVar20 + 5);
          puVar20[4] = local_80;
          *puVar20 = uVar7;
          puVar20[1] = uVar8;
          puVar20[2] = uVar9;
          puVar20[3] = uVar10;
          *(undefined4 *)(puVar20 + 5) = uVar2;
          uVar17 = uVar17 - 1;
          puVar19 = puVar19 + 8;
          puVar20 = puVar20 + 8;
        } while (uVar17 != 0);
        puVar25 = puVar25 + uVar23 * 8;
        puVar21 = puVar21 + uVar23 * 8;
        if (uVar26 == 0) goto LAB_0012cd78;
      }
      if (uVar14 == 0) {
        uVar14 = plVar27[3] - plVar27[2];
        puVar21 = (undefined8 *)(plVar27[2] * 0x40 + *plVar5);
        uVar23 = uVar24;
        if (uVar26 <= uVar24) {
          uVar23 = uVar26;
        }
        if (uVar14 < uVar23) {
          uVar23 = uVar14;
        }
        plVar27 = plVar27 + 2;
      }
      else {
        uVar23 = 0;
      }
      goto joined_r0x0012cca8;
    }
LAB_0012cd78:
    if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* std::pair<unsigned long, bool> embree::parallel_reduce_internal<unsigned long, std::pair<unsigned
   long, bool>, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&)::{lambda(embree::range<unsigned long>
   const&)#1}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&)::{lambda(std::pair<unsigned long,
   bool> const&, std::pair<unsigned long, bool> const&)#2}>(unsigned long, unsigned long, unsigned
   long, unsigned long, std::pair<unsigned long, bool> const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&)::{lambda(embree::range<unsigned long>
   const&)#1} const&, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&)::{lambda(std::pair<unsigned long,
   bool> const&, std::pair<unsigned long, bool> const&)#2} const&) */

undefined1  [16]
embree::
parallel_reduce_internal<unsigned_long,std::pair<unsigned_long,bool>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(std::pair<unsigned_long,bool>const&,std::pair<unsigned_long,bool>const&)_2_>
          (ulong param_1,ulong param_2,ulong param_3,ulong param_4,pair_conflict *param_5,
          _lambda_embree__range<unsigned_long>_const___1_ *param_6,
          _lambda_std__pair<unsigned_long,bool>_const__std__pair<unsigned_long,bool>_const___2_
          *param_7)

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  ulong uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  long lVar10;
  long in_FS_OFFSET;
  byte bVar11;
  undefined1 auVar12 [16];
  ulong local_2148;
  ulong local_2140;
  ulong local_2138 [2];
  ulong local_2128;
  ulong *local_2120;
  ulong *local_2118;
  ulong *local_2110;
  long *local_2108;
  _lambda_embree__range<unsigned_long>_const___1_ *local_2100;
  ulong local_20f0;
  undefined8 uStack_20e8;
  undefined8 local_20e0;
  undefined8 **ppuStack_20d8;
  ulong *local_20d0;
  long local_20c0 [1024];
  long *local_c0;
  ulong local_b8;
  long local_48;
  
  bVar11 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2148 = param_3;
  local_2140 = param_2;
  local_2138[0] = param_1;
  uVar5 = embree::TaskScheduler::threadCount();
  lVar10 = 0x400;
  plVar8 = local_20c0;
  if (local_2138[0] < uVar5) {
    uVar5 = local_2138[0];
  }
  uVar6 = 0x200;
  if (uVar5 < 0x201) {
    uVar6 = uVar5;
  }
  for (; lVar10 != 0; lVar10 = lVar10 + -1) {
    *plVar8 = 0;
    plVar8 = plVar8 + (ulong)bVar11 * -2 + 1;
  }
  local_2120 = &local_2140;
  local_2118 = &local_2148;
  local_2110 = local_2138;
  local_2138[0] = uVar6;
  local_2108 = local_20c0;
  local_2100 = param_6;
  local_c0 = local_20c0;
  local_b8 = uVar6;
  if (uVar5 == 0) {
    lVar10 = *(long *)param_5;
    uVar5 = (ulong)(byte)param_5[8];
  }
  else {
    ppuStack_20d8 = &local_2120;
    uStack_20e8 = 0;
    local_20e0 = 1;
    local_2128 = 0;
    local_20f0 = uVar6;
    local_20d0 = &local_2128;
    lVar10 = embree::TaskScheduler::thread();
    if (lVar10 == 0) {
      uVar9 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImSt4pairImbEZNS_4sse226HeuristicArrayOpenMergeSAHIZNS7_19BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMiILi4EEEE5buildEvEUlRNSD_8BuildRefEPSE_E5_SE_Lm32EE13getPropertiesERKNS7_16PrimInfoExtRangeEEUlRKNS_5rangeImEEE_ZNSI_13getPropertiesESL_EUlRKS6_SS_E0_EET0_T_SV_SV_SV_RKSU_RKT1_RKT2_EUlmE_EEvSV_SX_EUlSP_E_EEvSV_SV_SV_SX_PNS0_16TaskGroupContextEEUlvE_EEvRKSV_S17_mb
                (uVar9,&local_20f0,&local_2128,uVar6,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar10 + 0x40080)) {
LAB_0012d6db:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar10 + 0xc00c0);
      uVar5 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar5) goto LAB_0012d6db;
      *(ulong *)(lVar10 + 0xc00c0) = uVar5;
      puVar2 = (undefined8 *)(lVar10 + 0x40090 + uVar5);
      *puVar2 = 0x143b90;
      puVar2[1] = local_20f0;
      puVar2[2] = uStack_20e8;
      puVar2[3] = local_20e0;
      puVar2[4] = ppuStack_20d8;
      puVar2[5] = local_20d0;
      lVar7 = *(long *)(lVar10 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar10 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar10 + 0xc0100);
      *(undefined4 *)(lVar10 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar10 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar10;
      *(undefined8 **)(lVar7 + 0x50) = puVar2;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_2128;
      *(long *)(lVar7 + 0x68) = lVar3;
      *(ulong *)(lVar7 + 0x70) = uVar6;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar10 + 0x40080) = *(long *)(lVar10 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar10 + 0x40080) - 1U <= *(ulong *)(lVar10 + 0x40040)) {
        LOCK();
        *(long *)(lVar10 + 0x40040) = *(long *)(lVar10 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2128 != 0) {
      local_20f0 = local_2128;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20f0);
      goto LAB_0012d6d6;
    }
    lVar10 = *(long *)param_5;
    uVar5 = (ulong)(byte)param_5[8];
    if (local_2138[0] != 0) {
      plVar8 = local_c0;
      do {
        if ((char)uVar5 != '\0') {
          uVar5 = (ulong)*(byte *)(plVar8 + 1);
        }
        lVar10 = lVar10 + *plVar8;
        plVar8 = plVar8 + 2;
      } while (plVar8 != local_c0 + local_2138[0] * 2);
    }
  }
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    auVar12._8_8_ = uVar5;
    auVar12._0_8_ = lVar10;
    return auVar12;
  }
LAB_0012d6d6:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&) */

long __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
::getProperties(HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
                *this,PrimInfoExtRange *param_1)

{
  ulong uVar1;
  long lVar2;
  ulong uVar3;
  float *pfVar4;
  long lVar5;
  long in_FS_OFFSET;
  float fVar6;
  float fVar7;
  float fVar8;
  float local_5c;
  long local_58;
  float local_50;
  undefined8 local_48;
  undefined1 local_40;
  float local_38 [4];
  undefined8 local_28;
  undefined8 uStack_20;
  long *local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_28 = (HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
              *)CONCAT44(*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4),
                         *(float *)(param_1 + 0x10) - *(float *)param_1);
  uStack_20 = (float *)CONCAT44(*(float *)(param_1 + 0x1c) - *(float *)(param_1 + 0xc),
                                *(float *)(param_1 + 0x18) - *(float *)(param_1 + 8));
  fVar6 = (float)((uint)(*(float *)(param_1 + 0x10) - *(float *)param_1) & _LC25);
  fVar7 = (float)((uint)(*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4)) & _LC25);
  fVar8 = (float)((uint)(*(float *)(param_1 + 0x18) - *(float *)(param_1 + 8)) & _LC25);
  if (fVar6 <= fVar7) {
    lVar5 = 4;
    if (fVar7 <= fVar8) {
      lVar5 = 8;
    }
    local_58 = 1;
    if (fVar7 <= fVar8) {
      local_58 = 2;
    }
  }
  else {
    uVar3 = (ulong)(fVar6 <= fVar8);
    local_58 = uVar3 * 2;
    lVar5 = uVar3 * 8;
  }
  uVar3 = *(ulong *)(param_1 + 0x40);
  local_50 = _LC28 / *(float *)((long)&local_28 + lVar5);
  local_40 = 1;
  local_48 = 0;
  pfVar4 = (float *)(uVar3 * 0x40 + *(long *)this);
  local_5c = pfVar4[3];
  uStack_20 = &local_5c;
  local_18 = &local_58;
  uVar1 = *(ulong *)(param_1 + 0x48);
  local_28 = this;
  if (uVar1 - uVar3 < 0x400) {
    if (uVar3 < uVar1) {
      lVar2 = 0;
      do {
        if (((uint)pfVar4[8] & 8) == 0) {
          local_38[3] = pfVar4[7] - pfVar4[3];
          local_38[0] = pfVar4[4] - *pfVar4;
          local_38[1] = pfVar4[5] - pfVar4[1];
          local_38[2] = pfVar4[6] - pfVar4[2];
          if (__LC26 < *(float *)((long)local_38 + lVar5) * local_50) {
            lVar2 = lVar2 + 3;
          }
        }
        pfVar4 = pfVar4 + 0x10;
      } while ((float *)(*(long *)this + uVar1 * 0x40) != pfVar4);
    }
    else {
      lVar2 = 0;
    }
  }
  else {
    lVar2 = parallel_reduce_internal<unsigned_long,std::pair<unsigned_long,bool>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(std::pair<unsigned_long,bool>const&,std::pair<unsigned_long,bool>const&)_2_>
                      ((uVar1 - uVar3) + 0x1ff >> 9,uVar3,uVar1,0x200,(pair_conflict *)&local_48,
                       (_lambda_embree__range<unsigned_long>_const___1_ *)&local_28,
                       (_lambda_std__pair<unsigned_long,bool>_const__std__pair<unsigned_long,bool>_const___2_
                        *)local_38);
  }
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return lVar2;
}



/* embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::BBox<embree::Vec3fa> >
   embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned long,
   unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2} const&) */

embree * __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&)_2_>
          (embree *this,ulong param_1,ulong param_2,ulong param_3,ulong param_4,
          BinInfoT_conflict *param_5,_lambda_embree__range<unsigned_long>_const___1_ *param_6,
          _lambda_embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const___2_
          *param_7)

{
  int *piVar1;
  long *plVar2;
  long lVar3;
  long lVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  ulong uVar21;
  undefined1 (*pauVar22) [16];
  embree *peVar23;
  embree *peVar24;
  undefined8 *puVar25;
  undefined1 (*pauVar26) [16];
  undefined1 (*pauVar27) [16];
  long lVar28;
  undefined8 uVar29;
  long lVar30;
  undefined1 (*pauVar31) [16];
  ulong uVar32;
  BinInfoT_conflict *pBVar33;
  undefined1 (*pauVar34) [16];
  undefined1 (*pauVar35) [16];
  undefined8 *puVar36;
  undefined1 (*pauVar37) [16];
  undefined8 *puVar38;
  undefined1 (*pauVar39) [16];
  long in_FS_OFFSET;
  byte bVar40;
  undefined1 auVar41 [16];
  undefined1 (*local_2b58) [16];
  ulong local_2b48;
  ulong local_2b40;
  ulong local_2b38 [2];
  ulong local_2b28;
  ulong *local_2b20;
  ulong *local_2b18;
  ulong *local_2b10;
  undefined1 (*local_2b08) [16];
  _lambda_embree__range<unsigned_long>_const___1_ *local_2b00;
  ulong local_2af0;
  undefined8 uStack_2ae8;
  undefined8 local_2ae0;
  ulong **ppuStack_2ad8;
  ulong *local_2ad0;
  undefined1 local_2ac0 [3072];
  undefined8 local_1ec0;
  int aiStack_1eb8 [124];
  undefined8 local_1cc8;
  undefined1 local_1cc0 [7168];
  undefined1 (*local_c0) [16];
  ulong local_b8;
  long local_48;
  
  bVar40 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2b48 = param_3;
  local_2b40 = param_2;
  local_2b38[0] = param_1;
  local_b8 = embree::TaskScheduler::threadCount();
  if (0x200 < local_2b38[0]) {
    local_2b38[0] = 0x200;
  }
  if (local_2b38[0] <= local_b8) {
    local_b8 = local_2b38[0];
  }
  local_2b38[0] = local_b8;
  if (local_b8 * 0xe00 < 0x2001) {
    local_c0 = (undefined1 (*) [16])local_1cc0;
  }
  else {
    local_c0 = (undefined1 (*) [16])embree::alignedMalloc(local_b8 * 0xe00,0x40);
  }
  uVar21 = local_2b38[0];
  local_2b58 = (undefined1 (*) [16])local_1cc0;
  local_2b20 = &local_2b40;
  local_2b00 = param_6;
  local_2b18 = &local_2b48;
  local_2b10 = local_2b38;
  local_2b08 = local_2b58;
  if (local_2b38[0] != 0) {
    ppuStack_2ad8 = &local_2b20;
    uStack_2ae8 = 0;
    local_2ae0 = 1;
    local_2b28 = 0;
    local_2af0 = local_2b38[0];
    local_2ad0 = &local_2b28;
    lVar30 = embree::TaskScheduler::thread();
    if (lVar30 == 0) {
      uVar29 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_4sse28BinInfoTILm32ENS5_19BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMiILi4EEEE8BuildRefENS_4BBoxINS_6Vec3faEEEEEZNS5_26HeuristicArrayOpenMergeSAHIZNSB_5buildEvEUlRSC_PSC_E5_SC_Lm32EE20parallel_object_findERKNS5_16PrimInfoExtRangeEmEUlRKNS_5rangeImEEE_ZNSL_20parallel_object_findESO_mEUlRKSG_SV_E0_EET0_T_SY_SY_SY_RKSX_RKT1_RKT2_EUlmE_EEvSY_S10_EUlSS_E_EEvSY_SY_SY_S10_PNS0_16TaskGroupContextEEUlvE_EEvRKSY_S1A_mb
                (uVar29,&local_2af0,&local_2b28,uVar21,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar30 + 0x40080)) {
LAB_0012e763:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar30 + 0xc00c0);
      uVar32 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar32) goto LAB_0012e763;
      *(ulong *)(lVar30 + 0xc00c0) = uVar32;
      puVar25 = (undefined8 *)(lVar30 + 0x40090 + uVar32);
      *puVar25 = 0x143ba8;
      puVar25[1] = local_2af0;
      puVar25[2] = uStack_2ae8;
      puVar25[3] = local_2ae0;
      puVar25[4] = ppuStack_2ad8;
      puVar25[5] = local_2ad0;
      lVar28 = *(long *)(lVar30 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar30 + 0x40 + lVar28);
      lVar4 = *(long *)(lVar30 + 0xc0100);
      *(undefined4 *)(lVar30 + 0x44 + lVar28) = 1;
      *(undefined1 *)(lVar30 + 0x48 + lVar28) = 1;
      lVar28 = lVar28 + lVar30;
      *(undefined8 **)(lVar28 + 0x50) = puVar25;
      *(long *)(lVar28 + 0x58) = lVar4;
      *(ulong **)(lVar28 + 0x60) = &local_2b28;
      *(long *)(lVar28 + 0x68) = lVar3;
      *(ulong *)(lVar28 + 0x70) = uVar21;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar30 + 0x40080) = *(long *)(lVar30 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar30 + 0x40080) - 1U <= *(ulong *)(lVar30 + 0x40040)) {
        LOCK();
        *(long *)(lVar30 + 0x40040) = *(long *)(lVar30 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2b28 != 0) {
      local_2af0 = local_2b28;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_2af0);
      goto LAB_0012e737;
    }
  }
  pauVar22 = local_c0;
  uVar21 = local_2b38[0];
  peVar23 = this;
  pBVar33 = param_5;
  do {
    uVar29 = *(undefined8 *)(pBVar33 + 8);
    peVar24 = peVar23 + 0x60;
    *(undefined8 *)peVar23 = *(undefined8 *)pBVar33;
    *(undefined8 *)(peVar23 + 8) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x18);
    *(undefined8 *)(peVar23 + 0x10) = *(undefined8 *)(pBVar33 + 0x10);
    *(undefined8 *)(peVar23 + 0x18) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x28);
    *(undefined8 *)(peVar23 + 0x20) = *(undefined8 *)(pBVar33 + 0x20);
    *(undefined8 *)(peVar23 + 0x28) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x38);
    *(undefined8 *)(peVar23 + 0x30) = *(undefined8 *)(pBVar33 + 0x30);
    *(undefined8 *)(peVar23 + 0x38) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x48);
    *(undefined8 *)(peVar23 + 0x40) = *(undefined8 *)(pBVar33 + 0x40);
    *(undefined8 *)(peVar23 + 0x48) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x58);
    *(undefined8 *)(peVar23 + 0x50) = *(undefined8 *)(pBVar33 + 0x50);
    *(undefined8 *)(peVar23 + 0x58) = uVar29;
    peVar23 = peVar24;
    pBVar33 = pBVar33 + 0x60;
  } while (peVar24 != this + 0xc00);
  puVar25 = (undefined8 *)memmove(this + 0xc00,param_5 + 0xc00,0x200);
  if (uVar21 != 0) {
    pauVar27 = (undefined1 (*) [16])local_2ac0;
    peVar23 = this;
    pauVar39 = pauVar22;
    do {
      do {
        uVar29 = *(undefined8 *)(peVar23 + 8);
        uVar11 = *(undefined8 *)(peVar23 + 0x10);
        uVar12 = *(undefined8 *)(peVar23 + 0x18);
        pauVar26 = pauVar27 + 6;
        uVar13 = *(undefined8 *)(peVar23 + 0x20);
        uVar14 = *(undefined8 *)(peVar23 + 0x28);
        uVar15 = *(undefined8 *)(peVar23 + 0x30);
        uVar16 = *(undefined8 *)(peVar23 + 0x38);
        uVar17 = *(undefined8 *)(peVar23 + 0x40);
        uVar18 = *(undefined8 *)(peVar23 + 0x48);
        uVar19 = *(undefined8 *)(peVar23 + 0x50);
        uVar20 = *(undefined8 *)(peVar23 + 0x58);
        *(undefined8 *)*pauVar27 = *(undefined8 *)peVar23;
        *(undefined8 *)(*pauVar27 + 8) = uVar29;
        *(undefined8 *)pauVar27[1] = uVar11;
        *(undefined8 *)(pauVar27[1] + 8) = uVar12;
        *(undefined8 *)pauVar27[2] = uVar13;
        *(undefined8 *)(pauVar27[2] + 8) = uVar14;
        *(undefined8 *)pauVar27[3] = uVar15;
        *(undefined8 *)(pauVar27[3] + 8) = uVar16;
        *(undefined8 *)pauVar27[4] = uVar17;
        *(undefined8 *)(pauVar27[4] + 8) = uVar18;
        *(undefined8 *)pauVar27[5] = uVar19;
        *(undefined8 *)(pauVar27[5] + 8) = uVar20;
        pauVar27 = pauVar26;
        peVar23 = peVar23 + 0x60;
      } while (pauVar26 != (undefined1 (*) [16])&local_1ec0);
      plVar2 = *(long **)param_7;
      puVar36 = puVar25;
      pauVar27 = (undefined1 (*) [16])&local_1ec0;
      for (lVar30 = 0x40; lVar30 != 0; lVar30 = lVar30 + -1) {
        *(undefined8 *)*pauVar27 = *puVar36;
        puVar36 = puVar36 + (ulong)bVar40 * -2 + 1;
        pauVar27 = (undefined1 (*) [16])(pauVar27[-(ulong)bVar40] + 8);
      }
      lVar30 = *plVar2;
      pauVar27 = (undefined1 (*) [16])local_2ac0;
      peVar23 = this;
      if (lVar30 != 0) {
        pauVar26 = (undefined1 (*) [16])local_2ac0;
        pauVar31 = pauVar39;
        pauVar34 = pauVar39;
        pauVar37 = (undefined1 (*) [16])&local_1ec0;
        do {
          iVar5 = *(int *)(*pauVar37 + 4);
          iVar6 = *(int *)(*pauVar37 + 8);
          iVar7 = *(int *)(*pauVar37 + 0xc);
          pauVar35 = pauVar34 + 1;
          iVar8 = *(int *)(pauVar34[0xc0] + 4);
          iVar9 = *(int *)(pauVar34[0xc0] + 8);
          iVar10 = *(int *)(pauVar34[0xc0] + 0xc);
          *(int *)*pauVar37 = *(int *)*pauVar37 + *(int *)pauVar34[0xc0];
          *(int *)(*pauVar37 + 4) = iVar5 + iVar8;
          *(int *)(*pauVar37 + 8) = iVar6 + iVar9;
          *(int *)(*pauVar37 + 0xc) = iVar7 + iVar10;
          auVar41 = minps(*pauVar26,*pauVar31);
          *pauVar26 = auVar41;
          auVar41 = maxps(pauVar26[1],pauVar31[1]);
          pauVar26[1] = auVar41;
          auVar41 = minps(pauVar26[2],pauVar31[2]);
          pauVar26[2] = auVar41;
          auVar41 = maxps(pauVar26[3],pauVar31[3]);
          pauVar26[3] = auVar41;
          auVar41 = minps(pauVar26[4],pauVar31[4]);
          pauVar26[4] = auVar41;
          auVar41 = maxps(pauVar26[5],pauVar31[5]);
          pauVar26[5] = auVar41;
          pauVar26 = pauVar26 + 6;
          pauVar31 = pauVar31 + 6;
          pauVar34 = pauVar35;
          pauVar37 = pauVar37 + 1;
        } while (pauVar39 + lVar30 != pauVar35);
      }
      do {
        uVar29 = *(undefined8 *)(*pauVar27 + 8);
        uVar11 = *(undefined8 *)pauVar27[1];
        uVar12 = *(undefined8 *)(pauVar27[1] + 8);
        pauVar26 = pauVar27 + 6;
        uVar13 = *(undefined8 *)pauVar27[2];
        uVar14 = *(undefined8 *)(pauVar27[2] + 8);
        uVar15 = *(undefined8 *)pauVar27[3];
        uVar16 = *(undefined8 *)(pauVar27[3] + 8);
        uVar17 = *(undefined8 *)pauVar27[4];
        uVar18 = *(undefined8 *)(pauVar27[4] + 8);
        uVar19 = *(undefined8 *)pauVar27[5];
        uVar20 = *(undefined8 *)(pauVar27[5] + 8);
        *(undefined8 *)peVar23 = *(undefined8 *)*pauVar27;
        *(undefined8 *)(peVar23 + 8) = uVar29;
        *(undefined8 *)(peVar23 + 0x10) = uVar11;
        *(undefined8 *)(peVar23 + 0x18) = uVar12;
        *(undefined8 *)(peVar23 + 0x20) = uVar13;
        *(undefined8 *)(peVar23 + 0x28) = uVar14;
        *(undefined8 *)(peVar23 + 0x30) = uVar15;
        *(undefined8 *)(peVar23 + 0x38) = uVar16;
        *(undefined8 *)(peVar23 + 0x40) = uVar17;
        *(undefined8 *)(peVar23 + 0x48) = uVar18;
        *(undefined8 *)(peVar23 + 0x50) = uVar19;
        *(undefined8 *)(peVar23 + 0x58) = uVar20;
        pauVar27 = pauVar26;
        peVar23 = peVar23 + 0x60;
      } while ((undefined1 (*) [16])&local_1ec0 != pauVar26);
      pauVar39 = pauVar39 + 0xe0;
      *puVar25 = local_1ec0;
      puVar25[0x3f] = local_1cc8;
      lVar30 = (long)puVar25 - (long)((ulong)(puVar25 + 1) & 0xfffffffffffffff8);
      puVar36 = (undefined8 *)((long)&local_1ec0 - lVar30);
      puVar38 = (undefined8 *)((ulong)(puVar25 + 1) & 0xfffffffffffffff8);
      for (uVar32 = (ulong)((int)lVar30 + 0x200U >> 3); uVar32 != 0; uVar32 = uVar32 - 1) {
        *puVar38 = *puVar36;
        puVar36 = puVar36 + (ulong)bVar40 * -2 + 1;
        puVar38 = puVar38 + (ulong)bVar40 * -2 + 1;
      }
      pauVar27 = (undefined1 (*) [16])local_2ac0;
      peVar23 = this;
    } while (pauVar39 != pauVar22 + uVar21 * 0xe0);
  }
  if (pauVar22 != local_2b58) {
    embree::alignedFree(pauVar22);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return this;
  }
LAB_0012e737:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long) */

PrimInfoExtRange *
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
::parallel_object_find(PrimInfoExtRange *param_1,ulong param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  long lVar9;
  long lVar10;
  undefined1 (*pauVar11) [16];
  undefined1 (*pauVar12) [16];
  BinInfoT_conflict *pBVar13;
  BinInfoT_conflict *pBVar14;
  ulong in_RCX;
  embree *peVar15;
  ulong uVar16;
  long lVar17;
  float *pfVar18;
  undefined4 uVar19;
  long in_RDX;
  BinInfoT_conflict *pBVar20;
  ulong uVar21;
  embree *peVar22;
  embree *peVar23;
  long lVar24;
  undefined1 (*pauVar25) [16];
  ulong uVar26;
  ulong uVar27;
  long in_FS_OFFSET;
  byte bVar28;
  undefined1 auVar29 [16];
  uint uVar30;
  int iVar31;
  uint uVar33;
  int iVar34;
  float fVar35;
  uint uVar36;
  int iVar37;
  float fVar38;
  undefined1 auVar32 [16];
  int iVar39;
  uint uVar40;
  uint uVar43;
  uint uVar44;
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  uint uVar45;
  uint uVar47;
  uint uVar48;
  uint uVar49;
  uint uVar50;
  undefined1 auVar46 [16];
  uint uVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  undefined1 auVar56 [16];
  undefined1 auVar57 [16];
  undefined1 local_1f40 [16];
  undefined1 local_1f30 [16];
  undefined1 local_1f20 [16];
  undefined1 local_1f10 [16];
  undefined1 local_1f00 [16];
  ulong *local_1ee8;
  ulong local_1ee0;
  ulong *local_1ed8;
  undefined1 local_1ed0 [8];
  float fStack_1ec8;
  undefined1 local_1ec0 [16];
  ulong local_1eb0 [2];
  float local_1ea0;
  float fStack_1e9c;
  float fStack_1e98;
  float fStack_1e94;
  float local_1e90;
  float fStack_1e8c;
  float fStack_1e88;
  uint uStack_1e84;
  float local_1e80 [128];
  BinInfoT_conflict local_1c80 [3056];
  int local_1090 [4];
  BinInfoT_conflict local_1080 [4];
  int aiStack_107c [127];
  embree local_e80 [4];
  int aiStack_e7c [3];
  int local_e70 [4];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2992];
  embree local_280 [4];
  int aiStack_27c [141];
  long local_48;
  
  bVar28 = 0;
  local_1ed0._4_4_ = _LC8;
  local_1ed0._0_4_ = _LC8;
  fStack_1ec8 = _LC8;
  register0x0000120c = _LC8;
  auVar29._4_4_ = _LC6;
  auVar29._0_4_ = _LC6;
  auVar29._8_4_ = _LC6;
  auVar29._12_4_ = _LC6;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pBVar14 = local_1080;
  pBVar13 = local_1c80;
  do {
    *(undefined1 (*) [16])(pBVar13 + 0x40) = _local_1ed0;
    pBVar20 = pBVar13 + 0x60;
    *(undefined1 (*) [16])(pBVar13 + 0x50) = auVar29;
    *(undefined1 (*) [16])(pBVar13 + 0x20) = _local_1ed0;
    *(undefined1 (*) [16])(pBVar13 + 0x30) = auVar29;
    *(undefined1 (*) [16])pBVar13 = _local_1ed0;
    *(undefined1 (*) [16])(pBVar13 + 0x10) = auVar29;
    *(undefined1 (*) [16])pBVar14 = (undefined1  [16])0x0;
    pBVar14 = pBVar14 + 0x10;
    pBVar13 = pBVar20;
  } while (local_1080 != pBVar20);
  local_1ea0 = *(float *)(in_RDX + 0x20);
  fStack_1e9c = *(float *)(in_RDX + 0x24);
  fStack_1e98 = *(float *)(in_RDX + 0x28);
  fStack_1e94 = *(float *)(in_RDX + 0x2c);
  local_1ee8 = local_1eb0;
  local_1eb0[0] = 0x20;
  auVar32._0_4_ = *(float *)(in_RDX + 0x30) - local_1ea0;
  auVar32._4_4_ = *(float *)(in_RDX + 0x34) - fStack_1e9c;
  auVar32._8_4_ = *(float *)(in_RDX + 0x38) - fStack_1e98;
  auVar32._12_4_ = *(float *)(in_RDX + 0x3c) - fStack_1e94;
  uVar26 = *(ulong *)(in_RDX + 0x40);
  auVar41._4_4_ = _LC11;
  auVar41._0_4_ = _LC11;
  auVar41._8_4_ = _LC11;
  auVar41._12_4_ = _LC11;
  uVar27 = *(ulong *)(in_RDX + 0x48) - uVar26;
  auVar41 = maxps(auVar41,auVar32);
  uVar21 = uVar27 + 0x1ff >> 9;
  auVar42._4_4_ = _LC13;
  auVar42._0_4_ = _LC13;
  auVar42._8_4_ = _LC13;
  auVar42._12_4_ = _LC13;
  auVar32 = divps(auVar42,auVar41);
  local_1e90 = (float)(-(uint)(_LC11 < auVar41._0_4_) & auVar32._0_4_);
  fStack_1e8c = (float)(-(uint)(_LC11 < auVar41._4_4_) & auVar32._4_4_);
  fStack_1e88 = (float)(-(uint)(_LC11 < auVar41._8_4_) & auVar32._8_4_);
  uStack_1e84 = -(uint)(_LC11 < auVar41._12_4_) & auVar32._12_4_;
  local_1ee0 = param_2;
  local_1ed8 = local_1ee8;
  if (uVar21 == 1) {
    peVar23 = local_e80;
    peVar22 = local_280;
    do {
      *(undefined1 (*) [16])(peVar23 + 0x40) = _local_1ed0;
      peVar15 = peVar23 + 0x60;
      *(undefined1 (*) [16])(peVar23 + 0x50) = auVar29;
      *(undefined1 (*) [16])(peVar23 + 0x20) = _local_1ed0;
      *(undefined1 (*) [16])(peVar23 + 0x30) = auVar29;
      *(undefined1 (*) [16])peVar23 = _local_1ed0;
      *(undefined1 (*) [16])(peVar23 + 0x10) = auVar29;
      *(undefined1 (*) [16])peVar22 = (undefined1  [16])0x0;
      peVar23 = peVar15;
      peVar22 = peVar22 + 0x10;
    } while (local_280 != peVar15);
    pauVar25 = (undefined1 (*) [16])(*(long *)param_2 + uVar26 * 0x40);
    if (uVar27 == 1) {
LAB_0012f095:
      auVar32 = pauVar25[1];
      auVar42 = *pauVar25;
      iVar31 = *(int *)(pauVar25[1] + 0xc);
      uVar30 = (uint)(((auVar32._0_4_ + auVar42._0_4_) - local_1ea0) * local_1e90 + _LC15);
      uVar33 = (uint)(((auVar32._4_4_ + auVar42._4_4_) - fStack_1e9c) * fStack_1e8c + _LC15);
      uVar36 = (uint)(((auVar32._8_4_ + auVar42._8_4_) - fStack_1e98) * fStack_1e88 + _LC15);
      uVar40 = -(uint)((int)uVar30 < (int)__LC17);
      uVar43 = -(uint)((int)uVar33 < (int)_UNK_00144104);
      uVar44 = -(uint)((int)uVar36 < (int)_UNK_00144108);
      uVar30 = uVar40 & uVar30 | ~uVar40 & __LC17;
      uVar33 = uVar43 & uVar33 | ~uVar43 & _UNK_00144104;
      uVar36 = uVar44 & uVar36 | ~uVar44 & _UNK_00144108;
      lVar24 = (long)(int)(~-(uint)((int)uVar30 < 0) & uVar30);
      peVar23 = local_e80 + lVar24 * 0x60;
      *(int *)(local_e80 + (lVar24 + 0xc0) * 0x10) =
           *(int *)(local_e80 + (lVar24 + 0xc0) * 0x10) + iVar31;
      auVar41 = minps(*(undefined1 (*) [16])peVar23,auVar42);
      *(undefined1 (*) [16])peVar23 = auVar41;
      auVar41 = maxps(*(undefined1 (*) [16])(local_e70 + lVar24 * 0x18),auVar32);
      *(undefined1 (*) [16])(local_e70 + lVar24 * 0x18) = auVar41;
      lVar24 = (long)(int)(~-(uint)((int)uVar33 < 0) & uVar33);
      lVar17 = lVar24 * 0x60;
      aiStack_27c[lVar24 * 4] = aiStack_27c[lVar24 * 4] + iVar31;
      auVar41 = minps(*(undefined1 (*) [16])(local_e60 + lVar17),auVar42);
      *(undefined1 (*) [16])(local_e60 + lVar17) = auVar41;
      auVar41 = maxps(*(undefined1 (*) [16])(local_e50 + lVar17),auVar32);
      *(undefined1 (*) [16])(local_e50 + lVar17) = auVar41;
      lVar24 = (long)(int)(~-(uint)((int)uVar36 < 0) & uVar36);
      lVar17 = lVar24 * 0x60;
      aiStack_27c[lVar24 * 4 + 1] = aiStack_27c[lVar24 * 4 + 1] + iVar31;
      auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar17),auVar42);
      *(undefined1 (*) [16])(local_e40 + lVar17) = auVar42;
      auVar32 = maxps(*(undefined1 (*) [16])(local_e30 + lVar17),auVar32);
      *(undefined1 (*) [16])(local_e30 + lVar17) = auVar32;
    }
    else {
      pauVar11 = pauVar25;
      do {
        auVar32 = pauVar11[1];
        auVar42 = *pauVar11;
        pauVar12 = pauVar11 + 8;
        auVar41 = pauVar11[5];
        auVar56 = pauVar11[4];
        uVar30 = (uint)(((auVar32._0_4_ + auVar42._0_4_) - local_1ea0) * local_1e90 + _LC15);
        uVar33 = (uint)(((auVar32._4_4_ + auVar42._4_4_) - fStack_1e9c) * fStack_1e8c + _LC15);
        uVar36 = (uint)(((auVar32._8_4_ + auVar42._8_4_) - fStack_1e98) * fStack_1e88 + _LC15);
        uVar40 = -(uint)((int)uVar30 < (int)__LC17);
        uVar43 = -(uint)((int)uVar33 < (int)_UNK_00144104);
        uVar44 = -(uint)((int)uVar36 < (int)_UNK_00144108);
        uVar30 = uVar30 & uVar40 | ~uVar40 & __LC17;
        uVar33 = uVar33 & uVar43 | ~uVar43 & _UNK_00144104;
        uVar40 = uVar36 & uVar44 | ~uVar44 & _UNK_00144108;
        uVar16 = (ulong)(~-(uint)((int)uVar30 < 0) & uVar30);
        peVar23 = local_e80 + uVar16 * 0x60;
        uVar30 = (uint)(((auVar41._0_4_ + auVar56._0_4_) - local_1ea0) * local_1e90 + _LC15);
        uVar36 = (uint)(((auVar41._4_4_ + auVar56._4_4_) - fStack_1e9c) * fStack_1e8c + _LC15);
        uVar43 = (uint)(((auVar41._8_4_ + auVar56._8_4_) - fStack_1e98) * fStack_1e88 + _LC15);
        uVar44 = -(uint)((int)uVar30 < (int)__LC17);
        uVar47 = -(uint)((int)uVar36 < (int)_UNK_00144104);
        uVar49 = -(uint)((int)uVar43 < (int)_UNK_00144108);
        uVar30 = uVar44 & uVar30 | ~uVar44 & __LC17;
        uVar36 = uVar47 & uVar36 | ~uVar47 & _UNK_00144104;
        uVar43 = uVar49 & uVar43 | ~uVar49 & _UNK_00144108;
        auVar46 = minps(*(undefined1 (*) [16])peVar23,auVar42);
        *(undefined1 (*) [16])peVar23 = auVar46;
        auVar46 = maxps(*(undefined1 (*) [16])(local_e70 + uVar16 * 0x18),auVar32);
        *(undefined1 (*) [16])(local_e70 + uVar16 * 0x18) = auVar46;
        uVar26 = (ulong)(~-(uint)((int)uVar33 < 0) & uVar33);
        lVar24 = uVar26 * 0x60;
        auVar46 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar42);
        *(undefined1 (*) [16])(local_e60 + lVar24) = auVar46;
        auVar46 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar32);
        *(undefined1 (*) [16])(local_e50 + lVar24) = auVar46;
        uVar21 = (ulong)(~-(uint)((int)uVar40 < 0) & uVar40);
        lVar24 = uVar21 * 0x60;
        auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar42);
        *(undefined1 (*) [16])(local_e40 + lVar24) = auVar42;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar32);
        *(undefined1 (*) [16])(local_e30 + lVar24) = auVar32;
        iVar31 = *(int *)(pauVar11[1] + 0xc);
        *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) =
             *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) + iVar31;
        uVar16 = (ulong)(~-(uint)((int)uVar30 < 0) & uVar30);
        aiStack_27c[uVar26 * 4] = aiStack_27c[uVar26 * 4] + iVar31;
        aiStack_27c[uVar21 * 4 + 1] = aiStack_27c[uVar21 * 4 + 1] + iVar31;
        peVar23 = local_e80 + uVar16 * 0x60;
        auVar32 = minps(*(undefined1 (*) [16])peVar23,auVar56);
        *(undefined1 (*) [16])peVar23 = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e70 + uVar16 * 0x18),auVar41);
        *(undefined1 (*) [16])(local_e70 + uVar16 * 0x18) = auVar32;
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        lVar24 = uVar26 * 0x60;
        auVar32 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar56);
        *(undefined1 (*) [16])(local_e60 + lVar24) = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar41);
        *(undefined1 (*) [16])(local_e50 + lVar24) = auVar32;
        uVar21 = (ulong)(~-(uint)((int)uVar43 < 0) & uVar43);
        lVar24 = uVar21 * 0x60;
        auVar32 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar56);
        *(undefined1 (*) [16])(local_e40 + lVar24) = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar41);
        *(undefined1 (*) [16])(local_e30 + lVar24) = auVar32;
        iVar31 = *(int *)(pauVar11[5] + 0xc);
        *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) =
             *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) + iVar31;
        aiStack_27c[uVar26 * 4] = aiStack_27c[uVar26 * 4] + iVar31;
        aiStack_27c[uVar21 * 4 + 1] = aiStack_27c[uVar21 * 4 + 1] + iVar31;
        pauVar11 = pauVar12;
      } while (pauVar25 + (uVar27 - 2 >> 1) * 8 + 8 != pauVar12);
      uVar26 = (uVar27 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar26 < uVar27) {
        pauVar25 = pauVar25 + uVar26 * 4;
        goto LAB_0012f095;
      }
    }
    lVar24 = 0x1f;
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&)_2_>
              (local_e80,uVar21,uVar26,*(ulong *)(in_RDX + 0x48),0x200,local_1c80,
               (_lambda_embree__range<unsigned_long>_const___1_ *)&local_1ee0,
               (_lambda_embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const___2_
                *)&local_1ee8);
    unique0x10000a3f = _UNK_001440d4;
    local_1ed0._0_4_ = _LC8;
    auVar29._4_12_ = _UNK_001440c4;
    auVar29._0_4_ = _LC6;
    lVar24 = local_1eb0[0] - 1;
  }
  pBVar14 = local_1c80;
  peVar23 = local_e80;
  do {
    uVar5 = *(undefined8 *)(peVar23 + 8);
    uVar6 = *(undefined8 *)(peVar23 + 0x30);
    uVar7 = *(undefined8 *)(peVar23 + 0x38);
    pBVar13 = pBVar14 + 0x60;
    *(undefined8 *)pBVar14 = *(undefined8 *)peVar23;
    *(undefined8 *)(pBVar14 + 8) = uVar5;
    uVar5 = *(undefined8 *)(peVar23 + 0x10);
    uVar8 = *(undefined8 *)(peVar23 + 0x18);
    *(undefined8 *)(pBVar14 + 0x30) = uVar6;
    *(undefined8 *)(pBVar14 + 0x38) = uVar7;
    uVar6 = *(undefined8 *)(peVar23 + 0x50);
    uVar7 = *(undefined8 *)(peVar23 + 0x58);
    *(undefined8 *)(pBVar14 + 0x10) = uVar5;
    *(undefined8 *)(pBVar14 + 0x18) = uVar8;
    uVar5 = *(undefined8 *)(peVar23 + 0x20);
    uVar8 = *(undefined8 *)(peVar23 + 0x28);
    *(undefined8 *)(pBVar14 + 0x50) = uVar6;
    *(undefined8 *)(pBVar14 + 0x58) = uVar7;
    *(undefined8 *)(pBVar14 + 0x20) = uVar5;
    *(undefined8 *)(pBVar14 + 0x28) = uVar8;
    uVar5 = *(undefined8 *)(peVar23 + 0x48);
    *(undefined8 *)(pBVar14 + 0x40) = *(undefined8 *)(peVar23 + 0x40);
    *(undefined8 *)(pBVar14 + 0x48) = uVar5;
    pBVar14 = pBVar13;
    peVar23 = peVar23 + 0x60;
  } while (local_1080 != pBVar13);
  peVar23 = local_280;
  pBVar14 = local_1080;
  for (lVar17 = 0x40; lVar17 != 0; lVar17 = lVar17 + -1) {
    *(undefined8 *)pBVar14 = *(undefined8 *)peVar23;
    peVar23 = peVar23 + ((ulong)bVar28 * -2 + 1) * 8;
    pBVar14 = pBVar14 + (ulong)bVar28 * -0x10 + 8;
  }
  if (lVar24 == 0) {
    local_1ec0 = (undefined1  [16])0x0;
  }
  else {
    lVar17 = lVar24 * 0x10;
    iVar31 = 0;
    iVar34 = 0;
    iVar37 = 0;
    iVar39 = 0;
    pBVar14 = local_1c80 + lVar24 * 0x60;
    pfVar18 = local_1e80 + lVar24 * 4;
    auVar32 = _local_1ed0;
    auVar42 = auVar29;
    auVar41 = _local_1ed0;
    auVar56 = auVar29;
    auVar46 = _local_1ed0;
    auVar57 = auVar29;
    do {
      auVar42 = maxps(auVar42,*(undefined1 (*) [16])(pBVar14 + 0x10));
      auVar32 = minps(auVar32,*(undefined1 (*) [16])pBVar14);
      pBVar13 = pBVar14 + -0x60;
      iVar1 = *(int *)(local_1080 + lVar17);
      iVar2 = *(int *)((long)aiStack_107c + lVar17);
      iVar3 = *(int *)((long)aiStack_107c + lVar17 + 4);
      iVar4 = *(int *)((long)aiStack_107c + lVar17 + 8);
      auVar56 = maxps(auVar56,*(undefined1 (*) [16])(pBVar14 + 0x30));
      pfVar18[3] = 0.0;
      auVar41 = minps(auVar41,*(undefined1 (*) [16])(pBVar14 + 0x20));
      auVar57 = maxps(auVar57,*(undefined1 (*) [16])(pBVar14 + 0x50));
      iVar31 = iVar1 + iVar31;
      iVar34 = iVar2 + iVar34;
      iVar37 = iVar3 + iVar37;
      iVar39 = iVar4 + iVar39;
      auVar46 = minps(auVar46,*(undefined1 (*) [16])(pBVar14 + 0x40));
      *(int *)(local_e80 + lVar17) = iVar31;
      *(int *)((long)aiStack_e7c + lVar17) = iVar34;
      *(int *)((long)aiStack_e7c + lVar17 + 4) = iVar37;
      *(int *)((long)aiStack_e7c + lVar17 + 8) = iVar39;
      lVar17 = lVar17 + -0x10;
      fVar35 = auVar42._4_4_ - auVar32._4_4_;
      fVar38 = auVar42._8_4_ - auVar32._8_4_;
      *pfVar18 = (auVar42._0_4_ - auVar32._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar56._4_4_ - auVar41._4_4_;
      fVar38 = auVar56._8_4_ - auVar41._8_4_;
      pfVar18[1] = (auVar56._0_4_ - auVar41._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar57._4_4_ - auVar46._4_4_;
      fVar38 = auVar57._8_4_ - auVar46._8_4_;
      pfVar18[2] = (auVar57._0_4_ - auVar46._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      pBVar14 = pBVar13;
      pfVar18 = pfVar18 + -4;
    } while (pBVar13 != local_1c80);
    local_1ec0 = (undefined1  [16])0x0;
    iVar31 = (1 << ((byte)in_RCX & 0x1f)) + -1;
    if (1 < local_1eb0[0]) {
      lVar24 = 0x10;
      uVar26 = in_RCX & 0xffffffff;
      local_1f00 = (undefined1  [16])0x0;
      local_1f10 = (undefined1  [16])0x0;
      pBVar14 = local_1c80;
      auVar32 = auVar29;
      auVar42 = auVar29;
      uVar30 = __LC20;
      uVar33 = _UNK_001440e4;
      uVar36 = _UNK_001440e8;
      uVar40 = _UNK_001440ec;
      local_1f40 = _local_1ed0;
      local_1f30 = _local_1ed0;
      local_1f20 = _local_1ed0;
      do {
        auVar29 = maxps(auVar29,*(undefined1 (*) [16])(pBVar14 + 0x50));
        local_1f40 = minps(local_1f40,*(undefined1 (*) [16])(pBVar14 + 0x40));
        local_1f10._0_4_ = local_1f10._0_4_ + *(int *)((long)local_1090 + lVar24);
        local_1f10._4_4_ = local_1f10._4_4_ + *(int *)((long)local_1090 + lVar24 + 4);
        local_1f10._8_4_ = local_1f10._8_4_ + *(int *)((long)local_1090 + lVar24 + 8);
        local_1f10._12_4_ = local_1f10._12_4_ + *(int *)((long)local_1090 + lVar24 + 0xc);
        auVar42 = maxps(auVar42,*(undefined1 (*) [16])(pBVar14 + 0x10));
        local_1f20 = minps(local_1f20,*(undefined1 (*) [16])pBVar14);
        fVar35 = auVar29._4_4_ - local_1f40._4_4_;
        fVar38 = auVar29._8_4_ - local_1f40._8_4_;
        local_1f30 = minps(local_1f30,*(undefined1 (*) [16])(pBVar14 + 0x20));
        fVar54 = auVar42._4_4_ - local_1f20._4_4_;
        fVar55 = auVar42._8_4_ - local_1f20._8_4_;
        auVar32 = maxps(auVar32,*(undefined1 (*) [16])(pBVar14 + 0x30));
        fVar52 = auVar32._4_4_ - local_1f30._4_4_;
        fVar53 = auVar32._8_4_ - local_1f30._8_4_;
        uVar45 = (uint)(local_1f10._0_4_ + iVar31) >> uVar26;
        uVar48 = (uint)(local_1f10._4_4_ + iVar31) >> uVar26;
        uVar50 = (uint)(local_1f10._8_4_ + iVar31) >> uVar26;
        uVar51 = (uint)(local_1f10._12_4_ + iVar31) >> uVar26;
        uVar43 = (uint)(*(int *)(local_e80 + lVar24) + iVar31) >> uVar26;
        uVar44 = (uint)(*(int *)((long)aiStack_e7c + lVar24) + iVar31) >> uVar26;
        uVar47 = (uint)(*(int *)((long)aiStack_e7c + lVar24 + 4) + iVar31) >> uVar26;
        uVar49 = (uint)(*(int *)((long)aiStack_e7c + lVar24 + 8) + iVar31) >> uVar26;
        fVar35 = (fVar35 + fVar38) * (auVar29._0_4_ - local_1f40._0_4_) + fVar35 * fVar38;
        pfVar18 = (float *)((long)local_1e80 + lVar24);
        lVar17 = lVar24 + 4;
        lVar9 = lVar24 + 8;
        lVar10 = lVar24 + 0xc;
        lVar24 = lVar24 + 0x10;
        fVar38 = ((float)(int)(uVar45 & _LC25) + (float)((int)uVar45 >> 0x1f & __LC19)) *
                 ((fVar54 + fVar55) * (auVar42._0_4_ - local_1f20._0_4_) + fVar54 * fVar55) +
                 ((float)(int)(uVar43 & _LC25) + (float)((int)uVar43 >> 0x1f & __LC19)) * *pfVar18;
        fVar52 = ((float)(int)(uVar48 & _UNK_00144114) +
                 (float)((int)uVar48 >> 0x1f & _UNK_00144124)) *
                 ((fVar52 + fVar53) * (auVar32._0_4_ - local_1f30._0_4_) + fVar52 * fVar53) +
                 ((float)(int)(uVar44 & _UNK_00144114) +
                 (float)((int)uVar44 >> 0x1f & _UNK_00144124)) *
                 *(float *)((long)local_1e80 + lVar17);
        fVar53 = ((float)(int)(uVar50 & _UNK_00144118) +
                 (float)((int)uVar50 >> 0x1f & _UNK_00144128)) * fVar35 +
                 ((float)(int)(uVar47 & _UNK_00144118) +
                 (float)((int)uVar47 >> 0x1f & _UNK_00144128)) *
                 *(float *)((long)local_1e80 + lVar9);
        fVar35 = ((float)(int)(uVar51 & _UNK_0014411c) +
                 (float)((int)uVar51 >> 0x1f & _UNK_0014412c)) * fVar35 +
                 ((float)(int)(uVar49 & _UNK_0014411c) +
                 (float)((int)uVar49 >> 0x1f & _UNK_0014412c)) *
                 *(float *)((long)local_1e80 + lVar10);
        uVar43 = -(uint)(fVar38 < SUB164(_local_1ed0,0));
        uVar44 = -(uint)(fVar52 < SUB164(_local_1ed0,4));
        uVar47 = -(uint)(fVar53 < SUB164(_local_1ed0,8));
        uVar49 = -(uint)(fVar35 < SUB164(_local_1ed0,0xc));
        local_1f00._0_4_ = uVar30 & uVar43 | ~uVar43 & local_1f00._0_4_;
        local_1f00._4_4_ = uVar33 & uVar44 | ~uVar44 & local_1f00._4_4_;
        local_1f00._8_4_ = uVar36 & uVar47 | ~uVar47 & local_1f00._8_4_;
        local_1f00._12_4_ = uVar40 & uVar49 | ~uVar49 & local_1f00._12_4_;
        auVar46._0_4_ = ~uVar43 & (uint)SUB164(_local_1ed0,0);
        auVar46._4_4_ = ~uVar44 & (uint)SUB164(_local_1ed0,4);
        auVar46._8_4_ = ~uVar47 & (uint)SUB164(_local_1ed0,8);
        auVar46._12_4_ = ~uVar49 & (uint)SUB164(_local_1ed0,0xc);
        auVar56._0_4_ = uVar43 & (uint)fVar38;
        auVar56._4_4_ = uVar44 & (uint)fVar52;
        auVar56._8_4_ = uVar47 & (uint)fVar53;
        auVar56._12_4_ = uVar49 & (uint)fVar35;
        _local_1ed0 = auVar56 | auVar46;
        pBVar14 = pBVar14 + 0x60;
        uVar30 = uVar30 + __LC20;
        uVar33 = uVar33 + _UNK_001440e4;
        uVar36 = uVar36 + _UNK_001440e8;
        uVar40 = uVar40 + _UNK_001440ec;
      } while (lVar24 != local_1eb0[0] << 4);
      local_1ec0._4_4_ = local_1f00._4_4_;
      local_1ec0._0_4_ = local_1f00._0_4_;
      local_1ec0._8_4_ = local_1f00._8_4_;
      local_1ec0._12_4_ = local_1f00._12_4_;
    }
  }
  if ((local_1e90 != 0.0) && ((float)local_1ed0._0_4_ <= _LC21)) {
    uVar19 = 0;
    fVar35 = (float)local_1ed0._0_4_;
    iVar31 = local_1ec0._0_4_;
    if (local_1ec0._0_4_ != 0) goto LAB_0012efe0;
  }
  iVar31 = 0;
  uVar19 = 0xffffffff;
  fVar35 = _LC8;
LAB_0012efe0:
  if (((fStack_1e8c != 0.0) && ((float)local_1ed0._4_4_ < fVar35)) && (local_1ec0._4_4_ != 0)) {
    uVar19 = 1;
    iVar31 = local_1ec0._4_4_;
    fVar35 = (float)local_1ed0._4_4_;
  }
  if (((fStack_1e88 != 0.0) && (fStack_1ec8 < fVar35)) && (local_1ec0._8_4_ != 0)) {
    uVar19 = 2;
    iVar31 = local_1ec0._8_4_;
    fVar35 = fStack_1ec8;
  }
  *(undefined4 *)(param_1 + 4) = uVar19;
  *(int *)(param_1 + 8) = iVar31;
  *(undefined4 *)(param_1 + 0xc) = 0;
  *(ulong *)(param_1 + 0x10) = local_1eb0[0];
  *(float *)param_1 = fVar35;
  *(float *)(param_1 + 0x20) = local_1ea0;
  *(float *)(param_1 + 0x24) = fStack_1e9c;
  *(float *)(param_1 + 0x28) = fStack_1e98;
  *(float *)(param_1 + 0x2c) = fStack_1e94;
  *(float *)(param_1 + 0x30) = local_1e90;
  *(float *)(param_1 + 0x34) = fStack_1e8c;
  *(float *)(param_1 + 0x38) = fStack_1e88;
  *(uint *)(param_1 + 0x3c) = uStack_1e84;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   32ul>::find(embree::sse2::PrimInfoExtRange&, unsigned long) */

HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
* __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
::find(HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
       *this,PrimInfoExtRange *param_1,ulong param_2)

{
  undefined1 (*pauVar1) [16];
  undefined1 auVar2 [16];
  long lVar3;
  bool bVar4;
  ulong uVar5;
  uint uVar6;
  ulong uVar7;
  undefined1 (*pauVar8) [16];
  char extraout_DL;
  ulong uVar9;
  long lVar10;
  ulong uVar11;
  long lVar12;
  long in_FS_OFFSET;
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  
  uVar5 = *(ulong *)(param_2 + 0x40);
  lVar3 = *(long *)(in_FS_OFFSET + 0x28);
  uVar7 = *(ulong *)(param_2 + 0x48);
  uVar9 = uVar7 - uVar5;
  if (uVar9 < 2) {
    *(undefined8 *)(this + 8) = 0;
    *(undefined8 *)this = 0xffffffff7f800000;
    goto LAB_0012f2bb;
  }
  bVar4 = *(ulong *)(param_2 + 0x50) != uVar7 && uVar9 < 5;
  if (bVar4) {
    uVar9 = uVar5 + 1;
    lVar12 = uVar5 * 0x40;
    uVar11 = uVar9;
    if (uVar5 < uVar7 - 1) {
      do {
        if (uVar9 < uVar7) {
          pauVar8 = (undefined1 (*) [16])(uVar5 * 0x40 + *(long *)param_1);
          lVar10 = *(long *)param_1 + lVar12;
          pauVar1 = pauVar8 + 1;
          auVar2 = *pauVar8;
          uVar5 = uVar9;
          do {
            auVar15 = minps(*pauVar1,*(undefined1 (*) [16])(lVar10 + 0x50));
            auVar13 = maxps(auVar2,*(undefined1 (*) [16])(lVar10 + 0x40));
            auVar14._4_4_ = -(uint)(auVar13._4_4_ <= auVar15._4_4_);
            auVar14._0_4_ = -(uint)(auVar13._0_4_ <= auVar15._0_4_);
            auVar14._8_4_ = -(uint)(auVar13._8_4_ <= auVar15._8_4_);
            auVar14._12_4_ = -(uint)(auVar13._12_4_ <= auVar15._12_4_);
            uVar6 = movmskps((int)pauVar8,auVar14);
            pauVar8 = (undefined1 (*) [16])(ulong)(~uVar6 & 7);
            if ((~uVar6 & 7) == 0) {
              bVar4 = false;
              break;
            }
            uVar5 = uVar5 + 1;
            lVar10 = lVar10 + 0x40;
          } while (uVar5 < uVar7);
        }
        if (uVar11 == uVar7 - 1) goto LAB_0012f2dd;
        uVar5 = uVar11;
        uVar11 = uVar11 + 1;
      } while( true );
    }
    goto LAB_0012f2e2;
  }
  if (*(ulong *)(param_2 + 0x50) != uVar7) goto LAB_0012f320;
LAB_0012f2a1:
  if (0x3ff < uVar9) {
    parallel_object_find((PrimInfoExtRange *)this,(ulong)param_1);
    goto LAB_0012f2bb;
  }
  goto LAB_0012f2f0;
LAB_0012f2dd:
  if (!bVar4) {
LAB_0012f320:
    uVar5 = getProperties((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
                           *)param_1,(PrimInfoExtRange *)param_2);
    if (extraout_DL == '\0') {
      lVar12 = *(long *)(param_2 + 0x50);
      lVar10 = *(long *)(param_2 + 0x48);
      if (lVar12 == lVar10) {
        uVar9 = lVar12 - *(long *)(param_2 + 0x40);
      }
      else {
        uVar7 = lVar12 - lVar10;
        if (uVar5 <= uVar7) {
          openNodesBasedOnExtend
                    ((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
                      *)param_1,(PrimInfoExtRange *)param_2);
          lVar10 = *(long *)(param_2 + 0x48);
          uVar7 = *(long *)(param_2 + 0x50) - lVar10;
        }
        if (uVar7 < *(long *)(param_1 + 0x10) - 1U) {
          *(long *)(param_2 + 0x50) = lVar10;
        }
        uVar9 = lVar10 - *(long *)(param_2 + 0x40);
      }
    }
    else {
      *(long *)(param_2 + 0x50) = *(long *)(param_2 + 0x48);
      uVar9 = *(long *)(param_2 + 0x48) - *(long *)(param_2 + 0x40);
    }
    goto LAB_0012f2a1;
  }
LAB_0012f2e2:
  *(ulong *)(param_2 + 0x50) = uVar7;
LAB_0012f2f0:
  sequential_object_find((PrimInfoExtRange *)this,(ulong)param_1);
LAB_0012f2bb:
  if (lVar3 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator, bool) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(unsigned_long)#8}>
::recurse(ulong *param_1,long *param_2,char param_3)

{
  long *plVar1;
  undefined1 *puVar2;
  int *piVar3;
  PrimInfoExtRange *pPVar4;
  long lVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined4 uVar10;
  long lVar11;
  undefined8 *puVar12;
  float *pfVar13;
  ulong uVar14;
  undefined8 uVar15;
  long lVar16;
  MutexSys *this;
  TaskScheduler *this_00;
  ulong uVar17;
  undefined8 *puVar18;
  ulong uVar19;
  ulong uVar20;
  long lVar21;
  undefined8 *puVar22;
  ulong *puVar23;
  undefined1 *puVar24;
  undefined1 *puVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  ulong *local_a00;
  FastAllocator *local_9b8;
  undefined8 local_9a8;
  undefined8 uStack_9a0;
  undefined8 local_998;
  long lStack_990;
  undefined8 local_988;
  undefined8 uStack_980;
  undefined8 local_978;
  undefined8 uStack_970;
  long local_968;
  long local_960;
  undefined8 local_958;
  undefined8 local_948;
  undefined8 uStack_940;
  undefined8 local_938;
  undefined8 uStack_930;
  undefined4 local_928;
  undefined4 uStack_924;
  undefined4 uStack_920;
  undefined4 uStack_91c;
  undefined4 local_918;
  undefined4 uStack_914;
  undefined4 uStack_910;
  undefined4 uStack_90c;
  long local_908;
  long local_900;
  undefined8 local_8f8;
  ulong local_8e8;
  undefined1 local_8e0;
  undefined4 local_8d8;
  undefined4 uStack_8d4;
  undefined4 uStack_8d0;
  undefined4 uStack_8cc;
  float local_8c8;
  float fStack_8c4;
  float fStack_8c0;
  float fStack_8bc;
  undefined4 local_8b8;
  undefined4 uStack_8b4;
  undefined4 uStack_8b0;
  undefined4 uStack_8ac;
  float local_8a8;
  float fStack_8a4;
  float fStack_8a0;
  float fStack_89c;
  long local_898;
  long lStack_890;
  long local_888;
  ulong local_878;
  ulong local_870;
  undefined8 local_868;
  undefined8 uStack_860;
  undefined8 local_858;
  undefined8 uStack_850;
  undefined8 local_848;
  undefined4 uStack_840;
  undefined4 uStack_83c;
  float local_838;
  float fStack_834;
  float fStack_830;
  float fStack_82c;
  ulong local_828;
  ulong uStack_820;
  ulong local_818;
  float local_808 [16];
  undefined8 local_7c8 [16];
  ulong local_748;
  undefined1 local_740 [8];
  undefined8 local_738;
  undefined8 uStack_730;
  undefined8 local_728;
  long alStack_720 [4];
  undefined8 uStack_700;
  long local_6f8;
  long local_6f0;
  undefined8 local_6e8;
  ulong local_6d8;
  undefined1 local_6d0;
  undefined8 local_6c8;
  undefined8 uStack_6c0;
  undefined8 local_6b8;
  undefined8 uStack_6b0;
  undefined4 local_6a8;
  undefined4 uStack_6a4;
  undefined4 uStack_6a0;
  undefined4 uStack_69c;
  undefined4 local_698;
  undefined4 uStack_694;
  undefined4 uStack_690;
  undefined4 uStack_68c;
  long local_688;
  long local_680;
  undefined8 local_678;
  ulong local_668;
  undefined1 local_660;
  undefined4 local_658;
  undefined4 uStack_654;
  undefined4 uStack_650;
  undefined4 local_648;
  undefined4 uStack_644;
  undefined4 uStack_640;
  long local_618;
  long lStack_610;
  undefined1 local_5f0;
  undefined4 uStack_5e8;
  undefined4 uStack_5e4;
  undefined4 uStack_5e0;
  undefined4 uStack_5d8;
  undefined4 uStack_5d4;
  undefined4 uStack_5d0;
  long local_5a8;
  long local_5a0;
  undefined1 local_580;
  undefined4 uStack_578;
  undefined4 uStack_574;
  undefined4 uStack_570;
  undefined4 uStack_568;
  undefined4 uStack_564;
  undefined4 uStack_560;
  long local_538;
  long local_530;
  undefined1 local_510;
  undefined4 uStack_508;
  undefined4 uStack_504;
  undefined4 uStack_500;
  undefined4 uStack_4f8;
  undefined4 uStack_4f4;
  undefined4 uStack_4f0;
  long local_4c8;
  long local_4c0;
  undefined1 local_4a0;
  undefined4 uStack_498;
  undefined4 uStack_494;
  undefined4 uStack_490;
  undefined4 uStack_488;
  undefined4 uStack_484;
  undefined4 uStack_480;
  long local_458;
  long local_450;
  undefined1 local_430;
  undefined4 uStack_428;
  undefined4 uStack_424;
  undefined4 uStack_420;
  undefined4 uStack_418;
  undefined4 uStack_414;
  undefined4 uStack_410;
  long local_3e8;
  long local_3e0;
  undefined1 local_3c0;
  undefined4 uStack_3b8;
  undefined4 uStack_3b4;
  undefined4 uStack_3b0;
  undefined4 uStack_3a8;
  undefined4 uStack_3a4;
  undefined4 uStack_3a0;
  long local_378;
  long local_370;
  undefined1 local_350;
  undefined4 uStack_348;
  undefined4 uStack_344;
  undefined4 uStack_340;
  undefined4 uStack_338;
  undefined4 uStack_334;
  undefined4 uStack_330;
  long local_308;
  long local_300;
  undefined1 local_2e0;
  undefined4 uStack_2d8;
  undefined4 uStack_2d4;
  undefined4 uStack_2d0;
  undefined4 uStack_2c8;
  undefined4 uStack_2c4;
  undefined4 uStack_2c0;
  long local_298;
  long local_290;
  undefined1 local_270;
  undefined4 uStack_268;
  undefined4 uStack_264;
  undefined4 uStack_260;
  undefined4 uStack_258;
  undefined4 uStack_254;
  undefined4 uStack_250;
  long local_228;
  long local_220;
  undefined1 local_200;
  undefined4 uStack_1f8;
  undefined4 uStack_1f4;
  undefined4 uStack_1f0;
  undefined4 uStack_1e8;
  undefined4 uStack_1e4;
  undefined4 uStack_1e0;
  long local_1b8;
  long local_1b0;
  undefined1 local_190;
  undefined4 uStack_188;
  undefined4 uStack_184;
  undefined4 uStack_180;
  undefined4 uStack_178;
  undefined4 uStack_174;
  undefined4 uStack_170;
  long local_148;
  long local_140;
  undefined1 local_120;
  undefined4 uStack_118;
  undefined4 uStack_114;
  undefined4 uStack_110;
  undefined4 uStack_108;
  undefined4 uStack_104;
  undefined4 uStack_100;
  long local_d8;
  long local_d0;
  undefined1 local_b0;
  undefined4 uStack_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  long local_68;
  long local_60;
  undefined1 auStack_48 [8];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_9b8 = in_stack_00000008;
  if (in_stack_00000008 == (FastAllocator *)0x0) {
    local_9b8 = *(FastAllocator **)param_1[10];
    if (*(long *)(in_FS_OFFSET + lRam000000000012fad3) == 0) {
      this = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
                    /* WARNING: Subroutine does not return */
      embree::MutexSys::MutexSys(this);
    }
    in_stack_00000010 = (ulong *)(*(long *)(in_FS_OFFSET + lRam000000000012fad3) + 0x40);
  }
  if ((param_3 != '\0') && ((ulong)(param_2[0xb] - param_2[10]) <= param_1[6])) {
    embree::Scene::progressMonitor(0.0);
  }
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
  ::find((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
          *)local_808,(PrimInfoExtRange *)param_1[9],(ulong)(param_2 + 2));
  lVar21 = param_2[10];
  uVar20 = param_2[0xb] - lVar21;
  if (((uVar20 <= param_1[3]) || (param_1[1] <= *param_2 + 8U)) ||
     ((uVar20 <= param_1[4] &&
      (fVar27 = *(float *)((long)param_2 + 0x24) - *(float *)((long)param_2 + 0x14),
      fVar27 = (*(float *)(param_2 + 4) - *(float *)(param_2 + 2)) *
               (fVar27 + (*(float *)(param_2 + 5) - *(float *)(param_2 + 3))) +
               fVar27 * (*(float *)(param_2 + 5) - *(float *)(param_2 + 3)),
      (float)((uVar20 - 1) + (1L << ((byte)param_1[2] & 0x3f)) >> ((byte)param_1[2] & 0x3f)) *
      fVar27 * *(float *)((long)param_1 + 0x2c) <=
      fVar27 * *(float *)(param_1 + 5) + *(float *)((long)param_1 + 0x2c) * local_808[0])))) {
    lVar11 = param_2[0xb] * 0x40;
    puVar12 = (undefined8 *)(*(long *)param_1[9] + lVar11);
    puVar22 = (undefined8 *)(*(long *)param_1[9] + lVar21 * 0x40);
    if (puVar12 != puVar22) {
      lVar11 = lVar11 + lVar21 * -0x40;
      uVar20 = lVar11 >> 6;
      if (uVar20 == 0) {
        std::
        __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar22,puVar12,0xfffffffffffffffe);
      }
      else {
        lVar21 = 0x3f;
        if (uVar20 != 0) {
          for (; uVar20 >> lVar21 == 0; lVar21 = lVar21 + -1) {
          }
        }
        std::
        __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar22,puVar12,(long)(int)lVar21 * 2);
        if (0x400 < lVar11) {
          puVar18 = puVar22 + 0x80;
          std::
          __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
                    (puVar22);
          for (; puVar12 != puVar18; puVar18 = puVar18 + 8) {
            fVar27 = *(float *)(puVar18 + 5);
            uVar6 = *puVar18;
            uVar7 = puVar18[1];
            uVar8 = puVar18[2];
            uVar9 = puVar18[3];
            uVar15 = puVar18[4];
            fVar28 = *(float *)(puVar18 + -3);
            puVar22 = puVar18;
            while (fVar27 < fVar28) {
              puVar22[4] = puVar22[-4];
              *puVar22 = puVar22[-8];
              puVar22[1] = puVar22[-7];
              puVar22[2] = puVar22[-6];
              puVar22[3] = puVar22[-5];
              *(undefined4 *)(puVar22 + 5) = *(undefined4 *)(puVar22 + -3);
              fVar28 = *(float *)(puVar22 + -0xb);
              puVar22 = puVar22 + -8;
            }
            puVar22[4] = uVar15;
            *puVar22 = uVar6;
            puVar22[1] = uVar7;
            puVar22[2] = uVar8;
            puVar22[3] = uVar9;
            *(float *)(puVar22 + 5) = fVar27;
          }
          goto LAB_0012f5dc;
        }
      }
      std::
      __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar22,puVar12);
    }
LAB_0012f5dc:
    puVar12 = (undefined8 *)createLargeLeaf(param_1,param_2);
  }
  else {
    HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
    ::split((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
             *)param_1[9],(BinSplit *)local_808,(PrimInfoExtRange *)(param_2 + 2),
            (PrimInfoExtRange *)&local_9a8,(PrimInfoExtRange *)&local_948);
    uVar10 = _LC8;
    fVar27 = _LC6;
    local_740[0] = 0;
    local_6d0 = 0;
    local_738 = local_9a8;
    uStack_730 = uStack_9a0;
    local_748 = *param_2 + 1;
    local_728 = local_998;
    alStack_720[0] = lStack_990;
    local_688 = local_908;
    alStack_720[1] = local_988;
    alStack_720[2] = uStack_980;
    local_680 = local_900;
    alStack_720[3] = local_978;
    uStack_700 = uStack_970;
    local_6c8 = local_948;
    uStack_6c0 = uStack_940;
    local_6f8 = local_968;
    local_6f0 = local_960;
    local_6e8 = local_958;
    local_6b8 = local_938;
    uStack_6b0 = uStack_930;
    local_6a8 = local_928;
    uStack_6a4 = uStack_924;
    uStack_6a0 = uStack_920;
    uStack_69c = uStack_91c;
    local_698 = local_918;
    uStack_694 = uStack_914;
    uStack_690 = uStack_910;
    uStack_68c = uStack_90c;
    local_678 = local_8f8;
    local_6d8 = local_748;
    if (*param_1 < 3) {
      lVar21 = 0xe0;
      uVar20 = 2;
    }
    else {
      uVar20 = 2;
      puVar23 = &local_668;
      do {
        uVar17 = 0;
        uVar19 = 0xffffffffffffffff;
        pfVar13 = (float *)&local_738;
        lVar21 = local_6f0;
        lVar11 = local_6f8;
        fVar28 = _LC6;
        while( true ) {
          if ((param_1[3] < (ulong)(lVar21 - lVar11)) &&
             (fVar26 = (pfVar13[4] - *pfVar13) *
                       ((pfVar13[5] - pfVar13[1]) + (pfVar13[6] - pfVar13[2])) +
                       (pfVar13[5] - pfVar13[1]) * (pfVar13[6] - pfVar13[2]), fVar28 < fVar26)) {
            uVar19 = uVar17;
            fVar28 = fVar26;
          }
          uVar17 = uVar17 + 1;
          if (uVar17 == uVar20) break;
          lVar21 = *(long *)(pfVar13 + 0x2e);
          lVar11 = *(long *)(pfVar13 + 0x2c);
          pfVar13 = pfVar13 + 0x1c;
        }
        if (uVar19 == 0xffffffffffffffff) {
          lVar21 = (long)puVar23 - (long)&local_748;
          goto LAB_0012fb8f;
        }
        uVar20 = uVar20 + 1;
        local_8e8 = *param_2 + 1;
        local_868 = CONCAT44(uVar10,uVar10);
        uStack_860 = (undefined8 *)CONCAT44(uVar10,uVar10);
        local_858 = (ulong *)CONCAT44(fVar27,fVar27);
        uStack_850 = (ulong *)CONCAT44(fVar27,fVar27);
        pPVar4 = (PrimInfoExtRange *)(&local_748 + uVar19 * 0xe + 2);
        local_848 = (TaskGroupContext *)CONCAT44(uVar10,uVar10);
        local_8e0 = 0;
        local_898 = 0;
        lStack_890 = 0;
        local_888 = 0;
        local_870 = local_870 & 0xffffffffffffff00;
        local_828 = 0;
        uStack_820 = 0;
        local_818 = 0;
        local_8d8 = uVar10;
        uStack_8d4 = uVar10;
        uStack_8d0 = uVar10;
        uStack_8cc = uVar10;
        local_8c8 = fVar27;
        fStack_8c4 = fVar27;
        fStack_8c0 = fVar27;
        fStack_8bc = fVar27;
        local_8b8 = uVar10;
        uStack_8b4 = uVar10;
        uStack_8b0 = uVar10;
        uStack_8ac = uVar10;
        local_8a8 = fVar27;
        fStack_8a4 = fVar27;
        fStack_8a0 = fVar27;
        fStack_89c = fVar27;
        local_878 = local_8e8;
        uStack_840 = uVar10;
        uStack_83c = uVar10;
        local_838 = fVar27;
        fStack_834 = fVar27;
        fStack_830 = fVar27;
        fStack_82c = fVar27;
        HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
        ::find((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
                *)local_7c8,(PrimInfoExtRange *)param_1[9],(ulong)pPVar4);
        HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
        ::split((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>
                 *)param_1[9],(BinSplit *)local_7c8,pPVar4,(PrimInfoExtRange *)&local_8d8,
                (PrimInfoExtRange *)&local_868);
        *(ulong *)(local_740 + uVar19 * 0x70 + -8) = local_8e8;
        local_740[uVar19 * 0x70] = local_8e0;
        (&local_738)[uVar19 * 0xe] = CONCAT44(uStack_8d4,local_8d8);
        (&uStack_730)[uVar19 * 0xe] = CONCAT44(uStack_8cc,uStack_8d0);
        alStack_720[uVar19 * 0xe + 7] = local_888;
        (&local_728)[uVar19 * 0xe] = CONCAT44(fStack_8c4,local_8c8);
        alStack_720[uVar19 * 0xe] = CONCAT44(fStack_8bc,fStack_8c0);
        alStack_720[uVar19 * 0xe + 1] = CONCAT44(uStack_8b4,local_8b8);
        alStack_720[uVar19 * 0xe + 2] = CONCAT44(uStack_8ac,uStack_8b0);
        alStack_720[uVar19 * 0xe + 3] = CONCAT44(fStack_8a4,local_8a8);
        alStack_720[uVar19 * 0xe + 4] = CONCAT44(fStack_89c,fStack_8a0);
        alStack_720[uVar19 * 0xe + 5] = local_898;
        alStack_720[uVar19 * 0xe + 6] = lStack_890;
        *puVar23 = local_878;
        puVar23[2] = local_868;
        puVar23[3] = (ulong)uStack_860;
        *(undefined1 *)(puVar23 + 1) = (undefined1)local_870;
        puVar23[4] = (ulong)local_858;
        puVar23[5] = (ulong)uStack_850;
        *(undefined4 *)(puVar23 + 6) = (undefined4)local_848;
        *(undefined4 *)((long)puVar23 + 0x34) = local_848._4_4_;
        *(undefined4 *)(puVar23 + 7) = uStack_840;
        *(undefined4 *)((long)puVar23 + 0x3c) = uStack_83c;
        puVar23[10] = local_828;
        puVar23[0xb] = uStack_820;
        *(float *)(puVar23 + 8) = local_838;
        *(float *)((long)puVar23 + 0x44) = fStack_834;
        *(float *)(puVar23 + 9) = fStack_830;
        *(float *)((long)puVar23 + 0x4c) = fStack_82c;
        puVar23[0xc] = local_818;
        puVar23 = puVar23 + 0xe;
      } while (uVar20 < *param_1);
      lVar21 = uVar20 * 0x70;
    }
LAB_0012fb8f:
    local_a00 = &local_748;
    uVar19 = param_1[7];
    if (uVar19 < (ulong)(param_2[0xb] - param_2[10])) {
      local_740[0] = (ulong)(local_6f0 - local_6f8) <= uVar19;
      local_6d0 = (ulong)(local_680 - local_688) <= uVar19;
      if (((((uVar20 != 2) && (local_660 = (ulong)(lStack_610 - local_618) <= uVar19, uVar20 != 3))
           && (local_5f0 = (ulong)(local_5a0 - local_5a8) <= uVar19, uVar20 != 4)) &&
          ((((local_580 = (ulong)(local_530 - local_538) <= uVar19, uVar20 != 5 &&
             (local_510 = (ulong)(local_4c0 - local_4c8) <= uVar19, uVar20 != 6)) &&
            ((local_4a0 = (ulong)(local_450 - local_458) <= uVar19, uVar20 != 7 &&
             ((local_430 = (ulong)(local_3e0 - local_3e8) <= uVar19, uVar20 != 8 &&
              (local_3c0 = (ulong)(local_370 - local_378) <= uVar19, uVar20 != 9)))))) &&
           (local_350 = (ulong)(local_300 - local_308) <= uVar19, uVar20 != 10)))) &&
         ((((local_2e0 = (ulong)(local_290 - local_298) <= uVar19, uVar20 != 0xb &&
            (local_270 = (ulong)(local_220 - local_228) <= uVar19, uVar20 != 0xc)) &&
           (local_200 = (ulong)(local_1b0 - local_1b8) <= uVar19, uVar20 != 0xd)) &&
          ((local_190 = (ulong)(local_140 - local_148) <= uVar19, uVar20 != 0xe &&
           (local_120 = (ulong)(local_d0 - local_d8) <= uVar19, uVar20 == 0x10)))))) {
        local_b0 = (ulong)(local_60 - local_68) <= uVar19;
      }
    }
    if (lVar21 != 0) {
      uVar19 = (lVar21 >> 4) * 0x6db6db6db6db6db7;
      puVar2 = (undefined1 *)((long)local_a00 + lVar21);
      if (uVar19 == 0) {
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                  (local_a00,puVar2,0xfffffffffffffffe);
      }
      else {
        lVar11 = 0x3f;
        if (uVar19 != 0) {
          for (; uVar19 >> lVar11 == 0; lVar11 = lVar11 + -1) {
          }
        }
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                  (local_a00,puVar2,(long)(int)lVar11 * 2);
        if (0x700 < lVar21) {
          std::
          __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                    (local_a00,auStack_48);
          puVar24 = auStack_48;
          do {
            puVar25 = puVar24 + 0x70;
            std::
            __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                      (puVar24);
            puVar24 = puVar25;
          } while (puVar2 != puVar25);
          goto LAB_0012fc55;
        }
      }
      std::
      __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                (local_a00,puVar2);
    }
LAB_0012fc55:
    local_8e8 = 0x80;
    uVar19 = *in_stack_00000010;
    if (local_9b8 != *(FastAllocator **)(uVar19 + 8)) {
      embree::MutexSys::lock();
      if (*(long *)(uVar19 + 8) != 0) {
        LOCK();
        plVar1 = (long *)(*(long *)(uVar19 + 8) + 0x118);
        *plVar1 = *plVar1 + *(long *)(uVar19 + 0xa8) + *(long *)(uVar19 + 0x68);
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar19 + 8) + 0x120);
        *plVar1 = *plVar1 + (((*(long *)(uVar19 + 0x98) + *(long *)(uVar19 + 0x58)) -
                             *(long *)(uVar19 + 0x50)) - *(long *)(uVar19 + 0x90));
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar19 + 8) + 0x128);
        *plVar1 = *plVar1 + *(long *)(uVar19 + 0xb0) + *(long *)(uVar19 + 0x70);
        UNLOCK();
      }
      *(undefined8 *)(uVar19 + 0x48) = 0;
      *(undefined8 *)(uVar19 + 0x58) = 0;
      *(undefined8 *)(uVar19 + 0x50) = 0;
      *(undefined8 *)(uVar19 + 0x68) = 0;
      *(undefined8 *)(uVar19 + 0x70) = 0;
      *(undefined8 *)(uVar19 + 0x60) = 0;
      if (local_9b8 == (FastAllocator *)0x0) {
        *(undefined8 *)(uVar19 + 0x88) = 0;
        uVar15 = 0;
        *(undefined8 *)(uVar19 + 0x98) = 0;
        *(undefined8 *)(uVar19 + 0x90) = 0;
        *(undefined8 *)(uVar19 + 0xa8) = 0;
        *(undefined8 *)(uVar19 + 0xb0) = 0;
      }
      else {
        uVar15 = *(undefined8 *)(local_9b8 + 0x10);
        *(undefined8 *)(uVar19 + 0x88) = 0;
        *(undefined8 *)(uVar19 + 0x98) = 0;
        *(undefined8 *)(uVar19 + 0x60) = uVar15;
        *(undefined8 *)(uVar19 + 0x90) = 0;
        *(undefined8 *)(uVar19 + 0xa8) = 0;
        *(undefined8 *)(uVar19 + 0xb0) = 0;
        *(undefined8 *)(uVar19 + 0xa0) = 0;
        uVar15 = *(undefined8 *)(local_9b8 + 0x10);
      }
      *(undefined8 *)(uVar19 + 0xa0) = uVar15;
      LOCK();
      *(FastAllocator **)(uVar19 + 8) = local_9b8;
      UNLOCK();
      local_878 = uVar19;
      embree::MutexSys::lock();
      puVar23 = *(ulong **)(local_9b8 + 0x138);
      if (puVar23 == *(ulong **)(local_9b8 + 0x140)) {
        std::
        vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
        ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                  ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                    *)(local_9b8 + 0x130),puVar23,&local_878);
      }
      else {
        *puVar23 = uVar19;
        *(long *)(local_9b8 + 0x138) = *(long *)(local_9b8 + 0x138) + 8;
      }
      embree::MutexSys::unlock();
      embree::MutexSys::unlock();
    }
    uVar17 = in_stack_00000010[2];
    in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
    uVar14 = (ulong)(-(int)uVar17 & 0xf);
    uVar19 = uVar17 + 0x80 + uVar14;
    in_stack_00000010[2] = uVar19;
    if (in_stack_00000010[3] < uVar19) {
      in_stack_00000010[2] = uVar17;
      if (in_stack_00000010[4] < 0x200) {
        puVar12 = (undefined8 *)FastAllocator::malloc(local_9b8,&local_8e8,0x40,false);
      }
      else {
        local_878 = in_stack_00000010[4];
        puVar12 = (undefined8 *)FastAllocator::malloc(local_9b8,&local_878,0x40,true);
        in_stack_00000010[1] = (ulong)puVar12;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[3] = local_878;
        if (local_878 < 0x80) {
          local_878 = in_stack_00000010[4];
          in_stack_00000010[2] = 0;
          puVar12 = (undefined8 *)FastAllocator::malloc(local_9b8,&local_878,0x40,false);
          in_stack_00000010[1] = (ulong)puVar12;
          in_stack_00000010[6] =
               (in_stack_00000010[3] + in_stack_00000010[6]) - in_stack_00000010[2];
          in_stack_00000010[2] = 0x80;
          in_stack_00000010[3] = local_878;
          if (local_878 < 0x80) {
            puVar12 = (undefined8 *)0x0;
            in_stack_00000010[2] = 0;
          }
        }
      }
    }
    else {
      in_stack_00000010[6] = in_stack_00000010[6] + uVar14;
      puVar12 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar19);
    }
    *puVar12 = 8;
    puVar12[1] = 8;
    puVar12[2] = 8;
    *(undefined4 *)(puVar12 + 4) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x24) = uVar10;
    *(undefined4 *)(puVar12 + 5) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x2c) = uVar10;
    puVar12[3] = 8;
    *(undefined4 *)(puVar12 + 8) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x44) = uVar10;
    *(undefined4 *)(puVar12 + 9) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x4c) = uVar10;
    *(float *)(puVar12 + 4) = (float)local_738;
    *(undefined4 *)(puVar12 + 0xc) = uVar10;
    *(undefined4 *)((long)puVar12 + 100) = uVar10;
    *(undefined4 *)(puVar12 + 0xd) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x6c) = uVar10;
    *(undefined4 *)(puVar12 + 8) = local_738._4_4_;
    *(float *)(puVar12 + 6) = fVar27;
    *(float *)((long)puVar12 + 0x34) = fVar27;
    *(float *)(puVar12 + 7) = fVar27;
    *(float *)((long)puVar12 + 0x3c) = fVar27;
    *(float *)(puVar12 + 0xe) = fVar27;
    *(float *)((long)puVar12 + 0x74) = fVar27;
    *(float *)(puVar12 + 0xf) = fVar27;
    *(float *)((long)puVar12 + 0x7c) = fVar27;
    *(float *)(puVar12 + 10) = fVar27;
    *(float *)((long)puVar12 + 0x54) = fVar27;
    *(float *)(puVar12 + 0xb) = fVar27;
    *(float *)((long)puVar12 + 0x5c) = fVar27;
    *(undefined4 *)(puVar12 + 0xc) = (undefined4)uStack_730;
    *(undefined4 *)(puVar12 + 6) = (undefined4)local_728;
    *(undefined4 *)(puVar12 + 10) = local_728._4_4_;
    *(undefined4 *)(puVar12 + 0xe) = (undefined4)alStack_720[0];
    *(undefined4 *)((long)puVar12 + 100) = (undefined4)uStack_6c0;
    *(undefined4 *)((long)puVar12 + 0x44) = local_6c8._4_4_;
    *(undefined4 *)((long)puVar12 + 0x24) = (undefined4)local_6c8;
    *(undefined4 *)((long)puVar12 + 0x34) = (undefined4)local_6b8;
    *(undefined4 *)((long)puVar12 + 0x54) = local_6b8._4_4_;
    *(undefined4 *)((long)puVar12 + 0x74) = (undefined4)uStack_6b0;
    if (uVar20 != 2) {
      *(undefined4 *)(puVar12 + 9) = uStack_654;
      *(undefined4 *)(puVar12 + 0xd) = uStack_650;
      *(undefined4 *)(puVar12 + 5) = local_658;
      *(undefined4 *)(puVar12 + 7) = local_648;
      *(undefined4 *)(puVar12 + 0xb) = uStack_644;
      *(undefined4 *)(puVar12 + 0xf) = uStack_640;
      if (uVar20 != 3) {
        *(undefined4 *)((long)puVar12 + 0x4c) = uStack_5e4;
        *(undefined4 *)((long)puVar12 + 0x6c) = uStack_5e0;
        *(undefined4 *)((long)puVar12 + 0x2c) = uStack_5e8;
        *(undefined4 *)((long)puVar12 + 0x3c) = uStack_5d8;
        *(undefined4 *)((long)puVar12 + 0x5c) = uStack_5d4;
        *(undefined4 *)((long)puVar12 + 0x7c) = uStack_5d0;
        if (uVar20 != 4) {
          *(undefined4 *)(puVar12 + 10) = uStack_574;
          *(undefined4 *)(puVar12 + 0xe) = uStack_570;
          *(undefined4 *)(puVar12 + 6) = uStack_578;
          *(undefined4 *)(puVar12 + 8) = uStack_568;
          *(undefined4 *)(puVar12 + 0xc) = uStack_564;
          *(undefined4 *)(puVar12 + 0x10) = uStack_560;
          if (uVar20 != 5) {
            *(undefined4 *)((long)puVar12 + 0x54) = uStack_504;
            *(undefined4 *)((long)puVar12 + 0x74) = uStack_500;
            *(undefined4 *)((long)puVar12 + 0x34) = uStack_508;
            *(undefined4 *)((long)puVar12 + 0x44) = uStack_4f8;
            *(undefined4 *)((long)puVar12 + 100) = uStack_4f4;
            *(undefined4 *)((long)puVar12 + 0x84) = uStack_4f0;
            if (uVar20 != 6) {
              *(undefined4 *)(puVar12 + 0xb) = uStack_494;
              *(undefined4 *)(puVar12 + 0xf) = uStack_490;
              *(undefined4 *)(puVar12 + 7) = uStack_498;
              *(undefined4 *)(puVar12 + 9) = uStack_488;
              *(undefined4 *)(puVar12 + 0xd) = uStack_484;
              *(undefined4 *)(puVar12 + 0x11) = uStack_480;
              if (uVar20 != 7) {
                *(undefined4 *)((long)puVar12 + 0x5c) = uStack_424;
                *(undefined4 *)((long)puVar12 + 0x7c) = uStack_420;
                *(undefined4 *)((long)puVar12 + 0x3c) = uStack_428;
                *(undefined4 *)((long)puVar12 + 0x4c) = uStack_418;
                *(undefined4 *)((long)puVar12 + 0x6c) = uStack_414;
                *(undefined4 *)((long)puVar12 + 0x8c) = uStack_410;
                if (uVar20 != 8) {
                  *(undefined4 *)(puVar12 + 0xc) = uStack_3b4;
                  *(undefined4 *)(puVar12 + 0x10) = uStack_3b0;
                  *(undefined4 *)(puVar12 + 8) = uStack_3b8;
                  *(undefined4 *)(puVar12 + 10) = uStack_3a8;
                  *(undefined4 *)(puVar12 + 0xe) = uStack_3a4;
                  *(undefined4 *)(puVar12 + 0x12) = uStack_3a0;
                  if (uVar20 != 9) {
                    *(undefined4 *)((long)puVar12 + 100) = uStack_344;
                    *(undefined4 *)((long)puVar12 + 0x84) = uStack_340;
                    *(undefined4 *)((long)puVar12 + 0x44) = uStack_348;
                    *(undefined4 *)((long)puVar12 + 0x54) = uStack_338;
                    *(undefined4 *)((long)puVar12 + 0x74) = uStack_334;
                    *(undefined4 *)((long)puVar12 + 0x94) = uStack_330;
                    if (uVar20 != 10) {
                      *(undefined4 *)(puVar12 + 0xd) = uStack_2d4;
                      *(undefined4 *)(puVar12 + 0x11) = uStack_2d0;
                      *(undefined4 *)(puVar12 + 9) = uStack_2d8;
                      *(undefined4 *)(puVar12 + 0xb) = uStack_2c8;
                      *(undefined4 *)(puVar12 + 0xf) = uStack_2c4;
                      *(undefined4 *)(puVar12 + 0x13) = uStack_2c0;
                      if (uVar20 != 0xb) {
                        *(undefined4 *)((long)puVar12 + 0x6c) = uStack_264;
                        *(undefined4 *)((long)puVar12 + 0x8c) = uStack_260;
                        *(undefined4 *)((long)puVar12 + 0x4c) = uStack_268;
                        *(undefined4 *)((long)puVar12 + 0x5c) = uStack_258;
                        *(undefined4 *)((long)puVar12 + 0x7c) = uStack_254;
                        *(undefined4 *)((long)puVar12 + 0x9c) = uStack_250;
                        if (uVar20 != 0xc) {
                          *(undefined4 *)(puVar12 + 0xe) = uStack_1f4;
                          *(undefined4 *)(puVar12 + 0x12) = uStack_1f0;
                          *(undefined4 *)(puVar12 + 10) = uStack_1f8;
                          *(undefined4 *)(puVar12 + 0xc) = uStack_1e8;
                          *(undefined4 *)(puVar12 + 0x10) = uStack_1e4;
                          *(undefined4 *)(puVar12 + 0x14) = uStack_1e0;
                          if (uVar20 != 0xd) {
                            *(undefined4 *)((long)puVar12 + 0x74) = uStack_184;
                            *(undefined4 *)((long)puVar12 + 0x94) = uStack_180;
                            *(undefined4 *)((long)puVar12 + 0x54) = uStack_188;
                            *(undefined4 *)((long)puVar12 + 100) = uStack_178;
                            *(undefined4 *)((long)puVar12 + 0x84) = uStack_174;
                            *(undefined4 *)((long)puVar12 + 0xa4) = uStack_170;
                            if (uVar20 != 0xe) {
                              *(undefined4 *)(puVar12 + 0xf) = uStack_114;
                              *(undefined4 *)(puVar12 + 0x13) = uStack_110;
                              *(undefined4 *)(puVar12 + 0xb) = uStack_118;
                              *(undefined4 *)(puVar12 + 0xd) = uStack_108;
                              *(undefined4 *)(puVar12 + 0x11) = uStack_104;
                              *(undefined4 *)(puVar12 + 0x15) = uStack_100;
                              if (uVar20 == 0x10) {
                                *(undefined4 *)((long)puVar12 + 0x7c) = uStack_a4;
                                *(undefined4 *)((long)puVar12 + 0x9c) = uStack_a0;
                                *(undefined4 *)((long)puVar12 + 0x5c) = uStack_a8;
                                *(undefined4 *)((long)puVar12 + 0x6c) = uStack_98;
                                *(undefined4 *)((long)puVar12 + 0x8c) = uStack_94;
                                *(undefined4 *)((long)puVar12 + 0xac) = uStack_90;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    uVar19 = 0;
    if (param_1[6] < (ulong)(param_2[0xb] - param_2[10])) {
      uStack_860 = local_7c8;
      local_8e8 = 0;
      local_870 = 0;
      local_868 = 1;
      local_858 = local_a00;
      local_878 = uVar20;
      uStack_850 = param_1;
      local_848 = (TaskGroupContext *)&local_8e8;
      lVar21 = embree::TaskScheduler::thread();
      if (lVar21 == 0) {
        this_00 = (TaskScheduler *)embree::TaskScheduler::instance();
        TaskScheduler::
        spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embre___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                  (this_00,(_lambda___1_ *)&local_878,(TaskGroupContext *)&local_8e8,uVar20,true);
      }
      else {
        if (0xfff < *(ulong *)(lVar21 + 0x40080)) {
LAB_00130d3b:
                    /* WARNING: Subroutine does not return */
          abort();
        }
        lVar11 = *(long *)(lVar21 + 0xc00c0);
        uVar19 = lVar11 + 0x40 + (ulong)(-(int)lVar11 & 0x3f);
        if (0x80000 < uVar19) goto LAB_00130d3b;
        *(ulong *)(lVar21 + 0xc00c0) = uVar19;
        puVar22 = (undefined8 *)(lVar21 + 0x40080 + uVar19);
        *puVar22 = &PTR_execute_001439b0;
        puVar22[1] = local_878;
        puVar22[2] = local_870;
        puVar22[3] = local_868;
        puVar22[4] = uStack_860;
        puVar22[5] = local_858;
        puVar22[6] = uStack_850;
        puVar22[7] = local_848;
        lVar16 = *(long *)(lVar21 + 0x40080) * 0x40;
        piVar3 = (int *)(lVar21 + 0x40 + lVar16);
        lVar5 = *(long *)(lVar21 + 0xc0100);
        *(undefined4 *)(lVar21 + 0x44 + lVar16) = 1;
        *(undefined1 *)(lVar21 + 0x48 + lVar16) = 1;
        lVar16 = lVar16 + lVar21;
        *(undefined8 **)(lVar16 + 0x50) = puVar22;
        *(long *)(lVar16 + 0x58) = lVar5;
        *(TaskGroupContext **)(lVar16 + 0x60) = (TaskGroupContext *)&local_8e8;
        *(long *)(lVar16 + 0x68) = lVar11;
        *(ulong *)(lVar16 + 0x70) = uVar20;
        if (lVar5 != 0) {
          LOCK();
          *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
          UNLOCK();
        }
        LOCK();
        if (*piVar3 == 0) {
          *piVar3 = 1;
        }
        UNLOCK();
        LOCK();
        *(long *)(lVar21 + 0x40080) = *(long *)(lVar21 + 0x40080) + 1;
        UNLOCK();
        if (*(long *)(lVar21 + 0x40080) - 1U <= *(ulong *)(lVar21 + 0x40040)) {
          LOCK();
          *(long *)(lVar21 + 0x40040) = *(long *)(lVar21 + 0x40080) + -1;
          UNLOCK();
        }
      }
      embree::TaskScheduler::wait();
      if (local_8e8 != 0) {
        local_878 = local_8e8;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_878);
        goto LAB_00130d36;
      }
      *puVar12 = local_7c8[0];
      puVar12[1] = local_7c8[1];
      if (uVar20 != 2) {
        puVar12[2] = local_7c8[2];
        uVar19 = uVar20;
        goto joined_r0x001307a3;
      }
    }
    else {
      do {
        uVar15 = recurse(param_1,local_a00,0);
        local_7c8[uVar19] = uVar15;
        uVar19 = uVar19 + 1;
        local_a00 = local_a00 + 0xe;
      } while (uVar19 != uVar20);
      *puVar12 = local_7c8[0];
      puVar12[1] = local_7c8[1];
      if (uVar19 != 2) {
        puVar12[2] = local_7c8[2];
joined_r0x001307a3:
        if (uVar19 != 3) {
          puVar12[3] = local_7c8[3];
        }
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar12;
  }
LAB_00130d36:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::NodeRefPtr<4> embree::sse2::GeneralBVHBuilder::build<embree::NodeRefPtr<4>,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::build()::{lambda(unsigned
   long)#8}>(embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef*,
   embree::sse2::PrimInfoExtRange const&, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6} const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::build()::{lambda(unsigned long)#8} const&,
   embree::sse2::GeneralBVHBuilder::Settings const&) */

void embree::sse2::GeneralBVHBuilder::
     build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)_6_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(unsigned_long)_8_>
               (undefined8 param_1,undefined8 param_2,undefined4 *param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,ulong *param_7)

{
  long in_FS_OFFSET;
  undefined1 local_132;
  undefined1 local_131;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 uStack_120;
  undefined8 local_118;
  undefined8 local_108;
  undefined1 local_100;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  ulong local_98;
  ulong uStack_90;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  ulong uStack_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 *local_48;
  undefined1 *local_40;
  undefined1 *local_38;
  undefined8 local_30;
  undefined8 *local_28;
  undefined8 *local_20;
  undefined8 local_18;
  long local_10;
  
  local_98 = *param_7;
  uStack_90 = param_7[1];
  local_88 = param_7[2];
  uStack_80 = param_7[3];
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = param_7[4];
  uStack_70 = param_7[5];
  local_68 = param_7[6];
  uStack_60 = param_7[7];
  local_48 = &local_130;
  local_40 = &local_131;
  local_38 = &local_132;
  local_20 = &local_108;
  local_28 = &local_128;
  local_130 = param_4;
  local_58 = param_2;
  local_50 = param_1;
  local_30 = param_5;
  local_18 = param_6;
  if (0x10 < *param_7) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  local_b8 = *(undefined8 *)(param_3 + 0x10);
  local_f8 = *param_3;
  uStack_f4 = param_3[1];
  uStack_f0 = param_3[2];
  uStack_ec = param_3[3];
  local_100 = 0;
  local_e8 = param_3[4];
  uStack_e4 = param_3[5];
  uStack_e0 = param_3[6];
  uStack_dc = param_3[7];
  local_d8 = param_3[8];
  uStack_d4 = param_3[9];
  uStack_d0 = param_3[10];
  uStack_cc = param_3[0xb];
  local_108 = 1;
  local_c8 = param_3[0xc];
  uStack_c4 = param_3[0xd];
  uStack_c0 = param_3[0xe];
  uStack_bc = param_3[0xf];
  local_b0 = *(undefined8 *)(param_3 + 0x12);
  local_a8 = *(undefined8 *)(param_3 + 0x14);
  local_128 = 0;
  uStack_120 = 0;
  local_118 = 0;
  BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(unsigned_long)#8}>
  ::recurse(&local_98,local_20,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::build() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *this)

{
  _lambda_embree__range<unsigned_long>__1_ *p_Var1;
  int *piVar2;
  undefined4 uVar3;
  TaskGroupContext *pTVar4;
  undefined1 (*pauVar5) [16];
  int iVar6;
  TaskGroupContext *pTVar7;
  long lVar8;
  long lVar9;
  ulong uVar10;
  ulong uVar11;
  long *plVar12;
  undefined8 *puVar13;
  undefined8 *puVar14;
  long lVar15;
  undefined8 uVar16;
  long *plVar17;
  TaskScheduler *pTVar18;
  uint uVar19;
  ulong uVar20;
  _lambda_embree__range<unsigned_long>__1_ *p_Var21;
  uint uVar22;
  long *plVar23;
  ulong uVar24;
  undefined8 *puVar25;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *pBVar26;
  long *plVar27;
  _lambda_embree__range<unsigned_long>__1_ *in_R9;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *pBVar28;
  long in_FS_OFFSET;
  float fVar29;
  double dVar30;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  string *psVar38;
  plus *ppVar39;
  long lVar40;
  plus *ppVar41;
  _lambda_embree__range<unsigned_long>__1_ *local_220;
  undefined1 uStack_1c9;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *local_1c8;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *local_1c0;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *local_1b8;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> **ppBStack_1b0;
  undefined8 uStack_1a8;
  TaskGroupContext *local_198;
  TaskGroupContext *pTStack_190;
  plus *local_188;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *pBStack_180;
  TaskGroupContext *local_178;
  undefined8 local_170;
  undefined8 uStack_168;
  undefined8 uStack_160;
  undefined1 local_158 [16];
  undefined1 local_148 [16];
  undefined1 local_138 [16];
  undefined1 local_128 [16];
  long local_118;
  long local_110;
  undefined1 local_108 [12];
  undefined4 uStack_fc;
  undefined1 local_f8 [12];
  undefined4 uStack_ec;
  undefined1 local_e8 [16];
  undefined1 local_d8 [16];
  undefined8 local_c8;
  long local_c0;
  ulong uStack_b8;
  long *local_a8 [2];
  long local_98 [2];
  long *local_88;
  long local_80;
  long local_78 [2];
  _lambda_embree__range<unsigned_long>__1_ *local_68;
  undefined8 local_60;
  long local_58 [5];
  
  local_58[3] = *(long *)(in_FS_OFFSET + 0x28);
  lVar8 = *(long *)(this + 0x28);
  pTVar4 = *(TaskGroupContext **)(*(long *)(this + 0x30) + 0x1d0);
  pTVar7 = (TaskGroupContext *)(*(long *)(lVar8 + 0x208) - *(long *)(lVar8 + 0x200) >> 3);
  if (pTVar4 < pTVar7) {
    local_1c8 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *)0x0;
    local_188 = (plus *)0x1;
    local_198 = pTVar7;
    pTStack_190 = pTVar4;
    pBStack_180 = this;
    local_178 = (TaskGroupContext *)&local_1c8;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)&local_198,(TaskGroupContext *)&local_1c8,
                 (long)pTVar7 - (long)pTVar4,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_00132647;
      lVar40 = *(long *)(lVar8 + 0xc00c0);
      uVar10 = lVar40 + 0x30 + (ulong)(-(int)lVar40 & 0x3f);
      if (0x80000 < uVar10) goto LAB_00132647;
      *(ulong *)(lVar8 + 0xc00c0) = uVar10;
      puVar13 = (undefined8 *)(lVar8 + 0x40090 + uVar10);
      *puVar13 = &PTR_execute_00143878;
      puVar13[1] = local_198;
      puVar13[2] = pTStack_190;
      puVar13[3] = local_188;
      puVar13[4] = pBStack_180;
      puVar13[5] = local_178;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)(lVar8 + 0x40 + lVar9);
      lVar15 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar13;
      *(long *)(lVar9 + 0x58) = lVar15;
      *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_1c8;
      *(long *)(lVar9 + 0x68) = lVar40;
      *(long *)(lVar9 + 0x70) = (long)pTVar7 - (long)pTVar4;
      if (lVar15 != 0) {
        LOCK();
        *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)in_R9 == 0) {
        *(int *)in_R9 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    local_108._0_8_ = local_1c8;
    if (local_1c8 == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *)0x0) {
      lVar8 = *(long *)(this + 0x28);
      goto LAB_001310bd;
    }
  }
  else {
LAB_001310bd:
    uVar24 = 0;
    FastAllocator::reset((FastAllocator *)(lVar8 + 0x78));
    uVar10 = *(ulong *)(this + 0x98);
    lVar8 = *(long *)(this + 0x30);
    if ((uVar10 & 0x100000) != 0) {
      uVar24 = *(ulong *)(lVar8 + 0x288);
    }
    if ((uVar10 & 0x200000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x298);
    }
    if ((uVar10 & 0xf) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2b8);
    }
    if ((uVar10 & 0x77770) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2a8);
    }
    if ((uVar10 & 0xe000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x338);
    }
    if ((uVar10 & 0x800000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2c8);
    }
    if ((uVar10 & 0x20000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2d8);
    }
    if ((uVar10 & 0x40000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2e8);
    }
    if ((uVar10 & 0x80000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2f8);
    }
    if ((uVar10 & 0x1000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x308);
    }
    if ((uVar10 & 0x400000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x318);
    }
    lVar8 = *(long *)(this + 0x28);
    plVar17 = (long *)(lVar8 + 0x130);
    plVar12 = (long *)(lVar8 + 0x170);
    if (uVar24 == 0) {
      *(undefined8 *)(this + 0x70) = 0;
      local_108._4_4_ = _LC8;
      local_108._0_4_ = _LC8;
      local_108._8_4_ = _LC8;
      uStack_fc = _LC8;
      local_e8._4_4_ = _LC8;
      local_e8._0_4_ = _LC8;
      local_e8._8_4_ = _LC8;
      local_e8._12_4_ = _LC8;
      local_f8._4_4_ = _LC6;
      local_f8._0_4_ = _LC6;
      local_f8._8_4_ = _LC6;
      uStack_ec = _LC6;
      local_d8._4_4_ = _LC6;
      local_d8._0_4_ = _LC6;
      local_d8._8_4_ = _LC6;
      local_d8._12_4_ = _LC6;
      embree::BVHN<4>::set(lVar8,8,local_108,0);
      if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
        return;
      }
      goto LAB_00132636;
    }
    do {
      while (*plVar17 != 0) {
        lVar40 = *(long *)(*plVar17 + 0x18);
        *(long *)(*plVar17 + 0x18) = *plVar12;
        LOCK();
        *plVar12 = *plVar17;
        UNLOCK();
        LOCK();
        *plVar17 = lVar40;
        UNLOCK();
      }
      LOCK();
      *plVar17 = 0;
      UNLOCK();
      plVar17 = plVar17 + 1;
    } while (plVar12 != plVar17);
    if ((*(long *)(lVar8 + 0x170) == 0) && (*(long *)(lVar8 + 0x178) == 0)) {
      uVar10 = uVar24 + 3 >> 2;
      dVar30 = (double)uVar10 * __LC30 * __LC31;
      if (_LC32 <= dVar30) {
        uVar20 = (long)(dVar30 - _LC32) ^ 0x8000000000000000;
      }
      else {
        uVar20 = (ulong)dVar30;
      }
      *(undefined1 *)(lVar8 + 0x182) = 0;
      in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)0x3;
      uVar20 = uVar20 + ((uVar10 << 8) >> 2);
      *(ulong *)(lVar8 + 0x90) = uVar20;
      uVar11 = uVar20 / 0x14 + 0x7f & 0xffffffffffffff80;
      uVar10 = 0x1fffc0;
      if (uVar11 < 0x1fffc1) {
        uVar10 = uVar11;
      }
      if (uVar10 < 0x400) {
        uVar10 = 0x400;
      }
      *(ulong *)(lVar8 + 0xa0) = uVar10;
      *(ulong *)(lVar8 + 0x98) = uVar10;
      if (uVar20 <= uVar10 * 0x50) {
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)(ulong)(uVar10 * 0x28 < uVar20);
      }
      *(_lambda_embree__range<unsigned_long>__1_ **)(lVar8 + 0x80) = in_R9;
      if (uVar10 * 0xa0 < uVar20) {
        *(undefined8 *)(lVar8 + 0x80) = 7;
        if (uVar10 * 0x140 < uVar20) {
LAB_001312cd:
          *(undefined8 *)(lVar8 + 0x88) = 0x1040;
          *(ulong *)(lVar8 + 0x98) = uVar10 * 2;
        }
        else {
LAB_001322c4:
          *(undefined8 *)(lVar8 + 0x88) = 0x1040;
        }
      }
      else {
        if (uVar10 * 0x140 < uVar20) goto LAB_001312cd;
        uVar10 = 0x1040;
        if (uVar11 < 0x1041) {
          uVar10 = uVar11;
        }
        if (uVar10 < 0x400) {
          uVar10 = 0x400;
        }
        *(ulong *)(lVar8 + 0x88) = uVar10;
        if (uVar20 == 0) {
          *(undefined8 *)(lVar8 + 0xa0) = 0x1fffc0;
          goto LAB_001322c4;
        }
      }
      LOCK();
      *(undefined8 *)(lVar8 + 0x188) = 0;
      UNLOCK();
      lVar40 = *(long *)(lVar8 + 0x78);
      if (*(long *)(lVar40 + 0x4e0) != 0) {
        *(long *)(lVar8 + 0x98) = *(long *)(lVar40 + 0x4e0);
      }
      if ((((0 < *(int *)(lVar40 + 0x4e8)) &&
           (*(undefined8 *)(lVar8 + 0x80) = 0, 1 < *(int *)(lVar40 + 0x4e8))) &&
          (*(undefined8 *)(lVar8 + 0x80) = 1, 3 < *(int *)(lVar40 + 0x4e8))) &&
         (*(undefined8 *)(lVar8 + 0x80) = 3, 7 < *(int *)(lVar40 + 0x4e8))) {
        *(undefined8 *)(lVar8 + 0x80) = 7;
      }
      if (*(long *)(lVar40 + 0x4f0) != 0) {
        *(long *)(lVar8 + 0x88) = *(long *)(lVar40 + 0x4f0);
      }
      if (*(int *)(lVar40 + 0x4f8) != -1) {
        *(bool *)(lVar8 + 0x182) = *(int *)(lVar40 + 0x4f8) != 0;
      }
    }
    else {
      FastAllocator::reset((FastAllocator *)(lVar8 + 0x78));
    }
    psVar38 = *(string **)(this + 0x28);
    local_a8[0] = local_98;
    std::__cxx11::string::_M_construct((ulong)local_a8,'\x01');
    *(undefined1 *)local_a8[0] = 0x34;
    plVar12 = (long *)std::__cxx11::string::_M_replace((ulong)local_a8,0,(char *)0x0,0x130ed8);
    plVar17 = plVar12 + 2;
    if ((long *)*plVar12 == plVar17) {
      uVar10 = plVar12[1] + 1;
      plVar23 = plVar17;
      plVar27 = local_78;
      if (7 < (uint)uVar10) {
        uVar19 = (uint)uVar10 & 0xfffffff8;
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)(ulong)uVar19;
        uVar20 = 0;
        do {
          uVar22 = (int)uVar20 + 8;
          uVar11 = (ulong)uVar22;
          *(undefined8 *)((long)local_78 + uVar20) = *(undefined8 *)((long)plVar17 + uVar20);
          uVar20 = uVar11;
        } while (uVar22 < uVar19);
        plVar27 = (long *)((long)local_78 + uVar11);
        plVar23 = (long *)(uVar11 + (long)plVar17);
      }
      lVar8 = 0;
      if ((uVar10 & 4) != 0) {
        *(int *)plVar27 = (int)*plVar23;
        lVar8 = 4;
      }
      if ((uVar10 & 2) != 0) {
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)
                (ulong)*(ushort *)((long)plVar23 + lVar8);
        *(ushort *)((long)plVar27 + lVar8) = *(ushort *)((long)plVar23 + lVar8);
        lVar8 = lVar8 + 2;
      }
      local_88 = local_78;
      if ((uVar10 & 1) != 0) {
        *(undefined1 *)((long)plVar27 + lVar8) = *(undefined1 *)((long)plVar23 + lVar8);
      }
    }
    else {
      local_78[0] = plVar12[2];
      local_88 = (long *)*plVar12;
    }
    local_80 = plVar12[1];
    *plVar12 = (long)plVar17;
    plVar12[1] = 0;
    *(undefined1 *)(plVar12 + 2) = 0;
    if (0x3fffffffffffffffU - local_80 < 0xf) {
                    /* WARNING: Subroutine does not return */
      std::__throw_length_error("basic_string::append");
    }
    puVar13 = (undefined8 *)std::__cxx11::string::_M_append((char *)&local_88,0x130ef7);
    p_Var1 = (_lambda_embree__range<unsigned_long>__1_ *)(puVar13 + 2);
    if ((_lambda_embree__range<unsigned_long>__1_ *)*puVar13 == p_Var1) {
      uVar10 = puVar13[1] + 1;
      p_Var21 = p_Var1;
      in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)local_58;
      if (7 < (uint)uVar10) {
        uVar20 = 0;
        do {
          uVar19 = (int)uVar20 + 8;
          uVar11 = (ulong)uVar19;
          *(undefined8 *)((_lambda_embree__range<unsigned_long>__1_ *)local_58 + uVar20) =
               *(undefined8 *)(p_Var1 + uVar20);
          uVar20 = uVar11;
        } while (uVar19 < ((uint)uVar10 & 0xfffffff8));
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)local_58 + uVar11;
        p_Var21 = p_Var1 + uVar11;
      }
      lVar8 = 0;
      if ((uVar10 & 4) != 0) {
        *(int *)in_R9 = *(int *)p_Var21;
        lVar8 = 4;
      }
      if ((uVar10 & 2) != 0) {
        *(undefined2 *)(in_R9 + lVar8) = *(undefined2 *)(p_Var21 + lVar8);
        lVar8 = lVar8 + 2;
      }
      local_68 = (_lambda_embree__range<unsigned_long>__1_ *)local_58;
      if ((uVar10 & 1) != 0) {
        in_R9[lVar8] = p_Var21[lVar8];
      }
    }
    else {
      local_58[0] = puVar13[2];
      local_68 = (_lambda_embree__range<unsigned_long>__1_ *)*puVar13;
    }
    local_60 = puVar13[1];
    *puVar13 = p_Var1;
    puVar13[1] = 0;
    *(undefined1 *)(puVar13 + 2) = 0;
    dVar30 = (double)embree::BVHN<4>::preBuild(psVar38);
    if (local_68 != (_lambda_embree__range<unsigned_long>__1_ *)local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
    if (local_88 != local_78) {
      operator_delete(local_88,local_78[0] + 1);
    }
    if (local_a8[0] != local_98) {
      operator_delete(local_a8[0],local_98[0] + 1);
    }
    lVar8 = *(long *)(this + 0x28);
    pTVar7 = (TaskGroupContext *)(*(long *)(lVar8 + 0x208) - *(long *)(lVar8 + 0x200) >> 3);
    if (pTVar7 < pTVar4) {
      std::vector<embree::BVHN<4>*,std::allocator<embree::BVHN<4>*>>::_M_default_append
                ((vector<embree::BVHN<4>*,std::allocator<embree::BVHN<4>*>> *)(lVar8 + 0x200),
                 (long)pTVar4 - (long)pTVar7);
    }
    pTVar7 = (TaskGroupContext *)(*(long *)(this + 0x18) - *(long *)(this + 0x10) >> 3);
    if (pTVar7 < pTVar4) {
      std::
      vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase>>>>
      ::_M_default_append((vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderBase>>>>
                           *)(this + 0x10),(long)pTVar4 - (long)pTVar7);
    }
    local_198 = (TaskGroupContext *)0x0;
    uVar10 = *(ulong *)(*(long *)(this + 0x30) + 0x1d0);
    ppVar41 = (plus *)&local_1b8;
    stack0xffffffffffffff00 = ppVar41;
    local_108._0_8_ =
         (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
          *)&local_198;
    local_f8._0_8_ = (_lambda___1_ *)local_158;
    local_158._0_8_ = this;
    if (uVar10 == 1) {
      lVar8 = **(long **)(*(long *)(this + 0x30) + 0x1e0);
      if (((lVar8 != 0) && (*(char *)(lVar8 + 0x3c) == '\x14')) && (*(int *)(lVar8 + 0x24) == 1)) {
        uVar10 = 1;
        if (*(uint *)(lVar8 + 0x20) < 5) {
          uVar10 = (ulong)*(uint *)(lVar8 + 0x20) + 3 >> 2;
        }
        goto LAB_00131e33;
      }
    }
    else {
      uVar10 = parallel_reduce_internal<unsigned_long,unsigned_long,embree::parallel_reduce<unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_,std::plus<unsigned_long>>(unsigned_long,unsigned_long,unsigned_long_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_const&,std::plus<unsigned_long>const&)::_lambda(embree::range<unsigned_long>)_1_,std::plus<unsigned_long>>
                         (uVar10,0,uVar10,(ulong)&local_198,(ulong *)local_108,in_R9,ppVar41);
LAB_00131e33:
      if (*(ulong *)(this + 0x48) < uVar10) {
        uVar20 = *(ulong *)(this + 0x50);
        if (uVar20 < uVar10) {
          uVar11 = uVar10;
          if (uVar20 != 0) {
            do {
              uVar20 = uVar20 * 2;
              if (uVar20 == 0) {
                uVar20 = 1;
              }
              uVar11 = uVar20;
            } while (uVar20 < uVar10);
          }
          puVar13 = *(undefined8 **)(this + 0x58);
          uVar20 = uVar11 << 6;
          (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),uVar20,0);
          if (uVar20 < 0x1c00000) {
            lVar8 = embree::alignedMalloc(uVar20,0x20);
          }
          else {
            lVar8 = embree::os_malloc(uVar20,(bool *)(this + 0x40));
          }
          *(long *)(this + 0x58) = lVar8;
          if (*(long *)(this + 0x48) != 0) {
            puVar25 = puVar13;
            uVar20 = 0;
            while( true ) {
              uVar16 = puVar25[1];
              puVar14 = (undefined8 *)(lVar8 + uVar20 * 0x40);
              *puVar14 = *puVar25;
              puVar14[1] = uVar16;
              uVar16 = puVar25[3];
              puVar14[2] = puVar25[2];
              puVar14[3] = uVar16;
              uVar3 = *(undefined4 *)(puVar25 + 5);
              puVar14[4] = puVar25[4];
              *(undefined4 *)(puVar14 + 5) = uVar3;
              if (*(ulong *)(this + 0x48) <= uVar20 + 1) break;
              lVar8 = *(long *)(this + 0x58);
              puVar25 = puVar25 + 8;
              uVar20 = uVar20 + 1;
            }
          }
          lVar8 = *(long *)(this + 0x50);
          if (puVar13 != (undefined8 *)0x0) {
            if ((ulong)(lVar8 << 6) < 0x1c00000) {
              embree::alignedFree(puVar13);
            }
            else {
              embree::os_free(puVar13,lVar8 << 6,(bool)this[0x40]);
            }
          }
          if (lVar8 != 0) {
            (**(code **)**(undefined8 **)(this + 0x38))
                      (*(undefined8 **)(this + 0x38),lVar8 * -0x40,1);
          }
          *(ulong *)(this + 0x48) = uVar10;
          *(ulong *)(this + 0x50) = uVar11;
        }
        else {
          *(ulong *)(this + 0x48) = uVar10;
        }
      }
    }
    LOCK();
    *(undefined4 *)(this + 0x88) = 0;
    UNLOCK();
    local_1b8 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *)0x0;
    local_158._8_8_ = 0;
    local_158._0_8_ = pTVar4;
    local_148._8_8_ = this;
    local_148._0_8_ = 1;
    local_138._0_8_ = ppVar41;
    ppVar39 = ppVar41;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)local_158,(TaskGroupContext *)ppVar39,(ulong)pTVar4,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_00132647;
      lVar40 = *(long *)(lVar8 + 0xc00c0);
      uVar10 = lVar40 + 0x30 + (ulong)(-(int)lVar40 & 0x3f);
      if (0x80000 < uVar10) goto LAB_00132647;
      *(ulong *)(lVar8 + 0xc00c0) = uVar10;
      puVar13 = (undefined8 *)(lVar8 + 0x40090 + uVar10);
      *puVar13 = &PTR_execute_00143890;
      puVar13[1] = local_158._0_8_;
      puVar13[2] = local_158._8_8_;
      puVar13[3] = local_148._0_8_;
      puVar13[4] = local_148._8_8_;
      puVar13[5] = local_138._0_8_;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar2 = (int *)(lVar8 + 0x40 + lVar9);
      lVar15 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar13;
      *(long *)(lVar9 + 0x58) = lVar15;
      *(plus **)(lVar9 + 0x60) = ppVar41;
      *(long *)(lVar9 + 0x68) = lVar40;
      *(TaskGroupContext **)(lVar9 + 0x70) = pTVar4;
      if (lVar15 != 0) {
        LOCK();
        *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar2 == 0) {
        *piVar2 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    local_108._0_8_ = local_1b8;
    if (local_1b8 == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *)0x0) {
      local_1c0 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *)0x0;
      stack0xffffffffffffff00 = 0;
      local_108._0_8_ = pTVar4;
      stack0xffffffffffffff10 = this;
      local_f8._0_8_ = 1;
      local_e8._0_8_ = (TaskGroupContext *)&local_1c0;
      lVar8 = embree::TaskScheduler::thread();
      if (lVar8 == 0) {
        pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
        TaskScheduler::
        spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                  (pTVar18,(_lambda___1_ *)local_108,(TaskGroupContext *)&local_1c0,(ulong)pTVar4,
                   true);
      }
      else {
        if (0xfff < *(ulong *)(lVar8 + 0x40080)) {
LAB_00132647:
                    /* WARNING: Subroutine does not return */
          abort();
        }
        lVar40 = *(long *)(lVar8 + 0xc00c0);
        uVar10 = lVar40 + 0x30 + (ulong)(-(int)lVar40 & 0x3f);
        if (0x80000 < uVar10) goto LAB_00132647;
        *(ulong *)(lVar8 + 0xc00c0) = uVar10;
        puVar13 = (undefined8 *)(lVar8 + 0x40090 + uVar10);
        *puVar13 = &PTR_execute_001438a8;
        puVar13[1] = local_108._0_8_;
        puVar13[2] = stack0xffffffffffffff00;
        puVar13[3] = local_f8._0_8_;
        puVar13[4] = stack0xffffffffffffff10;
        puVar13[5] = local_e8._0_8_;
        lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
        piVar2 = (int *)(lVar8 + 0x40 + lVar9);
        lVar15 = *(long *)(lVar8 + 0xc0100);
        *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
        *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
        lVar9 = lVar9 + lVar8;
        *(undefined8 **)(lVar9 + 0x50) = puVar13;
        *(long *)(lVar9 + 0x58) = lVar15;
        *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_1c0;
        *(long *)(lVar9 + 0x68) = lVar40;
        *(TaskGroupContext **)(lVar9 + 0x70) = pTVar4;
        if (lVar15 != 0) {
          LOCK();
          *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
          UNLOCK();
        }
        LOCK();
        if (*piVar2 == 0) {
          *piVar2 = 1;
        }
        UNLOCK();
        LOCK();
        *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
        UNLOCK();
        if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
          LOCK();
          *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
          UNLOCK();
        }
      }
      local_220 = (_lambda_embree__range<unsigned_long>__1_ *)local_108;
      embree::TaskScheduler::wait();
      if (local_1c0 == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *)0x0) {
        if (*(int *)(this + 0x88) == 1) {
          pauVar5 = *(undefined1 (**) [16])(this + 0x58);
          local_d8 = pauVar5[1];
          _local_f8 = pauVar5[1];
          local_e8 = *pauVar5;
          _local_108 = *pauVar5;
          embree::BVHN<4>::set
                    (*(undefined8 *)(this + 0x28),*(undefined8 *)pauVar5[2],local_220,uVar24);
        }
        else {
          uVar20 = (ulong)*(int *)(this + 0x88);
          uVar10 = *(ulong *)(this + 0x50);
          if (uVar10 < uVar20) {
            puVar13 = *(undefined8 **)(this + 0x58);
            if (uVar10 == 0) {
              uVar10 = uVar20;
              if (uVar20 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar20;
              }
            }
            else {
              do {
                uVar10 = uVar10 * 2;
                if (uVar10 == 0) {
                  uVar10 = 1;
                }
              } while (uVar10 < uVar20);
              if (uVar20 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar20;
              }
            }
            uVar11 = uVar10 << 6;
            (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),uVar11,0);
            if (uVar11 < 0x1c00000) {
              lVar8 = embree::alignedMalloc(uVar11,0x20);
            }
            else {
              lVar8 = embree::os_malloc(uVar11,(bool *)(this + 0x40));
            }
            *(long *)(this + 0x58) = lVar8;
            if (*(long *)(this + 0x48) != 0) {
              puVar25 = puVar13;
              uVar11 = 0;
              while( true ) {
                uVar16 = puVar25[1];
                puVar14 = (undefined8 *)(lVar8 + uVar11 * 0x40);
                *puVar14 = *puVar25;
                puVar14[1] = uVar16;
                uVar16 = puVar25[3];
                puVar14[2] = puVar25[2];
                puVar14[3] = uVar16;
                uVar3 = *(undefined4 *)(puVar25 + 5);
                puVar14[4] = puVar25[4];
                *(undefined4 *)(puVar14 + 5) = uVar3;
                if (*(ulong *)(this + 0x48) <= uVar11 + 1) break;
                lVar8 = *(long *)(this + 0x58);
                puVar25 = puVar25 + 8;
                uVar11 = uVar11 + 1;
              }
            }
            lVar8 = *(long *)(this + 0x50);
            if (puVar13 != (undefined8 *)0x0) {
              if ((ulong)(lVar8 << 6) < 0x1c00000) {
                embree::alignedFree(puVar13);
              }
              else {
                embree::os_free(puVar13,lVar8 << 6,(bool)this[0x40]);
              }
            }
            if (lVar8 != 0) {
              (**(code **)**(undefined8 **)(this + 0x38))
                        (*(undefined8 **)(this + 0x38),lVar8 * -0x40,1);
            }
            *(ulong *)(this + 0x48) = uVar20;
            *(ulong *)(this + 0x50) = uVar10;
          }
          else {
            *(ulong *)(this + 0x48) = uVar20;
          }
          fVar29 = (float)uVar24 / __LC36;
          if (__LC24 <= fVar29) {
            uVar10 = (long)(fVar29 - __LC24) ^ 0x8000000000000000;
          }
          else {
            uVar10 = (ulong)fVar29;
          }
          if (uVar10 < 1000) {
            uVar10 = 1000;
          }
          local_108._0_8_ = CONCAT44(_LC8,_LC8);
          local_108._8_4_ = _LC8;
          uStack_fc = _LC8;
          local_f8._0_8_ = CONCAT44(_LC6,_LC6);
          local_f8._8_4_ = _LC6;
          uStack_ec = _LC6;
          local_c8 = 0;
          if (uVar10 < uVar20 * 2) {
            uVar10 = uVar20 * 2;
          }
          local_c0 = 0;
          local_198 = (TaskGroupContext *)local_220;
          local_1b8 = this;
          local_e8 = _local_108;
          local_d8 = _local_f8;
          if (uVar20 == 1) {
            pBVar28 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> **)
                       (this + 0x58);
            auVar35._8_4_ = _LC8;
            auVar35._0_8_ = local_108._0_8_;
            auVar35._12_4_ = _LC8;
            auVar33._8_4_ = _LC6;
            auVar33._0_8_ = local_f8._0_8_;
            auVar33._12_4_ = _LC6;
            auVar37._8_4_ = _LC8;
            auVar37._0_8_ = local_108._0_8_;
            auVar37._12_4_ = _LC8;
            auVar36._8_4_ = _LC6;
            auVar36._0_8_ = local_f8._0_8_;
            auVar36._12_4_ = _LC6;
            auVar32._8_4_ = _LC8;
            auVar32._0_8_ = local_108._0_8_;
            auVar32._12_4_ = _LC8;
            local_118 = 0;
            auVar34._0_4_ = *(float *)(pBVar28 + 0x10) + *(float *)pBVar28;
            auVar34._4_4_ = *(float *)(pBVar28 + 0x14) + *(float *)(pBVar28 + 4);
            auVar34._8_4_ = *(float *)(pBVar28 + 0x18) + *(float *)(pBVar28 + 8);
            auVar34._12_4_ = *(float *)(pBVar28 + 0x1c) + *(float *)(pBVar28 + 0xc);
            auVar37 = minps(auVar37,*(undefined1 (*) [16])pBVar28);
            auVar36 = maxps(auVar36,*(undefined1 (*) [16])(pBVar28 + 0x10));
            local_110 = 1;
            auVar35 = minps(auVar35,auVar34);
            auVar34 = maxps(auVar33,auVar34);
            auVar31._8_4_ = _LC6;
            auVar31._0_8_ = local_f8._0_8_;
            auVar31._12_4_ = _LC6;
            local_158 = minps(auVar32,auVar37);
            local_148 = maxps(auVar31,auVar36);
            local_138 = minps(_local_108,auVar35);
            local_128 = maxps(_local_f8,auVar34);
          }
          else {
            pTStack_190 = (TaskGroupContext *)&local_1c0;
            local_188 = ppVar39;
            parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::parallel_reduce<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>(unsigned_long,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_const&)::_lambda(embree::range<unsigned_long>)_1_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>
                      ((ulong)local_158,uVar20,0,uVar20,(PrimInfoT_conflict *)0x1,local_220,
                       (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
                        *)&local_198);
            if (local_110 == local_118) {
              stack0xffffffffffffff00 = _UNK_001440d8;
              local_108._0_8_ = CONCAT44(_UNK_001440d4,_LC8);
              stack0xffffffffffffff10 = _UNK_001440c8;
              local_f8._0_8_ = CONCAT44(_UNK_001440c4,_LC6);
              local_e8._8_8_ = _UNK_001440d8;
              local_e8._0_8_ = CONCAT44(_UNK_001440d4,_LC8);
              local_d8._8_8_ = _UNK_001440c8;
              local_d8._0_8_ = CONCAT44(_UNK_001440c4,_LC6);
              embree::BVHN<4>::set(*(undefined8 *)(this + 0x28),8,local_220,0);
              goto LAB_0013201a;
            }
            pBVar28 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> **)
                       (this + 0x58);
          }
          lVar40 = local_110;
          lVar8 = local_118;
          uVar20 = *(ulong *)(this + 0x50);
          local_198 = (TaskGroupContext *)0x4;
          local_170 = 0x3f8000003f800000;
          for (iVar6 = 0x1f; 4U >> iVar6 == 0; iVar6 = iVar6 + -1) {
          }
          pTStack_190 = (TaskGroupContext *)0x28;
          local_188 = (plus *)(long)iVar6;
          uStack_168 = *(undefined8 *)(this + 0x90);
          pBStack_180 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *)0x1;
          uStack_160 = 0xffffffffffffffff;
          local_178 = (TaskGroupContext *)0x1;
          if (uVar20 < uVar10) {
            if (uVar20 == 0) {
              uVar20 = uVar10;
              if (uVar10 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar10;
              }
            }
            else {
              do {
                uVar20 = uVar20 * 2;
                if (uVar20 == 0) {
                  uVar20 = 1;
                }
              } while (uVar20 < uVar10);
              if (uVar10 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar10;
              }
            }
            uVar11 = uVar20 << 6;
            (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),uVar11,0);
            if (uVar11 < 0x1c00000) {
              lVar15 = embree::alignedMalloc(uVar11,0x20);
            }
            else {
              lVar15 = embree::os_malloc(uVar11,(bool *)(this + 0x40));
            }
            *(long *)(this + 0x58) = lVar15;
            if (*(long *)(this + 0x48) != 0) {
              uVar11 = 0;
              pBVar26 = pBVar28;
              while( true ) {
                uVar16 = *(undefined8 *)(pBVar26 + 8);
                puVar13 = (undefined8 *)(lVar15 + uVar11 * 0x40);
                *puVar13 = *(undefined8 *)pBVar26;
                puVar13[1] = uVar16;
                uVar16 = *(undefined8 *)(pBVar26 + 0x18);
                puVar13[2] = *(undefined8 *)(pBVar26 + 0x10);
                puVar13[3] = uVar16;
                uVar3 = *(undefined4 *)(pBVar26 + 0x28);
                puVar13[4] = *(undefined8 *)(pBVar26 + 0x20);
                *(undefined4 *)(puVar13 + 5) = uVar3;
                if (*(ulong *)(this + 0x48) <= uVar11 + 1) break;
                lVar15 = *(long *)(this + 0x58);
                uVar11 = uVar11 + 1;
                pBVar26 = pBVar26 + 0x40;
              }
            }
            lVar15 = *(long *)(this + 0x50);
            if (pBVar28 != (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *)0x0)
            {
              if ((ulong)(lVar15 << 6) < 0x1c00000) {
                embree::alignedFree(pBVar28);
              }
              else {
                embree::os_free(pBVar28,lVar15 << 6,(bool)this[0x40]);
              }
            }
            if (lVar15 != 0) {
              (**(code **)**(undefined8 **)(this + 0x38))
                        (*(undefined8 **)(this + 0x38),lVar15 * -0x40,1);
            }
            *(ulong *)(this + 0x48) = uVar10;
            pBVar28 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> **)
                       (this + 0x58);
            *(ulong *)(this + 0x50) = uVar20;
          }
          else {
            *(ulong *)(this + 0x48) = uVar10;
          }
          auVar31 = local_148;
          auVar34 = local_158;
          local_c0 = lVar40 - lVar8;
          ppBStack_1b0 = &local_1c8;
          uStack_1a8 = 4;
          local_108._0_8_ = local_158._0_8_;
          stack0xffffffffffffff00 = local_158._8_8_;
          local_f8._0_8_ = local_148._0_8_;
          stack0xffffffffffffff10 = local_148._8_8_;
          local_e8._0_8_ = local_138._0_8_;
          local_e8._8_8_ = local_138._8_8_;
          local_d8._0_8_ = local_128._0_8_;
          local_d8._8_8_ = local_128._8_8_;
          local_c8 = 0;
          local_1c8 = this;
          local_1c0 = this;
          local_1b8 = pBVar28;
          uStack_b8 = uVar10;
          uVar16 = GeneralBVHBuilder::
                   build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)_6_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(unsigned_long)_8_>
                             (ppVar39,pBVar28,local_220,*(long *)(this + 0x28) + 0x78,&uStack_1c9,
                              (TaskGroupContext *)&local_1c0,
                              (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
                               *)&local_198);
          _local_108 = auVar34;
          _local_f8 = auVar31;
          local_e8 = auVar34;
          local_d8 = auVar31;
          embree::BVHN<4>::set(*(undefined8 *)(this + 0x28),uVar16,local_220,uVar24);
        }
LAB_0013201a:
        lVar40 = *(long *)(this + 0x28);
        lVar8 = lVar40 + 0x78;
        plVar17 = (long *)(lVar40 + 0x130);
        plVar12 = (long *)(lVar40 + 0x170);
        do {
          while (*plVar17 != 0) {
            lVar15 = *(long *)(*plVar17 + 0x18);
            *(long *)(*plVar17 + 0x18) = *plVar12;
            LOCK();
            *plVar12 = *plVar17;
            UNLOCK();
            LOCK();
            *plVar17 = lVar15;
            UNLOCK();
          }
          LOCK();
          *plVar17 = 0;
          UNLOCK();
          plVar17 = plVar17 + 1;
        } while (plVar12 != plVar17);
        plVar17 = *(long **)(lVar40 + 0x1a8);
        plVar12 = *(long **)(lVar40 + 0x1b0);
        if (plVar12 != plVar17) {
          do {
            while( true ) {
              lVar15 = *plVar17;
              if (lVar8 != *(long *)(lVar15 + 8)) break;
              embree::MutexSys::lock();
              if (lVar8 == *(long *)(lVar15 + 8)) {
                LOCK();
                plVar27 = (long *)(*(long *)(lVar15 + 8) + 0x118);
                *plVar27 = *plVar27 + *(long *)(lVar15 + 0xa8) + *(long *)(lVar15 + 0x68);
                UNLOCK();
                LOCK();
                plVar27 = (long *)(*(long *)(lVar15 + 8) + 0x120);
                *plVar27 = *plVar27 +
                           (((*(long *)(lVar15 + 0x98) + *(long *)(lVar15 + 0x58)) -
                            *(long *)(lVar15 + 0x50)) - *(long *)(lVar15 + 0x90));
                UNLOCK();
                LOCK();
                plVar27 = (long *)(*(long *)(lVar15 + 8) + 0x128);
                *plVar27 = *plVar27 + *(long *)(lVar15 + 0xb0) + *(long *)(lVar15 + 0x70);
                UNLOCK();
                *(undefined8 *)(lVar15 + 0x48) = 0;
                *(undefined8 *)(lVar15 + 0x58) = 0;
                *(undefined8 *)(lVar15 + 0x50) = 0;
                *(undefined8 *)(lVar15 + 0x68) = 0;
                *(undefined8 *)(lVar15 + 0x70) = 0;
                *(undefined8 *)(lVar15 + 0x60) = 0;
                *(undefined8 *)(lVar15 + 0x88) = 0;
                *(undefined8 *)(lVar15 + 0x98) = 0;
                *(undefined8 *)(lVar15 + 0x90) = 0;
                *(undefined8 *)(lVar15 + 0xa8) = 0;
                *(undefined8 *)(lVar15 + 0xb0) = 0;
                *(undefined8 *)(lVar15 + 0xa0) = 0;
                LOCK();
                *(undefined8 *)(lVar15 + 8) = 0;
                UNLOCK();
              }
              plVar17 = plVar17 + 1;
              embree::MutexSys::unlock();
              if (plVar12 == plVar17) goto LAB_001321b9;
            }
            plVar17 = plVar17 + 1;
          } while (plVar12 != plVar17);
LAB_001321b9:
          if (*(long *)(lVar40 + 0x1b0) != *(long *)(lVar40 + 0x1a8)) {
            *(long *)(lVar40 + 0x1b0) = *(long *)(lVar40 + 0x1a8);
          }
        }
        if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
          embree::BVHN<4>::postBuild(dVar30);
          return;
        }
        goto LAB_00132636;
      }
      local_108._0_8_ = local_1c0;
      std::__exception_ptr::exception_ptr::_M_addref();
      local_108._0_8_ = std::rethrow_exception(local_220);
    }
  }
  std::__exception_ptr::exception_ptr::_M_addref();
  std::rethrow_exception(local_108);
LAB_00132636:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMi<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMi<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleM...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  ulong uVar8;
  undefined8 uVar9;
  TaskScheduler *pTVar10;
  long lVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  long local_a8;
  ulong uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar12 = *(ulong *)(this + 8);
  uVar8 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar12 - uVar8) {
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uStack_40 = *(undefined8 *)(this + 0x30);
    uVar12 = uVar12 + uVar8 >> 1;
    local_68 = uVar12;
    uStack_60 = uVar8;
    local_58 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embre___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_68,pTVar4,uVar12 - uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) goto LAB_00132a4e;
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_00132a4e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_001439b0;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[7] = local_38;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar12 - uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(undefined8 *)(this + 0x18);
    local_a8 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_90 = *(undefined8 *)(this + 0x20);
    uStack_88 = *(undefined8 *)(this + 0x28);
    uStack_80 = *(undefined8 *)(this + 0x30);
    uVar8 = local_a8 - uVar12;
    uStack_a0 = uVar12;
    local_78 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embre___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_a8,pTVar4,uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_00132a4e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar12 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar12) goto LAB_00132a4e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar12;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar12);
      *puVar3 = &PTR_execute_001439b0;
      puVar3[1] = local_a8;
      puVar3[2] = uStack_a0;
      puVar3[7] = local_78;
      puVar3[3] = local_98;
      puVar3[4] = uStack_90;
      puVar3[5] = uStack_88;
      puVar3[6] = uStack_80;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    lVar6 = uVar8 * 0x70;
    for (; uVar8 < uVar12; uVar8 = uVar8 + 1) {
      local_68 = 0;
      uStack_60 = 0;
      lVar5 = *(long *)(this + 0x20);
      local_58 = 0;
      lVar11 = *(long *)(this + 0x28) + lVar6;
      lVar6 = lVar6 + 0x70;
      uVar9 = sse2::GeneralBVHBuilder::
              BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::build()::{lambda(unsigned_long)#8}>
              ::recurse(*(undefined8 *)(this + 0x30),lVar11,1);
      *(undefined8 *)(lVar5 + uVar8 * 8) = uVar9;
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* std::pair<unsigned long, bool> embree::parallel_reduce_internal<unsigned long, std::pair<unsigned
   long, bool>, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&)::{lambda(embree::range<unsigned long>
   const&)#1}, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&)::{lambda(std::pair<unsigned long,
   bool> const&, std::pair<unsigned long, bool> const&)#2}>(unsigned long, unsigned long, unsigned
   long, unsigned long, std::pair<unsigned long, bool> const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&)::{lambda(embree::range<unsigned long>
   const&)#1} const&, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&)::{lambda(std::pair<unsigned long,
   bool> const&, std::pair<unsigned long, bool> const&)#2} const&) */

undefined1  [16]
embree::
parallel_reduce_internal<unsigned_long,std::pair<unsigned_long,bool>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(std::pair<unsigned_long,bool>const&,std::pair<unsigned_long,bool>const&)_2_>
          (ulong param_1,ulong param_2,ulong param_3,ulong param_4,pair_conflict *param_5,
          _lambda_embree__range<unsigned_long>_const___1_ *param_6,
          _lambda_std__pair<unsigned_long,bool>_const__std__pair<unsigned_long,bool>_const___2_
          *param_7)

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  ulong uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  long lVar10;
  long in_FS_OFFSET;
  byte bVar11;
  undefined1 auVar12 [16];
  ulong local_2148;
  ulong local_2140;
  ulong local_2138 [2];
  ulong local_2128;
  ulong *local_2120;
  ulong *local_2118;
  ulong *local_2110;
  long *local_2108;
  _lambda_embree__range<unsigned_long>_const___1_ *local_2100;
  ulong local_20f0;
  undefined8 uStack_20e8;
  undefined8 local_20e0;
  undefined8 **ppuStack_20d8;
  ulong *local_20d0;
  long local_20c0 [1024];
  long *local_c0;
  ulong local_b8;
  long local_48;
  
  bVar11 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2148 = param_3;
  local_2140 = param_2;
  local_2138[0] = param_1;
  uVar5 = embree::TaskScheduler::threadCount();
  lVar10 = 0x400;
  plVar8 = local_20c0;
  if (local_2138[0] < uVar5) {
    uVar5 = local_2138[0];
  }
  uVar6 = 0x200;
  if (uVar5 < 0x201) {
    uVar6 = uVar5;
  }
  for (; lVar10 != 0; lVar10 = lVar10 + -1) {
    *plVar8 = 0;
    plVar8 = plVar8 + (ulong)bVar11 * -2 + 1;
  }
  local_2120 = &local_2140;
  local_2118 = &local_2148;
  local_2110 = local_2138;
  local_2138[0] = uVar6;
  local_2108 = local_20c0;
  local_2100 = param_6;
  local_c0 = local_20c0;
  local_b8 = uVar6;
  if (uVar5 == 0) {
    lVar10 = *(long *)param_5;
    uVar5 = (ulong)(byte)param_5[8];
  }
  else {
    ppuStack_20d8 = &local_2120;
    uStack_20e8 = 0;
    local_20e0 = 1;
    local_2128 = 0;
    local_20f0 = uVar6;
    local_20d0 = &local_2128;
    lVar10 = embree::TaskScheduler::thread();
    if (lVar10 == 0) {
      uVar9 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImSt4pairImbEZNS_4sse226HeuristicArrayOpenMergeSAHIZNS7_19BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMvILi4EEEE5buildEvEUlRNSD_8BuildRefEPSE_E5_SE_Lm32EE13getPropertiesERKNS7_16PrimInfoExtRangeEEUlRKNS_5rangeImEEE_ZNSI_13getPropertiesESL_EUlRKS6_SS_E0_EET0_T_SV_SV_SV_RKSU_RKT1_RKT2_EUlmE_EEvSV_SX_EUlSP_E_EEvSV_SV_SV_SX_PNS0_16TaskGroupContextEEUlvE_EEvRKSV_S17_mb
                (uVar9,&local_20f0,&local_2128,uVar6,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar10 + 0x40080)) {
LAB_0013362b:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar10 + 0xc00c0);
      uVar5 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar5) goto LAB_0013362b;
      *(ulong *)(lVar10 + 0xc00c0) = uVar5;
      puVar2 = (undefined8 *)(lVar10 + 0x40090 + uVar5);
      *puVar2 = 0x143bc0;
      puVar2[1] = local_20f0;
      puVar2[2] = uStack_20e8;
      puVar2[3] = local_20e0;
      puVar2[4] = ppuStack_20d8;
      puVar2[5] = local_20d0;
      lVar7 = *(long *)(lVar10 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar10 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar10 + 0xc0100);
      *(undefined4 *)(lVar10 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar10 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar10;
      *(undefined8 **)(lVar7 + 0x50) = puVar2;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_2128;
      *(long *)(lVar7 + 0x68) = lVar3;
      *(ulong *)(lVar7 + 0x70) = uVar6;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar10 + 0x40080) = *(long *)(lVar10 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar10 + 0x40080) - 1U <= *(ulong *)(lVar10 + 0x40040)) {
        LOCK();
        *(long *)(lVar10 + 0x40040) = *(long *)(lVar10 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2128 != 0) {
      local_20f0 = local_2128;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20f0);
      goto LAB_00133626;
    }
    lVar10 = *(long *)param_5;
    uVar5 = (ulong)(byte)param_5[8];
    if (local_2138[0] != 0) {
      plVar8 = local_c0;
      do {
        if ((char)uVar5 != '\0') {
          uVar5 = (ulong)*(byte *)(plVar8 + 1);
        }
        lVar10 = lVar10 + *plVar8;
        plVar8 = plVar8 + 2;
      } while (plVar8 != local_c0 + local_2138[0] * 2);
    }
  }
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    auVar12._8_8_ = uVar5;
    auVar12._0_8_ = lVar10;
    return auVar12;
  }
LAB_00133626:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::getProperties(embree::sse2::PrimInfoExtRange const&) */

long __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
::getProperties(HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
                *this,PrimInfoExtRange *param_1)

{
  ulong uVar1;
  long lVar2;
  ulong uVar3;
  float *pfVar4;
  long lVar5;
  long in_FS_OFFSET;
  float fVar6;
  float fVar7;
  float fVar8;
  float local_5c;
  long local_58;
  float local_50;
  undefined8 local_48;
  undefined1 local_40;
  float local_38 [4];
  undefined8 local_28;
  undefined8 uStack_20;
  long *local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_28 = (HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
              *)CONCAT44(*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4),
                         *(float *)(param_1 + 0x10) - *(float *)param_1);
  uStack_20 = (float *)CONCAT44(*(float *)(param_1 + 0x1c) - *(float *)(param_1 + 0xc),
                                *(float *)(param_1 + 0x18) - *(float *)(param_1 + 8));
  fVar6 = (float)((uint)(*(float *)(param_1 + 0x10) - *(float *)param_1) & _LC25);
  fVar7 = (float)((uint)(*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4)) & _LC25);
  fVar8 = (float)((uint)(*(float *)(param_1 + 0x18) - *(float *)(param_1 + 8)) & _LC25);
  if (fVar6 <= fVar7) {
    lVar5 = 4;
    if (fVar7 <= fVar8) {
      lVar5 = 8;
    }
    local_58 = 1;
    if (fVar7 <= fVar8) {
      local_58 = 2;
    }
  }
  else {
    uVar3 = (ulong)(fVar6 <= fVar8);
    local_58 = uVar3 * 2;
    lVar5 = uVar3 * 8;
  }
  uVar3 = *(ulong *)(param_1 + 0x40);
  local_50 = _LC28 / *(float *)((long)&local_28 + lVar5);
  local_40 = 1;
  local_48 = 0;
  pfVar4 = (float *)(uVar3 * 0x40 + *(long *)this);
  local_5c = pfVar4[3];
  uStack_20 = &local_5c;
  local_18 = &local_58;
  uVar1 = *(ulong *)(param_1 + 0x48);
  local_28 = this;
  if (uVar1 - uVar3 < 0x400) {
    if (uVar3 < uVar1) {
      lVar2 = 0;
      do {
        if (((uint)pfVar4[8] & 8) == 0) {
          local_38[3] = pfVar4[7] - pfVar4[3];
          local_38[0] = pfVar4[4] - *pfVar4;
          local_38[1] = pfVar4[5] - pfVar4[1];
          local_38[2] = pfVar4[6] - pfVar4[2];
          if (__LC26 < *(float *)((long)local_38 + lVar5) * local_50) {
            lVar2 = lVar2 + 3;
          }
        }
        pfVar4 = pfVar4 + 0x10;
      } while ((float *)(*(long *)this + uVar1 * 0x40) != pfVar4);
    }
    else {
      lVar2 = 0;
    }
  }
  else {
    lVar2 = parallel_reduce_internal<unsigned_long,std::pair<unsigned_long,bool>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(std::pair<unsigned_long,bool>const&,std::pair<unsigned_long,bool>const&)_2_>
                      ((uVar1 - uVar3) + 0x1ff >> 9,uVar3,uVar1,0x200,(pair_conflict *)&local_48,
                       (_lambda_embree__range<unsigned_long>_const___1_ *)&local_28,
                       (_lambda_std__pair<unsigned_long,bool>_const__std__pair<unsigned_long,bool>_const___2_
                        *)local_38);
  }
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return lVar2;
}



/* embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::BBox<embree::Vec3fa> >
   embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned long,
   unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned
   long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2} const&) */

embree * __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&)_2_>
          (embree *this,ulong param_1,ulong param_2,ulong param_3,ulong param_4,
          BinInfoT_conflict *param_5,_lambda_embree__range<unsigned_long>_const___1_ *param_6,
          _lambda_embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const___2_
          *param_7)

{
  int *piVar1;
  long *plVar2;
  long lVar3;
  long lVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  ulong uVar21;
  undefined1 (*pauVar22) [16];
  embree *peVar23;
  embree *peVar24;
  undefined8 *puVar25;
  undefined1 (*pauVar26) [16];
  undefined1 (*pauVar27) [16];
  long lVar28;
  undefined8 uVar29;
  long lVar30;
  undefined1 (*pauVar31) [16];
  ulong uVar32;
  BinInfoT_conflict *pBVar33;
  undefined1 (*pauVar34) [16];
  undefined1 (*pauVar35) [16];
  undefined8 *puVar36;
  undefined1 (*pauVar37) [16];
  undefined8 *puVar38;
  undefined1 (*pauVar39) [16];
  long in_FS_OFFSET;
  byte bVar40;
  undefined1 auVar41 [16];
  undefined1 (*local_2b58) [16];
  ulong local_2b48;
  ulong local_2b40;
  ulong local_2b38 [2];
  ulong local_2b28;
  ulong *local_2b20;
  ulong *local_2b18;
  ulong *local_2b10;
  undefined1 (*local_2b08) [16];
  _lambda_embree__range<unsigned_long>_const___1_ *local_2b00;
  ulong local_2af0;
  undefined8 uStack_2ae8;
  undefined8 local_2ae0;
  ulong **ppuStack_2ad8;
  ulong *local_2ad0;
  undefined1 local_2ac0 [3072];
  undefined8 local_1ec0;
  int aiStack_1eb8 [124];
  undefined8 local_1cc8;
  undefined1 local_1cc0 [7168];
  undefined1 (*local_c0) [16];
  ulong local_b8;
  long local_48;
  
  bVar40 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2b48 = param_3;
  local_2b40 = param_2;
  local_2b38[0] = param_1;
  local_b8 = embree::TaskScheduler::threadCount();
  if (0x200 < local_2b38[0]) {
    local_2b38[0] = 0x200;
  }
  if (local_2b38[0] <= local_b8) {
    local_b8 = local_2b38[0];
  }
  local_2b38[0] = local_b8;
  if (local_b8 * 0xe00 < 0x2001) {
    local_c0 = (undefined1 (*) [16])local_1cc0;
  }
  else {
    local_c0 = (undefined1 (*) [16])embree::alignedMalloc(local_b8 * 0xe00,0x40);
  }
  uVar21 = local_2b38[0];
  local_2b58 = (undefined1 (*) [16])local_1cc0;
  local_2b20 = &local_2b40;
  local_2b00 = param_6;
  local_2b18 = &local_2b48;
  local_2b10 = local_2b38;
  local_2b08 = local_2b58;
  if (local_2b38[0] != 0) {
    ppuStack_2ad8 = &local_2b20;
    uStack_2ae8 = 0;
    local_2ae0 = 1;
    local_2b28 = 0;
    local_2af0 = local_2b38[0];
    local_2ad0 = &local_2b28;
    lVar30 = embree::TaskScheduler::thread();
    if (lVar30 == 0) {
      uVar29 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_4sse28BinInfoTILm32ENS5_19BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_10TriangleMvILi4EEEE8BuildRefENS_4BBoxINS_6Vec3faEEEEEZNS5_26HeuristicArrayOpenMergeSAHIZNSB_5buildEvEUlRSC_PSC_E5_SC_Lm32EE20parallel_object_findERKNS5_16PrimInfoExtRangeEmEUlRKNS_5rangeImEEE_ZNSL_20parallel_object_findESO_mEUlRKSG_SV_E0_EET0_T_SY_SY_SY_RKSX_RKT1_RKT2_EUlmE_EEvSY_S10_EUlSS_E_EEvSY_SY_SY_S10_PNS0_16TaskGroupContextEEUlvE_EEvRKSY_S1A_mb
                (uVar29,&local_2af0,&local_2b28,uVar21,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar30 + 0x40080)) {
LAB_001346b3:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar30 + 0xc00c0);
      uVar32 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar32) goto LAB_001346b3;
      *(ulong *)(lVar30 + 0xc00c0) = uVar32;
      puVar25 = (undefined8 *)(lVar30 + 0x40090 + uVar32);
      *puVar25 = 0x143bd8;
      puVar25[1] = local_2af0;
      puVar25[2] = uStack_2ae8;
      puVar25[3] = local_2ae0;
      puVar25[4] = ppuStack_2ad8;
      puVar25[5] = local_2ad0;
      lVar28 = *(long *)(lVar30 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar30 + 0x40 + lVar28);
      lVar4 = *(long *)(lVar30 + 0xc0100);
      *(undefined4 *)(lVar30 + 0x44 + lVar28) = 1;
      *(undefined1 *)(lVar30 + 0x48 + lVar28) = 1;
      lVar28 = lVar28 + lVar30;
      *(undefined8 **)(lVar28 + 0x50) = puVar25;
      *(long *)(lVar28 + 0x58) = lVar4;
      *(ulong **)(lVar28 + 0x60) = &local_2b28;
      *(long *)(lVar28 + 0x68) = lVar3;
      *(ulong *)(lVar28 + 0x70) = uVar21;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar30 + 0x40080) = *(long *)(lVar30 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar30 + 0x40080) - 1U <= *(ulong *)(lVar30 + 0x40040)) {
        LOCK();
        *(long *)(lVar30 + 0x40040) = *(long *)(lVar30 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2b28 != 0) {
      local_2af0 = local_2b28;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_2af0);
      goto LAB_00134687;
    }
  }
  pauVar22 = local_c0;
  uVar21 = local_2b38[0];
  peVar23 = this;
  pBVar33 = param_5;
  do {
    uVar29 = *(undefined8 *)(pBVar33 + 8);
    peVar24 = peVar23 + 0x60;
    *(undefined8 *)peVar23 = *(undefined8 *)pBVar33;
    *(undefined8 *)(peVar23 + 8) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x18);
    *(undefined8 *)(peVar23 + 0x10) = *(undefined8 *)(pBVar33 + 0x10);
    *(undefined8 *)(peVar23 + 0x18) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x28);
    *(undefined8 *)(peVar23 + 0x20) = *(undefined8 *)(pBVar33 + 0x20);
    *(undefined8 *)(peVar23 + 0x28) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x38);
    *(undefined8 *)(peVar23 + 0x30) = *(undefined8 *)(pBVar33 + 0x30);
    *(undefined8 *)(peVar23 + 0x38) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x48);
    *(undefined8 *)(peVar23 + 0x40) = *(undefined8 *)(pBVar33 + 0x40);
    *(undefined8 *)(peVar23 + 0x48) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x58);
    *(undefined8 *)(peVar23 + 0x50) = *(undefined8 *)(pBVar33 + 0x50);
    *(undefined8 *)(peVar23 + 0x58) = uVar29;
    peVar23 = peVar24;
    pBVar33 = pBVar33 + 0x60;
  } while (peVar24 != this + 0xc00);
  puVar25 = (undefined8 *)memmove(this + 0xc00,param_5 + 0xc00,0x200);
  if (uVar21 != 0) {
    pauVar27 = (undefined1 (*) [16])local_2ac0;
    peVar23 = this;
    pauVar39 = pauVar22;
    do {
      do {
        uVar29 = *(undefined8 *)(peVar23 + 8);
        uVar11 = *(undefined8 *)(peVar23 + 0x10);
        uVar12 = *(undefined8 *)(peVar23 + 0x18);
        pauVar26 = pauVar27 + 6;
        uVar13 = *(undefined8 *)(peVar23 + 0x20);
        uVar14 = *(undefined8 *)(peVar23 + 0x28);
        uVar15 = *(undefined8 *)(peVar23 + 0x30);
        uVar16 = *(undefined8 *)(peVar23 + 0x38);
        uVar17 = *(undefined8 *)(peVar23 + 0x40);
        uVar18 = *(undefined8 *)(peVar23 + 0x48);
        uVar19 = *(undefined8 *)(peVar23 + 0x50);
        uVar20 = *(undefined8 *)(peVar23 + 0x58);
        *(undefined8 *)*pauVar27 = *(undefined8 *)peVar23;
        *(undefined8 *)(*pauVar27 + 8) = uVar29;
        *(undefined8 *)pauVar27[1] = uVar11;
        *(undefined8 *)(pauVar27[1] + 8) = uVar12;
        *(undefined8 *)pauVar27[2] = uVar13;
        *(undefined8 *)(pauVar27[2] + 8) = uVar14;
        *(undefined8 *)pauVar27[3] = uVar15;
        *(undefined8 *)(pauVar27[3] + 8) = uVar16;
        *(undefined8 *)pauVar27[4] = uVar17;
        *(undefined8 *)(pauVar27[4] + 8) = uVar18;
        *(undefined8 *)pauVar27[5] = uVar19;
        *(undefined8 *)(pauVar27[5] + 8) = uVar20;
        pauVar27 = pauVar26;
        peVar23 = peVar23 + 0x60;
      } while (pauVar26 != (undefined1 (*) [16])&local_1ec0);
      plVar2 = *(long **)param_7;
      puVar36 = puVar25;
      pauVar27 = (undefined1 (*) [16])&local_1ec0;
      for (lVar30 = 0x40; lVar30 != 0; lVar30 = lVar30 + -1) {
        *(undefined8 *)*pauVar27 = *puVar36;
        puVar36 = puVar36 + (ulong)bVar40 * -2 + 1;
        pauVar27 = (undefined1 (*) [16])(pauVar27[-(ulong)bVar40] + 8);
      }
      lVar30 = *plVar2;
      pauVar27 = (undefined1 (*) [16])local_2ac0;
      peVar23 = this;
      if (lVar30 != 0) {
        pauVar26 = (undefined1 (*) [16])local_2ac0;
        pauVar31 = pauVar39;
        pauVar34 = pauVar39;
        pauVar37 = (undefined1 (*) [16])&local_1ec0;
        do {
          iVar5 = *(int *)(*pauVar37 + 4);
          iVar6 = *(int *)(*pauVar37 + 8);
          iVar7 = *(int *)(*pauVar37 + 0xc);
          pauVar35 = pauVar34 + 1;
          iVar8 = *(int *)(pauVar34[0xc0] + 4);
          iVar9 = *(int *)(pauVar34[0xc0] + 8);
          iVar10 = *(int *)(pauVar34[0xc0] + 0xc);
          *(int *)*pauVar37 = *(int *)*pauVar37 + *(int *)pauVar34[0xc0];
          *(int *)(*pauVar37 + 4) = iVar5 + iVar8;
          *(int *)(*pauVar37 + 8) = iVar6 + iVar9;
          *(int *)(*pauVar37 + 0xc) = iVar7 + iVar10;
          auVar41 = minps(*pauVar26,*pauVar31);
          *pauVar26 = auVar41;
          auVar41 = maxps(pauVar26[1],pauVar31[1]);
          pauVar26[1] = auVar41;
          auVar41 = minps(pauVar26[2],pauVar31[2]);
          pauVar26[2] = auVar41;
          auVar41 = maxps(pauVar26[3],pauVar31[3]);
          pauVar26[3] = auVar41;
          auVar41 = minps(pauVar26[4],pauVar31[4]);
          pauVar26[4] = auVar41;
          auVar41 = maxps(pauVar26[5],pauVar31[5]);
          pauVar26[5] = auVar41;
          pauVar26 = pauVar26 + 6;
          pauVar31 = pauVar31 + 6;
          pauVar34 = pauVar35;
          pauVar37 = pauVar37 + 1;
        } while (pauVar39 + lVar30 != pauVar35);
      }
      do {
        uVar29 = *(undefined8 *)(*pauVar27 + 8);
        uVar11 = *(undefined8 *)pauVar27[1];
        uVar12 = *(undefined8 *)(pauVar27[1] + 8);
        pauVar26 = pauVar27 + 6;
        uVar13 = *(undefined8 *)pauVar27[2];
        uVar14 = *(undefined8 *)(pauVar27[2] + 8);
        uVar15 = *(undefined8 *)pauVar27[3];
        uVar16 = *(undefined8 *)(pauVar27[3] + 8);
        uVar17 = *(undefined8 *)pauVar27[4];
        uVar18 = *(undefined8 *)(pauVar27[4] + 8);
        uVar19 = *(undefined8 *)pauVar27[5];
        uVar20 = *(undefined8 *)(pauVar27[5] + 8);
        *(undefined8 *)peVar23 = *(undefined8 *)*pauVar27;
        *(undefined8 *)(peVar23 + 8) = uVar29;
        *(undefined8 *)(peVar23 + 0x10) = uVar11;
        *(undefined8 *)(peVar23 + 0x18) = uVar12;
        *(undefined8 *)(peVar23 + 0x20) = uVar13;
        *(undefined8 *)(peVar23 + 0x28) = uVar14;
        *(undefined8 *)(peVar23 + 0x30) = uVar15;
        *(undefined8 *)(peVar23 + 0x38) = uVar16;
        *(undefined8 *)(peVar23 + 0x40) = uVar17;
        *(undefined8 *)(peVar23 + 0x48) = uVar18;
        *(undefined8 *)(peVar23 + 0x50) = uVar19;
        *(undefined8 *)(peVar23 + 0x58) = uVar20;
        pauVar27 = pauVar26;
        peVar23 = peVar23 + 0x60;
      } while ((undefined1 (*) [16])&local_1ec0 != pauVar26);
      pauVar39 = pauVar39 + 0xe0;
      *puVar25 = local_1ec0;
      puVar25[0x3f] = local_1cc8;
      lVar30 = (long)puVar25 - (long)((ulong)(puVar25 + 1) & 0xfffffffffffffff8);
      puVar36 = (undefined8 *)((long)&local_1ec0 - lVar30);
      puVar38 = (undefined8 *)((ulong)(puVar25 + 1) & 0xfffffffffffffff8);
      for (uVar32 = (ulong)((int)lVar30 + 0x200U >> 3); uVar32 != 0; uVar32 = uVar32 - 1) {
        *puVar38 = *puVar36;
        puVar36 = puVar36 + (ulong)bVar40 * -2 + 1;
        puVar38 = puVar38 + (ulong)bVar40 * -2 + 1;
      }
      pauVar27 = (undefined1 (*) [16])local_2ac0;
      peVar23 = this;
    } while (pauVar39 != pauVar22 + uVar21 * 0xe0);
  }
  if (pauVar22 != local_2b58) {
    embree::alignedFree(pauVar22);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return this;
  }
LAB_00134687:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange const&, unsigned long) */

PrimInfoExtRange *
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
::parallel_object_find(PrimInfoExtRange *param_1,ulong param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  long lVar9;
  long lVar10;
  undefined1 (*pauVar11) [16];
  undefined1 (*pauVar12) [16];
  BinInfoT_conflict *pBVar13;
  BinInfoT_conflict *pBVar14;
  ulong in_RCX;
  embree *peVar15;
  ulong uVar16;
  long lVar17;
  float *pfVar18;
  undefined4 uVar19;
  long in_RDX;
  BinInfoT_conflict *pBVar20;
  ulong uVar21;
  embree *peVar22;
  embree *peVar23;
  long lVar24;
  undefined1 (*pauVar25) [16];
  ulong uVar26;
  ulong uVar27;
  long in_FS_OFFSET;
  byte bVar28;
  undefined1 auVar29 [16];
  uint uVar30;
  int iVar31;
  uint uVar33;
  int iVar34;
  float fVar35;
  uint uVar36;
  int iVar37;
  float fVar38;
  undefined1 auVar32 [16];
  int iVar39;
  uint uVar40;
  uint uVar43;
  uint uVar44;
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  uint uVar45;
  uint uVar47;
  uint uVar48;
  uint uVar49;
  uint uVar50;
  undefined1 auVar46 [16];
  uint uVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  undefined1 auVar56 [16];
  undefined1 auVar57 [16];
  undefined1 local_1f40 [16];
  undefined1 local_1f30 [16];
  undefined1 local_1f20 [16];
  undefined1 local_1f10 [16];
  undefined1 local_1f00 [16];
  ulong *local_1ee8;
  ulong local_1ee0;
  ulong *local_1ed8;
  undefined1 local_1ed0 [8];
  float fStack_1ec8;
  undefined1 local_1ec0 [16];
  ulong local_1eb0 [2];
  float local_1ea0;
  float fStack_1e9c;
  float fStack_1e98;
  float fStack_1e94;
  float local_1e90;
  float fStack_1e8c;
  float fStack_1e88;
  uint uStack_1e84;
  float local_1e80 [128];
  BinInfoT_conflict local_1c80 [3056];
  int local_1090 [4];
  BinInfoT_conflict local_1080 [4];
  int aiStack_107c [127];
  embree local_e80 [4];
  int aiStack_e7c [3];
  int local_e70 [4];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2992];
  embree local_280 [4];
  int aiStack_27c [141];
  long local_48;
  
  bVar28 = 0;
  local_1ed0._4_4_ = _LC8;
  local_1ed0._0_4_ = _LC8;
  fStack_1ec8 = _LC8;
  register0x0000120c = _LC8;
  auVar29._4_4_ = _LC6;
  auVar29._0_4_ = _LC6;
  auVar29._8_4_ = _LC6;
  auVar29._12_4_ = _LC6;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pBVar14 = local_1080;
  pBVar13 = local_1c80;
  do {
    *(undefined1 (*) [16])(pBVar13 + 0x40) = _local_1ed0;
    pBVar20 = pBVar13 + 0x60;
    *(undefined1 (*) [16])(pBVar13 + 0x50) = auVar29;
    *(undefined1 (*) [16])(pBVar13 + 0x20) = _local_1ed0;
    *(undefined1 (*) [16])(pBVar13 + 0x30) = auVar29;
    *(undefined1 (*) [16])pBVar13 = _local_1ed0;
    *(undefined1 (*) [16])(pBVar13 + 0x10) = auVar29;
    *(undefined1 (*) [16])pBVar14 = (undefined1  [16])0x0;
    pBVar14 = pBVar14 + 0x10;
    pBVar13 = pBVar20;
  } while (local_1080 != pBVar20);
  local_1ea0 = *(float *)(in_RDX + 0x20);
  fStack_1e9c = *(float *)(in_RDX + 0x24);
  fStack_1e98 = *(float *)(in_RDX + 0x28);
  fStack_1e94 = *(float *)(in_RDX + 0x2c);
  local_1ee8 = local_1eb0;
  local_1eb0[0] = 0x20;
  auVar32._0_4_ = *(float *)(in_RDX + 0x30) - local_1ea0;
  auVar32._4_4_ = *(float *)(in_RDX + 0x34) - fStack_1e9c;
  auVar32._8_4_ = *(float *)(in_RDX + 0x38) - fStack_1e98;
  auVar32._12_4_ = *(float *)(in_RDX + 0x3c) - fStack_1e94;
  uVar26 = *(ulong *)(in_RDX + 0x40);
  auVar41._4_4_ = _LC11;
  auVar41._0_4_ = _LC11;
  auVar41._8_4_ = _LC11;
  auVar41._12_4_ = _LC11;
  uVar27 = *(ulong *)(in_RDX + 0x48) - uVar26;
  auVar41 = maxps(auVar41,auVar32);
  uVar21 = uVar27 + 0x1ff >> 9;
  auVar42._4_4_ = _LC13;
  auVar42._0_4_ = _LC13;
  auVar42._8_4_ = _LC13;
  auVar42._12_4_ = _LC13;
  auVar32 = divps(auVar42,auVar41);
  local_1e90 = (float)(-(uint)(_LC11 < auVar41._0_4_) & auVar32._0_4_);
  fStack_1e8c = (float)(-(uint)(_LC11 < auVar41._4_4_) & auVar32._4_4_);
  fStack_1e88 = (float)(-(uint)(_LC11 < auVar41._8_4_) & auVar32._8_4_);
  uStack_1e84 = -(uint)(_LC11 < auVar41._12_4_) & auVar32._12_4_;
  local_1ee0 = param_2;
  local_1ed8 = local_1ee8;
  if (uVar21 == 1) {
    peVar23 = local_e80;
    peVar22 = local_280;
    do {
      *(undefined1 (*) [16])(peVar23 + 0x40) = _local_1ed0;
      peVar15 = peVar23 + 0x60;
      *(undefined1 (*) [16])(peVar23 + 0x50) = auVar29;
      *(undefined1 (*) [16])(peVar23 + 0x20) = _local_1ed0;
      *(undefined1 (*) [16])(peVar23 + 0x30) = auVar29;
      *(undefined1 (*) [16])peVar23 = _local_1ed0;
      *(undefined1 (*) [16])(peVar23 + 0x10) = auVar29;
      *(undefined1 (*) [16])peVar22 = (undefined1  [16])0x0;
      peVar23 = peVar15;
      peVar22 = peVar22 + 0x10;
    } while (local_280 != peVar15);
    pauVar25 = (undefined1 (*) [16])(*(long *)param_2 + uVar26 * 0x40);
    if (uVar27 == 1) {
LAB_00134fe5:
      auVar32 = pauVar25[1];
      auVar42 = *pauVar25;
      iVar31 = *(int *)(pauVar25[1] + 0xc);
      uVar30 = (uint)(((auVar32._0_4_ + auVar42._0_4_) - local_1ea0) * local_1e90 + _LC15);
      uVar33 = (uint)(((auVar32._4_4_ + auVar42._4_4_) - fStack_1e9c) * fStack_1e8c + _LC15);
      uVar36 = (uint)(((auVar32._8_4_ + auVar42._8_4_) - fStack_1e98) * fStack_1e88 + _LC15);
      uVar40 = -(uint)((int)uVar30 < (int)__LC17);
      uVar43 = -(uint)((int)uVar33 < (int)_UNK_00144104);
      uVar44 = -(uint)((int)uVar36 < (int)_UNK_00144108);
      uVar30 = uVar40 & uVar30 | ~uVar40 & __LC17;
      uVar33 = uVar43 & uVar33 | ~uVar43 & _UNK_00144104;
      uVar36 = uVar44 & uVar36 | ~uVar44 & _UNK_00144108;
      lVar24 = (long)(int)(~-(uint)((int)uVar30 < 0) & uVar30);
      peVar23 = local_e80 + lVar24 * 0x60;
      *(int *)(local_e80 + (lVar24 + 0xc0) * 0x10) =
           *(int *)(local_e80 + (lVar24 + 0xc0) * 0x10) + iVar31;
      auVar41 = minps(*(undefined1 (*) [16])peVar23,auVar42);
      *(undefined1 (*) [16])peVar23 = auVar41;
      auVar41 = maxps(*(undefined1 (*) [16])(local_e70 + lVar24 * 0x18),auVar32);
      *(undefined1 (*) [16])(local_e70 + lVar24 * 0x18) = auVar41;
      lVar24 = (long)(int)(~-(uint)((int)uVar33 < 0) & uVar33);
      lVar17 = lVar24 * 0x60;
      aiStack_27c[lVar24 * 4] = aiStack_27c[lVar24 * 4] + iVar31;
      auVar41 = minps(*(undefined1 (*) [16])(local_e60 + lVar17),auVar42);
      *(undefined1 (*) [16])(local_e60 + lVar17) = auVar41;
      auVar41 = maxps(*(undefined1 (*) [16])(local_e50 + lVar17),auVar32);
      *(undefined1 (*) [16])(local_e50 + lVar17) = auVar41;
      lVar24 = (long)(int)(~-(uint)((int)uVar36 < 0) & uVar36);
      lVar17 = lVar24 * 0x60;
      aiStack_27c[lVar24 * 4 + 1] = aiStack_27c[lVar24 * 4 + 1] + iVar31;
      auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar17),auVar42);
      *(undefined1 (*) [16])(local_e40 + lVar17) = auVar42;
      auVar32 = maxps(*(undefined1 (*) [16])(local_e30 + lVar17),auVar32);
      *(undefined1 (*) [16])(local_e30 + lVar17) = auVar32;
    }
    else {
      pauVar11 = pauVar25;
      do {
        auVar32 = pauVar11[1];
        auVar42 = *pauVar11;
        pauVar12 = pauVar11 + 8;
        auVar41 = pauVar11[5];
        auVar56 = pauVar11[4];
        uVar30 = (uint)(((auVar32._0_4_ + auVar42._0_4_) - local_1ea0) * local_1e90 + _LC15);
        uVar33 = (uint)(((auVar32._4_4_ + auVar42._4_4_) - fStack_1e9c) * fStack_1e8c + _LC15);
        uVar36 = (uint)(((auVar32._8_4_ + auVar42._8_4_) - fStack_1e98) * fStack_1e88 + _LC15);
        uVar40 = -(uint)((int)uVar30 < (int)__LC17);
        uVar43 = -(uint)((int)uVar33 < (int)_UNK_00144104);
        uVar44 = -(uint)((int)uVar36 < (int)_UNK_00144108);
        uVar30 = uVar30 & uVar40 | ~uVar40 & __LC17;
        uVar33 = uVar33 & uVar43 | ~uVar43 & _UNK_00144104;
        uVar40 = uVar36 & uVar44 | ~uVar44 & _UNK_00144108;
        uVar16 = (ulong)(~-(uint)((int)uVar30 < 0) & uVar30);
        peVar23 = local_e80 + uVar16 * 0x60;
        uVar30 = (uint)(((auVar41._0_4_ + auVar56._0_4_) - local_1ea0) * local_1e90 + _LC15);
        uVar36 = (uint)(((auVar41._4_4_ + auVar56._4_4_) - fStack_1e9c) * fStack_1e8c + _LC15);
        uVar43 = (uint)(((auVar41._8_4_ + auVar56._8_4_) - fStack_1e98) * fStack_1e88 + _LC15);
        uVar44 = -(uint)((int)uVar30 < (int)__LC17);
        uVar47 = -(uint)((int)uVar36 < (int)_UNK_00144104);
        uVar49 = -(uint)((int)uVar43 < (int)_UNK_00144108);
        uVar30 = uVar44 & uVar30 | ~uVar44 & __LC17;
        uVar36 = uVar47 & uVar36 | ~uVar47 & _UNK_00144104;
        uVar43 = uVar49 & uVar43 | ~uVar49 & _UNK_00144108;
        auVar46 = minps(*(undefined1 (*) [16])peVar23,auVar42);
        *(undefined1 (*) [16])peVar23 = auVar46;
        auVar46 = maxps(*(undefined1 (*) [16])(local_e70 + uVar16 * 0x18),auVar32);
        *(undefined1 (*) [16])(local_e70 + uVar16 * 0x18) = auVar46;
        uVar26 = (ulong)(~-(uint)((int)uVar33 < 0) & uVar33);
        lVar24 = uVar26 * 0x60;
        auVar46 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar42);
        *(undefined1 (*) [16])(local_e60 + lVar24) = auVar46;
        auVar46 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar32);
        *(undefined1 (*) [16])(local_e50 + lVar24) = auVar46;
        uVar21 = (ulong)(~-(uint)((int)uVar40 < 0) & uVar40);
        lVar24 = uVar21 * 0x60;
        auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar42);
        *(undefined1 (*) [16])(local_e40 + lVar24) = auVar42;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar32);
        *(undefined1 (*) [16])(local_e30 + lVar24) = auVar32;
        iVar31 = *(int *)(pauVar11[1] + 0xc);
        *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) =
             *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) + iVar31;
        uVar16 = (ulong)(~-(uint)((int)uVar30 < 0) & uVar30);
        aiStack_27c[uVar26 * 4] = aiStack_27c[uVar26 * 4] + iVar31;
        aiStack_27c[uVar21 * 4 + 1] = aiStack_27c[uVar21 * 4 + 1] + iVar31;
        peVar23 = local_e80 + uVar16 * 0x60;
        auVar32 = minps(*(undefined1 (*) [16])peVar23,auVar56);
        *(undefined1 (*) [16])peVar23 = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e70 + uVar16 * 0x18),auVar41);
        *(undefined1 (*) [16])(local_e70 + uVar16 * 0x18) = auVar32;
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        lVar24 = uVar26 * 0x60;
        auVar32 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar56);
        *(undefined1 (*) [16])(local_e60 + lVar24) = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar41);
        *(undefined1 (*) [16])(local_e50 + lVar24) = auVar32;
        uVar21 = (ulong)(~-(uint)((int)uVar43 < 0) & uVar43);
        lVar24 = uVar21 * 0x60;
        auVar32 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar56);
        *(undefined1 (*) [16])(local_e40 + lVar24) = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar41);
        *(undefined1 (*) [16])(local_e30 + lVar24) = auVar32;
        iVar31 = *(int *)(pauVar11[5] + 0xc);
        *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) =
             *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) + iVar31;
        aiStack_27c[uVar26 * 4] = aiStack_27c[uVar26 * 4] + iVar31;
        aiStack_27c[uVar21 * 4 + 1] = aiStack_27c[uVar21 * 4 + 1] + iVar31;
        pauVar11 = pauVar12;
      } while (pauVar25 + (uVar27 - 2 >> 1) * 8 + 8 != pauVar12);
      uVar26 = (uVar27 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar26 < uVar27) {
        pauVar25 = pauVar25 + uVar26 * 4;
        goto LAB_00134fe5;
      }
    }
    lVar24 = 0x1f;
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&)_2_>
              (local_e80,uVar21,uVar26,*(ulong *)(in_RDX + 0x48),0x200,local_1c80,
               (_lambda_embree__range<unsigned_long>_const___1_ *)&local_1ee0,
               (_lambda_embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const___2_
                *)&local_1ee8);
    unique0x10000a3f = _UNK_001440d4;
    local_1ed0._0_4_ = _LC8;
    auVar29._4_12_ = _UNK_001440c4;
    auVar29._0_4_ = _LC6;
    lVar24 = local_1eb0[0] - 1;
  }
  pBVar14 = local_1c80;
  peVar23 = local_e80;
  do {
    uVar5 = *(undefined8 *)(peVar23 + 8);
    uVar6 = *(undefined8 *)(peVar23 + 0x30);
    uVar7 = *(undefined8 *)(peVar23 + 0x38);
    pBVar13 = pBVar14 + 0x60;
    *(undefined8 *)pBVar14 = *(undefined8 *)peVar23;
    *(undefined8 *)(pBVar14 + 8) = uVar5;
    uVar5 = *(undefined8 *)(peVar23 + 0x10);
    uVar8 = *(undefined8 *)(peVar23 + 0x18);
    *(undefined8 *)(pBVar14 + 0x30) = uVar6;
    *(undefined8 *)(pBVar14 + 0x38) = uVar7;
    uVar6 = *(undefined8 *)(peVar23 + 0x50);
    uVar7 = *(undefined8 *)(peVar23 + 0x58);
    *(undefined8 *)(pBVar14 + 0x10) = uVar5;
    *(undefined8 *)(pBVar14 + 0x18) = uVar8;
    uVar5 = *(undefined8 *)(peVar23 + 0x20);
    uVar8 = *(undefined8 *)(peVar23 + 0x28);
    *(undefined8 *)(pBVar14 + 0x50) = uVar6;
    *(undefined8 *)(pBVar14 + 0x58) = uVar7;
    *(undefined8 *)(pBVar14 + 0x20) = uVar5;
    *(undefined8 *)(pBVar14 + 0x28) = uVar8;
    uVar5 = *(undefined8 *)(peVar23 + 0x48);
    *(undefined8 *)(pBVar14 + 0x40) = *(undefined8 *)(peVar23 + 0x40);
    *(undefined8 *)(pBVar14 + 0x48) = uVar5;
    pBVar14 = pBVar13;
    peVar23 = peVar23 + 0x60;
  } while (local_1080 != pBVar13);
  peVar23 = local_280;
  pBVar14 = local_1080;
  for (lVar17 = 0x40; lVar17 != 0; lVar17 = lVar17 + -1) {
    *(undefined8 *)pBVar14 = *(undefined8 *)peVar23;
    peVar23 = peVar23 + ((ulong)bVar28 * -2 + 1) * 8;
    pBVar14 = pBVar14 + (ulong)bVar28 * -0x10 + 8;
  }
  if (lVar24 == 0) {
    local_1ec0 = (undefined1  [16])0x0;
  }
  else {
    lVar17 = lVar24 * 0x10;
    iVar31 = 0;
    iVar34 = 0;
    iVar37 = 0;
    iVar39 = 0;
    pBVar14 = local_1c80 + lVar24 * 0x60;
    pfVar18 = local_1e80 + lVar24 * 4;
    auVar32 = _local_1ed0;
    auVar42 = auVar29;
    auVar41 = _local_1ed0;
    auVar56 = auVar29;
    auVar46 = _local_1ed0;
    auVar57 = auVar29;
    do {
      auVar42 = maxps(auVar42,*(undefined1 (*) [16])(pBVar14 + 0x10));
      auVar32 = minps(auVar32,*(undefined1 (*) [16])pBVar14);
      pBVar13 = pBVar14 + -0x60;
      iVar1 = *(int *)(local_1080 + lVar17);
      iVar2 = *(int *)((long)aiStack_107c + lVar17);
      iVar3 = *(int *)((long)aiStack_107c + lVar17 + 4);
      iVar4 = *(int *)((long)aiStack_107c + lVar17 + 8);
      auVar56 = maxps(auVar56,*(undefined1 (*) [16])(pBVar14 + 0x30));
      pfVar18[3] = 0.0;
      auVar41 = minps(auVar41,*(undefined1 (*) [16])(pBVar14 + 0x20));
      auVar57 = maxps(auVar57,*(undefined1 (*) [16])(pBVar14 + 0x50));
      iVar31 = iVar1 + iVar31;
      iVar34 = iVar2 + iVar34;
      iVar37 = iVar3 + iVar37;
      iVar39 = iVar4 + iVar39;
      auVar46 = minps(auVar46,*(undefined1 (*) [16])(pBVar14 + 0x40));
      *(int *)(local_e80 + lVar17) = iVar31;
      *(int *)((long)aiStack_e7c + lVar17) = iVar34;
      *(int *)((long)aiStack_e7c + lVar17 + 4) = iVar37;
      *(int *)((long)aiStack_e7c + lVar17 + 8) = iVar39;
      lVar17 = lVar17 + -0x10;
      fVar35 = auVar42._4_4_ - auVar32._4_4_;
      fVar38 = auVar42._8_4_ - auVar32._8_4_;
      *pfVar18 = (auVar42._0_4_ - auVar32._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar56._4_4_ - auVar41._4_4_;
      fVar38 = auVar56._8_4_ - auVar41._8_4_;
      pfVar18[1] = (auVar56._0_4_ - auVar41._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar57._4_4_ - auVar46._4_4_;
      fVar38 = auVar57._8_4_ - auVar46._8_4_;
      pfVar18[2] = (auVar57._0_4_ - auVar46._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      pBVar14 = pBVar13;
      pfVar18 = pfVar18 + -4;
    } while (pBVar13 != local_1c80);
    local_1ec0 = (undefined1  [16])0x0;
    iVar31 = (1 << ((byte)in_RCX & 0x1f)) + -1;
    if (1 < local_1eb0[0]) {
      lVar24 = 0x10;
      uVar26 = in_RCX & 0xffffffff;
      local_1f00 = (undefined1  [16])0x0;
      local_1f10 = (undefined1  [16])0x0;
      pBVar14 = local_1c80;
      auVar32 = auVar29;
      auVar42 = auVar29;
      uVar30 = __LC20;
      uVar33 = _UNK_001440e4;
      uVar36 = _UNK_001440e8;
      uVar40 = _UNK_001440ec;
      local_1f40 = _local_1ed0;
      local_1f30 = _local_1ed0;
      local_1f20 = _local_1ed0;
      do {
        auVar29 = maxps(auVar29,*(undefined1 (*) [16])(pBVar14 + 0x50));
        local_1f40 = minps(local_1f40,*(undefined1 (*) [16])(pBVar14 + 0x40));
        local_1f10._0_4_ = local_1f10._0_4_ + *(int *)((long)local_1090 + lVar24);
        local_1f10._4_4_ = local_1f10._4_4_ + *(int *)((long)local_1090 + lVar24 + 4);
        local_1f10._8_4_ = local_1f10._8_4_ + *(int *)((long)local_1090 + lVar24 + 8);
        local_1f10._12_4_ = local_1f10._12_4_ + *(int *)((long)local_1090 + lVar24 + 0xc);
        auVar42 = maxps(auVar42,*(undefined1 (*) [16])(pBVar14 + 0x10));
        local_1f20 = minps(local_1f20,*(undefined1 (*) [16])pBVar14);
        fVar35 = auVar29._4_4_ - local_1f40._4_4_;
        fVar38 = auVar29._8_4_ - local_1f40._8_4_;
        local_1f30 = minps(local_1f30,*(undefined1 (*) [16])(pBVar14 + 0x20));
        fVar54 = auVar42._4_4_ - local_1f20._4_4_;
        fVar55 = auVar42._8_4_ - local_1f20._8_4_;
        auVar32 = maxps(auVar32,*(undefined1 (*) [16])(pBVar14 + 0x30));
        fVar52 = auVar32._4_4_ - local_1f30._4_4_;
        fVar53 = auVar32._8_4_ - local_1f30._8_4_;
        uVar45 = (uint)(local_1f10._0_4_ + iVar31) >> uVar26;
        uVar48 = (uint)(local_1f10._4_4_ + iVar31) >> uVar26;
        uVar50 = (uint)(local_1f10._8_4_ + iVar31) >> uVar26;
        uVar51 = (uint)(local_1f10._12_4_ + iVar31) >> uVar26;
        uVar43 = (uint)(*(int *)(local_e80 + lVar24) + iVar31) >> uVar26;
        uVar44 = (uint)(*(int *)((long)aiStack_e7c + lVar24) + iVar31) >> uVar26;
        uVar47 = (uint)(*(int *)((long)aiStack_e7c + lVar24 + 4) + iVar31) >> uVar26;
        uVar49 = (uint)(*(int *)((long)aiStack_e7c + lVar24 + 8) + iVar31) >> uVar26;
        fVar35 = (fVar35 + fVar38) * (auVar29._0_4_ - local_1f40._0_4_) + fVar35 * fVar38;
        pfVar18 = (float *)((long)local_1e80 + lVar24);
        lVar17 = lVar24 + 4;
        lVar9 = lVar24 + 8;
        lVar10 = lVar24 + 0xc;
        lVar24 = lVar24 + 0x10;
        fVar38 = ((float)(int)(uVar45 & _LC25) + (float)((int)uVar45 >> 0x1f & __LC19)) *
                 ((fVar54 + fVar55) * (auVar42._0_4_ - local_1f20._0_4_) + fVar54 * fVar55) +
                 ((float)(int)(uVar43 & _LC25) + (float)((int)uVar43 >> 0x1f & __LC19)) * *pfVar18;
        fVar52 = ((float)(int)(uVar48 & _UNK_00144114) +
                 (float)((int)uVar48 >> 0x1f & _UNK_00144124)) *
                 ((fVar52 + fVar53) * (auVar32._0_4_ - local_1f30._0_4_) + fVar52 * fVar53) +
                 ((float)(int)(uVar44 & _UNK_00144114) +
                 (float)((int)uVar44 >> 0x1f & _UNK_00144124)) *
                 *(float *)((long)local_1e80 + lVar17);
        fVar53 = ((float)(int)(uVar50 & _UNK_00144118) +
                 (float)((int)uVar50 >> 0x1f & _UNK_00144128)) * fVar35 +
                 ((float)(int)(uVar47 & _UNK_00144118) +
                 (float)((int)uVar47 >> 0x1f & _UNK_00144128)) *
                 *(float *)((long)local_1e80 + lVar9);
        fVar35 = ((float)(int)(uVar51 & _UNK_0014411c) +
                 (float)((int)uVar51 >> 0x1f & _UNK_0014412c)) * fVar35 +
                 ((float)(int)(uVar49 & _UNK_0014411c) +
                 (float)((int)uVar49 >> 0x1f & _UNK_0014412c)) *
                 *(float *)((long)local_1e80 + lVar10);
        uVar43 = -(uint)(fVar38 < SUB164(_local_1ed0,0));
        uVar44 = -(uint)(fVar52 < SUB164(_local_1ed0,4));
        uVar47 = -(uint)(fVar53 < SUB164(_local_1ed0,8));
        uVar49 = -(uint)(fVar35 < SUB164(_local_1ed0,0xc));
        local_1f00._0_4_ = uVar30 & uVar43 | ~uVar43 & local_1f00._0_4_;
        local_1f00._4_4_ = uVar33 & uVar44 | ~uVar44 & local_1f00._4_4_;
        local_1f00._8_4_ = uVar36 & uVar47 | ~uVar47 & local_1f00._8_4_;
        local_1f00._12_4_ = uVar40 & uVar49 | ~uVar49 & local_1f00._12_4_;
        auVar46._0_4_ = ~uVar43 & (uint)SUB164(_local_1ed0,0);
        auVar46._4_4_ = ~uVar44 & (uint)SUB164(_local_1ed0,4);
        auVar46._8_4_ = ~uVar47 & (uint)SUB164(_local_1ed0,8);
        auVar46._12_4_ = ~uVar49 & (uint)SUB164(_local_1ed0,0xc);
        auVar56._0_4_ = uVar43 & (uint)fVar38;
        auVar56._4_4_ = uVar44 & (uint)fVar52;
        auVar56._8_4_ = uVar47 & (uint)fVar53;
        auVar56._12_4_ = uVar49 & (uint)fVar35;
        _local_1ed0 = auVar56 | auVar46;
        pBVar14 = pBVar14 + 0x60;
        uVar30 = uVar30 + __LC20;
        uVar33 = uVar33 + _UNK_001440e4;
        uVar36 = uVar36 + _UNK_001440e8;
        uVar40 = uVar40 + _UNK_001440ec;
      } while (lVar24 != local_1eb0[0] << 4);
      local_1ec0._4_4_ = local_1f00._4_4_;
      local_1ec0._0_4_ = local_1f00._0_4_;
      local_1ec0._8_4_ = local_1f00._8_4_;
      local_1ec0._12_4_ = local_1f00._12_4_;
    }
  }
  if ((local_1e90 != 0.0) && ((float)local_1ed0._0_4_ <= _LC21)) {
    uVar19 = 0;
    fVar35 = (float)local_1ed0._0_4_;
    iVar31 = local_1ec0._0_4_;
    if (local_1ec0._0_4_ != 0) goto LAB_00134f30;
  }
  iVar31 = 0;
  uVar19 = 0xffffffff;
  fVar35 = _LC8;
LAB_00134f30:
  if (((fStack_1e8c != 0.0) && ((float)local_1ed0._4_4_ < fVar35)) && (local_1ec0._4_4_ != 0)) {
    uVar19 = 1;
    iVar31 = local_1ec0._4_4_;
    fVar35 = (float)local_1ed0._4_4_;
  }
  if (((fStack_1e88 != 0.0) && (fStack_1ec8 < fVar35)) && (local_1ec0._8_4_ != 0)) {
    uVar19 = 2;
    iVar31 = local_1ec0._8_4_;
    fVar35 = fStack_1ec8;
  }
  *(undefined4 *)(param_1 + 4) = uVar19;
  *(int *)(param_1 + 8) = iVar31;
  *(undefined4 *)(param_1 + 0xc) = 0;
  *(ulong *)(param_1 + 0x10) = local_1eb0[0];
  *(float *)param_1 = fVar35;
  *(float *)(param_1 + 0x20) = local_1ea0;
  *(float *)(param_1 + 0x24) = fStack_1e9c;
  *(float *)(param_1 + 0x28) = fStack_1e98;
  *(float *)(param_1 + 0x2c) = fStack_1e94;
  *(float *)(param_1 + 0x30) = local_1e90;
  *(float *)(param_1 + 0x34) = fStack_1e8c;
  *(float *)(param_1 + 0x38) = fStack_1e88;
  *(uint *)(param_1 + 0x3c) = uStack_1e84;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   32ul>::find(embree::sse2::PrimInfoExtRange&, unsigned long) */

HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
* __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
::find(HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
       *this,PrimInfoExtRange *param_1,ulong param_2)

{
  undefined1 (*pauVar1) [16];
  undefined1 auVar2 [16];
  long lVar3;
  bool bVar4;
  ulong uVar5;
  uint uVar6;
  ulong uVar7;
  undefined1 (*pauVar8) [16];
  char extraout_DL;
  ulong uVar9;
  long lVar10;
  ulong uVar11;
  long lVar12;
  long in_FS_OFFSET;
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  
  uVar5 = *(ulong *)(param_2 + 0x40);
  lVar3 = *(long *)(in_FS_OFFSET + 0x28);
  uVar7 = *(ulong *)(param_2 + 0x48);
  uVar9 = uVar7 - uVar5;
  if (uVar9 < 2) {
    *(undefined8 *)(this + 8) = 0;
    *(undefined8 *)this = 0xffffffff7f800000;
    goto LAB_0013520b;
  }
  bVar4 = *(ulong *)(param_2 + 0x50) != uVar7 && uVar9 < 5;
  if (bVar4) {
    uVar9 = uVar5 + 1;
    lVar12 = uVar5 * 0x40;
    uVar11 = uVar9;
    if (uVar5 < uVar7 - 1) {
      do {
        if (uVar9 < uVar7) {
          pauVar8 = (undefined1 (*) [16])(uVar5 * 0x40 + *(long *)param_1);
          lVar10 = *(long *)param_1 + lVar12;
          pauVar1 = pauVar8 + 1;
          auVar2 = *pauVar8;
          uVar5 = uVar9;
          do {
            auVar15 = minps(*pauVar1,*(undefined1 (*) [16])(lVar10 + 0x50));
            auVar13 = maxps(auVar2,*(undefined1 (*) [16])(lVar10 + 0x40));
            auVar14._4_4_ = -(uint)(auVar13._4_4_ <= auVar15._4_4_);
            auVar14._0_4_ = -(uint)(auVar13._0_4_ <= auVar15._0_4_);
            auVar14._8_4_ = -(uint)(auVar13._8_4_ <= auVar15._8_4_);
            auVar14._12_4_ = -(uint)(auVar13._12_4_ <= auVar15._12_4_);
            uVar6 = movmskps((int)pauVar8,auVar14);
            pauVar8 = (undefined1 (*) [16])(ulong)(~uVar6 & 7);
            if ((~uVar6 & 7) == 0) {
              bVar4 = false;
              break;
            }
            uVar5 = uVar5 + 1;
            lVar10 = lVar10 + 0x40;
          } while (uVar5 < uVar7);
        }
        if (uVar11 == uVar7 - 1) goto LAB_0013522d;
        uVar5 = uVar11;
        uVar11 = uVar11 + 1;
      } while( true );
    }
    goto LAB_00135232;
  }
  if (*(ulong *)(param_2 + 0x50) != uVar7) goto LAB_00135270;
LAB_001351f1:
  if (0x3ff < uVar9) {
    parallel_object_find((PrimInfoExtRange *)this,(ulong)param_1);
    goto LAB_0013520b;
  }
  goto LAB_00135240;
LAB_0013522d:
  if (!bVar4) {
LAB_00135270:
    uVar5 = getProperties((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
                           *)param_1,(PrimInfoExtRange *)param_2);
    if (extraout_DL == '\0') {
      lVar12 = *(long *)(param_2 + 0x50);
      lVar10 = *(long *)(param_2 + 0x48);
      if (lVar12 == lVar10) {
        uVar9 = lVar12 - *(long *)(param_2 + 0x40);
      }
      else {
        uVar7 = lVar12 - lVar10;
        if (uVar5 <= uVar7) {
          openNodesBasedOnExtend
                    ((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
                      *)param_1,(PrimInfoExtRange *)param_2);
          lVar10 = *(long *)(param_2 + 0x48);
          uVar7 = *(long *)(param_2 + 0x50) - lVar10;
        }
        if (uVar7 < *(long *)(param_1 + 0x10) - 1U) {
          *(long *)(param_2 + 0x50) = lVar10;
        }
        uVar9 = lVar10 - *(long *)(param_2 + 0x40);
      }
    }
    else {
      *(long *)(param_2 + 0x50) = *(long *)(param_2 + 0x48);
      uVar9 = *(long *)(param_2 + 0x48) - *(long *)(param_2 + 0x40);
    }
    goto LAB_001351f1;
  }
LAB_00135232:
  *(ulong *)(param_2 + 0x50) = uVar7;
LAB_00135240:
  sequential_object_find((PrimInfoExtRange *)this,(ulong)param_1);
LAB_0013520b:
  if (lVar3 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator, bool) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(unsigned_long)#8}>
::recurse(ulong *param_1,long *param_2,char param_3)

{
  long *plVar1;
  undefined1 *puVar2;
  int *piVar3;
  PrimInfoExtRange *pPVar4;
  long lVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined4 uVar10;
  long lVar11;
  undefined8 *puVar12;
  float *pfVar13;
  ulong uVar14;
  undefined8 uVar15;
  long lVar16;
  MutexSys *this;
  TaskScheduler *this_00;
  ulong uVar17;
  undefined8 *puVar18;
  ulong uVar19;
  ulong uVar20;
  long lVar21;
  undefined8 *puVar22;
  ulong *puVar23;
  undefined1 *puVar24;
  undefined1 *puVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  ulong *local_a00;
  FastAllocator *local_9b8;
  undefined8 local_9a8;
  undefined8 uStack_9a0;
  undefined8 local_998;
  long lStack_990;
  undefined8 local_988;
  undefined8 uStack_980;
  undefined8 local_978;
  undefined8 uStack_970;
  long local_968;
  long local_960;
  undefined8 local_958;
  undefined8 local_948;
  undefined8 uStack_940;
  undefined8 local_938;
  undefined8 uStack_930;
  undefined4 local_928;
  undefined4 uStack_924;
  undefined4 uStack_920;
  undefined4 uStack_91c;
  undefined4 local_918;
  undefined4 uStack_914;
  undefined4 uStack_910;
  undefined4 uStack_90c;
  long local_908;
  long local_900;
  undefined8 local_8f8;
  ulong local_8e8;
  undefined1 local_8e0;
  undefined4 local_8d8;
  undefined4 uStack_8d4;
  undefined4 uStack_8d0;
  undefined4 uStack_8cc;
  float local_8c8;
  float fStack_8c4;
  float fStack_8c0;
  float fStack_8bc;
  undefined4 local_8b8;
  undefined4 uStack_8b4;
  undefined4 uStack_8b0;
  undefined4 uStack_8ac;
  float local_8a8;
  float fStack_8a4;
  float fStack_8a0;
  float fStack_89c;
  long local_898;
  long lStack_890;
  long local_888;
  ulong local_878;
  ulong local_870;
  undefined8 local_868;
  undefined8 uStack_860;
  undefined8 local_858;
  undefined8 uStack_850;
  undefined8 local_848;
  undefined4 uStack_840;
  undefined4 uStack_83c;
  float local_838;
  float fStack_834;
  float fStack_830;
  float fStack_82c;
  ulong local_828;
  ulong uStack_820;
  ulong local_818;
  float local_808 [16];
  undefined8 local_7c8 [16];
  ulong local_748;
  undefined1 local_740 [8];
  undefined8 local_738;
  undefined8 uStack_730;
  undefined8 local_728;
  long alStack_720 [4];
  undefined8 uStack_700;
  long local_6f8;
  long local_6f0;
  undefined8 local_6e8;
  ulong local_6d8;
  undefined1 local_6d0;
  undefined8 local_6c8;
  undefined8 uStack_6c0;
  undefined8 local_6b8;
  undefined8 uStack_6b0;
  undefined4 local_6a8;
  undefined4 uStack_6a4;
  undefined4 uStack_6a0;
  undefined4 uStack_69c;
  undefined4 local_698;
  undefined4 uStack_694;
  undefined4 uStack_690;
  undefined4 uStack_68c;
  long local_688;
  long local_680;
  undefined8 local_678;
  ulong local_668;
  undefined1 local_660;
  undefined4 local_658;
  undefined4 uStack_654;
  undefined4 uStack_650;
  undefined4 local_648;
  undefined4 uStack_644;
  undefined4 uStack_640;
  long local_618;
  long lStack_610;
  undefined1 local_5f0;
  undefined4 uStack_5e8;
  undefined4 uStack_5e4;
  undefined4 uStack_5e0;
  undefined4 uStack_5d8;
  undefined4 uStack_5d4;
  undefined4 uStack_5d0;
  long local_5a8;
  long local_5a0;
  undefined1 local_580;
  undefined4 uStack_578;
  undefined4 uStack_574;
  undefined4 uStack_570;
  undefined4 uStack_568;
  undefined4 uStack_564;
  undefined4 uStack_560;
  long local_538;
  long local_530;
  undefined1 local_510;
  undefined4 uStack_508;
  undefined4 uStack_504;
  undefined4 uStack_500;
  undefined4 uStack_4f8;
  undefined4 uStack_4f4;
  undefined4 uStack_4f0;
  long local_4c8;
  long local_4c0;
  undefined1 local_4a0;
  undefined4 uStack_498;
  undefined4 uStack_494;
  undefined4 uStack_490;
  undefined4 uStack_488;
  undefined4 uStack_484;
  undefined4 uStack_480;
  long local_458;
  long local_450;
  undefined1 local_430;
  undefined4 uStack_428;
  undefined4 uStack_424;
  undefined4 uStack_420;
  undefined4 uStack_418;
  undefined4 uStack_414;
  undefined4 uStack_410;
  long local_3e8;
  long local_3e0;
  undefined1 local_3c0;
  undefined4 uStack_3b8;
  undefined4 uStack_3b4;
  undefined4 uStack_3b0;
  undefined4 uStack_3a8;
  undefined4 uStack_3a4;
  undefined4 uStack_3a0;
  long local_378;
  long local_370;
  undefined1 local_350;
  undefined4 uStack_348;
  undefined4 uStack_344;
  undefined4 uStack_340;
  undefined4 uStack_338;
  undefined4 uStack_334;
  undefined4 uStack_330;
  long local_308;
  long local_300;
  undefined1 local_2e0;
  undefined4 uStack_2d8;
  undefined4 uStack_2d4;
  undefined4 uStack_2d0;
  undefined4 uStack_2c8;
  undefined4 uStack_2c4;
  undefined4 uStack_2c0;
  long local_298;
  long local_290;
  undefined1 local_270;
  undefined4 uStack_268;
  undefined4 uStack_264;
  undefined4 uStack_260;
  undefined4 uStack_258;
  undefined4 uStack_254;
  undefined4 uStack_250;
  long local_228;
  long local_220;
  undefined1 local_200;
  undefined4 uStack_1f8;
  undefined4 uStack_1f4;
  undefined4 uStack_1f0;
  undefined4 uStack_1e8;
  undefined4 uStack_1e4;
  undefined4 uStack_1e0;
  long local_1b8;
  long local_1b0;
  undefined1 local_190;
  undefined4 uStack_188;
  undefined4 uStack_184;
  undefined4 uStack_180;
  undefined4 uStack_178;
  undefined4 uStack_174;
  undefined4 uStack_170;
  long local_148;
  long local_140;
  undefined1 local_120;
  undefined4 uStack_118;
  undefined4 uStack_114;
  undefined4 uStack_110;
  undefined4 uStack_108;
  undefined4 uStack_104;
  undefined4 uStack_100;
  long local_d8;
  long local_d0;
  undefined1 local_b0;
  undefined4 uStack_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  long local_68;
  long local_60;
  undefined1 auStack_48 [8];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_9b8 = in_stack_00000008;
  if (in_stack_00000008 == (FastAllocator *)0x0) {
    local_9b8 = *(FastAllocator **)param_1[10];
    if (*(long *)(in_FS_OFFSET + lRam0000000000135a23) == 0) {
      this = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
                    /* WARNING: Subroutine does not return */
      embree::MutexSys::MutexSys(this);
    }
    in_stack_00000010 = (ulong *)(*(long *)(in_FS_OFFSET + lRam0000000000135a23) + 0x40);
  }
  if ((param_3 != '\0') && ((ulong)(param_2[0xb] - param_2[10]) <= param_1[6])) {
    embree::Scene::progressMonitor(0.0);
  }
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
  ::find((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
          *)local_808,(PrimInfoExtRange *)param_1[9],(ulong)(param_2 + 2));
  lVar21 = param_2[10];
  uVar20 = param_2[0xb] - lVar21;
  if (((uVar20 <= param_1[3]) || (param_1[1] <= *param_2 + 8U)) ||
     ((uVar20 <= param_1[4] &&
      (fVar27 = *(float *)((long)param_2 + 0x24) - *(float *)((long)param_2 + 0x14),
      fVar27 = (*(float *)(param_2 + 4) - *(float *)(param_2 + 2)) *
               (fVar27 + (*(float *)(param_2 + 5) - *(float *)(param_2 + 3))) +
               fVar27 * (*(float *)(param_2 + 5) - *(float *)(param_2 + 3)),
      (float)((uVar20 - 1) + (1L << ((byte)param_1[2] & 0x3f)) >> ((byte)param_1[2] & 0x3f)) *
      fVar27 * *(float *)((long)param_1 + 0x2c) <=
      fVar27 * *(float *)(param_1 + 5) + *(float *)((long)param_1 + 0x2c) * local_808[0])))) {
    lVar11 = param_2[0xb] * 0x40;
    puVar12 = (undefined8 *)(*(long *)param_1[9] + lVar11);
    puVar22 = (undefined8 *)(*(long *)param_1[9] + lVar21 * 0x40);
    if (puVar12 != puVar22) {
      lVar11 = lVar11 + lVar21 * -0x40;
      uVar20 = lVar11 >> 6;
      if (uVar20 == 0) {
        std::
        __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar22,puVar12,0xfffffffffffffffe);
      }
      else {
        lVar21 = 0x3f;
        if (uVar20 != 0) {
          for (; uVar20 >> lVar21 == 0; lVar21 = lVar21 + -1) {
          }
        }
        std::
        __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar22,puVar12,(long)(int)lVar21 * 2);
        if (0x400 < lVar11) {
          puVar18 = puVar22 + 0x80;
          std::
          __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
                    (puVar22);
          for (; puVar12 != puVar18; puVar18 = puVar18 + 8) {
            fVar27 = *(float *)(puVar18 + 5);
            uVar6 = *puVar18;
            uVar7 = puVar18[1];
            uVar8 = puVar18[2];
            uVar9 = puVar18[3];
            uVar15 = puVar18[4];
            fVar28 = *(float *)(puVar18 + -3);
            puVar22 = puVar18;
            while (fVar27 < fVar28) {
              puVar22[4] = puVar22[-4];
              *puVar22 = puVar22[-8];
              puVar22[1] = puVar22[-7];
              puVar22[2] = puVar22[-6];
              puVar22[3] = puVar22[-5];
              *(undefined4 *)(puVar22 + 5) = *(undefined4 *)(puVar22 + -3);
              fVar28 = *(float *)(puVar22 + -0xb);
              puVar22 = puVar22 + -8;
            }
            puVar22[4] = uVar15;
            *puVar22 = uVar6;
            puVar22[1] = uVar7;
            puVar22[2] = uVar8;
            puVar22[3] = uVar9;
            *(float *)(puVar22 + 5) = fVar27;
          }
          goto LAB_0013552c;
        }
      }
      std::
      __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar22,puVar12);
    }
LAB_0013552c:
    puVar12 = (undefined8 *)createLargeLeaf(param_1,param_2);
  }
  else {
    HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
    ::split((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
             *)param_1[9],(BinSplit *)local_808,(PrimInfoExtRange *)(param_2 + 2),
            (PrimInfoExtRange *)&local_9a8,(PrimInfoExtRange *)&local_948);
    uVar10 = _LC8;
    fVar27 = _LC6;
    local_740[0] = 0;
    local_6d0 = 0;
    local_738 = local_9a8;
    uStack_730 = uStack_9a0;
    local_748 = *param_2 + 1;
    local_728 = local_998;
    alStack_720[0] = lStack_990;
    local_688 = local_908;
    alStack_720[1] = local_988;
    alStack_720[2] = uStack_980;
    local_680 = local_900;
    alStack_720[3] = local_978;
    uStack_700 = uStack_970;
    local_6c8 = local_948;
    uStack_6c0 = uStack_940;
    local_6f8 = local_968;
    local_6f0 = local_960;
    local_6e8 = local_958;
    local_6b8 = local_938;
    uStack_6b0 = uStack_930;
    local_6a8 = local_928;
    uStack_6a4 = uStack_924;
    uStack_6a0 = uStack_920;
    uStack_69c = uStack_91c;
    local_698 = local_918;
    uStack_694 = uStack_914;
    uStack_690 = uStack_910;
    uStack_68c = uStack_90c;
    local_678 = local_8f8;
    local_6d8 = local_748;
    if (*param_1 < 3) {
      lVar21 = 0xe0;
      uVar20 = 2;
    }
    else {
      uVar20 = 2;
      puVar23 = &local_668;
      do {
        uVar17 = 0;
        uVar19 = 0xffffffffffffffff;
        pfVar13 = (float *)&local_738;
        lVar21 = local_6f0;
        lVar11 = local_6f8;
        fVar28 = _LC6;
        while( true ) {
          if ((param_1[3] < (ulong)(lVar21 - lVar11)) &&
             (fVar26 = (pfVar13[4] - *pfVar13) *
                       ((pfVar13[5] - pfVar13[1]) + (pfVar13[6] - pfVar13[2])) +
                       (pfVar13[5] - pfVar13[1]) * (pfVar13[6] - pfVar13[2]), fVar28 < fVar26)) {
            uVar19 = uVar17;
            fVar28 = fVar26;
          }
          uVar17 = uVar17 + 1;
          if (uVar17 == uVar20) break;
          lVar21 = *(long *)(pfVar13 + 0x2e);
          lVar11 = *(long *)(pfVar13 + 0x2c);
          pfVar13 = pfVar13 + 0x1c;
        }
        if (uVar19 == 0xffffffffffffffff) {
          lVar21 = (long)puVar23 - (long)&local_748;
          goto LAB_00135adf;
        }
        uVar20 = uVar20 + 1;
        local_8e8 = *param_2 + 1;
        local_868 = CONCAT44(uVar10,uVar10);
        uStack_860 = (undefined8 *)CONCAT44(uVar10,uVar10);
        local_858 = (ulong *)CONCAT44(fVar27,fVar27);
        uStack_850 = (ulong *)CONCAT44(fVar27,fVar27);
        pPVar4 = (PrimInfoExtRange *)(&local_748 + uVar19 * 0xe + 2);
        local_848 = (TaskGroupContext *)CONCAT44(uVar10,uVar10);
        local_8e0 = 0;
        local_898 = 0;
        lStack_890 = 0;
        local_888 = 0;
        local_870 = local_870 & 0xffffffffffffff00;
        local_828 = 0;
        uStack_820 = 0;
        local_818 = 0;
        local_8d8 = uVar10;
        uStack_8d4 = uVar10;
        uStack_8d0 = uVar10;
        uStack_8cc = uVar10;
        local_8c8 = fVar27;
        fStack_8c4 = fVar27;
        fStack_8c0 = fVar27;
        fStack_8bc = fVar27;
        local_8b8 = uVar10;
        uStack_8b4 = uVar10;
        uStack_8b0 = uVar10;
        uStack_8ac = uVar10;
        local_8a8 = fVar27;
        fStack_8a4 = fVar27;
        fStack_8a0 = fVar27;
        fStack_89c = fVar27;
        local_878 = local_8e8;
        uStack_840 = uVar10;
        uStack_83c = uVar10;
        local_838 = fVar27;
        fStack_834 = fVar27;
        fStack_830 = fVar27;
        fStack_82c = fVar27;
        HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
        ::find((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
                *)local_7c8,(PrimInfoExtRange *)param_1[9],(ulong)pPVar4);
        HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
        ::split((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>
                 *)param_1[9],(BinSplit *)local_7c8,pPVar4,(PrimInfoExtRange *)&local_8d8,
                (PrimInfoExtRange *)&local_868);
        *(ulong *)(local_740 + uVar19 * 0x70 + -8) = local_8e8;
        local_740[uVar19 * 0x70] = local_8e0;
        (&local_738)[uVar19 * 0xe] = CONCAT44(uStack_8d4,local_8d8);
        (&uStack_730)[uVar19 * 0xe] = CONCAT44(uStack_8cc,uStack_8d0);
        alStack_720[uVar19 * 0xe + 7] = local_888;
        (&local_728)[uVar19 * 0xe] = CONCAT44(fStack_8c4,local_8c8);
        alStack_720[uVar19 * 0xe] = CONCAT44(fStack_8bc,fStack_8c0);
        alStack_720[uVar19 * 0xe + 1] = CONCAT44(uStack_8b4,local_8b8);
        alStack_720[uVar19 * 0xe + 2] = CONCAT44(uStack_8ac,uStack_8b0);
        alStack_720[uVar19 * 0xe + 3] = CONCAT44(fStack_8a4,local_8a8);
        alStack_720[uVar19 * 0xe + 4] = CONCAT44(fStack_89c,fStack_8a0);
        alStack_720[uVar19 * 0xe + 5] = local_898;
        alStack_720[uVar19 * 0xe + 6] = lStack_890;
        *puVar23 = local_878;
        puVar23[2] = local_868;
        puVar23[3] = (ulong)uStack_860;
        *(undefined1 *)(puVar23 + 1) = (undefined1)local_870;
        puVar23[4] = (ulong)local_858;
        puVar23[5] = (ulong)uStack_850;
        *(undefined4 *)(puVar23 + 6) = (undefined4)local_848;
        *(undefined4 *)((long)puVar23 + 0x34) = local_848._4_4_;
        *(undefined4 *)(puVar23 + 7) = uStack_840;
        *(undefined4 *)((long)puVar23 + 0x3c) = uStack_83c;
        puVar23[10] = local_828;
        puVar23[0xb] = uStack_820;
        *(float *)(puVar23 + 8) = local_838;
        *(float *)((long)puVar23 + 0x44) = fStack_834;
        *(float *)(puVar23 + 9) = fStack_830;
        *(float *)((long)puVar23 + 0x4c) = fStack_82c;
        puVar23[0xc] = local_818;
        puVar23 = puVar23 + 0xe;
      } while (uVar20 < *param_1);
      lVar21 = uVar20 * 0x70;
    }
LAB_00135adf:
    local_a00 = &local_748;
    uVar19 = param_1[7];
    if (uVar19 < (ulong)(param_2[0xb] - param_2[10])) {
      local_740[0] = (ulong)(local_6f0 - local_6f8) <= uVar19;
      local_6d0 = (ulong)(local_680 - local_688) <= uVar19;
      if (((((uVar20 != 2) && (local_660 = (ulong)(lStack_610 - local_618) <= uVar19, uVar20 != 3))
           && (local_5f0 = (ulong)(local_5a0 - local_5a8) <= uVar19, uVar20 != 4)) &&
          ((((local_580 = (ulong)(local_530 - local_538) <= uVar19, uVar20 != 5 &&
             (local_510 = (ulong)(local_4c0 - local_4c8) <= uVar19, uVar20 != 6)) &&
            ((local_4a0 = (ulong)(local_450 - local_458) <= uVar19, uVar20 != 7 &&
             ((local_430 = (ulong)(local_3e0 - local_3e8) <= uVar19, uVar20 != 8 &&
              (local_3c0 = (ulong)(local_370 - local_378) <= uVar19, uVar20 != 9)))))) &&
           (local_350 = (ulong)(local_300 - local_308) <= uVar19, uVar20 != 10)))) &&
         ((((local_2e0 = (ulong)(local_290 - local_298) <= uVar19, uVar20 != 0xb &&
            (local_270 = (ulong)(local_220 - local_228) <= uVar19, uVar20 != 0xc)) &&
           (local_200 = (ulong)(local_1b0 - local_1b8) <= uVar19, uVar20 != 0xd)) &&
          ((local_190 = (ulong)(local_140 - local_148) <= uVar19, uVar20 != 0xe &&
           (local_120 = (ulong)(local_d0 - local_d8) <= uVar19, uVar20 == 0x10)))))) {
        local_b0 = (ulong)(local_60 - local_68) <= uVar19;
      }
    }
    if (lVar21 != 0) {
      uVar19 = (lVar21 >> 4) * 0x6db6db6db6db6db7;
      puVar2 = (undefined1 *)((long)local_a00 + lVar21);
      if (uVar19 == 0) {
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                  (local_a00,puVar2,0xfffffffffffffffe);
      }
      else {
        lVar11 = 0x3f;
        if (uVar19 != 0) {
          for (; uVar19 >> lVar11 == 0; lVar11 = lVar11 + -1) {
          }
        }
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                  (local_a00,puVar2,(long)(int)lVar11 * 2);
        if (0x700 < lVar21) {
          std::
          __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                    (local_a00,auStack_48);
          puVar24 = auStack_48;
          do {
            puVar25 = puVar24 + 0x70;
            std::
            __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                      (puVar24);
            puVar24 = puVar25;
          } while (puVar2 != puVar25);
          goto LAB_00135ba5;
        }
      }
      std::
      __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                (local_a00,puVar2);
    }
LAB_00135ba5:
    local_8e8 = 0x80;
    uVar19 = *in_stack_00000010;
    if (local_9b8 != *(FastAllocator **)(uVar19 + 8)) {
      embree::MutexSys::lock();
      if (*(long *)(uVar19 + 8) != 0) {
        LOCK();
        plVar1 = (long *)(*(long *)(uVar19 + 8) + 0x118);
        *plVar1 = *plVar1 + *(long *)(uVar19 + 0xa8) + *(long *)(uVar19 + 0x68);
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar19 + 8) + 0x120);
        *plVar1 = *plVar1 + (((*(long *)(uVar19 + 0x98) + *(long *)(uVar19 + 0x58)) -
                             *(long *)(uVar19 + 0x50)) - *(long *)(uVar19 + 0x90));
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar19 + 8) + 0x128);
        *plVar1 = *plVar1 + *(long *)(uVar19 + 0xb0) + *(long *)(uVar19 + 0x70);
        UNLOCK();
      }
      *(undefined8 *)(uVar19 + 0x48) = 0;
      *(undefined8 *)(uVar19 + 0x58) = 0;
      *(undefined8 *)(uVar19 + 0x50) = 0;
      *(undefined8 *)(uVar19 + 0x68) = 0;
      *(undefined8 *)(uVar19 + 0x70) = 0;
      *(undefined8 *)(uVar19 + 0x60) = 0;
      if (local_9b8 == (FastAllocator *)0x0) {
        *(undefined8 *)(uVar19 + 0x88) = 0;
        uVar15 = 0;
        *(undefined8 *)(uVar19 + 0x98) = 0;
        *(undefined8 *)(uVar19 + 0x90) = 0;
        *(undefined8 *)(uVar19 + 0xa8) = 0;
        *(undefined8 *)(uVar19 + 0xb0) = 0;
      }
      else {
        uVar15 = *(undefined8 *)(local_9b8 + 0x10);
        *(undefined8 *)(uVar19 + 0x88) = 0;
        *(undefined8 *)(uVar19 + 0x98) = 0;
        *(undefined8 *)(uVar19 + 0x60) = uVar15;
        *(undefined8 *)(uVar19 + 0x90) = 0;
        *(undefined8 *)(uVar19 + 0xa8) = 0;
        *(undefined8 *)(uVar19 + 0xb0) = 0;
        *(undefined8 *)(uVar19 + 0xa0) = 0;
        uVar15 = *(undefined8 *)(local_9b8 + 0x10);
      }
      *(undefined8 *)(uVar19 + 0xa0) = uVar15;
      LOCK();
      *(FastAllocator **)(uVar19 + 8) = local_9b8;
      UNLOCK();
      local_878 = uVar19;
      embree::MutexSys::lock();
      puVar23 = *(ulong **)(local_9b8 + 0x138);
      if (puVar23 == *(ulong **)(local_9b8 + 0x140)) {
        std::
        vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
        ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                  ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                    *)(local_9b8 + 0x130),puVar23,&local_878);
      }
      else {
        *puVar23 = uVar19;
        *(long *)(local_9b8 + 0x138) = *(long *)(local_9b8 + 0x138) + 8;
      }
      embree::MutexSys::unlock();
      embree::MutexSys::unlock();
    }
    uVar17 = in_stack_00000010[2];
    in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
    uVar14 = (ulong)(-(int)uVar17 & 0xf);
    uVar19 = uVar17 + 0x80 + uVar14;
    in_stack_00000010[2] = uVar19;
    if (in_stack_00000010[3] < uVar19) {
      in_stack_00000010[2] = uVar17;
      if (in_stack_00000010[4] < 0x200) {
        puVar12 = (undefined8 *)FastAllocator::malloc(local_9b8,&local_8e8,0x40,false);
      }
      else {
        local_878 = in_stack_00000010[4];
        puVar12 = (undefined8 *)FastAllocator::malloc(local_9b8,&local_878,0x40,true);
        in_stack_00000010[1] = (ulong)puVar12;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[3] = local_878;
        if (local_878 < 0x80) {
          local_878 = in_stack_00000010[4];
          in_stack_00000010[2] = 0;
          puVar12 = (undefined8 *)FastAllocator::malloc(local_9b8,&local_878,0x40,false);
          in_stack_00000010[1] = (ulong)puVar12;
          in_stack_00000010[6] =
               (in_stack_00000010[3] + in_stack_00000010[6]) - in_stack_00000010[2];
          in_stack_00000010[2] = 0x80;
          in_stack_00000010[3] = local_878;
          if (local_878 < 0x80) {
            puVar12 = (undefined8 *)0x0;
            in_stack_00000010[2] = 0;
          }
        }
      }
    }
    else {
      in_stack_00000010[6] = in_stack_00000010[6] + uVar14;
      puVar12 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar19);
    }
    *puVar12 = 8;
    puVar12[1] = 8;
    puVar12[2] = 8;
    *(undefined4 *)(puVar12 + 4) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x24) = uVar10;
    *(undefined4 *)(puVar12 + 5) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x2c) = uVar10;
    puVar12[3] = 8;
    *(undefined4 *)(puVar12 + 8) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x44) = uVar10;
    *(undefined4 *)(puVar12 + 9) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x4c) = uVar10;
    *(float *)(puVar12 + 4) = (float)local_738;
    *(undefined4 *)(puVar12 + 0xc) = uVar10;
    *(undefined4 *)((long)puVar12 + 100) = uVar10;
    *(undefined4 *)(puVar12 + 0xd) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x6c) = uVar10;
    *(undefined4 *)(puVar12 + 8) = local_738._4_4_;
    *(float *)(puVar12 + 6) = fVar27;
    *(float *)((long)puVar12 + 0x34) = fVar27;
    *(float *)(puVar12 + 7) = fVar27;
    *(float *)((long)puVar12 + 0x3c) = fVar27;
    *(float *)(puVar12 + 0xe) = fVar27;
    *(float *)((long)puVar12 + 0x74) = fVar27;
    *(float *)(puVar12 + 0xf) = fVar27;
    *(float *)((long)puVar12 + 0x7c) = fVar27;
    *(float *)(puVar12 + 10) = fVar27;
    *(float *)((long)puVar12 + 0x54) = fVar27;
    *(float *)(puVar12 + 0xb) = fVar27;
    *(float *)((long)puVar12 + 0x5c) = fVar27;
    *(undefined4 *)(puVar12 + 0xc) = (undefined4)uStack_730;
    *(undefined4 *)(puVar12 + 6) = (undefined4)local_728;
    *(undefined4 *)(puVar12 + 10) = local_728._4_4_;
    *(undefined4 *)(puVar12 + 0xe) = (undefined4)alStack_720[0];
    *(undefined4 *)((long)puVar12 + 100) = (undefined4)uStack_6c0;
    *(undefined4 *)((long)puVar12 + 0x44) = local_6c8._4_4_;
    *(undefined4 *)((long)puVar12 + 0x24) = (undefined4)local_6c8;
    *(undefined4 *)((long)puVar12 + 0x34) = (undefined4)local_6b8;
    *(undefined4 *)((long)puVar12 + 0x54) = local_6b8._4_4_;
    *(undefined4 *)((long)puVar12 + 0x74) = (undefined4)uStack_6b0;
    if (uVar20 != 2) {
      *(undefined4 *)(puVar12 + 9) = uStack_654;
      *(undefined4 *)(puVar12 + 0xd) = uStack_650;
      *(undefined4 *)(puVar12 + 5) = local_658;
      *(undefined4 *)(puVar12 + 7) = local_648;
      *(undefined4 *)(puVar12 + 0xb) = uStack_644;
      *(undefined4 *)(puVar12 + 0xf) = uStack_640;
      if (uVar20 != 3) {
        *(undefined4 *)((long)puVar12 + 0x4c) = uStack_5e4;
        *(undefined4 *)((long)puVar12 + 0x6c) = uStack_5e0;
        *(undefined4 *)((long)puVar12 + 0x2c) = uStack_5e8;
        *(undefined4 *)((long)puVar12 + 0x3c) = uStack_5d8;
        *(undefined4 *)((long)puVar12 + 0x5c) = uStack_5d4;
        *(undefined4 *)((long)puVar12 + 0x7c) = uStack_5d0;
        if (uVar20 != 4) {
          *(undefined4 *)(puVar12 + 10) = uStack_574;
          *(undefined4 *)(puVar12 + 0xe) = uStack_570;
          *(undefined4 *)(puVar12 + 6) = uStack_578;
          *(undefined4 *)(puVar12 + 8) = uStack_568;
          *(undefined4 *)(puVar12 + 0xc) = uStack_564;
          *(undefined4 *)(puVar12 + 0x10) = uStack_560;
          if (uVar20 != 5) {
            *(undefined4 *)((long)puVar12 + 0x54) = uStack_504;
            *(undefined4 *)((long)puVar12 + 0x74) = uStack_500;
            *(undefined4 *)((long)puVar12 + 0x34) = uStack_508;
            *(undefined4 *)((long)puVar12 + 0x44) = uStack_4f8;
            *(undefined4 *)((long)puVar12 + 100) = uStack_4f4;
            *(undefined4 *)((long)puVar12 + 0x84) = uStack_4f0;
            if (uVar20 != 6) {
              *(undefined4 *)(puVar12 + 0xb) = uStack_494;
              *(undefined4 *)(puVar12 + 0xf) = uStack_490;
              *(undefined4 *)(puVar12 + 7) = uStack_498;
              *(undefined4 *)(puVar12 + 9) = uStack_488;
              *(undefined4 *)(puVar12 + 0xd) = uStack_484;
              *(undefined4 *)(puVar12 + 0x11) = uStack_480;
              if (uVar20 != 7) {
                *(undefined4 *)((long)puVar12 + 0x5c) = uStack_424;
                *(undefined4 *)((long)puVar12 + 0x7c) = uStack_420;
                *(undefined4 *)((long)puVar12 + 0x3c) = uStack_428;
                *(undefined4 *)((long)puVar12 + 0x4c) = uStack_418;
                *(undefined4 *)((long)puVar12 + 0x6c) = uStack_414;
                *(undefined4 *)((long)puVar12 + 0x8c) = uStack_410;
                if (uVar20 != 8) {
                  *(undefined4 *)(puVar12 + 0xc) = uStack_3b4;
                  *(undefined4 *)(puVar12 + 0x10) = uStack_3b0;
                  *(undefined4 *)(puVar12 + 8) = uStack_3b8;
                  *(undefined4 *)(puVar12 + 10) = uStack_3a8;
                  *(undefined4 *)(puVar12 + 0xe) = uStack_3a4;
                  *(undefined4 *)(puVar12 + 0x12) = uStack_3a0;
                  if (uVar20 != 9) {
                    *(undefined4 *)((long)puVar12 + 100) = uStack_344;
                    *(undefined4 *)((long)puVar12 + 0x84) = uStack_340;
                    *(undefined4 *)((long)puVar12 + 0x44) = uStack_348;
                    *(undefined4 *)((long)puVar12 + 0x54) = uStack_338;
                    *(undefined4 *)((long)puVar12 + 0x74) = uStack_334;
                    *(undefined4 *)((long)puVar12 + 0x94) = uStack_330;
                    if (uVar20 != 10) {
                      *(undefined4 *)(puVar12 + 0xd) = uStack_2d4;
                      *(undefined4 *)(puVar12 + 0x11) = uStack_2d0;
                      *(undefined4 *)(puVar12 + 9) = uStack_2d8;
                      *(undefined4 *)(puVar12 + 0xb) = uStack_2c8;
                      *(undefined4 *)(puVar12 + 0xf) = uStack_2c4;
                      *(undefined4 *)(puVar12 + 0x13) = uStack_2c0;
                      if (uVar20 != 0xb) {
                        *(undefined4 *)((long)puVar12 + 0x6c) = uStack_264;
                        *(undefined4 *)((long)puVar12 + 0x8c) = uStack_260;
                        *(undefined4 *)((long)puVar12 + 0x4c) = uStack_268;
                        *(undefined4 *)((long)puVar12 + 0x5c) = uStack_258;
                        *(undefined4 *)((long)puVar12 + 0x7c) = uStack_254;
                        *(undefined4 *)((long)puVar12 + 0x9c) = uStack_250;
                        if (uVar20 != 0xc) {
                          *(undefined4 *)(puVar12 + 0xe) = uStack_1f4;
                          *(undefined4 *)(puVar12 + 0x12) = uStack_1f0;
                          *(undefined4 *)(puVar12 + 10) = uStack_1f8;
                          *(undefined4 *)(puVar12 + 0xc) = uStack_1e8;
                          *(undefined4 *)(puVar12 + 0x10) = uStack_1e4;
                          *(undefined4 *)(puVar12 + 0x14) = uStack_1e0;
                          if (uVar20 != 0xd) {
                            *(undefined4 *)((long)puVar12 + 0x74) = uStack_184;
                            *(undefined4 *)((long)puVar12 + 0x94) = uStack_180;
                            *(undefined4 *)((long)puVar12 + 0x54) = uStack_188;
                            *(undefined4 *)((long)puVar12 + 100) = uStack_178;
                            *(undefined4 *)((long)puVar12 + 0x84) = uStack_174;
                            *(undefined4 *)((long)puVar12 + 0xa4) = uStack_170;
                            if (uVar20 != 0xe) {
                              *(undefined4 *)(puVar12 + 0xf) = uStack_114;
                              *(undefined4 *)(puVar12 + 0x13) = uStack_110;
                              *(undefined4 *)(puVar12 + 0xb) = uStack_118;
                              *(undefined4 *)(puVar12 + 0xd) = uStack_108;
                              *(undefined4 *)(puVar12 + 0x11) = uStack_104;
                              *(undefined4 *)(puVar12 + 0x15) = uStack_100;
                              if (uVar20 == 0x10) {
                                *(undefined4 *)((long)puVar12 + 0x7c) = uStack_a4;
                                *(undefined4 *)((long)puVar12 + 0x9c) = uStack_a0;
                                *(undefined4 *)((long)puVar12 + 0x5c) = uStack_a8;
                                *(undefined4 *)((long)puVar12 + 0x6c) = uStack_98;
                                *(undefined4 *)((long)puVar12 + 0x8c) = uStack_94;
                                *(undefined4 *)((long)puVar12 + 0xac) = uStack_90;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    uVar19 = 0;
    if (param_1[6] < (ulong)(param_2[0xb] - param_2[10])) {
      uStack_860 = local_7c8;
      local_8e8 = 0;
      local_870 = 0;
      local_868 = 1;
      local_858 = local_a00;
      local_878 = uVar20;
      uStack_850 = param_1;
      local_848 = (TaskGroupContext *)&local_8e8;
      lVar21 = embree::TaskScheduler::thread();
      if (lVar21 == 0) {
        this_00 = (TaskScheduler *)embree::TaskScheduler::instance();
        TaskScheduler::
        spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embre___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                  (this_00,(_lambda___1_ *)&local_878,(TaskGroupContext *)&local_8e8,uVar20,true);
      }
      else {
        if (0xfff < *(ulong *)(lVar21 + 0x40080)) {
LAB_00136c8b:
                    /* WARNING: Subroutine does not return */
          abort();
        }
        lVar11 = *(long *)(lVar21 + 0xc00c0);
        uVar19 = lVar11 + 0x40 + (ulong)(-(int)lVar11 & 0x3f);
        if (0x80000 < uVar19) goto LAB_00136c8b;
        *(ulong *)(lVar21 + 0xc00c0) = uVar19;
        puVar22 = (undefined8 *)(lVar21 + 0x40080 + uVar19);
        *puVar22 = &PTR_execute_001439e0;
        puVar22[1] = local_878;
        puVar22[2] = local_870;
        puVar22[3] = local_868;
        puVar22[4] = uStack_860;
        puVar22[5] = local_858;
        puVar22[6] = uStack_850;
        puVar22[7] = local_848;
        lVar16 = *(long *)(lVar21 + 0x40080) * 0x40;
        piVar3 = (int *)(lVar21 + 0x40 + lVar16);
        lVar5 = *(long *)(lVar21 + 0xc0100);
        *(undefined4 *)(lVar21 + 0x44 + lVar16) = 1;
        *(undefined1 *)(lVar21 + 0x48 + lVar16) = 1;
        lVar16 = lVar16 + lVar21;
        *(undefined8 **)(lVar16 + 0x50) = puVar22;
        *(long *)(lVar16 + 0x58) = lVar5;
        *(TaskGroupContext **)(lVar16 + 0x60) = (TaskGroupContext *)&local_8e8;
        *(long *)(lVar16 + 0x68) = lVar11;
        *(ulong *)(lVar16 + 0x70) = uVar20;
        if (lVar5 != 0) {
          LOCK();
          *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
          UNLOCK();
        }
        LOCK();
        if (*piVar3 == 0) {
          *piVar3 = 1;
        }
        UNLOCK();
        LOCK();
        *(long *)(lVar21 + 0x40080) = *(long *)(lVar21 + 0x40080) + 1;
        UNLOCK();
        if (*(long *)(lVar21 + 0x40080) - 1U <= *(ulong *)(lVar21 + 0x40040)) {
          LOCK();
          *(long *)(lVar21 + 0x40040) = *(long *)(lVar21 + 0x40080) + -1;
          UNLOCK();
        }
      }
      embree::TaskScheduler::wait();
      if (local_8e8 != 0) {
        local_878 = local_8e8;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_878);
        goto LAB_00136c86;
      }
      *puVar12 = local_7c8[0];
      puVar12[1] = local_7c8[1];
      if (uVar20 != 2) {
        puVar12[2] = local_7c8[2];
        uVar19 = uVar20;
        goto joined_r0x001366f3;
      }
    }
    else {
      do {
        uVar15 = recurse(param_1,local_a00,0);
        local_7c8[uVar19] = uVar15;
        uVar19 = uVar19 + 1;
        local_a00 = local_a00 + 0xe;
      } while (uVar19 != uVar20);
      *puVar12 = local_7c8[0];
      puVar12[1] = local_7c8[1];
      if (uVar19 != 2) {
        puVar12[2] = local_7c8[2];
joined_r0x001366f3:
        if (uVar19 != 3) {
          puVar12[3] = local_7c8[3];
        }
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar12;
  }
LAB_00136c86:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::NodeRefPtr<4> embree::sse2::GeneralBVHBuilder::build<embree::NodeRefPtr<4>,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::build()::{lambda(unsigned
   long)#8}>(embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>&,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef*,
   embree::sse2::PrimInfoExtRange const&, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6} const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::build()::{lambda(unsigned long)#8} const&,
   embree::sse2::GeneralBVHBuilder::Settings const&) */

void embree::sse2::GeneralBVHBuilder::
     build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)_6_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(unsigned_long)_8_>
               (undefined8 param_1,undefined8 param_2,undefined4 *param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,ulong *param_7)

{
  long in_FS_OFFSET;
  undefined1 local_132;
  undefined1 local_131;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 uStack_120;
  undefined8 local_118;
  undefined8 local_108;
  undefined1 local_100;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  ulong local_98;
  ulong uStack_90;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  ulong uStack_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 *local_48;
  undefined1 *local_40;
  undefined1 *local_38;
  undefined8 local_30;
  undefined8 *local_28;
  undefined8 *local_20;
  undefined8 local_18;
  long local_10;
  
  local_98 = *param_7;
  uStack_90 = param_7[1];
  local_88 = param_7[2];
  uStack_80 = param_7[3];
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = param_7[4];
  uStack_70 = param_7[5];
  local_68 = param_7[6];
  uStack_60 = param_7[7];
  local_48 = &local_130;
  local_40 = &local_131;
  local_38 = &local_132;
  local_20 = &local_108;
  local_28 = &local_128;
  local_130 = param_4;
  local_58 = param_2;
  local_50 = param_1;
  local_30 = param_5;
  local_18 = param_6;
  if (0x10 < *param_7) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  local_b8 = *(undefined8 *)(param_3 + 0x10);
  local_f8 = *param_3;
  uStack_f4 = param_3[1];
  uStack_f0 = param_3[2];
  uStack_ec = param_3[3];
  local_100 = 0;
  local_e8 = param_3[4];
  uStack_e4 = param_3[5];
  uStack_e0 = param_3[6];
  uStack_dc = param_3[7];
  local_d8 = param_3[8];
  uStack_d4 = param_3[9];
  uStack_d0 = param_3[10];
  uStack_cc = param_3[0xb];
  local_108 = 1;
  local_c8 = param_3[0xc];
  uStack_c4 = param_3[0xd];
  uStack_c0 = param_3[0xe];
  uStack_bc = param_3[0xf];
  local_b0 = *(undefined8 *)(param_3 + 0x12);
  local_a8 = *(undefined8 *)(param_3 + 0x14);
  local_128 = 0;
  uStack_120 = 0;
  local_118 = 0;
  BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(unsigned_long)#8}>
  ::recurse(&local_98,local_20,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::build() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *this)

{
  _lambda_embree__range<unsigned_long>__1_ *p_Var1;
  int *piVar2;
  undefined4 uVar3;
  TaskGroupContext *pTVar4;
  undefined1 (*pauVar5) [16];
  int iVar6;
  TaskGroupContext *pTVar7;
  long lVar8;
  long lVar9;
  ulong uVar10;
  ulong uVar11;
  long *plVar12;
  undefined8 *puVar13;
  undefined8 *puVar14;
  long lVar15;
  undefined8 uVar16;
  long *plVar17;
  TaskScheduler *pTVar18;
  uint uVar19;
  ulong uVar20;
  _lambda_embree__range<unsigned_long>__1_ *p_Var21;
  uint uVar22;
  long *plVar23;
  ulong uVar24;
  undefined8 *puVar25;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *pBVar26;
  long *plVar27;
  _lambda_embree__range<unsigned_long>__1_ *in_R9;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *pBVar28;
  long in_FS_OFFSET;
  float fVar29;
  double dVar30;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  string *psVar38;
  plus *ppVar39;
  long lVar40;
  plus *ppVar41;
  _lambda_embree__range<unsigned_long>__1_ *local_220;
  undefined1 uStack_1c9;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *local_1c8;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *local_1c0;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *local_1b8;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> **ppBStack_1b0;
  undefined8 uStack_1a8;
  TaskGroupContext *local_198;
  TaskGroupContext *pTStack_190;
  plus *local_188;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *pBStack_180;
  TaskGroupContext *local_178;
  undefined8 local_170;
  undefined8 uStack_168;
  undefined8 uStack_160;
  undefined1 local_158 [16];
  undefined1 local_148 [16];
  undefined1 local_138 [16];
  undefined1 local_128 [16];
  long local_118;
  long local_110;
  undefined1 local_108 [12];
  undefined4 uStack_fc;
  undefined1 local_f8 [12];
  undefined4 uStack_ec;
  undefined1 local_e8 [16];
  undefined1 local_d8 [16];
  undefined8 local_c8;
  long local_c0;
  ulong uStack_b8;
  long *local_a8 [2];
  long local_98 [2];
  long *local_88;
  long local_80;
  long local_78 [2];
  _lambda_embree__range<unsigned_long>__1_ *local_68;
  undefined8 local_60;
  long local_58 [5];
  
  local_58[3] = *(long *)(in_FS_OFFSET + 0x28);
  lVar8 = *(long *)(this + 0x28);
  pTVar4 = *(TaskGroupContext **)(*(long *)(this + 0x30) + 0x1d0);
  pTVar7 = (TaskGroupContext *)(*(long *)(lVar8 + 0x208) - *(long *)(lVar8 + 0x200) >> 3);
  if (pTVar4 < pTVar7) {
    local_1c8 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *)0x0;
    local_188 = (plus *)0x1;
    local_198 = pTVar7;
    pTStack_190 = pTVar4;
    pBStack_180 = this;
    local_178 = (TaskGroupContext *)&local_1c8;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)&local_198,(TaskGroupContext *)&local_1c8,
                 (long)pTVar7 - (long)pTVar4,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_00138567;
      lVar40 = *(long *)(lVar8 + 0xc00c0);
      uVar10 = lVar40 + 0x30 + (ulong)(-(int)lVar40 & 0x3f);
      if (0x80000 < uVar10) goto LAB_00138567;
      *(ulong *)(lVar8 + 0xc00c0) = uVar10;
      puVar13 = (undefined8 *)(lVar8 + 0x40090 + uVar10);
      *puVar13 = &PTR_execute_001438c0;
      puVar13[1] = local_198;
      puVar13[2] = pTStack_190;
      puVar13[3] = local_188;
      puVar13[4] = pBStack_180;
      puVar13[5] = local_178;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)(lVar8 + 0x40 + lVar9);
      lVar15 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar13;
      *(long *)(lVar9 + 0x58) = lVar15;
      *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_1c8;
      *(long *)(lVar9 + 0x68) = lVar40;
      *(long *)(lVar9 + 0x70) = (long)pTVar7 - (long)pTVar4;
      if (lVar15 != 0) {
        LOCK();
        *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)in_R9 == 0) {
        *(int *)in_R9 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    local_108._0_8_ = local_1c8;
    if (local_1c8 == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *)0x0) {
      lVar8 = *(long *)(this + 0x28);
      goto LAB_00136fdd;
    }
  }
  else {
LAB_00136fdd:
    uVar24 = 0;
    FastAllocator::reset((FastAllocator *)(lVar8 + 0x78));
    uVar10 = *(ulong *)(this + 0x98);
    lVar8 = *(long *)(this + 0x30);
    if ((uVar10 & 0x100000) != 0) {
      uVar24 = *(ulong *)(lVar8 + 0x288);
    }
    if ((uVar10 & 0x200000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x298);
    }
    if ((uVar10 & 0xf) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2b8);
    }
    if ((uVar10 & 0x77770) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2a8);
    }
    if ((uVar10 & 0xe000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x338);
    }
    if ((uVar10 & 0x800000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2c8);
    }
    if ((uVar10 & 0x20000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2d8);
    }
    if ((uVar10 & 0x40000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2e8);
    }
    if ((uVar10 & 0x80000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2f8);
    }
    if ((uVar10 & 0x1000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x308);
    }
    if ((uVar10 & 0x400000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x318);
    }
    lVar8 = *(long *)(this + 0x28);
    plVar17 = (long *)(lVar8 + 0x130);
    plVar12 = (long *)(lVar8 + 0x170);
    if (uVar24 == 0) {
      *(undefined8 *)(this + 0x70) = 0;
      local_108._4_4_ = _LC8;
      local_108._0_4_ = _LC8;
      local_108._8_4_ = _LC8;
      uStack_fc = _LC8;
      local_e8._4_4_ = _LC8;
      local_e8._0_4_ = _LC8;
      local_e8._8_4_ = _LC8;
      local_e8._12_4_ = _LC8;
      local_f8._4_4_ = _LC6;
      local_f8._0_4_ = _LC6;
      local_f8._8_4_ = _LC6;
      uStack_ec = _LC6;
      local_d8._4_4_ = _LC6;
      local_d8._0_4_ = _LC6;
      local_d8._8_4_ = _LC6;
      local_d8._12_4_ = _LC6;
      embree::BVHN<4>::set(lVar8,8,local_108,0);
      if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
        return;
      }
      goto LAB_00138556;
    }
    do {
      while (*plVar17 != 0) {
        lVar40 = *(long *)(*plVar17 + 0x18);
        *(long *)(*plVar17 + 0x18) = *plVar12;
        LOCK();
        *plVar12 = *plVar17;
        UNLOCK();
        LOCK();
        *plVar17 = lVar40;
        UNLOCK();
      }
      LOCK();
      *plVar17 = 0;
      UNLOCK();
      plVar17 = plVar17 + 1;
    } while (plVar12 != plVar17);
    if ((*(long *)(lVar8 + 0x170) == 0) && (*(long *)(lVar8 + 0x178) == 0)) {
      uVar10 = uVar24 + 3 >> 2;
      dVar30 = (double)uVar10 * __LC30 * __LC37;
      if (_LC32 <= dVar30) {
        uVar20 = (long)(dVar30 - _LC32) ^ 0x8000000000000000;
      }
      else {
        uVar20 = (ulong)dVar30;
      }
      *(undefined1 *)(lVar8 + 0x182) = 0;
      in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)0x3;
      uVar20 = uVar20 + ((uVar10 << 8) >> 2);
      *(ulong *)(lVar8 + 0x90) = uVar20;
      uVar11 = uVar20 / 0x14 + 0x7f & 0xffffffffffffff80;
      uVar10 = 0x1fffc0;
      if (uVar11 < 0x1fffc1) {
        uVar10 = uVar11;
      }
      if (uVar10 < 0x400) {
        uVar10 = 0x400;
      }
      *(ulong *)(lVar8 + 0xa0) = uVar10;
      *(ulong *)(lVar8 + 0x98) = uVar10;
      if (uVar20 <= uVar10 * 0x50) {
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)(ulong)(uVar10 * 0x28 < uVar20);
      }
      *(_lambda_embree__range<unsigned_long>__1_ **)(lVar8 + 0x80) = in_R9;
      if (uVar10 * 0xa0 < uVar20) {
        *(undefined8 *)(lVar8 + 0x80) = 7;
        if (uVar10 * 0x140 < uVar20) {
LAB_001371ed:
          *(undefined8 *)(lVar8 + 0x88) = 0x1040;
          *(ulong *)(lVar8 + 0x98) = uVar10 * 2;
        }
        else {
LAB_001381e4:
          *(undefined8 *)(lVar8 + 0x88) = 0x1040;
        }
      }
      else {
        if (uVar10 * 0x140 < uVar20) goto LAB_001371ed;
        uVar10 = 0x1040;
        if (uVar11 < 0x1041) {
          uVar10 = uVar11;
        }
        if (uVar10 < 0x400) {
          uVar10 = 0x400;
        }
        *(ulong *)(lVar8 + 0x88) = uVar10;
        if (uVar20 == 0) {
          *(undefined8 *)(lVar8 + 0xa0) = 0x1fffc0;
          goto LAB_001381e4;
        }
      }
      LOCK();
      *(undefined8 *)(lVar8 + 0x188) = 0;
      UNLOCK();
      lVar40 = *(long *)(lVar8 + 0x78);
      if (*(long *)(lVar40 + 0x4e0) != 0) {
        *(long *)(lVar8 + 0x98) = *(long *)(lVar40 + 0x4e0);
      }
      if ((((0 < *(int *)(lVar40 + 0x4e8)) &&
           (*(undefined8 *)(lVar8 + 0x80) = 0, 1 < *(int *)(lVar40 + 0x4e8))) &&
          (*(undefined8 *)(lVar8 + 0x80) = 1, 3 < *(int *)(lVar40 + 0x4e8))) &&
         (*(undefined8 *)(lVar8 + 0x80) = 3, 7 < *(int *)(lVar40 + 0x4e8))) {
        *(undefined8 *)(lVar8 + 0x80) = 7;
      }
      if (*(long *)(lVar40 + 0x4f0) != 0) {
        *(long *)(lVar8 + 0x88) = *(long *)(lVar40 + 0x4f0);
      }
      if (*(int *)(lVar40 + 0x4f8) != -1) {
        *(bool *)(lVar8 + 0x182) = *(int *)(lVar40 + 0x4f8) != 0;
      }
    }
    else {
      FastAllocator::reset((FastAllocator *)(lVar8 + 0x78));
    }
    psVar38 = *(string **)(this + 0x28);
    local_a8[0] = local_98;
    std::__cxx11::string::_M_construct((ulong)local_a8,'\x01');
    *(undefined1 *)local_a8[0] = 0x34;
    plVar12 = (long *)std::__cxx11::string::_M_replace((ulong)local_a8,0,(char *)0x0,0x130ed8);
    plVar17 = plVar12 + 2;
    if ((long *)*plVar12 == plVar17) {
      uVar10 = plVar12[1] + 1;
      plVar23 = plVar17;
      plVar27 = local_78;
      if (7 < (uint)uVar10) {
        uVar19 = (uint)uVar10 & 0xfffffff8;
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)(ulong)uVar19;
        uVar20 = 0;
        do {
          uVar22 = (int)uVar20 + 8;
          uVar11 = (ulong)uVar22;
          *(undefined8 *)((long)local_78 + uVar20) = *(undefined8 *)((long)plVar17 + uVar20);
          uVar20 = uVar11;
        } while (uVar22 < uVar19);
        plVar27 = (long *)((long)local_78 + uVar11);
        plVar23 = (long *)(uVar11 + (long)plVar17);
      }
      lVar8 = 0;
      if ((uVar10 & 4) != 0) {
        *(int *)plVar27 = (int)*plVar23;
        lVar8 = 4;
      }
      if ((uVar10 & 2) != 0) {
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)
                (ulong)*(ushort *)((long)plVar23 + lVar8);
        *(ushort *)((long)plVar27 + lVar8) = *(ushort *)((long)plVar23 + lVar8);
        lVar8 = lVar8 + 2;
      }
      local_88 = local_78;
      if ((uVar10 & 1) != 0) {
        *(undefined1 *)((long)plVar27 + lVar8) = *(undefined1 *)((long)plVar23 + lVar8);
      }
    }
    else {
      local_78[0] = plVar12[2];
      local_88 = (long *)*plVar12;
    }
    local_80 = plVar12[1];
    *plVar12 = (long)plVar17;
    plVar12[1] = 0;
    *(undefined1 *)(plVar12 + 2) = 0;
    if (0x3fffffffffffffffU - local_80 < 0xf) {
                    /* WARNING: Subroutine does not return */
      std::__throw_length_error("basic_string::append");
    }
    puVar13 = (undefined8 *)std::__cxx11::string::_M_append((char *)&local_88,0x130ef7);
    p_Var1 = (_lambda_embree__range<unsigned_long>__1_ *)(puVar13 + 2);
    if ((_lambda_embree__range<unsigned_long>__1_ *)*puVar13 == p_Var1) {
      uVar10 = puVar13[1] + 1;
      p_Var21 = p_Var1;
      in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)local_58;
      if (7 < (uint)uVar10) {
        uVar20 = 0;
        do {
          uVar19 = (int)uVar20 + 8;
          uVar11 = (ulong)uVar19;
          *(undefined8 *)((_lambda_embree__range<unsigned_long>__1_ *)local_58 + uVar20) =
               *(undefined8 *)(p_Var1 + uVar20);
          uVar20 = uVar11;
        } while (uVar19 < ((uint)uVar10 & 0xfffffff8));
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)local_58 + uVar11;
        p_Var21 = p_Var1 + uVar11;
      }
      lVar8 = 0;
      if ((uVar10 & 4) != 0) {
        *(int *)in_R9 = *(int *)p_Var21;
        lVar8 = 4;
      }
      if ((uVar10 & 2) != 0) {
        *(undefined2 *)(in_R9 + lVar8) = *(undefined2 *)(p_Var21 + lVar8);
        lVar8 = lVar8 + 2;
      }
      local_68 = (_lambda_embree__range<unsigned_long>__1_ *)local_58;
      if ((uVar10 & 1) != 0) {
        in_R9[lVar8] = p_Var21[lVar8];
      }
    }
    else {
      local_58[0] = puVar13[2];
      local_68 = (_lambda_embree__range<unsigned_long>__1_ *)*puVar13;
    }
    local_60 = puVar13[1];
    *puVar13 = p_Var1;
    puVar13[1] = 0;
    *(undefined1 *)(puVar13 + 2) = 0;
    dVar30 = (double)embree::BVHN<4>::preBuild(psVar38);
    if (local_68 != (_lambda_embree__range<unsigned_long>__1_ *)local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
    if (local_88 != local_78) {
      operator_delete(local_88,local_78[0] + 1);
    }
    if (local_a8[0] != local_98) {
      operator_delete(local_a8[0],local_98[0] + 1);
    }
    lVar8 = *(long *)(this + 0x28);
    pTVar7 = (TaskGroupContext *)(*(long *)(lVar8 + 0x208) - *(long *)(lVar8 + 0x200) >> 3);
    if (pTVar7 < pTVar4) {
      std::vector<embree::BVHN<4>*,std::allocator<embree::BVHN<4>*>>::_M_default_append
                ((vector<embree::BVHN<4>*,std::allocator<embree::BVHN<4>*>> *)(lVar8 + 0x200),
                 (long)pTVar4 - (long)pTVar7);
    }
    pTVar7 = (TaskGroupContext *)(*(long *)(this + 0x18) - *(long *)(this + 0x10) >> 3);
    if (pTVar7 < pTVar4) {
      std::
      vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase>>>>
      ::_M_default_append((vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderBase>>>>
                           *)(this + 0x10),(long)pTVar4 - (long)pTVar7);
    }
    local_198 = (TaskGroupContext *)0x0;
    uVar10 = *(ulong *)(*(long *)(this + 0x30) + 0x1d0);
    ppVar41 = (plus *)&local_1b8;
    stack0xffffffffffffff00 = ppVar41;
    local_108._0_8_ =
         (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
          *)&local_198;
    local_f8._0_8_ = (_lambda___1_ *)local_158;
    local_158._0_8_ = this;
    if (uVar10 == 1) {
      lVar8 = **(long **)(*(long *)(this + 0x30) + 0x1e0);
      if (((lVar8 != 0) && (*(char *)(lVar8 + 0x3c) == '\x14')) && (*(int *)(lVar8 + 0x24) == 1)) {
        uVar10 = 1;
        if (*(uint *)(lVar8 + 0x20) < 5) {
          uVar10 = (ulong)*(uint *)(lVar8 + 0x20) + 3 >> 2;
        }
        goto LAB_00137d53;
      }
    }
    else {
      uVar10 = parallel_reduce_internal<unsigned_long,unsigned_long,embree::parallel_reduce<unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_,std::plus<unsigned_long>>(unsigned_long,unsigned_long,unsigned_long_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_const&,std::plus<unsigned_long>const&)::_lambda(embree::range<unsigned_long>)_1_,std::plus<unsigned_long>>
                         (uVar10,0,uVar10,(ulong)&local_198,(ulong *)local_108,in_R9,ppVar41);
LAB_00137d53:
      if (*(ulong *)(this + 0x48) < uVar10) {
        uVar20 = *(ulong *)(this + 0x50);
        if (uVar20 < uVar10) {
          uVar11 = uVar10;
          if (uVar20 != 0) {
            do {
              uVar20 = uVar20 * 2;
              if (uVar20 == 0) {
                uVar20 = 1;
              }
              uVar11 = uVar20;
            } while (uVar20 < uVar10);
          }
          puVar13 = *(undefined8 **)(this + 0x58);
          uVar20 = uVar11 << 6;
          (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),uVar20,0);
          if (uVar20 < 0x1c00000) {
            lVar8 = embree::alignedMalloc(uVar20,0x20);
          }
          else {
            lVar8 = embree::os_malloc(uVar20,(bool *)(this + 0x40));
          }
          *(long *)(this + 0x58) = lVar8;
          if (*(long *)(this + 0x48) != 0) {
            puVar25 = puVar13;
            uVar20 = 0;
            while( true ) {
              uVar16 = puVar25[1];
              puVar14 = (undefined8 *)(lVar8 + uVar20 * 0x40);
              *puVar14 = *puVar25;
              puVar14[1] = uVar16;
              uVar16 = puVar25[3];
              puVar14[2] = puVar25[2];
              puVar14[3] = uVar16;
              uVar3 = *(undefined4 *)(puVar25 + 5);
              puVar14[4] = puVar25[4];
              *(undefined4 *)(puVar14 + 5) = uVar3;
              if (*(ulong *)(this + 0x48) <= uVar20 + 1) break;
              lVar8 = *(long *)(this + 0x58);
              puVar25 = puVar25 + 8;
              uVar20 = uVar20 + 1;
            }
          }
          lVar8 = *(long *)(this + 0x50);
          if (puVar13 != (undefined8 *)0x0) {
            if ((ulong)(lVar8 << 6) < 0x1c00000) {
              embree::alignedFree(puVar13);
            }
            else {
              embree::os_free(puVar13,lVar8 << 6,(bool)this[0x40]);
            }
          }
          if (lVar8 != 0) {
            (**(code **)**(undefined8 **)(this + 0x38))
                      (*(undefined8 **)(this + 0x38),lVar8 * -0x40,1);
          }
          *(ulong *)(this + 0x48) = uVar10;
          *(ulong *)(this + 0x50) = uVar11;
        }
        else {
          *(ulong *)(this + 0x48) = uVar10;
        }
      }
    }
    LOCK();
    *(undefined4 *)(this + 0x88) = 0;
    UNLOCK();
    local_1b8 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *)0x0;
    local_158._8_8_ = 0;
    local_158._0_8_ = pTVar4;
    local_148._8_8_ = this;
    local_148._0_8_ = 1;
    local_138._0_8_ = ppVar41;
    ppVar39 = ppVar41;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)local_158,(TaskGroupContext *)ppVar39,(ulong)pTVar4,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_00138567;
      lVar40 = *(long *)(lVar8 + 0xc00c0);
      uVar10 = lVar40 + 0x30 + (ulong)(-(int)lVar40 & 0x3f);
      if (0x80000 < uVar10) goto LAB_00138567;
      *(ulong *)(lVar8 + 0xc00c0) = uVar10;
      puVar13 = (undefined8 *)(lVar8 + 0x40090 + uVar10);
      *puVar13 = &PTR_execute_001438d8;
      puVar13[1] = local_158._0_8_;
      puVar13[2] = local_158._8_8_;
      puVar13[3] = local_148._0_8_;
      puVar13[4] = local_148._8_8_;
      puVar13[5] = local_138._0_8_;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar2 = (int *)(lVar8 + 0x40 + lVar9);
      lVar15 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar13;
      *(long *)(lVar9 + 0x58) = lVar15;
      *(plus **)(lVar9 + 0x60) = ppVar41;
      *(long *)(lVar9 + 0x68) = lVar40;
      *(TaskGroupContext **)(lVar9 + 0x70) = pTVar4;
      if (lVar15 != 0) {
        LOCK();
        *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar2 == 0) {
        *piVar2 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    local_108._0_8_ = local_1b8;
    if (local_1b8 == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *)0x0) {
      local_1c0 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *)0x0;
      stack0xffffffffffffff00 = 0;
      local_108._0_8_ = pTVar4;
      stack0xffffffffffffff10 = this;
      local_f8._0_8_ = 1;
      local_e8._0_8_ = (TaskGroupContext *)&local_1c0;
      lVar8 = embree::TaskScheduler::thread();
      if (lVar8 == 0) {
        pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
        TaskScheduler::
        spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                  (pTVar18,(_lambda___1_ *)local_108,(TaskGroupContext *)&local_1c0,(ulong)pTVar4,
                   true);
      }
      else {
        if (0xfff < *(ulong *)(lVar8 + 0x40080)) {
LAB_00138567:
                    /* WARNING: Subroutine does not return */
          abort();
        }
        lVar40 = *(long *)(lVar8 + 0xc00c0);
        uVar10 = lVar40 + 0x30 + (ulong)(-(int)lVar40 & 0x3f);
        if (0x80000 < uVar10) goto LAB_00138567;
        *(ulong *)(lVar8 + 0xc00c0) = uVar10;
        puVar13 = (undefined8 *)(lVar8 + 0x40090 + uVar10);
        *puVar13 = &PTR_execute_001438f0;
        puVar13[1] = local_108._0_8_;
        puVar13[2] = stack0xffffffffffffff00;
        puVar13[3] = local_f8._0_8_;
        puVar13[4] = stack0xffffffffffffff10;
        puVar13[5] = local_e8._0_8_;
        lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
        piVar2 = (int *)(lVar8 + 0x40 + lVar9);
        lVar15 = *(long *)(lVar8 + 0xc0100);
        *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
        *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
        lVar9 = lVar9 + lVar8;
        *(undefined8 **)(lVar9 + 0x50) = puVar13;
        *(long *)(lVar9 + 0x58) = lVar15;
        *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_1c0;
        *(long *)(lVar9 + 0x68) = lVar40;
        *(TaskGroupContext **)(lVar9 + 0x70) = pTVar4;
        if (lVar15 != 0) {
          LOCK();
          *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
          UNLOCK();
        }
        LOCK();
        if (*piVar2 == 0) {
          *piVar2 = 1;
        }
        UNLOCK();
        LOCK();
        *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
        UNLOCK();
        if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
          LOCK();
          *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
          UNLOCK();
        }
      }
      local_220 = (_lambda_embree__range<unsigned_long>__1_ *)local_108;
      embree::TaskScheduler::wait();
      if (local_1c0 == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *)0x0) {
        if (*(int *)(this + 0x88) == 1) {
          pauVar5 = *(undefined1 (**) [16])(this + 0x58);
          local_d8 = pauVar5[1];
          _local_f8 = pauVar5[1];
          local_e8 = *pauVar5;
          _local_108 = *pauVar5;
          embree::BVHN<4>::set
                    (*(undefined8 *)(this + 0x28),*(undefined8 *)pauVar5[2],local_220,uVar24);
        }
        else {
          uVar20 = (ulong)*(int *)(this + 0x88);
          uVar10 = *(ulong *)(this + 0x50);
          if (uVar10 < uVar20) {
            puVar13 = *(undefined8 **)(this + 0x58);
            if (uVar10 == 0) {
              uVar10 = uVar20;
              if (uVar20 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar20;
              }
            }
            else {
              do {
                uVar10 = uVar10 * 2;
                if (uVar10 == 0) {
                  uVar10 = 1;
                }
              } while (uVar10 < uVar20);
              if (uVar20 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar20;
              }
            }
            uVar11 = uVar10 << 6;
            (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),uVar11,0);
            if (uVar11 < 0x1c00000) {
              lVar8 = embree::alignedMalloc(uVar11,0x20);
            }
            else {
              lVar8 = embree::os_malloc(uVar11,(bool *)(this + 0x40));
            }
            *(long *)(this + 0x58) = lVar8;
            if (*(long *)(this + 0x48) != 0) {
              puVar25 = puVar13;
              uVar11 = 0;
              while( true ) {
                uVar16 = puVar25[1];
                puVar14 = (undefined8 *)(lVar8 + uVar11 * 0x40);
                *puVar14 = *puVar25;
                puVar14[1] = uVar16;
                uVar16 = puVar25[3];
                puVar14[2] = puVar25[2];
                puVar14[3] = uVar16;
                uVar3 = *(undefined4 *)(puVar25 + 5);
                puVar14[4] = puVar25[4];
                *(undefined4 *)(puVar14 + 5) = uVar3;
                if (*(ulong *)(this + 0x48) <= uVar11 + 1) break;
                lVar8 = *(long *)(this + 0x58);
                puVar25 = puVar25 + 8;
                uVar11 = uVar11 + 1;
              }
            }
            lVar8 = *(long *)(this + 0x50);
            if (puVar13 != (undefined8 *)0x0) {
              if ((ulong)(lVar8 << 6) < 0x1c00000) {
                embree::alignedFree(puVar13);
              }
              else {
                embree::os_free(puVar13,lVar8 << 6,(bool)this[0x40]);
              }
            }
            if (lVar8 != 0) {
              (**(code **)**(undefined8 **)(this + 0x38))
                        (*(undefined8 **)(this + 0x38),lVar8 * -0x40,1);
            }
            *(ulong *)(this + 0x48) = uVar20;
            *(ulong *)(this + 0x50) = uVar10;
          }
          else {
            *(ulong *)(this + 0x48) = uVar20;
          }
          fVar29 = (float)uVar24 / __LC36;
          if (__LC24 <= fVar29) {
            uVar10 = (long)(fVar29 - __LC24) ^ 0x8000000000000000;
          }
          else {
            uVar10 = (ulong)fVar29;
          }
          if (uVar10 < 1000) {
            uVar10 = 1000;
          }
          local_108._0_8_ = CONCAT44(_LC8,_LC8);
          local_108._8_4_ = _LC8;
          uStack_fc = _LC8;
          local_f8._0_8_ = CONCAT44(_LC6,_LC6);
          local_f8._8_4_ = _LC6;
          uStack_ec = _LC6;
          local_c8 = 0;
          if (uVar10 < uVar20 * 2) {
            uVar10 = uVar20 * 2;
          }
          local_c0 = 0;
          local_198 = (TaskGroupContext *)local_220;
          local_1b8 = this;
          local_e8 = _local_108;
          local_d8 = _local_f8;
          if (uVar20 == 1) {
            pBVar28 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> **)
                       (this + 0x58);
            auVar35._8_4_ = _LC8;
            auVar35._0_8_ = local_108._0_8_;
            auVar35._12_4_ = _LC8;
            auVar33._8_4_ = _LC6;
            auVar33._0_8_ = local_f8._0_8_;
            auVar33._12_4_ = _LC6;
            auVar37._8_4_ = _LC8;
            auVar37._0_8_ = local_108._0_8_;
            auVar37._12_4_ = _LC8;
            auVar36._8_4_ = _LC6;
            auVar36._0_8_ = local_f8._0_8_;
            auVar36._12_4_ = _LC6;
            auVar32._8_4_ = _LC8;
            auVar32._0_8_ = local_108._0_8_;
            auVar32._12_4_ = _LC8;
            local_118 = 0;
            auVar34._0_4_ = *(float *)(pBVar28 + 0x10) + *(float *)pBVar28;
            auVar34._4_4_ = *(float *)(pBVar28 + 0x14) + *(float *)(pBVar28 + 4);
            auVar34._8_4_ = *(float *)(pBVar28 + 0x18) + *(float *)(pBVar28 + 8);
            auVar34._12_4_ = *(float *)(pBVar28 + 0x1c) + *(float *)(pBVar28 + 0xc);
            auVar37 = minps(auVar37,*(undefined1 (*) [16])pBVar28);
            auVar36 = maxps(auVar36,*(undefined1 (*) [16])(pBVar28 + 0x10));
            local_110 = 1;
            auVar35 = minps(auVar35,auVar34);
            auVar34 = maxps(auVar33,auVar34);
            auVar31._8_4_ = _LC6;
            auVar31._0_8_ = local_f8._0_8_;
            auVar31._12_4_ = _LC6;
            local_158 = minps(auVar32,auVar37);
            local_148 = maxps(auVar31,auVar36);
            local_138 = minps(_local_108,auVar35);
            local_128 = maxps(_local_f8,auVar34);
          }
          else {
            pTStack_190 = (TaskGroupContext *)&local_1c0;
            local_188 = ppVar39;
            parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::parallel_reduce<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>(unsigned_long,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_const&)::_lambda(embree::range<unsigned_long>)_1_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>
                      ((ulong)local_158,uVar20,0,uVar20,(PrimInfoT_conflict *)0x1,local_220,
                       (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
                        *)&local_198);
            if (local_110 == local_118) {
              stack0xffffffffffffff00 = _UNK_001440d8;
              local_108._0_8_ = CONCAT44(_UNK_001440d4,_LC8);
              stack0xffffffffffffff10 = _UNK_001440c8;
              local_f8._0_8_ = CONCAT44(_UNK_001440c4,_LC6);
              local_e8._8_8_ = _UNK_001440d8;
              local_e8._0_8_ = CONCAT44(_UNK_001440d4,_LC8);
              local_d8._8_8_ = _UNK_001440c8;
              local_d8._0_8_ = CONCAT44(_UNK_001440c4,_LC6);
              embree::BVHN<4>::set(*(undefined8 *)(this + 0x28),8,local_220,0);
              goto LAB_00137f3a;
            }
            pBVar28 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> **)
                       (this + 0x58);
          }
          lVar40 = local_110;
          lVar8 = local_118;
          uVar20 = *(ulong *)(this + 0x50);
          local_198 = (TaskGroupContext *)0x4;
          local_170 = 0x3f8000003f800000;
          for (iVar6 = 0x1f; 4U >> iVar6 == 0; iVar6 = iVar6 + -1) {
          }
          pTStack_190 = (TaskGroupContext *)0x28;
          local_188 = (plus *)(long)iVar6;
          uStack_168 = *(undefined8 *)(this + 0x90);
          pBStack_180 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *)0x1;
          uStack_160 = 0xffffffffffffffff;
          local_178 = (TaskGroupContext *)0x1;
          if (uVar20 < uVar10) {
            if (uVar20 == 0) {
              uVar20 = uVar10;
              if (uVar10 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar10;
              }
            }
            else {
              do {
                uVar20 = uVar20 * 2;
                if (uVar20 == 0) {
                  uVar20 = 1;
                }
              } while (uVar20 < uVar10);
              if (uVar10 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar10;
              }
            }
            uVar11 = uVar20 << 6;
            (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),uVar11,0);
            if (uVar11 < 0x1c00000) {
              lVar15 = embree::alignedMalloc(uVar11,0x20);
            }
            else {
              lVar15 = embree::os_malloc(uVar11,(bool *)(this + 0x40));
            }
            *(long *)(this + 0x58) = lVar15;
            if (*(long *)(this + 0x48) != 0) {
              uVar11 = 0;
              pBVar26 = pBVar28;
              while( true ) {
                uVar16 = *(undefined8 *)(pBVar26 + 8);
                puVar13 = (undefined8 *)(lVar15 + uVar11 * 0x40);
                *puVar13 = *(undefined8 *)pBVar26;
                puVar13[1] = uVar16;
                uVar16 = *(undefined8 *)(pBVar26 + 0x18);
                puVar13[2] = *(undefined8 *)(pBVar26 + 0x10);
                puVar13[3] = uVar16;
                uVar3 = *(undefined4 *)(pBVar26 + 0x28);
                puVar13[4] = *(undefined8 *)(pBVar26 + 0x20);
                *(undefined4 *)(puVar13 + 5) = uVar3;
                if (*(ulong *)(this + 0x48) <= uVar11 + 1) break;
                lVar15 = *(long *)(this + 0x58);
                uVar11 = uVar11 + 1;
                pBVar26 = pBVar26 + 0x40;
              }
            }
            lVar15 = *(long *)(this + 0x50);
            if (pBVar28 != (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *)0x0)
            {
              if ((ulong)(lVar15 << 6) < 0x1c00000) {
                embree::alignedFree(pBVar28);
              }
              else {
                embree::os_free(pBVar28,lVar15 << 6,(bool)this[0x40]);
              }
            }
            if (lVar15 != 0) {
              (**(code **)**(undefined8 **)(this + 0x38))
                        (*(undefined8 **)(this + 0x38),lVar15 * -0x40,1);
            }
            *(ulong *)(this + 0x48) = uVar10;
            pBVar28 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> **)
                       (this + 0x58);
            *(ulong *)(this + 0x50) = uVar20;
          }
          else {
            *(ulong *)(this + 0x48) = uVar10;
          }
          auVar31 = local_148;
          auVar34 = local_158;
          local_c0 = lVar40 - lVar8;
          ppBStack_1b0 = &local_1c8;
          uStack_1a8 = 4;
          local_108._0_8_ = local_158._0_8_;
          stack0xffffffffffffff00 = local_158._8_8_;
          local_f8._0_8_ = local_148._0_8_;
          stack0xffffffffffffff10 = local_148._8_8_;
          local_e8._0_8_ = local_138._0_8_;
          local_e8._8_8_ = local_138._8_8_;
          local_d8._0_8_ = local_128._0_8_;
          local_d8._8_8_ = local_128._8_8_;
          local_c8 = 0;
          local_1c8 = this;
          local_1c0 = this;
          local_1b8 = pBVar28;
          uStack_b8 = uVar10;
          uVar16 = GeneralBVHBuilder::
                   build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)_6_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(unsigned_long)_8_>
                             (ppVar39,pBVar28,local_220,*(long *)(this + 0x28) + 0x78,&uStack_1c9,
                              (TaskGroupContext *)&local_1c0,
                              (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
                               *)&local_198);
          _local_108 = auVar34;
          _local_f8 = auVar31;
          local_e8 = auVar34;
          local_d8 = auVar31;
          embree::BVHN<4>::set(*(undefined8 *)(this + 0x28),uVar16,local_220,uVar24);
        }
LAB_00137f3a:
        lVar40 = *(long *)(this + 0x28);
        lVar8 = lVar40 + 0x78;
        plVar17 = (long *)(lVar40 + 0x130);
        plVar12 = (long *)(lVar40 + 0x170);
        do {
          while (*plVar17 != 0) {
            lVar15 = *(long *)(*plVar17 + 0x18);
            *(long *)(*plVar17 + 0x18) = *plVar12;
            LOCK();
            *plVar12 = *plVar17;
            UNLOCK();
            LOCK();
            *plVar17 = lVar15;
            UNLOCK();
          }
          LOCK();
          *plVar17 = 0;
          UNLOCK();
          plVar17 = plVar17 + 1;
        } while (plVar12 != plVar17);
        plVar17 = *(long **)(lVar40 + 0x1a8);
        plVar12 = *(long **)(lVar40 + 0x1b0);
        if (plVar12 != plVar17) {
          do {
            while( true ) {
              lVar15 = *plVar17;
              if (lVar8 != *(long *)(lVar15 + 8)) break;
              embree::MutexSys::lock();
              if (lVar8 == *(long *)(lVar15 + 8)) {
                LOCK();
                plVar27 = (long *)(*(long *)(lVar15 + 8) + 0x118);
                *plVar27 = *plVar27 + *(long *)(lVar15 + 0xa8) + *(long *)(lVar15 + 0x68);
                UNLOCK();
                LOCK();
                plVar27 = (long *)(*(long *)(lVar15 + 8) + 0x120);
                *plVar27 = *plVar27 +
                           (((*(long *)(lVar15 + 0x98) + *(long *)(lVar15 + 0x58)) -
                            *(long *)(lVar15 + 0x50)) - *(long *)(lVar15 + 0x90));
                UNLOCK();
                LOCK();
                plVar27 = (long *)(*(long *)(lVar15 + 8) + 0x128);
                *plVar27 = *plVar27 + *(long *)(lVar15 + 0xb0) + *(long *)(lVar15 + 0x70);
                UNLOCK();
                *(undefined8 *)(lVar15 + 0x48) = 0;
                *(undefined8 *)(lVar15 + 0x58) = 0;
                *(undefined8 *)(lVar15 + 0x50) = 0;
                *(undefined8 *)(lVar15 + 0x68) = 0;
                *(undefined8 *)(lVar15 + 0x70) = 0;
                *(undefined8 *)(lVar15 + 0x60) = 0;
                *(undefined8 *)(lVar15 + 0x88) = 0;
                *(undefined8 *)(lVar15 + 0x98) = 0;
                *(undefined8 *)(lVar15 + 0x90) = 0;
                *(undefined8 *)(lVar15 + 0xa8) = 0;
                *(undefined8 *)(lVar15 + 0xb0) = 0;
                *(undefined8 *)(lVar15 + 0xa0) = 0;
                LOCK();
                *(undefined8 *)(lVar15 + 8) = 0;
                UNLOCK();
              }
              plVar17 = plVar17 + 1;
              embree::MutexSys::unlock();
              if (plVar12 == plVar17) goto LAB_001380d9;
            }
            plVar17 = plVar17 + 1;
          } while (plVar12 != plVar17);
LAB_001380d9:
          if (*(long *)(lVar40 + 0x1b0) != *(long *)(lVar40 + 0x1a8)) {
            *(long *)(lVar40 + 0x1b0) = *(long *)(lVar40 + 0x1a8);
          }
        }
        if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
          embree::BVHN<4>::postBuild(dVar30);
          return;
        }
        goto LAB_00138556;
      }
      local_108._0_8_ = local_1c0;
      std::__exception_ptr::exception_ptr::_M_addref();
      local_108._0_8_ = std::rethrow_exception(local_220);
    }
  }
  std::__exception_ptr::exception_ptr::_M_addref();
  std::rethrow_exception(local_108);
LAB_00138556:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleMv<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleMv<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleM...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleM___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  ulong uVar8;
  undefined8 uVar9;
  TaskScheduler *pTVar10;
  long lVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  long local_a8;
  ulong uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar12 = *(ulong *)(this + 8);
  uVar8 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar12 - uVar8) {
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uStack_40 = *(undefined8 *)(this + 0x30);
    uVar12 = uVar12 + uVar8 >> 1;
    local_68 = uVar12;
    uStack_60 = uVar8;
    local_58 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embre___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_68,pTVar4,uVar12 - uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) goto LAB_0013896e;
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0013896e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_001439e0;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[7] = local_38;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar12 - uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(undefined8 *)(this + 0x18);
    local_a8 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_90 = *(undefined8 *)(this + 0x20);
    uStack_88 = *(undefined8 *)(this + 0x28);
    uStack_80 = *(undefined8 *)(this + 0x30);
    uVar8 = local_a8 - uVar12;
    uStack_a0 = uVar12;
    local_78 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embre___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_a8,pTVar4,uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_0013896e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar12 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar12) goto LAB_0013896e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar12;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar12);
      *puVar3 = &PTR_execute_001439e0;
      puVar3[1] = local_a8;
      puVar3[2] = uStack_a0;
      puVar3[7] = local_78;
      puVar3[3] = local_98;
      puVar3[4] = uStack_90;
      puVar3[5] = uStack_88;
      puVar3[6] = uStack_80;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    lVar6 = uVar8 * 0x70;
    for (; uVar8 < uVar12; uVar8 = uVar8 + 1) {
      local_68 = 0;
      uStack_60 = 0;
      lVar5 = *(long *)(this + 0x20);
      local_58 = 0;
      lVar11 = *(long *)(this + 0x28) + lVar6;
      lVar6 = lVar6 + 0x70;
      uVar9 = sse2::GeneralBVHBuilder::
              BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::build()::{lambda(unsigned_long)#8}>
              ::recurse(*(undefined8 *)(this + 0x30),lVar11,1);
      *(undefined8 *)(lVar5 + uVar8 * 8) = uVar9;
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* std::pair<unsigned long, bool> embree::parallel_reduce_internal<unsigned long, std::pair<unsigned
   long, bool>, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::getProperties(embree::sse2::PrimInfoExtRange
   const&)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::getProperties(embree::sse2::PrimInfoExtRange
   const&)::{lambda(std::pair<unsigned long, bool> const&, std::pair<unsigned long, bool>
   const&)#2}>(unsigned long, unsigned long, unsigned long, unsigned long, std::pair<unsigned long,
   bool> const&, embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::getProperties(embree::sse2::PrimInfoExtRange
   const&)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::getProperties(embree::sse2::PrimInfoExtRange
   const&)::{lambda(std::pair<unsigned long, bool> const&, std::pair<unsigned long, bool> const&)#2}
   const&) */

undefined1  [16]
embree::
parallel_reduce_internal<unsigned_long,std::pair<unsigned_long,bool>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(std::pair<unsigned_long,bool>const&,std::pair<unsigned_long,bool>const&)_2_>
          (ulong param_1,ulong param_2,ulong param_3,ulong param_4,pair_conflict *param_5,
          _lambda_embree__range<unsigned_long>_const___1_ *param_6,
          _lambda_std__pair<unsigned_long,bool>_const__std__pair<unsigned_long,bool>_const___2_
          *param_7)

{
  int *piVar1;
  undefined8 *puVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  ulong uVar6;
  long lVar7;
  long *plVar8;
  undefined8 uVar9;
  long lVar10;
  long in_FS_OFFSET;
  byte bVar11;
  undefined1 auVar12 [16];
  ulong local_2148;
  ulong local_2140;
  ulong local_2138 [2];
  ulong local_2128;
  ulong *local_2120;
  ulong *local_2118;
  ulong *local_2110;
  long *local_2108;
  _lambda_embree__range<unsigned_long>_const___1_ *local_2100;
  ulong local_20f0;
  undefined8 uStack_20e8;
  undefined8 local_20e0;
  undefined8 **ppuStack_20d8;
  ulong *local_20d0;
  long local_20c0 [1024];
  long *local_c0;
  ulong local_b8;
  long local_48;
  
  bVar11 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2148 = param_3;
  local_2140 = param_2;
  local_2138[0] = param_1;
  uVar5 = embree::TaskScheduler::threadCount();
  lVar10 = 0x400;
  plVar8 = local_20c0;
  if (local_2138[0] < uVar5) {
    uVar5 = local_2138[0];
  }
  uVar6 = 0x200;
  if (uVar5 < 0x201) {
    uVar6 = uVar5;
  }
  for (; lVar10 != 0; lVar10 = lVar10 + -1) {
    *plVar8 = 0;
    plVar8 = plVar8 + (ulong)bVar11 * -2 + 1;
  }
  local_2120 = &local_2140;
  local_2118 = &local_2148;
  local_2110 = local_2138;
  local_2138[0] = uVar6;
  local_2108 = local_20c0;
  local_2100 = param_6;
  local_c0 = local_20c0;
  local_b8 = uVar6;
  if (uVar5 == 0) {
    lVar10 = *(long *)param_5;
    uVar5 = (ulong)(byte)param_5[8];
  }
  else {
    ppuStack_20d8 = &local_2120;
    uStack_20e8 = 0;
    local_20e0 = 1;
    local_2128 = 0;
    local_20f0 = uVar6;
    local_20d0 = &local_2128;
    lVar10 = embree::TaskScheduler::thread();
    if (lVar10 == 0) {
      uVar9 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImSt4pairImbEZNS_4sse226HeuristicArrayOpenMergeSAHIZNS7_19BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_9TriangleMILi4EEEE5buildEvEUlRNSD_8BuildRefEPSE_E5_SE_Lm32EE13getPropertiesERKNS7_16PrimInfoExtRangeEEUlRKNS_5rangeImEEE_ZNSI_13getPropertiesESL_EUlRKS6_SS_E0_EET0_T_SV_SV_SV_RKSU_RKT1_RKT2_EUlmE_EEvSV_SX_EUlSP_E_EEvSV_SV_SV_SX_PNS0_16TaskGroupContextEEUlvE_EEvRKSV_S17_mb
                (uVar9,&local_20f0,&local_2128,uVar6,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar10 + 0x40080)) {
LAB_0013954b:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar10 + 0xc00c0);
      uVar5 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar5) goto LAB_0013954b;
      *(ulong *)(lVar10 + 0xc00c0) = uVar5;
      puVar2 = (undefined8 *)(lVar10 + 0x40090 + uVar5);
      *puVar2 = 0x143bf0;
      puVar2[1] = local_20f0;
      puVar2[2] = uStack_20e8;
      puVar2[3] = local_20e0;
      puVar2[4] = ppuStack_20d8;
      puVar2[5] = local_20d0;
      lVar7 = *(long *)(lVar10 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar10 + 0x40 + lVar7);
      lVar4 = *(long *)(lVar10 + 0xc0100);
      *(undefined4 *)(lVar10 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar10 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar10;
      *(undefined8 **)(lVar7 + 0x50) = puVar2;
      *(long *)(lVar7 + 0x58) = lVar4;
      *(ulong **)(lVar7 + 0x60) = &local_2128;
      *(long *)(lVar7 + 0x68) = lVar3;
      *(ulong *)(lVar7 + 0x70) = uVar6;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar10 + 0x40080) = *(long *)(lVar10 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar10 + 0x40080) - 1U <= *(ulong *)(lVar10 + 0x40040)) {
        LOCK();
        *(long *)(lVar10 + 0x40040) = *(long *)(lVar10 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2128 != 0) {
      local_20f0 = local_2128;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_20f0);
      goto LAB_00139546;
    }
    lVar10 = *(long *)param_5;
    uVar5 = (ulong)(byte)param_5[8];
    if (local_2138[0] != 0) {
      plVar8 = local_c0;
      do {
        if ((char)uVar5 != '\0') {
          uVar5 = (ulong)*(byte *)(plVar8 + 1);
        }
        lVar10 = lVar10 + *plVar8;
        plVar8 = plVar8 + 2;
      } while (plVar8 != local_c0 + local_2138[0] * 2);
    }
  }
  if (local_c0 != local_20c0) {
    embree::alignedFree(local_c0);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    auVar12._8_8_ = uVar5;
    auVar12._0_8_ = lVar10;
    return auVar12;
  }
LAB_00139546:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::getProperties(embree::sse2::PrimInfoExtRange const&) */

long __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
::getProperties(HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
                *this,PrimInfoExtRange *param_1)

{
  ulong uVar1;
  long lVar2;
  ulong uVar3;
  float *pfVar4;
  long lVar5;
  long in_FS_OFFSET;
  float fVar6;
  float fVar7;
  float fVar8;
  float local_5c;
  long local_58;
  float local_50;
  undefined8 local_48;
  undefined1 local_40;
  float local_38 [4];
  undefined8 local_28;
  undefined8 uStack_20;
  long *local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_28 = (HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
              *)CONCAT44(*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4),
                         *(float *)(param_1 + 0x10) - *(float *)param_1);
  uStack_20 = (float *)CONCAT44(*(float *)(param_1 + 0x1c) - *(float *)(param_1 + 0xc),
                                *(float *)(param_1 + 0x18) - *(float *)(param_1 + 8));
  fVar6 = (float)((uint)(*(float *)(param_1 + 0x10) - *(float *)param_1) & _LC25);
  fVar7 = (float)((uint)(*(float *)(param_1 + 0x14) - *(float *)(param_1 + 4)) & _LC25);
  fVar8 = (float)((uint)(*(float *)(param_1 + 0x18) - *(float *)(param_1 + 8)) & _LC25);
  if (fVar6 <= fVar7) {
    lVar5 = 4;
    if (fVar7 <= fVar8) {
      lVar5 = 8;
    }
    local_58 = 1;
    if (fVar7 <= fVar8) {
      local_58 = 2;
    }
  }
  else {
    uVar3 = (ulong)(fVar6 <= fVar8);
    local_58 = uVar3 * 2;
    lVar5 = uVar3 * 8;
  }
  uVar3 = *(ulong *)(param_1 + 0x40);
  local_50 = _LC28 / *(float *)((long)&local_28 + lVar5);
  local_40 = 1;
  local_48 = 0;
  pfVar4 = (float *)(uVar3 * 0x40 + *(long *)this);
  local_5c = pfVar4[3];
  uStack_20 = &local_5c;
  local_18 = &local_58;
  uVar1 = *(ulong *)(param_1 + 0x48);
  local_28 = this;
  if (uVar1 - uVar3 < 0x400) {
    if (uVar3 < uVar1) {
      lVar2 = 0;
      do {
        if (((uint)pfVar4[8] & 8) == 0) {
          local_38[3] = pfVar4[7] - pfVar4[3];
          local_38[0] = pfVar4[4] - *pfVar4;
          local_38[1] = pfVar4[5] - pfVar4[1];
          local_38[2] = pfVar4[6] - pfVar4[2];
          if (__LC26 < *(float *)((long)local_38 + lVar5) * local_50) {
            lVar2 = lVar2 + 3;
          }
        }
        pfVar4 = pfVar4 + 0x10;
      } while ((float *)(*(long *)this + uVar1 * 0x40) != pfVar4);
    }
    else {
      lVar2 = 0;
    }
  }
  else {
    lVar2 = parallel_reduce_internal<unsigned_long,std::pair<unsigned_long,bool>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::getProperties(embree::sse2::PrimInfoExtRange_const&)::_lambda(std::pair<unsigned_long,bool>const&,std::pair<unsigned_long,bool>const&)_2_>
                      ((uVar1 - uVar3) + 0x1ff >> 9,uVar3,uVar1,0x200,(pair_conflict *)&local_48,
                       (_lambda_embree__range<unsigned_long>_const___1_ *)&local_28,
                       (_lambda_std__pair<unsigned_long,bool>_const__std__pair<unsigned_long,bool>_const___2_
                        *)local_38);
  }
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return lVar2;
}



/* embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::BBox<embree::Vec3fa> >
   embree::parallel_reduce_internal<unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long)::{lambda(embree::range<unsigned long> const&)#1},
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2}>(unsigned long,
   unsigned long, unsigned long, unsigned long, embree::sse2::BinInfoT<32ul,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long)::{lambda(embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&,
   embree::sse2::BinInfoT<32ul, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, embree::BBox<embree::Vec3fa> > const&)#2} const&) */

embree * __thiscall
embree::
parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&)_2_>
          (embree *this,ulong param_1,ulong param_2,ulong param_3,ulong param_4,
          BinInfoT_conflict *param_5,_lambda_embree__range<unsigned_long>_const___1_ *param_6,
          _lambda_embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const___2_
          *param_7)

{
  int *piVar1;
  long *plVar2;
  long lVar3;
  long lVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  undefined8 uVar13;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined8 uVar16;
  undefined8 uVar17;
  undefined8 uVar18;
  undefined8 uVar19;
  undefined8 uVar20;
  ulong uVar21;
  undefined1 (*pauVar22) [16];
  embree *peVar23;
  embree *peVar24;
  undefined8 *puVar25;
  undefined1 (*pauVar26) [16];
  undefined1 (*pauVar27) [16];
  long lVar28;
  undefined8 uVar29;
  long lVar30;
  undefined1 (*pauVar31) [16];
  ulong uVar32;
  BinInfoT_conflict *pBVar33;
  undefined1 (*pauVar34) [16];
  undefined1 (*pauVar35) [16];
  undefined8 *puVar36;
  undefined1 (*pauVar37) [16];
  undefined8 *puVar38;
  undefined1 (*pauVar39) [16];
  long in_FS_OFFSET;
  byte bVar40;
  undefined1 auVar41 [16];
  undefined1 (*local_2b58) [16];
  ulong local_2b48;
  ulong local_2b40;
  ulong local_2b38 [2];
  ulong local_2b28;
  ulong *local_2b20;
  ulong *local_2b18;
  ulong *local_2b10;
  undefined1 (*local_2b08) [16];
  _lambda_embree__range<unsigned_long>_const___1_ *local_2b00;
  ulong local_2af0;
  undefined8 uStack_2ae8;
  undefined8 local_2ae0;
  ulong **ppuStack_2ad8;
  ulong *local_2ad0;
  undefined1 local_2ac0 [3072];
  undefined8 local_1ec0;
  int aiStack_1eb8 [124];
  undefined8 local_1cc8;
  undefined1 local_1cc0 [7168];
  undefined1 (*local_c0) [16];
  ulong local_b8;
  long local_48;
  
  bVar40 = 0;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  local_2b48 = param_3;
  local_2b40 = param_2;
  local_2b38[0] = param_1;
  local_b8 = embree::TaskScheduler::threadCount();
  if (0x200 < local_2b38[0]) {
    local_2b38[0] = 0x200;
  }
  if (local_2b38[0] <= local_b8) {
    local_b8 = local_2b38[0];
  }
  local_2b38[0] = local_b8;
  if (local_b8 * 0xe00 < 0x2001) {
    local_c0 = (undefined1 (*) [16])local_1cc0;
  }
  else {
    local_c0 = (undefined1 (*) [16])embree::alignedMalloc(local_b8 * 0xe00,0x40);
  }
  uVar21 = local_2b38[0];
  local_2b58 = (undefined1 (*) [16])local_1cc0;
  local_2b20 = &local_2b40;
  local_2b00 = param_6;
  local_2b18 = &local_2b48;
  local_2b10 = local_2b38;
  local_2b08 = local_2b58;
  if (local_2b38[0] != 0) {
    ppuStack_2ad8 = &local_2b20;
    uStack_2ae8 = 0;
    local_2ae0 = 1;
    local_2b28 = 0;
    local_2af0 = local_2b38[0];
    local_2ad0 = &local_2b28;
    lVar30 = embree::TaskScheduler::thread();
    if (lVar30 == 0) {
      uVar29 = embree::TaskScheduler::instance();
      _ZN6embree13TaskScheduler10spawn_rootIZNS0_5spawnImZNS_12parallel_forImZNS_24parallel_reduce_internalImNS_4sse28BinInfoTILm32ENS5_19BVHNBuilderTwoLevelILi4ENS_12TriangleMeshENS_9TriangleMILi4EEEE8BuildRefENS_4BBoxINS_6Vec3faEEEEEZNS5_26HeuristicArrayOpenMergeSAHIZNSB_5buildEvEUlRSC_PSC_E5_SC_Lm32EE20parallel_object_findERKNS5_16PrimInfoExtRangeEmEUlRKNS_5rangeImEEE_ZNSL_20parallel_object_findESO_mEUlRKSG_SV_E0_EET0_T_SY_SY_SY_RKSX_RKT1_RKT2_EUlmE_EEvSY_S10_EUlSS_E_EEvSY_SY_SY_S10_PNS0_16TaskGroupContextEEUlvE_EEvRKSY_S1A_mb
                (uVar29,&local_2af0,&local_2b28,uVar21,1);
    }
    else {
      if (0xfff < *(ulong *)(lVar30 + 0x40080)) {
LAB_0013a5d3:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar3 = *(long *)(lVar30 + 0xc00c0);
      uVar32 = lVar3 + 0x30 + (ulong)(-(int)lVar3 & 0x3f);
      if (0x80000 < uVar32) goto LAB_0013a5d3;
      *(ulong *)(lVar30 + 0xc00c0) = uVar32;
      puVar25 = (undefined8 *)(lVar30 + 0x40090 + uVar32);
      *puVar25 = 0x143c08;
      puVar25[1] = local_2af0;
      puVar25[2] = uStack_2ae8;
      puVar25[3] = local_2ae0;
      puVar25[4] = ppuStack_2ad8;
      puVar25[5] = local_2ad0;
      lVar28 = *(long *)(lVar30 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar30 + 0x40 + lVar28);
      lVar4 = *(long *)(lVar30 + 0xc0100);
      *(undefined4 *)(lVar30 + 0x44 + lVar28) = 1;
      *(undefined1 *)(lVar30 + 0x48 + lVar28) = 1;
      lVar28 = lVar28 + lVar30;
      *(undefined8 **)(lVar28 + 0x50) = puVar25;
      *(long *)(lVar28 + 0x58) = lVar4;
      *(ulong **)(lVar28 + 0x60) = &local_2b28;
      *(long *)(lVar28 + 0x68) = lVar3;
      *(ulong *)(lVar28 + 0x70) = uVar21;
      if (lVar4 != 0) {
        LOCK();
        *(int *)(lVar4 + 4) = *(int *)(lVar4 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar30 + 0x40080) = *(long *)(lVar30 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar30 + 0x40080) - 1U <= *(ulong *)(lVar30 + 0x40040)) {
        LOCK();
        *(long *)(lVar30 + 0x40040) = *(long *)(lVar30 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    if (local_2b28 != 0) {
      local_2af0 = local_2b28;
      std::__exception_ptr::exception_ptr::_M_addref();
      std::rethrow_exception(&local_2af0);
      goto LAB_0013a5a7;
    }
  }
  pauVar22 = local_c0;
  uVar21 = local_2b38[0];
  peVar23 = this;
  pBVar33 = param_5;
  do {
    uVar29 = *(undefined8 *)(pBVar33 + 8);
    peVar24 = peVar23 + 0x60;
    *(undefined8 *)peVar23 = *(undefined8 *)pBVar33;
    *(undefined8 *)(peVar23 + 8) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x18);
    *(undefined8 *)(peVar23 + 0x10) = *(undefined8 *)(pBVar33 + 0x10);
    *(undefined8 *)(peVar23 + 0x18) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x28);
    *(undefined8 *)(peVar23 + 0x20) = *(undefined8 *)(pBVar33 + 0x20);
    *(undefined8 *)(peVar23 + 0x28) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x38);
    *(undefined8 *)(peVar23 + 0x30) = *(undefined8 *)(pBVar33 + 0x30);
    *(undefined8 *)(peVar23 + 0x38) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x48);
    *(undefined8 *)(peVar23 + 0x40) = *(undefined8 *)(pBVar33 + 0x40);
    *(undefined8 *)(peVar23 + 0x48) = uVar29;
    uVar29 = *(undefined8 *)(pBVar33 + 0x58);
    *(undefined8 *)(peVar23 + 0x50) = *(undefined8 *)(pBVar33 + 0x50);
    *(undefined8 *)(peVar23 + 0x58) = uVar29;
    peVar23 = peVar24;
    pBVar33 = pBVar33 + 0x60;
  } while (peVar24 != this + 0xc00);
  puVar25 = (undefined8 *)memmove(this + 0xc00,param_5 + 0xc00,0x200);
  if (uVar21 != 0) {
    pauVar27 = (undefined1 (*) [16])local_2ac0;
    peVar23 = this;
    pauVar39 = pauVar22;
    do {
      do {
        uVar29 = *(undefined8 *)(peVar23 + 8);
        uVar11 = *(undefined8 *)(peVar23 + 0x10);
        uVar12 = *(undefined8 *)(peVar23 + 0x18);
        pauVar26 = pauVar27 + 6;
        uVar13 = *(undefined8 *)(peVar23 + 0x20);
        uVar14 = *(undefined8 *)(peVar23 + 0x28);
        uVar15 = *(undefined8 *)(peVar23 + 0x30);
        uVar16 = *(undefined8 *)(peVar23 + 0x38);
        uVar17 = *(undefined8 *)(peVar23 + 0x40);
        uVar18 = *(undefined8 *)(peVar23 + 0x48);
        uVar19 = *(undefined8 *)(peVar23 + 0x50);
        uVar20 = *(undefined8 *)(peVar23 + 0x58);
        *(undefined8 *)*pauVar27 = *(undefined8 *)peVar23;
        *(undefined8 *)(*pauVar27 + 8) = uVar29;
        *(undefined8 *)pauVar27[1] = uVar11;
        *(undefined8 *)(pauVar27[1] + 8) = uVar12;
        *(undefined8 *)pauVar27[2] = uVar13;
        *(undefined8 *)(pauVar27[2] + 8) = uVar14;
        *(undefined8 *)pauVar27[3] = uVar15;
        *(undefined8 *)(pauVar27[3] + 8) = uVar16;
        *(undefined8 *)pauVar27[4] = uVar17;
        *(undefined8 *)(pauVar27[4] + 8) = uVar18;
        *(undefined8 *)pauVar27[5] = uVar19;
        *(undefined8 *)(pauVar27[5] + 8) = uVar20;
        pauVar27 = pauVar26;
        peVar23 = peVar23 + 0x60;
      } while (pauVar26 != (undefined1 (*) [16])&local_1ec0);
      plVar2 = *(long **)param_7;
      puVar36 = puVar25;
      pauVar27 = (undefined1 (*) [16])&local_1ec0;
      for (lVar30 = 0x40; lVar30 != 0; lVar30 = lVar30 + -1) {
        *(undefined8 *)*pauVar27 = *puVar36;
        puVar36 = puVar36 + (ulong)bVar40 * -2 + 1;
        pauVar27 = (undefined1 (*) [16])(pauVar27[-(ulong)bVar40] + 8);
      }
      lVar30 = *plVar2;
      pauVar27 = (undefined1 (*) [16])local_2ac0;
      peVar23 = this;
      if (lVar30 != 0) {
        pauVar26 = (undefined1 (*) [16])local_2ac0;
        pauVar31 = pauVar39;
        pauVar34 = pauVar39;
        pauVar37 = (undefined1 (*) [16])&local_1ec0;
        do {
          iVar5 = *(int *)(*pauVar37 + 4);
          iVar6 = *(int *)(*pauVar37 + 8);
          iVar7 = *(int *)(*pauVar37 + 0xc);
          pauVar35 = pauVar34 + 1;
          iVar8 = *(int *)(pauVar34[0xc0] + 4);
          iVar9 = *(int *)(pauVar34[0xc0] + 8);
          iVar10 = *(int *)(pauVar34[0xc0] + 0xc);
          *(int *)*pauVar37 = *(int *)*pauVar37 + *(int *)pauVar34[0xc0];
          *(int *)(*pauVar37 + 4) = iVar5 + iVar8;
          *(int *)(*pauVar37 + 8) = iVar6 + iVar9;
          *(int *)(*pauVar37 + 0xc) = iVar7 + iVar10;
          auVar41 = minps(*pauVar26,*pauVar31);
          *pauVar26 = auVar41;
          auVar41 = maxps(pauVar26[1],pauVar31[1]);
          pauVar26[1] = auVar41;
          auVar41 = minps(pauVar26[2],pauVar31[2]);
          pauVar26[2] = auVar41;
          auVar41 = maxps(pauVar26[3],pauVar31[3]);
          pauVar26[3] = auVar41;
          auVar41 = minps(pauVar26[4],pauVar31[4]);
          pauVar26[4] = auVar41;
          auVar41 = maxps(pauVar26[5],pauVar31[5]);
          pauVar26[5] = auVar41;
          pauVar26 = pauVar26 + 6;
          pauVar31 = pauVar31 + 6;
          pauVar34 = pauVar35;
          pauVar37 = pauVar37 + 1;
        } while (pauVar39 + lVar30 != pauVar35);
      }
      do {
        uVar29 = *(undefined8 *)(*pauVar27 + 8);
        uVar11 = *(undefined8 *)pauVar27[1];
        uVar12 = *(undefined8 *)(pauVar27[1] + 8);
        pauVar26 = pauVar27 + 6;
        uVar13 = *(undefined8 *)pauVar27[2];
        uVar14 = *(undefined8 *)(pauVar27[2] + 8);
        uVar15 = *(undefined8 *)pauVar27[3];
        uVar16 = *(undefined8 *)(pauVar27[3] + 8);
        uVar17 = *(undefined8 *)pauVar27[4];
        uVar18 = *(undefined8 *)(pauVar27[4] + 8);
        uVar19 = *(undefined8 *)pauVar27[5];
        uVar20 = *(undefined8 *)(pauVar27[5] + 8);
        *(undefined8 *)peVar23 = *(undefined8 *)*pauVar27;
        *(undefined8 *)(peVar23 + 8) = uVar29;
        *(undefined8 *)(peVar23 + 0x10) = uVar11;
        *(undefined8 *)(peVar23 + 0x18) = uVar12;
        *(undefined8 *)(peVar23 + 0x20) = uVar13;
        *(undefined8 *)(peVar23 + 0x28) = uVar14;
        *(undefined8 *)(peVar23 + 0x30) = uVar15;
        *(undefined8 *)(peVar23 + 0x38) = uVar16;
        *(undefined8 *)(peVar23 + 0x40) = uVar17;
        *(undefined8 *)(peVar23 + 0x48) = uVar18;
        *(undefined8 *)(peVar23 + 0x50) = uVar19;
        *(undefined8 *)(peVar23 + 0x58) = uVar20;
        pauVar27 = pauVar26;
        peVar23 = peVar23 + 0x60;
      } while ((undefined1 (*) [16])&local_1ec0 != pauVar26);
      pauVar39 = pauVar39 + 0xe0;
      *puVar25 = local_1ec0;
      puVar25[0x3f] = local_1cc8;
      lVar30 = (long)puVar25 - (long)((ulong)(puVar25 + 1) & 0xfffffffffffffff8);
      puVar36 = (undefined8 *)((long)&local_1ec0 - lVar30);
      puVar38 = (undefined8 *)((ulong)(puVar25 + 1) & 0xfffffffffffffff8);
      for (uVar32 = (ulong)((int)lVar30 + 0x200U >> 3); uVar32 != 0; uVar32 = uVar32 - 1) {
        *puVar38 = *puVar36;
        puVar36 = puVar36 + (ulong)bVar40 * -2 + 1;
        puVar38 = puVar38 + (ulong)bVar40 * -2 + 1;
      }
      pauVar27 = (undefined1 (*) [16])local_2ac0;
      peVar23 = this;
    } while (pauVar39 != pauVar22 + uVar21 * 0xe0);
  }
  if (pauVar22 != local_2b58) {
    embree::alignedFree(pauVar22);
  }
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return this;
  }
LAB_0013a5a7:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange
   const&, unsigned long) */

PrimInfoExtRange *
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
::parallel_object_find(PrimInfoExtRange *param_1,ulong param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  long lVar9;
  long lVar10;
  undefined1 (*pauVar11) [16];
  undefined1 (*pauVar12) [16];
  BinInfoT_conflict *pBVar13;
  BinInfoT_conflict *pBVar14;
  ulong in_RCX;
  embree *peVar15;
  ulong uVar16;
  long lVar17;
  float *pfVar18;
  undefined4 uVar19;
  long in_RDX;
  BinInfoT_conflict *pBVar20;
  ulong uVar21;
  embree *peVar22;
  embree *peVar23;
  long lVar24;
  undefined1 (*pauVar25) [16];
  ulong uVar26;
  ulong uVar27;
  long in_FS_OFFSET;
  byte bVar28;
  undefined1 auVar29 [16];
  uint uVar30;
  int iVar31;
  uint uVar33;
  int iVar34;
  float fVar35;
  uint uVar36;
  int iVar37;
  float fVar38;
  undefined1 auVar32 [16];
  int iVar39;
  uint uVar40;
  uint uVar43;
  uint uVar44;
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  uint uVar45;
  uint uVar47;
  uint uVar48;
  uint uVar49;
  uint uVar50;
  undefined1 auVar46 [16];
  uint uVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  undefined1 auVar56 [16];
  undefined1 auVar57 [16];
  undefined1 local_1f40 [16];
  undefined1 local_1f30 [16];
  undefined1 local_1f20 [16];
  undefined1 local_1f10 [16];
  undefined1 local_1f00 [16];
  ulong *local_1ee8;
  ulong local_1ee0;
  ulong *local_1ed8;
  undefined1 local_1ed0 [8];
  float fStack_1ec8;
  undefined1 local_1ec0 [16];
  ulong local_1eb0 [2];
  float local_1ea0;
  float fStack_1e9c;
  float fStack_1e98;
  float fStack_1e94;
  float local_1e90;
  float fStack_1e8c;
  float fStack_1e88;
  uint uStack_1e84;
  float local_1e80 [128];
  BinInfoT_conflict local_1c80 [3056];
  int local_1090 [4];
  BinInfoT_conflict local_1080 [4];
  int aiStack_107c [127];
  embree local_e80 [4];
  int aiStack_e7c [3];
  int local_e70 [4];
  undefined1 local_e60 [16];
  undefined1 local_e50 [16];
  undefined1 local_e40 [16];
  undefined1 local_e30 [2992];
  embree local_280 [4];
  int aiStack_27c [141];
  long local_48;
  
  bVar28 = 0;
  local_1ed0._4_4_ = _LC8;
  local_1ed0._0_4_ = _LC8;
  fStack_1ec8 = _LC8;
  register0x0000120c = _LC8;
  auVar29._4_4_ = _LC6;
  auVar29._0_4_ = _LC6;
  auVar29._8_4_ = _LC6;
  auVar29._12_4_ = _LC6;
  local_48 = *(long *)(in_FS_OFFSET + 0x28);
  pBVar14 = local_1080;
  pBVar13 = local_1c80;
  do {
    *(undefined1 (*) [16])(pBVar13 + 0x40) = _local_1ed0;
    pBVar20 = pBVar13 + 0x60;
    *(undefined1 (*) [16])(pBVar13 + 0x50) = auVar29;
    *(undefined1 (*) [16])(pBVar13 + 0x20) = _local_1ed0;
    *(undefined1 (*) [16])(pBVar13 + 0x30) = auVar29;
    *(undefined1 (*) [16])pBVar13 = _local_1ed0;
    *(undefined1 (*) [16])(pBVar13 + 0x10) = auVar29;
    *(undefined1 (*) [16])pBVar14 = (undefined1  [16])0x0;
    pBVar14 = pBVar14 + 0x10;
    pBVar13 = pBVar20;
  } while (local_1080 != pBVar20);
  local_1ea0 = *(float *)(in_RDX + 0x20);
  fStack_1e9c = *(float *)(in_RDX + 0x24);
  fStack_1e98 = *(float *)(in_RDX + 0x28);
  fStack_1e94 = *(float *)(in_RDX + 0x2c);
  local_1ee8 = local_1eb0;
  local_1eb0[0] = 0x20;
  auVar32._0_4_ = *(float *)(in_RDX + 0x30) - local_1ea0;
  auVar32._4_4_ = *(float *)(in_RDX + 0x34) - fStack_1e9c;
  auVar32._8_4_ = *(float *)(in_RDX + 0x38) - fStack_1e98;
  auVar32._12_4_ = *(float *)(in_RDX + 0x3c) - fStack_1e94;
  uVar26 = *(ulong *)(in_RDX + 0x40);
  auVar41._4_4_ = _LC11;
  auVar41._0_4_ = _LC11;
  auVar41._8_4_ = _LC11;
  auVar41._12_4_ = _LC11;
  uVar27 = *(ulong *)(in_RDX + 0x48) - uVar26;
  auVar41 = maxps(auVar41,auVar32);
  uVar21 = uVar27 + 0x1ff >> 9;
  auVar42._4_4_ = _LC13;
  auVar42._0_4_ = _LC13;
  auVar42._8_4_ = _LC13;
  auVar42._12_4_ = _LC13;
  auVar32 = divps(auVar42,auVar41);
  local_1e90 = (float)(-(uint)(_LC11 < auVar41._0_4_) & auVar32._0_4_);
  fStack_1e8c = (float)(-(uint)(_LC11 < auVar41._4_4_) & auVar32._4_4_);
  fStack_1e88 = (float)(-(uint)(_LC11 < auVar41._8_4_) & auVar32._8_4_);
  uStack_1e84 = -(uint)(_LC11 < auVar41._12_4_) & auVar32._12_4_;
  local_1ee0 = param_2;
  local_1ed8 = local_1ee8;
  if (uVar21 == 1) {
    peVar23 = local_e80;
    peVar22 = local_280;
    do {
      *(undefined1 (*) [16])(peVar23 + 0x40) = _local_1ed0;
      peVar15 = peVar23 + 0x60;
      *(undefined1 (*) [16])(peVar23 + 0x50) = auVar29;
      *(undefined1 (*) [16])(peVar23 + 0x20) = _local_1ed0;
      *(undefined1 (*) [16])(peVar23 + 0x30) = auVar29;
      *(undefined1 (*) [16])peVar23 = _local_1ed0;
      *(undefined1 (*) [16])(peVar23 + 0x10) = auVar29;
      *(undefined1 (*) [16])peVar22 = (undefined1  [16])0x0;
      peVar23 = peVar15;
      peVar22 = peVar22 + 0x10;
    } while (local_280 != peVar15);
    pauVar25 = (undefined1 (*) [16])(*(long *)param_2 + uVar26 * 0x40);
    if (uVar27 == 1) {
LAB_0013af05:
      auVar32 = pauVar25[1];
      auVar42 = *pauVar25;
      iVar31 = *(int *)(pauVar25[1] + 0xc);
      uVar30 = (uint)(((auVar32._0_4_ + auVar42._0_4_) - local_1ea0) * local_1e90 + _LC15);
      uVar33 = (uint)(((auVar32._4_4_ + auVar42._4_4_) - fStack_1e9c) * fStack_1e8c + _LC15);
      uVar36 = (uint)(((auVar32._8_4_ + auVar42._8_4_) - fStack_1e98) * fStack_1e88 + _LC15);
      uVar40 = -(uint)((int)uVar30 < (int)__LC17);
      uVar43 = -(uint)((int)uVar33 < (int)_UNK_00144104);
      uVar44 = -(uint)((int)uVar36 < (int)_UNK_00144108);
      uVar30 = uVar40 & uVar30 | ~uVar40 & __LC17;
      uVar33 = uVar43 & uVar33 | ~uVar43 & _UNK_00144104;
      uVar36 = uVar44 & uVar36 | ~uVar44 & _UNK_00144108;
      lVar24 = (long)(int)(~-(uint)((int)uVar30 < 0) & uVar30);
      peVar23 = local_e80 + lVar24 * 0x60;
      *(int *)(local_e80 + (lVar24 + 0xc0) * 0x10) =
           *(int *)(local_e80 + (lVar24 + 0xc0) * 0x10) + iVar31;
      auVar41 = minps(*(undefined1 (*) [16])peVar23,auVar42);
      *(undefined1 (*) [16])peVar23 = auVar41;
      auVar41 = maxps(*(undefined1 (*) [16])(local_e70 + lVar24 * 0x18),auVar32);
      *(undefined1 (*) [16])(local_e70 + lVar24 * 0x18) = auVar41;
      lVar24 = (long)(int)(~-(uint)((int)uVar33 < 0) & uVar33);
      lVar17 = lVar24 * 0x60;
      aiStack_27c[lVar24 * 4] = aiStack_27c[lVar24 * 4] + iVar31;
      auVar41 = minps(*(undefined1 (*) [16])(local_e60 + lVar17),auVar42);
      *(undefined1 (*) [16])(local_e60 + lVar17) = auVar41;
      auVar41 = maxps(*(undefined1 (*) [16])(local_e50 + lVar17),auVar32);
      *(undefined1 (*) [16])(local_e50 + lVar17) = auVar41;
      lVar24 = (long)(int)(~-(uint)((int)uVar36 < 0) & uVar36);
      lVar17 = lVar24 * 0x60;
      aiStack_27c[lVar24 * 4 + 1] = aiStack_27c[lVar24 * 4 + 1] + iVar31;
      auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar17),auVar42);
      *(undefined1 (*) [16])(local_e40 + lVar17) = auVar42;
      auVar32 = maxps(*(undefined1 (*) [16])(local_e30 + lVar17),auVar32);
      *(undefined1 (*) [16])(local_e30 + lVar17) = auVar32;
    }
    else {
      pauVar11 = pauVar25;
      do {
        auVar32 = pauVar11[1];
        auVar42 = *pauVar11;
        pauVar12 = pauVar11 + 8;
        auVar41 = pauVar11[5];
        auVar56 = pauVar11[4];
        uVar30 = (uint)(((auVar32._0_4_ + auVar42._0_4_) - local_1ea0) * local_1e90 + _LC15);
        uVar33 = (uint)(((auVar32._4_4_ + auVar42._4_4_) - fStack_1e9c) * fStack_1e8c + _LC15);
        uVar36 = (uint)(((auVar32._8_4_ + auVar42._8_4_) - fStack_1e98) * fStack_1e88 + _LC15);
        uVar40 = -(uint)((int)uVar30 < (int)__LC17);
        uVar43 = -(uint)((int)uVar33 < (int)_UNK_00144104);
        uVar44 = -(uint)((int)uVar36 < (int)_UNK_00144108);
        uVar30 = uVar30 & uVar40 | ~uVar40 & __LC17;
        uVar33 = uVar33 & uVar43 | ~uVar43 & _UNK_00144104;
        uVar40 = uVar36 & uVar44 | ~uVar44 & _UNK_00144108;
        uVar16 = (ulong)(~-(uint)((int)uVar30 < 0) & uVar30);
        peVar23 = local_e80 + uVar16 * 0x60;
        uVar30 = (uint)(((auVar41._0_4_ + auVar56._0_4_) - local_1ea0) * local_1e90 + _LC15);
        uVar36 = (uint)(((auVar41._4_4_ + auVar56._4_4_) - fStack_1e9c) * fStack_1e8c + _LC15);
        uVar43 = (uint)(((auVar41._8_4_ + auVar56._8_4_) - fStack_1e98) * fStack_1e88 + _LC15);
        uVar44 = -(uint)((int)uVar30 < (int)__LC17);
        uVar47 = -(uint)((int)uVar36 < (int)_UNK_00144104);
        uVar49 = -(uint)((int)uVar43 < (int)_UNK_00144108);
        uVar30 = uVar44 & uVar30 | ~uVar44 & __LC17;
        uVar36 = uVar47 & uVar36 | ~uVar47 & _UNK_00144104;
        uVar43 = uVar49 & uVar43 | ~uVar49 & _UNK_00144108;
        auVar46 = minps(*(undefined1 (*) [16])peVar23,auVar42);
        *(undefined1 (*) [16])peVar23 = auVar46;
        auVar46 = maxps(*(undefined1 (*) [16])(local_e70 + uVar16 * 0x18),auVar32);
        *(undefined1 (*) [16])(local_e70 + uVar16 * 0x18) = auVar46;
        uVar26 = (ulong)(~-(uint)((int)uVar33 < 0) & uVar33);
        lVar24 = uVar26 * 0x60;
        auVar46 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar42);
        *(undefined1 (*) [16])(local_e60 + lVar24) = auVar46;
        auVar46 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar32);
        *(undefined1 (*) [16])(local_e50 + lVar24) = auVar46;
        uVar21 = (ulong)(~-(uint)((int)uVar40 < 0) & uVar40);
        lVar24 = uVar21 * 0x60;
        auVar42 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar42);
        *(undefined1 (*) [16])(local_e40 + lVar24) = auVar42;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar32);
        *(undefined1 (*) [16])(local_e30 + lVar24) = auVar32;
        iVar31 = *(int *)(pauVar11[1] + 0xc);
        *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) =
             *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) + iVar31;
        uVar16 = (ulong)(~-(uint)((int)uVar30 < 0) & uVar30);
        aiStack_27c[uVar26 * 4] = aiStack_27c[uVar26 * 4] + iVar31;
        aiStack_27c[uVar21 * 4 + 1] = aiStack_27c[uVar21 * 4 + 1] + iVar31;
        peVar23 = local_e80 + uVar16 * 0x60;
        auVar32 = minps(*(undefined1 (*) [16])peVar23,auVar56);
        *(undefined1 (*) [16])peVar23 = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e70 + uVar16 * 0x18),auVar41);
        *(undefined1 (*) [16])(local_e70 + uVar16 * 0x18) = auVar32;
        uVar26 = (ulong)(~-(uint)((int)uVar36 < 0) & uVar36);
        lVar24 = uVar26 * 0x60;
        auVar32 = minps(*(undefined1 (*) [16])(local_e60 + lVar24),auVar56);
        *(undefined1 (*) [16])(local_e60 + lVar24) = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e50 + lVar24),auVar41);
        *(undefined1 (*) [16])(local_e50 + lVar24) = auVar32;
        uVar21 = (ulong)(~-(uint)((int)uVar43 < 0) & uVar43);
        lVar24 = uVar21 * 0x60;
        auVar32 = minps(*(undefined1 (*) [16])(local_e40 + lVar24),auVar56);
        *(undefined1 (*) [16])(local_e40 + lVar24) = auVar32;
        auVar32 = maxps(*(undefined1 (*) [16])(local_e30 + lVar24),auVar41);
        *(undefined1 (*) [16])(local_e30 + lVar24) = auVar32;
        iVar31 = *(int *)(pauVar11[5] + 0xc);
        *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) =
             *(int *)(local_e80 + (uVar16 + 0xc0) * 0x10) + iVar31;
        aiStack_27c[uVar26 * 4] = aiStack_27c[uVar26 * 4] + iVar31;
        aiStack_27c[uVar21 * 4 + 1] = aiStack_27c[uVar21 * 4 + 1] + iVar31;
        pauVar11 = pauVar12;
      } while (pauVar25 + (uVar27 - 2 >> 1) * 8 + 8 != pauVar12);
      uVar26 = (uVar27 - 2 & 0xfffffffffffffffe) + 2;
      if (uVar26 < uVar27) {
        pauVar25 = pauVar25 + uVar26 * 4;
        goto LAB_0013af05;
      }
    }
    lVar24 = 0x1f;
  }
  else {
    parallel_reduce_internal<unsigned_long,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BBox<embree::Vec3fa>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::range<unsigned_long>const&)_1_,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>::parallel_object_find(embree::sse2::PrimInfoExtRange_const&,unsigned_long)::_lambda(embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&,embree::sse2::BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BBox<embree::Vec3fa>>const&)_2_>
              (local_e80,uVar21,uVar26,*(ulong *)(in_RDX + 0x48),0x200,local_1c80,
               (_lambda_embree__range<unsigned_long>_const___1_ *)&local_1ee0,
               (_lambda_embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const__embree__sse2__BinInfoT<32ul,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>_>::BuildRef,embree::BBox<embree::Vec3fa>_>_const___2_
                *)&local_1ee8);
    unique0x10000a3f = _UNK_001440d4;
    local_1ed0._0_4_ = _LC8;
    auVar29._4_12_ = _UNK_001440c4;
    auVar29._0_4_ = _LC6;
    lVar24 = local_1eb0[0] - 1;
  }
  pBVar14 = local_1c80;
  peVar23 = local_e80;
  do {
    uVar5 = *(undefined8 *)(peVar23 + 8);
    uVar6 = *(undefined8 *)(peVar23 + 0x30);
    uVar7 = *(undefined8 *)(peVar23 + 0x38);
    pBVar13 = pBVar14 + 0x60;
    *(undefined8 *)pBVar14 = *(undefined8 *)peVar23;
    *(undefined8 *)(pBVar14 + 8) = uVar5;
    uVar5 = *(undefined8 *)(peVar23 + 0x10);
    uVar8 = *(undefined8 *)(peVar23 + 0x18);
    *(undefined8 *)(pBVar14 + 0x30) = uVar6;
    *(undefined8 *)(pBVar14 + 0x38) = uVar7;
    uVar6 = *(undefined8 *)(peVar23 + 0x50);
    uVar7 = *(undefined8 *)(peVar23 + 0x58);
    *(undefined8 *)(pBVar14 + 0x10) = uVar5;
    *(undefined8 *)(pBVar14 + 0x18) = uVar8;
    uVar5 = *(undefined8 *)(peVar23 + 0x20);
    uVar8 = *(undefined8 *)(peVar23 + 0x28);
    *(undefined8 *)(pBVar14 + 0x50) = uVar6;
    *(undefined8 *)(pBVar14 + 0x58) = uVar7;
    *(undefined8 *)(pBVar14 + 0x20) = uVar5;
    *(undefined8 *)(pBVar14 + 0x28) = uVar8;
    uVar5 = *(undefined8 *)(peVar23 + 0x48);
    *(undefined8 *)(pBVar14 + 0x40) = *(undefined8 *)(peVar23 + 0x40);
    *(undefined8 *)(pBVar14 + 0x48) = uVar5;
    pBVar14 = pBVar13;
    peVar23 = peVar23 + 0x60;
  } while (local_1080 != pBVar13);
  peVar23 = local_280;
  pBVar14 = local_1080;
  for (lVar17 = 0x40; lVar17 != 0; lVar17 = lVar17 + -1) {
    *(undefined8 *)pBVar14 = *(undefined8 *)peVar23;
    peVar23 = peVar23 + ((ulong)bVar28 * -2 + 1) * 8;
    pBVar14 = pBVar14 + (ulong)bVar28 * -0x10 + 8;
  }
  if (lVar24 == 0) {
    local_1ec0 = (undefined1  [16])0x0;
  }
  else {
    lVar17 = lVar24 * 0x10;
    iVar31 = 0;
    iVar34 = 0;
    iVar37 = 0;
    iVar39 = 0;
    pBVar14 = local_1c80 + lVar24 * 0x60;
    pfVar18 = local_1e80 + lVar24 * 4;
    auVar32 = _local_1ed0;
    auVar42 = auVar29;
    auVar41 = _local_1ed0;
    auVar56 = auVar29;
    auVar46 = _local_1ed0;
    auVar57 = auVar29;
    do {
      auVar42 = maxps(auVar42,*(undefined1 (*) [16])(pBVar14 + 0x10));
      auVar32 = minps(auVar32,*(undefined1 (*) [16])pBVar14);
      pBVar13 = pBVar14 + -0x60;
      iVar1 = *(int *)(local_1080 + lVar17);
      iVar2 = *(int *)((long)aiStack_107c + lVar17);
      iVar3 = *(int *)((long)aiStack_107c + lVar17 + 4);
      iVar4 = *(int *)((long)aiStack_107c + lVar17 + 8);
      auVar56 = maxps(auVar56,*(undefined1 (*) [16])(pBVar14 + 0x30));
      pfVar18[3] = 0.0;
      auVar41 = minps(auVar41,*(undefined1 (*) [16])(pBVar14 + 0x20));
      auVar57 = maxps(auVar57,*(undefined1 (*) [16])(pBVar14 + 0x50));
      iVar31 = iVar1 + iVar31;
      iVar34 = iVar2 + iVar34;
      iVar37 = iVar3 + iVar37;
      iVar39 = iVar4 + iVar39;
      auVar46 = minps(auVar46,*(undefined1 (*) [16])(pBVar14 + 0x40));
      *(int *)(local_e80 + lVar17) = iVar31;
      *(int *)((long)aiStack_e7c + lVar17) = iVar34;
      *(int *)((long)aiStack_e7c + lVar17 + 4) = iVar37;
      *(int *)((long)aiStack_e7c + lVar17 + 8) = iVar39;
      lVar17 = lVar17 + -0x10;
      fVar35 = auVar42._4_4_ - auVar32._4_4_;
      fVar38 = auVar42._8_4_ - auVar32._8_4_;
      *pfVar18 = (auVar42._0_4_ - auVar32._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar56._4_4_ - auVar41._4_4_;
      fVar38 = auVar56._8_4_ - auVar41._8_4_;
      pfVar18[1] = (auVar56._0_4_ - auVar41._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      fVar35 = auVar57._4_4_ - auVar46._4_4_;
      fVar38 = auVar57._8_4_ - auVar46._8_4_;
      pfVar18[2] = (auVar57._0_4_ - auVar46._0_4_) * (fVar35 + fVar38) + fVar35 * fVar38;
      pBVar14 = pBVar13;
      pfVar18 = pfVar18 + -4;
    } while (pBVar13 != local_1c80);
    local_1ec0 = (undefined1  [16])0x0;
    iVar31 = (1 << ((byte)in_RCX & 0x1f)) + -1;
    if (1 < local_1eb0[0]) {
      lVar24 = 0x10;
      uVar26 = in_RCX & 0xffffffff;
      local_1f00 = (undefined1  [16])0x0;
      local_1f10 = (undefined1  [16])0x0;
      pBVar14 = local_1c80;
      auVar32 = auVar29;
      auVar42 = auVar29;
      uVar30 = __LC20;
      uVar33 = _UNK_001440e4;
      uVar36 = _UNK_001440e8;
      uVar40 = _UNK_001440ec;
      local_1f40 = _local_1ed0;
      local_1f30 = _local_1ed0;
      local_1f20 = _local_1ed0;
      do {
        auVar29 = maxps(auVar29,*(undefined1 (*) [16])(pBVar14 + 0x50));
        local_1f40 = minps(local_1f40,*(undefined1 (*) [16])(pBVar14 + 0x40));
        local_1f10._0_4_ = local_1f10._0_4_ + *(int *)((long)local_1090 + lVar24);
        local_1f10._4_4_ = local_1f10._4_4_ + *(int *)((long)local_1090 + lVar24 + 4);
        local_1f10._8_4_ = local_1f10._8_4_ + *(int *)((long)local_1090 + lVar24 + 8);
        local_1f10._12_4_ = local_1f10._12_4_ + *(int *)((long)local_1090 + lVar24 + 0xc);
        auVar42 = maxps(auVar42,*(undefined1 (*) [16])(pBVar14 + 0x10));
        local_1f20 = minps(local_1f20,*(undefined1 (*) [16])pBVar14);
        fVar35 = auVar29._4_4_ - local_1f40._4_4_;
        fVar38 = auVar29._8_4_ - local_1f40._8_4_;
        local_1f30 = minps(local_1f30,*(undefined1 (*) [16])(pBVar14 + 0x20));
        fVar54 = auVar42._4_4_ - local_1f20._4_4_;
        fVar55 = auVar42._8_4_ - local_1f20._8_4_;
        auVar32 = maxps(auVar32,*(undefined1 (*) [16])(pBVar14 + 0x30));
        fVar52 = auVar32._4_4_ - local_1f30._4_4_;
        fVar53 = auVar32._8_4_ - local_1f30._8_4_;
        uVar45 = (uint)(local_1f10._0_4_ + iVar31) >> uVar26;
        uVar48 = (uint)(local_1f10._4_4_ + iVar31) >> uVar26;
        uVar50 = (uint)(local_1f10._8_4_ + iVar31) >> uVar26;
        uVar51 = (uint)(local_1f10._12_4_ + iVar31) >> uVar26;
        uVar43 = (uint)(*(int *)(local_e80 + lVar24) + iVar31) >> uVar26;
        uVar44 = (uint)(*(int *)((long)aiStack_e7c + lVar24) + iVar31) >> uVar26;
        uVar47 = (uint)(*(int *)((long)aiStack_e7c + lVar24 + 4) + iVar31) >> uVar26;
        uVar49 = (uint)(*(int *)((long)aiStack_e7c + lVar24 + 8) + iVar31) >> uVar26;
        fVar35 = (fVar35 + fVar38) * (auVar29._0_4_ - local_1f40._0_4_) + fVar35 * fVar38;
        pfVar18 = (float *)((long)local_1e80 + lVar24);
        lVar17 = lVar24 + 4;
        lVar9 = lVar24 + 8;
        lVar10 = lVar24 + 0xc;
        lVar24 = lVar24 + 0x10;
        fVar38 = ((float)(int)(uVar45 & _LC25) + (float)((int)uVar45 >> 0x1f & __LC19)) *
                 ((fVar54 + fVar55) * (auVar42._0_4_ - local_1f20._0_4_) + fVar54 * fVar55) +
                 ((float)(int)(uVar43 & _LC25) + (float)((int)uVar43 >> 0x1f & __LC19)) * *pfVar18;
        fVar52 = ((float)(int)(uVar48 & _UNK_00144114) +
                 (float)((int)uVar48 >> 0x1f & _UNK_00144124)) *
                 ((fVar52 + fVar53) * (auVar32._0_4_ - local_1f30._0_4_) + fVar52 * fVar53) +
                 ((float)(int)(uVar44 & _UNK_00144114) +
                 (float)((int)uVar44 >> 0x1f & _UNK_00144124)) *
                 *(float *)((long)local_1e80 + lVar17);
        fVar53 = ((float)(int)(uVar50 & _UNK_00144118) +
                 (float)((int)uVar50 >> 0x1f & _UNK_00144128)) * fVar35 +
                 ((float)(int)(uVar47 & _UNK_00144118) +
                 (float)((int)uVar47 >> 0x1f & _UNK_00144128)) *
                 *(float *)((long)local_1e80 + lVar9);
        fVar35 = ((float)(int)(uVar51 & _UNK_0014411c) +
                 (float)((int)uVar51 >> 0x1f & _UNK_0014412c)) * fVar35 +
                 ((float)(int)(uVar49 & _UNK_0014411c) +
                 (float)((int)uVar49 >> 0x1f & _UNK_0014412c)) *
                 *(float *)((long)local_1e80 + lVar10);
        uVar43 = -(uint)(fVar38 < SUB164(_local_1ed0,0));
        uVar44 = -(uint)(fVar52 < SUB164(_local_1ed0,4));
        uVar47 = -(uint)(fVar53 < SUB164(_local_1ed0,8));
        uVar49 = -(uint)(fVar35 < SUB164(_local_1ed0,0xc));
        local_1f00._0_4_ = uVar30 & uVar43 | ~uVar43 & local_1f00._0_4_;
        local_1f00._4_4_ = uVar33 & uVar44 | ~uVar44 & local_1f00._4_4_;
        local_1f00._8_4_ = uVar36 & uVar47 | ~uVar47 & local_1f00._8_4_;
        local_1f00._12_4_ = uVar40 & uVar49 | ~uVar49 & local_1f00._12_4_;
        auVar46._0_4_ = ~uVar43 & (uint)SUB164(_local_1ed0,0);
        auVar46._4_4_ = ~uVar44 & (uint)SUB164(_local_1ed0,4);
        auVar46._8_4_ = ~uVar47 & (uint)SUB164(_local_1ed0,8);
        auVar46._12_4_ = ~uVar49 & (uint)SUB164(_local_1ed0,0xc);
        auVar56._0_4_ = uVar43 & (uint)fVar38;
        auVar56._4_4_ = uVar44 & (uint)fVar52;
        auVar56._8_4_ = uVar47 & (uint)fVar53;
        auVar56._12_4_ = uVar49 & (uint)fVar35;
        _local_1ed0 = auVar56 | auVar46;
        pBVar14 = pBVar14 + 0x60;
        uVar30 = uVar30 + __LC20;
        uVar33 = uVar33 + _UNK_001440e4;
        uVar36 = uVar36 + _UNK_001440e8;
        uVar40 = uVar40 + _UNK_001440ec;
      } while (lVar24 != local_1eb0[0] << 4);
      local_1ec0._4_4_ = local_1f00._4_4_;
      local_1ec0._0_4_ = local_1f00._0_4_;
      local_1ec0._8_4_ = local_1f00._8_4_;
      local_1ec0._12_4_ = local_1f00._12_4_;
    }
  }
  if ((local_1e90 != 0.0) && ((float)local_1ed0._0_4_ <= _LC21)) {
    uVar19 = 0;
    fVar35 = (float)local_1ed0._0_4_;
    iVar31 = local_1ec0._0_4_;
    if (local_1ec0._0_4_ != 0) goto LAB_0013ae50;
  }
  iVar31 = 0;
  uVar19 = 0xffffffff;
  fVar35 = _LC8;
LAB_0013ae50:
  if (((fStack_1e8c != 0.0) && ((float)local_1ed0._4_4_ < fVar35)) && (local_1ec0._4_4_ != 0)) {
    uVar19 = 1;
    iVar31 = local_1ec0._4_4_;
    fVar35 = (float)local_1ed0._4_4_;
  }
  if (((fStack_1e88 != 0.0) && (fStack_1ec8 < fVar35)) && (local_1ec0._8_4_ != 0)) {
    uVar19 = 2;
    iVar31 = local_1ec0._8_4_;
    fVar35 = fStack_1ec8;
  }
  *(undefined4 *)(param_1 + 4) = uVar19;
  *(int *)(param_1 + 8) = iVar31;
  *(undefined4 *)(param_1 + 0xc) = 0;
  *(ulong *)(param_1 + 0x10) = local_1eb0[0];
  *(float *)param_1 = fVar35;
  *(float *)(param_1 + 0x20) = local_1ea0;
  *(float *)(param_1 + 0x24) = fStack_1e9c;
  *(float *)(param_1 + 0x28) = fStack_1e98;
  *(float *)(param_1 + 0x2c) = fStack_1e94;
  *(float *)(param_1 + 0x30) = local_1e90;
  *(float *)(param_1 + 0x34) = fStack_1e8c;
  *(float *)(param_1 + 0x38) = fStack_1e88;
  *(uint *)(param_1 + 0x3c) = uStack_1e84;
  if (local_48 == *(long *)(in_FS_OFFSET + 0x28)) {
    return param_1;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>::find(embree::sse2::PrimInfoExtRange&, unsigned long) */

HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
* __thiscall
embree::sse2::
HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
::find(HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
       *this,PrimInfoExtRange *param_1,ulong param_2)

{
  undefined1 (*pauVar1) [16];
  undefined1 auVar2 [16];
  long lVar3;
  bool bVar4;
  ulong uVar5;
  uint uVar6;
  ulong uVar7;
  undefined1 (*pauVar8) [16];
  char extraout_DL;
  ulong uVar9;
  long lVar10;
  ulong uVar11;
  long lVar12;
  long in_FS_OFFSET;
  undefined1 auVar13 [16];
  undefined1 auVar14 [16];
  undefined1 auVar15 [16];
  
  uVar5 = *(ulong *)(param_2 + 0x40);
  lVar3 = *(long *)(in_FS_OFFSET + 0x28);
  uVar7 = *(ulong *)(param_2 + 0x48);
  uVar9 = uVar7 - uVar5;
  if (uVar9 < 2) {
    *(undefined8 *)(this + 8) = 0;
    *(undefined8 *)this = 0xffffffff7f800000;
    goto LAB_0013b12b;
  }
  bVar4 = *(ulong *)(param_2 + 0x50) != uVar7 && uVar9 < 5;
  if (bVar4) {
    uVar9 = uVar5 + 1;
    lVar12 = uVar5 * 0x40;
    uVar11 = uVar9;
    if (uVar5 < uVar7 - 1) {
      do {
        if (uVar9 < uVar7) {
          pauVar8 = (undefined1 (*) [16])(uVar5 * 0x40 + *(long *)param_1);
          lVar10 = *(long *)param_1 + lVar12;
          pauVar1 = pauVar8 + 1;
          auVar2 = *pauVar8;
          uVar5 = uVar9;
          do {
            auVar15 = minps(*pauVar1,*(undefined1 (*) [16])(lVar10 + 0x50));
            auVar13 = maxps(auVar2,*(undefined1 (*) [16])(lVar10 + 0x40));
            auVar14._4_4_ = -(uint)(auVar13._4_4_ <= auVar15._4_4_);
            auVar14._0_4_ = -(uint)(auVar13._0_4_ <= auVar15._0_4_);
            auVar14._8_4_ = -(uint)(auVar13._8_4_ <= auVar15._8_4_);
            auVar14._12_4_ = -(uint)(auVar13._12_4_ <= auVar15._12_4_);
            uVar6 = movmskps((int)pauVar8,auVar14);
            pauVar8 = (undefined1 (*) [16])(ulong)(~uVar6 & 7);
            if ((~uVar6 & 7) == 0) {
              bVar4 = false;
              break;
            }
            uVar5 = uVar5 + 1;
            lVar10 = lVar10 + 0x40;
          } while (uVar5 < uVar7);
        }
        if (uVar11 == uVar7 - 1) goto LAB_0013b14d;
        uVar5 = uVar11;
        uVar11 = uVar11 + 1;
      } while( true );
    }
    goto LAB_0013b152;
  }
  if (*(ulong *)(param_2 + 0x50) != uVar7) goto LAB_0013b190;
LAB_0013b111:
  if (0x3ff < uVar9) {
    parallel_object_find((PrimInfoExtRange *)this,(ulong)param_1);
    goto LAB_0013b12b;
  }
  goto LAB_0013b160;
LAB_0013b14d:
  if (!bVar4) {
LAB_0013b190:
    uVar5 = getProperties((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
                           *)param_1,(PrimInfoExtRange *)param_2);
    if (extraout_DL == '\0') {
      lVar12 = *(long *)(param_2 + 0x50);
      lVar10 = *(long *)(param_2 + 0x48);
      if (lVar12 == lVar10) {
        uVar9 = lVar12 - *(long *)(param_2 + 0x40);
      }
      else {
        uVar7 = lVar12 - lVar10;
        if (uVar5 <= uVar7) {
          openNodesBasedOnExtend
                    ((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
                      *)param_1,(PrimInfoExtRange *)param_2);
          lVar10 = *(long *)(param_2 + 0x48);
          uVar7 = *(long *)(param_2 + 0x50) - lVar10;
        }
        if (uVar7 < *(long *)(param_1 + 0x10) - 1U) {
          *(long *)(param_2 + 0x50) = lVar10;
        }
        uVar9 = lVar10 - *(long *)(param_2 + 0x40);
      }
    }
    else {
      *(long *)(param_2 + 0x50) = *(long *)(param_2 + 0x48);
      uVar9 = *(long *)(param_2 + 0x48) - *(long *)(param_2 + 0x40);
    }
    goto LAB_0013b111;
  }
LAB_0013b152:
  *(ulong *)(param_2 + 0x50) = uVar7;
LAB_0013b160:
  sequential_object_find((PrimInfoExtRange *)this,(ulong)param_1);
LAB_0013b12b:
  if (lVar3 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return this;
}



/* embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator, bool) */

undefined8 *
embree::sse2::GeneralBVHBuilder::
BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(unsigned_long)#8}>
::recurse(ulong *param_1,long *param_2,char param_3)

{
  long *plVar1;
  undefined1 *puVar2;
  int *piVar3;
  PrimInfoExtRange *pPVar4;
  long lVar5;
  undefined8 uVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 uVar9;
  undefined4 uVar10;
  long lVar11;
  undefined8 *puVar12;
  float *pfVar13;
  ulong uVar14;
  undefined8 uVar15;
  long lVar16;
  MutexSys *this;
  TaskScheduler *this_00;
  ulong uVar17;
  undefined8 *puVar18;
  ulong uVar19;
  ulong uVar20;
  long lVar21;
  undefined8 *puVar22;
  ulong *puVar23;
  undefined1 *puVar24;
  undefined1 *puVar25;
  long in_FS_OFFSET;
  float fVar26;
  float fVar27;
  float fVar28;
  FastAllocator *in_stack_00000008;
  ulong *in_stack_00000010;
  ulong *local_a00;
  FastAllocator *local_9b8;
  undefined8 local_9a8;
  undefined8 uStack_9a0;
  undefined8 local_998;
  long lStack_990;
  undefined8 local_988;
  undefined8 uStack_980;
  undefined8 local_978;
  undefined8 uStack_970;
  long local_968;
  long local_960;
  undefined8 local_958;
  undefined8 local_948;
  undefined8 uStack_940;
  undefined8 local_938;
  undefined8 uStack_930;
  undefined4 local_928;
  undefined4 uStack_924;
  undefined4 uStack_920;
  undefined4 uStack_91c;
  undefined4 local_918;
  undefined4 uStack_914;
  undefined4 uStack_910;
  undefined4 uStack_90c;
  long local_908;
  long local_900;
  undefined8 local_8f8;
  ulong local_8e8;
  undefined1 local_8e0;
  undefined4 local_8d8;
  undefined4 uStack_8d4;
  undefined4 uStack_8d0;
  undefined4 uStack_8cc;
  float local_8c8;
  float fStack_8c4;
  float fStack_8c0;
  float fStack_8bc;
  undefined4 local_8b8;
  undefined4 uStack_8b4;
  undefined4 uStack_8b0;
  undefined4 uStack_8ac;
  float local_8a8;
  float fStack_8a4;
  float fStack_8a0;
  float fStack_89c;
  long local_898;
  long lStack_890;
  long local_888;
  ulong local_878;
  ulong local_870;
  undefined8 local_868;
  undefined8 uStack_860;
  undefined8 local_858;
  undefined8 uStack_850;
  undefined8 local_848;
  undefined4 uStack_840;
  undefined4 uStack_83c;
  float local_838;
  float fStack_834;
  float fStack_830;
  float fStack_82c;
  ulong local_828;
  ulong uStack_820;
  ulong local_818;
  float local_808 [16];
  undefined8 local_7c8 [16];
  ulong local_748;
  undefined1 local_740 [8];
  undefined8 local_738;
  undefined8 uStack_730;
  undefined8 local_728;
  long alStack_720 [4];
  undefined8 uStack_700;
  long local_6f8;
  long local_6f0;
  undefined8 local_6e8;
  ulong local_6d8;
  undefined1 local_6d0;
  undefined8 local_6c8;
  undefined8 uStack_6c0;
  undefined8 local_6b8;
  undefined8 uStack_6b0;
  undefined4 local_6a8;
  undefined4 uStack_6a4;
  undefined4 uStack_6a0;
  undefined4 uStack_69c;
  undefined4 local_698;
  undefined4 uStack_694;
  undefined4 uStack_690;
  undefined4 uStack_68c;
  long local_688;
  long local_680;
  undefined8 local_678;
  ulong local_668;
  undefined1 local_660;
  undefined4 local_658;
  undefined4 uStack_654;
  undefined4 uStack_650;
  undefined4 local_648;
  undefined4 uStack_644;
  undefined4 uStack_640;
  long local_618;
  long lStack_610;
  undefined1 local_5f0;
  undefined4 uStack_5e8;
  undefined4 uStack_5e4;
  undefined4 uStack_5e0;
  undefined4 uStack_5d8;
  undefined4 uStack_5d4;
  undefined4 uStack_5d0;
  long local_5a8;
  long local_5a0;
  undefined1 local_580;
  undefined4 uStack_578;
  undefined4 uStack_574;
  undefined4 uStack_570;
  undefined4 uStack_568;
  undefined4 uStack_564;
  undefined4 uStack_560;
  long local_538;
  long local_530;
  undefined1 local_510;
  undefined4 uStack_508;
  undefined4 uStack_504;
  undefined4 uStack_500;
  undefined4 uStack_4f8;
  undefined4 uStack_4f4;
  undefined4 uStack_4f0;
  long local_4c8;
  long local_4c0;
  undefined1 local_4a0;
  undefined4 uStack_498;
  undefined4 uStack_494;
  undefined4 uStack_490;
  undefined4 uStack_488;
  undefined4 uStack_484;
  undefined4 uStack_480;
  long local_458;
  long local_450;
  undefined1 local_430;
  undefined4 uStack_428;
  undefined4 uStack_424;
  undefined4 uStack_420;
  undefined4 uStack_418;
  undefined4 uStack_414;
  undefined4 uStack_410;
  long local_3e8;
  long local_3e0;
  undefined1 local_3c0;
  undefined4 uStack_3b8;
  undefined4 uStack_3b4;
  undefined4 uStack_3b0;
  undefined4 uStack_3a8;
  undefined4 uStack_3a4;
  undefined4 uStack_3a0;
  long local_378;
  long local_370;
  undefined1 local_350;
  undefined4 uStack_348;
  undefined4 uStack_344;
  undefined4 uStack_340;
  undefined4 uStack_338;
  undefined4 uStack_334;
  undefined4 uStack_330;
  long local_308;
  long local_300;
  undefined1 local_2e0;
  undefined4 uStack_2d8;
  undefined4 uStack_2d4;
  undefined4 uStack_2d0;
  undefined4 uStack_2c8;
  undefined4 uStack_2c4;
  undefined4 uStack_2c0;
  long local_298;
  long local_290;
  undefined1 local_270;
  undefined4 uStack_268;
  undefined4 uStack_264;
  undefined4 uStack_260;
  undefined4 uStack_258;
  undefined4 uStack_254;
  undefined4 uStack_250;
  long local_228;
  long local_220;
  undefined1 local_200;
  undefined4 uStack_1f8;
  undefined4 uStack_1f4;
  undefined4 uStack_1f0;
  undefined4 uStack_1e8;
  undefined4 uStack_1e4;
  undefined4 uStack_1e0;
  long local_1b8;
  long local_1b0;
  undefined1 local_190;
  undefined4 uStack_188;
  undefined4 uStack_184;
  undefined4 uStack_180;
  undefined4 uStack_178;
  undefined4 uStack_174;
  undefined4 uStack_170;
  long local_148;
  long local_140;
  undefined1 local_120;
  undefined4 uStack_118;
  undefined4 uStack_114;
  undefined4 uStack_110;
  undefined4 uStack_108;
  undefined4 uStack_104;
  undefined4 uStack_100;
  long local_d8;
  long local_d0;
  undefined1 local_b0;
  undefined4 uStack_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_98;
  undefined4 uStack_94;
  undefined4 uStack_90;
  long local_68;
  long local_60;
  undefined1 auStack_48 [8];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_9b8 = in_stack_00000008;
  if (in_stack_00000008 == (FastAllocator *)0x0) {
    local_9b8 = *(FastAllocator **)param_1[10];
    if (*(long *)(in_FS_OFFSET + lRam000000000013b943) == 0) {
      this = (MutexSys *)embree::alignedMalloc(0xc0,0x40);
                    /* WARNING: Subroutine does not return */
      embree::MutexSys::MutexSys(this);
    }
    in_stack_00000010 = (ulong *)(*(long *)(in_FS_OFFSET + lRam000000000013b943) + 0x40);
  }
  if ((param_3 != '\0') && ((ulong)(param_2[0xb] - param_2[10]) <= param_1[6])) {
    embree::Scene::progressMonitor(0.0);
  }
  HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
  ::find((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
          *)local_808,(PrimInfoExtRange *)param_1[9],(ulong)(param_2 + 2));
  lVar21 = param_2[10];
  uVar20 = param_2[0xb] - lVar21;
  if (((uVar20 <= param_1[3]) || (param_1[1] <= *param_2 + 8U)) ||
     ((uVar20 <= param_1[4] &&
      (fVar27 = *(float *)((long)param_2 + 0x24) - *(float *)((long)param_2 + 0x14),
      fVar27 = (*(float *)(param_2 + 4) - *(float *)(param_2 + 2)) *
               (fVar27 + (*(float *)(param_2 + 5) - *(float *)(param_2 + 3))) +
               fVar27 * (*(float *)(param_2 + 5) - *(float *)(param_2 + 3)),
      (float)((uVar20 - 1) + (1L << ((byte)param_1[2] & 0x3f)) >> ((byte)param_1[2] & 0x3f)) *
      fVar27 * *(float *)((long)param_1 + 0x2c) <=
      fVar27 * *(float *)(param_1 + 5) + *(float *)((long)param_1 + 0x2c) * local_808[0])))) {
    lVar11 = param_2[0xb] * 0x40;
    puVar12 = (undefined8 *)(*(long *)param_1[9] + lVar11);
    puVar22 = (undefined8 *)(*(long *)param_1[9] + lVar21 * 0x40);
    if (puVar12 != puVar22) {
      lVar11 = lVar11 + lVar21 * -0x40;
      uVar20 = lVar11 >> 6;
      if (uVar20 == 0) {
        std::
        __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar22,puVar12,0xfffffffffffffffe);
      }
      else {
        lVar21 = 0x3f;
        if (uVar20 != 0) {
          for (; uVar20 >> lVar21 == 0; lVar21 = lVar21 + -1) {
          }
        }
        std::
        __introsort_loop<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,long,__gnu_cxx::__ops::_Iter_less_iter>
                  (puVar22,puVar12,(long)(int)lVar21 * 2);
        if (0x400 < lVar11) {
          puVar18 = puVar22 + 0x80;
          std::
          __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
                    (puVar22);
          for (; puVar12 != puVar18; puVar18 = puVar18 + 8) {
            fVar27 = *(float *)(puVar18 + 5);
            uVar6 = *puVar18;
            uVar7 = puVar18[1];
            uVar8 = puVar18[2];
            uVar9 = puVar18[3];
            uVar15 = puVar18[4];
            fVar28 = *(float *)(puVar18 + -3);
            puVar22 = puVar18;
            while (fVar27 < fVar28) {
              puVar22[4] = puVar22[-4];
              *puVar22 = puVar22[-8];
              puVar22[1] = puVar22[-7];
              puVar22[2] = puVar22[-6];
              puVar22[3] = puVar22[-5];
              *(undefined4 *)(puVar22 + 5) = *(undefined4 *)(puVar22 + -3);
              fVar28 = *(float *)(puVar22 + -0xb);
              puVar22 = puVar22 + -8;
            }
            puVar22[4] = uVar15;
            *puVar22 = uVar6;
            puVar22[1] = uVar7;
            puVar22[2] = uVar8;
            puVar22[3] = uVar9;
            *(float *)(puVar22 + 5) = fVar27;
          }
          goto LAB_0013b44c;
        }
      }
      std::
      __insertion_sort<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*,__gnu_cxx::__ops::_Iter_less_iter>
                (puVar22,puVar12);
    }
LAB_0013b44c:
    puVar12 = (undefined8 *)createLargeLeaf(param_1,param_2);
  }
  else {
    HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
    ::split((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
             *)param_1[9],(BinSplit *)local_808,(PrimInfoExtRange *)(param_2 + 2),
            (PrimInfoExtRange *)&local_9a8,(PrimInfoExtRange *)&local_948);
    uVar10 = _LC8;
    fVar27 = _LC6;
    local_740[0] = 0;
    local_6d0 = 0;
    local_738 = local_9a8;
    uStack_730 = uStack_9a0;
    local_748 = *param_2 + 1;
    local_728 = local_998;
    alStack_720[0] = lStack_990;
    local_688 = local_908;
    alStack_720[1] = local_988;
    alStack_720[2] = uStack_980;
    local_680 = local_900;
    alStack_720[3] = local_978;
    uStack_700 = uStack_970;
    local_6c8 = local_948;
    uStack_6c0 = uStack_940;
    local_6f8 = local_968;
    local_6f0 = local_960;
    local_6e8 = local_958;
    local_6b8 = local_938;
    uStack_6b0 = uStack_930;
    local_6a8 = local_928;
    uStack_6a4 = uStack_924;
    uStack_6a0 = uStack_920;
    uStack_69c = uStack_91c;
    local_698 = local_918;
    uStack_694 = uStack_914;
    uStack_690 = uStack_910;
    uStack_68c = uStack_90c;
    local_678 = local_8f8;
    local_6d8 = local_748;
    if (*param_1 < 3) {
      lVar21 = 0xe0;
      uVar20 = 2;
    }
    else {
      uVar20 = 2;
      puVar23 = &local_668;
      do {
        uVar17 = 0;
        uVar19 = 0xffffffffffffffff;
        pfVar13 = (float *)&local_738;
        lVar21 = local_6f0;
        lVar11 = local_6f8;
        fVar28 = _LC6;
        while( true ) {
          if ((param_1[3] < (ulong)(lVar21 - lVar11)) &&
             (fVar26 = (pfVar13[4] - *pfVar13) *
                       ((pfVar13[5] - pfVar13[1]) + (pfVar13[6] - pfVar13[2])) +
                       (pfVar13[5] - pfVar13[1]) * (pfVar13[6] - pfVar13[2]), fVar28 < fVar26)) {
            uVar19 = uVar17;
            fVar28 = fVar26;
          }
          uVar17 = uVar17 + 1;
          if (uVar17 == uVar20) break;
          lVar21 = *(long *)(pfVar13 + 0x2e);
          lVar11 = *(long *)(pfVar13 + 0x2c);
          pfVar13 = pfVar13 + 0x1c;
        }
        if (uVar19 == 0xffffffffffffffff) {
          lVar21 = (long)puVar23 - (long)&local_748;
          goto LAB_0013b9ff;
        }
        uVar20 = uVar20 + 1;
        local_8e8 = *param_2 + 1;
        local_868 = CONCAT44(uVar10,uVar10);
        uStack_860 = (undefined8 *)CONCAT44(uVar10,uVar10);
        local_858 = (ulong *)CONCAT44(fVar27,fVar27);
        uStack_850 = (ulong *)CONCAT44(fVar27,fVar27);
        pPVar4 = (PrimInfoExtRange *)(&local_748 + uVar19 * 0xe + 2);
        local_848 = (TaskGroupContext *)CONCAT44(uVar10,uVar10);
        local_8e0 = 0;
        local_898 = 0;
        lStack_890 = 0;
        local_888 = 0;
        local_870 = local_870 & 0xffffffffffffff00;
        local_828 = 0;
        uStack_820 = 0;
        local_818 = 0;
        local_8d8 = uVar10;
        uStack_8d4 = uVar10;
        uStack_8d0 = uVar10;
        uStack_8cc = uVar10;
        local_8c8 = fVar27;
        fStack_8c4 = fVar27;
        fStack_8c0 = fVar27;
        fStack_8bc = fVar27;
        local_8b8 = uVar10;
        uStack_8b4 = uVar10;
        uStack_8b0 = uVar10;
        uStack_8ac = uVar10;
        local_8a8 = fVar27;
        fStack_8a4 = fVar27;
        fStack_8a0 = fVar27;
        fStack_89c = fVar27;
        local_878 = local_8e8;
        uStack_840 = uVar10;
        uStack_83c = uVar10;
        local_838 = fVar27;
        fStack_834 = fVar27;
        fStack_830 = fVar27;
        fStack_82c = fVar27;
        HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
        ::find((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
                *)local_7c8,(PrimInfoExtRange *)param_1[9],(ulong)pPVar4);
        HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
        ::split((HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>
                 *)param_1[9],(BinSplit *)local_7c8,pPVar4,(PrimInfoExtRange *)&local_8d8,
                (PrimInfoExtRange *)&local_868);
        *(ulong *)(local_740 + uVar19 * 0x70 + -8) = local_8e8;
        local_740[uVar19 * 0x70] = local_8e0;
        (&local_738)[uVar19 * 0xe] = CONCAT44(uStack_8d4,local_8d8);
        (&uStack_730)[uVar19 * 0xe] = CONCAT44(uStack_8cc,uStack_8d0);
        alStack_720[uVar19 * 0xe + 7] = local_888;
        (&local_728)[uVar19 * 0xe] = CONCAT44(fStack_8c4,local_8c8);
        alStack_720[uVar19 * 0xe] = CONCAT44(fStack_8bc,fStack_8c0);
        alStack_720[uVar19 * 0xe + 1] = CONCAT44(uStack_8b4,local_8b8);
        alStack_720[uVar19 * 0xe + 2] = CONCAT44(uStack_8ac,uStack_8b0);
        alStack_720[uVar19 * 0xe + 3] = CONCAT44(fStack_8a4,local_8a8);
        alStack_720[uVar19 * 0xe + 4] = CONCAT44(fStack_89c,fStack_8a0);
        alStack_720[uVar19 * 0xe + 5] = local_898;
        alStack_720[uVar19 * 0xe + 6] = lStack_890;
        *puVar23 = local_878;
        puVar23[2] = local_868;
        puVar23[3] = (ulong)uStack_860;
        *(undefined1 *)(puVar23 + 1) = (undefined1)local_870;
        puVar23[4] = (ulong)local_858;
        puVar23[5] = (ulong)uStack_850;
        *(undefined4 *)(puVar23 + 6) = (undefined4)local_848;
        *(undefined4 *)((long)puVar23 + 0x34) = local_848._4_4_;
        *(undefined4 *)(puVar23 + 7) = uStack_840;
        *(undefined4 *)((long)puVar23 + 0x3c) = uStack_83c;
        puVar23[10] = local_828;
        puVar23[0xb] = uStack_820;
        *(float *)(puVar23 + 8) = local_838;
        *(float *)((long)puVar23 + 0x44) = fStack_834;
        *(float *)(puVar23 + 9) = fStack_830;
        *(float *)((long)puVar23 + 0x4c) = fStack_82c;
        puVar23[0xc] = local_818;
        puVar23 = puVar23 + 0xe;
      } while (uVar20 < *param_1);
      lVar21 = uVar20 * 0x70;
    }
LAB_0013b9ff:
    local_a00 = &local_748;
    uVar19 = param_1[7];
    if (uVar19 < (ulong)(param_2[0xb] - param_2[10])) {
      local_740[0] = (ulong)(local_6f0 - local_6f8) <= uVar19;
      local_6d0 = (ulong)(local_680 - local_688) <= uVar19;
      if (((((uVar20 != 2) && (local_660 = (ulong)(lStack_610 - local_618) <= uVar19, uVar20 != 3))
           && (local_5f0 = (ulong)(local_5a0 - local_5a8) <= uVar19, uVar20 != 4)) &&
          ((((local_580 = (ulong)(local_530 - local_538) <= uVar19, uVar20 != 5 &&
             (local_510 = (ulong)(local_4c0 - local_4c8) <= uVar19, uVar20 != 6)) &&
            ((local_4a0 = (ulong)(local_450 - local_458) <= uVar19, uVar20 != 7 &&
             ((local_430 = (ulong)(local_3e0 - local_3e8) <= uVar19, uVar20 != 8 &&
              (local_3c0 = (ulong)(local_370 - local_378) <= uVar19, uVar20 != 9)))))) &&
           (local_350 = (ulong)(local_300 - local_308) <= uVar19, uVar20 != 10)))) &&
         ((((local_2e0 = (ulong)(local_290 - local_298) <= uVar19, uVar20 != 0xb &&
            (local_270 = (ulong)(local_220 - local_228) <= uVar19, uVar20 != 0xc)) &&
           (local_200 = (ulong)(local_1b0 - local_1b8) <= uVar19, uVar20 != 0xd)) &&
          ((local_190 = (ulong)(local_140 - local_148) <= uVar19, uVar20 != 0xe &&
           (local_120 = (ulong)(local_d0 - local_d8) <= uVar19, uVar20 == 0x10)))))) {
        local_b0 = (ulong)(local_60 - local_68) <= uVar19;
      }
    }
    if (lVar21 != 0) {
      uVar19 = (lVar21 >> 4) * 0x6db6db6db6db6db7;
      puVar2 = (undefined1 *)((long)local_a00 + lVar21);
      if (uVar19 == 0) {
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                  (local_a00,puVar2,0xfffffffffffffffe);
      }
      else {
        lVar11 = 0x3f;
        if (uVar19 != 0) {
          for (; uVar19 >> lVar11 == 0; lVar11 = lVar11 + -1) {
          }
        }
        std::
        __introsort_loop<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,long,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                  (local_a00,puVar2,(long)(int)lVar11 * 2);
        if (0x700 < lVar21) {
          std::
          __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                    (local_a00,auStack_48);
          puVar24 = auStack_48;
          do {
            puVar25 = puVar24 + 0x70;
            std::
            __unguarded_linear_insert<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Val_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                      (puVar24);
            puVar24 = puVar25;
          } while (puVar2 != puVar25);
          goto LAB_0013bac5;
        }
      }
      std::
      __insertion_sort<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>*,__gnu_cxx::__ops::_Iter_comp_iter<std::greater<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>>>>
                (local_a00,puVar2);
    }
LAB_0013bac5:
    local_8e8 = 0x80;
    uVar19 = *in_stack_00000010;
    if (local_9b8 != *(FastAllocator **)(uVar19 + 8)) {
      embree::MutexSys::lock();
      if (*(long *)(uVar19 + 8) != 0) {
        LOCK();
        plVar1 = (long *)(*(long *)(uVar19 + 8) + 0x118);
        *plVar1 = *plVar1 + *(long *)(uVar19 + 0xa8) + *(long *)(uVar19 + 0x68);
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar19 + 8) + 0x120);
        *plVar1 = *plVar1 + (((*(long *)(uVar19 + 0x98) + *(long *)(uVar19 + 0x58)) -
                             *(long *)(uVar19 + 0x50)) - *(long *)(uVar19 + 0x90));
        UNLOCK();
        LOCK();
        plVar1 = (long *)(*(long *)(uVar19 + 8) + 0x128);
        *plVar1 = *plVar1 + *(long *)(uVar19 + 0xb0) + *(long *)(uVar19 + 0x70);
        UNLOCK();
      }
      *(undefined8 *)(uVar19 + 0x48) = 0;
      *(undefined8 *)(uVar19 + 0x58) = 0;
      *(undefined8 *)(uVar19 + 0x50) = 0;
      *(undefined8 *)(uVar19 + 0x68) = 0;
      *(undefined8 *)(uVar19 + 0x70) = 0;
      *(undefined8 *)(uVar19 + 0x60) = 0;
      if (local_9b8 == (FastAllocator *)0x0) {
        *(undefined8 *)(uVar19 + 0x88) = 0;
        uVar15 = 0;
        *(undefined8 *)(uVar19 + 0x98) = 0;
        *(undefined8 *)(uVar19 + 0x90) = 0;
        *(undefined8 *)(uVar19 + 0xa8) = 0;
        *(undefined8 *)(uVar19 + 0xb0) = 0;
      }
      else {
        uVar15 = *(undefined8 *)(local_9b8 + 0x10);
        *(undefined8 *)(uVar19 + 0x88) = 0;
        *(undefined8 *)(uVar19 + 0x98) = 0;
        *(undefined8 *)(uVar19 + 0x60) = uVar15;
        *(undefined8 *)(uVar19 + 0x90) = 0;
        *(undefined8 *)(uVar19 + 0xa8) = 0;
        *(undefined8 *)(uVar19 + 0xb0) = 0;
        *(undefined8 *)(uVar19 + 0xa0) = 0;
        uVar15 = *(undefined8 *)(local_9b8 + 0x10);
      }
      *(undefined8 *)(uVar19 + 0xa0) = uVar15;
      LOCK();
      *(FastAllocator **)(uVar19 + 8) = local_9b8;
      UNLOCK();
      local_878 = uVar19;
      embree::MutexSys::lock();
      puVar23 = *(ulong **)(local_9b8 + 0x138);
      if (puVar23 == *(ulong **)(local_9b8 + 0x140)) {
        std::
        vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
        ::_M_realloc_insert<embree::FastAllocator::ThreadLocal2*const&>
                  ((vector<embree::FastAllocator::ThreadLocal2*,std::allocator<embree::FastAllocator::ThreadLocal2*>>
                    *)(local_9b8 + 0x130),puVar23,&local_878);
      }
      else {
        *puVar23 = uVar19;
        *(long *)(local_9b8 + 0x138) = *(long *)(local_9b8 + 0x138) + 8;
      }
      embree::MutexSys::unlock();
      embree::MutexSys::unlock();
    }
    uVar17 = in_stack_00000010[2];
    in_stack_00000010[5] = in_stack_00000010[5] + 0x80;
    uVar14 = (ulong)(-(int)uVar17 & 0xf);
    uVar19 = uVar17 + 0x80 + uVar14;
    in_stack_00000010[2] = uVar19;
    if (in_stack_00000010[3] < uVar19) {
      in_stack_00000010[2] = uVar17;
      if (in_stack_00000010[4] < 0x200) {
        puVar12 = (undefined8 *)FastAllocator::malloc(local_9b8,&local_8e8,0x40,false);
      }
      else {
        local_878 = in_stack_00000010[4];
        puVar12 = (undefined8 *)FastAllocator::malloc(local_9b8,&local_878,0x40,true);
        in_stack_00000010[1] = (ulong)puVar12;
        in_stack_00000010[6] = (in_stack_00000010[3] + in_stack_00000010[6]) - in_stack_00000010[2];
        in_stack_00000010[2] = 0x80;
        in_stack_00000010[3] = local_878;
        if (local_878 < 0x80) {
          local_878 = in_stack_00000010[4];
          in_stack_00000010[2] = 0;
          puVar12 = (undefined8 *)FastAllocator::malloc(local_9b8,&local_878,0x40,false);
          in_stack_00000010[1] = (ulong)puVar12;
          in_stack_00000010[6] =
               (in_stack_00000010[3] + in_stack_00000010[6]) - in_stack_00000010[2];
          in_stack_00000010[2] = 0x80;
          in_stack_00000010[3] = local_878;
          if (local_878 < 0x80) {
            puVar12 = (undefined8 *)0x0;
            in_stack_00000010[2] = 0;
          }
        }
      }
    }
    else {
      in_stack_00000010[6] = in_stack_00000010[6] + uVar14;
      puVar12 = (undefined8 *)((in_stack_00000010[1] - 0x80) + uVar19);
    }
    *puVar12 = 8;
    puVar12[1] = 8;
    puVar12[2] = 8;
    *(undefined4 *)(puVar12 + 4) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x24) = uVar10;
    *(undefined4 *)(puVar12 + 5) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x2c) = uVar10;
    puVar12[3] = 8;
    *(undefined4 *)(puVar12 + 8) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x44) = uVar10;
    *(undefined4 *)(puVar12 + 9) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x4c) = uVar10;
    *(float *)(puVar12 + 4) = (float)local_738;
    *(undefined4 *)(puVar12 + 0xc) = uVar10;
    *(undefined4 *)((long)puVar12 + 100) = uVar10;
    *(undefined4 *)(puVar12 + 0xd) = uVar10;
    *(undefined4 *)((long)puVar12 + 0x6c) = uVar10;
    *(undefined4 *)(puVar12 + 8) = local_738._4_4_;
    *(float *)(puVar12 + 6) = fVar27;
    *(float *)((long)puVar12 + 0x34) = fVar27;
    *(float *)(puVar12 + 7) = fVar27;
    *(float *)((long)puVar12 + 0x3c) = fVar27;
    *(float *)(puVar12 + 0xe) = fVar27;
    *(float *)((long)puVar12 + 0x74) = fVar27;
    *(float *)(puVar12 + 0xf) = fVar27;
    *(float *)((long)puVar12 + 0x7c) = fVar27;
    *(float *)(puVar12 + 10) = fVar27;
    *(float *)((long)puVar12 + 0x54) = fVar27;
    *(float *)(puVar12 + 0xb) = fVar27;
    *(float *)((long)puVar12 + 0x5c) = fVar27;
    *(undefined4 *)(puVar12 + 0xc) = (undefined4)uStack_730;
    *(undefined4 *)(puVar12 + 6) = (undefined4)local_728;
    *(undefined4 *)(puVar12 + 10) = local_728._4_4_;
    *(undefined4 *)(puVar12 + 0xe) = (undefined4)alStack_720[0];
    *(undefined4 *)((long)puVar12 + 100) = (undefined4)uStack_6c0;
    *(undefined4 *)((long)puVar12 + 0x44) = local_6c8._4_4_;
    *(undefined4 *)((long)puVar12 + 0x24) = (undefined4)local_6c8;
    *(undefined4 *)((long)puVar12 + 0x34) = (undefined4)local_6b8;
    *(undefined4 *)((long)puVar12 + 0x54) = local_6b8._4_4_;
    *(undefined4 *)((long)puVar12 + 0x74) = (undefined4)uStack_6b0;
    if (uVar20 != 2) {
      *(undefined4 *)(puVar12 + 9) = uStack_654;
      *(undefined4 *)(puVar12 + 0xd) = uStack_650;
      *(undefined4 *)(puVar12 + 5) = local_658;
      *(undefined4 *)(puVar12 + 7) = local_648;
      *(undefined4 *)(puVar12 + 0xb) = uStack_644;
      *(undefined4 *)(puVar12 + 0xf) = uStack_640;
      if (uVar20 != 3) {
        *(undefined4 *)((long)puVar12 + 0x4c) = uStack_5e4;
        *(undefined4 *)((long)puVar12 + 0x6c) = uStack_5e0;
        *(undefined4 *)((long)puVar12 + 0x2c) = uStack_5e8;
        *(undefined4 *)((long)puVar12 + 0x3c) = uStack_5d8;
        *(undefined4 *)((long)puVar12 + 0x5c) = uStack_5d4;
        *(undefined4 *)((long)puVar12 + 0x7c) = uStack_5d0;
        if (uVar20 != 4) {
          *(undefined4 *)(puVar12 + 10) = uStack_574;
          *(undefined4 *)(puVar12 + 0xe) = uStack_570;
          *(undefined4 *)(puVar12 + 6) = uStack_578;
          *(undefined4 *)(puVar12 + 8) = uStack_568;
          *(undefined4 *)(puVar12 + 0xc) = uStack_564;
          *(undefined4 *)(puVar12 + 0x10) = uStack_560;
          if (uVar20 != 5) {
            *(undefined4 *)((long)puVar12 + 0x54) = uStack_504;
            *(undefined4 *)((long)puVar12 + 0x74) = uStack_500;
            *(undefined4 *)((long)puVar12 + 0x34) = uStack_508;
            *(undefined4 *)((long)puVar12 + 0x44) = uStack_4f8;
            *(undefined4 *)((long)puVar12 + 100) = uStack_4f4;
            *(undefined4 *)((long)puVar12 + 0x84) = uStack_4f0;
            if (uVar20 != 6) {
              *(undefined4 *)(puVar12 + 0xb) = uStack_494;
              *(undefined4 *)(puVar12 + 0xf) = uStack_490;
              *(undefined4 *)(puVar12 + 7) = uStack_498;
              *(undefined4 *)(puVar12 + 9) = uStack_488;
              *(undefined4 *)(puVar12 + 0xd) = uStack_484;
              *(undefined4 *)(puVar12 + 0x11) = uStack_480;
              if (uVar20 != 7) {
                *(undefined4 *)((long)puVar12 + 0x5c) = uStack_424;
                *(undefined4 *)((long)puVar12 + 0x7c) = uStack_420;
                *(undefined4 *)((long)puVar12 + 0x3c) = uStack_428;
                *(undefined4 *)((long)puVar12 + 0x4c) = uStack_418;
                *(undefined4 *)((long)puVar12 + 0x6c) = uStack_414;
                *(undefined4 *)((long)puVar12 + 0x8c) = uStack_410;
                if (uVar20 != 8) {
                  *(undefined4 *)(puVar12 + 0xc) = uStack_3b4;
                  *(undefined4 *)(puVar12 + 0x10) = uStack_3b0;
                  *(undefined4 *)(puVar12 + 8) = uStack_3b8;
                  *(undefined4 *)(puVar12 + 10) = uStack_3a8;
                  *(undefined4 *)(puVar12 + 0xe) = uStack_3a4;
                  *(undefined4 *)(puVar12 + 0x12) = uStack_3a0;
                  if (uVar20 != 9) {
                    *(undefined4 *)((long)puVar12 + 100) = uStack_344;
                    *(undefined4 *)((long)puVar12 + 0x84) = uStack_340;
                    *(undefined4 *)((long)puVar12 + 0x44) = uStack_348;
                    *(undefined4 *)((long)puVar12 + 0x54) = uStack_338;
                    *(undefined4 *)((long)puVar12 + 0x74) = uStack_334;
                    *(undefined4 *)((long)puVar12 + 0x94) = uStack_330;
                    if (uVar20 != 10) {
                      *(undefined4 *)(puVar12 + 0xd) = uStack_2d4;
                      *(undefined4 *)(puVar12 + 0x11) = uStack_2d0;
                      *(undefined4 *)(puVar12 + 9) = uStack_2d8;
                      *(undefined4 *)(puVar12 + 0xb) = uStack_2c8;
                      *(undefined4 *)(puVar12 + 0xf) = uStack_2c4;
                      *(undefined4 *)(puVar12 + 0x13) = uStack_2c0;
                      if (uVar20 != 0xb) {
                        *(undefined4 *)((long)puVar12 + 0x6c) = uStack_264;
                        *(undefined4 *)((long)puVar12 + 0x8c) = uStack_260;
                        *(undefined4 *)((long)puVar12 + 0x4c) = uStack_268;
                        *(undefined4 *)((long)puVar12 + 0x5c) = uStack_258;
                        *(undefined4 *)((long)puVar12 + 0x7c) = uStack_254;
                        *(undefined4 *)((long)puVar12 + 0x9c) = uStack_250;
                        if (uVar20 != 0xc) {
                          *(undefined4 *)(puVar12 + 0xe) = uStack_1f4;
                          *(undefined4 *)(puVar12 + 0x12) = uStack_1f0;
                          *(undefined4 *)(puVar12 + 10) = uStack_1f8;
                          *(undefined4 *)(puVar12 + 0xc) = uStack_1e8;
                          *(undefined4 *)(puVar12 + 0x10) = uStack_1e4;
                          *(undefined4 *)(puVar12 + 0x14) = uStack_1e0;
                          if (uVar20 != 0xd) {
                            *(undefined4 *)((long)puVar12 + 0x74) = uStack_184;
                            *(undefined4 *)((long)puVar12 + 0x94) = uStack_180;
                            *(undefined4 *)((long)puVar12 + 0x54) = uStack_188;
                            *(undefined4 *)((long)puVar12 + 100) = uStack_178;
                            *(undefined4 *)((long)puVar12 + 0x84) = uStack_174;
                            *(undefined4 *)((long)puVar12 + 0xa4) = uStack_170;
                            if (uVar20 != 0xe) {
                              *(undefined4 *)(puVar12 + 0xf) = uStack_114;
                              *(undefined4 *)(puVar12 + 0x13) = uStack_110;
                              *(undefined4 *)(puVar12 + 0xb) = uStack_118;
                              *(undefined4 *)(puVar12 + 0xd) = uStack_108;
                              *(undefined4 *)(puVar12 + 0x11) = uStack_104;
                              *(undefined4 *)(puVar12 + 0x15) = uStack_100;
                              if (uVar20 == 0x10) {
                                *(undefined4 *)((long)puVar12 + 0x7c) = uStack_a4;
                                *(undefined4 *)((long)puVar12 + 0x9c) = uStack_a0;
                                *(undefined4 *)((long)puVar12 + 0x5c) = uStack_a8;
                                *(undefined4 *)((long)puVar12 + 0x6c) = uStack_98;
                                *(undefined4 *)((long)puVar12 + 0x8c) = uStack_94;
                                *(undefined4 *)((long)puVar12 + 0xac) = uStack_90;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    uVar19 = 0;
    if (param_1[6] < (ulong)(param_2[0xb] - param_2[10])) {
      uStack_860 = local_7c8;
      local_8e8 = 0;
      local_870 = 0;
      local_868 = 1;
      local_858 = local_a00;
      local_878 = uVar20;
      uStack_850 = param_1;
      local_848 = (TaskGroupContext *)&local_8e8;
      lVar21 = embree::TaskScheduler::thread();
      if (lVar21 == 0) {
        this_00 = (TaskScheduler *)embree::TaskScheduler::instance();
        TaskScheduler::
        spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::Tr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                  (this_00,(_lambda___1_ *)&local_878,(TaskGroupContext *)&local_8e8,uVar20,true);
      }
      else {
        if (0xfff < *(ulong *)(lVar21 + 0x40080)) {
LAB_0013cbab:
                    /* WARNING: Subroutine does not return */
          abort();
        }
        lVar11 = *(long *)(lVar21 + 0xc00c0);
        uVar19 = lVar11 + 0x40 + (ulong)(-(int)lVar11 & 0x3f);
        if (0x80000 < uVar19) goto LAB_0013cbab;
        *(ulong *)(lVar21 + 0xc00c0) = uVar19;
        puVar22 = (undefined8 *)(lVar21 + 0x40080 + uVar19);
        *puVar22 = &PTR_execute_00143a10;
        puVar22[1] = local_878;
        puVar22[2] = local_870;
        puVar22[3] = local_868;
        puVar22[4] = uStack_860;
        puVar22[5] = local_858;
        puVar22[6] = uStack_850;
        puVar22[7] = local_848;
        lVar16 = *(long *)(lVar21 + 0x40080) * 0x40;
        piVar3 = (int *)(lVar21 + 0x40 + lVar16);
        lVar5 = *(long *)(lVar21 + 0xc0100);
        *(undefined4 *)(lVar21 + 0x44 + lVar16) = 1;
        *(undefined1 *)(lVar21 + 0x48 + lVar16) = 1;
        lVar16 = lVar16 + lVar21;
        *(undefined8 **)(lVar16 + 0x50) = puVar22;
        *(long *)(lVar16 + 0x58) = lVar5;
        *(TaskGroupContext **)(lVar16 + 0x60) = (TaskGroupContext *)&local_8e8;
        *(long *)(lVar16 + 0x68) = lVar11;
        *(ulong *)(lVar16 + 0x70) = uVar20;
        if (lVar5 != 0) {
          LOCK();
          *(int *)(lVar5 + 4) = *(int *)(lVar5 + 4) + 1;
          UNLOCK();
        }
        LOCK();
        if (*piVar3 == 0) {
          *piVar3 = 1;
        }
        UNLOCK();
        LOCK();
        *(long *)(lVar21 + 0x40080) = *(long *)(lVar21 + 0x40080) + 1;
        UNLOCK();
        if (*(long *)(lVar21 + 0x40080) - 1U <= *(ulong *)(lVar21 + 0x40040)) {
          LOCK();
          *(long *)(lVar21 + 0x40040) = *(long *)(lVar21 + 0x40080) + -1;
          UNLOCK();
        }
      }
      embree::TaskScheduler::wait();
      if (local_8e8 != 0) {
        local_878 = local_8e8;
        std::__exception_ptr::exception_ptr::_M_addref();
        std::rethrow_exception(&local_878);
        goto LAB_0013cba6;
      }
      *puVar12 = local_7c8[0];
      puVar12[1] = local_7c8[1];
      if (uVar20 != 2) {
        puVar12[2] = local_7c8[2];
        uVar19 = uVar20;
        goto joined_r0x0013c613;
      }
    }
    else {
      do {
        uVar15 = recurse(param_1,local_a00,0);
        local_7c8[uVar19] = uVar15;
        uVar19 = uVar19 + 1;
        local_a00 = local_a00 + 0xe;
      } while (uVar19 != uVar20);
      *puVar12 = local_7c8[0];
      puVar12[1] = local_7c8[1];
      if (uVar19 != 2) {
        puVar12[2] = local_7c8[2];
joined_r0x0013c613:
        if (uVar19 != 3) {
          puVar12[3] = local_7c8[3];
        }
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar12;
  }
LAB_0013cba6:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::NodeRefPtr<4> embree::sse2::GeneralBVHBuilder::build<embree::NodeRefPtr<4>,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6}, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::build()::{lambda(unsigned
   long)#8}>(embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef*, embree::sse2::PrimInfoExtRange const&,
   embree::BVHN<4>::CreateAlloc, embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6} const&, embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::build()::{lambda(unsigned long)#8} const&,
   embree::sse2::GeneralBVHBuilder::Settings const&) */

void embree::sse2::GeneralBVHBuilder::
     build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)_6_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(unsigned_long)_8_>
               (undefined8 param_1,undefined8 param_2,undefined4 *param_3,undefined8 param_4,
               undefined8 param_5,undefined8 param_6,ulong *param_7)

{
  long in_FS_OFFSET;
  undefined1 local_132;
  undefined1 local_131;
  undefined8 local_130;
  undefined8 local_128;
  undefined8 uStack_120;
  undefined8 local_118;
  undefined8 local_108;
  undefined1 local_100;
  undefined4 local_f8;
  undefined4 uStack_f4;
  undefined4 uStack_f0;
  undefined4 uStack_ec;
  undefined4 local_e8;
  undefined4 uStack_e4;
  undefined4 uStack_e0;
  undefined4 uStack_dc;
  undefined4 local_d8;
  undefined4 uStack_d4;
  undefined4 uStack_d0;
  undefined4 uStack_cc;
  undefined4 local_c8;
  undefined4 uStack_c4;
  undefined4 uStack_c0;
  undefined4 uStack_bc;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  ulong local_98;
  ulong uStack_90;
  ulong local_88;
  ulong uStack_80;
  ulong local_78;
  ulong uStack_70;
  ulong local_68;
  ulong uStack_60;
  undefined8 local_58;
  undefined8 local_50;
  undefined8 *local_48;
  undefined1 *local_40;
  undefined1 *local_38;
  undefined8 local_30;
  undefined8 *local_28;
  undefined8 *local_20;
  undefined8 local_18;
  long local_10;
  
  local_98 = *param_7;
  uStack_90 = param_7[1];
  local_88 = param_7[2];
  uStack_80 = param_7[3];
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = param_7[4];
  uStack_70 = param_7[5];
  local_68 = param_7[6];
  uStack_60 = param_7[7];
  local_48 = &local_130;
  local_40 = &local_131;
  local_38 = &local_132;
  local_20 = &local_108;
  local_28 = &local_128;
  local_130 = param_4;
  local_58 = param_2;
  local_50 = param_1;
  local_30 = param_5;
  local_18 = param_6;
  if (0x10 < *param_7) {
                    /* WARNING: Subroutine does not return */
    abort();
  }
  local_b8 = *(undefined8 *)(param_3 + 0x10);
  local_f8 = *param_3;
  uStack_f4 = param_3[1];
  uStack_f0 = param_3[2];
  uStack_ec = param_3[3];
  local_100 = 0;
  local_e8 = param_3[4];
  uStack_e4 = param_3[5];
  uStack_e0 = param_3[6];
  uStack_dc = param_3[7];
  local_d8 = param_3[8];
  uStack_d4 = param_3[9];
  uStack_d0 = param_3[10];
  uStack_cc = param_3[0xb];
  local_108 = 1;
  local_c8 = param_3[0xc];
  uStack_c4 = param_3[0xd];
  uStack_c0 = param_3[0xe];
  uStack_bc = param_3[0xf];
  local_b0 = *(undefined8 *)(param_3 + 0x12);
  local_a8 = *(undefined8 *)(param_3 + 0x14);
  local_128 = 0;
  uStack_120 = 0;
  local_118 = 0;
  BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(unsigned_long)#8}>
  ::recurse(&local_98,local_20,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::build() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *this)

{
  _lambda_embree__range<unsigned_long>__1_ *p_Var1;
  int *piVar2;
  undefined4 uVar3;
  TaskGroupContext *pTVar4;
  undefined1 (*pauVar5) [16];
  int iVar6;
  TaskGroupContext *pTVar7;
  long lVar8;
  long lVar9;
  ulong uVar10;
  ulong uVar11;
  long *plVar12;
  undefined8 *puVar13;
  undefined8 *puVar14;
  long lVar15;
  undefined8 uVar16;
  long *plVar17;
  TaskScheduler *pTVar18;
  uint uVar19;
  ulong uVar20;
  _lambda_embree__range<unsigned_long>__1_ *p_Var21;
  uint uVar22;
  long *plVar23;
  ulong uVar24;
  undefined8 *puVar25;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *pBVar26;
  long *plVar27;
  _lambda_embree__range<unsigned_long>__1_ *in_R9;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *pBVar28;
  long in_FS_OFFSET;
  float fVar29;
  double dVar30;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  undefined1 auVar35 [16];
  undefined1 auVar36 [16];
  undefined1 auVar37 [16];
  string *psVar38;
  plus *ppVar39;
  long lVar40;
  plus *ppVar41;
  _lambda_embree__range<unsigned_long>__1_ *local_220;
  undefined1 uStack_1c9;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *local_1c8;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *local_1c0;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *local_1b8;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> **ppBStack_1b0;
  undefined8 uStack_1a8;
  TaskGroupContext *local_198;
  TaskGroupContext *pTStack_190;
  plus *local_188;
  BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *pBStack_180;
  TaskGroupContext *local_178;
  undefined8 local_170;
  undefined8 uStack_168;
  undefined8 uStack_160;
  undefined1 local_158 [16];
  undefined1 local_148 [16];
  undefined1 local_138 [16];
  undefined1 local_128 [16];
  long local_118;
  long local_110;
  undefined1 local_108 [12];
  undefined4 uStack_fc;
  undefined1 local_f8 [12];
  undefined4 uStack_ec;
  undefined1 local_e8 [16];
  undefined1 local_d8 [16];
  undefined8 local_c8;
  long local_c0;
  ulong uStack_b8;
  long *local_a8 [2];
  long local_98 [2];
  long *local_88;
  long local_80;
  long local_78 [2];
  _lambda_embree__range<unsigned_long>__1_ *local_68;
  undefined8 local_60;
  long local_58 [5];
  
  local_58[3] = *(long *)(in_FS_OFFSET + 0x28);
  lVar8 = *(long *)(this + 0x28);
  pTVar4 = *(TaskGroupContext **)(*(long *)(this + 0x30) + 0x1d0);
  pTVar7 = (TaskGroupContext *)(*(long *)(lVar8 + 0x208) - *(long *)(lVar8 + 0x200) >> 3);
  if (pTVar4 < pTVar7) {
    local_1c8 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *)0x0;
    local_188 = (plus *)0x1;
    local_198 = pTVar7;
    pTStack_190 = pTVar4;
    pBStack_180 = this;
    local_178 = (TaskGroupContext *)&local_1c8;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)&local_198,(TaskGroupContext *)&local_1c8,
                 (long)pTVar7 - (long)pTVar4,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_0013e487;
      lVar40 = *(long *)(lVar8 + 0xc00c0);
      uVar10 = lVar40 + 0x30 + (ulong)(-(int)lVar40 & 0x3f);
      if (0x80000 < uVar10) goto LAB_0013e487;
      *(ulong *)(lVar8 + 0xc00c0) = uVar10;
      puVar13 = (undefined8 *)(lVar8 + 0x40090 + uVar10);
      *puVar13 = &PTR_execute_00143908;
      puVar13[1] = local_198;
      puVar13[2] = pTStack_190;
      puVar13[3] = local_188;
      puVar13[4] = pBStack_180;
      puVar13[5] = local_178;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)(lVar8 + 0x40 + lVar9);
      lVar15 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar13;
      *(long *)(lVar9 + 0x58) = lVar15;
      *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_1c8;
      *(long *)(lVar9 + 0x68) = lVar40;
      *(long *)(lVar9 + 0x70) = (long)pTVar7 - (long)pTVar4;
      if (lVar15 != 0) {
        LOCK();
        *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*(int *)in_R9 == 0) {
        *(int *)in_R9 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    local_108._0_8_ = local_1c8;
    if (local_1c8 == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *)0x0) {
      lVar8 = *(long *)(this + 0x28);
      goto LAB_0013cefd;
    }
  }
  else {
LAB_0013cefd:
    uVar24 = 0;
    FastAllocator::reset((FastAllocator *)(lVar8 + 0x78));
    uVar10 = *(ulong *)(this + 0x98);
    lVar8 = *(long *)(this + 0x30);
    if ((uVar10 & 0x100000) != 0) {
      uVar24 = *(ulong *)(lVar8 + 0x288);
    }
    if ((uVar10 & 0x200000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x298);
    }
    if ((uVar10 & 0xf) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2b8);
    }
    if ((uVar10 & 0x77770) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2a8);
    }
    if ((uVar10 & 0xe000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x338);
    }
    if ((uVar10 & 0x800000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2c8);
    }
    if ((uVar10 & 0x20000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2d8);
    }
    if ((uVar10 & 0x40000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2e8);
    }
    if ((uVar10 & 0x80000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x2f8);
    }
    if ((uVar10 & 0x1000000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x308);
    }
    if ((uVar10 & 0x400000) != 0) {
      uVar24 = uVar24 + *(long *)(lVar8 + 0x318);
    }
    lVar8 = *(long *)(this + 0x28);
    plVar17 = (long *)(lVar8 + 0x130);
    plVar12 = (long *)(lVar8 + 0x170);
    if (uVar24 == 0) {
      *(undefined8 *)(this + 0x70) = 0;
      local_108._4_4_ = _LC8;
      local_108._0_4_ = _LC8;
      local_108._8_4_ = _LC8;
      uStack_fc = _LC8;
      local_e8._4_4_ = _LC8;
      local_e8._0_4_ = _LC8;
      local_e8._8_4_ = _LC8;
      local_e8._12_4_ = _LC8;
      local_f8._4_4_ = _LC6;
      local_f8._0_4_ = _LC6;
      local_f8._8_4_ = _LC6;
      uStack_ec = _LC6;
      local_d8._4_4_ = _LC6;
      local_d8._0_4_ = _LC6;
      local_d8._8_4_ = _LC6;
      local_d8._12_4_ = _LC6;
      embree::BVHN<4>::set(lVar8,8,local_108,0);
      if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
        return;
      }
      goto LAB_0013e476;
    }
    do {
      while (*plVar17 != 0) {
        lVar40 = *(long *)(*plVar17 + 0x18);
        *(long *)(*plVar17 + 0x18) = *plVar12;
        LOCK();
        *plVar12 = *plVar17;
        UNLOCK();
        LOCK();
        *plVar17 = lVar40;
        UNLOCK();
      }
      LOCK();
      *plVar17 = 0;
      UNLOCK();
      plVar17 = plVar17 + 1;
    } while (plVar12 != plVar17);
    if ((*(long *)(lVar8 + 0x170) == 0) && (*(long *)(lVar8 + 0x178) == 0)) {
      uVar10 = uVar24 + 3 >> 2;
      dVar30 = (double)uVar10 * __LC30 * __LC37;
      if (_LC32 <= dVar30) {
        uVar20 = (long)(dVar30 - _LC32) ^ 0x8000000000000000;
      }
      else {
        uVar20 = (ulong)dVar30;
      }
      *(undefined1 *)(lVar8 + 0x182) = 0;
      in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)0x3;
      uVar20 = uVar20 + ((uVar10 << 8) >> 2);
      *(ulong *)(lVar8 + 0x90) = uVar20;
      uVar11 = uVar20 / 0x14 + 0x7f & 0xffffffffffffff80;
      uVar10 = 0x1fffc0;
      if (uVar11 < 0x1fffc1) {
        uVar10 = uVar11;
      }
      if (uVar10 < 0x400) {
        uVar10 = 0x400;
      }
      *(ulong *)(lVar8 + 0xa0) = uVar10;
      *(ulong *)(lVar8 + 0x98) = uVar10;
      if (uVar20 <= uVar10 * 0x50) {
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)(ulong)(uVar10 * 0x28 < uVar20);
      }
      *(_lambda_embree__range<unsigned_long>__1_ **)(lVar8 + 0x80) = in_R9;
      if (uVar10 * 0xa0 < uVar20) {
        *(undefined8 *)(lVar8 + 0x80) = 7;
        if (uVar10 * 0x140 < uVar20) {
LAB_0013d10d:
          *(undefined8 *)(lVar8 + 0x88) = 0x1040;
          *(ulong *)(lVar8 + 0x98) = uVar10 * 2;
        }
        else {
LAB_0013e104:
          *(undefined8 *)(lVar8 + 0x88) = 0x1040;
        }
      }
      else {
        if (uVar10 * 0x140 < uVar20) goto LAB_0013d10d;
        uVar10 = 0x1040;
        if (uVar11 < 0x1041) {
          uVar10 = uVar11;
        }
        if (uVar10 < 0x400) {
          uVar10 = 0x400;
        }
        *(ulong *)(lVar8 + 0x88) = uVar10;
        if (uVar20 == 0) {
          *(undefined8 *)(lVar8 + 0xa0) = 0x1fffc0;
          goto LAB_0013e104;
        }
      }
      LOCK();
      *(undefined8 *)(lVar8 + 0x188) = 0;
      UNLOCK();
      lVar40 = *(long *)(lVar8 + 0x78);
      if (*(long *)(lVar40 + 0x4e0) != 0) {
        *(long *)(lVar8 + 0x98) = *(long *)(lVar40 + 0x4e0);
      }
      if ((((0 < *(int *)(lVar40 + 0x4e8)) &&
           (*(undefined8 *)(lVar8 + 0x80) = 0, 1 < *(int *)(lVar40 + 0x4e8))) &&
          (*(undefined8 *)(lVar8 + 0x80) = 1, 3 < *(int *)(lVar40 + 0x4e8))) &&
         (*(undefined8 *)(lVar8 + 0x80) = 3, 7 < *(int *)(lVar40 + 0x4e8))) {
        *(undefined8 *)(lVar8 + 0x80) = 7;
      }
      if (*(long *)(lVar40 + 0x4f0) != 0) {
        *(long *)(lVar8 + 0x88) = *(long *)(lVar40 + 0x4f0);
      }
      if (*(int *)(lVar40 + 0x4f8) != -1) {
        *(bool *)(lVar8 + 0x182) = *(int *)(lVar40 + 0x4f8) != 0;
      }
    }
    else {
      FastAllocator::reset((FastAllocator *)(lVar8 + 0x78));
    }
    psVar38 = *(string **)(this + 0x28);
    local_a8[0] = local_98;
    std::__cxx11::string::_M_construct((ulong)local_a8,'\x01');
    *(undefined1 *)local_a8[0] = 0x34;
    plVar12 = (long *)std::__cxx11::string::_M_replace((ulong)local_a8,0,(char *)0x0,0x130ed8);
    plVar17 = plVar12 + 2;
    if ((long *)*plVar12 == plVar17) {
      uVar10 = plVar12[1] + 1;
      plVar23 = plVar17;
      plVar27 = local_78;
      if (7 < (uint)uVar10) {
        uVar19 = (uint)uVar10 & 0xfffffff8;
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)(ulong)uVar19;
        uVar20 = 0;
        do {
          uVar22 = (int)uVar20 + 8;
          uVar11 = (ulong)uVar22;
          *(undefined8 *)((long)local_78 + uVar20) = *(undefined8 *)((long)plVar17 + uVar20);
          uVar20 = uVar11;
        } while (uVar22 < uVar19);
        plVar27 = (long *)((long)local_78 + uVar11);
        plVar23 = (long *)(uVar11 + (long)plVar17);
      }
      lVar8 = 0;
      if ((uVar10 & 4) != 0) {
        *(int *)plVar27 = (int)*plVar23;
        lVar8 = 4;
      }
      if ((uVar10 & 2) != 0) {
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)
                (ulong)*(ushort *)((long)plVar23 + lVar8);
        *(ushort *)((long)plVar27 + lVar8) = *(ushort *)((long)plVar23 + lVar8);
        lVar8 = lVar8 + 2;
      }
      local_88 = local_78;
      if ((uVar10 & 1) != 0) {
        *(undefined1 *)((long)plVar27 + lVar8) = *(undefined1 *)((long)plVar23 + lVar8);
      }
    }
    else {
      local_78[0] = plVar12[2];
      local_88 = (long *)*plVar12;
    }
    local_80 = plVar12[1];
    *plVar12 = (long)plVar17;
    plVar12[1] = 0;
    *(undefined1 *)(plVar12 + 2) = 0;
    if (0x3fffffffffffffffU - local_80 < 0xf) {
                    /* WARNING: Subroutine does not return */
      std::__throw_length_error("basic_string::append");
    }
    puVar13 = (undefined8 *)std::__cxx11::string::_M_append((char *)&local_88,0x130ef7);
    p_Var1 = (_lambda_embree__range<unsigned_long>__1_ *)(puVar13 + 2);
    if ((_lambda_embree__range<unsigned_long>__1_ *)*puVar13 == p_Var1) {
      uVar10 = puVar13[1] + 1;
      p_Var21 = p_Var1;
      in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)local_58;
      if (7 < (uint)uVar10) {
        uVar20 = 0;
        do {
          uVar19 = (int)uVar20 + 8;
          uVar11 = (ulong)uVar19;
          *(undefined8 *)((_lambda_embree__range<unsigned_long>__1_ *)local_58 + uVar20) =
               *(undefined8 *)(p_Var1 + uVar20);
          uVar20 = uVar11;
        } while (uVar19 < ((uint)uVar10 & 0xfffffff8));
        in_R9 = (_lambda_embree__range<unsigned_long>__1_ *)local_58 + uVar11;
        p_Var21 = p_Var1 + uVar11;
      }
      lVar8 = 0;
      if ((uVar10 & 4) != 0) {
        *(int *)in_R9 = *(int *)p_Var21;
        lVar8 = 4;
      }
      if ((uVar10 & 2) != 0) {
        *(undefined2 *)(in_R9 + lVar8) = *(undefined2 *)(p_Var21 + lVar8);
        lVar8 = lVar8 + 2;
      }
      local_68 = (_lambda_embree__range<unsigned_long>__1_ *)local_58;
      if ((uVar10 & 1) != 0) {
        in_R9[lVar8] = p_Var21[lVar8];
      }
    }
    else {
      local_58[0] = puVar13[2];
      local_68 = (_lambda_embree__range<unsigned_long>__1_ *)*puVar13;
    }
    local_60 = puVar13[1];
    *puVar13 = p_Var1;
    puVar13[1] = 0;
    *(undefined1 *)(puVar13 + 2) = 0;
    dVar30 = (double)embree::BVHN<4>::preBuild(psVar38);
    if (local_68 != (_lambda_embree__range<unsigned_long>__1_ *)local_58) {
      operator_delete(local_68,local_58[0] + 1);
    }
    if (local_88 != local_78) {
      operator_delete(local_88,local_78[0] + 1);
    }
    if (local_a8[0] != local_98) {
      operator_delete(local_a8[0],local_98[0] + 1);
    }
    lVar8 = *(long *)(this + 0x28);
    pTVar7 = (TaskGroupContext *)(*(long *)(lVar8 + 0x208) - *(long *)(lVar8 + 0x200) >> 3);
    if (pTVar7 < pTVar4) {
      std::vector<embree::BVHN<4>*,std::allocator<embree::BVHN<4>*>>::_M_default_append
                ((vector<embree::BVHN<4>*,std::allocator<embree::BVHN<4>*>> *)(lVar8 + 0x200),
                 (long)pTVar4 - (long)pTVar7);
    }
    pTVar7 = (TaskGroupContext *)(*(long *)(this + 0x18) - *(long *)(this + 0x10) >> 3);
    if (pTVar7 < pTVar4) {
      std::
      vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase>>>>
      ::_M_default_append((vector<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase>>,std::allocator<std::unique_ptr<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase,std::default_delete<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderBase>>>>
                           *)(this + 0x10),(long)pTVar4 - (long)pTVar7);
    }
    local_198 = (TaskGroupContext *)0x0;
    uVar10 = *(ulong *)(*(long *)(this + 0x30) + 0x1d0);
    ppVar41 = (plus *)&local_1b8;
    stack0xffffffffffffff00 = ppVar41;
    local_108._0_8_ =
         (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
          *)&local_198;
    local_f8._0_8_ = (_lambda___1_ *)local_158;
    local_158._0_8_ = this;
    if (uVar10 == 1) {
      lVar8 = **(long **)(*(long *)(this + 0x30) + 0x1e0);
      if (((lVar8 != 0) && (*(char *)(lVar8 + 0x3c) == '\x14')) && (*(int *)(lVar8 + 0x24) == 1)) {
        uVar10 = 1;
        if (*(uint *)(lVar8 + 0x20) < 5) {
          uVar10 = (ulong)*(uint *)(lVar8 + 0x20) + 3 >> 2;
        }
        goto LAB_0013dc73;
      }
    }
    else {
      uVar10 = parallel_reduce_internal<unsigned_long,unsigned_long,embree::parallel_reduce<unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_,std::plus<unsigned_long>>(unsigned_long,unsigned_long,unsigned_long_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::resizeRefsList()::_lambda(embree::range<unsigned_long>const&)_1_const&,std::plus<unsigned_long>const&)::_lambda(embree::range<unsigned_long>)_1_,std::plus<unsigned_long>>
                         (uVar10,0,uVar10,(ulong)&local_198,(ulong *)local_108,in_R9,ppVar41);
LAB_0013dc73:
      if (*(ulong *)(this + 0x48) < uVar10) {
        uVar20 = *(ulong *)(this + 0x50);
        if (uVar20 < uVar10) {
          uVar11 = uVar10;
          if (uVar20 != 0) {
            do {
              uVar20 = uVar20 * 2;
              if (uVar20 == 0) {
                uVar20 = 1;
              }
              uVar11 = uVar20;
            } while (uVar20 < uVar10);
          }
          puVar13 = *(undefined8 **)(this + 0x58);
          uVar20 = uVar11 << 6;
          (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),uVar20,0);
          if (uVar20 < 0x1c00000) {
            lVar8 = embree::alignedMalloc(uVar20,0x20);
          }
          else {
            lVar8 = embree::os_malloc(uVar20,(bool *)(this + 0x40));
          }
          *(long *)(this + 0x58) = lVar8;
          if (*(long *)(this + 0x48) != 0) {
            puVar25 = puVar13;
            uVar20 = 0;
            while( true ) {
              uVar16 = puVar25[1];
              puVar14 = (undefined8 *)(lVar8 + uVar20 * 0x40);
              *puVar14 = *puVar25;
              puVar14[1] = uVar16;
              uVar16 = puVar25[3];
              puVar14[2] = puVar25[2];
              puVar14[3] = uVar16;
              uVar3 = *(undefined4 *)(puVar25 + 5);
              puVar14[4] = puVar25[4];
              *(undefined4 *)(puVar14 + 5) = uVar3;
              if (*(ulong *)(this + 0x48) <= uVar20 + 1) break;
              lVar8 = *(long *)(this + 0x58);
              puVar25 = puVar25 + 8;
              uVar20 = uVar20 + 1;
            }
          }
          lVar8 = *(long *)(this + 0x50);
          if (puVar13 != (undefined8 *)0x0) {
            if ((ulong)(lVar8 << 6) < 0x1c00000) {
              embree::alignedFree(puVar13);
            }
            else {
              embree::os_free(puVar13,lVar8 << 6,(bool)this[0x40]);
            }
          }
          if (lVar8 != 0) {
            (**(code **)**(undefined8 **)(this + 0x38))
                      (*(undefined8 **)(this + 0x38),lVar8 * -0x40,1);
          }
          *(ulong *)(this + 0x48) = uVar10;
          *(ulong *)(this + 0x50) = uVar11;
        }
        else {
          *(ulong *)(this + 0x48) = uVar10;
        }
      }
    }
    LOCK();
    *(undefined4 *)(this + 0x88) = 0;
    UNLOCK();
    local_1b8 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *)0x0;
    local_158._8_8_ = 0;
    local_158._0_8_ = pTVar4;
    local_148._8_8_ = this;
    local_148._0_8_ = 1;
    local_138._0_8_ = ppVar41;
    ppVar39 = ppVar41;
    lVar8 = embree::TaskScheduler::thread();
    if (lVar8 == 0) {
      pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
      TaskScheduler::
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_2_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar18,(_lambda___1_ *)local_158,(TaskGroupContext *)ppVar39,(ulong)pTVar4,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar8 + 0x40080)) goto LAB_0013e487;
      lVar40 = *(long *)(lVar8 + 0xc00c0);
      uVar10 = lVar40 + 0x30 + (ulong)(-(int)lVar40 & 0x3f);
      if (0x80000 < uVar10) goto LAB_0013e487;
      *(ulong *)(lVar8 + 0xc00c0) = uVar10;
      puVar13 = (undefined8 *)(lVar8 + 0x40090 + uVar10);
      *puVar13 = &PTR_execute_00143920;
      puVar13[1] = local_158._0_8_;
      puVar13[2] = local_158._8_8_;
      puVar13[3] = local_148._0_8_;
      puVar13[4] = local_148._8_8_;
      puVar13[5] = local_138._0_8_;
      lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
      piVar2 = (int *)(lVar8 + 0x40 + lVar9);
      lVar15 = *(long *)(lVar8 + 0xc0100);
      *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
      *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
      lVar9 = lVar9 + lVar8;
      *(undefined8 **)(lVar9 + 0x50) = puVar13;
      *(long *)(lVar9 + 0x58) = lVar15;
      *(plus **)(lVar9 + 0x60) = ppVar41;
      *(long *)(lVar9 + 0x68) = lVar40;
      *(TaskGroupContext **)(lVar9 + 0x70) = pTVar4;
      if (lVar15 != 0) {
        LOCK();
        *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar2 == 0) {
        *piVar2 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
        LOCK();
        *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
        UNLOCK();
      }
    }
    embree::TaskScheduler::wait();
    local_108._0_8_ = local_1b8;
    if (local_1b8 == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *)0x0) {
      local_1c0 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *)0x0;
      stack0xffffffffffffff00 = 0;
      local_108._0_8_ = pTVar4;
      stack0xffffffffffffff10 = this;
      local_f8._0_8_ = 1;
      local_e8._0_8_ = (TaskGroupContext *)&local_1c0;
      lVar8 = embree::TaskScheduler::thread();
      if (lVar8 == 0) {
        pTVar18 = (TaskScheduler *)embree::TaskScheduler::instance();
        TaskScheduler::
        spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_>(unsigned_long,unsigned_long,unsigned_long,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_3_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                  (pTVar18,(_lambda___1_ *)local_108,(TaskGroupContext *)&local_1c0,(ulong)pTVar4,
                   true);
      }
      else {
        if (0xfff < *(ulong *)(lVar8 + 0x40080)) {
LAB_0013e487:
                    /* WARNING: Subroutine does not return */
          abort();
        }
        lVar40 = *(long *)(lVar8 + 0xc00c0);
        uVar10 = lVar40 + 0x30 + (ulong)(-(int)lVar40 & 0x3f);
        if (0x80000 < uVar10) goto LAB_0013e487;
        *(ulong *)(lVar8 + 0xc00c0) = uVar10;
        puVar13 = (undefined8 *)(lVar8 + 0x40090 + uVar10);
        *puVar13 = &PTR_execute_00143938;
        puVar13[1] = local_108._0_8_;
        puVar13[2] = stack0xffffffffffffff00;
        puVar13[3] = local_f8._0_8_;
        puVar13[4] = stack0xffffffffffffff10;
        puVar13[5] = local_e8._0_8_;
        lVar9 = *(long *)(lVar8 + 0x40080) * 0x40;
        piVar2 = (int *)(lVar8 + 0x40 + lVar9);
        lVar15 = *(long *)(lVar8 + 0xc0100);
        *(undefined4 *)(lVar8 + 0x44 + lVar9) = 1;
        *(undefined1 *)(lVar8 + 0x48 + lVar9) = 1;
        lVar9 = lVar9 + lVar8;
        *(undefined8 **)(lVar9 + 0x50) = puVar13;
        *(long *)(lVar9 + 0x58) = lVar15;
        *(TaskGroupContext **)(lVar9 + 0x60) = (TaskGroupContext *)&local_1c0;
        *(long *)(lVar9 + 0x68) = lVar40;
        *(TaskGroupContext **)(lVar9 + 0x70) = pTVar4;
        if (lVar15 != 0) {
          LOCK();
          *(int *)(lVar15 + 4) = *(int *)(lVar15 + 4) + 1;
          UNLOCK();
        }
        LOCK();
        if (*piVar2 == 0) {
          *piVar2 = 1;
        }
        UNLOCK();
        LOCK();
        *(long *)(lVar8 + 0x40080) = *(long *)(lVar8 + 0x40080) + 1;
        UNLOCK();
        if (*(long *)(lVar8 + 0x40080) - 1U <= *(ulong *)(lVar8 + 0x40040)) {
          LOCK();
          *(long *)(lVar8 + 0x40040) = *(long *)(lVar8 + 0x40080) + -1;
          UNLOCK();
        }
      }
      local_220 = (_lambda_embree__range<unsigned_long>__1_ *)local_108;
      embree::TaskScheduler::wait();
      if (local_1c0 == (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *)0x0) {
        if (*(int *)(this + 0x88) == 1) {
          pauVar5 = *(undefined1 (**) [16])(this + 0x58);
          local_d8 = pauVar5[1];
          _local_f8 = pauVar5[1];
          local_e8 = *pauVar5;
          _local_108 = *pauVar5;
          embree::BVHN<4>::set
                    (*(undefined8 *)(this + 0x28),*(undefined8 *)pauVar5[2],local_220,uVar24);
        }
        else {
          uVar20 = (ulong)*(int *)(this + 0x88);
          uVar10 = *(ulong *)(this + 0x50);
          if (uVar10 < uVar20) {
            puVar13 = *(undefined8 **)(this + 0x58);
            if (uVar10 == 0) {
              uVar10 = uVar20;
              if (uVar20 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar20;
              }
            }
            else {
              do {
                uVar10 = uVar10 * 2;
                if (uVar10 == 0) {
                  uVar10 = 1;
                }
              } while (uVar10 < uVar20);
              if (uVar20 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar20;
              }
            }
            uVar11 = uVar10 << 6;
            (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),uVar11,0);
            if (uVar11 < 0x1c00000) {
              lVar8 = embree::alignedMalloc(uVar11,0x20);
            }
            else {
              lVar8 = embree::os_malloc(uVar11,(bool *)(this + 0x40));
            }
            *(long *)(this + 0x58) = lVar8;
            if (*(long *)(this + 0x48) != 0) {
              puVar25 = puVar13;
              uVar11 = 0;
              while( true ) {
                uVar16 = puVar25[1];
                puVar14 = (undefined8 *)(lVar8 + uVar11 * 0x40);
                *puVar14 = *puVar25;
                puVar14[1] = uVar16;
                uVar16 = puVar25[3];
                puVar14[2] = puVar25[2];
                puVar14[3] = uVar16;
                uVar3 = *(undefined4 *)(puVar25 + 5);
                puVar14[4] = puVar25[4];
                *(undefined4 *)(puVar14 + 5) = uVar3;
                if (*(ulong *)(this + 0x48) <= uVar11 + 1) break;
                lVar8 = *(long *)(this + 0x58);
                puVar25 = puVar25 + 8;
                uVar11 = uVar11 + 1;
              }
            }
            lVar8 = *(long *)(this + 0x50);
            if (puVar13 != (undefined8 *)0x0) {
              if ((ulong)(lVar8 << 6) < 0x1c00000) {
                embree::alignedFree(puVar13);
              }
              else {
                embree::os_free(puVar13,lVar8 << 6,(bool)this[0x40]);
              }
            }
            if (lVar8 != 0) {
              (**(code **)**(undefined8 **)(this + 0x38))
                        (*(undefined8 **)(this + 0x38),lVar8 * -0x40,1);
            }
            *(ulong *)(this + 0x48) = uVar20;
            *(ulong *)(this + 0x50) = uVar10;
          }
          else {
            *(ulong *)(this + 0x48) = uVar20;
          }
          fVar29 = (float)uVar24 / __LC36;
          if (__LC24 <= fVar29) {
            uVar10 = (long)(fVar29 - __LC24) ^ 0x8000000000000000;
          }
          else {
            uVar10 = (ulong)fVar29;
          }
          if (uVar10 < 1000) {
            uVar10 = 1000;
          }
          local_108._0_8_ = CONCAT44(_LC8,_LC8);
          local_108._8_4_ = _LC8;
          uStack_fc = _LC8;
          local_f8._0_8_ = CONCAT44(_LC6,_LC6);
          local_f8._8_4_ = _LC6;
          uStack_ec = _LC6;
          local_c8 = 0;
          if (uVar10 < uVar20 * 2) {
            uVar10 = uVar20 * 2;
          }
          local_c0 = 0;
          local_198 = (TaskGroupContext *)local_220;
          local_1b8 = this;
          local_e8 = _local_108;
          local_d8 = _local_f8;
          if (uVar20 == 1) {
            pBVar28 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> **)
                       (this + 0x58);
            auVar35._8_4_ = _LC8;
            auVar35._0_8_ = local_108._0_8_;
            auVar35._12_4_ = _LC8;
            auVar33._8_4_ = _LC6;
            auVar33._0_8_ = local_f8._0_8_;
            auVar33._12_4_ = _LC6;
            auVar37._8_4_ = _LC8;
            auVar37._0_8_ = local_108._0_8_;
            auVar37._12_4_ = _LC8;
            auVar36._8_4_ = _LC6;
            auVar36._0_8_ = local_f8._0_8_;
            auVar36._12_4_ = _LC6;
            auVar32._8_4_ = _LC8;
            auVar32._0_8_ = local_108._0_8_;
            auVar32._12_4_ = _LC8;
            local_118 = 0;
            auVar34._0_4_ = *(float *)(pBVar28 + 0x10) + *(float *)pBVar28;
            auVar34._4_4_ = *(float *)(pBVar28 + 0x14) + *(float *)(pBVar28 + 4);
            auVar34._8_4_ = *(float *)(pBVar28 + 0x18) + *(float *)(pBVar28 + 8);
            auVar34._12_4_ = *(float *)(pBVar28 + 0x1c) + *(float *)(pBVar28 + 0xc);
            auVar37 = minps(auVar37,*(undefined1 (*) [16])pBVar28);
            auVar36 = maxps(auVar36,*(undefined1 (*) [16])(pBVar28 + 0x10));
            local_110 = 1;
            auVar35 = minps(auVar35,auVar34);
            auVar34 = maxps(auVar33,auVar34);
            auVar31._8_4_ = _LC6;
            auVar31._0_8_ = local_f8._0_8_;
            auVar31._12_4_ = _LC6;
            local_158 = minps(auVar32,auVar37);
            local_148 = maxps(auVar31,auVar36);
            local_138 = minps(_local_108,auVar35);
            local_128 = maxps(_local_f8,auVar34);
          }
          else {
            pTStack_190 = (TaskGroupContext *)&local_1c0;
            local_188 = ppVar39;
            parallel_reduce_internal<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::parallel_reduce<unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>(unsigned_long,unsigned_long,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::range<unsigned_long>const&)_4_const&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_const&)::_lambda(embree::range<unsigned_long>)_1_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&,embree::PrimInfoT<embree::BBox<embree::Vec3fa>>const&)_5_>
                      ((ulong)local_158,uVar20,0,uVar20,(PrimInfoT_conflict *)0x1,local_220,
                       (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
                        *)&local_198);
            if (local_110 == local_118) {
              stack0xffffffffffffff00 = _UNK_001440d8;
              local_108._0_8_ = CONCAT44(_UNK_001440d4,_LC8);
              stack0xffffffffffffff10 = _UNK_001440c8;
              local_f8._0_8_ = CONCAT44(_UNK_001440c4,_LC6);
              local_e8._8_8_ = _UNK_001440d8;
              local_e8._0_8_ = CONCAT44(_UNK_001440d4,_LC8);
              local_d8._8_8_ = _UNK_001440c8;
              local_d8._0_8_ = CONCAT44(_UNK_001440c4,_LC6);
              embree::BVHN<4>::set(*(undefined8 *)(this + 0x28),8,local_220,0);
              goto LAB_0013de5a;
            }
            pBVar28 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> **)
                       (this + 0x58);
          }
          lVar40 = local_110;
          lVar8 = local_118;
          uVar20 = *(ulong *)(this + 0x50);
          local_198 = (TaskGroupContext *)0x4;
          local_170 = 0x3f8000003f800000;
          for (iVar6 = 0x1f; 4U >> iVar6 == 0; iVar6 = iVar6 + -1) {
          }
          pTStack_190 = (TaskGroupContext *)0x28;
          local_188 = (plus *)(long)iVar6;
          uStack_168 = *(undefined8 *)(this + 0x90);
          pBStack_180 = (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *)0x1;
          uStack_160 = 0xffffffffffffffff;
          local_178 = (TaskGroupContext *)0x1;
          if (uVar20 < uVar10) {
            if (uVar20 == 0) {
              uVar20 = uVar10;
              if (uVar10 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar10;
              }
            }
            else {
              do {
                uVar20 = uVar20 * 2;
                if (uVar20 == 0) {
                  uVar20 = 1;
                }
              } while (uVar20 < uVar10);
              if (uVar10 < *(ulong *)(this + 0x48)) {
                *(ulong *)(this + 0x48) = uVar10;
              }
            }
            uVar11 = uVar20 << 6;
            (**(code **)**(undefined8 **)(this + 0x38))(*(undefined8 **)(this + 0x38),uVar11,0);
            if (uVar11 < 0x1c00000) {
              lVar15 = embree::alignedMalloc(uVar11,0x20);
            }
            else {
              lVar15 = embree::os_malloc(uVar11,(bool *)(this + 0x40));
            }
            *(long *)(this + 0x58) = lVar15;
            if (*(long *)(this + 0x48) != 0) {
              uVar11 = 0;
              pBVar26 = pBVar28;
              while( true ) {
                uVar16 = *(undefined8 *)(pBVar26 + 8);
                puVar13 = (undefined8 *)(lVar15 + uVar11 * 0x40);
                *puVar13 = *(undefined8 *)pBVar26;
                puVar13[1] = uVar16;
                uVar16 = *(undefined8 *)(pBVar26 + 0x18);
                puVar13[2] = *(undefined8 *)(pBVar26 + 0x10);
                puVar13[3] = uVar16;
                uVar3 = *(undefined4 *)(pBVar26 + 0x28);
                puVar13[4] = *(undefined8 *)(pBVar26 + 0x20);
                *(undefined4 *)(puVar13 + 5) = uVar3;
                if (*(ulong *)(this + 0x48) <= uVar11 + 1) break;
                lVar15 = *(long *)(this + 0x58);
                uVar11 = uVar11 + 1;
                pBVar26 = pBVar26 + 0x40;
              }
            }
            lVar15 = *(long *)(this + 0x50);
            if (pBVar28 != (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *)0x0)
            {
              if ((ulong)(lVar15 << 6) < 0x1c00000) {
                embree::alignedFree(pBVar28);
              }
              else {
                embree::os_free(pBVar28,lVar15 << 6,(bool)this[0x40]);
              }
            }
            if (lVar15 != 0) {
              (**(code **)**(undefined8 **)(this + 0x38))
                        (*(undefined8 **)(this + 0x38),lVar15 * -0x40,1);
            }
            *(ulong *)(this + 0x48) = uVar10;
            pBVar28 = *(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> **)
                       (this + 0x58);
            *(ulong *)(this + 0x50) = uVar20;
          }
          else {
            *(ulong *)(this + 0x48) = uVar10;
          }
          auVar31 = local_148;
          auVar34 = local_158;
          local_c0 = lVar40 - lVar8;
          ppBStack_1b0 = &local_1c8;
          uStack_1a8 = 4;
          local_108._0_8_ = local_158._0_8_;
          stack0xffffffffffffff00 = local_158._8_8_;
          local_f8._0_8_ = local_148._0_8_;
          stack0xffffffffffffff10 = local_148._8_8_;
          local_e8._0_8_ = local_138._0_8_;
          local_e8._8_8_ = local_138._8_8_;
          local_d8._0_8_ = local_128._0_8_;
          local_d8._8_8_ = local_128._8_8_;
          local_c8 = 0;
          local_1c8 = this;
          local_1c0 = this;
          local_1b8 = pBVar28;
          uStack_b8 = uVar10;
          uVar16 = GeneralBVHBuilder::
                   build<embree::NodeRefPtr<4>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)_6_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(unsigned_long)_8_>
                             (ppVar39,pBVar28,local_220,*(long *)(this + 0x28) + 0x78,&uStack_1c9,
                              (TaskGroupContext *)&local_1c0,
                              (_lambda_embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const__embree__PrimInfoT<embree::BBox<embree::Vec3fa>_>_const___5_
                               *)&local_198);
          _local_108 = auVar34;
          _local_f8 = auVar31;
          local_e8 = auVar34;
          local_d8 = auVar31;
          embree::BVHN<4>::set(*(undefined8 *)(this + 0x28),uVar16,local_220,uVar24);
        }
LAB_0013de5a:
        lVar40 = *(long *)(this + 0x28);
        lVar8 = lVar40 + 0x78;
        plVar17 = (long *)(lVar40 + 0x130);
        plVar12 = (long *)(lVar40 + 0x170);
        do {
          while (*plVar17 != 0) {
            lVar15 = *(long *)(*plVar17 + 0x18);
            *(long *)(*plVar17 + 0x18) = *plVar12;
            LOCK();
            *plVar12 = *plVar17;
            UNLOCK();
            LOCK();
            *plVar17 = lVar15;
            UNLOCK();
          }
          LOCK();
          *plVar17 = 0;
          UNLOCK();
          plVar17 = plVar17 + 1;
        } while (plVar12 != plVar17);
        plVar17 = *(long **)(lVar40 + 0x1a8);
        plVar12 = *(long **)(lVar40 + 0x1b0);
        if (plVar12 != plVar17) {
          do {
            while( true ) {
              lVar15 = *plVar17;
              if (lVar8 != *(long *)(lVar15 + 8)) break;
              embree::MutexSys::lock();
              if (lVar8 == *(long *)(lVar15 + 8)) {
                LOCK();
                plVar27 = (long *)(*(long *)(lVar15 + 8) + 0x118);
                *plVar27 = *plVar27 + *(long *)(lVar15 + 0xa8) + *(long *)(lVar15 + 0x68);
                UNLOCK();
                LOCK();
                plVar27 = (long *)(*(long *)(lVar15 + 8) + 0x120);
                *plVar27 = *plVar27 +
                           (((*(long *)(lVar15 + 0x98) + *(long *)(lVar15 + 0x58)) -
                            *(long *)(lVar15 + 0x50)) - *(long *)(lVar15 + 0x90));
                UNLOCK();
                LOCK();
                plVar27 = (long *)(*(long *)(lVar15 + 8) + 0x128);
                *plVar27 = *plVar27 + *(long *)(lVar15 + 0xb0) + *(long *)(lVar15 + 0x70);
                UNLOCK();
                *(undefined8 *)(lVar15 + 0x48) = 0;
                *(undefined8 *)(lVar15 + 0x58) = 0;
                *(undefined8 *)(lVar15 + 0x50) = 0;
                *(undefined8 *)(lVar15 + 0x68) = 0;
                *(undefined8 *)(lVar15 + 0x70) = 0;
                *(undefined8 *)(lVar15 + 0x60) = 0;
                *(undefined8 *)(lVar15 + 0x88) = 0;
                *(undefined8 *)(lVar15 + 0x98) = 0;
                *(undefined8 *)(lVar15 + 0x90) = 0;
                *(undefined8 *)(lVar15 + 0xa8) = 0;
                *(undefined8 *)(lVar15 + 0xb0) = 0;
                *(undefined8 *)(lVar15 + 0xa0) = 0;
                LOCK();
                *(undefined8 *)(lVar15 + 8) = 0;
                UNLOCK();
              }
              plVar17 = plVar17 + 1;
              embree::MutexSys::unlock();
              if (plVar12 == plVar17) goto LAB_0013dff9;
            }
            plVar17 = plVar17 + 1;
          } while (plVar12 != plVar17);
LAB_0013dff9:
          if (*(long *)(lVar40 + 0x1b0) != *(long *)(lVar40 + 0x1a8)) {
            *(long *)(lVar40 + 0x1b0) = *(long *)(lVar40 + 0x1a8);
          }
        }
        if (local_58[3] == *(long *)(in_FS_OFFSET + 0x28)) {
          embree::BVHN<4>::postBuild(dVar30);
          return;
        }
        goto LAB_0013e476;
      }
      local_108._0_8_ = local_1c0;
      std::__exception_ptr::exception_ptr::_M_addref();
      local_108._0_8_ = std::rethrow_exception(local_220);
    }
  }
  std::__exception_ptr::exception_ptr::_M_addref();
  std::rethrow_exception(local_108);
LAB_0013e476:
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* embree::TaskScheduler::ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned long,
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1}>(unsigned long, unsigned long, unsigned
   long, 
   embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >,
   embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef&, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef*)#7}, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef, 32ul>, embree::sse2::PrimInfoExtRange,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4> >::BuildRef,
   embree::NodeRefPtr<4>, embree::FastAllocator::CachedAllocator, embree::BVHN<4>::CreateAlloc,
   embree::AABBNode_t<embree::NodeRefPtr<4>, 4>::Create2, embree::AABBNode_t<embree::NodeRefPtr<4>,
   4>::Set2, embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh,
   embree::TriangleM<4> >::BuildRef const*, embree::range<unsigned long> const&,
   embree::FastAllocator::CachedAllocator const&)#6},
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,
   embree::TriangleMesh, embree::TriangleM<4> >::BuildRef, embree::sse2::PrimInfoExtRange>,
   embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::build()::{lambda(unsigned
   long)#8}>::recurse(embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,
   embree::sse2::BinSplit<32ul> >&, embree::FastAllocator::CachedAllocator,
   bool)::{lambda(embree::range<unsigned long> const&)#1} const&,
   embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>::execute() */

void __thiscall
embree::TaskScheduler::
ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,e...mbree::range<unsigned_long>const&)#1}const&,embree::TaskScheduler::TaskGroupContext*)::{lambda()#1}>
::execute(ClosureTaskFunction<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,e___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
          *this)

{
  int *piVar1;
  ulong uVar2;
  undefined8 *puVar3;
  TaskGroupContext *pTVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  ulong uVar8;
  undefined8 uVar9;
  TaskScheduler *pTVar10;
  long lVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  long local_a8;
  ulong uStack_a0;
  undefined8 local_98;
  undefined8 uStack_90;
  undefined8 uStack_88;
  undefined8 uStack_80;
  TaskGroupContext *local_78;
  ulong local_68;
  ulong uStack_60;
  ulong local_58;
  undefined8 uStack_50;
  undefined8 uStack_48;
  undefined8 uStack_40;
  TaskGroupContext *local_38;
  long local_30;
  
  uVar12 = *(ulong *)(this + 8);
  uVar8 = *(ulong *)(this + 0x10);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(ulong *)(this + 0x18) < uVar12 - uVar8) {
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_50 = *(undefined8 *)(this + 0x20);
    uStack_48 = *(undefined8 *)(this + 0x28);
    uStack_40 = *(undefined8 *)(this + 0x30);
    uVar12 = uVar12 + uVar8 >> 1;
    local_68 = uVar12;
    uStack_60 = uVar8;
    local_58 = *(ulong *)(this + 0x18);
    local_38 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::Tr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_68,pTVar4,uVar12 - uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) goto LAB_0013e88e;
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar2 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar2) goto LAB_0013e88e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar2;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar2);
      *puVar3 = &PTR_execute_00143a10;
      puVar3[1] = local_68;
      puVar3[2] = uStack_60;
      puVar3[7] = local_38;
      puVar3[3] = local_58;
      puVar3[4] = uStack_50;
      puVar3[5] = uStack_48;
      puVar3[6] = uStack_40;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar12 - uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    local_98 = *(undefined8 *)(this + 0x18);
    local_a8 = *(long *)(this + 8);
    pTVar4 = *(TaskGroupContext **)(this + 0x38);
    uStack_90 = *(undefined8 *)(this + 0x20);
    uStack_88 = *(undefined8 *)(this + 0x28);
    uStack_80 = *(undefined8 *)(this + 0x30);
    uVar8 = local_a8 - uVar12;
    uStack_a0 = uVar12;
    local_78 = pTVar4;
    lVar6 = embree::TaskScheduler::thread();
    if (lVar6 == 0) {
      pTVar10 = (TaskScheduler *)embree::TaskScheduler::instance();
      spawn_root<embree::TaskScheduler::spawn<unsigned_long,embree::sse2::GeneralBVHBuilder::BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::_lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)_7_,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::Tr___mbree::range<unsigned_long>const&)_1_const&,embree::TaskScheduler::TaskGroupContext*)::_lambda()_1_>
                (pTVar10,(_lambda___1_ *)&local_a8,pTVar4,uVar8,true);
    }
    else {
      if (0xfff < *(ulong *)(lVar6 + 0x40080)) {
LAB_0013e88e:
                    /* WARNING: Subroutine does not return */
        abort();
      }
      lVar5 = *(long *)(lVar6 + 0xc00c0);
      uVar12 = lVar5 + 0x40 + (ulong)(-(int)lVar5 & 0x3f);
      if (0x80000 < uVar12) goto LAB_0013e88e;
      *(ulong *)(lVar6 + 0xc00c0) = uVar12;
      puVar3 = (undefined8 *)(lVar6 + 0x40080 + uVar12);
      *puVar3 = &PTR_execute_00143a10;
      puVar3[1] = local_a8;
      puVar3[2] = uStack_a0;
      puVar3[7] = local_78;
      puVar3[3] = local_98;
      puVar3[4] = uStack_90;
      puVar3[5] = uStack_88;
      puVar3[6] = uStack_80;
      lVar7 = *(long *)(lVar6 + 0x40080) * 0x40;
      piVar1 = (int *)(lVar6 + 0x40 + lVar7);
      lVar11 = *(long *)(lVar6 + 0xc0100);
      *(undefined4 *)(lVar6 + 0x44 + lVar7) = 1;
      *(undefined1 *)(lVar6 + 0x48 + lVar7) = 1;
      lVar7 = lVar7 + lVar6;
      *(undefined8 **)(lVar7 + 0x50) = puVar3;
      *(long *)(lVar7 + 0x58) = lVar11;
      *(TaskGroupContext **)(lVar7 + 0x60) = pTVar4;
      *(long *)(lVar7 + 0x68) = lVar5;
      *(ulong *)(lVar7 + 0x70) = uVar8;
      if (lVar11 != 0) {
        LOCK();
        *(int *)(lVar11 + 4) = *(int *)(lVar11 + 4) + 1;
        UNLOCK();
      }
      LOCK();
      if (*piVar1 == 0) {
        *piVar1 = 1;
      }
      UNLOCK();
      LOCK();
      *(long *)(lVar6 + 0x40080) = *(long *)(lVar6 + 0x40080) + 1;
      UNLOCK();
      if (*(long *)(lVar6 + 0x40080) - 1U <= *(ulong *)(lVar6 + 0x40040)) {
        LOCK();
        *(long *)(lVar6 + 0x40040) = *(long *)(lVar6 + 0x40080) + -1;
        UNLOCK();
      }
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      embree::TaskScheduler::wait();
      return;
    }
  }
  else {
    lVar6 = uVar8 * 0x70;
    for (; uVar8 < uVar12; uVar8 = uVar8 + 1) {
      local_68 = 0;
      uStack_60 = 0;
      lVar5 = *(long *)(this + 0x20);
      local_58 = 0;
      lVar11 = *(long *)(this + 0x28) + lVar6;
      lVar6 = lVar6 + 0x70;
      uVar9 = sse2::GeneralBVHBuilder::
              BuilderT<embree::sse2::GeneralBVHBuilder::BuildRecordT<embree::sse2::PrimInfoExtRange,embree::sse2::BinSplit<32ul>>,embree::sse2::HeuristicArrayOpenMergeSAH<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef&,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef*)#7},embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,32ul>,embree::sse2::PrimInfoExtRange,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::NodeRefPtr<4>,embree::FastAllocator::CachedAllocator,embree::BVHN<4>::CreateAlloc,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Create2,embree::AABBNode_t<embree::NodeRefPtr<4>,4>::Set2,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef_const*,embree::range<unsigned_long>const&,embree::FastAllocator::CachedAllocator_const&)#6},embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::GeneralBVHBuilder::DefaultCanCreateLeafSplitFunc<embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::BuildRef,embree::sse2::PrimInfoExtRange>,embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::build()::{lambda(unsigned_long)#8}>
              ::recurse(*(undefined8 *)(this + 0x30),lVar11,1);
      *(undefined8 *)(lVar5 + uVar8 * 8) = uVar9;
    }
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderLarge::~RefBuilderLarge() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderLarge::
~RefBuilderLarge(RefBuilderLarge *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderLarge::~RefBuilderLarge() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderLarge::
~RefBuilderLarge(RefBuilderLarge *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderLarge::~RefBuilderLarge() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderLarge::
~RefBuilderLarge(RefBuilderLarge *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::~BVHNBuilderTwoLevel() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::
~BVHNBuilderTwoLevel(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>> *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::~BVHNBuilderTwoLevel() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::
~BVHNBuilderTwoLevel(BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>> *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::~BVHNBuilderTwoLevel() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::~BVHNBuilderTwoLevel
          (BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>> *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMi<4>
   >::RefBuilderSmall::~RefBuilderSmall() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMi<4>>::RefBuilderSmall::
~RefBuilderSmall(RefBuilderSmall *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleMv<4>
   >::RefBuilderSmall::~RefBuilderSmall() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleMv<4>>::RefBuilderSmall::
~RefBuilderSmall(RefBuilderSmall *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}



/* WARNING: Control flow encountered bad instruction data */
/* embree::sse2::BVHNBuilderTwoLevel<4, embree::TriangleMesh, embree::TriangleM<4>
   >::RefBuilderSmall::~RefBuilderSmall() */

void __thiscall
embree::sse2::BVHNBuilderTwoLevel<4,embree::TriangleMesh,embree::TriangleM<4>>::RefBuilderSmall::
~RefBuilderSmall(RefBuilderSmall *this)

{
                    /* WARNING: Bad instruction - Truncating control flow here */
  halt_baddata();
}





