
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* compute_partition_averages_rgba(partition_info const&, image_block const&, vfloat4*) */

void compute_partition_averages_rgba(partition_info *param_1,image_block *param_2,vfloat4 *param_3)

{
  image_block *piVar1;
  image_block *piVar2;
  image_block iVar3;
  short sVar4;
  undefined4 uVar5;
  bool bVar6;
  bool bVar7;
  bool bVar8;
  bool bVar9;
  undefined1 auVar10 [13];
  undefined1 auVar11 [13];
  undefined1 auVar12 [13];
  uint3 uVar13;
  undefined1 auVar14 [13];
  undefined1 auVar15 [13];
  ulong uVar16;
  undefined8 uVar17;
  undefined1 auVar18 [13];
  uint5 uVar19;
  undefined1 auVar20 [13];
  long lVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  uint uVar25;
  uint uVar29;
  uint uVar31;
  uint uVar33;
  undefined1 auVar26 [16];
  undefined1 auVar27 [16];
  uint uVar30;
  uint uVar32;
  uint uVar34;
  undefined1 auVar28 [16];
  uint uVar35;
  uint uVar36;
  uint uVar45;
  uint uVar47;
  uint uVar49;
  undefined1 auVar37 [16];
  undefined1 auVar38 [16];
  undefined1 auVar39 [16];
  undefined1 auVar40 [16];
  undefined1 auVar41 [16];
  uint uVar46;
  uint uVar48;
  uint uVar50;
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  uint uVar51;
  float fVar52;
  uint uVar56;
  int iVar57;
  uint uVar58;
  int iVar59;
  uint uVar60;
  undefined1 auVar53 [16];
  undefined1 auVar54 [16];
  undefined1 auVar55 [16];
  undefined1 auVar61 [16];
  undefined1 auVar62 [16];
  int iVar63;
  int iVar66;
  int iVar67;
  int iVar68;
  undefined1 auVar64 [16];
  undefined1 auVar65 [16];
  float fVar69;
  float fVar70;
  float fVar71;
  float fVar72;
  float fVar73;
  float fVar74;
  float fVar75;
  float fVar76;
  float fVar77;
  float fVar78;
  float fVar79;
  float fVar80;
  float fVar81;
  float fVar82;
  float fVar83;
  float fVar84;
  float fVar85;
  float fVar86;
  float fVar87;
  float fVar88;
  float fVar89;
  float fVar90;
  float fVar91;
  float fVar92;
  float fVar93;
  float fVar94;
  float fVar95;
  float fVar96;
  float fVar97;
  float fVar98;
  float fVar99;
  float fVar100;
  float fVar101;
  float fVar102;
  float fVar103;
  float fVar104;
  float fVar105;
  float fVar106;
  float fVar107;
  float fVar108;
  undefined1 local_58 [8];
  float fStack_50;
  float fStack_4c;
  undefined1 local_48 [8];
  float fStack_40;
  float fStack_3c;
  uint local_28;
  int iStack_24;
  int iStack_20;
  uint uStack_1c;
  uint uStack_14;
  uint uStack_10;
  uint uStack_c;
  
  iVar3 = param_2[0xdbc];
  sVar4 = *(short *)param_1;
  if (sVar4 == 1) {
    uVar17 = *(undefined8 *)(param_2 + 0xde8);
    *(undefined8 *)param_3 = *(undefined8 *)(param_2 + 0xde0);
    *(undefined8 *)(param_3 + 8) = uVar17;
    return;
  }
  uVar22 = (uint)(byte)iVar3;
  uVar23 = (uint)(byte)iVar3;
  if (sVar4 != 2) {
    lVar21 = 0;
    local_28 = (uint)__LC2;
    iStack_24 = (int)((ulong)__LC2 >> 0x20);
    iStack_20 = (int)_UNK_00101fc8;
    uStack_1c = (uint)((ulong)_UNK_00101fc8 >> 0x20);
    if (sVar4 != 3) {
      fVar85 = 0.0;
      fVar86 = 0.0;
      fVar87 = 0.0;
      fVar88 = 0.0;
      fVar108 = 0.0;
      fVar81 = 0.0;
      fVar82 = 0.0;
      fVar83 = 0.0;
      fVar84 = 0.0;
      fVar93 = 0.0;
      fVar94 = 0.0;
      fVar95 = 0.0;
      fVar96 = 0.0;
      fVar105 = 0.0;
      fVar89 = 0.0;
      fVar90 = 0.0;
      fVar91 = 0.0;
      fVar92 = 0.0;
      _local_58 = (undefined1  [16])0x0;
      fVar101 = 0.0;
      fVar102 = 0.0;
      fVar103 = 0.0;
      fVar104 = 0.0;
      fVar106 = 0.0;
      fVar97 = 0.0;
      fVar98 = 0.0;
      fVar99 = 0.0;
      fVar100 = 0.0;
      fVar69 = 0.0;
      fVar70 = 0.0;
      fVar71 = 0.0;
      fVar72 = 0.0;
      fVar73 = 0.0;
      fVar74 = 0.0;
      fVar75 = 0.0;
      fVar76 = 0.0;
      fVar77 = 0.0;
      fVar78 = 0.0;
      fVar79 = 0.0;
      fVar80 = 0.0;
      _local_48 = (undefined1  [16])0x0;
      fVar107 = 0.0;
      iVar63 = __LC0;
      iVar66 = _UNK_00101fa4;
      iVar67 = _UNK_00101fa8;
      iVar68 = _UNK_00101fac;
      do {
        uVar25 = *(uint *)(param_1 + lVar21 + 0x10);
        uStack_14 = (uint)(byte)iVar3;
        uStack_10 = (uint)(byte)iVar3;
        uStack_c = (uint)(byte)iVar3;
        uVar16 = (ulong)(ushort)uVar25 & 0xffffffffffff00ff;
        auVar10._8_4_ = 0;
        auVar10._0_8_ = uVar16;
        auVar10[0xc] = (char)(uVar25 >> 0x18);
        auVar11[8] = (char)(uVar25 >> 0x10);
        auVar11._0_8_ = uVar16;
        auVar11[9] = 0;
        auVar11._10_3_ = auVar10._10_3_;
        auVar18._5_8_ = 0;
        auVar18._0_5_ = auVar11._8_5_;
        uVar30 = (uint)uVar16;
        auVar12[4] = (char)(uVar25 >> 8);
        auVar12._0_4_ = uVar30;
        auVar12[5] = 0;
        auVar12._6_7_ = SUB137(auVar18 << 0x40,6);
        bVar6 = iVar63 < (int)uVar22;
        bVar7 = iVar66 < (int)uStack_14;
        bVar8 = iVar67 < (int)uStack_10;
        bVar9 = iVar68 < (int)uStack_c;
        iVar57 = auVar12._4_4_;
        iVar59 = auVar11._8_4_;
        uVar13 = auVar10._10_3_ >> 0x10;
        iVar63 = iVar63 + __LC1;
        iVar66 = iVar66 + _UNK_00101fb4;
        iVar67 = iVar67 + _UNK_00101fb8;
        iVar68 = iVar68 + _UNK_00101fbc;
        uVar51 = -(uint)((uVar25 & 0xff) == 0 && bVar6);
        uVar56 = -(uint)(iVar57 == 0 && bVar7);
        uVar58 = -(uint)(iVar59 == 0 && bVar8);
        uVar60 = -(uint)(uVar13 == 0 && bVar9);
        uVar35 = -(uint)(local_28 == uVar30 && bVar6);
        uVar45 = -(uint)(iStack_24 == iVar57 && bVar7);
        uVar47 = -(uint)(iStack_20 == iVar59 && bVar8);
        uVar49 = -(uint)(uStack_1c == uVar13 && bVar9);
        uVar24 = -(uint)(uVar30 == __LC3 && bVar6);
        uVar29 = -(uint)(iVar57 == _UNK_00101fd4 && bVar7);
        uVar31 = -(uint)(iVar59 == _UNK_00101fd8 && bVar8);
        uVar33 = -(uint)(uVar13 == _UNK_00101fdc && bVar9);
        piVar1 = param_2 + lVar21 * 4;
        uVar25 = *(uint *)piVar1;
        uVar30 = *(uint *)(piVar1 + 4);
        uVar32 = *(uint *)(piVar1 + 8);
        uVar34 = *(uint *)(piVar1 + 0xc);
        local_48._0_4_ = (float)(uVar51 & uVar25) + (float)local_48._0_4_;
        local_48._4_4_ = (float)(uVar56 & uVar30) + (float)local_48._4_4_;
        fStack_40 = (float)(uVar58 & uVar32) + fStack_40;
        fStack_3c = (float)(uVar60 & uVar34) + fStack_3c;
        local_58._0_4_ = (float)(uVar35 & uVar25) + (float)local_58._0_4_;
        local_58._4_4_ = (float)(uVar45 & uVar30) + (float)local_58._4_4_;
        fStack_50 = (float)(uVar47 & uVar32) + fStack_50;
        fStack_4c = (float)(uVar49 & uVar34) + fStack_4c;
        fVar105 = fVar105 + (float)(uVar25 & uVar24);
        fVar106 = fVar106 + (float)(uVar30 & uVar29);
        fVar107 = fVar107 + (float)(uVar32 & uVar31);
        fVar108 = fVar108 + (float)(uVar34 & uVar33);
        piVar1 = param_2 + lVar21 * 4 + 0x370;
        uVar25 = *(uint *)piVar1;
        uVar30 = *(uint *)(piVar1 + 4);
        uVar32 = *(uint *)(piVar1 + 8);
        uVar34 = *(uint *)(piVar1 + 0xc);
        fVar97 = fVar97 + (float)(uVar51 & uVar25);
        fVar98 = fVar98 + (float)(uVar56 & uVar30);
        fVar99 = fVar99 + (float)(uVar58 & uVar32);
        fVar100 = fVar100 + (float)(uVar60 & uVar34);
        fVar81 = fVar81 + (float)(uVar25 & uVar24);
        fVar82 = fVar82 + (float)(uVar30 & uVar29);
        fVar83 = fVar83 + (float)(uVar32 & uVar31);
        fVar84 = fVar84 + (float)(uVar34 & uVar33);
        piVar1 = param_2 + lVar21 * 4 + 0x6e0;
        uVar36 = *(uint *)piVar1;
        uVar46 = *(uint *)(piVar1 + 4);
        uVar48 = *(uint *)(piVar1 + 8);
        uVar50 = *(uint *)(piVar1 + 0xc);
        fVar89 = fVar89 + (float)(uVar35 & uVar25);
        fVar90 = fVar90 + (float)(uVar45 & uVar30);
        fVar91 = fVar91 + (float)(uVar47 & uVar32);
        fVar92 = fVar92 + (float)(uVar49 & uVar34);
        fVar77 = fVar77 + (float)(uVar51 & uVar36);
        fVar78 = fVar78 + (float)(uVar56 & uVar46);
        fVar79 = fVar79 + (float)(uVar58 & uVar48);
        fVar80 = fVar80 + (float)(uVar60 & uVar50);
        fVar69 = fVar69 + (float)(uVar36 & uVar24);
        fVar70 = fVar70 + (float)(uVar46 & uVar29);
        fVar71 = fVar71 + (float)(uVar48 & uVar31);
        fVar72 = fVar72 + (float)(uVar50 & uVar33);
        piVar1 = param_2 + lVar21 * 4 + 0xa50;
        uVar25 = *(uint *)piVar1;
        uVar30 = *(uint *)(piVar1 + 4);
        uVar32 = *(uint *)(piVar1 + 8);
        uVar34 = *(uint *)(piVar1 + 0xc);
        lVar21 = lVar21 + 4;
        fVar73 = fVar73 + (float)(uVar35 & uVar36);
        fVar74 = fVar74 + (float)(uVar45 & uVar46);
        fVar75 = fVar75 + (float)(uVar47 & uVar48);
        fVar76 = fVar76 + (float)(uVar49 & uVar50);
        fVar101 = fVar101 + (float)(uVar51 & uVar25);
        fVar102 = fVar102 + (float)(uVar56 & uVar30);
        fVar103 = fVar103 + (float)(uVar58 & uVar32);
        fVar104 = fVar104 + (float)(uVar60 & uVar34);
        fVar93 = fVar93 + (float)(uVar35 & uVar25);
        fVar94 = fVar94 + (float)(uVar45 & uVar30);
        fVar95 = fVar95 + (float)(uVar47 & uVar32);
        fVar96 = fVar96 + (float)(uVar49 & uVar34);
        fVar85 = fVar85 + (float)(uVar24 & uVar25);
        fVar86 = fVar86 + (float)(uVar29 & uVar30);
        fVar87 = fVar87 + (float)(uVar31 & uVar32);
        fVar88 = fVar88 + (float)(uVar33 & uVar34);
      } while ((uint)lVar21 < uVar23);
      fVar52 = (float)uVar23;
      fVar101 = fVar101 + fVar103 + fVar102 + fVar104;
      fVar77 = fVar77 + fVar79 + fVar78 + fVar80;
      auVar37._12_4_ = fVar101;
      auVar37._8_4_ = fVar77;
      fVar79 = fVar97 + fVar99 + fVar98 + fVar100;
      auVar37._0_4_ = (float)local_48._0_4_ + fStack_40 + (float)local_48._4_4_ + fStack_3c;
      auVar37._4_4_ = fVar79;
      fVar78 = fVar93 + fVar95 + fVar94 + fVar96;
      fVar73 = fVar73 + fVar75 + fVar74 + fVar76;
      auVar26._12_4_ = fVar78;
      auVar26._8_4_ = fVar73;
      fVar75 = fVar89 + fVar91 + fVar90 + fVar92;
      auVar26._0_4_ = fStack_50 + (float)local_58._0_4_ + fStack_4c + (float)local_58._4_4_;
      auVar26._4_4_ = fVar75;
      fVar74 = fVar85 + fVar87 + fVar86 + fVar88;
      fVar69 = fVar69 + fVar71 + fVar70 + fVar72;
      auVar64._12_4_ = fVar74;
      auVar64._8_4_ = fVar69;
      fVar70 = fVar81 + fVar83 + fVar82 + fVar84;
      auVar64._0_4_ = fVar105 + fVar107 + fVar106 + fVar108;
      auVar61._0_4_ = (float)(byte)param_1[4];
      auVar64._4_4_ = fVar70;
      auVar61._4_4_ = auVar61._0_4_;
      auVar61._8_4_ = auVar61._0_4_;
      auVar61._12_4_ = auVar61._0_4_;
      auVar38 = divps(auVar37,auVar61);
      auVar53._0_4_ =
           ((fVar52 * *(float *)(param_2 + 0xde0) - auVar37._0_4_) - auVar26._0_4_) - auVar64._0_4_;
      auVar53._4_4_ = ((fVar52 * *(float *)(param_2 + 0xde4) - fVar79) - fVar75) - fVar70;
      auVar53._8_4_ = ((fVar52 * *(float *)(param_2 + 0xde8) - fVar77) - fVar73) - fVar69;
      auVar53._12_4_ = ((fVar52 * *(float *)(param_2 + 0xdec) - fVar101) - fVar78) - fVar74;
      *(undefined1 (*) [16])param_3 = auVar38;
      auVar39._0_4_ = (float)(byte)param_1[5];
      auVar39._4_4_ = auVar39._0_4_;
      auVar39._8_4_ = auVar39._0_4_;
      auVar39._12_4_ = auVar39._0_4_;
      auVar38 = divps(auVar26,auVar39);
      *(undefined1 (*) [16])(param_3 + 0x10) = auVar38;
      auVar27._0_4_ = (float)(byte)param_1[6];
      auVar27._4_4_ = auVar27._0_4_;
      auVar27._8_4_ = auVar27._0_4_;
      auVar27._12_4_ = auVar27._0_4_;
      auVar38 = divps(auVar64,auVar27);
      *(undefined1 (*) [16])(param_3 + 0x20) = auVar38;
      auVar40._0_4_ = (float)(byte)param_1[7];
      auVar40._4_4_ = auVar40._0_4_;
      auVar40._8_4_ = auVar40._0_4_;
      auVar40._12_4_ = auVar40._0_4_;
      auVar38 = divps(auVar53,auVar40);
      *(undefined1 (*) [16])(param_3 + 0x30) = auVar38;
      return;
    }
    fVar77 = 0.0;
    fVar78 = 0.0;
    fVar79 = 0.0;
    fVar80 = 0.0;
    fVar69 = 0.0;
    fVar70 = 0.0;
    fVar71 = 0.0;
    fVar72 = 0.0;
    fVar81 = 0.0;
    fVar82 = 0.0;
    fVar83 = 0.0;
    fVar84 = 0.0;
    fVar89 = 0.0;
    fVar90 = 0.0;
    fVar91 = 0.0;
    fVar92 = 0.0;
    fVar73 = 0.0;
    fVar74 = 0.0;
    fVar75 = 0.0;
    fVar76 = 0.0;
    fVar107 = 0.0;
    fVar87 = 0.0;
    fVar108 = 0.0;
    fVar88 = 0.0;
    fVar105 = 0.0;
    fVar85 = 0.0;
    fVar106 = 0.0;
    fVar86 = 0.0;
    fVar93 = 0.0;
    fVar94 = 0.0;
    fVar95 = 0.0;
    fVar96 = 0.0;
    iVar63 = __LC0;
    iVar66 = _UNK_00101fa4;
    iVar67 = _UNK_00101fa8;
    iVar68 = _UNK_00101fac;
    do {
      uVar25 = *(uint *)(param_1 + lVar21 + 0x10);
      bVar6 = iVar63 < (int)uVar22;
      bVar7 = iVar66 < (int)uVar22;
      bVar8 = iVar67 < (int)uVar22;
      bVar9 = iVar68 < (int)uVar22;
      iVar63 = iVar63 + __LC1;
      iVar66 = iVar66 + _UNK_00101fb4;
      iVar67 = iVar67 + _UNK_00101fb8;
      iVar68 = iVar68 + _UNK_00101fbc;
      auVar15[0xc] = (char)(uVar25 >> 0x18);
      auVar15._0_12_ = ZEXT712(0);
      uVar19 = CONCAT32(auVar15._10_3_,(ushort)(byte)(uVar25 >> 0x10));
      auVar20._5_8_ = 0;
      auVar20._0_5_ = uVar19;
      iVar57 = (int)CONCAT72(SUB137(auVar20 << 0x40,6),(ushort)(byte)(uVar25 >> 8));
      iVar59 = (int)uVar19;
      uVar13 = auVar15._10_3_ >> 0x10;
      uVar36 = -(uint)((uVar25 & 0xff) == 0 && bVar6);
      uVar46 = -(uint)(iVar57 == 0 && bVar7);
      uVar48 = -(uint)(iVar59 == 0 && bVar8);
      uVar50 = -(uint)(uVar13 == 0 && bVar9);
      uVar25 = -(uint)((uVar25 & 0xff) == local_28 && bVar6);
      uVar30 = -(uint)(iVar57 == iStack_24 && bVar7);
      uVar32 = -(uint)(iVar59 == iStack_20 && bVar8);
      uVar34 = -(uint)(uVar13 == uStack_1c && bVar9);
      piVar1 = param_2 + lVar21 * 4;
      fVar73 = fVar73 + (float)(*(uint *)piVar1 & uVar36);
      fVar74 = fVar74 + (float)(*(uint *)(piVar1 + 4) & uVar46);
      fVar75 = fVar75 + (float)(*(uint *)(piVar1 + 8) & uVar48);
      fVar76 = fVar76 + (float)(*(uint *)(piVar1 + 0xc) & uVar50);
      piVar1 = param_2 + lVar21 * 4;
      fVar69 = fVar69 + (float)(*(uint *)piVar1 & uVar25);
      fVar70 = fVar70 + (float)(*(uint *)(piVar1 + 4) & uVar30);
      fVar71 = fVar71 + (float)(*(uint *)(piVar1 + 8) & uVar32);
      fVar72 = fVar72 + (float)(*(uint *)(piVar1 + 0xc) & uVar34);
      piVar1 = param_2 + lVar21 * 4 + 0x370;
      fVar89 = fVar89 + (float)(*(uint *)piVar1 & uVar36);
      fVar90 = fVar90 + (float)(*(uint *)(piVar1 + 4) & uVar46);
      fVar91 = fVar91 + (float)(*(uint *)(piVar1 + 8) & uVar48);
      fVar92 = fVar92 + (float)(*(uint *)(piVar1 + 0xc) & uVar50);
      piVar1 = param_2 + lVar21 * 4 + 0x370;
      fVar105 = fVar105 + (float)(*(uint *)piVar1 & uVar25);
      fVar85 = fVar85 + (float)(*(uint *)(piVar1 + 4) & uVar30);
      fVar106 = fVar106 + (float)(*(uint *)(piVar1 + 8) & uVar32);
      fVar86 = fVar86 + (float)(*(uint *)(piVar1 + 0xc) & uVar34);
      piVar1 = param_2 + lVar21 * 4 + 0x6e0;
      piVar2 = param_2 + lVar21 * 4 + 0xa50;
      fVar81 = fVar81 + (float)(*(uint *)piVar1 & uVar36);
      fVar82 = fVar82 + (float)(*(uint *)(piVar1 + 4) & uVar46);
      fVar83 = fVar83 + (float)(*(uint *)(piVar1 + 8) & uVar48);
      fVar84 = fVar84 + (float)(*(uint *)(piVar1 + 0xc) & uVar50);
      piVar1 = param_2 + lVar21 * 4 + 0x6e0;
      fVar93 = fVar93 + (float)(uVar36 & *(uint *)piVar2);
      fVar94 = fVar94 + (float)(uVar46 & *(uint *)(piVar2 + 4));
      fVar95 = fVar95 + (float)(uVar48 & *(uint *)(piVar2 + 8));
      fVar96 = fVar96 + (float)(uVar50 & *(uint *)(piVar2 + 0xc));
      piVar2 = param_2 + lVar21 * 4 + 0xa50;
      lVar21 = lVar21 + 4;
      fVar77 = fVar77 + (float)(*(uint *)piVar1 & uVar25);
      fVar78 = fVar78 + (float)(*(uint *)(piVar1 + 4) & uVar30);
      fVar79 = fVar79 + (float)(*(uint *)(piVar1 + 8) & uVar32);
      fVar80 = fVar80 + (float)(*(uint *)(piVar1 + 0xc) & uVar34);
      fVar107 = fVar107 + (float)(uVar25 & *(uint *)piVar2);
      fVar87 = fVar87 + (float)(uVar30 & *(uint *)(piVar2 + 4));
      fVar108 = fVar108 + (float)(uVar32 & *(uint *)(piVar2 + 8));
      fVar88 = fVar88 + (float)(uVar34 & *(uint *)(piVar2 + 0xc));
    } while ((uint)lVar21 < uVar23);
    fVar97 = (float)uVar23;
    fVar93 = fVar93 + fVar95 + fVar94 + fVar96;
    fVar81 = fVar81 + fVar83 + fVar82 + fVar84;
    auVar65._12_4_ = fVar93;
    auVar65._8_4_ = fVar81;
    fVar82 = fVar89 + fVar91 + fVar90 + fVar92;
    auVar65._0_4_ = fVar73 + fVar75 + fVar74 + fVar76;
    auVar65._4_4_ = fVar82;
    fVar75 = fVar107 + fVar108 + fVar87 + fVar88;
    fVar73 = fVar77 + fVar79 + fVar78 + fVar80;
    auVar62._12_4_ = fVar75;
    auVar62._8_4_ = fVar73;
    fVar74 = fVar105 + fVar106 + fVar85 + fVar86;
    auVar62._0_4_ = fVar69 + fVar71 + fVar70 + fVar72;
    auVar42._0_4_ = (float)(byte)param_1[4];
    auVar62._4_4_ = fVar74;
    auVar42._4_4_ = auVar42._0_4_;
    auVar42._8_4_ = auVar42._0_4_;
    auVar42._12_4_ = auVar42._0_4_;
    auVar38 = divps(auVar65,auVar42);
    auVar28._0_4_ = (fVar97 * *(float *)(param_2 + 0xde0) - auVar65._0_4_) - auVar62._0_4_;
    auVar28._4_4_ = (fVar97 * *(float *)(param_2 + 0xde4) - fVar82) - fVar74;
    auVar28._8_4_ = (fVar97 * *(float *)(param_2 + 0xde8) - fVar81) - fVar73;
    auVar28._12_4_ = (fVar97 * *(float *)(param_2 + 0xdec) - fVar93) - fVar75;
    *(undefined1 (*) [16])param_3 = auVar38;
    auVar43._0_4_ = (float)(byte)param_1[5];
    auVar43._4_4_ = auVar43._0_4_;
    auVar43._8_4_ = auVar43._0_4_;
    auVar43._12_4_ = auVar43._0_4_;
    auVar38 = divps(auVar62,auVar43);
    *(undefined1 (*) [16])(param_3 + 0x10) = auVar38;
    auVar44._0_4_ = (float)(byte)param_1[6];
    auVar44._4_4_ = auVar44._0_4_;
    auVar44._8_4_ = auVar44._0_4_;
    auVar44._12_4_ = auVar44._0_4_;
    auVar38 = divps(auVar28,auVar44);
    *(undefined1 (*) [16])(param_3 + 0x20) = auVar38;
    return;
  }
  fVar81 = 0.0;
  fVar82 = 0.0;
  fVar83 = 0.0;
  fVar84 = 0.0;
  lVar21 = 0;
  fVar77 = 0.0;
  fVar78 = 0.0;
  fVar79 = 0.0;
  fVar80 = 0.0;
  fVar73 = 0.0;
  fVar74 = 0.0;
  fVar75 = 0.0;
  fVar76 = 0.0;
  fVar69 = 0.0;
  fVar70 = 0.0;
  fVar71 = 0.0;
  fVar72 = 0.0;
  iVar63 = __LC0;
  iVar66 = _UNK_00101fa4;
  iVar67 = _UNK_00101fa8;
  iVar68 = _UNK_00101fac;
  do {
    uVar5 = *(undefined4 *)(param_1 + lVar21 + 0x10);
    bVar6 = iVar63 < (int)uVar22;
    bVar7 = iVar66 < (int)uVar22;
    bVar8 = iVar67 < (int)uVar22;
    bVar9 = iVar68 < (int)uVar22;
    iVar63 = iVar63 + __LC1;
    iVar66 = iVar66 + _UNK_00101fb4;
    iVar67 = iVar67 + _UNK_00101fb8;
    iVar68 = iVar68 + _UNK_00101fbc;
    auVar14[0xc] = (char)((uint)uVar5 >> 0x18);
    auVar14._0_12_ = ZEXT712(0);
    uVar25 = -(uint)(bVar6 && (char)uVar5 == '\0');
    uVar30 = -(uint)(bVar7 && (char)((uint)uVar5 >> 8) == '\0');
    uVar32 = -(uint)(bVar8 && (int)CONCAT32(auVar14._10_3_,(ushort)(byte)((uint)uVar5 >> 0x10)) == 0
                    );
    uVar34 = -(uint)(bVar9 && (uint3)(auVar14._10_3_ >> 0x10) == 0);
    piVar1 = param_2 + lVar21 * 4;
    fVar69 = fVar69 + (float)(*(uint *)piVar1 & uVar25);
    fVar70 = fVar70 + (float)(*(uint *)(piVar1 + 4) & uVar30);
    fVar71 = fVar71 + (float)(*(uint *)(piVar1 + 8) & uVar32);
    fVar72 = fVar72 + (float)(*(uint *)(piVar1 + 0xc) & uVar34);
    piVar1 = param_2 + lVar21 * 4 + 0x370;
    fVar77 = fVar77 + (float)(*(uint *)piVar1 & uVar25);
    fVar78 = fVar78 + (float)(*(uint *)(piVar1 + 4) & uVar30);
    fVar79 = fVar79 + (float)(*(uint *)(piVar1 + 8) & uVar32);
    fVar80 = fVar80 + (float)(*(uint *)(piVar1 + 0xc) & uVar34);
    piVar1 = param_2 + lVar21 * 4 + 0x6e0;
    piVar2 = param_2 + lVar21 * 4 + 0xa50;
    lVar21 = lVar21 + 4;
    fVar73 = fVar73 + (float)(*(uint *)piVar1 & uVar25);
    fVar74 = fVar74 + (float)(*(uint *)(piVar1 + 4) & uVar30);
    fVar75 = fVar75 + (float)(*(uint *)(piVar1 + 8) & uVar32);
    fVar76 = fVar76 + (float)(*(uint *)(piVar1 + 0xc) & uVar34);
    fVar81 = fVar81 + (float)(uVar25 & *(uint *)piVar2);
    fVar82 = fVar82 + (float)(uVar30 & *(uint *)(piVar2 + 4));
    fVar83 = fVar83 + (float)(uVar32 & *(uint *)(piVar2 + 8));
    fVar84 = fVar84 + (float)(uVar34 & *(uint *)(piVar2 + 0xc));
  } while ((uint)lVar21 < uVar22);
  fVar105 = (float)uVar23;
  fVar81 = fVar81 + fVar83 + fVar82 + fVar84;
  fVar73 = fVar73 + fVar75 + fVar74 + fVar76;
  auVar54._12_4_ = fVar81;
  auVar54._8_4_ = fVar73;
  fVar74 = fVar77 + fVar79 + fVar78 + fVar80;
  auVar54._0_4_ = fVar69 + fVar71 + fVar70 + fVar72;
  auVar55._0_4_ = (float)(byte)param_1[4];
  auVar54._4_4_ = fVar74;
  auVar38._0_4_ = fVar105 * *(float *)(param_2 + 0xde0) - auVar54._0_4_;
  auVar38._4_4_ = fVar105 * *(float *)(param_2 + 0xde4) - fVar74;
  auVar38._8_4_ = fVar105 * *(float *)(param_2 + 0xde8) - fVar73;
  auVar38._12_4_ = fVar105 * *(float *)(param_2 + 0xdec) - fVar81;
  auVar55._4_4_ = auVar55._0_4_;
  auVar55._8_4_ = auVar55._0_4_;
  auVar55._12_4_ = auVar55._0_4_;
  auVar55 = divps(auVar54,auVar55);
  *(undefined1 (*) [16])param_3 = auVar55;
  auVar41._0_4_ = (float)(byte)param_1[5];
  auVar41._4_4_ = auVar41._0_4_;
  auVar41._8_4_ = auVar41._0_4_;
  auVar41._12_4_ = auVar41._0_4_;
  auVar38 = divps(auVar38,auVar41);
  *(undefined1 (*) [16])(param_3 + 0x10) = auVar38;
  return;
}



/* compute_avgs_and_dirs_4_comp(partition_info const&, image_block const&, partition_metrics*) */

void compute_avgs_and_dirs_4_comp
               (partition_info *param_1,image_block *param_2,partition_metrics *param_3)

{
  partition_info *ppVar1;
  image_block *piVar2;
  partition_info pVar3;
  undefined1 auVar4 [16];
  undefined1 auVar5 [16];
  long lVar6;
  vfloat4 *pvVar7;
  partition_info *ppVar8;
  long lVar9;
  uint uVar10;
  long in_FS_OFFSET;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  uint uVar17;
  uint uVar18;
  float fVar19;
  float fVar20;
  float fVar21;
  float fVar24;
  float fVar25;
  float fVar26;
  undefined1 auVar22 [16];
  undefined1 auVar23 [16];
  float fVar27;
  float fVar29;
  float fVar30;
  float fVar31;
  undefined1 auVar28 [16];
  float fVar32;
  float fVar33;
  float fVar34;
  float fVar35;
  float fVar36;
  float fVar37;
  float fVar38;
  float fVar39;
  float fVar40;
  float fVar42;
  float fVar43;
  float fVar44;
  undefined1 auVar41 [16];
  float fVar45;
  float fVar46;
  vfloat4 local_58 [4];
  float afStack_54 [17];
  long local_10;
  
  pvVar7 = local_58;
  uVar10 = (uint)*(ushort *)param_1;
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  compute_partition_averages_rgba(param_1,param_2,local_58);
  lVar9 = 0;
  ppVar8 = param_1 + 0xf0;
  do {
    fVar20 = *(float *)pvVar7;
    fVar21 = *(float *)((long)pvVar7 + 4);
    fVar45 = *(float *)((long)pvVar7 + 8);
    fVar46 = *(float *)((long)pvVar7 + 0xc);
    fVar36 = 0.0;
    fVar37 = 0.0;
    fVar38 = 0.0;
    fVar39 = 0.0;
    pVar3 = param_1[lVar9 + 4];
    lVar6 = 0;
    fVar27 = 0.0;
    fVar29 = 0.0;
    fVar30 = 0.0;
    fVar31 = 0.0;
    fVar32 = 0.0;
    fVar33 = 0.0;
    fVar34 = 0.0;
    fVar35 = 0.0;
    fVar40 = 0.0;
    fVar42 = 0.0;
    fVar43 = 0.0;
    fVar44 = 0.0;
    *(float *)param_3 = fVar20;
    *(float *)(param_3 + 4) = fVar21;
    *(float *)(param_3 + 8) = fVar45;
    *(float *)(param_3 + 0xc) = fVar46;
    do {
      ppVar1 = ppVar8 + lVar6;
      lVar6 = lVar6 + 1;
      piVar2 = param_2 + (ulong)(byte)*ppVar1 * 4;
      fVar19 = *(float *)piVar2 - fVar20;
      fVar24 = *(float *)(piVar2 + 0x370) - fVar21;
      fVar25 = *(float *)(piVar2 + 0x6e0) - fVar45;
      fVar26 = *(float *)(piVar2 + 0xa50) - fVar46;
      fVar40 = fVar40 + (float)(-(uint)(0.0 < fVar19) & (uint)fVar19);
      fVar42 = fVar42 + (float)(-(uint)(0.0 < fVar19) & (uint)fVar24);
      fVar43 = fVar43 + (float)(-(uint)(0.0 < fVar19) & (uint)fVar25);
      fVar44 = fVar44 + (float)(-(uint)(0.0 < fVar19) & (uint)fVar26);
      fVar32 = fVar32 + (float)(-(uint)(0.0 < fVar24) & (uint)fVar19);
      fVar33 = fVar33 + (float)(-(uint)(0.0 < fVar24) & (uint)fVar24);
      fVar34 = fVar34 + (float)(-(uint)(0.0 < fVar24) & (uint)fVar25);
      fVar35 = fVar35 + (float)(-(uint)(0.0 < fVar24) & (uint)fVar26);
      fVar27 = fVar27 + (float)(-(uint)(0.0 < fVar25) & (uint)fVar19);
      fVar29 = fVar29 + (float)(-(uint)(0.0 < fVar25) & (uint)fVar24);
      fVar30 = fVar30 + (float)(-(uint)(0.0 < fVar25) & (uint)fVar25);
      fVar31 = fVar31 + (float)(-(uint)(0.0 < fVar25) & (uint)fVar26);
      fVar36 = fVar36 + (float)((uint)fVar19 & -(uint)(0.0 < fVar26));
      fVar37 = fVar37 + (float)((uint)fVar24 & -(uint)(0.0 < fVar26));
      fVar38 = fVar38 + (float)((uint)fVar25 & -(uint)(0.0 < fVar26));
      fVar39 = fVar39 + (float)((uint)fVar26 & -(uint)(0.0 < fVar26));
    } while ((uint)lVar6 < (uint)(byte)pVar3);
    lVar9 = lVar9 + 1;
    pvVar7 = (vfloat4 *)((long)pvVar7 + 0x10);
    ppVar8 = ppVar8 + 0xd8;
    fVar45 = fVar40 * fVar40 + fVar43 * fVar43 + fVar42 * fVar42 + fVar44 * fVar44;
    fVar20 = fVar32 * fVar32 + fVar34 * fVar34 + fVar33 * fVar33 + fVar35 * fVar35;
    fVar21 = fVar27 * fVar27 + fVar30 * fVar30 + fVar29 * fVar29 + fVar31 * fVar31;
    fVar46 = fVar36 * fVar36 + fVar38 * fVar38 + fVar37 * fVar37 + fVar39 * fVar39;
    uVar11 = -(uint)(fVar45 < fVar20);
    uVar13 = -(uint)(fVar45 < fVar20);
    uVar15 = -(uint)(fVar45 < fVar20);
    uVar17 = -(uint)(fVar45 < fVar20);
    auVar22._0_4_ = uVar11 & (uint)fVar20;
    auVar22._4_4_ = uVar13 & (uint)fVar20;
    auVar22._8_4_ = uVar15 & (uint)fVar20;
    auVar22._12_4_ = uVar17 & (uint)fVar20;
    auVar41._0_4_ = ~uVar11 & (uint)fVar45;
    auVar41._4_4_ = ~uVar13 & (uint)fVar45;
    auVar41._8_4_ = ~uVar15 & (uint)fVar45;
    auVar41._12_4_ = ~uVar17 & (uint)fVar45;
    auVar41 = auVar41 | auVar22;
    uVar12 = -(uint)(auVar41._0_4_ < fVar21);
    uVar14 = -(uint)(auVar41._4_4_ < fVar21);
    uVar16 = -(uint)(auVar41._8_4_ < fVar21);
    uVar18 = -(uint)(auVar41._12_4_ < fVar21);
    auVar28._0_4_ = (uint)fVar27 & uVar12;
    auVar28._4_4_ = (uint)fVar29 & uVar14;
    auVar28._8_4_ = (uint)fVar30 & uVar16;
    auVar28._12_4_ = (uint)fVar31 & uVar18;
    auVar5._4_4_ = ~uVar14 & ((uint)fVar33 & uVar13 | ~uVar13 & (uint)fVar42);
    auVar5._0_4_ = ~uVar12 & ((uint)fVar32 & uVar11 | ~uVar11 & (uint)fVar40);
    auVar5._8_4_ = ~uVar16 & ((uint)fVar34 & uVar15 | ~uVar15 & (uint)fVar43);
    auVar5._12_4_ = ~uVar18 & ((uint)fVar35 & uVar17 | ~uVar17 & (uint)fVar44);
    auVar28 = auVar28 | auVar5;
    uVar11 = -(uint)((float)(uVar12 & (uint)fVar21 | ~uVar12 & (uint)auVar41._0_4_) < fVar46);
    uVar12 = -(uint)((float)(uVar14 & (uint)fVar21 | ~uVar14 & (uint)auVar41._4_4_) < fVar46);
    uVar13 = -(uint)((float)(uVar16 & (uint)fVar21 | ~uVar16 & (uint)auVar41._8_4_) < fVar46);
    uVar14 = -(uint)((float)(uVar18 & (uint)fVar21 | ~uVar18 & (uint)auVar41._12_4_) < fVar46);
    auVar23._0_4_ = uVar11 & (uint)fVar36;
    auVar23._4_4_ = uVar12 & (uint)fVar37;
    auVar23._8_4_ = uVar13 & (uint)fVar38;
    auVar23._12_4_ = uVar14 & (uint)fVar39;
    auVar4._4_4_ = ~uVar12 & auVar28._4_4_;
    auVar4._0_4_ = ~uVar11 & auVar28._0_4_;
    auVar4._8_4_ = ~uVar13 & auVar28._8_4_;
    auVar4._12_4_ = ~uVar14 & auVar28._12_4_;
    *(undefined1 (*) [16])(param_3 + 0x10) = auVar23 | auVar4;
    param_3 = param_3 + 0x20;
  } while ((int)lVar9 < (int)uVar10);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* compute_avgs_and_dirs_3_comp(partition_info const&, image_block const&, unsigned int,
   partition_metrics*) */

void compute_avgs_and_dirs_3_comp
               (partition_info *param_1,image_block *param_2,uint param_3,partition_metrics *param_4
               )

{
  partition_info pVar1;
  ushort uVar2;
  undefined1 auVar3 [16];
  undefined1 auVar4 [16];
  float fVar5;
  undefined1 auVar6 [16];
  undefined1 auVar7 [12];
  long lVar8;
  partition_info *ppVar9;
  ulong uVar10;
  long lVar11;
  vfloat4 *pvVar12;
  image_block *piVar13;
  image_block *piVar14;
  image_block *piVar15;
  long in_FS_OFFSET;
  uint uVar16;
  uint uVar17;
  uint uVar18;
  uint uVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar24;
  float fVar25;
  float fVar26;
  undefined1 auVar23 [16];
  float fVar27;
  float fVar29;
  float fVar30;
  float fVar31;
  undefined1 auVar28 [16];
  float fVar32;
  float fVar34;
  float fVar35;
  undefined1 auVar33 [16];
  float fVar36;
  float fVar37;
  float fVar38;
  float fVar39;
  float fVar40;
  float fVar41;
  undefined8 local_78;
  undefined8 uStack_70;
  vfloat4 local_68 [4];
  undefined4 auStack_64 [6];
  undefined4 uStack_4c;
  undefined4 uStack_3c;
  undefined4 local_38;
  undefined4 uStack_34;
  undefined4 uStack_30;
  undefined4 uStack_2c;
  long local_20;
  
  piVar13 = param_2 + 0x6e0;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  pvVar12 = local_68;
  compute_partition_averages_rgba(param_1,param_2,pvVar12);
  piVar14 = param_2 + 0x370;
  if (param_3 == 0) {
    piVar15 = param_2 + 0xa50;
    auStack_64[2] = 0;
    uStack_4c = 0;
    uStack_3c = 0;
    auVar7._4_4_ = uStack_34;
    auVar7._0_4_ = local_38;
    auVar7._8_4_ = uStack_30;
    auVar6._12_4_ = uStack_2c;
    auVar6._0_12_ = auVar7;
    auVar33._0_12_ = auVar6._4_12_;
    auVar33._12_4_ = local_38;
    uStack_70 = auVar33._8_8_;
    local_78 = auVar7._4_8_;
    uStack_70 = uStack_70 & 0xffffffff;
    param_2 = piVar14;
    piVar14 = piVar13;
  }
  else if (param_3 == 1) {
    piVar15 = param_2 + 0xa50;
    auStack_64[2] = 0;
    local_78 = CONCAT44(uStack_30,local_38);
    uStack_70._0_4_ = uStack_2c;
    uStack_70._4_4_ = local_38;
    uStack_4c = 0;
    uStack_70 = uStack_70 & 0xffffffff;
    uStack_3c = 0;
    piVar14 = piVar13;
  }
  else if (param_3 == 2) {
    piVar15 = param_2 + 0xa50;
    auStack_64[2] = 0;
    local_78 = CONCAT44(uStack_34,local_38);
    uStack_70._0_4_ = uStack_2c;
    uStack_70._4_4_ = local_38;
    uStack_4c = 0;
    uStack_70 = uStack_70 & 0xffffffff;
    uStack_3c = 0;
  }
  else {
    auStack_64[2] = 0;
    uStack_4c = 0;
    local_78 = CONCAT44(uStack_34,local_38);
    uStack_70._0_4_ = uStack_30;
    uStack_70._4_4_ = local_38;
    uStack_3c = 0;
    uStack_70 = uStack_70 & 0xffffffff;
    piVar15 = piVar13;
  }
  uStack_3c = 0;
  uStack_4c = 0;
  auStack_64[2] = 0;
  uVar2 = *(ushort *)param_1;
  local_38 = (undefined4)local_78;
  uStack_34 = (undefined4)((ulong)local_78 >> 0x20);
  uStack_30 = (undefined4)uStack_70;
  uStack_2c = (undefined4)(uStack_70 >> 0x20);
  uStack_2c = 0;
  lVar11 = 0;
  ppVar9 = param_1 + 0xf0;
  do {
    fVar21 = *(float *)pvVar12;
    fVar22 = *(float *)(pvVar12 + 4);
    fVar41 = *(float *)(pvVar12 + 8);
    fVar5 = *(float *)(pvVar12 + 0xc);
    fVar32 = 0.0;
    fVar34 = 0.0;
    fVar35 = 0.0;
    fVar36 = 0.0;
    pVar1 = param_1[lVar11 + 4];
    lVar8 = 0;
    fVar37 = 0.0;
    fVar38 = 0.0;
    fVar39 = 0.0;
    fVar40 = 0.0;
    fVar27 = 0.0;
    fVar29 = 0.0;
    fVar30 = 0.0;
    fVar31 = 0.0;
    *(float *)param_4 = fVar21;
    *(float *)(param_4 + 4) = fVar22;
    *(float *)(param_4 + 8) = fVar41;
    *(float *)(param_4 + 0xc) = fVar5;
    do {
      uVar10 = (ulong)(byte)ppVar9[lVar8];
      lVar8 = lVar8 + 1;
      fVar20 = *(float *)(param_2 + uVar10 * 4) - fVar21;
      fVar24 = *(float *)(piVar14 + uVar10 * 4) - fVar22;
      fVar25 = *(float *)(piVar15 + uVar10 * 4) - fVar41;
      fVar26 = 0.0 - fVar5;
      fVar37 = fVar37 + (float)(-(uint)(0.0 < fVar20) & (uint)fVar20);
      fVar38 = fVar38 + (float)(-(uint)(0.0 < fVar20) & (uint)fVar24);
      fVar39 = fVar39 + (float)(-(uint)(0.0 < fVar20) & (uint)fVar25);
      fVar40 = fVar40 + (float)(-(uint)(0.0 < fVar20) & (uint)fVar26);
      fVar27 = fVar27 + (float)(-(uint)(0.0 < fVar24) & (uint)fVar20);
      fVar29 = fVar29 + (float)(-(uint)(0.0 < fVar24) & (uint)fVar24);
      fVar30 = fVar30 + (float)(-(uint)(0.0 < fVar24) & (uint)fVar25);
      fVar31 = fVar31 + (float)(-(uint)(0.0 < fVar24) & (uint)fVar26);
      fVar32 = fVar32 + (float)((uint)fVar20 & -(uint)(0.0 < fVar25));
      fVar34 = fVar34 + (float)((uint)fVar24 & -(uint)(0.0 < fVar25));
      fVar35 = fVar35 + (float)((uint)fVar25 & -(uint)(0.0 < fVar25));
      fVar36 = fVar36 + (float)((uint)fVar26 & -(uint)(0.0 < fVar25));
    } while ((uint)lVar8 < (uint)(byte)pVar1);
    lVar11 = lVar11 + 1;
    pvVar12 = pvVar12 + 0x10;
    ppVar9 = ppVar9 + 0xd8;
    fVar21 = fVar37 * fVar37 + fVar39 * fVar39 + fVar38 * fVar38 + fVar40 * fVar40;
    fVar22 = fVar27 * fVar27 + fVar30 * fVar30 + fVar29 * fVar29 + fVar31 * fVar31;
    fVar41 = fVar32 * fVar32 + fVar35 * fVar35 + fVar34 * fVar34 + fVar36 * fVar36;
    uVar16 = -(uint)(fVar21 < fVar22);
    uVar17 = -(uint)(fVar21 < fVar22);
    uVar18 = -(uint)(fVar21 < fVar22);
    uVar19 = -(uint)(fVar21 < fVar22);
    auVar28._0_4_ = (uint)fVar27 & uVar16;
    auVar28._4_4_ = (uint)fVar29 & uVar17;
    auVar28._8_4_ = (uint)fVar30 & uVar18;
    auVar28._12_4_ = (uint)fVar31 & uVar19;
    auVar4._4_4_ = ~uVar17 & (uint)fVar38;
    auVar4._0_4_ = ~uVar16 & (uint)fVar37;
    auVar4._8_4_ = ~uVar18 & (uint)fVar39;
    auVar4._12_4_ = ~uVar19 & (uint)fVar40;
    auVar28 = auVar28 | auVar4;
    uVar16 = -(uint)((float)(uVar16 & (uint)fVar22 | ~uVar16 & (uint)fVar21) < fVar41);
    uVar17 = -(uint)((float)(uVar17 & (uint)fVar22 | ~uVar17 & (uint)fVar21) < fVar41);
    uVar18 = -(uint)((float)(uVar18 & (uint)fVar22 | ~uVar18 & (uint)fVar21) < fVar41);
    uVar19 = -(uint)((float)(uVar19 & (uint)fVar22 | ~uVar19 & (uint)fVar21) < fVar41);
    auVar23._0_4_ = uVar16 & (uint)fVar32;
    auVar23._4_4_ = uVar17 & (uint)fVar34;
    auVar23._8_4_ = uVar18 & (uint)fVar35;
    auVar23._12_4_ = uVar19 & (uint)fVar36;
    auVar3._4_4_ = ~uVar17 & auVar28._4_4_;
    auVar3._0_4_ = ~uVar16 & auVar28._0_4_;
    auVar3._8_4_ = ~uVar18 & auVar28._8_4_;
    auVar3._12_4_ = ~uVar19 & auVar28._12_4_;
    *(undefined1 (*) [16])(param_4 + 0x10) = auVar23 | auVar3;
    param_4 = param_4 + 0x20;
  } while ((uint)lVar11 < (uint)uVar2);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* compute_avgs_and_dirs_3_comp_rgb(partition_info const&, image_block const&, partition_metrics*)
    */

void compute_avgs_and_dirs_3_comp_rgb
               (partition_info *param_1,image_block *param_2,partition_metrics *param_3)

{
  image_block *piVar1;
  partition_info *ppVar2;
  image_block *piVar3;
  partition_info pVar4;
  ushort uVar5;
  undefined4 uVar6;
  bool bVar7;
  bool bVar8;
  bool bVar9;
  bool bVar10;
  undefined1 auVar11 [13];
  undefined1 auVar12 [13];
  undefined1 auVar13 [13];
  uint3 uVar14;
  undefined1 auVar15 [13];
  undefined1 auVar16 [13];
  ulong uVar17;
  undefined1 auVar18 [13];
  uint5 uVar19;
  undefined1 auVar20 [13];
  long lVar21;
  long lVar22;
  float *pfVar23;
  partition_info *ppVar24;
  long in_FS_OFFSET;
  uint uVar25;
  uint uVar26;
  uint uVar27;
  uint uVar28;
  uint uVar29;
  float fVar30;
  float fVar31;
  float fVar32;
  uint uVar35;
  uint uVar36;
  uint uVar37;
  uint uVar38;
  undefined1 auVar33 [16];
  undefined1 auVar34 [16];
  uint uVar39;
  uint uVar40;
  uint uVar49;
  uint uVar51;
  uint uVar53;
  undefined1 auVar41 [16];
  undefined1 auVar42 [16];
  undefined1 auVar43 [16];
  undefined1 auVar44 [16];
  undefined1 auVar45 [16];
  undefined1 auVar46 [16];
  undefined1 auVar47 [16];
  int iVar50;
  int iVar52;
  undefined1 auVar48 [16];
  uint uVar54;
  uint uVar63;
  uint uVar64;
  uint uVar65;
  undefined1 auVar55 [16];
  undefined1 auVar56 [16];
  undefined1 auVar57 [16];
  undefined1 auVar58 [16];
  undefined1 auVar59 [16];
  undefined1 auVar60 [16];
  undefined1 auVar61 [16];
  undefined1 auVar62 [16];
  undefined1 auVar66 [16];
  undefined1 auVar67 [16];
  undefined1 auVar68 [16];
  float fVar69;
  float fVar70;
  float fVar71;
  float fVar72;
  float fVar73;
  float fVar74;
  float fVar75;
  float fVar76;
  float fVar77;
  float fVar78;
  float fVar79;
  float fVar80;
  float fVar81;
  float fVar82;
  float fVar83;
  float fVar84;
  float fVar85;
  float fVar86;
  float fVar88;
  float fVar89;
  float fVar90;
  undefined1 auVar87 [16];
  float fVar91;
  float fVar92;
  float fVar93;
  float fVar94;
  float fVar95;
  float fVar96;
  float fVar97;
  float fVar98;
  float fVar99;
  float fVar100;
  float fVar101;
  float fVar102;
  float fVar103;
  float fVar104;
  float fVar105;
  float fVar106;
  int iVar107;
  int iVar108;
  int iVar109;
  int iVar110;
  uint uVar111;
  uint uVar112;
  uint uVar113;
  uint uVar114;
  undefined1 local_68 [8];
  float afStack_60 [2];
  undefined1 local_58 [16];
  undefined1 local_48 [16];
  undefined1 local_38 [16];
  long local_20;
  
  uVar5 = *(ushort *)param_1;
  pVar4 = param_1[4];
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  fVar31 = *(float *)(param_2 + 0xde0);
  fVar32 = *(float *)(param_2 + 0xde4);
  fVar78 = *(float *)(param_2 + 0xde8);
  if (uVar5 == 1) {
    afStack_60[1] = 0.0;
    _local_68 = *(undefined1 (*) [12])(param_2 + 0xde0);
  }
  else {
    uVar25 = (uint)(byte)param_2[0xdbc];
    lVar21 = 0;
    uVar26 = (uint)(byte)param_2[0xdbc];
    if (uVar5 == 2) {
      fVar82 = 0.0;
      fVar83 = 0.0;
      fVar84 = 0.0;
      fVar85 = 0.0;
      fVar73 = 0.0;
      fVar74 = 0.0;
      fVar75 = 0.0;
      fVar76 = 0.0;
      fVar69 = 0.0;
      fVar70 = 0.0;
      fVar71 = 0.0;
      fVar72 = 0.0;
      iVar107 = __LC0;
      iVar108 = _UNK_00101fa4;
      iVar109 = _UNK_00101fa8;
      iVar110 = _UNK_00101fac;
      do {
        uVar6 = *(undefined4 *)(param_1 + lVar21 + 0x10);
        bVar7 = iVar107 < (int)uVar25;
        bVar8 = iVar108 < (int)uVar25;
        bVar9 = iVar109 < (int)uVar25;
        bVar10 = iVar110 < (int)uVar25;
        iVar107 = iVar107 + __LC1;
        iVar108 = iVar108 + _UNK_00101fb4;
        iVar109 = iVar109 + _UNK_00101fb8;
        iVar110 = iVar110 + _UNK_00101fbc;
        auVar15[0xc] = (char)((uint)uVar6 >> 0x18);
        auVar15._0_12_ = ZEXT712(0);
        uVar27 = -(uint)(bVar7 && (char)uVar6 == '\0');
        uVar28 = -(uint)(bVar8 && (char)((uint)uVar6 >> 8) == '\0');
        uVar37 = -(uint)(bVar9 && (int)CONCAT32(auVar15._10_3_,(ushort)(byte)((uint)uVar6 >> 0x10))
                                  == 0);
        uVar39 = -(uint)(bVar10 && (uint3)(auVar15._10_3_ >> 0x10) == 0);
        piVar1 = param_2 + lVar21 * 4;
        fVar69 = fVar69 + (float)(*(uint *)piVar1 & uVar27);
        fVar70 = fVar70 + (float)(*(uint *)(piVar1 + 4) & uVar28);
        fVar71 = fVar71 + (float)(*(uint *)(piVar1 + 8) & uVar37);
        fVar72 = fVar72 + (float)(*(uint *)(piVar1 + 0xc) & uVar39);
        piVar1 = param_2 + lVar21 * 4 + 0x370;
        piVar3 = param_2 + lVar21 * 4 + 0x6e0;
        lVar21 = lVar21 + 4;
        fVar73 = fVar73 + (float)(*(uint *)piVar1 & uVar27);
        fVar74 = fVar74 + (float)(*(uint *)(piVar1 + 4) & uVar28);
        fVar75 = fVar75 + (float)(*(uint *)(piVar1 + 8) & uVar37);
        fVar76 = fVar76 + (float)(*(uint *)(piVar1 + 0xc) & uVar39);
        fVar82 = fVar82 + (float)(uVar27 & *(uint *)piVar3);
        fVar83 = fVar83 + (float)(uVar28 & *(uint *)(piVar3 + 4));
        fVar84 = fVar84 + (float)(uVar37 & *(uint *)(piVar3 + 8));
        fVar85 = fVar85 + (float)(uVar39 & *(uint *)(piVar3 + 0xc));
      } while ((uint)lVar21 < uVar25);
      fVar77 = (float)uVar26;
      fVar84 = fVar82 + fVar84 + fVar83 + fVar85;
      fVar83 = fVar73 + fVar75 + fVar74 + fVar76;
      fVar82 = fVar71 + fVar69 + fVar72 + fVar70;
      auVar46._0_4_ = (float)(byte)pVar4;
      auVar58._4_4_ = fVar83;
      auVar58._0_4_ = fVar82;
      auVar58._8_4_ = fVar84;
      auVar58._12_4_ = 0;
      auVar46._4_4_ = auVar46._0_4_;
      auVar46._8_4_ = auVar46._0_4_;
      auVar46._12_4_ = auVar46._0_4_;
      _local_68 = divps(auVar58,auVar46);
      auVar47._0_4_ = fVar77 * fVar31 - fVar82;
      auVar47._4_4_ = fVar77 * fVar32 - fVar83;
      auVar47._8_4_ = fVar77 * fVar78 - fVar84;
      auVar47._12_4_ = fVar77 * 0.0 - 0.0;
      auVar59._0_4_ = (float)(byte)param_1[5];
      auVar59._4_4_ = auVar59._0_4_;
      auVar59._8_4_ = auVar59._0_4_;
      auVar59._12_4_ = auVar59._0_4_;
      local_58 = divps(auVar47,auVar59);
    }
    else {
      fVar82 = 0.0;
      fVar83 = 0.0;
      fVar84 = 0.0;
      fVar85 = 0.0;
      if (uVar5 == 3) {
        fVar77 = 0.0;
        fVar79 = 0.0;
        fVar80 = 0.0;
        fVar81 = 0.0;
        fVar86 = 0.0;
        fVar88 = 0.0;
        fVar89 = 0.0;
        fVar90 = 0.0;
        fVar91 = 0.0;
        fVar92 = 0.0;
        fVar93 = 0.0;
        fVar94 = 0.0;
        fVar69 = 0.0;
        fVar70 = 0.0;
        fVar71 = 0.0;
        fVar72 = 0.0;
        fVar73 = 0.0;
        fVar74 = 0.0;
        fVar75 = 0.0;
        fVar76 = 0.0;
        iVar107 = __LC0;
        iVar108 = _UNK_00101fa4;
        iVar109 = _UNK_00101fa8;
        iVar110 = _UNK_00101fac;
        do {
          uVar27 = *(uint *)(param_1 + lVar21 + 0x10);
          bVar7 = iVar107 < (int)uVar25;
          bVar8 = iVar108 < (int)uVar25;
          bVar9 = iVar109 < (int)uVar25;
          bVar10 = iVar110 < (int)uVar25;
          iVar107 = iVar107 + __LC1;
          iVar108 = iVar108 + _UNK_00101fb4;
          iVar109 = iVar109 + _UNK_00101fb8;
          iVar110 = iVar110 + _UNK_00101fbc;
          auVar16[0xc] = (char)(uVar27 >> 0x18);
          auVar16._0_12_ = ZEXT712(0);
          uVar19 = CONCAT32(auVar16._10_3_,(ushort)(byte)(uVar27 >> 0x10));
          auVar20._5_8_ = 0;
          auVar20._0_5_ = uVar19;
          iVar50 = (int)CONCAT72(SUB137(auVar20 << 0x40,6),(ushort)(byte)(uVar27 >> 8));
          iVar52 = (int)uVar19;
          uVar14 = auVar16._10_3_ >> 0x10;
          uVar111 = -(uint)((uVar27 & 0xff) == 0 && bVar7);
          uVar112 = -(uint)(iVar50 == 0 && bVar8);
          uVar113 = -(uint)(iVar52 == 0 && bVar9);
          uVar114 = -(uint)(uVar14 == 0 && bVar10);
          uVar27 = -(uint)((uVar27 & 0xff) == __LC2 && bVar7);
          uVar28 = -(uint)(iVar50 == _UNK_00101fc4 && bVar8);
          uVar37 = -(uint)(iVar52 == _UNK_00101fc8 && bVar9);
          uVar39 = -(uint)(uVar14 == _UNK_00101fcc && bVar10);
          piVar1 = param_2 + lVar21 * 4;
          fVar73 = fVar73 + (float)(*(uint *)piVar1 & uVar111);
          fVar74 = fVar74 + (float)(*(uint *)(piVar1 + 4) & uVar112);
          fVar75 = fVar75 + (float)(*(uint *)(piVar1 + 8) & uVar113);
          fVar76 = fVar76 + (float)(*(uint *)(piVar1 + 0xc) & uVar114);
          piVar1 = param_2 + lVar21 * 4;
          fVar69 = fVar69 + (float)(*(uint *)piVar1 & uVar27);
          fVar70 = fVar70 + (float)(*(uint *)(piVar1 + 4) & uVar28);
          fVar71 = fVar71 + (float)(*(uint *)(piVar1 + 8) & uVar37);
          fVar72 = fVar72 + (float)(*(uint *)(piVar1 + 0xc) & uVar39);
          piVar1 = param_2 + lVar21 * 4 + 0x370;
          piVar3 = param_2 + lVar21 * 4 + 0x6e0;
          fVar91 = fVar91 + (float)(*(uint *)piVar1 & uVar111);
          fVar92 = fVar92 + (float)(*(uint *)(piVar1 + 4) & uVar112);
          fVar93 = fVar93 + (float)(*(uint *)(piVar1 + 8) & uVar113);
          fVar94 = fVar94 + (float)(*(uint *)(piVar1 + 0xc) & uVar114);
          piVar1 = param_2 + lVar21 * 4 + 0x370;
          fVar77 = fVar77 + (float)(uVar111 & *(uint *)piVar3);
          fVar79 = fVar79 + (float)(uVar112 & *(uint *)(piVar3 + 4));
          fVar80 = fVar80 + (float)(uVar113 & *(uint *)(piVar3 + 8));
          fVar81 = fVar81 + (float)(uVar114 & *(uint *)(piVar3 + 0xc));
          piVar3 = param_2 + lVar21 * 4 + 0x6e0;
          lVar21 = lVar21 + 4;
          fVar86 = fVar86 + (float)(*(uint *)piVar1 & uVar27);
          fVar88 = fVar88 + (float)(*(uint *)(piVar1 + 4) & uVar28);
          fVar89 = fVar89 + (float)(*(uint *)(piVar1 + 8) & uVar37);
          fVar90 = fVar90 + (float)(*(uint *)(piVar1 + 0xc) & uVar39);
          fVar82 = fVar82 + (float)(uVar27 & *(uint *)piVar3);
          fVar83 = fVar83 + (float)(uVar28 & *(uint *)(piVar3 + 4));
          fVar84 = fVar84 + (float)(uVar37 & *(uint *)(piVar3 + 8));
          fVar85 = fVar85 + (float)(uVar39 & *(uint *)(piVar3 + 0xc));
        } while ((uint)lVar21 < uVar26);
        fVar95 = (float)uVar26;
        fVar77 = fVar77 + fVar80 + fVar79 + fVar81;
        fVar79 = fVar91 + fVar93 + fVar92 + fVar94;
        auVar67._0_4_ = fVar73 + fVar75 + fVar74 + fVar76;
        auVar67._4_4_ = fVar79;
        auVar67._8_4_ = fVar77;
        auVar67._12_4_ = 0;
        fVar84 = fVar82 + fVar84 + fVar83 + fVar85;
        fVar83 = fVar86 + fVar89 + fVar88 + fVar90;
        fVar82 = fVar69 + fVar71 + fVar70 + fVar72;
        auVar60._0_4_ = (float)(byte)pVar4;
        auVar60._4_4_ = auVar60._0_4_;
        auVar60._8_4_ = auVar60._0_4_;
        auVar60._12_4_ = auVar60._0_4_;
        _local_68 = divps(auVar67,auVar60);
        auVar61._0_4_ = (float)(byte)param_1[5];
        auVar61._4_4_ = auVar61._0_4_;
        auVar61._8_4_ = auVar61._0_4_;
        auVar61._12_4_ = auVar61._0_4_;
        auVar68._4_4_ = fVar83;
        auVar68._0_4_ = fVar82;
        auVar68._8_4_ = fVar84;
        auVar68._12_4_ = 0;
        local_58 = divps(auVar68,auVar61);
        auVar48._4_4_ = (fVar95 * fVar32 - fVar79) - fVar83;
        auVar48._0_4_ = (fVar95 * fVar31 - auVar67._0_4_) - fVar82;
        auVar48._8_4_ = (fVar95 * fVar78 - fVar77) - fVar84;
        auVar48._12_4_ = (fVar95 * 0.0 - 0.0) - 0.0;
        fVar31 = (float)(byte)param_1[6];
        auVar62._4_4_ = fVar31;
        auVar62._0_4_ = fVar31;
        auVar62._8_4_ = fVar31;
        auVar62._12_4_ = fVar31;
        local_48 = divps(auVar48,auVar62);
      }
      else {
        fVar86 = 0.0;
        fVar88 = 0.0;
        fVar89 = 0.0;
        fVar90 = 0.0;
        fVar91 = 0.0;
        fVar92 = 0.0;
        fVar93 = 0.0;
        fVar94 = 0.0;
        fVar95 = 0.0;
        fVar96 = 0.0;
        fVar97 = 0.0;
        fVar98 = 0.0;
        fVar99 = 0.0;
        fVar100 = 0.0;
        fVar101 = 0.0;
        fVar102 = 0.0;
        fVar103 = 0.0;
        fVar104 = 0.0;
        fVar105 = 0.0;
        fVar106 = 0.0;
        fVar69 = 0.0;
        fVar70 = 0.0;
        fVar71 = 0.0;
        fVar72 = 0.0;
        fVar73 = 0.0;
        fVar74 = 0.0;
        fVar75 = 0.0;
        fVar76 = 0.0;
        fVar77 = 0.0;
        fVar79 = 0.0;
        fVar80 = 0.0;
        fVar81 = 0.0;
        iVar107 = __LC0;
        iVar108 = _UNK_00101fa4;
        iVar109 = _UNK_00101fa8;
        iVar110 = _UNK_00101fac;
        do {
          uVar27 = *(uint *)(param_1 + lVar21 + 0x10);
          uVar17 = (ulong)(ushort)uVar27 & 0xffffffffffff00ff;
          bVar7 = iVar107 < (int)uVar25;
          bVar8 = iVar108 < (int)uVar25;
          bVar9 = iVar109 < (int)uVar25;
          bVar10 = iVar110 < (int)uVar25;
          auVar11._8_4_ = 0;
          auVar11._0_8_ = uVar17;
          auVar11[0xc] = (char)(uVar27 >> 0x18);
          auVar12[8] = (char)(uVar27 >> 0x10);
          auVar12._0_8_ = uVar17;
          auVar12[9] = 0;
          auVar12._10_3_ = auVar11._10_3_;
          auVar18._5_8_ = 0;
          auVar18._0_5_ = auVar12._8_5_;
          uVar28 = (uint)uVar17;
          auVar13[4] = (char)(uVar27 >> 8);
          auVar13._0_4_ = uVar28;
          auVar13[5] = 0;
          auVar13._6_7_ = SUB137(auVar18 << 0x40,6);
          iVar107 = iVar107 + __LC1;
          iVar108 = iVar108 + _UNK_00101fb4;
          iVar109 = iVar109 + _UNK_00101fb8;
          iVar110 = iVar110 + _UNK_00101fbc;
          iVar50 = auVar13._4_4_;
          iVar52 = auVar12._8_4_;
          uVar14 = auVar11._10_3_ >> 0x10;
          uVar54 = -(uint)((uVar27 & 0xff) == 0 && bVar7);
          uVar63 = -(uint)(iVar50 == 0 && bVar8);
          uVar64 = -(uint)(iVar52 == 0 && bVar9);
          uVar65 = -(uint)(uVar14 == 0 && bVar10);
          uVar40 = -(uint)(__LC2 == uVar28 && bVar7);
          uVar49 = -(uint)(_UNK_00101fc4 == iVar50 && bVar8);
          uVar51 = -(uint)(_UNK_00101fc8 == iVar52 && bVar9);
          uVar53 = -(uint)(_UNK_00101fcc == uVar14 && bVar10);
          uVar29 = -(uint)(uVar28 == __LC3 && bVar7);
          uVar35 = -(uint)(iVar50 == _UNK_00101fd4 && bVar8);
          uVar36 = -(uint)(iVar52 == _UNK_00101fd8 && bVar9);
          uVar38 = -(uint)(uVar14 == _UNK_00101fdc && bVar10);
          piVar1 = param_2 + lVar21 * 4;
          uVar27 = *(uint *)piVar1;
          uVar28 = *(uint *)(piVar1 + 4);
          uVar37 = *(uint *)(piVar1 + 8);
          uVar39 = *(uint *)(piVar1 + 0xc);
          fVar77 = fVar77 + (float)(uVar54 & uVar27);
          fVar79 = fVar79 + (float)(uVar63 & uVar28);
          fVar80 = fVar80 + (float)(uVar64 & uVar37);
          fVar81 = fVar81 + (float)(uVar65 & uVar39);
          fVar69 = fVar69 + (float)(uVar27 & uVar29);
          fVar70 = fVar70 + (float)(uVar28 & uVar35);
          fVar71 = fVar71 + (float)(uVar37 & uVar36);
          fVar72 = fVar72 + (float)(uVar39 & uVar38);
          piVar1 = param_2 + lVar21 * 4 + 0x370;
          uVar111 = *(uint *)piVar1;
          uVar112 = *(uint *)(piVar1 + 4);
          uVar113 = *(uint *)(piVar1 + 8);
          uVar114 = *(uint *)(piVar1 + 0xc);
          fVar73 = fVar73 + (float)(uVar40 & uVar27);
          fVar74 = fVar74 + (float)(uVar49 & uVar28);
          fVar75 = fVar75 + (float)(uVar51 & uVar37);
          fVar76 = fVar76 + (float)(uVar53 & uVar39);
          fVar103 = fVar103 + (float)(uVar54 & uVar111);
          fVar104 = fVar104 + (float)(uVar63 & uVar112);
          fVar105 = fVar105 + (float)(uVar64 & uVar113);
          fVar106 = fVar106 + (float)(uVar65 & uVar114);
          fVar95 = fVar95 + (float)(uVar111 & uVar29);
          fVar96 = fVar96 + (float)(uVar112 & uVar35);
          fVar97 = fVar97 + (float)(uVar113 & uVar36);
          fVar98 = fVar98 + (float)(uVar114 & uVar38);
          piVar1 = param_2 + lVar21 * 4 + 0x6e0;
          uVar27 = *(uint *)piVar1;
          uVar28 = *(uint *)(piVar1 + 4);
          uVar37 = *(uint *)(piVar1 + 8);
          uVar39 = *(uint *)(piVar1 + 0xc);
          lVar21 = lVar21 + 4;
          fVar99 = fVar99 + (float)(uVar40 & uVar111);
          fVar100 = fVar100 + (float)(uVar49 & uVar112);
          fVar101 = fVar101 + (float)(uVar51 & uVar113);
          fVar102 = fVar102 + (float)(uVar53 & uVar114);
          fVar91 = fVar91 + (float)(uVar54 & uVar27);
          fVar92 = fVar92 + (float)(uVar63 & uVar28);
          fVar93 = fVar93 + (float)(uVar64 & uVar37);
          fVar94 = fVar94 + (float)(uVar65 & uVar39);
          fVar86 = fVar86 + (float)(uVar40 & uVar27);
          fVar88 = fVar88 + (float)(uVar49 & uVar28);
          fVar89 = fVar89 + (float)(uVar51 & uVar37);
          fVar90 = fVar90 + (float)(uVar53 & uVar39);
          fVar82 = fVar82 + (float)(uVar29 & uVar27);
          fVar83 = fVar83 + (float)(uVar35 & uVar28);
          fVar84 = fVar84 + (float)(uVar36 & uVar37);
          fVar85 = fVar85 + (float)(uVar38 & uVar39);
        } while ((uint)lVar21 < uVar26);
        fVar30 = (float)uVar26;
        fVar91 = fVar91 + fVar93 + fVar92 + fVar94;
        fVar92 = fVar103 + fVar105 + fVar104 + fVar106;
        fVar77 = fVar77 + fVar80 + fVar79 + fVar81;
        auVar55._4_4_ = fVar92;
        auVar55._0_4_ = fVar77;
        auVar55._8_4_ = fVar91;
        auVar55._12_4_ = 0;
        fVar79 = fVar86 + fVar89 + fVar88 + fVar90;
        fVar80 = fVar99 + fVar101 + fVar100 + fVar102;
        fVar73 = fVar73 + fVar75 + fVar74 + fVar76;
        fVar83 = fVar82 + fVar84 + fVar83 + fVar85;
        fVar84 = fVar95 + fVar97 + fVar96 + fVar98;
        fVar82 = fVar69 + fVar71 + fVar70 + fVar72;
        auVar41._0_4_ = (float)(byte)pVar4;
        auVar33._0_4_ = ((fVar30 * fVar31 - fVar77) - fVar73) - fVar82;
        auVar33._4_4_ = ((fVar30 * fVar32 - fVar92) - fVar80) - fVar84;
        auVar33._8_4_ = ((fVar30 * fVar78 - fVar91) - fVar79) - fVar83;
        auVar33._12_4_ = ((fVar30 * 0.0 - 0.0) - 0.0) - 0.0;
        auVar41._4_4_ = auVar41._0_4_;
        auVar41._8_4_ = auVar41._0_4_;
        auVar41._12_4_ = auVar41._0_4_;
        _local_68 = divps(auVar55,auVar41);
        auVar42._0_4_ = (float)(byte)param_1[5];
        auVar42._4_4_ = auVar42._0_4_;
        auVar42._8_4_ = auVar42._0_4_;
        auVar42._12_4_ = auVar42._0_4_;
        auVar56._4_4_ = fVar80;
        auVar56._0_4_ = fVar73;
        auVar56._8_4_ = fVar79;
        auVar56._12_4_ = 0;
        local_58 = divps(auVar56,auVar42);
        auVar43._0_4_ = (float)(byte)param_1[6];
        auVar43._4_4_ = auVar43._0_4_;
        auVar43._8_4_ = auVar43._0_4_;
        auVar43._12_4_ = auVar43._0_4_;
        auVar57._4_4_ = fVar84;
        auVar57._0_4_ = fVar82;
        auVar57._8_4_ = fVar83;
        auVar57._12_4_ = 0;
        local_48 = divps(auVar57,auVar43);
        auVar44._0_4_ = (float)(byte)param_1[7];
        auVar44._4_4_ = auVar44._0_4_;
        auVar44._8_4_ = auVar44._0_4_;
        auVar44._12_4_ = auVar44._0_4_;
        local_38 = divps(auVar33,auVar44);
      }
    }
  }
  pfVar23 = (float *)local_68;
  ppVar24 = param_1 + 0xf0;
  lVar21 = 0;
  do {
    fVar31 = *pfVar23;
    fVar32 = pfVar23[1];
    fVar78 = pfVar23[2];
    fVar82 = pfVar23[3];
    fVar70 = 0.0;
    fVar71 = 0.0;
    fVar72 = 0.0;
    fVar73 = 0.0;
    pVar4 = param_1[lVar21 + 4];
    lVar22 = 0;
    fVar83 = 0.0;
    fVar84 = 0.0;
    fVar85 = 0.0;
    fVar69 = 0.0;
    fVar74 = 0.0;
    fVar75 = 0.0;
    fVar76 = 0.0;
    fVar77 = 0.0;
    *(float *)param_3 = fVar31;
    *(float *)(param_3 + 4) = fVar32;
    *(float *)(param_3 + 8) = fVar78;
    *(float *)(param_3 + 0xc) = fVar82;
    do {
      ppVar2 = ppVar24 + lVar22;
      lVar22 = lVar22 + 1;
      fVar79 = *(float *)(param_2 + (ulong)(byte)*ppVar2 * 4) - fVar31;
      fVar80 = *(float *)(param_2 + (ulong)(byte)*ppVar2 * 4 + 0x370) - fVar32;
      fVar81 = *(float *)(param_2 + (ulong)(byte)*ppVar2 * 4 + 0x6e0) - fVar78;
      fVar86 = 0.0 - fVar82;
      fVar74 = fVar74 + (float)(-(uint)(0.0 < fVar79) & (uint)fVar79);
      fVar75 = fVar75 + (float)(-(uint)(0.0 < fVar79) & (uint)fVar80);
      fVar76 = fVar76 + (float)(-(uint)(0.0 < fVar79) & (uint)fVar81);
      fVar77 = fVar77 + (float)(-(uint)(0.0 < fVar79) & (uint)fVar86);
      fVar83 = fVar83 + (float)(-(uint)(0.0 < fVar80) & (uint)fVar79);
      fVar84 = fVar84 + (float)(-(uint)(0.0 < fVar80) & (uint)fVar80);
      fVar85 = fVar85 + (float)(-(uint)(0.0 < fVar80) & (uint)fVar81);
      fVar69 = fVar69 + (float)(-(uint)(0.0 < fVar80) & (uint)fVar86);
      fVar70 = fVar70 + (float)((uint)fVar79 & -(uint)(0.0 < fVar81));
      fVar71 = fVar71 + (float)((uint)fVar80 & -(uint)(0.0 < fVar81));
      fVar72 = fVar72 + (float)((uint)fVar81 & -(uint)(0.0 < fVar81));
      fVar73 = fVar73 + (float)((uint)fVar86 & -(uint)(0.0 < fVar81));
    } while ((uint)lVar22 < (uint)(byte)pVar4);
    lVar21 = lVar21 + 1;
    pfVar23 = pfVar23 + 4;
    ppVar24 = ppVar24 + 0xd8;
    fVar31 = fVar74 * fVar74 + fVar76 * fVar76 + fVar75 * fVar75 + fVar77 * fVar77;
    fVar32 = fVar83 * fVar83 + fVar85 * fVar85 + fVar84 * fVar84 + fVar69 * fVar69;
    fVar78 = fVar70 * fVar70 + fVar72 * fVar72 + fVar71 * fVar71 + fVar73 * fVar73;
    uVar25 = -(uint)(fVar31 < fVar32);
    uVar26 = -(uint)(fVar31 < fVar32);
    uVar27 = -(uint)(fVar31 < fVar32);
    uVar28 = -(uint)(fVar31 < fVar32);
    auVar66._0_4_ = (uint)fVar83 & uVar25;
    auVar66._4_4_ = (uint)fVar84 & uVar26;
    auVar66._8_4_ = (uint)fVar85 & uVar27;
    auVar66._12_4_ = (uint)fVar69 & uVar28;
    auVar87._0_4_ = ~uVar25 & (uint)fVar74;
    auVar87._4_4_ = ~uVar26 & (uint)fVar75;
    auVar87._8_4_ = ~uVar27 & (uint)fVar76;
    auVar87._12_4_ = ~uVar28 & (uint)fVar77;
    auVar66 = auVar66 | auVar87;
    uVar25 = -(uint)((float)(uVar25 & (uint)fVar32 | ~uVar25 & (uint)fVar31) < fVar78);
    uVar26 = -(uint)((float)(uVar26 & (uint)fVar32 | ~uVar26 & (uint)fVar31) < fVar78);
    uVar27 = -(uint)((float)(uVar27 & (uint)fVar32 | ~uVar27 & (uint)fVar31) < fVar78);
    uVar28 = -(uint)((float)(uVar28 & (uint)fVar32 | ~uVar28 & (uint)fVar31) < fVar78);
    auVar34._0_4_ = uVar25 & (uint)fVar70;
    auVar34._4_4_ = uVar26 & (uint)fVar71;
    auVar34._8_4_ = uVar27 & (uint)fVar72;
    auVar34._12_4_ = uVar28 & (uint)fVar73;
    auVar45._0_4_ = ~uVar25 & auVar66._0_4_;
    auVar45._4_4_ = ~uVar26 & auVar66._4_4_;
    auVar45._8_4_ = ~uVar27 & auVar66._8_4_;
    auVar45._12_4_ = ~uVar28 & auVar66._12_4_;
    *(undefined1 (*) [16])(param_3 + 0x10) = auVar34 | auVar45;
    param_3 = param_3 + 0x20;
  } while ((uint)lVar21 < (uint)uVar5);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    /* WARNING: Subroutine does not return */
  __stack_chk_fail();
}



/* compute_avgs_and_dirs_2_comp(partition_info const&, image_block const&, unsigned int, unsigned
   int, partition_metrics*) */

void compute_avgs_and_dirs_2_comp
               (partition_info *param_1,image_block *param_2,uint param_3,uint param_4,
               partition_metrics *param_5)

{
  partition_info *ppVar1;
  partition_info pVar2;
  ushort uVar3;
  long lVar4;
  partition_info *ppVar5;
  image_block *piVar6;
  image_block *piVar7;
  long lVar8;
  float fVar9;
  float fVar11;
  float fVar12;
  float fVar13;
  undefined1 auVar10 [16];
  undefined1 auVar14 [16];
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  undefined1 local_18 [16];
  
  auVar10 = *(undefined1 (*) [16])(param_2 + 0xde0);
  piVar7 = param_2;
  if ((param_4 != 1) || (param_3 != 0)) {
    if ((param_4 != 2) || (param_3 != 0)) {
      piVar7 = param_2 + 0x370;
      piVar6 = param_2 + 0x6e0;
      local_18._8_8_ = 0;
      local_18._0_8_ = auVar10._4_8_;
    }
    else {
      piVar6 = param_2 + 0x6e0;
      local_18._4_4_ = auVar10._8_4_;
      local_18._0_4_ = auVar10._0_4_;
      local_18._8_8_ = 0;
    }
  }
  else {
    piVar6 = param_2 + 0x370;
    local_18._8_8_ = 0;
    local_18._0_8_ = auVar10._0_8_;
  }
  uVar3 = *(ushort *)param_1;
  ppVar5 = param_1 + 0xf0;
  lVar8 = 0;
  do {
    pVar2 = param_1[lVar8 + 4];
    if (uVar3 != 1) {
      lVar4 = 0;
      auVar10 = (undefined1  [16])0x0;
      do {
        ppVar1 = ppVar5 + lVar4;
        lVar4 = lVar4 + 1;
        auVar14._0_4_ = auVar10._0_4_ + *(float *)(piVar7 + (ulong)(byte)*ppVar1 * 4);
        auVar14._4_4_ = auVar10._4_4_ + *(float *)(piVar6 + (ulong)(byte)*ppVar1 * 4);
        auVar14._8_4_ = auVar10._8_4_ + 0.0;
        auVar14._12_4_ = auVar10._12_4_ + 0.0;
        auVar10 = auVar14;
      } while ((uint)lVar4 < (uint)(byte)pVar2);
      auVar10._0_4_ = (float)(byte)pVar2;
      auVar10._4_4_ = auVar10._0_4_;
      auVar10._8_4_ = auVar10._0_4_;
      auVar10._12_4_ = auVar10._0_4_;
      local_18 = divps(auVar14,auVar10);
    }
    fVar15 = 0.0;
    fVar16 = 0.0;
    fVar17 = 0.0;
    fVar18 = 0.0;
    *(undefined1 (*) [16])param_5 = local_18;
    lVar4 = 0;
    fVar19 = 0.0;
    fVar20 = 0.0;
    fVar21 = 0.0;
    fVar22 = 0.0;
    do {
      ppVar1 = ppVar5 + lVar4;
      lVar4 = lVar4 + 1;
      fVar9 = *(float *)(piVar7 + (ulong)(byte)*ppVar1 * 4) - local_18._0_4_;
      fVar11 = *(float *)(piVar6 + (ulong)(byte)*ppVar1 * 4) - local_18._4_4_;
      fVar12 = 0.0 - local_18._8_4_;
      fVar13 = 0.0 - local_18._12_4_;
      fVar19 = fVar19 + (float)(-(uint)(0.0 < fVar9) & (uint)fVar9);
      fVar20 = fVar20 + (float)(-(uint)(0.0 < fVar9) & (uint)fVar11);
      fVar21 = fVar21 + (float)(-(uint)(0.0 < fVar9) & (uint)fVar12);
      fVar22 = fVar22 + (float)(-(uint)(0.0 < fVar9) & (uint)fVar13);
      fVar15 = fVar15 + (float)((uint)fVar9 & -(uint)(0.0 < fVar11));
      fVar16 = fVar16 + (float)((uint)fVar11 & -(uint)(0.0 < fVar11));
      fVar17 = fVar17 + (float)((uint)fVar12 & -(uint)(0.0 < fVar11));
      fVar18 = fVar18 + (float)((uint)fVar13 & -(uint)(0.0 < fVar11));
    } while ((uint)lVar4 < (uint)(byte)pVar2);
    lVar8 = lVar8 + 1;
    ppVar5 = ppVar5 + 0xd8;
    fVar9 = fVar19 * fVar19 + fVar21 * fVar21 + fVar20 * fVar20 + fVar22 * fVar22;
    fVar11 = fVar15 * fVar15 + fVar17 * fVar17 + fVar16 * fVar16 + fVar18 * fVar18;
    *(uint *)(param_5 + 0x10) =
         -(uint)(fVar9 < fVar11) & (uint)fVar15 | ~-(uint)(fVar9 < fVar11) & (uint)fVar19;
    *(uint *)(param_5 + 0x14) =
         -(uint)(fVar9 < fVar11) & (uint)fVar16 | ~-(uint)(fVar9 < fVar11) & (uint)fVar20;
    *(uint *)(param_5 + 0x18) =
         -(uint)(fVar9 < fVar11) & (uint)fVar17 | ~-(uint)(fVar9 < fVar11) & (uint)fVar21;
    *(uint *)(param_5 + 0x1c) =
         -(uint)(fVar9 < fVar11) & (uint)fVar18 | ~-(uint)(fVar9 < fVar11) & (uint)fVar22;
    param_5 = param_5 + 0x20;
  } while ((uint)lVar8 < (uint)uVar3);
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* compute_error_squared_rgba(partition_info const&, image_block const&, processed_line4 const*,
   processed_line4 const*, float*, float&, float&) */

void compute_error_squared_rgba
               (partition_info *param_1,image_block *param_2,processed_line4 *param_3,
               processed_line4 *param_4,float *param_5,float *param_6,float *param_7)

{
  processed_line4 *ppVar1;
  partition_info pVar2;
  ushort uVar3;
  uint uVar4;
  bool bVar5;
  bool bVar6;
  bool bVar7;
  undefined1 auVar8 [16];
  undefined1 auVar9 [13];
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  float fVar19;
  float fVar20;
  float fVar21;
  float fVar22;
  float fVar23;
  float fVar24;
  uint5 uVar25;
  undefined1 auVar26 [13];
  long lVar27;
  partition_info *ppVar28;
  long lVar29;
  uint uVar30;
  long lVar31;
  long lVar32;
  long lVar33;
  long lVar34;
  partition_info *ppVar35;
  float fVar36;
  float fVar37;
  undefined4 uVar38;
  float fVar39;
  float fVar40;
  float fVar41;
  float fVar42;
  float fVar43;
  float fVar44;
  float fVar45;
  undefined1 auVar46 [16];
  undefined1 auVar47 [16];
  undefined1 auVar48 [16];
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar52;
  float fVar53;
  float fVar54;
  float fVar55;
  float fVar56;
  float fVar57;
  float fVar58;
  float fVar59;
  float fVar60;
  float fVar61;
  float fVar62;
  float fVar63;
  float fVar64;
  float fVar65;
  float fVar66;
  float fVar67;
  float fVar68;
  float fVar69;
  undefined4 uVar73;
  float fVar74;
  undefined4 uVar75;
  float fVar76;
  undefined1 auVar70 [16];
  undefined1 auVar71 [16];
  undefined1 auVar72 [16];
  undefined4 uVar77;
  float fVar78;
  uint uVar79;
  float fVar80;
  float fVar81;
  float fVar82;
  float fVar83;
  float fVar84;
  float fVar85;
  float fVar86;
  float fVar87;
  int iVar88;
  int iVar89;
  int iVar90;
  int iVar91;
  uint uStack_74;
  uint uStack_70;
  uint uStack_6c;
  
  fVar80 = 0.0;
  fVar81 = 0.0;
  fVar82 = 0.0;
  fVar83 = 0.0;
  lVar33 = 0x10;
  lVar32 = 0;
  ppVar35 = param_1 + 0xf0;
  uVar3 = *(ushort *)param_1;
  fVar84 = fVar80;
  fVar85 = fVar81;
  fVar86 = fVar82;
  fVar87 = fVar83;
  do {
    ppVar1 = param_3 + lVar33;
    fVar39 = *(float *)ppVar1;
    fVar10 = *(float *)(ppVar1 + 4);
    fVar11 = *(float *)(ppVar1 + 8);
    fVar12 = *(float *)(ppVar1 + 0xc);
    ppVar1 = param_4 + lVar33;
    fVar13 = *(float *)ppVar1;
    fVar14 = *(float *)(ppVar1 + 4);
    fVar15 = *(float *)(ppVar1 + 8);
    fVar16 = *(float *)(ppVar1 + 0xc);
    uVar30 = 0;
    ppVar1 = param_3 + lVar33 + -0x10;
    fVar17 = *(float *)ppVar1;
    fVar18 = *(float *)(ppVar1 + 4);
    fVar19 = *(float *)(ppVar1 + 8);
    fVar20 = *(float *)(ppVar1 + 0xc);
    fVar21 = *(float *)(param_2 + 0xe00);
    fVar22 = *(float *)(param_2 + 0xe04);
    fVar23 = *(float *)(param_2 + 0xe08);
    fVar24 = *(float *)(param_2 + 0xe0c);
    pVar2 = param_1[lVar32 + 4];
    ppVar28 = ppVar35;
    uVar38 = __LC7;
    uVar73 = _UNK_00101ff4;
    uVar75 = _UNK_00101ff8;
    uVar77 = _UNK_00101ffc;
    auVar70 = __LC5;
    iVar88 = __LC0;
    iVar89 = _UNK_00101fa4;
    iVar90 = _UNK_00101fa8;
    iVar91 = _UNK_00101fac;
    do {
      uVar4 = *(uint *)ppVar28;
      uVar30 = uVar30 + 4;
      ppVar28 = ppVar28 + 4;
      auVar9[0xc] = (char)(uVar4 >> 0x18);
      auVar9._0_12_ = ZEXT712(0);
      uVar25 = CONCAT32(auVar9._10_3_,(ushort)(byte)(uVar4 >> 0x10));
      auVar26._5_8_ = 0;
      auVar26._0_5_ = uVar25;
      uStack_74 = (uint)(byte)pVar2;
      uStack_70 = (uint)(byte)pVar2;
      uStack_6c = (uint)(byte)pVar2;
      uVar79 = -(uint)(iVar88 < (int)(uint)(byte)pVar2);
      bVar5 = iVar89 < (int)uStack_74;
      bVar6 = iVar90 < (int)uStack_70;
      bVar7 = iVar91 < (int)uStack_6c;
      lVar27 = (long)(int)(uVar4 & 0xff);
      lVar34 = (long)(int)(uint)(uint3)(auVar9._10_3_ >> 0x10);
      fVar58 = *(float *)(param_2 + lVar27 * 4);
      fVar53 = *(float *)(param_2 + lVar27 * 4 + 0x370);
      fVar64 = *(float *)(param_2 + lVar34 * 4);
      fVar49 = *(float *)(param_2 + lVar27 * 4 + 0x6e0);
      lVar31 = (long)(int)uVar25;
      fVar62 = *(float *)(param_2 + lVar31 * 4);
      lVar29 = (long)(int)CONCAT72(SUB137(auVar26 << 0x40,6),(ushort)(byte)(uVar4 >> 8));
      fVar43 = *(float *)(param_2 + lVar31 * 4 + 0xa50);
      fVar60 = *(float *)(param_2 + lVar29 * 4);
      fVar56 = *(float *)(param_2 + lVar34 * 4 + 0x370);
      fVar55 = *(float *)(param_2 + lVar31 * 4 + 0x370);
      fVar54 = *(float *)(param_2 + lVar29 * 4 + 0x370);
      fVar52 = *(float *)(param_2 + lVar34 * 4 + 0x6e0);
      fVar51 = *(float *)(param_2 + lVar31 * 4 + 0x6e0);
      fVar50 = *(float *)(param_2 + lVar29 * 4 + 0x6e0);
      fVar45 = *(float *)(param_2 + lVar34 * 4 + 0xa50);
      fVar37 = *(float *)(param_2 + lVar27 * 4 + 0xa50);
      fVar41 = *(float *)(param_2 + lVar29 * 4 + 0xa50);
      fVar36 = fVar11 * fVar49 + fVar10 * fVar53 + fVar39 * fVar58 + fVar12 * fVar37;
      fVar40 = fVar11 * fVar50 + fVar10 * fVar54 + fVar39 * fVar60 + fVar12 * fVar41;
      fVar42 = fVar11 * fVar51 + fVar10 * fVar55 + fVar39 * fVar62 + fVar12 * fVar43;
      fVar44 = fVar11 * fVar52 + fVar10 * fVar56 + fVar39 * fVar64 + fVar12 * fVar45;
      auVar48._8_4_ = fVar42;
      auVar48._0_8_ = CONCAT44(fVar40,fVar36);
      auVar48._12_4_ = fVar44;
      auVar70 = minps(auVar48,auVar70);
      auVar71._8_4_ = fVar42;
      auVar71._0_8_ = CONCAT44(fVar40,fVar36);
      auVar71._12_4_ = fVar44;
      auVar72._4_4_ = uVar73;
      auVar72._0_4_ = uVar38;
      auVar72._8_4_ = uVar75;
      auVar72._12_4_ = uVar77;
      auVar72 = maxps(auVar71,auVar72);
      uVar38 = auVar72._0_4_;
      uVar73 = auVar72._4_4_;
      uVar75 = auVar72._8_4_;
      uVar77 = auVar72._12_4_;
      fVar69 = (fVar17 - fVar58) + fVar39 * fVar36;
      fVar74 = (fVar17 - fVar60) + fVar39 * fVar40;
      fVar76 = (fVar17 - fVar62) + fVar39 * fVar42;
      fVar78 = (fVar17 - fVar64) + fVar39 * fVar44;
      fVar65 = (fVar18 - fVar53) + fVar10 * fVar36;
      fVar66 = (fVar18 - fVar54) + fVar10 * fVar40;
      fVar67 = (fVar18 - fVar55) + fVar10 * fVar42;
      fVar68 = (fVar18 - fVar56) + fVar10 * fVar44;
      fVar57 = (fVar19 - fVar49) + fVar11 * fVar36;
      fVar59 = (fVar19 - fVar50) + fVar11 * fVar40;
      fVar61 = (fVar19 - fVar51) + fVar11 * fVar42;
      fVar63 = (fVar19 - fVar52) + fVar11 * fVar44;
      fVar36 = fVar36 * fVar12 + (fVar20 - fVar37);
      fVar40 = fVar40 * fVar12 + (fVar20 - fVar41);
      fVar42 = fVar42 * fVar12 + (fVar20 - fVar43);
      fVar44 = fVar44 * fVar12 + (fVar20 - fVar45);
      fVar80 = fVar80 + (float)((uint)(fVar23 * fVar57 * fVar57 +
                                       fVar22 * fVar65 * fVar65 + fVar21 * fVar69 * fVar69 +
                                      fVar36 * fVar24 * fVar36) & uVar79);
      fVar81 = fVar81 + (float)((uint)(fVar23 * fVar59 * fVar59 +
                                       fVar22 * fVar66 * fVar66 + fVar21 * fVar74 * fVar74 +
                                      fVar40 * fVar24 * fVar40) & -(uint)bVar5);
      fVar82 = fVar82 + (float)((uint)(fVar23 * fVar61 * fVar61 +
                                       fVar22 * fVar67 * fVar67 + fVar21 * fVar76 * fVar76 +
                                      fVar42 * fVar24 * fVar42) & -(uint)bVar6);
      fVar83 = fVar83 + (float)((uint)(fVar23 * fVar63 * fVar63 +
                                       fVar22 * fVar68 * fVar68 + fVar21 * fVar78 * fVar78 +
                                      fVar44 * fVar24 * fVar44) & -(uint)bVar7);
      iVar88 = iVar88 + __LC1;
      iVar89 = iVar89 + _UNK_00101fb4;
      iVar90 = iVar90 + _UNK_00101fb8;
      iVar91 = iVar91 + _UNK_00101fbc;
      fVar36 = fVar15 * fVar49 + fVar14 * fVar53 + fVar13 * fVar58 + fVar16 * fVar37;
      fVar40 = fVar15 * fVar50 + fVar14 * fVar54 + fVar13 * fVar60 + fVar16 * fVar41;
      fVar42 = fVar15 * fVar51 + fVar14 * fVar55 + fVar13 * fVar62 + fVar16 * fVar43;
      fVar44 = fVar15 * fVar52 + fVar14 * fVar56 + fVar13 * fVar64 + fVar16 * fVar45;
      fVar58 = fVar13 * fVar36 - fVar58;
      fVar60 = fVar13 * fVar40 - fVar60;
      fVar62 = fVar13 * fVar42 - fVar62;
      fVar64 = fVar13 * fVar44 - fVar64;
      fVar53 = fVar14 * fVar36 - fVar53;
      fVar54 = fVar14 * fVar40 - fVar54;
      fVar55 = fVar14 * fVar42 - fVar55;
      fVar56 = fVar14 * fVar44 - fVar56;
      fVar49 = fVar15 * fVar36 - fVar49;
      fVar50 = fVar15 * fVar40 - fVar50;
      fVar51 = fVar15 * fVar42 - fVar51;
      fVar52 = fVar15 * fVar44 - fVar52;
      fVar37 = fVar36 * fVar16 - fVar37;
      fVar41 = fVar40 * fVar16 - fVar41;
      fVar43 = fVar42 * fVar16 - fVar43;
      fVar45 = fVar44 * fVar16 - fVar45;
      fVar84 = fVar84 + (float)((uint)(fVar23 * fVar49 * fVar49 +
                                       fVar22 * fVar53 * fVar53 + fVar21 * fVar58 * fVar58 +
                                      fVar37 * fVar24 * fVar37) & uVar79);
      fVar85 = fVar85 + (float)((uint)(fVar23 * fVar50 * fVar50 +
                                       fVar22 * fVar54 * fVar54 + fVar21 * fVar60 * fVar60 +
                                      fVar41 * fVar24 * fVar41) & -(uint)bVar5);
      fVar86 = fVar86 + (float)((uint)(fVar23 * fVar51 * fVar51 +
                                       fVar22 * fVar55 * fVar55 + fVar21 * fVar62 * fVar62 +
                                      fVar43 * fVar24 * fVar43) & -(uint)bVar6);
      fVar87 = fVar87 + (float)((uint)(fVar23 * fVar52 * fVar52 +
                                       fVar22 * fVar56 * fVar56 + fVar21 * fVar64 * fVar64 +
                                      fVar45 * fVar24 * fVar45) & -(uint)bVar7);
    } while (uVar30 < (byte)pVar2);
    auVar46._0_8_ = auVar72._8_8_;
    auVar46._8_4_ = uVar38;
    auVar46._12_4_ = uVar38;
    auVar72 = maxps(auVar72,auVar46);
    uVar38 = auVar72._0_4_;
    auVar47._4_4_ = uVar38;
    auVar47._0_4_ = auVar72._4_4_;
    auVar47._8_4_ = uVar38;
    auVar47._12_4_ = uVar38;
    auVar72 = maxps(auVar72,auVar47);
    auVar8._8_4_ = auVar70._0_4_;
    auVar8._0_8_ = auVar70._8_8_;
    auVar8._12_4_ = auVar70._0_4_;
    auVar48 = minps(auVar70,auVar8);
    uVar38 = auVar48._0_4_;
    auVar70._4_4_ = uVar38;
    auVar70._0_4_ = auVar48._4_4_;
    auVar70._8_4_ = uVar38;
    auVar70._12_4_ = uVar38;
    auVar70 = minps(auVar48,auVar70);
    fVar39 = auVar72._0_4_ - auVar70._0_4_;
    if (fVar39 <= _LC9) {
      fVar39 = _LC9;
    }
    param_5[lVar32] = fVar39;
    lVar32 = lVar32 + 1;
    lVar33 = lVar33 + 0x20;
    ppVar35 = ppVar35 + 0xd8;
  } while ((uint)lVar32 < (uint)uVar3);
  *param_6 = fVar82 + fVar80 + fVar83 + fVar81;
  *param_7 = fVar86 + fVar84 + fVar87 + fVar85;
  return;
}



/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */
/* compute_error_squared_rgb(partition_info const&, image_block const&, partition_lines3*, float&,
   float&) */

void compute_error_squared_rgb
               (partition_info *param_1,image_block *param_2,partition_lines3 *param_3,
               float *param_4,float *param_5)

{
  partition_info pVar1;
  ushort uVar2;
  uint uVar3;
  bool bVar4;
  bool bVar5;
  bool bVar6;
  undefined1 auVar7 [13];
  float fVar8;
  float fVar9;
  float fVar10;
  float fVar11;
  float fVar12;
  float fVar13;
  float fVar14;
  float fVar15;
  float fVar16;
  float fVar17;
  float fVar18;
  uint5 uVar19;
  undefined1 auVar20 [13];
  long lVar21;
  partition_lines3 *ppVar22;
  uint uVar23;
  partition_info *ppVar24;
  long lVar25;
  long lVar26;
  partition_info *ppVar27;
  long lVar28;
  float fVar29;
  float fVar30;
  float fVar33;
  float fVar34;
  float fVar35;
  float fVar36;
  float fVar37;
  float fVar38;
  undefined1 auVar31 [16];
  undefined1 auVar32 [16];
  float fVar39;
  float fVar40;
  float fVar41;
  float fVar42;
  float fVar43;
  float fVar44;
  float fVar45;
  float fVar46;
  float fVar47;
  float fVar48;
  float fVar49;
  float fVar50;
  float fVar51;
  float fVar55;
  float fVar56;
  undefined1 auVar52 [16];
  undefined1 auVar53 [16];
  undefined1 auVar54 [16];
  float fVar57;
  undefined4 uVar58;
  float fVar59;
  undefined1 auVar60 [16];
  int iVar61;
  int iVar62;
  int iVar63;
  int iVar64;
  uint uVar65;
  float fVar66;
  float fVar67;
  float fVar68;
  float fVar69;
  float fVar70;
  float fVar71;
  float fVar72;
  float fVar73;
  uint uStack_64;
  uint uStack_60;
  uint uStack_5c;
  
  fVar70 = 0.0;
  fVar71 = 0.0;
  fVar72 = 0.0;
  fVar73 = 0.0;
  fVar66 = 0.0;
  fVar67 = 0.0;
  fVar68 = 0.0;
  fVar69 = 0.0;
  ppVar27 = param_1 + 0xf0;
  lVar25 = 0;
  ppVar22 = param_3 + 0x40;
  fVar8 = *(float *)(param_2 + 0xe00);
  fVar9 = *(float *)(param_2 + 0xe04);
  fVar10 = *(float *)(param_2 + 0xe08);
  uVar2 = *(ushort *)param_1;
  do {
    fVar59 = *(float *)ppVar22;
    fVar11 = *(float *)(ppVar22 + 4);
    fVar12 = *(float *)(ppVar22 + 8);
    fVar13 = *(float *)(ppVar22 + 0x30);
    fVar14 = *(float *)(ppVar22 + 0x34);
    fVar15 = *(float *)(ppVar22 + 0x38);
    pVar1 = param_1[lVar25 + 4];
    fVar16 = *(float *)(ppVar22 + 0x10);
    fVar17 = *(float *)(ppVar22 + 0x14);
    fVar18 = *(float *)(ppVar22 + 0x18);
    uVar23 = 0;
    ppVar24 = ppVar27;
    auVar54 = __LC7;
    auVar52 = __LC5;
    iVar61 = __LC0;
    iVar62 = _UNK_00101fa4;
    iVar63 = _UNK_00101fa8;
    iVar64 = _UNK_00101fac;
    do {
      uVar3 = *(uint *)ppVar24;
      uVar23 = uVar23 + 4;
      ppVar24 = ppVar24 + 4;
      uStack_64 = (uint)(byte)pVar1;
      uStack_60 = (uint)(byte)pVar1;
      uStack_5c = (uint)(byte)pVar1;
      auVar7[0xc] = (char)(uVar3 >> 0x18);
      auVar7._0_12_ = ZEXT712(0);
      uVar19 = CONCAT32(auVar7._10_3_,(ushort)(byte)(uVar3 >> 0x10));
      auVar20._5_8_ = 0;
      auVar20._0_5_ = uVar19;
      uVar65 = -(uint)(iVar61 < (int)(uint)(byte)pVar1);
      bVar4 = iVar62 < (int)uStack_64;
      bVar5 = iVar63 < (int)uStack_60;
      bVar6 = iVar64 < (int)uStack_5c;
      iVar61 = iVar61 + __LC1;
      iVar62 = iVar62 + _UNK_00101fb4;
      iVar63 = iVar63 + _UNK_00101fb8;
      iVar64 = iVar64 + _UNK_00101fbc;
      lVar21 = (long)(int)(uVar3 & 0xff);
      lVar28 = (long)(int)(uint)(uint3)(auVar7._10_3_ >> 0x10);
      fVar40 = *(float *)(param_2 + lVar21 * 4);
      fVar47 = *(float *)(param_2 + lVar21 * 4 + 0x370);
      fVar30 = *(float *)(param_2 + lVar21 * 4 + 0x6e0);
      lVar26 = (long)(int)uVar19;
      fVar46 = *(float *)(param_2 + lVar28 * 4);
      fVar44 = *(float *)(param_2 + lVar26 * 4);
      lVar21 = (long)(int)CONCAT72(SUB137(auVar20 << 0x40,6),(ushort)(byte)(uVar3 >> 8));
      fVar42 = *(float *)(param_2 + lVar21 * 4);
      fVar50 = *(float *)(param_2 + lVar28 * 4 + 0x370);
      fVar49 = *(float *)(param_2 + lVar26 * 4 + 0x370);
      fVar48 = *(float *)(param_2 + lVar21 * 4 + 0x370);
      fVar38 = *(float *)(param_2 + lVar28 * 4 + 0x6e0);
      fVar36 = *(float *)(param_2 + lVar26 * 4 + 0x6e0);
      fVar34 = *(float *)(param_2 + lVar21 * 4 + 0x6e0);
      fVar29 = fVar47 * fVar17 + fVar16 * fVar40 + fVar18 * fVar30;
      fVar33 = fVar48 * fVar17 + fVar16 * fVar42 + fVar18 * fVar34;
      fVar35 = fVar49 * fVar17 + fVar16 * fVar44 + fVar18 * fVar36;
      fVar37 = fVar50 * fVar17 + fVar16 * fVar46 + fVar18 * fVar38;
      auVar60._8_4_ = fVar35;
      auVar60._0_8_ = CONCAT44(fVar33,fVar29);
      auVar60._12_4_ = fVar37;
      auVar52 = minps(auVar60,auVar52);
      auVar53._8_4_ = fVar35;
      auVar53._0_8_ = CONCAT44(fVar33,fVar29);
      auVar53._12_4_ = fVar37;
      auVar54 = maxps(auVar53,auVar54);
      fVar39 = (fVar59 - fVar40) + fVar16 * fVar29;
      fVar41 = (fVar59 - fVar42) + fVar16 * fVar33;
      fVar43 = (fVar59 - fVar44) + fVar16 * fVar35;
      fVar45 = (fVar59 - fVar46) + fVar16 * fVar37;
      fVar51 = (fVar11 - fVar47) + fVar29 * fVar17;
      fVar55 = (fVar11 - fVar48) + fVar33 * fVar17;
      fVar56 = (fVar11 - fVar49) + fVar35 * fVar17;
      fVar57 = (fVar11 - fVar50) + fVar37 * fVar17;
      fVar29 = fVar29 * fVar18 + (fVar12 - fVar30);
      fVar33 = fVar33 * fVar18 + (fVar12 - fVar34);
      fVar35 = fVar35 * fVar18 + (fVar12 - fVar36);
      fVar37 = fVar37 * fVar18 + (fVar12 - fVar38);
      fVar70 = fVar70 + (float)((uint)(fVar9 * fVar51 * fVar51 + fVar8 * fVar39 * fVar39 +
                                      fVar10 * fVar29 * fVar29) & uVar65);
      fVar71 = fVar71 + (float)((uint)(fVar9 * fVar55 * fVar55 + fVar8 * fVar41 * fVar41 +
                                      fVar10 * fVar33 * fVar33) & -(uint)bVar4);
      fVar72 = fVar72 + (float)((uint)(fVar9 * fVar56 * fVar56 + fVar8 * fVar43 * fVar43 +
                                      fVar10 * fVar35 * fVar35) & -(uint)bVar5);
      fVar73 = fVar73 + (float)((uint)(fVar9 * fVar57 * fVar57 + fVar8 * fVar45 * fVar45 +
                                      fVar10 * fVar37 * fVar37) & -(uint)bVar6);
      fVar29 = fVar14 * fVar47 + fVar13 * fVar40 + fVar15 * fVar30;
      fVar33 = fVar14 * fVar48 + fVar13 * fVar42 + fVar15 * fVar34;
      fVar35 = fVar14 * fVar49 + fVar13 * fVar44 + fVar15 * fVar36;
      fVar37 = fVar14 * fVar50 + fVar13 * fVar46 + fVar15 * fVar38;
      fVar40 = fVar13 * fVar29 - fVar40;
      fVar42 = fVar13 * fVar33 - fVar42;
      fVar44 = fVar13 * fVar35 - fVar44;
      fVar46 = fVar13 * fVar37 - fVar46;
      fVar47 = fVar14 * fVar29 - fVar47;
      fVar48 = fVar14 * fVar33 - fVar48;
      fVar49 = fVar14 * fVar35 - fVar49;
      fVar50 = fVar14 * fVar37 - fVar50;
      fVar30 = fVar29 * fVar15 - fVar30;
      fVar34 = fVar33 * fVar15 - fVar34;
      fVar36 = fVar35 * fVar15 - fVar36;
      fVar38 = fVar37 * fVar15 - fVar38;
      fVar66 = fVar66 + (float)((uint)(fVar9 * fVar47 * fVar47 + fVar8 * fVar40 * fVar40 +
                                      fVar10 * fVar30 * fVar30) & uVar65);
      fVar67 = fVar67 + (float)((uint)(fVar9 * fVar48 * fVar48 + fVar8 * fVar42 * fVar42 +
                                      fVar10 * fVar34 * fVar34) & -(uint)bVar4);
      fVar68 = fVar68 + (float)((uint)(fVar9 * fVar49 * fVar49 + fVar8 * fVar44 * fVar44 +
                                      fVar10 * fVar36 * fVar36) & -(uint)bVar5);
      fVar69 = fVar69 + (float)((uint)(fVar9 * fVar50 * fVar50 + fVar8 * fVar46 * fVar46 +
                                      fVar10 * fVar38 * fVar38) & -(uint)bVar6);
    } while (uVar23 < (byte)pVar1);
    auVar31._0_8_ = auVar54._8_8_;
    auVar31._8_4_ = auVar54._0_4_;
    auVar31._12_4_ = auVar54._0_4_;
    auVar60 = maxps(auVar54,auVar31);
    uVar58 = auVar60._0_4_;
    auVar54._4_4_ = uVar58;
    auVar54._0_4_ = auVar60._4_4_;
    auVar54._8_4_ = uVar58;
    auVar54._12_4_ = uVar58;
    auVar54 = maxps(auVar60,auVar54);
    auVar32._0_8_ = auVar52._8_8_;
    auVar32._8_4_ = auVar52._0_4_;
    auVar32._12_4_ = auVar52._0_4_;
    auVar60 = minps(auVar52,auVar32);
    uVar58 = auVar60._0_4_;
    auVar52._4_4_ = uVar58;
    auVar52._0_4_ = auVar60._4_4_;
    auVar52._8_4_ = uVar58;
    auVar52._12_4_ = uVar58;
    auVar52 = minps(auVar60,auVar52);
    fVar59 = auVar54._0_4_ - auVar52._0_4_;
    if (fVar59 <= _LC9) {
      fVar59 = _LC9;
    }
    lVar25 = lVar25 + 1;
    *(float *)(ppVar22 + 0x40) = fVar59;
    ppVar27 = ppVar27 + 0xd8;
    ppVar22 = ppVar22 + 0x90;
  } while ((uint)lVar25 < (uint)uVar2);
  *param_4 = fVar72 + fVar70 + fVar73 + fVar71;
  *param_5 = fVar68 + fVar66 + fVar69 + fVar67;
  return;
}


